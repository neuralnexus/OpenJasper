define(["require","exports","module","underscore","backbone","request","../../serverSettingsCommon/enum/serverSettingGroupsEnum"],function(e,t,n){var r=e("underscore"),i=e("backbone"),o=e("request"),u=e("../../serverSettingsCommon/enum/serverSettingGroupsEnum"),s=i.Collection.extend({initialize:function(e,t){this.urlPUTTemplate="rest_v2/attributes?_embedded=permission",this.urlGETTemplate=this.urlPUTTemplate+"&group="+u.CUSTOM_SERVER_SETTINGS},parse:function(e){return e&&e.attribute?e.attribute:[]},url:function(e){return"PUT"===e?this.urlPUTTemplate:this.urlGETTemplate},escapeLevelId:function(e){return encodeURIComponent(e).replace("'","%27")},save:function(e,t){var n=this._modelsToJSON(t);return o({url:this.url("PUT")+this._concatNames(e),type:"PUT",contentType:"application/hal+json",headers:{Accept:"application/hal+json"},data:JSON.stringify({attribute:n})})},_modelsToJSON:function(e){return r.map(e,function(e){return e.toJSON()})},_concatNames:function(e){e=r.isArray(e)?e:[e];var t="";return r.each(e,function(e){t+="&name="+this.escapeLevelId(e.get("name"))},this),t}});n.exports=s});