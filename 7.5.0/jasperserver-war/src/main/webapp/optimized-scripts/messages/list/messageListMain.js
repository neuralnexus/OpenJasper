define("components/components.toolbarButtons.events",["require","exports","module","jquery","../util/utils.common","../core/core.events.bis","./components.toolbarButtons"],function(e,t,s){var i=e("jquery"),n=e("../util/utils.common"),o=n.isFirefox,r=n.getAsFunction,l=e("../core/core.events.bis"),a=e("./components.toolbarButtons");a.initialize=function(e){a.actionMap=e,i(".toolbar").on("mouseup mouseover mouseout","button",function(e){i(this).prop("disabled")||a["mouse"+e.type.substring(5,6).toUpperCase()+e.type.substring(6)+"Handler"](e,this)}),o()&&i(".toolbar li").each(function(e,t){i(t).css("padding","0 2px")})},a.mouseUpHandler=function(e,t){var s=t.className.indexOf("capsule")>=0?a.actionMap[t.id]:null;if(s){r(s)(e),e.stopPropagation()}},a.mouseOverHandler=function(e,t){t.className.indexOf("capsule")>=0&&t.className.indexOf("mutton")>=0&&!l.isDisabled(t)&&a.showButtonMenu(e.originalEvent,t)},a.mouseOutHandler=function(e,t){},s.exports=a}),define("messages/list/messageList",["require","exports","module","prototype","../../components/components.toolbarButtons.events","../../core/core.layout","../../util/utils.common","../../components/list.base","../../core/core.ajax","../../core/core.ajax.utils"],function(e,t,s){var i=e("prototype"),n=i.$,o=e("../../components/components.toolbarButtons.events"),r=e("../../core/core.layout"),l=e("../../util/utils.common"),a=l.matchAny,u=e("../../components/list.base"),c=u.dynamicList,d=e("../../core/core.ajax"),m=d.ajaxTargettedUpdate,f=d.AjaxRequester,h=e("../../core/core.ajax.utils"),p=h.baseErrorHandler,_={_list:null,_messageListId:"messageList",_flowExecutionKey:null,_systemConfirmMessages:[],toolbar:{_buttons:null,_id:"toolbar",initialize:function(){o.initialize({}),this._buttons=document.body.select(r.TOOLBAR_CAPSULE_PATTERN),this._initEventHandlers()},refresh:function(){this._buttons.each(function(e){o.setButtonState(e,_.hasSelectedMessages())}.bind(this))},_initEventHandlers:function(){n(this._id).observe("click",function(e){var t=a(e.element(),[r.BUTTON_PATTERN],!0),s=t.identify();_.doAction(s,Object.toQueryString({selectedIds:_.getSelectedIds()}))}.bindAsEventListener(this))}},filter:{_id:"messageFilter",initialize:function(){this._initEventHandlers()},_initEventHandlers:function(){n(this._id).observe("change",function(e){e.element();_.doAction("changeEventsType",Object.toQueryString({messageFilter:n(this._id).getValue()}))}.bindAsEventListener(this))}},initialize:function(e){this._flowExecutionKey=e.flowExecutionKey,this._systemConfirmMessages=e.systemConfirmMessages,this._list=new c.List(this._messageListId,{listTemplateDomId:"list_fourColumn_type_message",itemTemplateDomId:"list_fourColumn_type_message:unread",multiSelect:!0});var t=this._list.selectItem;this._list.selectItem=function(e){e.getValue().isHeader||t.apply(this,arguments)},this._initListEvents(),this.toolbar.initialize(),this.filter.initialize(),this.doAction("getMessages","")},_getMessageItems:function(e){var t=function(e){var t=e.select(".subject a")[0];t.update(this.getValue().subject),t.writeAttribute("href","flow.html?_flowExecutionKey="+_._flowExecutionKey+"&_eventId=viewMessage&id="+this.getValue().id);var s=e.select(".date")[0];return s.update(this.getValue().date),s.writeAttribute("title",this.getValue().timestamp),e.select(".type")[0].update(this.getValue().type),e.select(".component")[0].update(this.getValue().component),e};return e.unshift({isHeader:!0}),e.collect(function(e){var s;s=e.isHeader?"list_fourColumn_type_message:header":e.isRead?"list_fourColumn_type_message:read":"list_fourColumn_type_message:unread";var i=new c.ListItem({cssClassName:r.LEAF_CLASS,value:e,templateDomId:s});return e.isHeader?i.processTemplate=function(e){return e}:i.processTemplate=t,i}.bind(this))},_initListEvents:function(){this._list.observe("item:selected",function(e){this.refreshToolbar()}.bindAsEventListener(this)),this._list.observe("item:unselected",function(e){this.refreshToolbar()}.bindAsEventListener(this))},refreshToolbar:function(){_.toolbar.refresh()},hasSelectedMessages:function(){return this._list.getSelectedItems().length>0},getSelectedIds:function(){return this._list.getSelectedItems().collect(function(e){return e.getValue().id})},doAction:function(e,t){var s="flow.html?_flowExecutionKey="+_._flowExecutionKey+"&_eventId="+e;this._list.setItems([]),this.refreshToolbar(),m(s,{postData:t,callback:function(e){"OK"==e.status?(this._list.setItems(this._getMessageItems(e.data)),this._list.show()):alert(e.data.message)}.bind(this),errorHandler:this._serverErrorHandler,mode:f.prototype.EVAL_JSON})},_serverErrorHandler:function(e){e.getResponseHeader("LoginRequested")&&(document.location="flow.html?_flowId=logEventFlow"),p(e)||500!=e.status||(document.location="flow.html?_flowId=logEventFlow&_eventId=error",document.location="flow.html?_flowId=logEventFlow&_eventId=error")}};void 0===e&&document.observe("dom:loaded",function(){_.initialize(window.localContext.initOptions)}),s.exports=_}),define("messages/list/messageListMain",["require","exports","module","requirejs-domready","./messageList","runtime_dependencies/js-sdk/src/jrs.configs"],function(e,t,s){var i=e("requirejs-domready"),n=e("./messageList"),o=e("runtime_dependencies/js-sdk/src/jrs.configs");i(function(){n.initialize(o.messagesListInitOptions)})});