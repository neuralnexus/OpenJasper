define(["require","exports","module","backbone.marionette","underscore","../attributes/factory/attributesDesignerFactory","../attributes/view/AttributesViewer"],function(e,t,r){var i=e("backbone.marionette"),n=e("underscore"),s=e("../attributes/factory/attributesDesignerFactory"),u=e("../attributes/view/AttributesViewer"),o=i.Controller.extend({initialize:function(e){e=e||{};var t=n.extend({},e,e.designer),r=n.extend({},e,e.viewer);this.designer=s(t.type,t),this.viewer=new u(r),this.listenTo(this.designer,"change",this._triggerChangeEvent),this.setCurrentView()},render:function(e){return this.getCurrentView().render(e),this},getCurrentView:function(){return this.currentView},cancel:function(){return this.currentView.revertChanges()},containsUnsavedItems:function(){return this.currentView.containsUnsavedItems&&this.currentView.containsUnsavedItems()},setCurrentView:function(e){this.currentView=e||this.viewer},toggleMode:function(e,t){this.getCurrentView().hide(),this.setCurrentView(e?this.designer:this.viewer),this.render(t).getCurrentView().show()},_triggerChangeEvent:function(){this.trigger("change",this.containsUnsavedItems())}});r.exports=o});