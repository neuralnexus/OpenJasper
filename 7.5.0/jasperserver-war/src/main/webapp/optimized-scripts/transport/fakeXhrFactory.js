define(["require","exports","module","underscore"],function(e,r,s){var t=e("underscore");s.exports=function(e){var r={},s={};return t.extend(e,{getResponseHeader:function(r){var s,t=/^(.*?):[ \t]*([^\r\n]*)$/gm;if(4===e.readyState){if(!this.responseHeaders)for(this.responseHeaders={},s=t.exec(this.responseHeadersString);s;)this.responseHeaders[s[1].toLowerCase()]=s[2],s=t.exec(this.responseHeadersString);s=this.responseHeaders[r.toLowerCase()]}return null==s?null:s},getAllResponseHeaders:function(){return 2===e.readyState?this.responseHeadersString:null},setRequestHeader:function(t,n){var o=t.toLowerCase();return e.readyState||(t=r[o]=r[o]||t,s[t]=n),this}})}});