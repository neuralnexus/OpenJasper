define(["require","exports","module","underscore","../../scalableList/model/ListWithSelectionModel","../../scalableList/model/listWithNavigationModelTrait"],function(e,t,i){var l=e("underscore"),n=e("../../scalableList/model/ListWithSelectionModel"),s=e("../../scalableList/model/listWithNavigationModelTrait"),a=n.extend(s);a=a.extend({setActive:function(e){s.setActive.call(this,l.extend(e,{silent:!0}));var t={};"number"==typeof e.index&&(t[e.index]=e.item.value),this.select(t)},_convertInitialArrayToSelection:function(e,t,i){for(var l=0;l<e.length;l++)t[e[l].value]&&(this._addToSelection(e[l].value,l),this.getActive()||s.setActive.call(this,{index:l,item:e[l],silent:!0}));this._triggerSelectionChange(i)},_convertSelectionObject:function(e){for(var t in e)if(e.hasOwnProperty(t)&&void 0!==e[t]){var i=e[t];return{index:parseInt(t,10),value:i}}},_select:n.prototype.select,select:function(e,t){var i,n=!1;if(!e||"string"==typeof e||l.isArray(e))s.setActive.call(this,{silent:!0});else if(i=this._convertSelectionObject(e)){var a=this.getActive();a&&i.value===a.value&&i.index===a.index||(n=!0)}else s.setActive.call(this,{silent:!0});return n?this.activate(i.index):this._select(e,t),this}}),i.exports=a});