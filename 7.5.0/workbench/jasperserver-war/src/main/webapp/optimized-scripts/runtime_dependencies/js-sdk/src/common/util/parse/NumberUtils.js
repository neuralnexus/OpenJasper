define(["require","exports","module","underscore"],function(t,e,r){var i=t("underscore"),n=function(t){function e(t){return"."===t?t="\\.":" "===t&&(t="\\s"),t}t=t||{},this.DECIMAL_SEPARATOR=t.decimalSeparator||".",this.GROUPING_SEPARATOR=t.groupingSeparator||",",this.decimalSeparator=e(this.DECIMAL_SEPARATOR),this.groupingSeparator=e(this.GROUPING_SEPARATOR),this.DECIMAL_NUMBER_PATTERN=new RegExp("^-?([1-9]{1}[0-9]{0,2}("+this.groupingSeparator+"[0-9]{3})*("+this.decimalSeparator+"[0-9]+)?|[1-9]{1}[0-9]{0,}("+this.decimalSeparator+"[0-9]+)?|0("+this.decimalSeparator+"[0-9]+)?)$"),this.INTEGER_NUMBER_PATTERN=new RegExp("^-?([1-9]{1}[0-9]{0,2}("+this.groupingSeparator+"[0-9]{3})*|[1-9]{1}[0-9]{0,}|0)$")};n.prototype.number_format=function(t,e,r,i){t=(t+"").replace(/[^0-9+\-Ee.]/g,"");var n=isFinite(+t)?+t:0,o=isFinite(+e)?Math.abs(e):0,s=void 0===i?",":i,a=void 0===r?".":r,u=(o?function(t,e){var r=Math.pow(10,e);return""+(Math.round(t*r)/r).toFixed(e)}(n,o):""+Math.round(n)).split(".");return u[0].length>3&&(u[0]=u[0].replace(/\B(?=(?:\d{3})+(?!\d))/g,s)),(u[1]||"").length<o&&(u[1]=u[1]||"",u[1]+=new Array(o-u[1].length+1).join("0")),u.join(a)},n.prototype.isInt=function(t){return this.isNumberInt(t)||this.isStringInt(t)},n.prototype.isNumberInt=function(t){return i.isNumber(t)&&!isNaN(t)&&t!==Number.POSITIVE_INFINITY&&t!==Number.NEGATIVE_INFINITY&&(t===+t&&t===(0|t)||t%1==0)},n.prototype.isStringInt=function(t){return i.isString(t)&&this.INTEGER_NUMBER_PATTERN.test(t)},n.prototype.isInt32=function(t){return this.isInt(t)&&this.parseNumber(t)>=-2147483648&&this.parseNumber(t)<=2147483647},n.prototype.isDecimal=function(t){return i.isNumber(t)&&!isNaN(t)&&t!==Number.POSITIVE_INFINITY&&t!==Number.NEGATIVE_INFINITY||i.isString(t)&&this.DECIMAL_NUMBER_PATTERN.test(t)},n.prototype.parseNumber=function(t){if(i.isNumber(t))return t;if(i.isString(t)&&this.DECIMAL_NUMBER_PATTERN.test(t)){t=t.replace(new RegExp(this.groupingSeparator,"g"),"").replace(new RegExp(this.decimalSeparator,"g"),".");var e=1*t;return e>9007199254740992||e<-9007199254740992?(window.console&&window.console.warn(t+" is out of the ["+-9007199254740992+", 9007199254740992] bounds. Parsing results may be corrupted. Use string representation instead. For more details see https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Number."),!1):e}},n.prototype.formatNumber=function(t,e){e=e||{};var r=t.toString().split(".")[1],n=r?r.length:0;i.isUndefined(e.decimalPlacesAmount)||(n=e.decimalPlacesAmount);try{return this.number_format(t,n,e.decimalSeparator||this.DECIMAL_SEPARATOR,e.groupingSeparator||this.GROUPING_SEPARATOR)}catch(e){return t.toString()}},r.exports=n});