define(["require","exports","module","./AttachableComponent","jquery","underscore"],function(t,o,e){var n=t("./AttachableComponent"),i=t("jquery"),s=t("underscore");e.exports=n.extend({constructor:function(t,o,e){this.additionalSettings=e||{},n.apply(this,arguments),s.bindAll(this,"_onElementClick","_onDocumentMousedown"),this.$attachTo.on("click",this._onElementClick),i("body").on("mousedown",this._onDocumentMousedown)},_onElementClick:function(){this.$attachTo.attr("disabled")||(this.$el.is(":visible")&&this.additionalSettings.toggleMode?this.hide():this.show())},_onDocumentMousedown:function(t){i.contains(this.$el[0],t.target)||this.$el.is(t.target)||i.contains(this.$attachTo[0],t.target)||this.$attachTo.is(t.target)||this.hide()},remove:function(){this.$attachTo.off("click",this._onElementClick),i("body").off("mousedown",this._onDocumentMousedown)}})});