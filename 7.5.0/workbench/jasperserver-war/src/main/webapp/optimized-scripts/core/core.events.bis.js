define(["require","exports","module","prototype","jquery","../util/utils.common","../core/core.layout","../util/touch.controller","../components/components.tooltip","../actionModel/actionModel.primaryNavigation","./core.buttonManager"],function(t,o,e){var n=t("prototype"),i=n.$,s=t("jquery"),u=t("../util/utils.common"),a=u.isSupportsTouch,r=u.matchMeOrUp,d=u.isRightClick,c=u.isIE,T=u.hasDisabledAttributeSet,h=t("../core/core.layout"),m=t("../util/touch.controller"),l=t("../components/components.tooltip"),E=l.tooltipModule,N=t("../actionModel/actionModel.primaryNavigation"),p=t("./core.buttonManager");document.observe(a()?"drag:touchstart":"drag:mousedown",function(t){var o=t.memo.targetEvent.element();if(!a()||!event.treeEvent&&!event.listEvent){var e=r(o,h.LIST_ITEM_PATTERN);e&&!o.match(h.DISCLOSURE_BUTTON_PATTERN)&&p.down(e,function(t){return i(t).down(h.LIST_ITEM_WRAP_PATTERN)}),o.match(h.DISCLOSURE_BUTTON_PATTERN)&&p.down(o)}}),document.observe("mouseup",function(t){if(d(t)){var o=t.element();document.fire(h.ELEMENT_CONTEXTMENU,{targetEvent:t,node:o})}}),document.observe("contextmenu",function(t){return Event.stop(t),!1}),document.observe("dom:loaded",function(t){var o=function(t){return void 0===s(t).data("globalEvents")};c()&&document.body.setAttribute("oncontextmenu","return false"),s("body").on("mouseover",h.BUTTON_PATTERN,function(t){!T(this)&&o(this)&&p.over(this)}),s("body").on("mouseout",h.BUTTON_PATTERN,function(t){o(this)&&p.out(this)}),s("body").on("focus",h.BUTTON_PATTERN,function(t){!T(this)&&o(this)&&p.over(this)}),s("body").on("blur",h.BUTTON_PATTERN+"."+h.HOVERED_CLASS,function(t){!T(this)&&o(this)&&p.out(this)}),s("body").on("mousedown mouseup touchstart touchend",[h.BUTTON_PATTERN,h.MENU_LIST_PATTERN,h.DISCLOSURE_BUTTON_PATTERN,h.META_LINKS_PATTERN].join(","),function(t){"mousedown"==t.type||"touchstart"==t.type?!T(this)&&o(this)&&p.down(this):!T(this)&&o(this)&&p.up(this),"mouseup"!=t.type&&"touchend"!=t.type||(this.parentNode.id==h.MAIN_NAVIGATION_HOME_ITEM_ID&&N.navigationOption("home"),this.parentNode.id==h.MAIN_NAVIGATION_LIBRARY_ITEM_ID&&N.navigationOption("library"))}),s("#frame").on("touchend mouseup",".minimize",function(t){this.parentNode.className.indexOf("maximized")>=0?h.minimize(this):h.maximize(this),t.preventDefault()}),s("#frame").on("touchend mouseup",h.TABSET_TAB_PATTERN,function(t){if(!T(this)&&o(this)&&"true"!==s(this.parentNode).attr("disableCoreEvents")){s(this).siblings().removeClass(h.SELECTED_CLASS).each(function(t,o){s(s(this).attr("tabId")).addClass("hidden")}),s(this).addClass(h.SELECTED_CLASS),s(s(this).attr("tabId")).removeClass("hidden");var e=s(this).closest(".tabs").find(".control.tabSet.anchor");"#attributesTab"===s(this).attr("tabId")?e.addClass("attributesAnchor"):e.removeClass("attributesAnchor")}}),s("#"+h.META_LINK_LOGOUT_ID).on("mousedown touchstart",function(t){t.preventDefault(),N.navigationOption("logOut")}),s("body").on("mouseover mouseout click","[tooltiptext]",function(t){("mouseout"==t.type||"click"==t.type)&&E.hideJSTooltip(this),"mouseover"==t.type&&E.showJSTooltip(this,[t.clientX,t.clientY])}),s("#mainNavigation").on("mouseover",h.NAVIGATION_MUTTON_PATTERN,function(t){N.showNavButtonMenu(t,this)}),a()&&(document.body.addEventListener("touchstart",function(t){window.calendar&&window.calendar.hide&&!window.calendar.hidden&&window.calendar.hide(),void 0!==m&&(m.element_scrolled=!1)},!1),document.body.addEventListener("touchmove",function(t){},!1)),s("#filePath").on("mouseenter mouseout",function(){s("#fake_upload_button").toggleClass("over")})}),e.exports=p});