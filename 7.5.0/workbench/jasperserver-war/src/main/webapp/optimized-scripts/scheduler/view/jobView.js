define(["require","exports","module","underscore","backbone","text!../template/list/oneJob.htm","text!../template/list/oneMasterJob.htm","bundle!all","runtime_dependencies/js-sdk/src/common/util/xssUtil","runtime_dependencies/js-sdk/src/common/component/dialog/ConfirmationDialog","../enum/jobStateEnum","runtime_dependencies/js-sdk/src/common/util/parse/date"],function(e,t,i){var n=e("underscore"),o=e("backbone"),s=e("text!../template/list/oneJob.htm"),a=e("text!../template/list/oneMasterJob.htm"),l=e("bundle!all"),r=e("runtime_dependencies/js-sdk/src/common/util/xssUtil"),m=e("runtime_dependencies/js-sdk/src/common/component/dialog/ConfirmationDialog"),d=e("../enum/jobStateEnum"),c=e("runtime_dependencies/js-sdk/src/common/util/parse/date"),u=function(e){return e.state.previousFireTime?c.isoTimestampToLocalizedTimestampByTimezone(e.state.previousFireTime):""},p=function(e){var t=e.state.value;return t!==d.NORMAL&&t!==d.EXECUTING?l["report.scheduling.list.label.disabled"]:e.state.nextFireTime?c.isoTimestampToLocalizedTimestampByTimezone(e.state.nextFireTime):""},b=function(e){var t=e.state.value;return t===d.NORMAL||t===d.EXECUTING};i.exports=o.View.extend({tagName:"li",className:"jobs first leaf",events:{"click [name=editJob]":"edit","click [name=deleteJob]":"remove","change [name=enableJob]":"enable"},initialize:function(e){this.options=n.extend({},e);var t=this.options.masterViewMode?a:s;this.template=n.template(t),this.model.on("change",this.render,this)},render:function(){var e=this.model.toJSON();return this.$el.html(this.template({model:e,i18n:l,lastRanDate:u(e),nextRunDate:p(e),isJobEnabled:b(e)})),this},edit:function(){this.trigger("editJobPressed",this.model.get("id"))},remove:function(){var e=this,t=l["report.scheduling.editing.job.confirm.delete"].replace("{name}",r.hardEscape(this.model.get("label"))).replace("{newline}","<br><br>"),i=new m({title:l["report.scheduling.editing.job.confirm.title"],text:t,additionalCssClasses:"schedulerJobRemoveDialog"});this.listenTo(i,"button:yes",function(){e.model.destroy()}),i.open()},enable:function(e){this.model.state(e.target.checked)}})});