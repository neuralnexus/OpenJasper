define("resource/resource.base",["require","exports","module","prototype","../util/touch.controller","../util/utils.common","../core/core.events.bis","../dynamicTree/dynamicTree.utils"],function(e,t,i){var r=e("prototype"),s=r.$,o=r.$$,n=r.$break,a=e("../util/touch.controller"),l=e("../util/utils.common"),d=l.buildActionUrl,u=l.isIPad,c=e("../core/core.events.bis"),m=e("../dynamicTree/dynamicTree.utils"),_={messages:{},resourceLabelMaxLength:100,resourceIdMaxLength:100,resourceDescriptionMaxLength:250,PROPAGATE_EVENT:"propagateEvent",STEP_DISPLAY_ID:"stepDisplay",FLOW_CONTROLS_ID:"flowControls",initSwipeScroll:function(){var e=s(_.STEP_DISPLAY_ID);e&&new a(e.up(),e.up(1),{})},submitForm:function(e,t,i){if(t){var r=d(t);i&&i(),s(e).writeAttribute("method","post").writeAttribute("action",r),s(e).submit()}},registerClickHandlers:function(e,t,i){if(_._bodyClickEventHandlers)return void(i?Array.prototype.unshift:Array.prototype.push).apply(_._bodyClickEventHandlers,e);_._bodyClickEventHandlers=e,o(t||"body")[0].observe("click",function(e){_._bodyClickEventHandlers&&_._bodyClickEventHandlers.each(function(t){var i=t(e);if(i)throw i!==_.PROPAGATE_EVENT&&Event.stop(e),n})})},TreeWrapper:function(e){var t=this;if(this._treeId=e.treeId,this._resourceUriInput=s(e.resourceUriInput||"resourceUri"),this._uri=this._resourceUriInput&&this._resourceUriInput.getValue()||e.uri||"/",!e.providerId)throw"There is no tree provider set for tree #{id}".interpolate({id:this._treeId});var i=["providerId","rootUri","organizationId","publicFolderUri","urlGetNode","urlGetChildren"].inject({},function(t,i){return null!==e[i]&&(t[i]=e[i]),t});return this._tree=new m.createRepositoryTree(this._treeId,i),this._tree.observe("tree:loaded",function(){t._tree.openAndSelectNode(s(t._resourceUriInput).getValue())}),this._tree.observe("leaf:selected",function(e){t._uri=e.memo.node.param.uri,t._resourceUriInput.setValue(t._uri)}),this._tree.observe("node:selected",function(){t._resourceUriInput.setValue(t._uri="")}),{getTreeId:function(){return t._treeId},getTree:function(){return t._tree},selectFolder:function(e){t._tree.openAndSelectNode(e)},getSelectedFolderUri:function(){return t._uri}}},switchButtonState:function(e,t){c[t?"enable":"disable"].call(c,e)},switchDisableState:function(e,t){(e=s(e))&&e[t?"disable":"enable"].call(e)},generateResourceId:function(e){if(window.localContext&&window.localContext.initOptions&&window.localContext.initOptions.resourceIdNotSupportedSymbols)return e.replace(new RegExp(window.localContext.initOptions.resourceIdNotSupportedSymbols,"g"),"_");throw"There is no resourceIdNotSupportedSymbols property in init options."},testResourceId:function(e){if(window.localContext&&window.localContext.initOptions&&window.localContext.initOptions.resourceIdNotSupportedSymbols)return new RegExp(window.localContext.initOptions.resourceIdNotSupportedSymbols,"g").test(e);throw"There is no resourceIdNotSupportedSymbols property in init options."},labelValidator:function(e){var t=!0,i="";return e.blank()?(i=_.messages.labelIsEmpty,t=!1):e.length>_.resourceLabelMaxLength&&(i=_.messages.labelToLong,t=!1),{isValid:t,errorMessage:i}},getLabelValidationEntry:function(e){return{element:e,validators:[{method:"mandatory",messages:{mandatory:_.messages.labelIsEmpty}},{method:"minMaxLength",messages:{tooLong:_.messages.labelToLong},options:{maxLength:_.resourceLabelMaxLength}}]}},getIdValidationEntry:function(e){return{element:e,validators:[{method:"resourceIdChars",messages:_.messages},{method:"mandatory",messages:{mandatory:_.messages.resourceIdIsEmpty}},{method:"minMaxLength",messages:{tooLong:_.messages.resourceIdToLong},options:{maxLength:_.resourceIdMaxLength}}]}},resourceIdValidator:function(e){var t=!0,i="";return this._isEditMode||(e.blank()?(i=_.messages.resourceIdIsEmpty,t=!1):e.length>_.resourceIdMaxLength?(i=_.messages.resourceIdToLong,t=!1):_.testResourceId(e)&&(i=_.messages.resourceIdInvalidChars,t=!1)),{isValid:t,errorMessage:i}},getDescriptionValidationEntry:function(e){return{element:e,validators:[{method:"minMaxLength",messages:{tooLong:_.messages.descriptionToLong},options:{maxLength:_.resourceDescriptionMaxLength}}]}},descriptionValidator:function(e){var t=!0,i="";return e.length>_.resourceDescriptionMaxLength&&(i=_.messages.descriptionToLong,t=!1),{isValid:t,errorMessage:i}},dataSourceValidator:function(e){var t=!0,i="";return""===e.trim()&&(i=_.messages.dataSourceInvalid,t=!1),{isValid:t,errorMessage:i}},queryValidator:function(e){var t=!0,i="";return""===e.trim()&&(i=_.messages.queryInvalid,t=!1),{isValid:t,errorMessage:i}},getValidationEntries:function(e){return e.collect(function(e){return e.validationEntry?e.validationEntry:{validator:e.validator,element:e}})}};void 0===e&&u()&&document.observe("dom:loaded",_.initSwipeScroll.bind(_)),i.exports=_}),define("resource/resource.listofvalues",["require","exports","module","prototype","./resource.base","../util/utils.common","../util/utils.common"],function(e,t,i){var r=e("prototype"),s=r.$,o=e("./resource.base"),n=e("../util/utils.common"),a=n.matchAny,l=e("../util/utils.common"),d=l.ValidationModule,u={LABEL_ID:"labelID",RESOURCE_ID_ID:"resourceID",DESCRIPTION_ID:"description",ITEM_NAME_ID:"name",ITEM_VALUE_ID:"value",SUBMIT_EVENT_ID:"submitEvent",ITEM_TO_DELETE_ID:"itemToDelete",SAVE_BUTTON_PATTERN:"#save",CANCEL_BUTTON_PATTERN:"#cancel",ADD_LINK_ID:"add",LINK_PATTERN:"a.launcher",_canGenerateId:!0,initialize:function(e){this._form=s(document.body).select("form")[0],this._label=s(this.LABEL_ID),this._resourceId=s(this.RESOURCE_ID_ID),this._description=s(this.DESCRIPTION_ID),this._itemName=s(this.ITEM_NAME_ID),this._itemValue=s(this.ITEM_VALUE_ID),this._submitEvent=s(this.SUBMIT_EVENT_ID),this._itemToDelete=s(this.ITEM_TO_DELETE_ID),this._addLink=s(this.ADD_LINK_ID),this._isEditMode=e.isEditMode,this._label.validator=o.labelValidator.bind(this),this._resourceId.validator=o.resourceIdValidator.bind(this),this._description.validator=o.descriptionValidator.bind(this),this._itemName.validator=this._itemNameValidator.bind(this),this._itemValue.validator=this._itemValueValidator.bind(this),this._initEvents()},_initEvents:function(){this._form.observe("click",function(e){var t=e.element();if(e.stop(),a(t,[this.SAVE_BUTTON_PATTERN],!0))this._isDataValid()&&(this._submitEvent.writeAttribute("name","_eventId_save"),this._form.submit());else if(t==this._addLink)this._isValueDataValid()&&this._isDataValid()&&(this._submitEvent.writeAttribute("name","_eventId_addItem"),this._form.submit());else if(a(t,[this.LINK_PATTERN],!0)&&t!=this._addLink){var i=t.identify();this._itemToDelete.setValue(i),this._submitEvent.writeAttribute("name","_eventId_removeItem"),this._form.submit()}else a(t,[this.CANCEL_BUTTON_PATTERN],!0)&&(this._submitEvent.writeAttribute("name","_eventId_cancel"),this._form.submit())}.bindAsEventListener(this)),this._form.observe("keyup",function(e){var t=e.element();[this._label,this._resourceId,this._description,this._itemName,this._itemValue].include(t)&&(d.validate(o.getValidationEntries([t])),t==this._resourceId&&this._resourceId.getValue()!=o.generateResourceId(this._label.getValue())&&(this._canGenerateId=!1),t==this._label&&!this._isEditMode&&this._canGenerateId&&(this._resourceId.setValue(o.generateResourceId(this._label.getValue())),d.validate(o.getValidationEntries([this._resourceId]))))}.bindAsEventListener(this))},_isDataValid:function(){var e=[this._label,this._resourceId,this._description];return d.validate(o.getValidationEntries(e))},_isValueDataValid:function(){var e=[this._itemName,this._itemValue];return d.validate(o.getValidationEntries(e))},_itemNameValidator:function(e){var t=!0,i="";return e.blank()&&(i=o.messages.itemNameIsEmpty,t=!1),{isValid:t,errorMessage:i}},_itemValueValidator:function(e){var t=!0,i="";return e.blank()&&(i=o.messages.itemValueIsEmpty,t=!1),{isValid:t,errorMessage:i}}};void 0===e&&document.observe("dom:loaded",function(){u.initialize(window.localContext.initOptions)}),i.exports=u}),define("addResource/listOfValues/addListOfValuesMain",["require","exports","module","requirejs-domready","underscore","runtime_dependencies/js-sdk/src/jrs.configs","../../resource/resource.base","../../resource/resource.listofvalues","../../util/utils.common"],function(e,t,i){var r=e("requirejs-domready"),s=e("underscore"),o=e("runtime_dependencies/js-sdk/src/jrs.configs"),n=e("../../resource/resource.base"),a=e("../../resource/resource.listofvalues"),l=e("../../util/utils.common"),d=l.isIPad;r(function(){var e=o.addListOfValues.localContext.initOptions;s.extend(window.localContext,o.addListOfValues.localContext),s.extend(n.messages,o.addListOfValues.resource.messages),a.initialize(e),d()&&n.initSwipeScroll()})});