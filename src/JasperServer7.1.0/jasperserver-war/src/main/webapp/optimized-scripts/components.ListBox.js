function ListBox(t,e){this.id=t,this.listBoxModel=e,this.options=[],this.selected=[],this.selectedIndex=-1,this.multiple=!0,this.onclick=function(t){},this.ondblclick=function(t){},this.onselect=function(t){},this.ondeselect=function(t){},this._container=document.getElementById(t),this._table=null,this.selectionClass="optionSelected",this.optionClassName="",this.tooltipDelay=500,this._init(),this._container.list=this,this.listBoxModel&&this.refresh()}ListBox.prototype.setSelectedClassName=function(t){this.selectionClass=t},ListBox.prototype.setOptionClassName=function(t){this.optionClassName=t},ListBox._LIST_TABLE_ID="ListBoxTable",ListBox._LIST_TEMPLATE='<table id="'+ListBox._LIST_TABLE_ID+'" style="width:100%;" cellspacing="0" cellpadding="0" border="0"><tbody></tbody></table>',ListBox.cursorEvent,ListBox.prototype._init=function(){this._container.innerHTML=this._getHtmlTemplate(),this._table=document.getElementById(this._getListTableId()),this._table.className=this.listClassName;this._table.onclick=function(t){window.event?window.event:t},this._table.onmousemove=function(t){var e=window.event?window.event:t;ListBox.cursorEvent={clientX:e.clientX,clientY:e.clientY}}},ListBox.prototype._getHtmlTemplate=function(){var t=ListBox._LIST_TEMPLATE.replace(new RegExp(ListBox._LIST_TABLE_ID),this._getListTableId());return t},ListBox.prototype._getListTableId=function(){return this.id+ListBox._LIST_TABLE_ID},ListBox.prototype.addOption=function(t,e,i,s){var o=this._table.insertRow(-1),n=o.insertCell(-1);n.value=t,n.cusotmTooltip=s,n.innerHTML=e,n.noWrap="noWrap",i?(n.defaultClass=i,n.className=i):(n.defaultClass=this.optionClassName,n.className=this.optionClassName),n.optionIndex=n.parentNode.rowIndex;var l=this;return n.ondblclick=function(t){var e=window.event?window.event:t;l.ondblclick(e)},this._addSelectionSupport(n),this._addTooltipSupport(n),this.options.push(n),n},ListBox.prototype.removeOption=function(t){t>-1&&t<this.options.length&&(this.options.splice(t,1),this._table.deleteRow(t),this._updateIndexes(),this.selectedIndex==t&&(this.selectedIndex=-1),this._removeFromSelected(t))},ListBox.prototype.clear=function(){for(var t=this._table.rows.length,e=0;t>e;e++)this._table.deleteRow(0);this.options=[],this.selectedIndex=-1,this.selected=[]},ListBox.prototype._addSelectionSupport=function(t){var e=this;t.onclick=function(i){var s=window.event?window.event:i,o=!0;s&&s.ctrlKey?t.selected?(t.className=t.defaultClass,t.selected=!1,e._removeFromSelected(t.optionIndex),e.selected.length>0?e.selectedIndex=e.selected[e.selected.length-1]:e.selectedIndex=-1,e.ondeselect(t)):(e.multiple||(e.deselectAll(),e.selected=[]),t.className=e.selectionClass,t.selected=!0,e.selectedIndex=t.optionIndex,e.selected.push(t.optionIndex),e.onselect(t)):(t.selected&&(o=!1),e.deselectAll(),t.className=e.selectionClass,t.selected=!0,e.selectedIndex=t.optionIndex,e.selected=[],e.selected.push(t.optionIndex),o&&e.onselect(t)),o&&e.onclick(s)}},ListBox.prototype.selectOption=function(t){t>-1&&this.options[t].onclick()},ListBox.prototype.selectOptionMulti=function(t){t>-1&&this.options[t].onclick({ctrlKey:!0})},ListBox.prototype.deselectAll=function(){for(var t=0;t<this.options.length;t++)this.options[t].selected&&(this.options[t].selected=!1,this._removeFromSelected(t),this.options[t].className=this.options[t].defaultClass)},ListBox.prototype._updateIndexes=function(){for(var t=0;t<this.options.length;t++)this.options[t].optionIndex=this.options[t].parentNode.rowIndex},ListBox.prototype._addToSelected=function(t){for(var e=!1,i=0;i<this.selected.length;i++)this.selected[i]==t&&(e=!0);e||this.selected.push(t)},ListBox.prototype._removeFromSelected=function(t){for(var e=0;e<this.selected.length;e++)this.selected[e]==t&&this.selected.splice(e,1)},ListBox.prototype.getSelectedValues=function(){for(var t=[],e=0;e<this.selected.length;e++)t.push(this.options[this.selected[e]].value);return t},ListBox.prototype.getSelected=function(){return this.selected},ListBox.prototype.getModel=function(){return this.listBoxModel},ListBox.prototype.setModel=function(t){this.listBoxModel=t,this.refresh()},ListBox.prototype.refresh=function(){if(this.clear(),this.listBoxModel)for(var t=0;t<this.listBoxModel.getOptionsCount();t++){var e=this.listBoxModel.getValueAt(t),i=this.listBoxModel.getValueHtmlAt(t),s=this.listBoxModel.getClassNameAt(t),o=this.listBoxModel.getTooltipAt(t);this.addOption(e,i,s,o)}},ListBox.prototype.setTooltipDelay=function(t){this.tooltipDelay=t},ListBox.prototype._addTooltipSupport=function(t){var e=this;if(t.cusotmTooltip){var i;t.onmouseover=function(s){function o(e){({clientX:e.clientX,clientY:e.clientY});return function(){var i=ListBox.cursorEvent?ListBox.cursorEvent:e;showCustomTooltip(i,t.cusotmTooltip,null,null,null,20)}}var n=window.event?window.event:s;e.tooltipDelay>-1?i=setTimeout(o(n),e.tooltipDelay):o(n)()},t.onmouseout=function(t){var e=window.event?window.event:t;hideCustomTooltip(e,!1),i&&clearTimeout(i)}}};var ListBoxModel=Class.create({initialize:function(t){this.values=t},getOptionsCount:function(){return this.values.length},getValueAt:function(t){return this.values[t]},getValueHtmlAt:function(t){return this.values[t]},getClassNameAt:function(t){return""},getTooltipAt:function(t){return""}}),PaginatedListBoxModel=Class.create(ListBoxModel,{initialize:function(t,e,i,s){this.values=t,this.firstResult=e,this.maxResult=i,this.totalResult=s},getOptionsCount:function(){return this.values.length},getValues:function(){return this.values},getValueAt:function(t){return this.values[t]},getValueHtmlAt:function(t){return this.values[t]},getClassNameAt:function(t){return this.values[t]},getFirstResult:function(){return this.firstResult},getMaxResult:function(){return this.maxResult},getTotalResult:function(){return this.totalResult},containsValue:function(t){for(var e=!1,i=this.getOptionsCount(),s=0;i>s;s++)this.getValueAt(s)==t&&(e=!0);return e},getValueIndex:function(t){for(var e=this.getOptionsCount(),i=0;e>i;i++)if(this.getValueAt(i)==t)return i;return-1}});PaginatedListBoxModel.MESSAGE_SOURCE={};var PaginatedListBox=Class.create({initialize:function(t,e){this.id=t,this.model=e,this.navPanelHeight=60,this.container=$(this.id),this.container.style.overflow="hidden",this.container.innerHTML=this._getHtmlTemplate(),this.listBoxContainer=$(this._getListBoxId()),this.navigationPanel=$(this._getListPageNavigationPanelId()),this.status=$(this._getListStatusId()),this.prevLink=new LinkButton(this._getPageLinkPrevId(),PaginatedListBox.PAGE_LINK_CLASS_NAME,PaginatedListBox.PAGE_LINK_HOVER_CLASS_NAME,PaginatedListBox.PAGE_LINK_DISABLED_CLASS_NAME),this.nextLink=new LinkButton(this._getPageLinkNextId(),PaginatedListBox.PAGE_LINK_CLASS_NAME,PaginatedListBox.PAGE_LINK_HOVER_CLASS_NAME,PaginatedListBox.PAGE_LINK_DISABLED_CLASS_NAME),this._setUpNavigation(),this.navigationPanelHeight=this.navigationPanel.clientHeight,this.refresh(),this.listBox=new ListBox(this._getListBoxId(),this.model);var i=this;this.listBox.onclick=function(t){i.onclick(t)}},getList:function(){return this.listBox},refresh:function(){this.getModel()&&this.listBox.setModel(this.getModel()),this.resize(),this.getModel()&&this.getModel().getMaxResult()<this.getModel().getTotalResult()?(this.status.innerHTML=this.getStatus(),this.prevLink.setDisabled(0===this.getModel().getFirstResult()),this.nextLink.setDisabled(this.getShowingResult()==this.getModel().getTotalResult()),this.navigationPanel.show()):(this.status.innerHTML=PaginatedListBox.SHOWING_TITLE+"&nbsp; 0",this.navigationPanel.hide())},resize:function(){var t=this.getHeight();this.getModel()&&this.getModel().getMaxResult()<this.getModel().getTotalResult()?this.listBoxContainer.style.height=this.getHeight()-this.navPanelHeight+"px":this.listBoxContainer.style.height=t+"px"},getModel:function(){return this.model},setModel:function(t){this.model=t,this.refresh()},getSelected:function(){return this.listBox.getSelected()},getSelectedValues:function(){return this.listBox.getSelectedValues()},getWidth:function(){return this.container.clientWidth},getHeight:function(){return this.container.clientHeight},getStatus:function(){return PaginatedListBox.SHOWING_TITLE+"&nbsp;"+(this.getModel().getFirstResult()+1)+"-"+this.getShowingResult()+"&nbsp;"+PaginatedListBox.ABOUT_TITLE+"&nbsp;"+this.getModel().getTotalResult()},getShowingResult:function(){return this.getModel().getFirstResult()+this.getModel().getOptionsCount()},setSelectedClassName:function(t){this.listBox.selectionClass=t},setOptionClassName:function(t){this.listBox.optionClassName=t},reload:function(){var t=this;this.onreload(t.getModel().getFirstResult(),this.listBox.getSelected())},onreload:function(t){},onprev:function(t){},onnext:function(t){},onclick:function(t){},_getHtmlTemplate:function(){var t=PaginatedListBox._PAGE_NAV_TEMPLATE;return t=t.replace(new RegExp(PaginatedListBox._LIST_BOX_ID),this._getListBoxId()),t=t.replace(new RegExp(PaginatedListBox._PAGE_NAV_PANEL_ID),this._getListPageNavigationPanelId()),t=t.replace(new RegExp(PaginatedListBox._LIST_STATUS_ID),this._getListStatusId()),t=t.replace(new RegExp(PaginatedListBox._PAGE_LINK_PREV_ID),this._getPageLinkPrevId()),t=t.replace(new RegExp(PaginatedListBox._PAGE_LINK_NEXT_ID),this._getPageLinkNextId())},_getListBoxId:function(){return this.id+PaginatedListBox._LIST_BOX_ID},_getListPageNavigationPanelId:function(){return this.id+PaginatedListBox._PAGE_NAV_PANEL_ID},_getListStatusId:function(){return this.id+PaginatedListBox._LIST_STATUS_ID},_getPageLinkPrevId:function(){return this.id+PaginatedListBox._PAGE_LINK_PREV_ID},_getPageLinkNextId:function(){return this.id+PaginatedListBox._PAGE_LINK_NEXT_ID},_setUpNavigation:function(){var t=this;this.prevLink.getElement().innerHTML=PaginatedListBox.PAGE_LINK_PREV_TITLE,this.nextLink.getElement().innerHTML=PaginatedListBox.PAGE_LINK_NEXT_TITLE,this.prevLink.onclick=function(){t.onprev(t.getModel().getFirstResult()-t.getModel().getMaxResult())},this.nextLink.onclick=function(){t.onnext(t.getShowingResult())}}});PaginatedListBox.SHOWING_TITLE="Showing",PaginatedListBox.ABOUT_TITLE="of about",PaginatedListBox.PAGE_LINK_CLASS_NAME="pageLink",PaginatedListBox.PAGE_LINK_HOVER_CLASS_NAME="pageLinkHover",PaginatedListBox.PAGE_LINK_DISABLED_CLASS_NAME="pageLinkDisabled",PaginatedListBox.PAGE_LINK_PREV_TITLE="Prev",PaginatedListBox.PAGE_LINK_NEXT_TITLE="Next",PaginatedListBox._LIST_BOX_ID="ListBox",PaginatedListBox._PAGE_NAV_PANEL_ID="ListBoxNavigationPanel",PaginatedListBox._LIST_STATUS_ID="ListBoxStatus",PaginatedListBox._PAGE_LINK_PREV_ID="ListBoxPrevPage",PaginatedListBox._PAGE_LINK_NEXT_ID="ListBoxNextPage",PaginatedListBox._PAGE_NAV_TEMPLATE='<div id="'+PaginatedListBox._LIST_BOX_ID+'" style="height:100%;overflow-y:auto;"></div><div id="'+PaginatedListBox._PAGE_NAV_PANEL_ID+'" class="pagingZone" style="height:100%;"><div id="'+PaginatedListBox._LIST_STATUS_ID+'">Showing 0</div> <br><a id="'+PaginatedListBox._PAGE_LINK_PREV_ID+'" href="#null" style="float:left;"></a><a id="'+PaginatedListBox._PAGE_LINK_NEXT_ID+'" href="#null" style="float:right;"></a><span style="clear:both;"></a></div>';