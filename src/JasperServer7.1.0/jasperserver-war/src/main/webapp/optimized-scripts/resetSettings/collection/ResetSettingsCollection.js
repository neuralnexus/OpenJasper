define(["require","underscore","json3","backbone","request","serverSettingsCommon/enum/serverSettingGroupsEnum"],function(e){var t=e("underscore"),n=e("json3"),r=e("backbone"),i=e("request"),u=e("serverSettingsCommon/enum/serverSettingGroupsEnum"),o=r.Collection.extend({initialize:function(e,t){this.urlPUTTemplate="rest_v2/attributes?_embedded=permission",this.urlGETTemplate=this.urlPUTTemplate+"&group="+u.CUSTOM_SERVER_SETTINGS},parse:function(e){return e&&e.attribute?e.attribute:[]},url:function(e){return"PUT"===e?this.urlPUTTemplate:this.urlGETTemplate},escapeLevelId:function(e){return encodeURIComponent(e).replace("'","%27")},save:function(e,t){var r="PUT",u=this._modelsToJSON(t);return i({url:this.url(r)+this._concatNames(e),type:"PUT",contentType:"application/hal+json",headers:{Accept:"application/hal+json"},data:n.stringify({attribute:u})})},_modelsToJSON:function(e){return t.map(e,function(e){return e.toJSON()})},_concatNames:function(e){e=t.isArray(e)?e:[e];var n="";return t.each(e,function(e){n+="&name="+this.escapeLevelId(e.get("name"))},this),n}});return o});