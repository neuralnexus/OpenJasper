define(["require","common/component/tree/Tree","jquery","underscore","common/component/tree/TreeDataLayer","common/component/tree/plugin/TooltipPlugin","common/component/tree/plugin/ContextMenuTreePlugin","bundle!CommonBundle","jrs.configs"],function(e){"use strict";var t=e("common/component/tree/Tree"),n=e("jquery"),o=e("underscore"),r=e("common/component/tree/TreeDataLayer"),a=e("common/component/tree/plugin/TooltipPlugin"),i=e("common/component/tree/plugin/ContextMenuTreePlugin"),l=e("bundle!CommonBundle"),c=e("jrs.configs"),u={tenantProcessor:function(e){return{processItem:function(t){return t._node=!0,t.label=t.value.tenantName,t.value.label=t.label,t.value.uri=t.value.tenantUri,t.id===e&&(t.addToSelection=!0),t}}}};return function(e){var m=e.comparator,s=t.use(a,{i18n:l,contentTemplate:e.tooltipContentTemplate});return e.contextMenu&&(s=s.use(i,{contextMenu:e.contextMenu})),s.create().instance(o.extend({},{selection:{allowed:{left:!0,right:!0},multiple:!1},rootless:!0,collapsed:!0,lazyLoad:!0,bufferSize:5e3,allowMouseDownEventPropagation:!0,dataUriTemplate:c.contextPath+"/rest_v2/organizations?{{= id != 'organizations' ? 'rootTenantId=' + id : ''}}&offset={{= offset }}&limit={{= limit }}&maxDepth=1",levelDataId:"id",getDataArray:function(e,t,n){var o=e?e.organization:[];return m&&o.sort(m),o},processors:[u.tenantProcessor(e.tenantId)],customDataLayers:{"/":o.extend(new r({dataUriTemplate:c.contextPath+"/flow.html?_flowId=treeFlow&method=getNode&provider=tenantTreeFoldersProvider&uri=/",processors:[u.tenantProcessor(e.tenantId)],getDataArray:function(e){return e=JSON.parse(n(e).text()),[{id:e.id,tenantName:e.label,tenantUri:"/",resourceType:"folder",_links:{content:"@fakeContentLink"}}]}}),{accept:"text/html",dataType:"text"})}}))}});