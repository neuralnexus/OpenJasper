define(["require","underscore","common/model/BaseModel"],function(e){var n=e("underscore"),i=e("common/model/BaseModel"),t={INPROGRESS:"inprogress",READY:"finished",FAILED:"failed",PENDING:"pending",CANCELLED:"cancelled"};return i.extend({url:function(){return"rest_v2/export/"+this.id+"/state"},initialize:function(e){i.prototype.initialize.call(this),this.on("change:phase",function(e,i){i==t.INPROGRESS&&n.isUndefined(e.interval)?e.interval=window.setInterval(function(){e.fetch({cache:!1}).fail(n.bind(e.stopPolling,e))},1e3):e.stopPolling()})},stopPolling:function(){n.isUndefined(this.interval)||(window.clearInterval(this.interval),this.interval=void 0)}},{STATE:t})});