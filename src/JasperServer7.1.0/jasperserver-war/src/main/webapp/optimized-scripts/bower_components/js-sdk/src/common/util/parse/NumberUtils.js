define(["require","underscore"],function(t){"use strict";var e=t("underscore"),r=function(t){function e(t){return"."===t?t="\\.":" "===t&&(t="\\s"),t}this.DECIMAL_SEPARATOR=t?t.decimalSeparator||".":".",this.GROUPING_SEPARATOR=t?t.groupingSeparator||",":",",this.decimalSeparator=e(this.DECIMAL_SEPARATOR),this.groupingSeparator=e(this.GROUPING_SEPARATOR),this.DECIMAL_NUMBER_PATTERN=new RegExp("^-?([1-9]{1}[0-9]{0,2}("+this.groupingSeparator+"[0-9]{3})*("+this.decimalSeparator+"[0-9]+)?|[1-9]{1}[0-9]{0,}("+this.decimalSeparator+"[0-9]+)?|0("+this.decimalSeparator+"[0-9]+)?)$"),this.INTEGER_NUMBER_PATTERN=new RegExp("^-?([1-9]{1}[0-9]{0,2}("+this.groupingSeparator+"[0-9]{3})*|[1-9]{1}[0-9]{0,}|0)$")},i=-2147483648,n=2147483647,o=9007199254740992,s=-9007199254740992;return r.prototype.number_format=function(t,e,r,i){t=(t+"").replace(/[^0-9+\-Ee.]/g,"");var n=isFinite(+t)?+t:0,o=isFinite(+e)?Math.abs(e):0,s="undefined"==typeof i?",":i,a="undefined"==typeof r?".":r,u="",p=function(t,e){var r=Math.pow(10,e);return""+(Math.round(t*r)/r).toFixed(e)};return u=(o?p(n,o):""+Math.round(n)).split("."),u[0].length>3&&(u[0]=u[0].replace(/\B(?=(?:\d{3})+(?!\d))/g,s)),(u[1]||"").length<o&&(u[1]=u[1]||"",u[1]+=new Array(o-u[1].length+1).join("0")),u.join(a)},r.prototype.isInt=function(t){return this.isNumberInt(t)||this.isStringInt(t)},r.prototype.isNumberInt=function(t){return e.isNumber(t)&&!isNaN(t)&&t!==Number.POSITIVE_INFINITY&&t!==Number.NEGATIVE_INFINITY&&(t===+t&&t===(0|t)||t%1===0)},r.prototype.isStringInt=function(t){return e.isString(t)&&this.INTEGER_NUMBER_PATTERN.test(t)},r.prototype.isInt32=function(t){return this.isInt(t)&&this.parseNumber(t)>=i&&this.parseNumber(t)<=n},r.prototype.isDecimal=function(t){return e.isNumber(t)&&!isNaN(t)&&t!==Number.POSITIVE_INFINITY&&t!==Number.NEGATIVE_INFINITY||e.isString(t)&&this.DECIMAL_NUMBER_PATTERN.test(t)},r.prototype.parseNumber=function(t){if(e.isNumber(t))return t;if(e.isString(t)&&this.DECIMAL_NUMBER_PATTERN.test(t)){t=t.replace(new RegExp(this.groupingSeparator,"g"),"").replace(new RegExp(this.decimalSeparator,"g"),".");var r=1*t;return r>o||s>r?(window.console&&window.console.warn(t+" is out of the ["+s+", "+o+"] bounds. Parsing results may be corrupted. Use string representation instead. For more details see https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Number."),!1):r}},r.prototype.formatNumber=function(t){var e=t.toString().split(".")[1];try{return this.number_format(t,e?e.length:0,this.DECIMAL_SEPARATOR,this.GROUPING_SEPARATOR)}catch(r){return t.toString()}},r});