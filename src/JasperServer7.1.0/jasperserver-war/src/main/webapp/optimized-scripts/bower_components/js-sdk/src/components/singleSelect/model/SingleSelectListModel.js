define(["require","underscore","components/scalableList/model/ListWithSelectionModel","components/scalableList/model/listWithNavigationModelTrait"],function(e){"use strict";var t=e("underscore"),i=e("components/scalableList/model/ListWithSelectionModel"),n=e("components/scalableList/model/listWithNavigationModelTrait"),s=i.extend(n);return s=s.extend({setActive:function(e){n.setActive.call(this,t.extend(e,{silent:!0}));var i={};"number"==typeof e.index&&(i[e.index]=e.item.value),this.select(i)},_convertInitialArrayToSelection:function(e,t,i){for(var s=0;s<e.length;s++)t[e[s].value]&&(this._addToSelection(e[s].value,s),this.getActive()||n.setActive.call(this,{index:s,item:e[s],silent:!0}));this._triggerSelectionChange(i)},_convertSelectionObject:function(e){for(var t in e)if(e.hasOwnProperty(t)&&void 0!==e[t]){var i=e[t];return{index:parseInt(t,10),value:i}}},_select:i.prototype.select,select:function(e,i){var s,l=!1;if(!e||"string"==typeof e||t.isArray(e))n.setActive.call(this,{silent:!0});else if(s=this._convertSelectionObject(e)){var c=this.getActive();c&&s.value===c.value&&s.index===c.index||(l=!0)}else n.setActive.call(this,{silent:!0});return l?this.activate(s.index):this._select(e,i),this}})});