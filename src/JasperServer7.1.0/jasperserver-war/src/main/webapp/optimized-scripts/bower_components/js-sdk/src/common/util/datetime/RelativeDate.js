define(["require","underscore"],function(i){"use strict";var t=i("underscore"),r=function(i,t,r){this.setKeyword(i),this.setSign(t),this.setNumber(r)};return r.prototype.setKeyword=function(i){this.keyword=i.toUpperCase()},r.prototype.setSign=function(i){this.sign=i},r.prototype.setNumber=function(i){if(t.isNumber(i))this.number=i;else{var r=parseInt(i,10);isNaN(r)?this.number=0:this.number=r}},r.prototype.toString=function(){return t.isNumber(this.number)&&!isNaN(this.number)&&this.number>0&&("+"===this.sign||"-"===this.sign)&&this.keyword in r.PATTERNS?this.keyword+this.sign+this.number.toString():this.keyword in r.PATTERNS?this.keyword:""},r.PATTERNS={DAY:/^(DAY)(([+|\-])(\d{1,9}))?$/i,WEEK:/^(WEEK)(([+|\-])(\d{1,9}))?$/i,MONTH:/^(MONTH)(([+|\-])(\d{1,9}))?$/i,QUARTER:/^(QUARTER)(([+|\-])(\d{1,9}))?$/i,SEMI:/^(SEMI)(([+|\-])(\d{1,9}))?$/i,YEAR:/^(YEAR)(([+|\-])(\d{1,9}))?$/i},r.parse=function(i){if(r.isValid(i))for(var e in r.PATTERNS){var n=r.PATTERNS[e].exec(i);if(null!==n&&t.isArray(n)&&5===n.length)return new r(n[1],n[3],n[4])}},r.isValid=function(i){if(i instanceof r)return""!==i.toString();if(t.isString(i))for(var e in r.PATTERNS)if(r.PATTERNS[e].test(i))return!0;return!1},r});