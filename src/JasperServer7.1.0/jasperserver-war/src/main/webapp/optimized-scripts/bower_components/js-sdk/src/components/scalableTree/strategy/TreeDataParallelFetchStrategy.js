define(["require","jquery","underscore","./trait/wrapResponseStrategyTrait","./trait/omitEmptyResponseStrategyTrait","./trait/injectLevelOptionsStrategyTrait","./trait/invokeFetchFunctionsStrategyTrait","./trait/processResponseStrategyTrait","./trait/constructFetchFunctionsStrategyTrait"],function(t){var e=t("jquery"),i=t("underscore"),r=t("./trait/wrapResponseStrategyTrait"),n=t("./trait/omitEmptyResponseStrategyTrait"),a=t("./trait/injectLevelOptionsStrategyTrait"),s=t("./trait/invokeFetchFunctionsStrategyTrait"),o=t("./trait/processResponseStrategyTrait"),c=t("./trait/constructFetchFunctionsStrategyTrait"),p=function(t){this.initialize(t)};return i.extend(p.prototype,r,n,a,s,o,c,{initialize:function(t){t=t||{},this.fetchFunction=t.fetchFunction},fetch:function(t,i){var r=this,n=this.constructFetchFunctions(this.fetchFunction,t);return e.when.apply(e,this.invokeFetchFunctions(n)).then(function(){var e=Array.prototype.slice.call(arguments,0);e=r.wrapResponse(e),r.injectLevelOptions(e,t),e=r.omitEmptyResponse(e),e=r.processResponse(e),i&&i(e)})}}),p});