define(["require","underscore"],function(t){"use strict";function s(t){return new RegExp("^"+t.toLowerCase().replace("hh","([0-1][0-9]|2[0-3])").replace("mm","([0-5][0-9])").replace("ss","([0-5][0-9])")+"$")}function e(t){var s=t.toLowerCase().match(/(hh|mm|ss)/g),e={h:-1,m:-1,s:-1};if(s)for(var r=0;r<s.length;r++)-1==e[s[r].toString().charAt(0)]&&(e[s[r].toString().charAt(0)]=r+1);return e}function r(t,s,e){this.hours=t||0,this.minutes=s||0,this.seconds=e||0}var n=t("underscore");return r.prototype.total=function(){return 3600*this.hours+60*this.minutes+this.seconds},r.prototype.isValid=function(){return this.hours>=0&&this.hours<=23&&this.minutes>=0&&this.minutes<=59&&this.seconds>=0&&this.seconds<=59},r.prototype.format=function(t){return t.toLowerCase().replace("hh",this.hours<10?"0"+this.hours:this.hours).replace("mm",this.minutes<10?"0"+this.minutes:this.minutes).replace("ss",this.seconds<10?"0"+this.seconds:this.seconds)},r.compare=function(t,s){var e=t.total(),r=s.total();return r>e?-1:e>r?1:0},r.parse=function(t,i){var o=s(i);if(n.isString(t)&&o.test(t)){var h=new r,u=o.exec(t),c=e(i);return h.hours=parseInt(u[c.h],10),h.minutes=parseInt(u[c.m],10),h.seconds=parseInt(u[c.s],10),h}},r});