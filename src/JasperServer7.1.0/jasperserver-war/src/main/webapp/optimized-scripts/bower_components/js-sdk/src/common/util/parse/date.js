define(["require","moment","settings/localeSettings","underscore","common/util/datetime/RelativeDate","common/util/datetime/RelativeTimestamp"],function(e){"use strict";function t(e){var t=e;return t=e.indexOf("yy")>-1?t.replace("yy","YYYY"):t.replace("y","YY"),e.indexOf("mm")>-1?t=t.replace("mm","MM"):e.indexOf("MM")>-1?t=t.replace("MM","MMMM"):e.indexOf("m")>-1?t=t.replace("m","M"):e.indexOf("M")>-1&&(t=t.replace("M","MMM")),e.indexOf("dd")>-1?t=t.replace("dd","DD"):e.indexOf("DD")>-1?t=t.replace("DD","dddd"):e.indexOf("d")>-1?t=t.replace("d","D"):e.indexOf("D")>-1&&(t=t.replace("D","ddd")),t}function i(e){return e.toLowerCase().replace("hh","HH")}function a(e,a,r){var n=t(e),o=i(a);return n+(null!=r?r:" ")+o}function r(e){return z(e,t(H.dateFormat),!0)}function n(e){return z(e,a(H.dateFormat,H.timeFormat,H.timestampSeparator),!0)}function o(e){return R.isValid(e)}function m(e){return y.isValid(e)}function s(e){return I.isDate(e)&&z(e).isValid()||I.isString(e)&&""!==e&&r(e).isValid()}function u(e){return I.isDate(e)&&z(e).isValid()||I.isString(e)&&""!==e&&n(e).isValid()}function c(e){return z(e,L,!0).isValid()}function d(e,t){if(s(e)&&s(t)){var i=I.isDate(e)?z(e):r(e),a=I.isDate(t)?z(t):r(t);return f(i,a)}}function l(e,t){if(u(e)&&u(t)){var i=I.isDate(e)?z(e):n(e),a=I.isDate(t)?z(t):n(t);return f(i,a)}}function f(e,t){return e.isBefore(t)?-1:e.isAfter(t)?1:0}function D(e){var t=z(e);return I.isDate(e)&&t.isValid()?t.format(L):void 0}function p(e){var t=z(e,L,!0);return t.isValid()?t.toDate():void 0}function T(e){return V(e,a(H.dateFormat,H.timeFormat,H.timestampSeparator),L)}function M(e){return V(e,L,a(H.dateFormat,H.timeFormat,H.timestampSeparator))}function v(e){return V(e,t(H.dateFormat),b)}function Y(e){return V(e,b,t(H.dateFormat))}function F(e){return V(e,i(H.timeFormat),h)}function O(e){return V(e,h,i(H.timeFormat))}function V(e,t,i){if(R.isValid(e))return e;var a=z(e,t,!0);return a.isValid()?a.format(i):e}function x(e){return z(e,b,!0)}function S(e){return e.format(b)}function g(e){return e.format(t(H.dateFormat))}var z=e("moment"),H=e("settings/localeSettings").localeSettings,I=e("underscore"),R=e("common/util/datetime/RelativeDate"),y=e("common/util/datetime/RelativeTimestamp"),L="YYYY-MM-DD[T]HH:mm:ss",b="YYYY-MM-DD",h="HH:mm:ss";return{isRelativeDate:o,isRelativeTimestamp:m,isDate:s,isTimestamp:u,isIso8601Timestamp:c,compareDates:d,compareTimestamps:l,iso8601DateToMoment:x,momentToIso8601Date:S,momentToLocalizedDate:g,dateObjectToIso8601Timestamp:D,iso8601TimestampToDateObject:p,localizedTimestampToIsoTimestamp:T,isoTimestampToLocalizedTimestamp:M,localizedDateToIsoDate:v,isoDateToLocalizedDate:Y,localizedTimeToIsoTime:F,isoTimeToLocalizedTime:O}});