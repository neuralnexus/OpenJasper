define(["require","lodash.custom","common/util/xssUtil","underscore.string"],function(e){"use strict";var t=e("lodash.custom"),s=e("common/util/xssUtil");t.str=e("underscore.string"),t.templateSettings={evaluate:/\{\{([\s\S]+?)\}\}/g,interpolate:/\{\{=([\s\S]+?)\}\}/g,escape:/\{\{-([\s\S]+?)\}\}/g},t.mixin(t.str.exports()),t.xssEscape=s.escape;var r=t.template;return t.template=function(e,s,a){var n=t.templateSettings,i=/($^)/;e=String(e||""),a=t.defaults({},a,n);var c=RegExp((a.escape||i).source+"|$","g");return e=e.replace(c,"{{ print(_.xssEscape($1)); }}"),r.call(t,e,s,a)},t});