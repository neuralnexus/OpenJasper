var resource={messages:{},resourceLabelMaxLength:100,resourceIdMaxLength:100,resourceDescriptionMaxLength:250,PROPAGATE_EVENT:"propagateEvent",STEP_DISPLAY_ID:"stepDisplay",FLOW_CONTROLS_ID:"flowControls",initSwipeScroll:function(){var e=$(resource.STEP_DISPLAY_ID);e&&new TouchController(e.up(),e.up(1),{})},submitForm:function(e,t,r){if(t){var i=buildActionUrl(t);r&&r(),$(e).writeAttribute("method","post").writeAttribute("action",i),$(e).submit()}},registerClickHandlers:function(e,t,r){if(resource._bodyClickEventHandlers)return void(r?Array.prototype.unshift:Array.prototype.push).apply(resource._bodyClickEventHandlers,e);resource._bodyClickEventHandlers=e;var i=t||"body";$$(i)[0].observe("click",function(e){resource._bodyClickEventHandlers&&resource._bodyClickEventHandlers.each(function(t){var r=t(e);if(r)throw r!==resource.PROPAGATE_EVENT&&Event.stop(e),$break})})},TreeWrapper:function(e){var t=this;if(this._treeId=e.treeId,this._resourceUriInput=$(e.resourceUriInput||"resourceUri"),this._uri=this._resourceUriInput&&this._resourceUriInput.getValue()||e.uri||"/",!e.providerId)throw"There is no tree provider set for tree #{id}".interpolate({id:this._treeId});var r=["providerId","rootUri","organizationId","publicFolderUri","urlGetNode","urlGetChildren"].inject({},function(t,r){return null!==e[r]&&(t[r]=e[r]),t});return this._tree=new dynamicTree.createRepositoryTree(this._treeId,r),this._tree.observe("tree:loaded",function(){t._tree.openAndSelectNode($(t._resourceUriInput).getValue())}),this._tree.observe("leaf:selected",function(e){t._uri=e.memo.node.param.uri,t._resourceUriInput.setValue(t._uri)}),this._tree.observe("node:selected",function(){t._resourceUriInput.setValue(t._uri="")}),{getTreeId:function(){return t._treeId},getTree:function(){return t._tree},selectFolder:function(e){t._tree.openAndSelectNode(e)},getSelectedFolderUri:function(){return t._uri}}},switchButtonState:function(e,t){buttonManager[t?"enable":"disable"].call(buttonManager,e)},switchDisableState:function(e,t){(e=$(e))&&e[t?"disable":"enable"].call(e)},generateResourceId:function(e){if(localContext&&localContext.initOptions&&localContext.initOptions.resourceIdNotSupportedSymbols)return e.replace(new RegExp(localContext.initOptions.resourceIdNotSupportedSymbols,"g"),"_");throw"There is no resourceIdNotSupportedSymbols property in init options."},testResourceId:function(e){if(localContext&&localContext.initOptions&&localContext.initOptions.resourceIdNotSupportedSymbols)return new RegExp(localContext.initOptions.resourceIdNotSupportedSymbols,"g").test(e);throw"There is no resourceIdNotSupportedSymbols property in init options."},labelValidator:function(e){var t=!0,r="";return e.blank()?(r=resource.messages.labelIsEmpty,t=!1):e.length>resource.resourceLabelMaxLength&&(r=resource.messages.labelToLong,t=!1),{isValid:t,errorMessage:r}},getLabelValidationEntry:function(e){return{element:e,validators:[{method:"mandatory",messages:{mandatory:resource.messages.labelIsEmpty}},{method:"minMaxLength",messages:{tooLong:resource.messages.labelToLong},options:{maxLength:resource.resourceLabelMaxLength}}]}},getIdValidationEntry:function(e){return{element:e,validators:[{method:"resourceIdChars",messages:resource.messages},{method:"mandatory",messages:{mandatory:resource.messages.resourceIdIsEmpty}},{method:"minMaxLength",messages:{tooLong:resource.messages.resourceIdToLong},options:{maxLength:resource.resourceIdMaxLength}}]}},resourceIdValidator:function(e){var t=!0,r="";return this._isEditMode||(e.blank()?(r=resource.messages.resourceIdIsEmpty,t=!1):e.length>resource.resourceIdMaxLength?(r=resource.messages.resourceIdToLong,t=!1):resource.testResourceId(e)&&(r=resource.messages.resourceIdInvalidChars,t=!1)),{isValid:t,errorMessage:r}},getDescriptionValidationEntry:function(e){return{element:e,validators:[{method:"minMaxLength",messages:{tooLong:resource.messages.descriptionToLong},options:{maxLength:resource.resourceDescriptionMaxLength}}]}},descriptionValidator:function(e){var t=!0,r="";return e.length>resource.resourceDescriptionMaxLength&&(r=resource.messages.descriptionToLong,t=!1),{isValid:t,errorMessage:r}},dataSourceValidator:function(e){var t=!0,r="";return""===e.trim()&&(r=resource.messages.dataSourceInvalid,t=!1),{isValid:t,errorMessage:r}},queryValidator:function(e){var t=!0,r="";return""===e.trim()&&(r=resource.messages.queryInvalid,t=!1),{isValid:t,errorMessage:r}},getValidationEntries:function(e){return e.collect(function(e){return e.validationEntry?e.validationEntry:{validator:e.validator,element:e}})}};"undefined"==typeof require&&isIPad()&&document.observe("dom:loaded",resource.initSwipeScroll.bind(resource)),define("resource.base",["prototype","utils.common","core.layout"],function(e){return function(){var t;return t||e.resource}}(this));var resourceListOfValues={LABEL_ID:"labelID",RESOURCE_ID_ID:"resourceID",DESCRIPTION_ID:"description",ITEM_NAME_ID:"name",ITEM_VALUE_ID:"value",SUBMIT_EVENT_ID:"submitEvent",ITEM_TO_DELETE_ID:"itemToDelete",SAVE_BUTTON_PATTERN:"#save",CANCEL_BUTTON_PATTERN:"#cancel",ADD_LINK_ID:"add",LINK_PATTERN:"a.launcher",_canGenerateId:!0,initialize:function(e){this._form=$(document.body).select("form")[0],this._label=$(this.LABEL_ID),this._resourceId=$(this.RESOURCE_ID_ID),this._description=$(this.DESCRIPTION_ID),this._itemName=$(this.ITEM_NAME_ID),this._itemValue=$(this.ITEM_VALUE_ID),this._submitEvent=$(this.SUBMIT_EVENT_ID),this._itemToDelete=$(this.ITEM_TO_DELETE_ID),this._addLink=$(this.ADD_LINK_ID),this._isEditMode=e.isEditMode,this._label.validator=resource.labelValidator.bind(this),this._resourceId.validator=resource.resourceIdValidator.bind(this),this._description.validator=resource.descriptionValidator.bind(this),this._itemName.validator=this._itemNameValidator.bind(this),this._itemValue.validator=this._itemValueValidator.bind(this),this._initEvents()},_initEvents:function(){this._form.observe("click",function(e){var t=e.element();if(e.stop(),matchAny(t,[this.SAVE_BUTTON_PATTERN],!0))this._isDataValid()&&(this._submitEvent.writeAttribute("name","_eventId_save"),this._form.submit());else if(t==this._addLink)this._isValueDataValid()&&this._isDataValid()&&(this._submitEvent.writeAttribute("name","_eventId_addItem"),this._form.submit());else if(matchAny(t,[this.LINK_PATTERN],!0)&&t!=this._addLink){var r=t.identify();this._itemToDelete.setValue(r),this._submitEvent.writeAttribute("name","_eventId_removeItem"),this._form.submit()}else matchAny(t,[this.CANCEL_BUTTON_PATTERN],!0)&&(this._submitEvent.writeAttribute("name","_eventId_cancel"),this._form.submit())}.bindAsEventListener(this)),this._form.observe("keyup",function(e){var t=e.element(),r=[this._label,this._resourceId,this._description,this._itemName,this._itemValue];r.include(t)&&(ValidationModule.validate(resource.getValidationEntries([t])),t==this._resourceId&&this._resourceId.getValue()!=resource.generateResourceId(this._label.getValue())&&(this._canGenerateId=!1),t==this._label&&!this._isEditMode&&this._canGenerateId&&(this._resourceId.setValue(resource.generateResourceId(this._label.getValue())),ValidationModule.validate(resource.getValidationEntries([this._resourceId]))))}.bindAsEventListener(this))},_isDataValid:function(){var e=[this._label,this._resourceId,this._description];return ValidationModule.validate(resource.getValidationEntries(e))},_isValueDataValid:function(){var e=[this._itemName,this._itemValue];return ValidationModule.validate(resource.getValidationEntries(e))},_itemNameValidator:function(e){var t=!0,r="";return e.blank()&&(r=resource.messages.itemNameIsEmpty,t=!1),{isValid:t,errorMessage:r}},_itemValueValidator:function(e){var t=!0,r="";return e.blank()&&(r=resource.messages.itemValueIsEmpty,t=!1),{isValid:t,errorMessage:r}}};"undefined"==typeof require&&document.observe("dom:loaded",function(){resourceListOfValues.initialize(localContext.initOptions)}),define("resource.listofvalues",["resource.base","utils.common"],function(e){return function(){var t;return t||e.resourceListOfValues}}(this)),define("addResource/listOfValues/addListOfValuesMain",["require","!domReady","resource.listofvalues","underscore","jrs.configs","resource.base","utils.common"],function(e){"use strict";var t=e("!domReady"),r=e("resource.listofvalues"),i=e("underscore"),s=e("jrs.configs"),o=e("resource.base");e("utils.common"),t(function(){var e=s.addListOfValues.localContext.initOptions;i.extend(window.localContext,s.addListOfValues.localContext),i.extend(o.messages,s.addListOfValues.resource.messages),r.initialize(e),isIPad()&&o.initSwipeScroll()})});