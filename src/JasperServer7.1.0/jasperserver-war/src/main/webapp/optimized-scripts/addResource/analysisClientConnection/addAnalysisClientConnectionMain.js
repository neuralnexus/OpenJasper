var resource={messages:{},resourceLabelMaxLength:100,resourceIdMaxLength:100,resourceDescriptionMaxLength:250,PROPAGATE_EVENT:"propagateEvent",STEP_DISPLAY_ID:"stepDisplay",FLOW_CONTROLS_ID:"flowControls",initSwipeScroll:function(){var e=$(resource.STEP_DISPLAY_ID);e&&new TouchController(e.up(),e.up(1),{})},submitForm:function(e,t,i){if(t){var r=buildActionUrl(t);i&&i(),$(e).writeAttribute("method","post").writeAttribute("action",r),$(e).submit()}},registerClickHandlers:function(e,t,i){if(resource._bodyClickEventHandlers)return void(i?Array.prototype.unshift:Array.prototype.push).apply(resource._bodyClickEventHandlers,e);resource._bodyClickEventHandlers=e;var r=t||"body";$$(r)[0].observe("click",function(e){resource._bodyClickEventHandlers&&resource._bodyClickEventHandlers.each(function(t){var i=t(e);if(i)throw i!==resource.PROPAGATE_EVENT&&Event.stop(e),$break})})},TreeWrapper:function(e){var t=this;if(this._treeId=e.treeId,this._resourceUriInput=$(e.resourceUriInput||"resourceUri"),this._uri=this._resourceUriInput&&this._resourceUriInput.getValue()||e.uri||"/",!e.providerId)throw"There is no tree provider set for tree #{id}".interpolate({id:this._treeId});var i=["providerId","rootUri","organizationId","publicFolderUri","urlGetNode","urlGetChildren"].inject({},function(t,i){return null!==e[i]&&(t[i]=e[i]),t});return this._tree=new dynamicTree.createRepositoryTree(this._treeId,i),this._tree.observe("tree:loaded",function(){t._tree.openAndSelectNode($(t._resourceUriInput).getValue())}),this._tree.observe("leaf:selected",function(e){t._uri=e.memo.node.param.uri,t._resourceUriInput.setValue(t._uri)}),this._tree.observe("node:selected",function(){t._resourceUriInput.setValue(t._uri="")}),{getTreeId:function(){return t._treeId},getTree:function(){return t._tree},selectFolder:function(e){t._tree.openAndSelectNode(e)},getSelectedFolderUri:function(){return t._uri}}},switchButtonState:function(e,t){buttonManager[t?"enable":"disable"].call(buttonManager,e)},switchDisableState:function(e,t){(e=$(e))&&e[t?"disable":"enable"].call(e)},generateResourceId:function(e){if(localContext&&localContext.initOptions&&localContext.initOptions.resourceIdNotSupportedSymbols)return e.replace(new RegExp(localContext.initOptions.resourceIdNotSupportedSymbols,"g"),"_");throw"There is no resourceIdNotSupportedSymbols property in init options."},testResourceId:function(e){if(localContext&&localContext.initOptions&&localContext.initOptions.resourceIdNotSupportedSymbols)return new RegExp(localContext.initOptions.resourceIdNotSupportedSymbols,"g").test(e);throw"There is no resourceIdNotSupportedSymbols property in init options."},labelValidator:function(e){var t=!0,i="";return e.blank()?(i=resource.messages.labelIsEmpty,t=!1):e.length>resource.resourceLabelMaxLength&&(i=resource.messages.labelToLong,t=!1),{isValid:t,errorMessage:i}},getLabelValidationEntry:function(e){return{element:e,validators:[{method:"mandatory",messages:{mandatory:resource.messages.labelIsEmpty}},{method:"minMaxLength",messages:{tooLong:resource.messages.labelToLong},options:{maxLength:resource.resourceLabelMaxLength}}]}},getIdValidationEntry:function(e){return{element:e,validators:[{method:"resourceIdChars",messages:resource.messages},{method:"mandatory",messages:{mandatory:resource.messages.resourceIdIsEmpty}},{method:"minMaxLength",messages:{tooLong:resource.messages.resourceIdToLong},options:{maxLength:resource.resourceIdMaxLength}}]}},resourceIdValidator:function(e){var t=!0,i="";return this._isEditMode||(e.blank()?(i=resource.messages.resourceIdIsEmpty,t=!1):e.length>resource.resourceIdMaxLength?(i=resource.messages.resourceIdToLong,t=!1):resource.testResourceId(e)&&(i=resource.messages.resourceIdInvalidChars,t=!1)),{isValid:t,errorMessage:i}},getDescriptionValidationEntry:function(e){return{element:e,validators:[{method:"minMaxLength",messages:{tooLong:resource.messages.descriptionToLong},options:{maxLength:resource.resourceDescriptionMaxLength}}]}},descriptionValidator:function(e){var t=!0,i="";return e.length>resource.resourceDescriptionMaxLength&&(i=resource.messages.descriptionToLong,t=!1),{isValid:t,errorMessage:i}},dataSourceValidator:function(e){var t=!0,i="";return""===e.trim()&&(i=resource.messages.dataSourceInvalid,t=!1),{isValid:t,errorMessage:i}},queryValidator:function(e){var t=!0,i="";return""===e.trim()&&(i=resource.messages.queryInvalid,t=!1),{isValid:t,errorMessage:i}},getValidationEntries:function(e){return e.collect(function(e){return e.validationEntry?e.validationEntry:{validator:e.validator,element:e}})}};"undefined"==typeof require&&isIPad()&&document.observe("dom:loaded",resource.initSwipeScroll.bind(resource)),define("resource.base",["prototype","utils.common","core.layout"],function(e){return function(){var t;return t||e.resource}}(this));var dynamicTree={trees:{},nodes:{},treeNodeEdited:null,editaborted:!1,activeTreeId:null,Tree:function(e,t){this.id=e,t?(this.setRootNode(t.root),this.bShowRoot=!!t.bShowRoot,this.handleNodeOnDblclick=void 0!==t.handleNodeOnDblclick?t.handleNodeOnDblclick:!0,this.multiSelectEnabled=!!t.multiSelectEnabled,this.showAllNodesOnStartup=!!t.showAllNodesOnStartup,this.treeClassName=t.treeClassName?t.treeClassName:"",this.dragPattern=t.dragPattern,this.dragClasses=t.dragClasses,this.dropClasses=t.dropClasses,this.selectOnMousedown=t.selectOnMousedown,this.regionID=t.regionID,this.scroll=t.scroll,this.templateDomId=t.templateDomId?t.templateDomId:this.DEFAULT_TREE_TEMPLATE_ID):(this.templateDomId=this.DEFAULT_TREE_TEMPLATE_ID,this.handleNodeOnDblclick=!0),this.stateObject={},this.sortNodes=!0,this.sorters=[this.sortByOrder,this.sortByName],this.selectedNodes=[],this.TREE_NN_ITEMS_SELECTED="#{count} items selected",dynamicTree.trees[this.id]=this,this._createFromTemplate(),this.refreshStyle(),this._registerEvents(),this._registerCustomScroll()},getNextId:function(){var e=1;return function(){return e++}}(),getActiveTree:function(){return dynamicTree.trees[dynamicTree.activeTreeId]},getTreeNode:function(e){return dynamicTree.nodes[e]},getStorageVal:function(e){var t=JSON.parse(window.localStorage.getItem("dynamicTree"))||{};return t[e]||null},setStorageVal:function(e,t){var i=window.localStorage,r=JSON.parse(i.getItem("dynamicTree"))||{};r[e]=t;try{i.setItem("dynamicTree",JSON.stringify(r))}catch(n){window.console&&console.log(n)}},_templateHash:{}};dynamicTree.Tree.addVar("DEFAULT_TREE_TEMPLATE_ID","list_responsive_collapsible"),dynamicTree.Tree.addVar("HIDE_ROOT_CLASS_NAME","hideRoot"),dynamicTree.Tree.addMethod("getId",function(){return this.id}),dynamicTree.Tree.addMethod("_getElement",function(){return this._element||(this._element=$(this.id)),this._element}),dynamicTree.Tree.addMethod("_createFromTemplate",function(){this._getElement()&&(this._getElement().insert({after:this._getTemplateElement(this._getElement())}),this._getElement().remove(),this._element=null,this._getElement().update())}),dynamicTree.Tree.addMethod("_registerCustomScroll",function(){if(!this.scroll&&this._getElement()){var e=this._getElement().up(layoutModule.SWIPE_SCROLL_PATTERN);if(e){var t=layoutModule.scrolls.get(e.identify());t&&(this.scroll=t)}}}),dynamicTree.Tree.addMethod("setRootNode",function(e){this.rootNode=e,this.rootNode&&(this.rootNode.treeId=this.id)}),dynamicTree.Tree.addMethod("getRootNode",function(){return this.rootNode}),dynamicTree.Tree.addMethod("refreshStyle",function(){var e=this._getElement();e.templateClassName&&(e.className=e.templateClassName),this.treeClassName&&e.addClassName(this.treeClassName),this.bShowRoot?e.removeClassName(this.HIDE_ROOT_CLASS_NAME):e.addClassName(this.HIDE_ROOT_CLASS_NAME)}),dynamicTree.Tree.addMethod("resetSelected",function(){this._prevSelectedNodes=this.selectedNodes.clone(),this.selectedNodes=[]}),dynamicTree.Tree.addMethod("revertSelection",function(e){var t=this._prevSelectedNodes.clone();t=t.concat(this.selectedNodes),this.selectedNodes=this._prevSelectedNodes.clone();for(var i=0;i<t.length;i++)t[i].refreshStyle()}),dynamicTree.Tree.addMethod("getSelectedNode",function(){return 0===this.selectedNodes.length?null:this.selectedNodes[0]}),dynamicTree.Tree.addMethod("addNodeToSelected",function(e){this.selectedNodes.push(e),this._prevSelectedNodes=this.selectedNodes.clone()}),dynamicTree.Tree.addMethod("removeNodeFromSelected",function(e){for(var t=0;t<this.selectedNodes.length;t++)if(this.selectedNodes[t]==e)return this._prevSelectedNodes=this.selectedNodes.clone(),void this.selectedNodes.splice(t,1)}),dynamicTree.Tree.addMethod("isNodeSelected",function(e){var t=this.selectedNodes&&this.selectedNodes.length;if(t)for(var i=0;t>i;i++)if(this.selectedNodes[i]==e)return!0;return!1}),dynamicTree.Tree.addMethod("resortSubtree",function(e){if(e){e.resortChilds();for(var t=0;t<e.childs.length;t++)this.resortSubtree(e.childs[t])}}),dynamicTree.Tree.addMethod("resortTree",function(){this.sortNodes&&this.resortSubtree(this.rootNode)}),dynamicTree.Tree.addMethod("readStates",function(){var e=dynamicTree.getStorageVal("tree"+this.id);if(e)for(var t in e)this.stateObject[t]=e[t]}),dynamicTree.Tree.addMethod("getState",function(e){var t,i=this.stateObject;return i[e]?(t=i[e],(null===t||""===t)&&(t=dynamicTree.TreeNode.State.CLOSED),t):dynamicTree.TreeNode.State.CLOSED}),dynamicTree.Tree.addMethod("writeStates",function(e,t){var i={},r=this.stateObject;for(var n in r)i[n]=r[n];r[e]=t,null!=t&&(i[e]=t),dynamicTree.setStorageVal("tree"+this.id,i)}),dynamicTree.Tree.addMethod("resetStates",function(){this.stateObject={},dynamicTree.setStorageVal("tree"+this.id,"")}),dynamicTree.Tree.addMethod("comparer",function(e,t){var i,r;if(this.sorters&&this.sorters.length)for(i=0;i<this.sorters.length;i++)if(r=this.sorters[i](e,t),0!==r)return r;return 0}),dynamicTree.Tree.addMethod("renderTree",function(){this.readStates(),this.stopWaiting(),this.refreshStyle();var e=this._getElement();this.rootNode&&(this.writeStates(this.rootNode.id,dynamicTree.TreeNode.State.OPEN),this.rootNode.showNode(),this.rootNode.render(e),this.refreshScroll())}),dynamicTree.Tree.addMethod("refreshScroll",function(e){e?setTimeout(function(){this.scroll&&this.scroll.refresh()}.bind(this),e):this.scroll&&this.scroll.refresh()}),dynamicTree.Tree.addMethod("binarySearchOfNode",function(e,t){for(var i=0,r=e.length-1;r>=i;){var n=Math.round((i+r)/2),d=e[n];if(this.comparer(d,t)<0)i=n+1;else{if(!(this.comparer(d,t)>0))return n;r=n-1}}return-(i+1)}),dynamicTree.Tree.addMethod("_deselectAllNodes",function(e){if(this.selectedNodes.length>0){var t=this.selectedNodes.clone();this.resetSelected();for(var i=0;i<t.length;i++)t[i].refreshStyle();if(e){var r=dynamicTree.trees[this.id];r.fireUnSelectAllEvent(e)}}}),dynamicTree.Tree.addMethod("_selectOrEditNode",function(e,t,i,r,n,d){var s,o,a,l=t.isSelected()&&n,h=this.multiSelectEnabled&&t.isSelected()&&i&&!l,c=t.isSelected()&&dynamicTree.treeNodeEdited!==t&&!this.multiSelectEnabled&&!i&&!l,u=null!=dynamicTree.treeNodeEdited&&(f||h),m=this.multiSelectEnabled&&!t.isSelected()&&r&&isNotNullORUndefined(this._lastSelectedNode)&&this._lastSelectedNode.parent===t.parent,T=this.multiSelectEnabled&&t.isSelected()&&r&&isNotNullORUndefined(this._lastSelectedNode)&&this._lastSelectedNode.parent===t.parent,f=!this.multiSelectEnabled&&!t.isSelected()||this.multiSelectEnabled&&!i&&!t.isSelected(),p=!t.isSelected()||f&&this.selectedNodes.length>1;if(r&&this._lastSelectedNode||(this._lastSelectedNode=t),h&&t.deselect(e),f&&this._deselectAllNodes(e),c)return void t.edit(e);if(u&&dynamicTree.treeNodeEdited.doEndEdit(e),m||T){a=t.parent;var _=a.childs.indexOf(this._lastSelectedNode),E=a.childs.indexOf(t);s=Math.min(_,E),o=Math.max(_,E)}if(m)if(s>-1)for(var g=s;o>=g;g++)a.childs[g].select(e);else a.childs[o].select(e);else if(T){for(var g=0;s>g;g++)a.childs[g].deselect(e);for(var g=o+1;g<a.childs.length;g++)a.childs[g].deselect(e)}else p&&t.select(e,t.nofocus,d)}),dynamicTree.Tree.addMethod("_deselectOthers",function(e,t,i,r,n){var d=this.multiSelectEnabled&&this.selectedNodes.length>1&&t.isSelected()&&!(i||r||n);d&&this.selectedNodes.findAll(function(e){return e!=t}.bind(this)).invoke("deselect",e)}),dynamicTree.Tree.addMethod("_selectNextNode",function(e,t){function i(e){return e=e.parent,e?e.nextSibling?e.nextSibling:i(e):null}var r=e.isOpen()&&e.getFirstChild()||e.nextSibling||i(e);r&&e.deselect()&&r.select(t)}),dynamicTree.Tree.addMethod("_selectPreviousNode",function(e,t){function i(e){return!(e.isOpen()&&e.hasChilds())&&e||i(e.getLastChild())}var r=e.prevSibling&&i(e.prevSibling)||e.parent;r&&e.deselect()&&r.select(t)}),dynamicTree.Tree.addMethod("_selectInwards",function(e,t){var i=e.isOpen()&&e.getFirstChild();i?e.deselect()&&i.select(t):e.handleNode(t)}),dynamicTree.Tree.addMethod("_selectOutwards",function(e,t){if(!e.isHiddenRootNode()){var i=e.isOpen()?null:e.parent;i?e.deselect()&&i.select(t):e.handleNode(t)}}),dynamicTree.Tree.addMethod("sortByOrder",function(e,t){var i=e.orderNumber,r=t.orderNumber;return null==i&&null==r?0:null==i?1:null==r?-1:i-r}),dynamicTree.Tree.addMethod("sortByName",function(e,t){var i=e.name.toLowerCase(),r=t.name.toLowerCase();return i>r?1:r>i?-1:0}),dynamicTree.Tree.addVar("TREE_WAIT_TEMPLATE_DOM_ID","list_responsive_collapsible:loading"),dynamicTree.Tree.addMethod("wait",function(){$(this.id).update($(this.TREE_WAIT_TEMPLATE_DOM_ID).cloneNode(!0))}),dynamicTree.Tree.addMethod("stopWaiting",function(){$(this.id).update("")}),dynamicTree.Tree.addMethod("_getTemplateElement",function(e){var t=this.templateDomId,i=$(t).cloneNode(!0);return i.writeAttribute("id",this.getId()),i.templateId=t,i.templateClassName=i.className,cloneCustomAttributes(e,i),i}),define("dynamicTree.tree",["prototype","dragdrop.extra","touchcontroller","utils.common","core.layout"],function(e){return function(){var t;return t||e.dynamicTree}}(this)),dynamicTree.TreeNode=function(e){this.id=dynamicTree.getNextId(),this.treeId=null,this.name=null!=e.name?e.name:this.DEFAULT_NAME,this.param=null!=e.param?e.param:{},this.orderNumber=null!=e.orderNumber?e.orderNumber:null,this.childs=[],this.parent=null,this.Types={Folder:new dynamicTree.TreeNode.Type(this.FOLDER_TYPE_NAME)},this.isloaded=!1,this.delayedRendering=!0,this.haschilds=!1,this.editable=!1,this.isWaiting=!1,this.hidden=!1,this.isDropTarget=!1,dynamicTree.nodes[this.id]=this},dynamicTree.TreeNode.Type=function(e,t){this.name=e,t&&(this.cssClassName=t.cssClassName,this.templateDomId=t.templateDomId)},dynamicTree.TreeNode.State={OPEN:"open",CLOSED:"closed"},dynamicTree.TreeNode.addVar("FOLDER_TYPE_NAME","com.jaspersoft.jasperserver.api.metadata.common.domain.Folder"),dynamicTree.TreeNode.addVar("DEFAULT_NAME","unset name"),dynamicTree.TreeNode.addVar("NODE_ID_PREFIX","node"),dynamicTree.TreeNode.addVar("SUB_NODE_ID_SUFFIX","sub"),dynamicTree.TreeNode.addVar("HANDLER_ID_PREFIX","handler"),dynamicTree.TreeNode.addVar("NODE_CLASS_NAME","node").addVar("LEAF_CLASS_NAME","leaf").addVar("OPEN_CLASS_NAME","open").addVar("CLOSED_CLASS_NAME","closed").addVar("SELECTED_CLASS_NAME","selected").addVar("LOADING_CLASS_NAME","loading").addVar("ROOTS_CLASS_NAME","roots"),dynamicTree.TreeNode.addVar("nodeHeaderTemplateDomId","list_responsive_collapsible:leaf"),dynamicTree.TreeNode.addVar("nodeFooterTemplateDomId","list_responsive_collapsible"),dynamicTree.TreeNode.addVar("nodeInputTemplateDomId","list_responsive_collapsible:input"),dynamicTree.TreeNode.addVar("isSelectable",!1),dynamicTree.TreeNode.addMethod("getTreeId",function(){return this.treeId||this.parent&&this.parent.getTreeId()}),dynamicTree.TreeNode.addMethod("getState",function(){return dynamicTree.trees[this.getTreeId()].getState(this.id)}),dynamicTree.TreeNode.addMethod("isParent",function(){return this.param.type==this.Types.Folder.name}),dynamicTree.TreeNode.addMethod("addChild",function(e){if(this.isParent()){var t=this.childs[this.childs.length-1];t&&(t.nextSibling=e,e.prevSibling=t),this.childs.push(e),e.parent=this,this.resortChilds(),this.delayedRendering||(e.showNode(),e.render(this._getChildrenElement(),e.nextSibling))}}),dynamicTree.TreeNode.addMethod("removeChild",function(e){for(var t=0;t<this.childs.length;t++)if(this.childs[t]==e){this.childs.splice(t,1);break}if(e.deselect(),!this.delayedRendering){var i=e._getElement();i&&i.remove()}}),dynamicTree.TreeNode.addMethod("resortChilds",function(){var e=this.getTreeId(),t=dynamicTree.trees[e];if(t&&t.sortNodes&&isArray(this.childs)){this.childs.sort(function(e,i){return t.comparer(e,i)});for(var i=this.childs.length;i--;){var r=this.childs[i];r.prevSibling=this.childs[i-1],r.nextSibling=this.childs[i+1]}}}),dynamicTree.TreeNode.addMethod("resetChilds",function(){this.childs=[]}),dynamicTree.TreeNode.addMethod("setHasChilds",function(e){this.haschilds=e}),dynamicTree.TreeNode.addMethod("hasChilds",function(){return this.haschilds?!0:this.getChildCount()>0}),dynamicTree.TreeNode.addMethod("getChildCount",function(){return this.childs.length}),dynamicTree.TreeNode.addMethod("getFirstChild",function(){return this.hasChilds()?this.childs[0]:null}),dynamicTree.TreeNode.addMethod("getLastChild",function(){return this.hasChilds()?this.childs[this.childs.length-1]:null}),dynamicTree.TreeNode.addMethod("_getElement",function(e){return this._element||(this._element=$(this.NODE_ID_PREFIX+this.id)),this._element}),dynamicTree.TreeNode.addMethod("_getTitle",function(){var e=this._getElement().childElements()[0];e.cleanWhitespace();var t=e.childNodes[e.childNodes.length-1];return"#text"!==t.nodeName&&(t=document.createTextNode(""),e.appendChild(t)),t}),dynamicTree.TreeNode.addMethod("_getTitleInputElement",function(){return $(this._getElement().getElementsByTagName("input")[0])}),dynamicTree.TreeNode.addMethod("_getChildrenElement",function(){return this._childrenElement||(this._childrenElement=$(this.NODE_ID_PREFIX+this.id+this.SUB_NODE_ID_SUFFIX)),this._childrenElement}),dynamicTree.TreeNode.addMethod("isOpen",function(){return this.getState()===dynamicTree.TreeNode.State.OPEN}),dynamicTree.TreeNode.addMethod("changeName",function(e){this.name=e,this._getTitle().data=this.name}),dynamicTree.TreeNode.addMethod("getType",function(){for(var e in this.Types)if(this.param.type===this.Types[e].name)return this.Types[e]}),dynamicTree.TreeNode.addMethod("refreshStyle",function(e){if(e=$(e)||this._getElement()){e.templateClassName&&(e.className=e.templateClassName),this.isParent()?(e.addClassName(this.NODE_CLASS_NAME).removeClassName(this.LEAF_CLASS_NAME),this.isWaiting||(this.isOpen()?e.addClassName(this.OPEN_CLASS_NAME).removeClassName(this.CLOSED_CLASS_NAME):e.addClassName(this.CLOSED_CLASS_NAME).removeClassName(this.OPEN_CLASS_NAME))):e.addClassName(this.LEAF_CLASS_NAME).removeClassName(this.NODE_CLASS_NAME),this.isWaiting?e.addClassName(this.LOADING_CLASS_NAME):e.removeClassName(this.LOADING_CLASS_NAME),this.isSelected()?e.addClassName(this.SELECTED_CLASS_NAME):e.removeClassName(this.SELECTED_CLASS_NAME),this.hidden?e.addClassName(layoutModule.HIDDEN_CLASS):e.removeClassName(layoutModule.HIDDEN_CLASS),this.param.cssClass&&e.addClassName(this.param.cssClass);var t=this.getType();t&&t.cssClassName&&e.addClassName(t.cssClassName);var i=e.down();this.isDropTarget&&i&&i.addClassName(layoutModule.DROP_TARGET_CLASS),!this.isDropTarget&&i&&i.removeClassName(layoutModule.DROP_TARGET_CLASS)}}),dynamicTree.TreeNode.addMethod("_createNode",function(){var e=this.id,t=dynamicTree.trees[this.getTreeId()],i=this._getHeaderTemplateElement();i.id=this.NODE_ID_PREFIX+e,i.tabIndex=-1,this.refreshStyle(i),this.treeId=t.id,i.treeNode=this;var r=i.childElements()[0];r.insert(xssUtil.escape(this.name,{softHTMLEscape:!0,whiteList:["a"]})),null!=this.tooltip&&this.tooltip.length>0&&(r.title=this.tooltip),r.childElements().each(function(t,i){0===i&&(t.id=this.HANDLER_ID_PREFIX+e);var r=this.iconTooltip;r&&(t.title=isArray(r)?r[i]:r)}.bind(this)),this._element=i}),dynamicTree.TreeNode.addMethod("_createNodeChildren",function(){var e=this._getFooterTemplateElement();e.id=this.NODE_ID_PREFIX+this.id+this.SUB_NODE_ID_SUFFIX,this._childrenElement=e}),dynamicTree.TreeNode.addMethod("showNode",function(e){var t=dynamicTree.trees[this.getTreeId()];if(this._createNode(),this.isParent()){var i=this.isOpen()||t.showAllNodesOnStartup;if(i){this._createNodeChildren();for(var r=0;r<this.getChildCount();r++)this.childs[r].showNode(this._getChildrenElement());this.delayedRendering=!1,t.fireOpenEvent(this)}}this.render(e)}),dynamicTree.TreeNode.addMethod("render",function(e,t){if(!Object.isUndefined(e)){var i=$(e);i&&(this._getChildrenElement()&&this._getElement().insert(this._getChildrenElement()),t?i.insert(this._getElement(),{before:t._getElement()}):i.insert(this._getElement()))}}),dynamicTree.TreeNode.addMethod("_renderChildren",function(){var e=this._getElement();e&&this._getChildrenElement()&&e.insert(this._getChildrenElement())}),dynamicTree.TreeNode.addMethod("refreshNode",function(){if(this.refreshStyle(),this.isParent()&&this.isOpen()&&this.isloaded){this.delayedRendering?(this._createNodeChildren(),this._renderChildren()):this._getChildrenElement().update("");for(var e=0;e<this.getChildCount();e++)this.childs[e].showNode(this._getChildrenElement());this.delayedRendering=!1}var t=dynamicTree.trees[this.getTreeId()];t.refreshScroll()}),dynamicTree.TreeNode.addMethod("wait",function(){this.isWaiting=!0,this.refreshStyle()}),dynamicTree.TreeNode.addMethod("stopWaiting",function(){this.isWaiting=!1,this.refreshStyle()}),dynamicTree.TreeNode.addMethod("isHiddenRootNode",function(){var e=dynamicTree.trees[this.getTreeId()];return e.rootNode==this&&!e.bShowRoot}),dynamicTree.TreeNode.addMethod("deselect",function(e){var t=dynamicTree.trees[this.getTreeId()];return t&&this.isSelected()?(t.removeNodeFromSelected(this),this.refreshStyle(),e&&t.fireUnSelectEvent(this,e),!0):!1}),dynamicTree.TreeNode.addMethod("select",function(e,t,i){if(i=i||{},!t&&this.focus(),this.isSelected())return!1;var r=dynamicTree.trees[this.getTreeId()];return r.addNodeToSelected(this),this.refreshStyle(),!i.silent&&r.fireSelectEvent(this,e),!0}),dynamicTree.TreeNode.addMethod("focus",function(){var e=this;!isIPad()&&this._getElement()&&setTimeout(function(){e._getElement().focus()},100)}),dynamicTree.TreeNode.addMethod("isSelected",function(){var e=dynamicTree.trees[this.getTreeId()];return e&&e.isNodeSelected(this)}),dynamicTree.TreeNode.addMethod("_removeTitle",function(){var e=this._getTitle();e.data="",$(e.parentNode).cleanWhitespace()}),dynamicTree.TreeNode.addMethod("edit",function(e){if(this.editable){if(dynamicTree.treeNodeEdited==this)return;dynamicTree.treeNodeEdited=this;var t=this.name,i=$(this._getTitle().parentNode),r=this._getInputTemplateElement();this._getTitle().data="",i.cleanWhitespace(),i.insert(r),r.value=xssUtil.unescape(this.name),r.focus(),r.select(e),r.onclick=function(e){cancelEventBubbling(e)},r.ondblclick=function(e){cancelEventBubbling(e)},r.onmousedown=function(e){cancelEventBubbling(e)},r.onmouseup=function(e){cancelEventBubbling(e)},r.onkeydown=function(e){var i=window.event?window.event:e;13==i.keyCode?(r.onblur=null,this.doEndEdit(i)):27==i.keyCode&&(r.onblur=null,r.value=t,this.doEndEdit(i))}.bindAsEventListener(this),r.onblur=function(e){this.doEndEdit(e)}.bindAsEventListener(this),dynamicTree.trees[this.getTreeId()].fireStartEditEvent(this,r)}}),dynamicTree.TreeNode.addMethod("doEndEdit",function(e){this.editEnded(),dynamicTree.trees[this.getTreeId()].fireEndEditEvent(this)}),dynamicTree.TreeNode.addMethod("editEnded",function(){var e=dynamicTree.trees[this.getTreeId()];if(null!=dynamicTree.treeNodeEdited){var t=this._getTitleInputElement(),i=($(t.parentNode),t.value);if(i==dynamicTree.treeNodeEdited.name)return t.remove(),this._getTitle().data=dynamicTree.treeNodeEdited.name,void(dynamicTree.treeNodeEdited=null);e.fireEditEvent(dynamicTree.treeNodeEdited,i),dynamicTree.editaborted||(dynamicTree.treeNodeEdited.name=i,t.remove(),this._getTitle().data=i),dynamicTree.treeNodeEdited=null}}),dynamicTree.TreeNode.addMethod("scroll",function(e){var t=dynamicTree.trees[this.getTreeId()].rootNode._getElement(),i=e?$(e):$(t.parentNode),r=this._getElement();if(i){var n=i.clientHeight,d=i.clientWidth,s=i.scrollTop,o=i.scrollLeft,a=r.cumulativeOffset().top-i.cumulativeOffset().top,l=r.offsetLeft,h=r.clientHeight,c=r.clientWidth;a>s+n?i.scrollTop=a-(n/2-h/2):s>a+h&&(i.scrollTop=a-(n/2-h/2)),l>o+d?i.scrollLeft=l-(d/2-c/2):o>l+c&&(i.scrollTop=l-(d/2-c/2))}}),dynamicTree.TreeNode.addMethod("handleNode",function(e){if(this.isParent()){var t=dynamicTree.trees[this.getTreeId()];this.isOpen()?t.writeStates(this.id,dynamicTree.TreeNode.State.CLOSED):(t.writeStates(this.id,dynamicTree.TreeNode.State.OPEN),t.fireOpenEvent(this,e)),this.refreshNode()}}),dynamicTree.TreeNode.addMethod("openNode",function(e){if(this.isParent()){var t=dynamicTree.trees[this.getTreeId()];this.isOpen()||(t.writeStates(this.id,dynamicTree.TreeNode.State.OPEN),t.fireOpenEvent(this,e)),this.refreshNode()}}),dynamicTree.TreeNode.addMethod("_getHeaderTemplateElement",function(){var e=this.getType(),t=e&&e.templateDomId?e.templateDomId:this.nodeHeaderTemplateDomId,i=$(t).cloneNode(!0);return i.templateId=t,i.templateClassName=i.className,i}),dynamicTree.TreeNode.addMethod("_getFooterTemplateElement",function(){var e=this.nodeFooterTemplateDomId,t=$(e).cloneNode(!0);return t.templateId=e,t.update(""),t}),dynamicTree.TreeNode.addMethod("_getInputTemplateElement",function(){var e=this.nodeInputTemplateDomId,t=$(e).cloneNode(!0);return t.templateId=e,t}),define("dynamicTree.treenode",["prototype","underscore","dynamicTree.tree"],function(e){return function(){var t;return t||e.dynamicTree}}(this)),dynamicTree.Tree.addVar("NODE_PATTERN",".node").addVar("NODE_WRAPPER_PATTERN",".node > .wrap").addVar("NODE_ICON_PATTERN",".node > .wrap .icon").addVar("NODE_CUSTOM_PATTERNS",[]),dynamicTree.Tree.addVar("LEAF_PATTERN",".leaf").addVar("LEAF_WRAPPER_PATTERN",".leaf > .wrap").addVar("LEAF_ICON_PATTERN",".leaf > .wrap .icon").addVar("LEAF_CUSTOM_PATTERNS",[]),dynamicTree.Tree.addVar("EXPANDING_TIME",1e3),dynamicTree.Tree.addVar("draggables",[]),dynamicTree.Tree.addMethod("getTreeNodeByEvent",function(e){var t=Event.element(e);return this.getTreeNodeByElement(t)}),dynamicTree.Tree.addMethod("getTreeNodeByElement",function(e){for(;e&&e.readAttribute&&e.readAttribute("id")!==this.id;){var t=e.treeNode;if(t&&t.getTreeId()===this.getId())return t;e=$(e.parentNode)}return null}),dynamicTree.Tree.addMethod("isNodeEvent",function(e){var t=matchMeOrUp(e.element().parentNode,"LI");return t&&t.hasClassName(layoutModule.NODE_CLASS)}),dynamicTree.Tree.addMethod("isLeafEvent",function(e){var t=matchMeOrUp(e.element().parentNode,"LI");return t&&t.hasClassName(layoutModule.LEAF_CLASS)}),dynamicTree.Tree.addMethod("isIconEvent",function(e){return e.element().hasClassName(layoutModule.ICON_CLASS)}),dynamicTree.Tree.addMethod("_registerEvents",function(){this._cleanUpListeners(),this._registerClickEvents(),this._registerCustomEvents(),this._registerKeyEvents(),this._registerMouseEvents()}),dynamicTree.Tree.addMethod("_cleanUpListeners",function(){var e=this._getElement();e.stopObserving("click"),e.stopObserving("dblclick"),isSupportsTouch()?(e.stopObserving("touchstart"),e.stopObserving("drag:touchstart"),e.stopObserving("touchend")):(e.stopObserving("mousedown"),e.stopObserving("drag:mousedown"),e.stopObserving("mouseup")),e.stopObserving("mouseover"),e.stopObserving("mouseout")}),dynamicTree.Tree.addMethod("_registerClickEvents",function(){var e=this._getElement();e.observe("click",function(t){var i=matchMeOrUp(t.element(),layoutModule.BUTTON_PATTERN)&&this.getTreeNodeByEvent(t);if(i){var r=this.isIconEvent(t),n=this.isNodeEvent(t),d=this.isLeafEvent(t);n?(r&&e.fire("nodeIcon:click",{targetEvent:t,node:i}),e.fire("node:click",{targetEvent:t,node:i})):d&&(r&&e.fire("nodeIcon:click",{targetEvent:t,node:i}),e.fire("leaf:click",{targetEvent:t,node:i})),!isIPad()&&n&&r&&i.handleNode(t)}}.bindAsEventListener(this)),e.observe("dblclick",function(t){var i=matchMeOrUp(t.element(),layoutModule.BUTTON_PATTERN)&&this.getTreeNodeByEvent(t);if(i){var r=this.isIconEvent(t),n=this.isNodeEvent(t),d=this.isLeafEvent(t);n?(r&&e.fire("nodeIcon:dblclick",{targetEvent:t,node:i}),e.fire("node:dblclick",{targetEvent:t,node:i})):d&&(r&&e.fire("leafIcon:dblclick",{targetEvent:t,node:i}),e.fire("leaf:dblclick",{targetEvent:t,node:i})),this.handleNodeOnDblclick&&(n||d)&&!r&&i.handleNode(t)}}.bindAsEventListener(this))}),dynamicTree.Tree.addMethod("_registerMouseEvents",function(){var e=this._getElement();e.observe(isSupportsTouch()?"touchstart":"mousedown",function(t){var i=t.element(),r=matchMeOrUp(i,layoutModule.BUTTON_PATTERN)&&this.getTreeNodeByEvent(t);if(r){t.treeEvent=!0;var n=this.isIconEvent(t),d=this.isNodeEvent(t),s=this.isLeafEvent(t);if(isSupportsTouch())if(JRS.vars.ajax_in_progress)alert("please wait");else if(this.twofingers=!1,2==t.touches.length&&(this.twofingers=!0,this._selectOrEditNode(t,r,isMetaHeld(t),isShiftHeld(t),isRightClick(t)),r.isSelected()||designerBase&&designerBase.isInSelection(r))){var o=jQuery(i).parents("li:first");return void(o.hasClass("selected")&&document.fire(layoutModule.ELEMENT_CONTEXTMENU,{targetEvent:t,node:i}))}isSupportsTouch()&&JRS.vars.ajax_in_progress||(!this.selectOnMousedown||isSupportsTouch()&&1!=t.touches.length||this._selectOrEditNode(t,r,isMetaHeld(t),isShiftHeld(t),isRightClick(t)),d?(n&&e.fire("nodeIcon:mousedown",{targetEvent:t,node:r}),e.fire("node:mousedown",{targetEvent:t,node:r})):s&&(n&&e.fire("leafIcon:mousedown",{targetEvent:t,node:r}),e.fire("leaf:mousedown",{targetEvent:t,node:r})))}}.bindAsEventListener(this)),e.observe(isSupportsTouch()?"drag:touchstart":"drag:mousedown",function(t){var i=t.memo.targetEvent,r=matchMeOrUp(i.element(),layoutModule.BUTTON_PATTERN)&&this.getTreeNodeByEvent(i);if(r){i.treeEvent=!0;var n=this.isIconEvent(i),d=this.isNodeEvent(i),s=this.isLeafEvent(i);this.selectOnMousedown&&!isRightClick(i)&&this._selectOrEditNode(i,r,isMetaHeld(i),isShiftHeld(i),isRightClick(i)),d?(n&&e.fire("nodeIcon.drag:mousedown",{targetEvent:i,node:r}),e.fire("node.drag:mousedown",{targetEvent:i,node:r})):s&&(n&&e.fire("leafIcon.drag:mousedown",{targetEvent:i,node:r}),e.fire("leaf.drag:mousedown",{targetEvent:i,node:r}))}}.bindAsEventListener(this)),e.observe(isSupportsTouch()?"touchend":"mouseup",function(t){var i=matchMeOrUp(t.element(),layoutModule.BUTTON_PATTERN)&&this.getTreeNodeByEvent(t);if(i){t.treeEvent=!0;var r=this.isIconEvent(t),n=this.isNodeEvent(t),d=this.isLeafEvent(t);if(this.twofingers&&(t.isEmulatedRightClick=!0),isSupportsTouch()&&!this.twofingers&&(this.clickid==i.id&&!JRS.vars.ajax_in_progress&&t.timeStamp-this.clicktime<700&&(n?(r&&e.fire("nodeIcon:dblclick",{targetEvent:t,node:i}),e.fire("node:dblclick",{targetEvent:t,node:i})):d&&(r&&e.fire("leafIcon:dblclick",{targetEvent:t,node:i}),e.fire("leaf:dblclick",{targetEvent:t,node:i})),this.handleNodeOnDblclick&&(n||d)&&!r&&i.handleNode(t)),this.clicktime=t.timeStamp,this.clickid=i.id),!isSupportsTouch()||!JRS.vars.ajax_in_progress){this.selectOnMousedown||TouchController.element_scrolled||isSupportsTouch()&&1!=t.changedTouches.length||this._selectOrEditNode(t,i,isMetaHeld(t),isShiftHeld(t),isRightClick(t)),this._deselectOthers(t,i,isMetaHeld(t),isShiftHeld(t),isRightClick(t));n?(r&&e.fire("nodeIcon:mouseup",{targetEvent:t,node:i}),e.fire("node:mouseup",{targetEvent:t,node:i})):d&&(r&&e.fire("leafIcon:mouseup",{targetEvent:t,node:i}),e.fire("leaf:mouseup",{targetEvent:t,node:i})),isSupportsTouch()&&n&&r&&!TouchController.element_scrolled&&i.handleNode(t)}}}.bindAsEventListener(this)),"createTouch"in document||(e.observe("mouseover",function(t){var i=t.element(),r=matchMeOrUp(i,layoutModule.BUTTON_PATTERN)&&this.getTreeNodeByEvent(t);r&&(Draggables.dragging&&(clearTimeout(this.timeout_id),this.timeout_id=setTimeout(function(e){r.openNode(e)},this.EXPANDING_TIME)),this.createDraggableIfNeeded(t,r),!isIE7()&&e.fire("tree:mouseover",{targetEvent:t,node:r
}))}.bindAsEventListener(this)),isIE7()||e.observe("mouseout",function(t){var i=matchMeOrUp(t.element(),layoutModule.BUTTON_PATTERN)&&this.getTreeNodeByEvent(t);i&&e.fire("tree:mouseout",{targetEvent:t,node:i})}.bindAsEventListener(this))),Droppables.add(e,{accept:this.dropClasses,onDrop:function(e){this.elementDropped=e}.bind(this)})}),dynamicTree.Tree.addMethod("_registerKeyEvents",function(){var e=this._getElement();e.observe("key:down",function(e){var t=this.getTreeNodeByEvent(e);dynamicTree.treeNodeEdited!==t&&t&&this._selectNextNode(t,e.memo.targetEvent)}.bindAsEventListener(this)),e.observe("key:up",function(e){var t=this.getTreeNodeByEvent(e);dynamicTree.treeNodeEdited!==t&&t&&this._selectPreviousNode(t,e.memo.targetEvent)}.bindAsEventListener(this)),e.observe("key:right",function(e){var t=this.getTreeNodeByEvent(e);dynamicTree.treeNodeEdited!==t&&t&&this._selectInwards(t,e.memo.targetEvent)}.bindAsEventListener(this)),e.observe("key:left",function(e){var t=this.getTreeNodeByEvent(e);dynamicTree.treeNodeEdited!==t&&t&&this._selectOutwards(t,e.memo.targetEvent)}.bindAsEventListener(this))}),dynamicTree.Tree.addMethod("_registerCustomEvents",function(){var e=this._getElement();e.observe("mousedown",function(t){dynamicTree.activeTreeId&&dynamicTree.activeTreeId===this.getId()||(e.fire("tree:blur",{targetEvent:t,tree:dynamicTree.getActiveTree()}),dynamicTree.activeTreeId=this.getId(),e.fire("tree:focus",{targetEvent:t,tree:dynamicTree.getActiveTree()}))}.bindAsEventListener(this)),e.observe("mouseover",function(t){var i=this.getTreeNodeByEvent(t);i||e.fire("tree:mouseover",{targetEvent:t,tree:this})}.bindAsEventListener(this)),e.observe("mouseout",function(t){var i=this.getTreeNodeByEvent(t);i||e.fire("tree:mouseout",{targetEvent:t,tree:this})}.bindAsEventListener(this))}),dynamicTree.Tree.addMethod("fireOpenEvent",function(e,t){var i=this._getElement();i.fire("node:open",{node:e,targetEvent:t})}),dynamicTree.Tree.addMethod("fireSelectEvent",function(e,t){var i=this._getElement();i.fire(e.isParent()?"node:selected":"leaf:selected",{node:e,targetEvent:t})}),dynamicTree.Tree.addMethod("fireUnSelectEvent",function(e,t){var i=this._getElement();i.fire(e.isParent()?"node:unselected":"leaf:unselected",{node:e,targetEvent:t})}),dynamicTree.Tree.addMethod("fireUnSelectAllEvent",function(e){var t=this._getElement();t.fire("items:unselected",{targetEvent:e})}),dynamicTree.Tree.addMethod("fireEditEvent",function(e,t){var i=this._getElement();i.fire(e.isParent()?"node:edit":"leaf:edit",{node:e,newValue:t})}),dynamicTree.Tree.addMethod("fireStartEditEvent",function(e,t){var i=this._getElement();i.fire(e.isParent()?"node:startEdit":"leaf:startEdit",{node:e,input:t})}),dynamicTree.Tree.addMethod("fireEndEditEvent",function(e){var t=this._getElement();t.fire(e.isParent()?"node:endEdit":"leaf:endEdit",{node:e})}),dynamicTree.Tree.addMethod("observe",function(e,t){this._getElement().observe(e,t)}),dynamicTree.Tree.addMethod("stopObserving",function(e,t){this._getElement().stopObserving(e,t)}),dynamicTree.Tree.addMethod("createDraggableIfNeeded",function(e,t){var i=e?e.element():t._getElement().down(this.dragPattern),r=this.draggables[i.identify()];if(this.dragPattern&&!r){var n=matchAny(i,[this.dragPattern],!0);if(n&&i.className.toLowerCase().indexOf("icon")<0&&!this.draggables[n.identify()])return this.draggables[n.identify()]=new Draggable(i,{superghosting:!0,mouseOffset:!0,delay:isIE()||isSupportsTouch()?200:0,onStart:this.setDragStartState.bind(this,t),onEnd:this.setDragEndState.bind(this,t)}),this.draggables[n.identify()]}return null}),dynamicTree.Tree.addMethod("setDragStartState",function(e,t,i){var r=e._getElement().templateClassName;r&&t.element.addClassName(r),t.element.setStyle({width:null,height:null}),t.element.addClassName(layoutModule.DRAGGING_CLASS).addClassName(this.getId()),this.dragClasses&&t.element.addClassName(this.dragClasses),this.selectedNodes.length>1&&t.element.update(new Template(this.TREE_NN_ITEMS_SELECTED).evaluate({count:this.selectedNodes.length})),t.element.node=e,t.element.nodes=this.selectedNodes,t.options.scroll=this._getElement(),t.options.scrollSensitivity=layoutModule.SCROLL_SENSITIVITY,Draggables.dragging=this.regionID||!0}),dynamicTree.Tree.addMethod("setDragEndState",function(e,t,i){delete Draggables.dragging}),define("dynamicTree.events",["prototype","dynamicTree.tree"],function(e){return function(){var t;return t||e.dynamicTree}}(this)),dynamicTree.TreeSupport=function(e,t){if(dynamicTree.Tree.call(this,e,t),this.providerId=t.providerId,this.hideLoader=t.hideLoader,this.rootUri=Object.isUndefined(t.rootUri)?"/":t.rootUri,this.nodeClass=t.nodeClass&&Object.isFunction(t.nodeClass)?t.nodeClass:dynamicTree.TreeNode,t.rootObjectModifier&&(this.modifyRootObject=t.rootObjectModifier),this.resetStatesOnShow=Object.isUndefined(t.resetStatesOnShow)||t.resetStatesOnShow,this.inInit=!0,this.ajaxBufferId="ajaxbuffer",this.nodeTextId="treeNodeText",this.urlGetNode=t.urlGetNode?t.urlGetNode:this._getFlowUrl("getNode"),this.urlGetChildren=t.urlGetChildren?t.urlGetChildren:this._getFlowUrl("getChildren"),this.urlGetMultipleChildren=t.urlGetMultipleChildren?t.urlGetMultipleChildren:this._getFlowUrl("getMultipleChildren"),this.urlGetMessage=t.urlGetMessage?t.urlGetMessage:this._getFlowUrl("getMessage"),this.additionalParams=t.additionalParams?t.additionalParams:{},null==this.TREE_NN_ITEMS_SELECTED){var i=function(e){this.TREE_NN_ITEMS_SELECTED=e}.bind(this);this.getMessage("TREE_NN_ITEMS_SELECTED",i,null)}this._initOpenListener()},dynamicTree.TreeSupport.prototype=deepClone(dynamicTree.Tree.prototype),dynamicTree.TreeSupport.addMethod("_initOpenListener",function(){this.observe("node:open",function(e){var t=e.memo.node;t&&!t.isloaded&&this.getTreeNodeChildren(t)}.bindAsEventListener(this))}),dynamicTree.TreeSupport.addMethod("stopObserving",function(e,t){this._getElement().stopObserving(e,t),"node:open"!==e||t||this._initOpenListener()}),dynamicTree.TreeSupport.addMethod("_getFlowUrl",function(e){return __jrsConfigs__.contextPath+"/flow.html?_flowId=treeFlow&method="+e}),dynamicTree.TreeSupport.addMethod("showTree",function(e,t,i,r){var n=this.urlGetNode+"&provider="+this.providerId+"&uri="+this.rootUri+"&depth="+e;r&&(n+="&forceHtmlEscape=true"),n+="&"+this._evaluateAdditionalParams(),this._showTree(n,t,i)}),dynamicTree.TreeSupport.addMethod("_evaluateAdditionalParams",function(){var e=this.additionalParams;return _.isFunction(e)&&(e=e.call(null)),_.isObject(e)?Object.toQueryString(e):null}),dynamicTree.TreeSupport.addMethod("showTreePrefetchNodes",function(e,t,i){var r=this.urlGetNode+"&provider="+this.providerId+"&uri="+this.rootUri;e&&(r+="&prefetch="+encodeURIComponent(e)),r+="&"+this._evaluateAdditionalParams(),this._showTree(r,t,i)}),dynamicTree.TreeSupport.addMethod("_showTree",function(e,t,i){var r=this;this.inInit=!0,this.wait();var n=function(e,t,i){return function(){return e.showTreeCallback(t,i)}}(this,t,i),d=function(){var e=!1;return r.httpErrorHandler&&(e=r.httpErrorHandler.apply(window,arguments)),e===!1&&(e=baseErrorHandler.apply(window,arguments)),e};ajaxTargettedUpdate(e,{fillLocation:this.ajaxBufferId,callback:n,errorHandler:d,hideLoader:this.hideLoader})}),dynamicTree.TreeSupport.addMethod("showTreeCallback",function(e,t){var i=document.getElementById(this.nodeTextId);if(null==i)return void(t?t():this.fireServerErrorEvent());var r=xssUtil.unescape(jQuery(i).text()),n=r.evalJSON();this.modifyRootObject&&(n=this.modifyRootObject(n,!1)),i=document.getElementById(this.ajaxBufferId),i.innerHTML="",this.setRootNode(this.processNode(n)),this.resortTree(),this.resetStatesOnShow&&this.resetStates(),this.renderTree(),this.inInit=!1,e?e():this.fireTreeLoadedEvent({tree:this})}),dynamicTree.TreeSupport.addMethod("processNode",function(e){var t={};t.id=e.id,t.type=e.type,t.uri=e.uri,t.extra=deepClone(e.extra),e.cssClass&&(t.cssClass=e.cssClass);var i=this.nodeClass,r=new i({name:unescapeBackslash(e.label),param:t,orderNumber:e.order});e.tooltip&&(r.tooltip=e.tooltip);var n=e.children;if(null!=n){var d=n.length;if(0===d)r.setHasChilds(!1);else for(var s=0;d>s;s++){var o=n[s];if(o){var a=this.processNode(o);r.addChild(a)}}r.isloaded=!0}return r}),dynamicTree.TreeSupport.addMethod("getTreeNodeChildren",function(e,t,i){var r=e.param.uri,n=function(e,t,i,r){return function(){return e.getTreeNodeChildrenCallback(t,i,r)}}(this,e.id,t,i),d=function(t){(500==t.status||t.getResponseHeader("JasperServerError"))&&e.stopWaiting(),baseErrorHandler(t)};ajaxTargettedUpdate(this.urlGetChildren+"&provider="+this.providerId+"&uri="+encodeURIComponent(encodeURIComponent(r))+"&"+this._evaluateAdditionalParams(),{fillLocation:this.ajaxBufferId,callback:n,errorHandler:d,hideLoader:this.hideLoader}),this.inInit||e.wait()}),dynamicTree.TreeSupport.addMethod("getTreeNodeChildrenCallback",function(e,t,i){var r=document.getElementById(this.nodeTextId);if(null==r)return void(i?i():this.fireServerErrorEvent());var n=xssUtil.unescape(jQuery(r).text()).evalJSON(),d=dynamicTree.nodes[e];this.modifyRootObject&&(n=this.modifyRootObject(n,!0,d)),r=document.getElementById(this.ajaxBufferId),r.innerHTML="",d.resetChilds(),d.stopWaiting();var s=n.length;if(0===s)d.setHasChilds(!1);else{var o=d.getTreeId(),a=o?dynamicTree.trees[o]:null,l=a?a.sortNodes:null;a&&(a.sortNodes=!1);for(var h=0;s>h;h++){var c=this.processNode(n[h]);d.addChild(c)}a&&(a.sortNodes=l,d.resortChilds())}d.isloaded=!0,d.refreshNode(),t?t(d.childs):this.fireChildrenLoadedEvent(d.childs)}),dynamicTree.TreeSupport.addMethod("getTreeMultipleNodesChildren",function(e,t,i){var r,n="",d=[];if(e&&e.length)for(r=0;r<e.length;r++)r>0&&(n+=","),n+=encodeURIComponent(encodeURIComponent(e[r].param.uri)),d[r]=e[r].id;if(n.length){var s=function(e,t,i,r){return function(){return e.getTreeMultipleNodesChildrenCallback(t,i,r)}}(this,d,t,i);if(ajaxTargettedUpdate(this.urlGetMultipleChildren+"&provider="+this.providerId,{fillLocation:this.ajaxBufferId,callback:s,postData:"uris="+n,errorHandler:baseErrorHandler,hideLoader:this.hideLoader}),!this.inInit)for(r=0;r<e.length;r++)e[r].wait()}}),dynamicTree.TreeSupport.addMethod("getTreeMultipleNodesChildrenCallback",function(e,t,i){var r=document.getElementById(this.nodeTextId);if(null==r)return void(i?i():this.fireServerErrorEvent());var n=xssUtil.unescape(jQuery(r).text()).evalJSON();r=document.getElementById(this.ajaxBufferId),r.innerHTML="",t?t(e,n):(this.setMultipleNodesChilden(e,n),this.fireMultipleChildrenLoadedEvent(e,n))}),dynamicTree.TreeSupport.addMethod("setMultipleNodesChilden",function(e,t,i){if(e&&t)for(var r=0;r<t.length;r++){for(var n=t[r],d=n.children,s=null,o=0;o<e.length;o++){var a=dynamicTree.nodes[e[o]];if(a.param.uri==n.parentUri){s=a;break}}if(s){s.resetChilds(),s.stopWaiting();var l=d.length;if(0===l)s.setHasChilds(!1);else{var h=s.getTreeId(),c=h?dynamicTree.trees[h]:null,u=c?c.sortNodes:null;c&&(c.sortNodes=!1);for(var m=0;l>m;m++){var T=this.processNode(d[m]);s.addChild(T)}c&&(c.sortNodes=u,s.resortChilds())}s.isloaded=!0,i||s.refreshNode()}}}),dynamicTree.TreeSupport.addMethod("getTreeNodeChildrenPrefetched",function(e,t,i,r,n,d,s){var o=e.param.uri,a=this.urlGetNode+"&provider="+this.providerId+"&uri="+o,l="";t&&(l="&prefetch="+t),n&&(a+="&depth="+n);var h=function(e,t,i,r,n,d){return function(){return e.getTreeNodeChildrenPrefetchedCallback(t,i,r,n,d)}}(this,e.id,i,r,d,s);ajaxTargettedUpdate(a,{fillLocation:this.ajaxBufferId,callback:h,postData:l,errorHandler:baseErrorHandler,hideLoader:this.hideLoader}),this.inInit||e.wait()}),dynamicTree.TreeSupport.addMethod("getTreeNodeChildrenPrefetchedCallback",function(e,t,i,r,n){var d=document.getElementById(this.nodeTextId);if(null==d)return void(i?i():this.fireServerErrorEvent());var s=xssUtil.unescape(jQuery(d).text()).evalJSON();d=document.getElementById(this.ajaxBufferId),d.innerHTML="";var o=dynamicTree.nodes[e];if(o.resetChilds(),o.stopWaiting(),s.children){var a=o.getTreeId(),l=a?dynamicTree.trees[a]:null,h=l?l.sortNodes:null;l&&(l.sortNodes=!1);for(var c=0;c<s.children.length;c++){var u=this.processNode(s.children[c]);o.addChild(u)}l&&(l.sortNodes=h,r||o.resortChilds())}o.isloaded=!0,n||o.refreshNode(),t?t():this.fireChildredPrefetchedLoadedEvent(o.childs)}),dynamicTree.TreeSupport.addMethod("openAndSelectNode",function(e,t,i,r){var n=function(e){var t=dynamicTree.trees[e.getTreeId()];e.parent&&t&&t.rootNode!=e.parent&&t.getState(e.parent.id)==dynamicTree.TreeNode.State.CLOSED&&e.parent.handleNode(),e&&jQuery("#dataChooserSource").length&&(e.nofocus=!0),t._selectOrEditNode(void 0,e,!1,!1,!1,r)};this.processNodePath(e,n,i);var d=this.getSelectedNode();d&&d.scroll(),t&&t()}),dynamicTree.TreeSupport.addMethod("processNodePath",function(e,t,i){var r=this.getRootNode();if("/"===e)t(r);else{var n,d=e.split("/");for(n=0;n<d.length;n++)if(d[n]){var s=r;if(r=this.findNodeChildByMetaName(r,d[n]),!r){if(!i)return;if(r=this.findNodeFirstNodeChildByAlphabeticalOrder(s),!r)return}t(r)}}}),dynamicTree.TreeSupport.addMethod("findLastLoadedNode",function(e){var t={node:null},i=function(e){return function(t){e.node=t}}(t);return this.processNodePath(e,i),t.node}),dynamicTree.TreeSupport.addMethod("findNodeChildByMetaName",function(e,t){if(e.hasChilds())for(var i=0;i<e.childs.length;i++)if(e.childs[i].param.id==t)return e.childs[i];return null}),dynamicTree.TreeSupport.addMethod("findNodeFirstNodeChildByAlphabeticalOrder",function(e){var t=null,i=null;if(e.childs.length>0){t=e.childs[0].param.id,i=0;for(var r=null,n=null,d=1;d<e.childs.length;d++){r=e.childs[d].param.id,n=d;for(var s=r.length<t.length?r.length:t.length,o=0;s>o;o++){if(r.charCodeAt(o)<t.charCodeAt(o)){t=r,i=n;break}if(r.charCodeAt(o)>t.charCodeAt(o))break}}return e.childs[i]}return null}),dynamicTree.TreeSupport.addMethod("findNodeById",function(e,t){return function i(e,t){if(!t||!e)return null;if(t.param.id===e)return t;if(t.hasChilds())for(var r=0;r<t.childs.length;++r){var n=i(e,t.childs[r]);if(n)return n}return null}(e,t?t:this.getRootNode())}),dynamicTree.TreeSupport.addMethod("hasVisibleFolders",function(e){if(this.bShowRoot)return!0;var t=e.children;if(t)for(var i=0;i<t.length;i++){var r=e.children[i].children;if(r&&r.length>0)return!0}return!1}),dynamicTree.TreeSupport.addMethod("getMessage",function(e,t,i){var r=this.urlGetMessage+"&messageId="+e,n=function(e,t,i){return function(){return e.getMessageCallback(t,i)}}(this,t,i);ajaxTargettedUpdate(r,{fillLocation:this.ajaxBufferId,callback:n,errorHandler:baseErrorHandler,hideLoader:this.hideLoader})}),dynamicTree.TreeSupport.addMethod("getMessageCallback",function(e,t){var i=document.getElementById(this.ajaxBufferId);if(null==i)return void(t&&t());var r=trim(i.innerHTML);i.innerHTML="",e&&e(r)}),dynamicTree.TreeSupport.addMethod("fireServerErrorEvent",function(){this._getElement().fire("server:error",{})}),dynamicTree.TreeSupport.addMethod("fireTreeLoadedEvent",function(e){this._getElement().fire("tree:loaded",{tree:e})}),dynamicTree.TreeSupport.addMethod("fireChildrenLoadedEvent",function(e){this._getElement().fire("children:loaded",{nodes:e})}),dynamicTree.TreeSupport.addMethod("fireMultipleChildrenLoadedEvent",function(e,t){this._getElement().fire("multipleChildren:loaded",{parentNodeIds:e,metaNodes:t})}),dynamicTree.TreeSupport.addMethod("fireChildredPrefetchedLoadedEvent",function(e){this._getElement().fire("childredPrefetched:loaded",{nodes:e})}),define("components.dynamicTree",["prototype","dynamicTree.tree","dynamicTree.treenode","dynamicTree.events","core.ajax"],function(e){return function(){var t;return t||e.dynamicTree}}(this)),dynamicTree.RepositoryFolder=function(e){dynamicTree.TreeNode.call(this,e),this.Types={Folder:new dynamicTree.TreeNode.Type("com.jaspersoft.jasperserver.api.metadata.common.domain.Folder"),SuperRoot:new dynamicTree.TreeNode.Type("superroot"),Root:new dynamicTree.TreeNode.Type("root")},this.nodeHeaderTemplateDomId="list_responsive_collapsible_folders:folders",this.param.extra&&this.param.extra.isActiveThemeFolder&&(this.param.cssClass=this.ACTIVE_THEME_CLASS)},dynamicTree.TreeNode&&(dynamicTree.RepositoryFolder.prototype=deepClone(dynamicTree.TreeNode.prototype)),dynamicTree.RepositoryFolder.addVar("ACTIVE_THEME_CLASS","activeTheme"),dynamicTree.RepositoryFolder.addMethod("isParent",function(){return this.param.type==this.Types.Folder.name||this.param.type==this.Types.SuperRoot.name||this.param.type==this.Types.Root.name}),dynamicTree.RepositoryFolder.addMethod("isSuperRoot",function(){return this.param.type==this.Types.SuperRoot.name}),dynamicTree.RepositoryFolder.addMethod("isPublic",function(){return"public"===this.param.id}),dynamicTree.createRepositoryTree=function(e,t){var i=null!=t.organizationId&&""!==t.organizationId;null==t.bShowRoot&&(t.bShowRoot=!i),t.nodeClass||(t.nodeClass=dynamicTree.RepositoryFolder),t.templateDomId="list_responsive_collapsible_folders";var r=new dynamicTree.TreeSupport(e,t);if(r.organizationId=t.organizationId,r.publicFolderUri=t.publicFolderUri,r.orgMode=i,r.modifyRootObject=function(e,t,i){var r;if(t){r=[];for(var n=0;n<e.length;n++)e[n].uri==this.publicFolderUri&&i&&"/"!=i.param.uri||r.push(e[n])}else if(this.orgMode&&null!=e.children){for(var d,s=e.children,o=[],n=0;n<s.length;n++)s[n].uri==this.publicFolderUri?d=s[n]:o.push(s[n]);e.children=o,r={type:"superroot",label:"",extra:{}},r.children=[e,d]}else r=e;return r},r.getRootNode=function(){var e=this.rootNode;return e.isSuperRoot()?e.childs[0].isPublic()?e.childs[1]:e.childs[0]:e},r.findNodeChildByMetaName=function(e,t){if(e.isSuperRoot()){var i,n;if(e.childs[0].isPublic()?(i=e.childs[0],n=e.childs[1]):(i=e.childs[1],n=e.childs[0]),"public"===t)return i;e=n}if(e.hasChilds())for(var d=0;d<e.childs.length;d++)if(e.childs[d].param.id==t)return e.childs[d];return"public"==t&&e.parent&&e.parent.isSuperRoot()?r.findNodeChildByMetaName(e.parent,t):null},isIPad()){var n=$(e);r.touchController=new TouchController(n,n.up(1),{absolute:!0})}return r},define("dynamicTree.utils",["components.dynamicTree","touchcontroller","dynamicTree.treenode"],function(e){return function(){var t;return t||e.dynamicTree}}(this));var picker={};picker.FileSelector=function(e){this._disabled=void 0!==e.disabled?e.disabled:!1,this._uriTextbox=$(e.uriTextboxId),this._browseButtonId=$(e.browseButtonId),this._onChange=e.onChange||!1,this._options=e,this._disabled?(buttonManager.disable(this._uriTextbox),buttonManager.disable(this._browseButtonId)):(this._id=e.id,this._suffix=e.suffix?e.suffix:(new Date).getTime(),this._treeDomId=e.treeId,this._selectLeavesOnly=void 0!==e.selectLeavesOnly?e.selectLeavesOnly:!1,this._selectedUri=$F(this._uriTextbox),this._process(e),this._assignHandlers(),this._refreshButtonsState())},picker.FileSelector.addVar("DEFAULT_TEMPLATE_DOM_ID","selectFromRepository"),picker.FileSelector.addVar("DEFAULT_TREE_ID","selectFromRepoTree"),picker.FileSelector.addVar("OK_BUTTON_ID","selectFromRepoBtnSelect"),picker.FileSelector.addVar("CANCEL_BUTTON_ID","selectFromRepoBtnCancel"),picker.FileSelector.addVar("TITLE_PATTERN","div.title"),picker.FileSelector.addMethod("_process",function(e){!this._id&&(this._id=this.DEFAULT_TEMPLATE_DOM_ID),!$(this._id)&&this._options.template&&this._options.i18n?(this._dom=jQuery(_.template(this._options.template,{i18n:this._options.i18n})),this._dom=this._dom[0]):this._dom=$(this._id).cloneNode(!0),this._dom.writeAttribute("id",this._id+this._suffix),this._okButton=this._dom.select("#"+this.OK_BUTTON_ID)[0],this._okButton.writeAttribute("id",this.OK_BUTTON_ID+this._suffix),this._cancelButton=this._dom.select("#"+this.CANCEL_BUTTON_ID)[0],this._cancelButton.writeAttribute("id",this.CANCEL_BUTTON_ID+this._suffix),!this._treeDomId&&(this._treeDomId=this.DEFAULT_TREE_ID),this._treeDom=this._dom.select("#"+this._treeDomId)[0],this._treeDom.writeAttribute("id",this._treeDomId+this._suffix),this._visible=!1,e.title&&this._dom.select(this.TITLE_PATTERN)[0].update(e.title),this._onOk=e.onOk,this._onCancel=e.onCancel,jQuery(document.body).append(this._dom);var t,i=this._dom.down(layoutModule.SWIPE_SCROLL_PATTERN);i&&(t=layoutModule.createScroller(i));var r=Object.extend({providerId:e.providerId,scroll:t},e.treeOptions);this._tree=dynamicTree.createRepositoryTree(this._treeDomId+this._suffix,r),this._selectedUri&&this._selectedUri.length>0?this._tree.showTreePrefetchNodes(this._selectedUri):this._tree.showTree(1)}),picker.FileSelector.addMethod("_assignHandlers",function(){this._dom.observe("click",this._dialogClickHandler.bindAsEventListener(this)),["node:dblclick","leaf:dblclick"].each(function(e){this._tree.observe(e,this._treeClickHandler.bindAsEventListener(this))},this),["node:click","leaf:click","node:selected","leaf:selected"].each(function(e){this._tree.observe(e,this._refreshButtonsState.bindAsEventListener(this))},this),["childredPrefetched:loaded","tree:loaded"].each(function(e){this._tree.observe(e,this._treeLoadHandler.bindAsEventListener(this))},this),this._browseButtonId.observe("click",this._browseClickHandler.bindAsEventListener(this))}),picker.FileSelector.addMethod("_canClickOk",function(e){return this._tree.getSelectedNode()&&(this._selectLeavesOnly?this._tree.getSelectedNode().param.type!==this._tree.getSelectedNode().FOLDER_TYPE_NAME:!0)}),picker.FileSelector.addMethod("_dialogClickHandler",function(e){var t=e.element();if(matchAny(t,["#"+this.OK_BUTTON_ID+this._suffix],!0)){e.stop();var i=this._tree.getSelectedNode().param.uri;this._uriTextbox.setValue(i),this._onChange&&this._onChange(i),this._hide(),this._onOk&&this._onOk()}else matchAny(t,["#"+this.CANCEL_BUTTON_ID+this._suffix],!0)&&(e.stop(),this._hide(),this._onCancel&&this._onCancel())}),picker.FileSelector.addMethod("_treeClickHandler",function(e){if(this._canClickOk()){var t=this._tree.getSelectedNode().param.uri;this._uriTextbox.setValue(t),this._onChange&&this._onChange(t),this._hide(),this._onOk&&this._onOk()}}),picker.FileSelector.addMethod("_treeLoadHandler",function(e){this._visible&&this._selectedUri&&this._tree.openAndSelectNode(this._selectedUri)}),picker.FileSelector.addMethod("_browseClickHandler",function(e){e.stop(),this._show()}),picker.FileSelector.addMethod("_refreshButtonsState",function(){this._canClickOk()?buttonManager.enable(this._okButton):buttonManager.disable(this._okButton)}),picker.FileSelector.addMethod("_hide",function(){dialogs.popup.hide(this._dom),this._visible=!1}),picker.FileSelector.addMethod("_show",function(){this._selectedUri=$F(this._uriTextbox),this._selectedUri&&this._selectedUri.length>0?this._tree.showTreePrefetchNodes(this._selectedUri):this._tree.showTree(1),dialogs.popup.show(this._dom,!0),this._visible=!0,this._selectedUri&&this._tree.openAndSelectNode(this._selectedUri),this._refreshButtonsState()}),picker.FileSelector.addMethod("remove",function(){jQuery(this._dom).remove()}),define("components.pickers",["utils.common","components.dialogs","core.layout","core.events.bis","prototype","jquery","dynamicTree.utils"],function(e){return function(){var t;return t||e.picker}}(this));var resourceAnalysisConnection={TYPE_ID:"analysisConnection.type",LABEL_ID:"connectionLabel",RESOURCE_ID_ID:"connectionName",DESCRIPTION_ID:"connectionDescription",RESOURCE_INPUT_ID:"resourceUri",BROWSE_BUTTON_ID:"browser_button",TREE_ID:"folderTreeRepoLocation",FOLDERS_TREE_DATA_PROVIDER_ID:"repositoryExplorerTreeFoldersProvider",XMLA_CATALOG_ID:"xmlaCatalog",XMLA_DATA_SOURCE_ID:"xmlaDatasource",XMLA_CONNECTION_URI_ID:"xmlaConnectionUri",TEST_BUTTON_ID:"testXMLAConnection",NEXT_BUTTON_ID:"next",DONE_BUTTON_ID:"done",CHANGE_TYPE_BUTTON_ID:"changeCombo",_canGenerateId:!0,initialize:function(e){this._form=$(document.body).select("form")[0],this._type=$(this.TYPE_ID),this._label=$(this.LABEL_ID),this._resourceId=$(this.RESOURCE_ID_ID),this._description=$(this.DESCRIPTION_ID);var t=this._type.getValue();"olapXmlaCon"==t&&(this._xmlaCatalog=$(this.XMLA_CATALOG_ID),this._xmlaDataSource=$(this.XMLA_DATA_SOURCE_ID),this._xmlaConnectionUri=$(this.XMLA_CONNECTION_URI_ID)),this._nextButton=$(this.NEXT_BUTTON_ID),this._doneButton=$(this.DONE_BUTTON_ID),this._testButton=$(this.TEST_BUTTON_ID),this._changeTypeButton=$(this.CHANGE_TYPE_BUTTON_ID),this._isEditMode=e.isEditMode,this._label.validator=resource.labelValidator.bind(this),this._resourceId.validator=resource.resourceIdValidator.bind(this),this._description.validator=resource.descriptionValidator.bind(this),"olapXmlaCon"==t&&(this._xmlaCatalog.validator=this._xmlaCatalogValidator.bind(this),this._xmlaDataSource.validator=this._xmlaDataSourceValidator.bind(this),this._xmlaConnectionUri.validator=this._xmlaConnectionUriValidator.bind(this)),this._initResourcePicker(),this._initEvents()},_initResourcePicker:function(){new picker.FileSelector({treeId:this.TREE_ID,providerId:this.FOLDERS_TREE_DATA_PROVIDER_ID,uriTextboxId:this.RESOURCE_INPUT_ID,browseButtonId:this.BROWSE_BUTTON_ID,title:resource.messages["resource.SaveToFolder.Title"]})},_initEvents:function(){this._type.observe("change",function(){this._changeTypeButton.click()}.bindAsEventListener(this));var e=function(e){this._isDataValid()||e.stop()}.bindAsEventListener(this),t=function(e){this._isDataValid()?this.testXMLAConnection():e.stop()}.bindAsEventListener(this);this._nextButton.observe("click",e),this._doneButton.observe("click",e),this._testButton&&this._testButton.observe("click",t),this._form.observe("keyup",function(e){var t=e.element(),i=[this._label,this._resourceId,this._description,this._xmlaCatalog,this._xmlaDataSource,this._xmlaConnectionUri];i.include(t)&&(ValidationModule.validate(resource.getValidationEntries([t])),t==this._resourceId&&this._resourceId.getValue()!=resource.generateResourceId(this._label.getValue())&&(this._canGenerateId=!1),t==this._label&&!this._isEditMode&&this._canGenerateId&&(this._resourceId.setValue(resource.generateResourceId(this._label.getValue())),ValidationModule.validate(resource.getValidationEntries([this._resourceId]))))}.bindAsEventListener(this))},testXMLAConnection:function(){var e=this._testButton,t=jQuery(this._form),i=t.serializeArray();i.push({name:"_eventId_testXMLAConnection",value:""}),ajaxTargettedUpdate(t.attr("action"),{postData:jQuery.param(i),fillLocation:"ajaxbuffer",callback:function(t){var i=jQuery(t).text();try{var r=JSON.parse(i);"OK"==r.status?ValidationModule.showSuccess(e,resource.messages.connectionStatePassed):ValidationModule.showError(e,r.message,r.details)}catch(n){dialogs.systemConfirm.show(i)}},errorHandler:baseErrorHandler,hideLoader:!1})},_isDataValid:function(){var e=[this._label,this._resourceId,this._description],t=this._type.getValue();return"olapXmlaCon"==t&&(e.push(this._xmlaCatalog),e.push(this._xmlaDataSource),e.push(this._xmlaConnectionUri)),ValidationModule.validate(resource.getValidationEntries(e))},_xmlaCatalogValidator:function(e){var t=!0,i="";return e.blank()&&(i=resource.messages.catalogIsEmpty,t=!1),{isValid:t,errorMessage:i}},_xmlaDataSourceValidator:function(e){var t=!0,i="";return e.blank()&&(i=resource.messages.dataSourceIsEmpty,t=!1),{isValid:t,errorMessage:i}},_xmlaConnectionUriValidator:function(e){var t=!0,i="";return e.blank()&&(i=resource.messages.uriIsEmpty,t=!1),{isValid:t,errorMessage:i}}};"undefined"==typeof require&&document.observe("dom:loaded",function(){resourceAnalysisConnection.initialize(localContext.initOptions)}),define("resource.analysisConnection",["resource.base","prototype","components.pickers","utils.common"],function(e){return function(){var t;return t||e.resourceAnalysisConnection}}(this)),define("addResource/analysisClientConnection/addAnalysisClientConnectionMain",["require","!domReady","resource.analysisConnection","underscore","jrs.configs","resource.base"],function(e){"use strict";var t=e("!domReady"),i=e("resource.analysisConnection"),r=e("underscore"),n=e("jrs.configs"),d=e("resource.base");t(function(){var e=n.connectionType.localContext.initOptions;r.extend(window.localContext,n.connectionType.localContext),r.extend(d.messages,n.connectionType.resource.messages),i.initialize(e),isIPad()&&d.initSwipeScroll()})});