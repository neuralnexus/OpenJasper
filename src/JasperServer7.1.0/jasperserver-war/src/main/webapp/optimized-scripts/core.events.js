document.observe(isSupportsTouch()?"touchstart":"mousedown",function(e){var t=e.element();if("undefined"!=typeof t.match){if(t.match(layoutModule.MINIMIZED_PATTERN))return void layoutModule.maximize(t);if(t.match(layoutModule.MINIMIZER_PATTERN))return void layoutModule.minimize(t);if(t.match(layoutModule.META_LINKS_PATTERN)&&"main_logOut_link"===t.readAttribute("id")&&primaryNavModule.navigationOption("logOut"),!isSupportsTouch()||!event.treeEvent&&!event.listEvent){var o=matchAny(t,[layoutModule.BUTTON_PATTERN,layoutModule.MENU_LIST_PATTERN],!0);o&&!$(o).match(layoutModule.PRESSED_PATTERN)&&buttonManager.down(o),t.match(layoutModule.DISCLOSURE_BUTTON_PATTERN)&&buttonManager.down(t)}}}),isIPad()&&window.addEventListener("touchmove",function(e){}),document.observe("mouseover",function(e){var t=e.element(),o=null;o=matchMeOrUp(t,layoutModule.NAVIGATION_MUTTON_PATTERN),o&&!relatedTargetInElementSubtree(e,o)&&(primaryNavModule.onMenuHeaderMouseOver(e,o),o.tabIndex=-1,o.focus()),isIE7()||(o=matchAny(t,[layoutModule.BUTTON_PATTERN],!0),!o||relatedTargetInElementSubtree(e,o)||o.hasClassName(layoutModule.DROP_TARGET_CLASS)||buttonManager.over(o),t.match&&t.match(layoutModule.DISCLOSURE_BUTTON_PATTERN)&&buttonManager.over(t))}),isIE7()||document.observe("mouseout",function(e){var t=null,o=e.element();t=matchAny(o,[layoutModule.BUTTON_PATTERN],!0),t&&!relatedTargetInElementSubtree(e,t)&&buttonManager.out(t),o.match&&o.match(layoutModule.DISCLOSURE_BUTTON_PATTERN)&&buttonManager.out(o)}),document.stopObserving(isSupportsTouch()?"touchend":"mouseup").observe(isSupportsTouch()?"touchend":"mouseup",function(e){var t=e.element(),o=null;if(o=matchMeOrUp(t,layoutModule.NAVIGATION_PATTERN))if(o.identify()==layoutModule.MAIN_NAVIGATION_HOME_ITEM_ID)primaryNavModule.navigationOption("home");else{if(o.identify()!=layoutModule.MAIN_NAVIGATION_LIBRARY_ITEM_ID)return;primaryNavModule.navigationOption("library")}if(o=matchMeOrUp(t,layoutModule.TABSET_TAB_PATTERN),o&&($(o).match(layoutModule.SELECTED_PATTERN)||($(o).siblings().each(function(e){buttonManager.unSelect($(e))}),buttonManager.select($(o)))),o=matchAny(t,[layoutModule.BUTTON_PATTERN,layoutModule.BUTTON_SET_BUTTON,layoutModule.MENU_LIST_PATTERN],!0),o&&!o.match(layoutModule.TOOLBAR_CAPSULE_PATTERN)&&buttonManager.up(o),isSupportsTouch()&&(event.treeEvent||event.listEvent)||t.match&&t.match(layoutModule.DISCLOSURE_BUTTON_PATTERN)&&buttonManager.up(t),!isIPad()&&isRightClick(e)){var u=e.element();document.fire(layoutModule.ELEMENT_CONTEXTMENU,{targetEvent:e,node:u})}}),document.observe(isSupportsTouch()?"drag:touchstart":"drag:mousedown",function(e){var t=e.memo.targetEvent.element();if(!isSupportsTouch()||!event.treeEvent&&!event.listEvent){var o=matchMeOrUp(t,layoutModule.LIST_ITEM_PATTERN);o&&!t.match(layoutModule.DISCLOSURE_BUTTON_PATTERN)&&buttonManager.down(o,function(e){return $(e).down(layoutModule.LIST_ITEM_WRAP_PATTERN)}),t.match(layoutModule.DISCLOSURE_BUTTON_PATTERN)&&buttonManager.down(t)}});var buttonManager={over:function(e,t){if(e&&!this.isSelected(e)){var o=t?t(e):e;$(o).addClassName(layoutModule.HOVERED_CLASS)}},out:function(e,t){if(e){var o=t?t(e):e;$(o).removeClassName(layoutModule.HOVERED_CLASS).removeClassName(layoutModule.PRESSED_CLASS)}},down:function(e,t){if(e&&!this.isSelected(e)){var o=t?t(e):e;$(o).removeClassName(layoutModule.HOVERED_CLASS).addClassName(layoutModule.PRESSED_CLASS)}},up:function(e,t){if(e&&!this.isSelected(e)){var o=t?t(e):e;o=$(o),o.removeClassName(layoutModule.PRESSED_CLASS),!isIPad()&&o.addClassName(layoutModule.HOVERED_CLASS)}},disable:function(e){e&&(buttonManager.out(e),$(e).writeAttribute(layoutModule.DISABLED_ATTR_NAME,layoutModule.DISABLED_ATTR_NAME))},enable:function(e){e&&(buttonManager.out(e),$(e).writeAttribute(layoutModule.DISABLED_ATTR_NAME,null))},isDisabled:function(e){return e?$(e).readAttribute(layoutModule.DISABLED_ATTR_NAME)===layoutModule.DISABLED_ATTR_NAME||$(e).hasClassName(layoutModule.DISABLED_CLASS):void 0},unSelect:function(e){e&&$(e).removeClassName(layoutModule.SELECTED_CLASS)},select:function(e){e&&$(e).addClassName(layoutModule.SELECTED_CLASS)},isSelected:function(e,t){if(e){var o=t?t(e):e,u=o.up("li");return u&&u.hasClassName(layoutModule.SELECTED_CLASS)}return!1}};document.observe("contextmenu",function(e){return Event.stop(e),!1}),document.observe("dom:loaded",function(e){isIE()&&document.body.setAttribute("oncontextmenu","return false")});