define(["require","backbone.marionette","underscore","attributes/collection/AttributesCollection","attributes/factory/attributesDesignerFactory","attributes/view/AttributesViewer"],function(e){var t=e("backbone.marionette"),i=e("underscore"),r=(e("attributes/collection/AttributesCollection"),e("attributes/factory/attributesDesignerFactory")),n=e("attributes/view/AttributesViewer"),s=t.Controller.extend({initialize:function(e){e=e||{};var t=i.extend({},e,e.designer),s=i.extend({},e,e.viewer);this.designer=r(t.type,t),this.viewer=new n(s),this.listenTo(this.designer,"change",this._triggerChangeEvent),this.setCurrentView()},render:function(e){return this.getCurrentView().render(e),this},getCurrentView:function(){return this.currentView},cancel:function(){return this.currentView.revertChanges()},containsUnsavedItems:function(){return this.currentView.containsUnsavedItems&&this.currentView.containsUnsavedItems()},setCurrentView:function(e){this.currentView=e||this.viewer},toggleMode:function(e,t){this.getCurrentView().hide(),this.setCurrentView(e?this.designer:this.viewer),this.render(t).getCurrentView().show()},_triggerChangeEvent:function(){this.trigger("change",this.containsUnsavedItems())}});return s});