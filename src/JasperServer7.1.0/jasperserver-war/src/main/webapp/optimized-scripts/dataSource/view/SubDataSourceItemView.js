define(["require","backbone","jquery","underscore","core.layout","components.list","common/util/featureDetection","text!dataSource/template/subDataSourceItemTemplate.htm","backbone.validation"],function(e){"use strict";var t=e("backbone"),i=e("jquery"),a=(e("underscore"),e("core.layout")),n=e("components.list"),s=(e("common/util/featureDetection"),e("text!dataSource/template/subDataSourceItemTemplate.htm")),o=e("backbone.validation");return t.View.extend({events:{"keyup input[type='text']":"updateDataSourceId","change input[type='text']":"updateDataSourceId"},initialize:function(e){var t=this.model.toJSON();this._listItem=new n.UnderscoreTemplatedListItem({template:s,cssClassName:a.LEAF_CLASS,value:t,tooltipText:this.model.get("uri")}),o.bind(this,{valid:this.fieldIsValid,invalid:this.fieldIsInvalid,forceUpdate:!0})},updateDataSourceId:function(e){var t=this.$("input[type='text']"),a={};a.id=i.trim(t.val()),this.model.set(a),this.model.validate(a),this._listItem.setValue(this.model.toJSON())},getListItem:function(){return this._listItem},setRootElement:function(){this.setElement(this._listItem._getElement())},fieldIsValid:function(e,t,i){var a=e.$("input[type='text']").parent();a.removeClass("error"),a.find(".validatorMessageContainer").removeClass("error"),a.find(".message.warning").text("")},fieldIsInvalid:function(e,t,i,a){var n=e.$("input[type='text']").parent();n.addClass("error"),n.find(".validatorMessageContainer").addClass("error"),n.find(".message.warning").text(i)}})});