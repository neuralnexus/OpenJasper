define(["require","jquery","underscore","xdm","fakeXhrFactory","jrs.configs","logger"],function(e){"use strict";function r(e,r){var t=n.Deferred(),o=n.Deferred(),a=e.request(r,function(e){t.resolve(e.data,e.status,s(e.xhr))},function(e){t.reject(e.message,e.data)});return r.success&&t.done(r.success),r.error&&t.fail(r.error),r.complete&&t.always(r.complete),t.done(o.resolve).fail(o.reject).progress(o.notify),o.fail(function(){"pending"==t.state()&&e.abort(a)}),o}function t(){var e=[];return e.push({name:"logEnabled",value:c.get("enabled")}),c.get("level")&&e.push({name:"logLevel",value:c.get("level")}),n.param(e)}var n=e("jquery"),o=e("underscore"),a=e("xdm"),s=e("fakeXhrFactory"),u=e("jrs.configs"),c=e("logger"),l=function(e){if(0===arguments.length)throw new Error("Not enough arguments to perform the request.");var t=l.create(e.baseUrl?e.baseUrl:u.contextPath);return r(t,e)};return l.create=o.memoize(function(e){return new a.Rpc({remote:e+"/xdm.html?"+t(),container:document.body,props:{style:{display:"none"}}},{remote:{request:{},abort:{}}})}),l});