define(["require","exports","module","jquery","underscore","common/util/eventAutomation","logger","stdnav","components.list"],function(t,e,n){"use strict";var i=t("jquery"),r=(t("underscore"),t("common/util/eventAutomation")),s=t("logger").register(n),u=t("stdnav"),o=t("components.list"),a=0,l=function(){a++,this.serial=a};i.extend(l.prototype,{zinit:function(t){return s.debug("stdnavPluginDynamicList.init("+t+")\n"),this},activate:function(){this.behavior={ariaprep:[this,this._ariaPrep,null],ariarefresh:[this,this._ariaRefresh,null],click:null,down:null,end:null,enter:[this,this._onEnter,null],fixfocus:[this,this._fixFocus,null],fixsuperfocus:[this,this._fixSuperfocus,null],home:null,inherit:!0,inheritable:!0,left:null,pagedown:null,pageup:null,right:null,superfocusin:[u,u.basicSuperfocusIn,{maxdepth:1,focusSelector:"li",ghostfocus:!1}],superfocusout:[u,u.basicSuperfocusOut,{ghostfocus:!1}],up:null},u.registerNavtype(this.navtype,this.behavior,this.navtype_tags)},deactivate:function(){u.unregisterNavtype(this.navtype,this.behavior)},_ariaPrep:function(t){return i(t).attr("role","application"),i(t).attr("aria-label","Dynamic List"),null},_ariaRefresh:function(t){return i(t).attr("role","application"),i(t).attr("aria-label","Dynamic List"),null},_onEnter:function(t){var e=i(t);if(e.is(".supercursor"))s.error("dynamicList item has supercursor class-- should not have focus while this is true."),e.find("ul > li.cursor")<0&&s.error("...additionally, no sublist item appears to have the cursor class.");else{var n=e.find("a,:input");n.length>0&&r.simulateClickSequence(n[0])}return t},_fixFocus:function(t){var e=i(t).closest("[js-navtype='"+this.navtype+"']");if(e.length<1)return s.warn("Can't find a dynamic list to fix focus to"),t;var n=o.getDynamicListForElement(e[0]);return u.nullOrUndefined(n)?(s.warn("Can't map a dynamic list to fix focus to"),t):n.getCursorElement()},_fixSubfocus:function(t){return null},_fixSuperfocus:function(t){var e,n=i(t).closest("ol,ul");return e=n.length>0?n[0]:null},_onSuperfocusIn:function(t){var e,n=i(t).children("li .ghostfocus");if(n.length>0)n.removeClass("ghostfocus"),e=n[0];else{var r=i(t).children('li[js-navigable!="false"]');e=r.length>0?r[0]:t}return e},_onSuperfocusOut:function(t){}}),i.extend(l.prototype,{navtype:"dynamiclist",navtype_tags:[]});var c=new l;return c});