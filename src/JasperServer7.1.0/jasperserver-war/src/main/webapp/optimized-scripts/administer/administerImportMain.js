"undefined"==typeof Administer&&(Administer={}),Administer=_.extend({_messages:{},urlContext:null,getMessage:function(e,t){var i=this._messages[e];return i?new Template(i).evaluate(t?t:{}):""},menuActions:{"p#navAnalysisOptions":function(){return Administer.urlContext+"/flow.html?_flowId=mondrianPropertiesFlow"},"p#navAnalysisOptionsCE":function(){return Administer.urlContext+"/olap/properties.html"},"p#navDesignerOptions":function(){return Administer.urlContext+"/flow.html?_flowId=designerOptionsFlow"},"p#navDesignerCache":function(){return Administer.urlContext+"/flow.html?_flowId=designerCacheFlow"},"p#navAwsSettings":function(){return Administer.urlContext+"/flow.html?_flowId=awsSettingsFlow"},"p#navLogSettings":function(){return Administer.urlContext+"/log_settings.html"},"p#logCollectors":function(){return Administer.urlContext+"/logCollectors.html"},"p#navImport":function(){return Administer.urlContext+"/adminImport.html"},"p#navExport":function(){return Administer.urlContext+"/adminExport.html"},"p#navCustomAttributes":function(){return Administer.urlContext+"/customAttributes.html"},"p#navResetSettings":function(){return Administer.urlContext+"/resetSettings.html"}},_sendRequest:function(e,t,i){ajaxTargettedUpdate(e,{postData:t,callback:i,mode:AjaxRequester.prototype.EVAL_JSON,errorHandler:this._errorHandler})},_errorHandler:function(e){return e.getResponseHeader("LoginRequested")?(window.location="flow.html?_flowId=designerCacheFlow",!0):baseErrorHandler(e)}},Administer),define("administer.base",["prototype","underscore","core.ajax"],function(e){return function(){var t;return t||e.Administer}}(this));var logging={initialize:function(){layoutModule.resizeOnClient("serverSettingsMenu","settings"),webHelpModule.setCurrentContext("admin"),this.initEvents()},initEvents:function(){var e=this;$("display").observe("click",function(e){var t=e.element(),i=matchAny(t,[layoutModule.BUTTON_PATTERN],!0);if(i)for(var n in Administer.menuActions)if(i.match(n)&&!i.up("li").hasClassName("selected"))return void(document.location=Administer.menuActions[n]())}),jQuery(".js-logSettings select").on("change",function(t){var i,n=jQuery(t.target);i=n.hasClass("js-newLogger")?jQuery("#newLoggerName").val():n.parent().prev().text(),e._setLevel(encodeURIComponent(i),n.val())})},_setLevel:function(e,t){document.location="log_settings.html?logger="+e+"&level="+t}};"undefined"==typeof require&&document.observe("dom:loaded",function(){logging.initialize()}),define("administer.logging",["administer.base","core.layout","components.webHelp","utils.common"],function(e){return function(){var t;return t||e.logging}}(this)),define("tenantImportExport/export/enum/exportTypesEnum",{ROOT_TENANT:"rootTenant",TENANT:"tenant",SERVER_CE:"serverCE",SERVER_PRO:"serverPRO",REPOSITORY:"repository"}),define("tenantImportExport/import/factory/importModelAttributesFactory",["require","underscore","tenantImportExport/export/enum/exportTypesEnum"],function(e){var t=e("underscore"),i=e("tenantImportExport/export/enum/exportTypesEnum"),n={},s={includeAccessEvents:!0,includeAuditEvents:!0,includeMonitoringEvents:!0},o={skipThemes:!0},r={includeServerSettings:!0};return n[i.ROOT_TENANT]=t.extend({},s,o),n[i.TENANT]=t.extend({},o),n[i.SERVER_PRO]=t.extend({},s,o,r),n[i.SERVER_CE]=t.extend({},r,{includeAccessEvents:!0}),function(e){return n[e]}}),define("tenantImportExport/import/enum/brokenDependencyStrategyEnum",{FAIL:"fail",SKIP:"skip",INCLUDE:"include"}),define("common/transport/AjaxFormSubmitter",["require","underscore","request","jquery"],function(e){function t(e){var t,n=null;return e.firstChild.innerText&&""!==e.firstChild.innerText&&e.body?(t=new window.ActiveXObject("Microsoft.XMLDOM"),t.async=!1,t.loadXML(e.firstChild.innerText.replace("\r\n-","\r\n"))):t=e,t.firstChild&&(n=t.firstChild.nodeName.toLowerCase()),n&&"html"!==n&&"#comment"!==n?i("xml"===t.firstChild.nodeName.toLowerCase()?t.firstChild.nextSibling:t.firstChild):{errorCode:"unexpected.error"}}function i(e){var t,n;if(e.children)t=e.children;else{t=[];for(var s=0,o=e.childNodes.length;o>s;s++)null===e.childNodes[s].nodeValue&&t.push(e.childNodes[s])}if(0===t.length&&1===e.childNodes.length)return e.childNodes[0].nodeValue;if(t.length>1&&t[0].nodeName===t[1].nodeName){n=[];for(var s=0,o=t.length;o>s;s++)n[s]=i(t[s])}else{n={};for(var s=0,o=t.length;o>s;s++)n[t[s].nodeName]=i(t[s])}return n}function n(e){var t=new a.Deferred;return e.submit(function(i){i.preventDefault(),r({url:e.attr("action"),type:e.attr("method"),data:new FormData(e[0]),cache:!1,contentType:!1,processData:!1,headers:{Accept:"application/json"}}).done(function(e){t.resolve(e)}).fail(function(e){e=e.responseJSON||e||{},o.defaults(e,{errorCode:"error.load.error"}),t.reject(e)}),e.unbind("submit")}),e.submit(),t}function s(e,i){var n=a.Deferred(),s=a("<iframe style='display:none' name='"+i+"'></iframe>");return e.append(s).attr("target",i),s.load(function(){try{n.resolve(t(this.contentWindow.document))}catch(e){n.reject({errorCode:"error.invalid.response"})}s.remove()}),s.on("abort",function(){n.reject({errorCode:"error.load.aborted"}),s.remove()}),s.on("error",function(){n.reject({errorCode:"error.load.error"}),s.remove()}),e.submit(),n}var o=e("underscore"),r=e("request"),a=e("jquery"),l=function(e,i,n,s){this.name=o.uniqueId("uploadTarget"),this.form=a(e),i&&this.form.attr("action",i),n&&this.form.attr("method",n),s&&this.form.attr("enctype",s),this.parceXmlDocToObject=t};return l.prototype.submit=function(){return window.FormData?n(this.form):s(this.form,this.name)},l}),define("common/enum/httpStatusCodes",{100:"continue",101:"switchingProtocols",200:"ok",201:"created",202:"accepted",203:"nonAuthoritativeInformation",204:"noContent",205:"resetContent",206:"partialContent",300:"multipleChoices",301:"movedPermanently",302:"found",303:"seeOther",304:"notModified",305:"useProxy",307:"temporaryRedirect",400:"badRequest",401:"unauthorized",402:"paymentRequired",403:"forbidden",404:"notFound",405:"methodNotAllowed",406:"notAcceptable",407:"proxyAuthenticationRequired",408:"requestTimeout",409:"conflict",410:"gone",411:"lengthRequired",412:"preconditionFailed",413:"requestEntityTooLarge",414:"requestUriTooLong",415:"unsupportedMediaType",416:"requestedRangeNotSatisfiable",417:"expectationFailed",500:"internalServerError",501:"notImplemented",502:"badGateway",503:"serviceUnavailable",504:"gatewayTimeout",505:"httpVersionNotSupported"}),define("common/enum/errorCodes",["require"],function(e){"use strict";return{UNEXPECTED_ERROR:"unexpected.error",INVALID_RESOURCE_TYPE:"invalid.resource.type"}}),define("common/model/BaseModel",["require","underscore","backbone","common/enum/httpStatusCodes","common/enum/errorCodes"],function(e){"use strict";var t=e("underscore"),i=e("backbone"),n=e("common/enum/httpStatusCodes"),s=e("common/enum/errorCodes"),o=i.Model.extend({initialize:function(){this.on("error",o.unifyServerErrors)},serialize:function(){return t.clone(this.attributes)}},{unifyServerErrors:function(e,t){var i=n[t.status],s=o.createServerError(t);e.trigger("error:"+i,e,s,t),e.trigger("error:all",e,s,t)},createServerError:function(e){var t;try{t=JSON.parse(e.responseText)}catch(i){t={message:"Can't parse server response",errorCode:s.UNEXPECTED_ERROR,parameters:[]}}return t}});return o}),define("tenantImportExport/import/model/ImportModel",["require","underscore","jquery","tenantImportExport/import/factory/importModelAttributesFactory","../enum/brokenDependencyStrategyEnum","common/transport/AjaxFormSubmitter","backbone.validation","common/model/BaseModel"],function(e){var t=e("underscore"),i=e("jquery"),n=e("tenantImportExport/import/factory/importModelAttributesFactory"),s=e("../enum/brokenDependencyStrategyEnum"),o=e("common/transport/AjaxFormSubmitter"),r=e("backbone.validation"),a=e("common/model/BaseModel"),l=a.extend({defaults:{fileName:"",update:!0,skipUserUpdate:!1,mergeOrganization:!1,skipThemes:!0,brokenDependencies:s.FAIL},url:"rest_v2/import",validation:{fileName:[{fn:function(e){return!/\.zip$/.test(e)}}]},initialize:function(e,t){this.form=new o(t.form,this.url,"post","multipart/form-data")},parse:function(){return this.attributes},save:function(){var e,n,s=this;return this.isNew()?(e=new i.Deferred,this.form.submit().done(function(i){s.set("id",i.id),t.isUndefined(i.errorCode)&&t.isUndefined(i.error)?e.resolve(i):e.reject(i)}).fail(function(t){s.trigger("error",t),e.reject(t)})):(n=this._convertParameters(),e=a.prototype.save.call(this,{parameters:n},{url:this.url+"/"+this.id}).fail(t.bind(this.trigger,"error"))),e},cancel:function(){var e=this.url+"/"+this.id;this.destroy({url:e})},reset:function(e,i){var s=t.extend({},this.defaults,n(e),i);this.clear().set(t.extend({},s)),this.id=void 0},_convertParameters:function(){var e=[];return this.get("skipUserUpdate")&&e.push("skip-user-update"),this.get("includeAccessEvents")&&e.push("include-access-events"),this.get("includeAuditEvents")&&e.push("include-audit-events"),this.get("includeMonitoringEvents")&&e.push("include-monitoring-events"),this.get("includeServerSettings")&&e.push("include-server-setting"),this.get("mergeOrganization")&&e.push("merge-organization"),this.get("skipThemes")&&e.push("skip-themes"),this.get("update")&&e.push("update"),e}});return t.extend(l.prototype,r.mixin),l}),define("tenantImportExport/export/model/ExportStateModel",["require","underscore","common/model/BaseModel"],function(e){var t=e("underscore"),i=e("common/model/BaseModel"),n={INPROGRESS:"inprogress",READY:"finished",FAILED:"failed",PENDING:"pending",CANCELLED:"cancelled"};return i.extend({url:function(){return"rest_v2/export/"+this.id+"/state"},initialize:function(e){i.prototype.initialize.call(this),this.on("change:phase",function(e,i){i==n.INPROGRESS&&t.isUndefined(e.interval)?e.interval=window.setInterval(function(){e.fetch({cache:!1}).fail(t.bind(e.stopPolling,e))},1e3):e.stopPolling()})},stopPolling:function(){t.isUndefined(this.interval)||(window.clearInterval(this.interval),this.interval=void 0)}},{STATE:n})}),define("tenantImportExport/import/model/ImportStateModel",["require","../../export/model/ExportStateModel"],function(e){var t=e("../../export/model/ExportStateModel");return t.extend({url:function(){return"rest_v2/import/"+this.id+"/state"}})}),define("tenantImportExport/import/enum/importPendingStatesEnum",{BROKEN_DEPS:"import.broken.dependencies",TENANT_MISMATCH:"import.organizations.not.match"}),define("common/component/base/Dimmer",["require","jquery","common/util/classUtil"],function(e){var t,i,n=e("jquery"),s=e("common/util/classUtil");return s.extend({constructor:function(e){t||(i=0,t=n("<div id='dialogDimmer' class='dimmer'></div>").css(e),n(document.body).append(t),t.hide()),i++},css:function(e){return t.css(e),this},show:function(){var e=this.getCount()||0;return this.setCount(++e),t.show(),this},hide:function(){if(this.isVisible()){var e=this.getCount();return this.setCount(--e),!e&&t.hide(),this}},setCount:function(e){t.data({count:e})},getCount:function(){return parseInt(t.data("count"),10)},isVisible:function(){return t.is(":visible")},remove:function(){this._removed||(this._removed=!0,t&&(i--,i||(t.remove(),t=null)))}})}),define("text!common/component/panel/template/panelTemplate.htm",[],function(){return'<div class="panel {{- additionalCssClasses }}">\n    <div class="header">\n        <div class="title">{{- title}}</div>\n    </div>\n    <div class="subcontainer"></div>\n</div>\n'}),define("common/component/panel/Panel",["require","css!panel","underscore","backbone","text!./template/panelTemplate.htm"],function(e){"use strict";e("css!panel");var t=e("underscore"),i=e("backbone"),n=e("text!./template/panelTemplate.htm");return i.View.extend({defaultTemplate:n,el:function(){var e=this.getTemplateArguments();return this.template(e)},getTemplateArguments:function(){return{title:this.title,additionalCssClasses:this.additionalCssClasses}},constructor:function(e){e||(e={}),this.template=t.template(e.template||this.defaultTemplate),this.title=e.title||"",this.additionalCssClasses=e.additionalCssClasses||"",this.content=e.content||"",this.collapsed=!e.collapsed,this.openClass=e.openClass||"open",this.closedClass=e.closedClass||"closed",this.loadingClass=e.loadingClass||"loading",this.fixedHeight=e.fixedHeight||!1,this.contentContainer=e.contentContainer||".subcontainer",this.overflow=e.overflow||"auto",this.traits=e.traits||[],t.each(this.traits,t.bind(function(e){e.extension&&t.extend(this,e.extension)},this)),this.invokeTraits("onConstructor",e),i.View.apply(this,arguments)},invokeTraits:function(e){var i=Array.prototype.slice.call(arguments,1),n=this;t.each(this.traits,function(t){t[e]&&t[e].apply(n,i)})},initialize:function(e){this.invokeTraits("beforeInitialize",e),this.content&&this.setContent(this.content),this.toggleCollapsedState(),this.invokeTraits("afterInitialize",e)},setElement:function(e){this.invokeTraits("beforeSetElement",e);var t=i.View.prototype.setElement.apply(this,arguments);return this.$contentContainer=this.$(this.contentContainer),this.$contentContainer[this.collapsed?"hide":"show"](),this.invokeTraits("afterSetElement",e),t},open:function(e){return this.invokeTraits("beforeOpen",e),this.$contentContainer.show(),this.$el.removeClass(this.closedClass).addClass(this.openClass),this.collapsed=!1,e&&e.renderContent&&this.renderContent(),this.invokeTraits("afterOpen",e),e&&e.silent||this.trigger("open",this),this},close:function(e){return this.invokeTraits("beforeClose",e),this.$contentContainer.hide(),this.$el.removeClass(this.openClass).addClass(this.closedClass),this.collapsed=!0,this.invokeTraits("afterClose",e),e&&e.silent||this.trigger("close",this),this},setContent:function(e,t){this.content=e;var i=this.renderContent();this.$contentContainer[t===!0?"append":"html"](i)},renderContent:function(){return this.content instanceof i.View?this.content.render().$el:this.content},setHeight:function(e){var i=this.$("> .header").outerHeight();this.$contentContainer.css({height:t.isNumber(e)?e-i+"px":"auto",overflow:this.overflow})},toggleCollapsedState:function(){return this.collapsed?this.open():this.close(),this},remove:function(){this.invokeTraits("onRemove"),this.content&&this.content.remove&&this.content.remove(),i.View.prototype.remove.call(this)}})}),define("common/component/base/OptionView",["require","backbone","underscore"],function(e){"use strict";var t=e("backbone"),i=e("underscore");return t.View.extend({events:{click:"select",mouseover:"mouseover",mouseout:"mouseout"},constructor:function(e){if(!e||!e.template)throw new Error("Option should have defined template");if(!(e.model&&e.model instanceof t.Model))throw new Error("Option should have associated Backbone.Model");this.template=i.template(e.template),this.disabledClass=e.disabledClass,this.hiddenClass=e.hiddenClass,this.toggleClass=e.toggleClass,this.overClass=e.overClass||"over",t.View.apply(this,arguments)},initialize:function(){t.View.prototype.initialize.apply(this,arguments);var e=this;this.model.get("disabled")===!0&&this.disable(),this.model.get("hidden")===!0&&this.hide(),this.model.get("selected")===!0&&this.addSelection(),this.listenTo(this.model,"change:over",function(t,i){i?e.$("> p").addClass(e.overClass):e.$("> p").removeClass(e.overClass)})},el:function(){return this.template(this.model.toJSON())},enable:function(){this.$el.removeAttr("disabled").removeClass(this.disabledClass)},disable:function(){this.$el.attr("disabled","disabled").addClass(this.disabledClass)},over:function(){this.model.set({over:!0})},leave:function(){this.model.set({over:!1})},show:function(){this.$el.show().removeClass(this.hiddenClass)},hide:function(){this.$el.hide().addClass(this.hiddenClass)},isVisible:function(){return this.$el.is(":visible")},isDisabled:function(){return this.$el.is(":disabled")},select:function(e){this.model.trigger("select",this,this.model,e),this.trigger("click",this,this.model,e)},addSelection:function(){this.$el.addClass(this.toggleClass),this.model.set("selected",!0)},removeSelection:function(){this.$el.removeClass(this.toggleClass),this.model.unset("selected")},mouseover:function(e){this.trigger("mouseover",this,this.model,e)},mouseout:function(e){this.trigger("mouseout",this,this.model,e)}})}),define("common/component/base/OptionContainer",["require","backbone","underscore","./OptionView"],function(e){"use strict";function t(e){if(!e||n.isEmpty(e))throw new Error("Init options must be specified");if(!e.options||!e.options.length)throw new Error("Option views descriptors must be specified");if(!e.mainTemplate&&!e.el)throw new Error("Option container must have a template");if(!e.optionTemplate)throw new Error("Option container must have an option template")}var i=e("backbone"),n=e("underscore"),s=e("./OptionView");return i.View.extend({el:function(){return n.template(this.template)()},constructor:function(e){t(e),this.contextName=e.contextName||"option",this.contentContainer=e.contentContainer?e.contentContainer:e.el||".content > ul",this.toggle=!!e.toggle,this.toggleClass=e.toggleClass||"active",this.options=[],this.collection=e.collection||new i.Collection,delete e.collection,e.options&&this.collection.reset(e.options),this.hasGroups=this.collection.models[0]&&this.collection.models[0].get("groupId")?!0:!1,this.defalutOptionView=this.hasGroups?this.collection.where({"default":!0}):[this.collection.findWhere({"default":!0})],this.listenTo(this.collection,"select",this._selectOption),this.listenTo(this.collection,"update reset",this.render),this.template=e.mainTemplate,this.optionTemplate=e.optionTemplate,i.View.apply(this,arguments)},setElement:function(e){var t=i.View.prototype.setElement.apply(this,arguments);return this.$contentContainer=this.contentContainer?this.$(this.contentContainer).andSelf().filter(this.contentContainer):this.$el,t},initialize:function(){this.render(),this.toggle&&this.defalutOptionView&&n.each(this.defalutOptionView,function(e){e&&this.getOptionView(e.get("action")).addSelection()},this)},render:function(){var e=this;n.each(this.options,function(t){e.stopListening(t,"mouseover"),e.stopListening(t,"mouseout"),t.remove()}),this.options=[],this.collection.forEach(function(t){var i=new s({template:e.optionTemplate,model:t,toggleClass:e.toggleClass});e.listenTo(i,"mouseover",function(t,i){e.trigger("mouseover",t,e,i)}),e.listenTo(i,"mouseout",function(t,i){e.trigger("mouseout",t,e,i)}),e.options.push(i),e.$contentContainer.append(i.$el)})},_onKeyDown:function(e){var t=this.getOptionView(e.keyCode,"triggerOnKeyCode");t&&!t.isDisabled()&&t.select()},_selectOption:function(e,t){if(this.toggle){var i=t.get("groupId"),s=this.hasGroups?n.where(this.options,function(e){return e.model.get("groupId")===i}):this.options;n.each(s,function(e){e.removeSelection()},this),e.addSelection()}this.trigger("selection",e,t),this.trigger(this.contextName+":"+t.get("action"),e,t)},getOptionView:function(e,t){return n.find(this.options,function(i){return i.model.get(t||"action")===e})},resetSelection:function(e,t){e=e||[],this.toggle&&(this.hasGroups?(e.length<this.defalutOptionView.length&&n.each(this.defalutOptionView,function(t){var i={groupId:t.get("groupId")},s=n.findWhere(e,i);!s&&t&&e.push(n.extend(i,{action:t.get("action")}))}),e=n.pluck(e,"action")):!e.length&&this.defalutOptionView[0]&&e.push(this.defalutOptionView[0].get("action")),n.each(this.options,function(i){e.length&&n.contains(e,i.model.get("action"))?t?this._selectOption(i,i.model):i.addSelection():i.removeSelection()},this))},select:function(){var e=Array.prototype.slice.call(arguments,0);this.toggle&&n.each(this.options,function(t){!e.length||n.contains(e,t.model.get("action"))?t.addSelection():t.removeSelection()},this)},deselect:function(){var e=Array.prototype.slice.call(arguments,0);this.toggle&&n.each(this.options,function(t){(!e.length||n.contains(e,t.model.get("action")))&&t.removeSelection()},this)},getSelection:function(){return n.chain(this.options).filter(function(e){return e.model.get("selected")}).map(function(e){return e.model.get("action")}).value()},show:function(){return n.each(this.options,function(e){var t=e.model.get("test");t&&!t()?e.hide():e[e.model.get("hidden")?"hide":"show"]()}),this.$el.show(),this.trigger("show",this),this},hide:function(){return this.$el.hide(),this.trigger("hide",this),this},enable:function(e){var t=Array.prototype.slice.call(arguments);n.each(this.options,function(e){(!t.length||n.contains(t,e.model.get("action")))&&e.enable()})},disable:function(e){var t=Array.prototype.slice.call(arguments);n.each(this.options,function(e){(!t.length||n.contains(t,e.model.get("action")))&&e.disable()})},addOptions:function(e,t){this.collection.add(e,n.extend(t||{},{silent:!0})),this.collection.reset(this.collection.toJSON())},removeOptions:function(e){var t=this.collection.filter(function(t){return!n.contains(e,t.get("action"))});t.length<this.collection.length&&this.collection.reset(t)},remove:function(){n.invoke(this.options,"remove"),i.View.prototype.remove.apply(this,arguments)}})}),define("common/component/panel/trait/abstractPanelTrait",[],function(){"use strict";var e={extension:{},onConstructor:function(){},beforeInitialize:function(){},afterInitialize:function(){},beforeSetElement:function(){},afterSetElement:function(){},beforeOpen:function(){},afterOpen:function(){},beforeClose:function(){},afterClose:function(){},onRemove:function(){}};return e}),define("jquery-ui/jquery.ui.resizable",["require","./jquery.ui.core","./jquery.ui.mouse","./jquery.ui.widget"],function(e){function t(e){return parseInt(e,10)||0}function i(e){return!isNaN(parseInt(e,10))}e("./jquery.ui.core"),e("./jquery.ui.mouse");var n=e("./jquery.ui.widget");return n.widget("ui.resizable",n.ui.mouse,{version:"@VERSION",widgetEventPrefix:"resize",options:{alsoResize:!1,animate:!1,animateDuration:"slow",animateEasing:"swing",aspectRatio:!1,autoHide:!1,containment:!1,ghost:!1,grid:!1,handles:"e,s,se",helper:!1,maxHeight:null,maxWidth:null,minHeight:10,minWidth:10,zIndex:90,resize:null,start:null,stop:null},_create:function(){function e(e){return a._mouseDown(e)}var t,i,s,o,r,a=this,l=this.options;if(this.element.addClass("ui-resizable"),n.extend(this,{_aspectRatio:!!l.aspectRatio,aspectRatio:l.aspectRatio,originalElement:this.element,_proportionallyResizeElements:[],_helper:l.helper||l.ghost||l.animate?l.helper||"ui-resizable-helper":null}),this.element[0].nodeName.match(/canvas|textarea|input|select|button|img/i)&&(this.element.wrap(n("<div class='ui-wrapper' style='overflow: hidden;'></div>").css({position:this.element.css("position"),width:this.element.outerWidth(),height:this.element.outerHeight(),top:this.element.css("top"),left:this.element.css("left")})),this.element=this.element.parent().data("ui-resizable",this.element.data("ui-resizable")),this.elementIsWrapper=!0,this.element.css({marginLeft:this.originalElement.css("marginLeft"),marginTop:this.originalElement.css("marginTop"),marginRight:this.originalElement.css("marginRight"),marginBottom:this.originalElement.css("marginBottom")}),this.originalElement.css({marginLeft:0,marginTop:0,marginRight:0,marginBottom:0}),this.originalResizeStyle=this.originalElement.css("resize"),this.originalElement.css("resize","none"),this._proportionallyResizeElements.push(this.originalElement.css({position:"static",zoom:1,display:"block"})),this.originalElement.css({margin:this.originalElement.css("margin")}),this._proportionallyResize()),this.handles=l.handles||(n(".ui-resizable-handle",this.element).length?{n:".ui-resizable-n",e:".ui-resizable-e",s:".ui-resizable-s",w:".ui-resizable-w",se:".ui-resizable-se",sw:".ui-resizable-sw",ne:".ui-resizable-ne",nw:".ui-resizable-nw"}:"e,s,se"),this.handles.constructor===String)for("all"===this.handles&&(this.handles="n,e,s,w,se,sw,ne,nw"),t=this.handles.split(","),this.handles={},i=0;i<t.length;i++)s=n.trim(t[i]),r="ui-resizable-"+s,o=n("<div class='ui-resizable-handle "+r+"'></div>"),o.css({zIndex:l.zIndex}),"se"===s&&o.addClass("ui-icon ui-icon-gripsmall-diagonal-se"),this.handles[s]=".ui-resizable-"+s,this.element.append(o);this._renderAxis=function(e){var t,i,s,o;e=e||this.element;for(t in this.handles)this.handles[t].constructor===String&&(this.handles[t]=n(this.handles[t],this.element).show()),this.elementIsWrapper&&this.originalElement[0].nodeName.match(/textarea|input|select|button/i)&&(i=n(this.handles[t],this.element),o=/sw|ne|nw|se|n|s/.test(t)?i.outerHeight():i.outerWidth(),s=["padding",/ne|nw|n/.test(t)?"Top":/se|sw|s/.test(t)?"Bottom":/^e$/.test(t)?"Right":"Left"].join(""),e.css(s,o),this._proportionallyResize()),n(this.handles[t]).length},this._renderAxis(this.element),this._handles=n(".ui-resizable-handle",this.element);for(i in this.handles)this._handles=this._handles.add(this.handles[i]);if(this._handles.disableSelection(),this._handles.mouseover(function(){a.resizing||(this.className&&(o=this.className.match(/ui-resizable-(se|sw|ne|nw|n|e|s|w)/i)),a.axis=o&&o[1]?o[1]:"se")}),l.autoHide&&(this._handles.hide(),n(this.element).addClass("ui-resizable-autohide").mouseenter(function(){l.disabled||(n(this).removeClass("ui-resizable-autohide"),a._handles.show())}).mouseleave(function(){l.disabled||a.resizing||(n(this).addClass("ui-resizable-autohide"),a._handles.hide())})),this._mouseInit(),l.handles.constructor!==String)for(i in l.handles)s=l.handles[i],s instanceof n&&s.bind("mousedown."+this.widgetName,e)},_destroy:function(){this._mouseDestroy();var e,t=function(e){n(e).removeClass("ui-resizable ui-resizable-disabled ui-resizable-resizing").removeData("resizable").removeData("ui-resizable").unbind(".resizable").find(".ui-resizable-handle").remove()};return this.elementIsWrapper&&(t(this.element),e=this.element,this.originalElement.css({position:e.css("position"),width:e.outerWidth(),height:e.outerHeight(),top:e.css("top"),left:e.css("left")}).insertAfter(e),e.remove()),this.originalElement.css("resize",this.originalResizeStyle),t(this.originalElement),this},_mouseCapture:function(e){var t,i,s=!1;for(t in this.handles)i=n(this.handles[t])[0],(i===e.target||n.contains(i,e.target))&&(s=!0);return!this.options.disabled&&s},_mouseStart:function(e){var i,s,o,r=this.options,a=this.element.position(),l=this.element;return this.resizing=!0,/absolute/.test(l.css("position"))?l.css({position:"absolute",top:l.css("top"),left:l.css("left")}):l.is(".ui-draggable")&&l.css({position:"absolute",top:a.top,left:a.left}),this._renderProxy(),i=t(this.helper.css("left")),s=t(this.helper.css("top")),r.containment&&(i+=n(r.containment).scrollLeft()||0,s+=n(r.containment).scrollTop()||0),this.offset=this.helper.offset(),this.position={left:i,top:s},this.size=this._helper?{width:this.helper.width(),height:this.helper.height()}:{width:l.width(),height:l.height()},this.originalSize=this._helper?{width:l.outerWidth(),height:l.outerHeight()}:{width:l.width(),height:l.height()},this.originalPosition={left:i,top:s},this.sizeDiff={width:l.outerWidth()-l.width(),height:l.outerHeight()-l.height()},this.originalMousePosition={left:e.pageX,top:e.pageY},this.aspectRatio="number"==typeof r.aspectRatio?r.aspectRatio:this.originalSize.width/this.originalSize.height||1,o=n(".ui-resizable-"+this.axis).css("cursor"),n("body").css("cursor","auto"===o?this.axis+"-resize":o),l.addClass("ui-resizable-resizing"),this._propagate("start",e),!0},_mouseDrag:function(e){var t,i=this.helper,s={},o=this.originalMousePosition,r=this.axis,a=this.position.top,l=this.position.left,h=this.size.width,c=this.size.height,d=e.pageX-o.left||0,p=e.pageY-o.top||0,u=this._change[r];return u?(t=u.apply(this,[e,d,p]),this._updateVirtualBoundaries(e.shiftKey),(this._aspectRatio||e.shiftKey)&&(t=this._updateRatio(t,e)),t=this._respectSize(t,e),this._updateCache(t),this._propagate("resize",e),this.position.top!==a&&(s.top=this.position.top+"px"),this.position.left!==l&&(s.left=this.position.left+"px"),this.size.width!==h&&(s.width=this.size.width+"px"),this.size.height!==c&&(s.height=this.size.height+"px"),i.css(s),!this._helper&&this._proportionallyResizeElements.length&&this._proportionallyResize(),n.isEmptyObject(s)||this._trigger("resize",e,this.ui()),!1):!1},_mouseStop:function(e){this.resizing=!1;var t,i,s,o,r,a,l,h=this.options,c=this;return this._helper&&(t=this._proportionallyResizeElements,i=t.length&&/textarea/i.test(t[0].nodeName),s=i&&n.ui.hasScroll(t[0],"left")?0:c.sizeDiff.height,o=i?0:c.sizeDiff.width,r={width:c.helper.width()-o,height:c.helper.height()-s},a=parseInt(c.element.css("left"),10)+(c.position.left-c.originalPosition.left)||null,l=parseInt(c.element.css("top"),10)+(c.position.top-c.originalPosition.top)||null,h.animate||this.element.css(n.extend(r,{top:l,left:a})),c.helper.height(c.size.height),c.helper.width(c.size.width),this._helper&&!h.animate&&this._proportionallyResize()),n("body").css("cursor","auto"),this.element.removeClass("ui-resizable-resizing"),this._propagate("stop",e),this._helper&&this.helper.remove(),!1},_updateVirtualBoundaries:function(e){var t,n,s,o,r,a=this.options;r={minWidth:i(a.minWidth)?a.minWidth:0,maxWidth:i(a.maxWidth)?a.maxWidth:1/0,minHeight:i(a.minHeight)?a.minHeight:0,maxHeight:i(a.maxHeight)?a.maxHeight:1/0},(this._aspectRatio||e)&&(t=r.minHeight*this.aspectRatio,s=r.minWidth/this.aspectRatio,n=r.maxHeight*this.aspectRatio,o=r.maxWidth/this.aspectRatio,t>r.minWidth&&(r.minWidth=t),s>r.minHeight&&(r.minHeight=s),n<r.maxWidth&&(r.maxWidth=n),o<r.maxHeight&&(r.maxHeight=o)),this._vBoundaries=r},_updateCache:function(e){this.offset=this.helper.offset(),i(e.left)&&(this.position.left=e.left),i(e.top)&&(this.position.top=e.top),i(e.height)&&(this.size.height=e.height),i(e.width)&&(this.size.width=e.width)},_updateRatio:function(e){var t=this.position,n=this.size,s=this.axis;return i(e.height)?e.width=e.height*this.aspectRatio:i(e.width)&&(e.height=e.width/this.aspectRatio),"sw"===s&&(e.left=t.left+(n.width-e.width),e.top=null),"nw"===s&&(e.top=t.top+(n.height-e.height),e.left=t.left+(n.width-e.width)),e},_respectSize:function(e){var t=this._vBoundaries,n=this.axis,s=i(e.width)&&t.maxWidth&&t.maxWidth<e.width,o=i(e.height)&&t.maxHeight&&t.maxHeight<e.height,r=i(e.width)&&t.minWidth&&t.minWidth>e.width,a=i(e.height)&&t.minHeight&&t.minHeight>e.height,l=this.originalPosition.left+this.originalSize.width,h=this.position.top+this.size.height,c=/sw|nw|w/.test(n),d=/nw|ne|n/.test(n);return r&&(e.width=t.minWidth),a&&(e.height=t.minHeight),s&&(e.width=t.maxWidth),o&&(e.height=t.maxHeight),r&&c&&(e.left=l-t.minWidth),s&&c&&(e.left=l-t.maxWidth),a&&d&&(e.top=h-t.minHeight),o&&d&&(e.top=h-t.maxHeight),e.width||e.height||e.left||!e.top?e.width||e.height||e.top||!e.left||(e.left=null):e.top=null,e},_proportionallyResize:function(){if(this._proportionallyResizeElements.length){var e,t,i,n,s,o=this.helper||this.element;for(e=0;e<this._proportionallyResizeElements.length;e++){if(s=this._proportionallyResizeElements[e],!this.borderDif)for(this.borderDif=[],i=[s.css("borderTopWidth"),s.css("borderRightWidth"),s.css("borderBottomWidth"),s.css("borderLeftWidth")],n=[s.css("paddingTop"),s.css("paddingRight"),s.css("paddingBottom"),s.css("paddingLeft")],t=0;t<i.length;t++)this.borderDif[t]=(parseInt(i[t],10)||0)+(parseInt(n[t],10)||0);s.css({height:o.height()-this.borderDif[0]-this.borderDif[2]||0,width:o.width()-this.borderDif[1]-this.borderDif[3]||0})}}},_renderProxy:function(){var e=this.element,t=this.options;this.elementOffset=e.offset(),this._helper?(this.helper=this.helper||n("<div style='overflow:hidden;'></div>"),this.helper.addClass(this._helper).css({width:this.element.outerWidth()-1,height:this.element.outerHeight()-1,position:"absolute",left:this.elementOffset.left+"px",top:this.elementOffset.top+"px",zIndex:++t.zIndex}),this.helper.appendTo("body").disableSelection()):this.helper=this.element},_change:{e:function(e,t){return{width:this.originalSize.width+t}},w:function(e,t){var i=this.originalSize,n=this.originalPosition;return{left:n.left+t,width:i.width-t}},n:function(e,t,i){var n=this.originalSize,s=this.originalPosition;
return{top:s.top+i,height:n.height-i}},s:function(e,t,i){return{height:this.originalSize.height+i}},se:function(e,t,i){return n.extend(this._change.s.apply(this,arguments),this._change.e.apply(this,[e,t,i]))},sw:function(e,t,i){return n.extend(this._change.s.apply(this,arguments),this._change.w.apply(this,[e,t,i]))},ne:function(e,t,i){return n.extend(this._change.n.apply(this,arguments),this._change.e.apply(this,[e,t,i]))},nw:function(e,t,i){return n.extend(this._change.n.apply(this,arguments),this._change.w.apply(this,[e,t,i]))}},_propagate:function(e,t){n.ui.plugin.call(this,e,[t,this.ui()]),"resize"!==e&&this._trigger(e,t,this.ui())},plugins:{},ui:function(){return{originalElement:this.originalElement,element:this.element,helper:this.helper,position:this.position,size:this.size,originalSize:this.originalSize,originalPosition:this.originalPosition}}}),n.ui.plugin.add("resizable","animate",{stop:function(e){var t=n(this).data("ui-resizable"),i=t.options,s=t._proportionallyResizeElements,o=s.length&&/textarea/i.test(s[0].nodeName),r=o&&n.ui.hasScroll(s[0],"left")?0:t.sizeDiff.height,a=o?0:t.sizeDiff.width,l={width:t.size.width-a,height:t.size.height-r},h=parseInt(t.element.css("left"),10)+(t.position.left-t.originalPosition.left)||null,c=parseInt(t.element.css("top"),10)+(t.position.top-t.originalPosition.top)||null;t.element.animate(n.extend(l,c&&h?{top:c,left:h}:{}),{duration:i.animateDuration,easing:i.animateEasing,step:function(){var i={width:parseInt(t.element.css("width"),10),height:parseInt(t.element.css("height"),10),top:parseInt(t.element.css("top"),10),left:parseInt(t.element.css("left"),10)};s&&s.length&&n(s[0]).css({width:i.width,height:i.height}),t._updateCache(i),t._propagate("resize",e)}})}}),n.ui.plugin.add("resizable","containment",{start:function(){var e,i,s,o,r,a,l,h=n(this).data("ui-resizable"),c=h.options,d=h.element,p=c.containment,u=p instanceof n?p.get(0):/parent/.test(p)?d.parent().get(0):p;u&&(h.containerElement=n(u),/document/.test(p)||p===document?(h.containerOffset={left:0,top:0},h.containerPosition={left:0,top:0},h.parentData={element:n(document),left:0,top:0,width:n(document).width(),height:n(document).height()||document.body.parentNode.scrollHeight}):(e=n(u),i=[],n(["Top","Right","Left","Bottom"]).each(function(n,s){i[n]=t(e.css("padding"+s))}),h.containerOffset=e.offset(),h.containerPosition=e.position(),h.containerSize={height:e.innerHeight()-i[3],width:e.innerWidth()-i[1]},s=h.containerOffset,o=h.containerSize.height,r=h.containerSize.width,a=n.ui.hasScroll(u,"left")?u.scrollWidth:r,l=n.ui.hasScroll(u)?u.scrollHeight:o,h.parentData={element:u,left:s.left,top:s.top,width:a,height:l}))},resize:function(e){var t,i,s,o,r=n(this).data("ui-resizable"),a=r.options,l=r.containerOffset,h=r.position,c=r._aspectRatio||e.shiftKey,d={top:0,left:0},p=r.containerElement;p[0]!==document&&/static/.test(p.css("position"))&&(d=l),h.left<(r._helper?l.left:0)&&(r.size.width=r.size.width+(r._helper?r.position.left-l.left:r.position.left-d.left),c&&(r.size.height=r.size.width/r.aspectRatio),r.position.left=a.helper?l.left:0),h.top<(r._helper?l.top:0)&&(r.size.height=r.size.height+(r._helper?r.position.top-l.top:r.position.top),c&&(r.size.width=r.size.height*r.aspectRatio),r.position.top=r._helper?l.top:0),r.offset.left=r.parentData.left+r.position.left,r.offset.top=r.parentData.top+r.position.top,t=Math.abs((r._helper?r.offset.left-d.left:r.offset.left-d.left)+r.sizeDiff.width),i=Math.abs((r._helper?r.offset.top-d.top:r.offset.top-l.top)+r.sizeDiff.height),s=r.containerElement.get(0)===r.element.parent().get(0),o=/relative|absolute/.test(r.containerElement.css("position")),s&&o&&(t-=Math.abs(r.parentData.left)),t+r.size.width>=r.parentData.width&&(r.size.width=r.parentData.width-t,c&&(r.size.height=r.size.width/r.aspectRatio)),i+r.size.height>=r.parentData.height&&(r.size.height=r.parentData.height-i,c&&(r.size.width=r.size.height*r.aspectRatio))},stop:function(){var e=n(this).data("ui-resizable"),t=e.options,i=e.containerOffset,s=e.containerPosition,o=e.containerElement,r=n(e.helper),a=r.offset(),l=r.outerWidth()-e.sizeDiff.width,h=r.outerHeight()-e.sizeDiff.height;e._helper&&!t.animate&&/relative/.test(o.css("position"))&&n(this).css({left:a.left-s.left-i.left,width:l,height:h}),e._helper&&!t.animate&&/static/.test(o.css("position"))&&n(this).css({left:a.left-s.left-i.left,width:l,height:h})}}),n.ui.plugin.add("resizable","alsoResize",{start:function(){var e=n(this).data("ui-resizable"),t=e.options,i=function(e){n(e).each(function(){var e=n(this);e.data("ui-resizable-alsoresize",{width:parseInt(e.width(),10),height:parseInt(e.height(),10),left:parseInt(e.css("left"),10),top:parseInt(e.css("top"),10)})})};"object"!=typeof t.alsoResize||t.alsoResize.parentNode?i(t.alsoResize):t.alsoResize.length?(t.alsoResize=t.alsoResize[0],i(t.alsoResize)):n.each(t.alsoResize,function(e){i(e)})},resize:function(e,t){var i=n(this).data("ui-resizable"),s=i.options,o=i.originalSize,r=i.originalPosition,a={height:i.size.height-o.height||0,width:i.size.width-o.width||0,top:i.position.top-r.top||0,left:i.position.left-r.left||0},l=function(e,i){n(e).each(function(){var e=n(this),s=n(this).data("ui-resizable-alsoresize"),o={},r=i&&i.length?i:e.parents(t.originalElement[0]).length?["width","height"]:["width","height","top","left"];n.each(r,function(e,t){var i=(s[t]||0)+(a[t]||0);i&&i>=0&&(o[t]=i||null)}),e.css(o)})};"object"!=typeof s.alsoResize||s.alsoResize.nodeType?l(s.alsoResize):n.each(s.alsoResize,function(e,t){l(e,t)})},stop:function(){n(this).removeData("resizable-alsoresize")}}),n.ui.plugin.add("resizable","ghost",{start:function(){var e=n(this).data("ui-resizable"),t=e.options,i=e.size;e.ghost=e.originalElement.clone(),e.ghost.css({opacity:.25,display:"block",position:"relative",height:i.height,width:i.width,margin:0,left:0,top:0}).addClass("ui-resizable-ghost").addClass("string"==typeof t.ghost?t.ghost:""),e.ghost.appendTo(e.helper)},resize:function(){var e=n(this).data("ui-resizable");e.ghost&&e.ghost.css({position:"relative",height:e.size.height,width:e.size.width})},stop:function(){var e=n(this).data("ui-resizable");e.ghost&&e.helper&&e.helper.get(0).removeChild(e.ghost.get(0))}}),n.ui.plugin.add("resizable","grid",{resize:function(){var e=n(this).data("ui-resizable"),t=e.options,i=e.size,s=e.originalSize,o=e.originalPosition,r=e.axis,a="number"==typeof t.grid?[t.grid,t.grid]:t.grid,l=a[0]||1,h=a[1]||1,c=Math.round((i.width-s.width)/l)*l,d=Math.round((i.height-s.height)/h)*h,p=s.width+c,u=s.height+d,m=t.maxWidth&&t.maxWidth<p,f=t.maxHeight&&t.maxHeight<u,g=t.minWidth&&t.minWidth>p,v=t.minHeight&&t.minHeight>u;t.grid=a,g&&(p+=l),v&&(u+=h),m&&(p-=l),f&&(u-=h),/^(se|s|e)$/.test(r)?(e.size.width=p,e.size.height=u):/^(ne)$/.test(r)?(e.size.width=p,e.size.height=u,e.position.top=o.top-d):/^(sw)$/.test(r)?(e.size.width=p,e.size.height=u,e.position.left=o.left-c):(u-h>0?(e.size.height=u,e.position.top=o.top-d):(e.size.height=h,e.position.top=o.top+s.height-h),p-l>0?(e.size.width=p,e.position.left=o.left-c):(e.size.width=l,e.position.left=o.left+s.width-l))}}),n}),define("common/component/panel/trait/resizablePanelTrait",["require","underscore","./abstractPanelTrait","css!jquery-ui/jquery-ui","jquery-ui/jquery.ui.resizable"],function(e){"use strict";function t(e,t){this.trigger("resize",e,t)}function i(e,t){this.trigger("resizeStart",e,t)}function n(e,t){this.trigger("resizeStop",e,t)}var s=e("underscore"),o=e("./abstractPanelTrait");return e("css!jquery-ui/jquery-ui"),e("jquery-ui/jquery.ui.resizable"),s.extend({},o,{onConstructor:function(e){e||(e={}),this.handles=e.handles||"e, s, se",this.minWidth=e.minWidth||10,this.minHeight=e.minHeight||10,this.maxWidth=e.maxWidth||null,this.maxHeight=e.maxHeight||null,this.alsoResize=e.alsoResize||!1,this.resizableEl=e.resizableEl},afterSetElement:function(){this.$resizableEl=this.$el.find(this.resizableEl).length?this.$el.find(this.resizableEl):this.$el,this.$resizableEl.resizable({handles:this.handles,minHeight:this.minHeight,minWidth:this.minWidth,maxWidth:this.maxWidth,maxHeight:this.maxHeight,alsoResize:this.alsoResize,resize:s.bind(t,this),start:s.bind(i,this),stop:s.bind(n,this)})},onRemove:function(){try{this.$el.resizable("destroy")}catch(e){}}})}),define("text!common/component/dialog/template/dialogTemplate.htm",[],function(){return'<div class="jr-mDialog jr {{- additionalCssClasses }}" tabindex="-1">\n    <div class="jr-mDialog-header mover jr">\n        <h1 class="jr-mDialog-header-title jr">{{- title }}</h1>\n    </div>\n    <div class="jr-mDialog-body jr {{- additionalBodyCssClasses }}">\n        <div class="jr-mDialog-body-wrapper jr subcontainer"></div>\n    </div>\n    <div class="jr-mDialog-footer jr"></div>\n\n</div>\n'}),define("text!common/component/dialog/template/dialogButtonTemplate.htm",[],function(){return"<button class=\"button action up {{- primary ? 'primary' : ''}} {{- (typeof float !== 'undefined' ? 'right' : '') }}\">\n    <span class=\"wrap\">{{- label }}<span class=\"icon\"></span></span>\n</button>\n"}),define("jquery-ui/jquery.ui.draggable",["require","./jquery.ui.core","./jquery.ui.mouse","./jquery.ui.widget"],function(e){e("./jquery.ui.core"),e("./jquery.ui.mouse");var t=e("./jquery.ui.widget");return t.widget("ui.draggable",t.ui.mouse,{version:"@VERSION",widgetEventPrefix:"drag",options:{addClasses:!0,appendTo:"parent",axis:!1,connectToSortable:!1,containment:!1,cursor:"auto",cursorAt:!1,grid:!1,handle:!1,helper:"original",iframeFix:!1,opacity:!1,refreshPositions:!1,revert:!1,revertDuration:500,scope:"default",scroll:!0,scrollSensitivity:20,scrollSpeed:20,snap:!1,snapMode:"both",snapTolerance:20,stack:!1,zIndex:!1,drag:null,start:null,stop:null},_create:function(){"original"!==this.options.helper||/^(?:r|a|f)/.test(this.element.css("position"))||(this.element[0].style.position="relative"),this.options.addClasses&&this.element.addClass("ui-draggable"),this.options.disabled&&this.element.addClass("ui-draggable-disabled"),this._mouseInit()},_destroy:function(){this.element.removeClass("ui-draggable ui-draggable-dragging ui-draggable-disabled"),this._mouseDestroy()},_mouseCapture:function(e){var i=this.options;return this.helper||i.disabled||t(e.target).closest(".ui-resizable-handle").length>0?!1:(this.handle=this._getHandle(e),this.handle?(t(i.iframeFix===!0?"iframe":i.iframeFix).each(function(){t("<div class='ui-draggable-iframeFix' style='background: #fff;'></div>").css({width:this.offsetWidth+"px",height:this.offsetHeight+"px",position:"absolute",opacity:"0.001",zIndex:1e3}).css(t(this).offset()).appendTo("body")}),!0):!1)},_mouseStart:function(e){var i=this.options;return this.helper=this._createHelper(e),this.helper.addClass("ui-draggable-dragging"),this._cacheHelperProportions(),t.ui.ddmanager&&(t.ui.ddmanager.current=this),this._cacheMargins(),this.cssPosition=this.helper.css("position"),this.scrollParent=this.helper.scrollParent(),this.offsetParent=this.helper.offsetParent(),this.offsetParentCssPosition=this.offsetParent.css("position"),this.offset=this.positionAbs=this.element.offset(),this.offset={top:this.offset.top-this.margins.top,left:this.offset.left-this.margins.left},this.offset.scroll=!1,t.extend(this.offset,{click:{left:e.pageX-this.offset.left,top:e.pageY-this.offset.top},parent:this._getParentOffset(),relative:this._getRelativeOffset()}),this.originalPosition=this.position=this._generatePosition(e),this.originalPageX=e.pageX,this.originalPageY=e.pageY,i.cursorAt&&this._adjustOffsetFromHelper(i.cursorAt),this._setContainment(),this._trigger("start",e)===!1?(this._clear(),!1):(this._cacheHelperProportions(),t.ui.ddmanager&&!i.dropBehaviour&&t.ui.ddmanager.prepareOffsets(this,e),this._mouseDrag(e,!0),t.ui.ddmanager&&t.ui.ddmanager.dragStart(this,e),!0)},_mouseDrag:function(e,i){if("fixed"===this.offsetParentCssPosition&&(this.offset.parent=this._getParentOffset()),this.position=this._generatePosition(e),this.positionAbs=this._convertPositionTo("absolute"),!i){var n=this._uiHash();if(this._trigger("drag",e,n)===!1)return this._mouseUp({}),!1;this.position=n.position}return this.options.axis&&"y"===this.options.axis||(this.helper[0].style.left=this.position.left+"px"),this.options.axis&&"x"===this.options.axis||(this.helper[0].style.top=this.position.top+"px"),t.ui.ddmanager&&t.ui.ddmanager.drag(this,e),!1},_mouseStop:function(e){var i=this,n=!1;return t.ui.ddmanager&&!this.options.dropBehaviour&&(n=t.ui.ddmanager.drop(this,e)),this.dropped&&(n=this.dropped,this.dropped=!1),"original"!==this.options.helper||t.contains(this.element[0].ownerDocument,this.element[0])?("invalid"===this.options.revert&&!n||"valid"===this.options.revert&&n||this.options.revert===!0||t.isFunction(this.options.revert)&&this.options.revert.call(this.element,n)?t(this.helper).animate(this.originalPosition,parseInt(this.options.revertDuration,10),function(){i._trigger("stop",e)!==!1&&i._clear()}):this._trigger("stop",e)!==!1&&this._clear(),!1):!1},_mouseUp:function(e){return t("div.ui-draggable-iframeFix").each(function(){this.parentNode.removeChild(this)}),t.ui.ddmanager&&t.ui.ddmanager.dragStop(this,e),t.ui.mouse.prototype._mouseUp.call(this,e)},cancel:function(){return this.helper.is(".ui-draggable-dragging")?this._mouseUp({}):this._clear(),this},_getHandle:function(e){return this.options.handle?!!t(e.target).closest(this.element.find(this.options.handle)).length:!0},_createHelper:function(e){var i=this.options,n=t.isFunction(i.helper)?t(i.helper.apply(this.element[0],[e])):"clone"===i.helper?this.element.clone().removeAttr("id"):this.element;return n.parents("body").length||n.appendTo("parent"===i.appendTo?this.element[0].parentNode:i.appendTo),n[0]===this.element[0]||/(fixed|absolute)/.test(n.css("position"))||n.css("position","absolute"),n},_adjustOffsetFromHelper:function(e){"string"==typeof e&&(e=e.split(" ")),t.isArray(e)&&(e={left:+e[0],top:+e[1]||0}),"left"in e&&(this.offset.click.left=e.left+this.margins.left),"right"in e&&(this.offset.click.left=this.helperProportions.width-e.right+this.margins.left),"top"in e&&(this.offset.click.top=e.top+this.margins.top),"bottom"in e&&(this.offset.click.top=this.helperProportions.height-e.bottom+this.margins.top)},_getParentOffset:function(){var e=this.offsetParent.offset();return"absolute"===this.cssPosition&&this.scrollParent[0]!==document&&t.contains(this.scrollParent[0],this.offsetParent[0])&&(e.left+=this.scrollParent.scrollLeft(),e.top+=this.scrollParent.scrollTop()),(this.offsetParent[0]===document.body||this.offsetParent[0].tagName&&"html"===this.offsetParent[0].tagName.toLowerCase()&&t.ui.ie)&&(e={top:0,left:0}),{top:e.top+(parseInt(this.offsetParent.css("borderTopWidth"),10)||0),left:e.left+(parseInt(this.offsetParent.css("borderLeftWidth"),10)||0)}},_getRelativeOffset:function(){if("relative"===this.cssPosition){var e=this.element.position();return{top:e.top-(parseInt(this.helper.css("top"),10)||0)+this.scrollParent.scrollTop(),left:e.left-(parseInt(this.helper.css("left"),10)||0)+this.scrollParent.scrollLeft()}}return{top:0,left:0}},_cacheMargins:function(){this.margins={left:parseInt(this.element.css("marginLeft"),10)||0,top:parseInt(this.element.css("marginTop"),10)||0,right:parseInt(this.element.css("marginRight"),10)||0,bottom:parseInt(this.element.css("marginBottom"),10)||0}},_cacheHelperProportions:function(){this.helperProportions={width:this.helper.outerWidth(),height:this.helper.outerHeight()}},_setContainment:function(){var e,i,n,s=this.options;return s.containment?"window"===s.containment?void(this.containment=[t(window).scrollLeft()-this.offset.relative.left-this.offset.parent.left,t(window).scrollTop()-this.offset.relative.top-this.offset.parent.top,t(window).scrollLeft()+t(window).width()-this.helperProportions.width-this.margins.left,t(window).scrollTop()+(t(window).height()||document.body.parentNode.scrollHeight)-this.helperProportions.height-this.margins.top]):"document"===s.containment?void(this.containment=[0,0,t(document).width()-this.helperProportions.width-this.margins.left,(t(document).height()||document.body.parentNode.scrollHeight)-this.helperProportions.height-this.margins.top]):s.containment.constructor===Array?void(this.containment=s.containment):("parent"===s.containment&&(s.containment=this.helper[0].parentNode),i=t(s.containment),n=i[0],void(n&&(e="hidden"!==i.css("overflow"),this.containment=[(parseInt(i.css("borderLeftWidth"),10)||0)+(parseInt(i.css("paddingLeft"),10)||0),(parseInt(i.css("borderTopWidth"),10)||0)+(parseInt(i.css("paddingTop"),10)||0),(e?Math.max(n.scrollWidth,n.offsetWidth):n.offsetWidth)-(parseInt(i.css("borderRightWidth"),10)||0)-(parseInt(i.css("paddingRight"),10)||0)-this.helperProportions.width-this.margins.left-this.margins.right,(e?Math.max(n.scrollHeight,n.offsetHeight):n.offsetHeight)-(parseInt(i.css("borderBottomWidth"),10)||0)-(parseInt(i.css("paddingBottom"),10)||0)-this.helperProportions.height-this.margins.top-this.margins.bottom],this.relative_container=i))):void(this.containment=null)},_convertPositionTo:function(e,i){i||(i=this.position);var n="absolute"===e?1:-1,s="absolute"!==this.cssPosition||this.scrollParent[0]!==document&&t.contains(this.scrollParent[0],this.offsetParent[0])?this.scrollParent:this.offsetParent;return this.offset.scroll||(this.offset.scroll={top:s.scrollTop(),left:s.scrollLeft()}),{top:i.top+this.offset.relative.top*n+this.offset.parent.top*n-("fixed"===this.cssPosition?-this.scrollParent.scrollTop():this.offset.scroll.top)*n,left:i.left+this.offset.relative.left*n+this.offset.parent.left*n-("fixed"===this.cssPosition?-this.scrollParent.scrollLeft():this.offset.scroll.left)*n}},_generatePosition:function(e){var i,n,s,o,r=this.options,a="absolute"!==this.cssPosition||this.scrollParent[0]!==document&&t.contains(this.scrollParent[0],this.offsetParent[0])?this.scrollParent:this.offsetParent,l=e.pageX,h=e.pageY;return this.offset.scroll||(this.offset.scroll={top:a.scrollTop(),left:a.scrollLeft()}),this.originalPosition&&(this.containment&&(this.relative_container?(n=this.relative_container.offset(),i=[this.containment[0]+n.left,this.containment[1]+n.top,this.containment[2]+n.left,this.containment[3]+n.top]):i=this.containment,e.pageX-this.offset.click.left<i[0]&&(l=i[0]+this.offset.click.left),e.pageY-this.offset.click.top<i[1]&&(h=i[1]+this.offset.click.top),e.pageX-this.offset.click.left>i[2]&&(l=i[2]+this.offset.click.left),e.pageY-this.offset.click.top>i[3]&&(h=i[3]+this.offset.click.top)),r.grid&&(s=r.grid[1]?this.originalPageY+Math.round((h-this.originalPageY)/r.grid[1])*r.grid[1]:this.originalPageY,h=i?s-this.offset.click.top>=i[1]||s-this.offset.click.top>i[3]?s:s-this.offset.click.top>=i[1]?s-r.grid[1]:s+r.grid[1]:s,o=r.grid[0]?this.originalPageX+Math.round((l-this.originalPageX)/r.grid[0])*r.grid[0]:this.originalPageX,l=i?o-this.offset.click.left>=i[0]||o-this.offset.click.left>i[2]?o:o-this.offset.click.left>=i[0]?o-r.grid[0]:o+r.grid[0]:o)),{top:h-this.offset.click.top-this.offset.relative.top-this.offset.parent.top+("fixed"===this.cssPosition?-this.scrollParent.scrollTop():this.offset.scroll.top),left:l-this.offset.click.left-this.offset.relative.left-this.offset.parent.left+("fixed"===this.cssPosition?-this.scrollParent.scrollLeft():this.offset.scroll.left)}},_clear:function(){this.helper.removeClass("ui-draggable-dragging"),this.helper[0]===this.element[0]||this.cancelHelperRemoval||this.helper.remove(),this.helper=null,this.cancelHelperRemoval=!1},_trigger:function(e,i,n){return n=n||this._uiHash(),t.ui.plugin.call(this,e,[i,n]),"drag"===e&&(this.positionAbs=this._convertPositionTo("absolute")),t.Widget.prototype._trigger.call(this,e,i,n)},plugins:{},_uiHash:function(){return{helper:this.helper,position:this.position,originalPosition:this.originalPosition,offset:this.positionAbs}}}),t.ui.plugin.add("draggable","connectToSortable",{start:function(e,i){var n=t(this).data("ui-draggable"),s=n.options,o=t.extend({},i,{item:n.element});n.sortables=[],t(s.connectToSortable).each(function(){var i=t.data(this,"ui-sortable");i&&!i.options.disabled&&(n.sortables.push({instance:i,shouldRevert:i.options.revert}),i.refreshPositions(),i._trigger("activate",e,o))})},stop:function(e,i){var n=t(this).data("ui-draggable"),s=t.extend({},i,{item:n.element});t.each(n.sortables,function(){this.instance.isOver?(this.instance.isOver=0,n.cancelHelperRemoval=!0,this.instance.cancelHelperRemoval=!1,this.shouldRevert&&(this.instance.options.revert=this.shouldRevert),this.instance._mouseStop(e),this.instance.options.helper=this.instance.options._helper,"original"===n.options.helper&&this.instance.currentItem.css({top:"auto",left:"auto"})):(this.instance.cancelHelperRemoval=!1,this.instance._trigger("deactivate",e,s))})},drag:function(e,i){var n=t(this).data("ui-draggable"),s=this;t.each(n.sortables,function(){var o=!1,r=this;this.instance.positionAbs=n.positionAbs,this.instance.helperProportions=n.helperProportions,this.instance.offset.click=n.offset.click,this.instance._intersectsWith(this.instance.containerCache)&&(o=!0,t.each(n.sortables,function(){return this.instance.positionAbs=n.positionAbs,this.instance.helperProportions=n.helperProportions,this.instance.offset.click=n.offset.click,this!==r&&this.instance._intersectsWith(this.instance.containerCache)&&t.contains(r.instance.element[0],this.instance.element[0])&&(o=!1),o})),o?(this.instance.isOver||(this.instance.isOver=1,this.instance.currentItem=t(s).clone().removeAttr("id").appendTo(this.instance.element).data("ui-sortable-item",!0),this.instance.options._helper=this.instance.options.helper,this.instance.options.helper=function(){return i.helper[0]},e.target=this.instance.currentItem[0],this.instance._mouseCapture(e,!0),this.instance._mouseStart(e,!0,!0),this.instance.offset.click.top=n.offset.click.top,this.instance.offset.click.left=n.offset.click.left,this.instance.offset.parent.left-=n.offset.parent.left-this.instance.offset.parent.left,this.instance.offset.parent.top-=n.offset.parent.top-this.instance.offset.parent.top,n._trigger("toSortable",e),n.dropped=this.instance.element,n.currentItem=n.element,this.instance.fromOutside=n),this.instance.currentItem&&this.instance._mouseDrag(e)):this.instance.isOver&&(this.instance.isOver=0,this.instance.cancelHelperRemoval=!0,this.instance.options.revert=!1,this.instance._trigger("out",e,this.instance._uiHash(this.instance)),this.instance._mouseStop(e,!0),this.instance.options.helper=this.instance.options._helper,this.instance.currentItem.remove(),this.instance.placeholder&&this.instance.placeholder.remove(),n._trigger("fromSortable",e),n.dropped=!1)})}}),t.ui.plugin.add("draggable","cursor",{start:function(){var e=t("body"),i=t(this).data("ui-draggable").options;e.css("cursor")&&(i._cursor=e.css("cursor")),e.css("cursor",i.cursor)},stop:function(){var e=t(this).data("ui-draggable").options;e._cursor&&t("body").css("cursor",e._cursor)}}),t.ui.plugin.add("draggable","opacity",{start:function(e,i){var n=t(i.helper),s=t(this).data("ui-draggable").options;n.css("opacity")&&(s._opacity=n.css("opacity")),n.css("opacity",s.opacity)},stop:function(e,i){var n=t(this).data("ui-draggable").options;n._opacity&&t(i.helper).css("opacity",n._opacity)}}),t.ui.plugin.add("draggable","scroll",{start:function(){var e=t(this).data("ui-draggable");e.scrollParent[0]!==document&&"HTML"!==e.scrollParent[0].tagName&&(e.overflowOffset=e.scrollParent.offset())},drag:function(e){var i=t(this).data("ui-draggable"),n=i.options,s=!1;i.scrollParent[0]!==document&&"HTML"!==i.scrollParent[0].tagName?(n.axis&&"x"===n.axis||(i.overflowOffset.top+i.scrollParent[0].offsetHeight-e.pageY<n.scrollSensitivity?i.scrollParent[0].scrollTop=s=i.scrollParent[0].scrollTop+n.scrollSpeed:e.pageY-i.overflowOffset.top<n.scrollSensitivity&&(i.scrollParent[0].scrollTop=s=i.scrollParent[0].scrollTop-n.scrollSpeed)),n.axis&&"y"===n.axis||(i.overflowOffset.left+i.scrollParent[0].offsetWidth-e.pageX<n.scrollSensitivity?i.scrollParent[0].scrollLeft=s=i.scrollParent[0].scrollLeft+n.scrollSpeed:e.pageX-i.overflowOffset.left<n.scrollSensitivity&&(i.scrollParent[0].scrollLeft=s=i.scrollParent[0].scrollLeft-n.scrollSpeed))):(n.axis&&"x"===n.axis||(e.pageY-t(document).scrollTop()<n.scrollSensitivity?s=t(document).scrollTop(t(document).scrollTop()-n.scrollSpeed):t(window).height()-(e.pageY-t(document).scrollTop())<n.scrollSensitivity&&(s=t(document).scrollTop(t(document).scrollTop()+n.scrollSpeed))),n.axis&&"y"===n.axis||(e.pageX-t(document).scrollLeft()<n.scrollSensitivity?s=t(document).scrollLeft(t(document).scrollLeft()-n.scrollSpeed):t(window).width()-(e.pageX-t(document).scrollLeft())<n.scrollSensitivity&&(s=t(document).scrollLeft(t(document).scrollLeft()+n.scrollSpeed)))),s!==!1&&t.ui.ddmanager&&!n.dropBehaviour&&t.ui.ddmanager.prepareOffsets(i,e)}}),t.ui.plugin.add("draggable","snap",{start:function(){var e=t(this).data("ui-draggable"),i=e.options;e.snapElements=[],t(i.snap.constructor!==String?i.snap.items||":data(ui-draggable)":i.snap).each(function(){var i=t(this),n=i.offset();this!==e.element[0]&&e.snapElements.push({item:this,width:i.outerWidth(),height:i.outerHeight(),top:n.top,left:n.left})})},drag:function(e,i){var n,s,o,r,a,l,h,c,d,p,u=t(this).data("ui-draggable"),m=u.options,f=m.snapTolerance,g=i.offset.left,v=g+u.helperProportions.width,b=i.offset.top,w=b+u.helperProportions.height;for(d=u.snapElements.length-1;d>=0;d--)a=u.snapElements[d].left,l=a+u.snapElements[d].width,h=u.snapElements[d].top,c=h+u.snapElements[d].height,a-f>v||g>l+f||h-f>w||b>c+f||!t.contains(u.snapElements[d].item.ownerDocument,u.snapElements[d].item)?(u.snapElements[d].snapping&&u.options.snap.release&&u.options.snap.release.call(u.element,e,t.extend(u._uiHash(),{snapItem:u.snapElements[d].item})),u.snapElements[d].snapping=!1):("inner"!==m.snapMode&&(n=Math.abs(h-w)<=f,s=Math.abs(c-b)<=f,o=Math.abs(a-v)<=f,r=Math.abs(l-g)<=f,n&&(i.position.top=u._convertPositionTo("relative",{top:h-u.helperProportions.height,left:0}).top-u.margins.top),s&&(i.position.top=u._convertPositionTo("relative",{top:c,left:0}).top-u.margins.top),o&&(i.position.left=u._convertPositionTo("relative",{top:0,left:a-u.helperProportions.width}).left-u.margins.left),r&&(i.position.left=u._convertPositionTo("relative",{top:0,left:l}).left-u.margins.left)),p=n||s||o||r,"outer"!==m.snapMode&&(n=Math.abs(h-b)<=f,s=Math.abs(c-w)<=f,o=Math.abs(a-g)<=f,r=Math.abs(l-v)<=f,n&&(i.position.top=u._convertPositionTo("relative",{top:h,left:0}).top-u.margins.top),s&&(i.position.top=u._convertPositionTo("relative",{top:c-u.helperProportions.height,left:0}).top-u.margins.top),o&&(i.position.left=u._convertPositionTo("relative",{top:0,left:a}).left-u.margins.left),r&&(i.position.left=u._convertPositionTo("relative",{top:0,left:l-u.helperProportions.width}).left-u.margins.left)),!u.snapElements[d].snapping&&(n||s||o||r||p)&&u.options.snap.snap&&u.options.snap.snap.call(u.element,e,t.extend(u._uiHash(),{snapItem:u.snapElements[d].item})),u.snapElements[d].snapping=n||s||o||r||p)}}),t.ui.plugin.add("draggable","stack",{start:function(){var e,i=this.data("ui-draggable").options,n=t.makeArray(t(i.stack)).sort(function(e,i){return(parseInt(t(e).css("zIndex"),10)||0)-(parseInt(t(i).css("zIndex"),10)||0)});n.length&&(e=parseInt(t(n[0]).css("zIndex"),10)||0,t(n).each(function(i){t(this).css("zIndex",e+i)}),this.css("zIndex",e+n.length))}}),t.ui.plugin.add("draggable","zIndex",{start:function(e,i){var n=t(i.helper),s=t(this).data("ui-draggable").options;n.css("zIndex")&&(s._zIndex=n.css("zIndex")),n.css("zIndex",s.zIndex)},stop:function(e,i){var n=t(this).data("ui-draggable").options;n._zIndex&&t(i.helper).css("zIndex",n._zIndex)}}),t}),define("common/component/dialog/Dialog",["require","underscore","jquery","common/component/base/Dimmer","common/component/panel/Panel","common/component/base/OptionContainer","common/component/panel/trait/resizablePanelTrait","text!./template/dialogTemplate.htm","text!./template/dialogButtonTemplate.htm","jquery-ui/jquery.ui.draggable"],function(e){"use strict";var t=e("underscore"),i=e("jquery"),n=e("common/component/base/Dimmer"),s=e("common/component/panel/Panel"),o=e("common/component/base/OptionContainer"),r=e("common/component/panel/trait/resizablePanelTrait"),a=e("text!./template/dialogTemplate.htm"),l=e("text!./template/dialogButtonTemplate.htm");e("jquery-ui/jquery.ui.draggable");var h={},c=s.extend({defaultTemplate:a,events:{mousedown:"_focus",touchstart:"_focus",keydown:"_onKeyDown"},constructor:function(e){e||(e={}),e.traits||(e.traits=[]),this.resizable=e.resizable||!1,this.modal=e.modal||!1,this.additionalBodyCssClasses=e.additionalBodyCssClasses||"",this.resizable&&-1===t.indexOf(e.traits,r)&&e.traits.push(r),s.call(this,e)},initialize:function(e){h=t.extend({},e),this.collapsed=!this.collapsed,t.isEmpty(e.buttons)||(this.buttons=new o({options:e.buttons,el:this.$(".jr-mDialog-footer")[0]||this.$(".footer")[0],contextName:"button",optionTemplate:l})),s.prototype.initialize.apply(this,arguments),this.buttons&&this.listenTo(this.buttons,t.map(e.buttons,function(e){return"button:"+e.action}).join(" "),t.bind(function(e,t){this.trigger("button:"+t.get("action"),e,t)},this)),this.render()},getTemplateArguments:function(){var e=s.prototype.getTemplateArguments.apply(this,arguments);return t.extend(e,{additionalBodyCssClasses:this.additionalBodyCssClasses})},setElement:function(e){var t=s.prototype.setElement.apply(this,arguments);return this.buttons&&this.buttons.setElement(this.$(".jr-mDialog-footer")[0]||this.$(".footer")[0]),t},setTitle:function(e){this.$(".jr-mDialog-header > .jr-mDialog-header-title").text(e)},render:function(){return this.$el.hide(),this.modal&&(this.dimmer=new n({zIndex:900})),i("body").append(this.$el),this.$el.draggable({handle:".mover",addClasses:!1,containment:"document"}),this},open:function(e){return this.isVisible()?void 0:(s.prototype.open.apply(this,arguments),this.modal&&this.dimmer.css({zIndex:++c.highestIndex}).show(),h.additionalCssClasses&&-1!==h.additionalCssClasses.indexOf("newResizeableDialog")&&this._setMinSize(),this._position(e)._increaseZIndex(),this.buttons&&this.buttons.$(".over").removeClass("over"),this.$el.show(),this.trigger("dialog:visible"),this)},close:function(){return this.isVisible()?(this.$el.css({zIndex:--c.highestIndex}),this.modal&&this.dimmer.css({zIndex:--c.highestIndex}).hide(),this.$el.hide(),s.prototype.close.apply(this,arguments),this):void 0},addCssClasses:function(e){this.$el.addClass(e)},toggleCollapsedState:function(){return this},enableButton:function(e){this.buttons.enable(e)},disableButton:function(e){this.buttons.disable(e)},isVisible:function(){return this.$el.is(":visible")},_setMinSize:function(){h.minWidth&&this.$el.css({width:h.minWidth,minWidth:h.minWidth}),h.minHeight&&this.$el.css({height:h.minHeight,minHeight:h.minHeight})},_position:function(e){var t,n,s=i("body"),o=this.$el.height(),r=this.$el.width();if(e&&"undefined"!=typeof e.top&&"undefined"!=typeof e.left){t=e.top,n=e.left;var a=s.height(),l=s.width(),h=a-e.top,c=l-e.left;o>h&&(t=e.top-o,t=0>t?a/2-o/2:t),r>c&&(n=e.left-r,n=0>n?l/2-r/2:n)}else t=i(window).height()/2-o/2,n=i(window).width()/2-r/2;return this.$el.css({top:t,left:n,position:"absolute"}),this},_focus:function(){!this.modal&&this._increaseZIndex()},_increaseZIndex:function(){this.$el.css({zIndex:++c.highestIndex})},_onKeyDown:function(e){this.buttons._onKeyDown(e)},remove:function(){this.buttons&&this.buttons.remove(),this.dimmer&&this.dimmer.remove();try{this.$el.draggable("destroy")}catch(e){}s.prototype.remove.call(this)}},{highestIndex:1e3,resetHighestIndex:function(e){c.highestIndex=e||1e3}});return c}),define("text!tenantImportExport/export/template/loadingDialogTemplate.htm",[],function(){return'<div class="panel dialog loading overlay moveable centered_horz centered_vert {{- additionalCssClasses }}" tabindex="-1">\n    <div class="content">\n        <div class="header mover">\n            <div class="title">{{- title }}</div>\n        </div>\n        <div class="body">\n            <p class="message"></p>\n        </div>\n    </div>\n</div>\n';
}),define("tenantImportExport/export/view/LoadingDialog",["require","common/component/dialog/Dialog","underscore","bundle!CommonBundle","text!tenantImportExport/export/template/loadingDialogTemplate.htm"],function(e){var t=e("common/component/dialog/Dialog"),i=e("underscore"),n=e("bundle!CommonBundle"),s=e("text!tenantImportExport/export/template/loadingDialogTemplate.htm");return t.extend({defaultTemplate:s,constructor:function(e){i.defaults(e,{contentContainer:".body > .message",title:n["dialog.overlay.title"],modal:!0}),t.call(this,e)}})}),define("text!tenantImportExport/import/template/dependentResourcesDialogTemplate.htm",[],function(){return'{{ if (message) { }}<p class="message">{{- message }}</p> {{ } }}\n<div class="control groupBox">\n    <ol class="list tabular oneColumn">\n        {{ for (var i = 0; i<items.length; i++) { }}\n        <li class="leaf {{-  i === 0 ? \' first\' : \'\' }} {{- i === items.length - 1 ? \'last\' : \'\' }}" tabindex="-1">\n            <div class="wrap">\n                <div class="column one">\n                    <p class="uri">{{- items[i] }} </p>\n                </div>\n            </div>\n        </li>\n        {{ } }}\n    </ol>\n\n</div>\n\n'}),define("tenantImportExport/view/BaseWarningDialogView",["require","jquery","underscore","common/component/dialog/Dialog","bundle!ImportExportBundle","text!tenantImportExport/import/template/dependentResourcesDialogTemplate.htm"],function(e){var t=(e("jquery"),e("underscore")),i=e("common/component/dialog/Dialog"),n=e("bundle!ImportExportBundle"),s=e("text!tenantImportExport/import/template/dependentResourcesDialogTemplate.htm");return i.extend({events:{resize:"onResizeHeight"},onResizeHeight:function(){this.$contentContainer.height(this.$el.height()-this._resizableContainerShiftHeight),this.$(".control.groupBox").css("min-height",this.$contentContainer.height()-this.$(".message").outerHeight(!0))},constructor:function(e){e=e||{},this.options=e,i.prototype.constructor.call(this,{modal:!0,resizable:e.resizable,minWidth:e.minWidth,minHeight:e.minHeight,additionalCssClasses:e.additionalCssClasses||"dependent-resources-dialog jr-uWidth-725px jr-uHeight-500px",title:e.title||n["dialog.broken.dependencies.title"],content:"",buttons:e.buttons}),this.template=t.template(e.template||s)},open:function(e){this.setContent(this.template(t.defaults(e,{message:""}))),i.prototype.open.apply(this,arguments),this.$contentContainer.scrollTop(0),this._resizableContainerShiftHeight=this.$(".jr-mDialog-footer").outerHeight()+this.$(".jr-mDialog-header").outerHeight()+this.$contentContainer.outerHeight()-this.$contentContainer.height()}})}),define("text!tenantImportExport/import/template/mergeTenantDialogTemplate.htm",[],function(){return"<p class=\"message\">{{- i18n['import.dialog.merge.tenant.intro'] }}</p>\n\n<p class=\"message imported-tenant\"><b>{{- i18n['import.dialog.merge.tenant.imported'] }} : </b> {{- fileTenantId}} </p>\n<p class=\"message selected-tenant\"><b>{{- i18n['import.dialog.merge.tenant.selected'] }} : </b> {{- selectedTenantId}} </p>\n\n<p class=\"message\">{{- i18n['import.dialog.merge.tenant.outro'] }} {{- selectedTenantId}}</p>\n"}),define("tenantImportExport/import/view/MergeTenantDialogView",["require","underscore","bundle!CommonBundle","bundle!ImportExportBundle","tenantImportExport/view/BaseWarningDialogView","text!tenantImportExport/import/template/mergeTenantDialogTemplate.htm"],function(e){var t=e("underscore"),i=e("bundle!CommonBundle"),n=e("bundle!ImportExportBundle"),s=e("tenantImportExport/view/BaseWarningDialogView"),o=e("text!tenantImportExport/import/template/mergeTenantDialogTemplate.htm");return s.extend({constructor:function(e){e||(e={}),t.extend(e,{resizable:!0,additionalCssClasses:"merge-tenant-dialog",title:n["import.dialog.merge.tenant.title"],buttons:[{label:n["import.button.continue"],action:"import",primary:!0},{label:i["button.cancel"],action:"cancel",primary:!1}],template:o}),s.prototype.constructor.call(this,e),this.on("button:import",t.bind(this.close,this)),this.on("button:cancel",t.bind(this.close,this))},open:function(e){t.extend(e,{i18n:n}),s.prototype.open.call(this,e)}})}),define("tenantImportExport/import/view/ImportDependentResourcesDialogView",["require","underscore","bundle!CommonBundle","bundle!ImportExportBundle","tenantImportExport/view/BaseWarningDialogView"],function(e){var t=e("underscore"),i=e("bundle!CommonBundle"),n=e("bundle!ImportExportBundle"),s=e("tenantImportExport/view/BaseWarningDialogView");return s.extend({constructor:function(e){e||(e={}),t.extend(e,{resizable:!0,buttons:[{label:n["import.button.include"],action:"include",primary:!0},{label:n["import.button.skip"],action:"skip",primary:!1},{label:i["button.cancel"],action:"cancel",primary:!1}]}),s.prototype.constructor.call(this,e),this.on("button:include",t.bind(this.close,this)),this.on("button:skip",t.bind(this.close,this)),this.on("button:cancel",t.bind(this.close,this))},open:function(e){t.extend(e,{message:n["import.dialog.broken.dependencies.intro"]}),s.prototype.open.call(this,e)}})}),define("tenantImportExport/import/view/ImportWarningsDialogView",["require","underscore","bundle!CommonBundle","bundle!ImportExportBundle","tenantImportExport/view/BaseWarningDialogView"],function(e){var t=e("underscore"),i=e("bundle!CommonBundle"),n=e("bundle!ImportExportBundle"),s=e("tenantImportExport/view/BaseWarningDialogView");return s.extend({constructor:function(e){e||(e={}),t.extend(e,{resizable:!0,title:n["import.dialog.warnings.title"],additionalCssClasses:"warnings-dialog",buttons:[{label:i["button.close"],action:"close",primary:!1}]}),s.prototype.constructor.call(this,e),this.on("button:close",t.bind(this.close,this))}})}),define("tenantImportExport/import/factory/warningsFactory",["require","bundle!ImportExportBundle","underscore"],function(e){function t(e,t){var i={};return n.each(e,function(e,n){i[e]=t[n]}),i}var i=e("bundle!ImportExportBundle"),n=e("underscore"),s={};return s["import.resource.uri.too.long"]=[{msg:i["import.resource.uri.too.long"],parameters:["resourceURI"]},{msg:i["import.resource.uri.too.long.length"],parameters:["resourceURI","maxURILength"]}],s["import.access.denied"]=[{msg:i["import.access.denied"],parameters:["resourceURI"]}],s["import.resource.not.found"]=[{msg:i["import.resource.not.found"],parameters:["resourceURI"]}],s["import.resource.different.type.already.exists"]=[{msg:i["import.resource.different.type.already.exists"],parameters:["resourceURI"]}],s["import.resource.uri.not.valid"]=[{msg:i["import.resource.uri.not.valid"],parameters:["resourceURI"]}],s["import.resource.data.missing"]=[{msg:i["import.resource.data.missing"],parameters:["resourceURI"]}],s["import.reference.resource.not.found"]=[{msg:i["import.reference.resource.not.found"],parameters:["resourceURI"]},{msg:i["import.reference.dependent.resource.not.found"],parameters:["dependentResourceURI","resourceURI"]}],s["import.resource.attached.not.exist.org"]=[{msg:i["import.resource.attached.not.exist.org"],parameters:["resourceURI"]}],s["import.folder.attached.not.exist.org"]=[{msg:i["import.folder.attached.not.exist.org"],parameters:["resourceURI"]}],s["import.multi.tenancy.not.supported"]=[{msg:i["import.multi.tenancy.not.supported"],parameters:["organizationId"]}],s["import.report.job.reference.resource.not.found"]=[{msg:i["import.report.job.reference.resource.not.found"],parameters:["resourceURI"]},{msg:i["import.report.job.reference.dependent.resource.not.found"],parameters:["dependentResourceURI","resourceURI"]}],function(e){var i,o=e.code,r=e.parameters,a=s[o];return i=n.template(a[r.length-1].msg)(t(a[r.length-1].parameters,r))}}),define("text!common/component/notification/template/notificationTemplate.htm",[],function(){return'<div class="notificationAlert">\n    <p class="notificationMessage">\n        <span>{{- message }}</span>\n        <span class="close">| <a href="#">{{- i18n[\'notification.button.close\'] }}</a></span>\n    </p>\n</div>'}),define("common/component/notification/Notification",["require","underscore","jquery","backbone","bundle!js-sdk/CommonBundle","text!./template/notificationTemplate.htm","css!notifications"],function(e){"use strict";var t,i,n=e("underscore"),s=e("jquery"),o=e("backbone"),r=e("bundle!js-sdk/CommonBundle"),a=e("text!./template/notificationTemplate.htm");e("css!notifications");var l={SUCCESS:"success",WARNING:"warning"},h=2e3,c={};return c[l.WARNING]=l.WARNING,i=o.View.extend({template:n.template(a),events:{"click .close a":"hide"},el:function(){return this.template({message:this.message,i18n:r})},initialize:function(){this.render()},render:function(){return s("body").append(this.$el),this.$el.hide(),this.$messageContainer=this.$(".notificationMessage > span:first-child"),this},show:function(e){return e=n.extend({type:l.WARNING,delay:h},e),this.$messageContainer.text(e.message),this.$messageContainer.removeClass().attr({"class":c[e.type]}),this.$el.slideDown(),e.delay&&n.delay(n.bind(this.hide,this),e.delay),this},hide:function(){return arguments.length&&arguments[0].preventDefault&&arguments[0].preventDefault(),this.$el.slideUp(),this},remove:function(){o.View.prototype.remove.apply(this,arguments)}},{show:function(){return t||(t=new i),t.show.apply(t,arguments)},hide:function(){return t||(t=new i),t.hide.apply(t,arguments)}})}),define("common/view/mixin/epoxyCustomBindingHandlers",["require"],function(e){return{}}),define("common/view/mixin/epoxyCustomBindingFilters",["require"],function(e){return{}}),define("common/view/mixin/epoxyViewMixin",["require","backbone.epoxy","underscore","./epoxyCustomBindingHandlers","./epoxyCustomBindingFilters"],function(e){var t=e("backbone.epoxy"),i=e("underscore"),n=e("./epoxyCustomBindingHandlers"),s=e("./epoxyCustomBindingFilters");return{epoxifyView:function(){var e=this.remove;t.View.mixin(this),e&&(this.remove=e),this.bindingFilters?this.bindingFilters=i.extend({},s,this.bindingFilters):s,this.bindingHandlers?this.bindingHandlers=i.extend({},n,this.bindingHandlers):n},applyEpoxyBindings:function(){this.applyBindings&&this.applyBindings()},removeEpoxyBindings:function(){this.removeBindings&&this.removeBindings()}}}),define("text!tenantImportExport/import/template/importTemplate.htm",[],function(){return'<input name="organization" class="" type="hidden" data-bind="value:organization"/>\n\n<fieldset class="group">\n    <legend class="">\n        <span>{{- i18n[\'import.file.name\'] }}</span>\n    </legend>\n    <label for="uploadFile">\n        <input name="file" class="upload-file" id="uploadFile" type="file"/>\n    </label>\n</fieldset>\n<fieldset class="group">\n    <legend class="">\n        <span>{{- i18n[\'import.options\'] }}</span>\n    </legend>\n    <ul class="list inputSet">\n        <li class="leaf">\n            <div class="control checkBox">\n                <label class="wrap" title="" for="update">{{- i18n[\'import.update\'] }}</label>\n                <input id="update" class="" type="checkbox" value="" name="update" data-bind="checked:update"/>\n            </div>\n            <ul class="list inputSet">\n                <li class="leaf">\n                    <div class="control checkBox">\n                        <label class="wrap" title="">{{- i18n[\'import.skip.user.update\']\n                            }}</label>\n                        <input id="skipUserUpdate" class="" type="checkbox" value="" name="skip-user-update"\n                               data-bind="checked:skipUserUpdate, enabled:update"/>\n                    </div>\n                </li>\n            </ul>\n        </li>\n\n        {{ if (model.includeAuditEvents) { }}\n        <li class="leaf">\n            <div class="control checkBox">\n                <label class="wrap" title="">{{- i18n[\'import.include.audit.events\']}}</label>\n                <input id="includeAuditEvents" class="" type="checkbox" name="include-audit-events"\n                       data-bind="checked:includeAuditEvents"/>\n            </div>\n        </li>\n\n        {{ } if (model.includeAccessEvents) { }}\n        <li class="leaf">\n            <div class="control checkBox">\n                <label class="wrap" title="">{{- i18n[\'import.include.access.events\']}}</label>\n                <input id="includeAccessEvents" class="" type="checkbox" value="" name="include-access-events"\n                       data-bind="checked:includeAccessEvents"/>\n            </div>\n        </li>\n\n        {{ } if (model.includeMonitoringEvents) { }}\n        <li class="leaf">\n            <div class="control checkBox">\n                <label class="wrap" title="">{{- i18n[\'import.include.monitoring.events\'] }}</label>\n                <input id="includeMonitoringEvents" class="" type="checkbox" value="" name="include-monitoring-events"\n                       data-bind="checked:includeMonitoringEvents"/>\n            </div>\n        </li>\n\n        {{ } if (model.includeServerSettings) { }}\n        <li class="leaf">\n            <div class="control checkBox">\n                <label class="wrap">{{- i18n[\'import.include.configuration.settings\']}}</label>\n                <input class="" type="checkbox" value="" name="include-server-settings"\n                       data-bind="checked:includeServerSettings"/>\n            </div>\n        </li>\n        {{ } if (typeof model.skipThemes !== "undefined") { }}\n\n        <li class="leaf">\n            <div class="control checkBox">\n                <label class="wrap" title="">{{- i18n[\'import.include.themes\']}}</label>\n                <input type="checkbox" value=""\n                       data-bind="checked:not(skipThemes)"/>\n                <input class="hidden" id="skip-themes" type="checkbox"  value="" name="skip-themes"\n                       data-bind="checked:skipThemes"/>\n            </div>\n        </li>\n        {{ } }}\n    </ul>\n</fieldset>\n\n<!-- Hack for correct sending of multipart/form-data in IE. -->\n<!-- Here is the fix https://blog.yorkxin.org/posts/2014/02/06/ajax-with-formdata-is-broken-on-ie10-ie11/ -->\n<input type="hidden" name="_dontcare">'}),define("tenantImportExport/import/view/ImportView",["require","css!importExport.css","jquery","underscore","backbone","../model/ImportModel","../model/ImportStateModel","../enum/importPendingStatesEnum","../enum/brokenDependencyStrategyEnum","../../export/view/LoadingDialog","./MergeTenantDialogView","./ImportDependentResourcesDialogView","./ImportWarningsDialogView","tenantImportExport/import/factory/warningsFactory","common/component/notification/Notification","common/view/mixin/epoxyViewMixin","text!tenantImportExport/import/template/importTemplate.htm","bundle!ImportExportBundle","bundle!CommonBundle"],function(e){"use strict";function t(){var e=this.stateModel.get("warnings");return a.map(e,function(e){return v(e)})}function i(e,i){i=i||"warning";var n=t.call(this);"import.finished"!==e||a.isEmpty(n)||this.warningsDialogView.open({items:n}),this.notification.show({delay:!1,message:y[e]||y["import.error.unexpected"],type:i}),this.trigger("import:finished",this.model.get("organization")),this.model.reset(this.type)}function n(){var e=this.stateModel.get("error");e.errorCode===d.BROKEN_DEPS?this.dependentResourcesDialogView.open({items:e.parameters}):e.errorCode===d.TENANT_MISMATCH&&this.mergeTenantDialogView.open({fileTenantId:e.parameters[0],selectedTenantId:this.model.get("organization")})}function s(e,t){return function(i){e.model.set("brokenDependencies",t),e.doImport()}}function o(e){this.model.cancel(),this.stateModel.set("phase",e)}e("css!importExport.css");var r=e("jquery"),a=e("underscore"),l=e("backbone"),h=e("../model/ImportModel"),c=e("../model/ImportStateModel"),d=e("../enum/importPendingStatesEnum"),p=e("../enum/brokenDependencyStrategyEnum"),u=e("../../export/view/LoadingDialog"),m=e("./MergeTenantDialogView"),f=e("./ImportDependentResourcesDialogView"),g=e("./ImportWarningsDialogView"),v=e("tenantImportExport/import/factory/warningsFactory"),b=e("common/component/notification/Notification"),w=e("common/view/mixin/epoxyViewMixin"),x=e("text!tenantImportExport/import/template/importTemplate.htm"),y=e("bundle!ImportExportBundle"),z=e("bundle!CommonBundle"),C=l.View.extend({tagName:"form",className:"import-view",id:"importDataFile",events:{"change input[type='file']":"validateFile","click .checkBox label":"_clickOnCheckbox"},initialize:function(){this.model||(this.model=new h(null,{form:this.el})),this.stateModel=new c,this.loadingDialog=new u({content:z["dialog.overlay.loading"]}),this.mergeTenantDialogView=new m,this.dependentResourcesDialogView=new f,this.warningsDialogView=new g,this.notification=new b,this.listenTo(this.stateModel,"change:phase",this._handleImportPhase,this);var e={delay:!1,message:y["import.error.cancelled"]},t={delay:!1,message:y["import.error.unexpected"]};this.listenTo(this.model,"change",this._onModelChange),this.listenTo(this.model,"error:notFound",a.bind(this.notification.show,this.notification,e)),this.listenTo(this.stateModel,"error:notFound",a.bind(this.notification.show,this.notification,e)),this.listenTo(this.model,"error:internalServerError",a.bind(this.notification.show,this.notification,t)),this.listenTo(this.stateModel,"error:internalServerError",a.bind(this.notification.show,this.notification,t)),this.listenTo(this.model,"error",a.bind(this.loadingDialog.close,this.loadingDialog)),this.listenTo(this.stateModel,"error",a.bind(this.loadingDialog.close,this.loadingDialog)),this.listenTo(this.mergeTenantDialogView,"button:import",function(){this.model.set("mergeOrganization",!0),this.doImport()},this),this.listenTo(this.mergeTenantDialogView,"button:cancel",a.bind(o,this,c.STATE.CANCELLED)),this.listenTo(this.dependentResourcesDialogView,"button:skip",s(this,p.SKIP)),this.listenTo(this.dependentResourcesDialogView,"button:include",s(this,p.INCLUDE)),this.listenTo(this.dependentResourcesDialogView,"button:cancel",a.bind(o,this,c.STATE.CANCELLED)),this.epoxifyView()},render:function(e){return this.type=e.type,this.model.reset(this.type,{organization:e.tenantId}),this.$el.html(a.template(x)({i18n:y,model:this.model.toJSON()})),this.applyEpoxyBindings(),this},validateFile:function(e){this.model.set("fileName",r(e.target).val());var t=r(e.target),i=t.parent();this.model.isValid(!0)?i.removeClass("error"):i.addClass("error")},doImport:function(){var e=this;this.loadingDialog.open(),this.model.isValid(!0)&&this.model.save().always(function(t){e.stateModel.set(t)})},_handleImportPhase:function(){var e=this.stateModel.get("phase");e!==c.STATE.INPROGRESS&&this.loadingDialog.close(),e===c.STATE.READY&&i.call(this,"import.finished","success")||e===c.STATE.FAILED&&i.call(this,this.stateModel.get("error").errorCode)||e===c.STATE.CANCELLED&&i.call(this,"import.error.cancelled")||e===c.STATE.PENDING&&n.call(this)},_clickOnCheckbox:function(e){var t=r(e.target).next();t[0].disabled||(t[0].checked=!t[0].checked,t.trigger("change"))},_onModelChange:function(){this.model.isValid(!0)}});return a.extend(C.prototype,w),C}),define("tenantImportExport/import/view/ImportPageView",["require","backbone","jrs.configs","./ImportView","tenantImportExport/export/enum/exportTypesEnum"],function(e){"use strict";var t=e("backbone"),i=e("jrs.configs"),n=e("./ImportView"),s=e("tenantImportExport/export/enum/exportTypesEnum");return t.View.extend({events:{"click #importButton":"doImport"},initialize:function(){this.importView=new n,this.importView.render({tenantId:i.isProVersion?"organizations":null,type:i.isProVersion?s.SERVER_PRO:s.SERVER_CE}),this.$el.find(".body").append(this.importView.el),this.listenTo(this.importView.model,"validated",function(e){var t=this.$("#importButton"),i=e?null:"disabled";t.attr("disabled",i)},this)},doImport:function(){this.importView.doImport()}})}),define("administer/administerImportMain",["require","!domReady","administer.logging","administer.base","jrs.configs","tenantImportExport/import/view/ImportPageView"],function(e){"use strict";var t=e("!domReady"),i=e("administer.logging"),n=e("administer.base"),s=e("jrs.configs"),o=e("tenantImportExport/import/view/ImportPageView");t(function(){n.urlContext=s.urlContext,i.initialize(),new o({el:document.getElementById("settings")})})});