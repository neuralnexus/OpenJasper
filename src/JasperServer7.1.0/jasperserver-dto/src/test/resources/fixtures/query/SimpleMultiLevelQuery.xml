<multiLevelQuery>
    <from>
        <dataSource>/path/to/ds</dataSource>
    </from>
    <limit>15</limit>
    <select>
        <aggregations>
            <aggregation>
                <expression>
                    <string>CountAll(open_date)</string>
                </expression>
                <fieldRef>open_date</fieldRef>
            </aggregation>
            <aggregation>
                <expression>
                    <string>Sum(calcField)</string>
                </expression>
                <fieldRef>calcField</fieldRef>
            </aggregation>
            <aggregation>
                <expression>
                    <string>CountDistinct(city)</string>
                </expression>
                <fieldRef>city</fieldRef>
            </aggregation>
            <aggregation>
                <expression>
                    <string>Sum(sales)</string>
                </expression>
                <fieldRef>sales</fieldRef>
            </aggregation>
        </aggregations>
        <fields>
            <field>
                <field>open_date</field>
            </field>
            <field>
                <field>calcField</field>
            </field>
            <field>
                <field>city</field>
                <id>city1</id>
            </field>
            <field>
                <field>sales</field>
            </field>
        </fields>
    </select>
    <groupBy>
        <group>
            <categorizer>year</categorizer>
            <field>open_date</field>
            <id>open_date1</id>
            <includeAll>true</includeAll>
        </group>
        <allGroup>
            <field>__allGroup__</field>
            <id>__allGroup__</id>
        </allGroup>
    </groupBy>
    <orderBy>
        <field>
            <ascending>true</ascending>
            <fieldRef>open_date1</fieldRef>
        </field>
        <field>
            <ascending>false</ascending>
            <fieldRef>country</fieldRef>
        </field>
        <field>
            <ascending>false</ascending>
            <fieldRef>city1</fieldRef>
        </field>
    </orderBy>
</multiLevelQuery>