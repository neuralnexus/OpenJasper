define("common/enum/httpStatusCodes",{100:"continue",101:"switchingProtocols",200:"ok",201:"created",202:"accepted",203:"nonAuthoritativeInformation",204:"noContent",205:"resetContent",206:"partialContent",300:"multipleChoices",301:"movedPermanently",302:"found",303:"seeOther",304:"notModified",305:"useProxy",307:"temporaryRedirect",400:"badRequest",401:"unauthorized",402:"paymentRequired",403:"forbidden",404:"notFound",405:"methodNotAllowed",406:"notAcceptable",407:"proxyAuthenticationRequired",408:"requestTimeout",409:"conflict",410:"gone",411:"lengthRequired",412:"preconditionFailed",413:"requestEntityTooLarge",414:"requestUriTooLong",415:"unsupportedMediaType",416:"requestedRangeNotSatisfiable",417:"expectationFailed",500:"internalServerError",501:"notImplemented",502:"badGateway",503:"serviceUnavailable",504:"gatewayTimeout",505:"httpVersionNotSupported"}),define("common/enum/errorCodes",["require"],function(e){"use strict";return{UNEXPECTED_ERROR:"unexpected.error",INVALID_RESOURCE_TYPE:"invalid.resource.type",ACCESS_DENIED:"access.denied"}}),define("common/model/BaseModel",["require","underscore","backbone","common/enum/httpStatusCodes","common/enum/errorCodes"],function(e){"use strict";var t=e("underscore"),i=e("backbone"),n=e("common/enum/httpStatusCodes"),a=e("common/enum/errorCodes"),s=i.Model.extend({initialize:function(){this.on("error",s.unifyServerErrors)},serialize:function(){return t.clone(this.attributes)}},{unifyServerErrors:function(e,t){var i=n[t.status],a=s.createServerError(t);e.trigger("error:"+i,e,a,t),e.trigger("error:all",e,a,t)},createServerError:function(e){var t;try{t=JSON.parse(e.responseText)}catch(e){t={message:"Can't parse server response",errorCode:a.UNEXPECTED_ERROR,parameters:[]}}return t}});return s}),define("bi/repository/model/RepositoryResourceModel",["require","jquery","underscore","common/model/BaseModel","backbone.validation","bundle!js-sdk/RepositoryResourceBundle","common/util/i18nMessage","common/enum/httpStatusCodes","request"],function(e){"use strict";function t(e,t,i,n,a){return l({type:t,dataType:"json",url:e.contextPath+"/rest_v2/resources"+i+"?overwrite="+n+"&createFolders="+a,headers:{Accept:"application/json","Content-Location":e.get("uri")}}).done(function(t){e.set("uri",t.uri)})}var i=e("jquery"),n=e("underscore"),a=e("common/model/BaseModel"),s=e("backbone.validation"),r=e("bundle!js-sdk/RepositoryResourceBundle"),o=e("common/util/i18nMessage").extend({bundle:r}),l=(e("common/enum/httpStatusCodes"),e("request")),c={LABEL_MAX_LENGTH:100,NAME_MAX_LENGTH:100,DESCRIPTION_MAX_LENGTH:250,NAME_NOT_SUPPORTED_SYMBOLS:"~!#\\$%^|\\s`@&*()\\-+={}\\[\\]:;\"'\\<\\>,?/\\|\\\\"},d=/application\/repository\.([^\+]+)\+json/,u=a.extend({idAttribute:"uri",type:void 0,urlRoot:function(){return(this.contextPath||"")+"/rest_v2/resources"},defaults:{name:void 0,parentFolderUri:void 0,uri:void 0,label:void 0,description:void 0,permissionMask:void 0,creationDate:void 0,updateDate:void 0,version:void 0},validation:{name:function(e,t,i){return e&&e.length>c.NAME_MAX_LENGTH?new o("error.field.max.length","name",c.NAME_MAX_LENGTH):e&&new RegExp("["+c.NAME_NOT_SUPPORTED_SYMBOLS+"]","g").test(e)?new o("error.field.bad.symbols","name",c.NAME_NOT_SUPPORTED_SYMBOLS):void 0},label:function(e,t,i){return n.isEmpty(e)?new o("error.field.required","label"):e.length>c.LABEL_MAX_LENGTH?new o("error.field.max.length","label",c.LABEL_MAX_LENGTH):void 0},description:function(e,t,i){if(e&&e.length>c.DESCRIPTION_MAX_LENGTH)return new o("error.field.max.length","description",c.DESCRIPTION_MAX_LENGTH)},parentFolderUri:[{required:!0,msg:new o("error.field.required","parentFolderUri")}]},url:function(){return this.isNew()?this.urlRoot()+encodeURI(this.get("parentFolderUri")):this.urlRoot()+encodeURI(this.id)},constructor:function(e,t){t||(t={}),n.defaults(t,{parse:!0}),a.call(this,e,t)},initialize:function(e,t){this.contextPath=t.contextPath,t.type&&(this.type=t.type),this.on("change:parentFolderUri change:name",this._updateUri),this.on("change:uri",this._updateNameAndParentFolderUri),a.prototype.initialize.apply(this,arguments)},clone:function(){return new this.constructor(this.attributes,{contextPath:this.contextPath})},parse:function(e){return void 0!==e.uri?(e.name=u.getNameFromUri(e.uri),e.parentFolderUri=u.getParentFolderFromUri(e.uri)):e.parentFolderUri&&e.name&&(e.uri=u.constructUri(e.parentFolderUri,e.name)),e},toJSON:function(){var e=this.serialize();return delete e.name,delete e.parentFolderUri,e},_updateUri:function(){var e=this.get("name"),t=this.get("parentFolderUri"),i=u.constructUri(t,e);i&&this.set("uri",i)},_updateNameAndParentFolderUri:function(){var e=this.get("uri"),t=u.getNameFromUri(e),i=u.getParentFolderFromUri(e);this.set({name:t,parentFolderUri:i})},fetch:function(e){return n.defaults(e||(e={}),{headers:{Accept:"application/json"}}),e.url=this.url()+"?expanded="+(!0===e.expanded),delete e.expanded,a.prototype.fetch.call(this,e)},sync:function(e,t,i){if("read"===e){var n=i.success,s=this;i.success=function(e,t,i){var a=i.getResponseHeader("Content-Type"),r=d.exec(a);if(!r||!r[1])throw new Error("Unsupported response content type: "+a);s.type=r[1],n&&n(e,t,i)}}return a.prototype.sync.call(this,e,t,i)},save:function(e,t,i){var s;if(n.isUndefined(e)||n.isNull(e)||n.isObject(e)?(s=e||{},i=t):(s={})[e]=t,!this.type)throw new Error("Resource type is unspecified. It's not possible to save a resource without it's type specified");return n.defaults(i||(i={}),{headers:{Accept:"application/json","Content-Type":"application/repository."+this.type+"+json; charset=UTF-8"}}),i=this._getSaveUrlOptions(i),a.prototype.save.call(this,s,i)},_getSaveUrlOptions:function(e){var t=this.url()+"?createFolders="+(!0===e.createFolders);return t+="&overwrite="+(!0===e.overwrite),t+="&expanded="+(!0===e.expanded),t+="&dry-run="+(!0===e.dryRun),e=n.omit(e,["createFolders","overwrite","expanded","dryRun"]),e=n.extend({},e,{url:t})},isWritable:function(){var e=this.get("permissionMask"),t=!1;return n.isUndefined(e)||(t=1===e||4&e),t},checkLabelExistenceOnServer:function(){var e=this.get("label"),t=this.get("parentFolderUri");return this.operationInProgress=i.Deferred(),l({type:"GET",dataType:"json",url:this.contextPath+"/rest_v2/resources?folderUri="+t+"&q="+encodeURIComponent(e)+"&recursive=false",headers:{Accept:"application/json"}}).done(this._checkLabelExistenceOnServerDone.bind(this)).fail(this._checkLabelExistenceOnServerFail.bind(this)),this.operationInProgress},_checkLabelExistenceOnServerDone:function(e,t,i){var n=[];e&&e.resourceLookup&&e.resourceLookup.length>0&&(n=e.resourceLookup),this.operationInProgress.resolve({foundResources:n})},_checkLabelExistenceOnServerFail:function(e){404===e.status?this.operationInProgress.resolve({foundResources:[]}):this.operationInProgress.reject(e)},copyTo:function(e,i,n){return t(this,"POST",e,!!i,arguments.length<3||n)},moveTo:function(e,i,n){return t(this,"PUT",e,!!i,arguments.length<3||n)}},{settings:c,getNameFromUri:function(e){if(e){var t=e.split("/");return t[t.length-1]}},getParentFolderFromUri:function(e){if(e){var t=e.split("/");return 2===t.length&&""!==t[1]?"/":t.slice(0,t.length-1).join("/")}},constructUri:function(e,t){if(t&&e)return-1!==e.indexOf("/",e.length-1)?e+t:e+"/"+t},generateResourceName:function(e){var t="";return e&&(t=e.replace(new RegExp("["+u.settings.NAME_NOT_SUPPORTED_SYMBOLS+"]","g"),"_")),t}});return n.extend(u.prototype,s.mixin),u}),define("bi/repository/enum/repositoryResourceTypes",{RESOURCE_LOOKUP:"resourceLookup",DASHBOARD:"dashboard",LEGACY_DASHBOARD:"legacyDashboard",REPORT_UNIT:"reportUnit",TOPIC:"topic",ADHOC_DATA_VIEW:"adhocDataView",FILE:"file",FOLDER:"folder",SECURE_FILE:"secureFile",PROP:"prop",ACCESS_GRANT_SCHEMA:"accessGrantSchema",DATA_TYPE:"dataType",JDBC_DATA_SOURCE:"jdbcDataSource",AWS_DATA_SOURCE:"awsDataSource",AZURE_SQL_DATA_SOURCE:"azureSqlDataSource",JNDI_DATA_SOURCE:"jndiJdbcDataSource",VIRTUAL_DATA_SOURCE:"virtualDataSource",CUSTOM_DATA_SOURCE:"customDataSource",BEAN_DATA_SOURCE:"beanDataSource",XMLA_CONNECTION:"xmlaConnection",LIST_OF_VALUES:"listOfValues",REPORT_OPTIONS:"reportOptions",QUERY:"query",OLAP_UNIT:"olapUnit",DOMAIN_TOPIC:"domainTopic",DOMAIN:"domain",SEMANTIC_LAYER_DATA_SOURCE:"semanticLayerDataSource",SECURE_MONDRIAN_CONNECTION:"secureMondrianConnection",MONDRIAN_XMLA_DEFINITION:"mondrianXmlaDefinition",MONDRIAN_CONNECTION:"mondrianConnection",INPUT_CONTROL:"inputControl",ORGANIZATION:"organization",OLAP_CUBE:"olapCube"}),define("dataSource/model/BaseDataSourceModel",["require","bi/repository/model/RepositoryResourceModel","underscore","jquery","backbone","jrs.configs"],function(e){"use strict";var t=e("bi/repository/model/RepositoryResourceModel"),i=e("underscore"),n=e("jquery"),a=e("backbone"),s=e("jrs.configs");return t.extend({defaults:function(){var e={};return i.extend(e,t.prototype.defaults,{connectionType:void 0}),e}(),validation:{},initialize:function(e,n){n=i.defaults(n||{},{contextPath:s.contextPath}),this.options=n,this.isNew()&&n.parentFolderUri&&this.set("parentFolderUri",n.parentFolderUri,{silent:!0});var a=n.parentFolderUri?n.parentFolderUri:e.parentFolderUri;e.name&&a&&!e.uri&&!0===n.isEditMode&&this.set("uri",t.constructUri(a,e.name),{silent:!0}),t.prototype.initialize.call(this,e,n)},testConnection:function(){if(this.validate(),this._isValid){var e=n.Deferred(),t=n("#"+ajax.LOADING_ID)[0],i=!1,r=window.setTimeout(function(){i=!0,dialogs.popup.show(t,!0)},AjaxRequester.prototype.MAX_WAIT_TIME),o=this.toJSON();return a.ajax({type:"POST",url:s.contextPath+"/rest_v2/connections",contentType:o.connectionType,headers:{Accept:"application/json"},data:JSON.stringify(o)}).always(function(){window.clearTimeout(r),i&&dialogs.popup.hide(t)}).done(e.resolve).fail(e.reject),e.promise()}}})}),define("common/util/featureDetection",[],function(){"use strict";return{supportsTouch:function(){return"ontouchstart"in window||navigator.msMaxTouchPoints}()}}),define("util/historyHelper",["require","utils.common","jrs.configs"],function(e){"use strict";e("utils.common");var t=e("jrs.configs");return{saveCurrent:function(e){new JSCookie(e,encodeURIComponent(document.location.href))},saveReferrer:function(e){-1===document.referrer.indexOf("login.html")&&new JSCookie(e,encodeURIComponent(document.referrer))},restore:function(e,i){var n=encodeURIComponent(document.location.href),a=new JSCookie(e).value;if(a&&a!==n){var s=decodeURIComponent(a);if(s)return void redirectToUrl(s)}i=i||"/",redirectToUrl(t.contextPath+i)}}}),define("text!dataSource/template/nameAndDescriptionTemplate.htm",[],function(){return'<fieldset class="group shortFields">\n\n    <js-templateNonce></js-templateNonce>\n\n    <legend class="offLeft"><span>{{- i18n[\'resource.dataSource.nameanddesc\']}}</span></legend>\n\n    <label title="{{- i18n[\'resource.dataSource.labelIDtitle\']}}" class="control input text ">\n        <span class="wrap">{{- i18n[\'resource.dataSource.name\']}} ({{- i18n[\'required.field\']}}):</span>\n        <input type="text" value="{{- modelAttributes.label }}" name="label">\n        <span class="message warning"></span>\n    </label>\n\n\n    <label title="{{- i18n[\'resource.dataSource.nameIDtitle\']}}" class="control input text ">\n        <span class="wrap">{{- i18n[\'resource.dataSource.resource\']}} ({{- i18n[\'required.field\']}}):</span>\n        <input type="text" {{ if (isEditMode) { }}readonly="readonly"{{ } }} value="{{- modelAttributes.name }}" name="name">\n        <span class="message warning"></span>\n    </label>\n\n\n    <label title="{{- i18n[\'resource.dataSource.descriptionTitle\']}}" class="control textArea">\n        <span class="wrap">{{- i18n[\'resource.dataSource.description\']}}</span>\n        <textarea type="text" name="description">{{- modelAttributes.description }}</textarea>\n        <span class="message warning"></span>\n    </label>\n\n</fieldset>'}),define("text!dataSource/template/saveLocationTemplate.htm",[],function(){return'<fieldset class="group">\n\n    <js-templateNonce></js-templateNonce>\n\n    <label title="{{- i18n[\'dialog.datasource.destination\']}}" class="control saveLocation browser">\n        <span class="wrap">{{- i18n[\'dialog.datasource.destination\']}} ({{- i18n[\'required.field\']}}):</span>\n        <input type="text" value="{{- modelAttributes.parentFolderUri }}" {{ if (isEditMode) { }}disabled="disabled"{{ } }} name="parentFolderUri" id="parentFolderUri">\n        <button class="button action" type="button" {{ if (isEditMode) { }}disabled="disabled"{{ } }} id="parentFolderUriBrowse">\n\t\t\t<span class="wrap">{{- i18n[\'dialog.file.browse\'] }}...\n\t\t\t\t<span class="icon"></span>\n\t\t\t</span>\n\t\t</button>\n        <span class="message warning"></span>\n    </label>\n\n</fieldset>'}),define("text!dataSource/template/timezoneTemplate.htm",[],function(){return'<fieldset class="group shortFields">\n\n    <js-templateNonce></js-templateNonce>\n    <label title="{{- i18n[\'resource.analysisConnection.timeZone\'] }}" class="control select">\n        <span class="wrap">{{- i18n["resource.dataSource.timezone"] }}</span>\n        <select class="fnormal timeZone" name="timezone">\n            <option {{ if (modelAttributes.timezone === "") { }}selected="selected"{{ } }} value="">{{- i18n["jsp.jdbcPropsForm.timezone.default.option"] }}</option>\n            {{ _.each(timezones, function(timezone) { }}\n            <option value="{{- timezone.code }}" {{ if (timezone.code === modelAttributes.timezone) { }}selected="selected"{{ } }}>\n                {{- i18n[\'timezone.option\'].replace(\'{0}\', timezone.code).replace(\'{1}\', timezone.description) }}\n            </option>\n            {{ }); }}\n        </select>\n        <span class="message warning"></span>\n        <span class="message hint">{{- i18n["resource.dataSource.hint3"] }}</span>\n    </label>\n</fieldset>'}),define("text!dataSource/template/dialog/selectFromRepository.htm",[],function(){return'<div id="ajaxbuffer" style="display:none">\n\n    <js-templateNonce></js-templateNonce>\n</div>\n<div id="{{- dialogId }}" class="panel dialog selectFromRepository overlay moveable sizeable centered_horz centered_vert hidden">\n\n    <div class="sizer diagonal"></div>\n\n    <div class="content hasFooter ">\n\n        <div class="header mover">\n            <div class="title">\n            </div>\n        </div>\n        <div class="body  ">\n\n            <div class="control groupBox fillParent">\n\n                <div class="content ">\n\n                    <div class="header ">\n                        <div class="title">\n                        </div>\n                    </div>\n\n                    <div class="body  ">\n                        <ul id="{{- treeId }}"></ul>\n                    </div>\n\n                </div>\n            </div>\n        </div>\n\n        <div class="footer ">\n\n            <button id="selectFromRepoBtnSelect" class="button action primary up"><span class="wrap">{{- i18n["button.select"] }}</span><span class="icon"></span></button>\n            <button id="selectFromRepoBtnCancel" class="button action up"><span class="wrap">{{- i18n["button.cancel"] }}</span><span class="icon"></span></button>\n\n        </div>\n\n    </div>\n</div>'}),define("text!dataSource/template/testConnectionTemplate.htm",[],function(){return'<fieldset class="group">\n\n    <js-templateNonce></js-templateNonce>\n\n    <span id="testDataSource" class="button action up"><span class="wrap">{{- i18n[\'button.testConnection\']}}</span></span>\n    <div class="message warning" name="testConnectionMessage">\n        <span></span>\n        <a class="details" name="testConnectionMessageDetails" href="#">{{- i18n[\'button.details\']}}</a>\n    </div>\n\n</fieldset>\n\n<br/>'}),define("dataSource/view/BaseDataSourceView",["require","jquery","underscore","bi/repository/model/RepositoryResourceModel","dataSource/model/BaseDataSourceModel","bundle!jasperserver_messages","settings!userTimeZones","backbone","text!dataSource/template/nameAndDescriptionTemplate.htm","text!dataSource/template/saveLocationTemplate.htm","text!dataSource/template/timezoneTemplate.htm","text!dataSource/template/dialog/selectFromRepository.htm","components.dialogs","text!dataSource/template/testConnectionTemplate.htm","backbone.validation"],function(e){"use strict";var t,i,n=e("jquery"),a=e("underscore"),s=e("bi/repository/model/RepositoryResourceModel"),r=e("dataSource/model/BaseDataSourceModel"),o=e("bundle!jasperserver_messages"),l=e("settings!userTimeZones"),c=e("backbone"),d=(e("text!dataSource/template/nameAndDescriptionTemplate.htm"),e("text!dataSource/template/saveLocationTemplate.htm"),e("text!dataSource/template/timezoneTemplate.htm")),u=(e("text!dataSource/template/dialog/selectFromRepository.htm"),e("components.dialogs")),h=e("text!dataSource/template/testConnectionTemplate.htm"),p=e("backbone.validation");return c.View.extend({PAGE_TITLE_NEW_MESSAGE_CODE:void 0,PAGE_TITLE_EDIT_MESSAGE_CODE:void 0,modelConstructor:r,events:{"keyup input[type='text'], input[type='password'], textarea, select":"updateModelProperty","change input[type='text'], input[type='password'], input[type='radio'], input[type='checkbox'], textarea, select":"updateModelProperty","click #testDataSource":"testConnection","click [name=testConnectionMessageDetails]":"showTestConnectionMessageDetails"},initialize:function(e){this.options=e,this.isEditMode=e.isEditMode,this.timezones=e.timezones?e.timezones:l;var t={};if(e.dataSource&&(t=a.extend(t,e.dataSource)),this.model=new this.modelConstructor(t,e),p.bind(this,{valid:this.fieldIsValid,invalid:this.fieldIsInvalid,forceUpdate:!0,selector:"name"}),this.model.initialization){var i=this;this.model.initialization.done(function(){i.render.apply(i)})}else this.render();this.setPageTitle()},testConnection:function(){if(!0!==t){var e,n,a=this.model.testConnection(),s=this;a&&(t=!0,n=s.$el.find("#testDataSource"),n.addClass("disabled"),e=this.$el.find("[name=testConnectionMessage]"),e.removeClass("warning success").addClass("hidden"),e.parent().addClass("error"),e.find("a").addClass("hidden"),a.done(function(){e.addClass("success").find("span").text(o["resource.dataSource.connectionState.passed"])}).fail(function(t){var n=s.getTestConnectionErrorMessage(t);e.addClass("warning").find("span").text(n.text),n.details&&(e.find("a").removeClass("hidden"),i=n.details)}).always(function(){t=!1,e.removeClass("hidden"),n.removeClass("disabled")}))}},showTestConnectionMessageDetails:function(){u.errorPopup.show(i)},getTestConnectionErrorMessage:function(e){var t=!1,i=o["resource.dataSource.connectionState.failed"],n=!1;try{t=JSON.parse(e.responseText)}catch(t){n=e.responseText}return t&&(t.parameters&&t.parameters[2]&&(i=t.parameters[2]),t.parameters&&t.parameters[3]&&(n=t.parameters[3])),{text:i,details:n}},updateModelProperty:function(e){var t=n(e.target),i={},a=t.attr("name"),r="checkbox"===t.attr("type")?t.is(":checked"):n.trim(t.val());if(i[a]=r,this.model.set(i),!this.isEditMode)if("name"===a){var o=s.generateResourceName(this.model.get("label"));r!==o&&(this._idUpdatedManually=!0)}else if("label"===a&&!this._idUpdatedManually){var l=s.generateResourceName(r);this.model.set("name",l),this.$("input[name='name']").val(l)}this.model.validate(i)},render:function(){return this.$el.empty(),this},renderTimezoneSection:function(){this.$el.append(a.template(d,this.templateData()))},renderTestConnectionSection:function(){this.$el.append(a.template(h,this.templateData()))},renderOrAddAnyBlock:function(e,t){if(a.isString(t)){try{t=n(t)}catch(e){t=!1}if(!t)return!1}var i=t.first().attr("name");return!!i&&(e.find("[name="+i+"]").length>0?e.find("[name="+i+"]").empty().append(t.children()):e.append(t),!0)},templateData:function(){return{_:a,i18n:o,modelAttributes:a.clone(this.model.attributes),timezones:this.timezones,isEditMode:this.isEditMode}},setPageTitle:function(){var e,t=n("#display .showingToolBar > .content > .header > .title");e=this.isEditMode?o[this.PAGE_TITLE_EDIT_MESSAGE_CODE]+": "+this.model.get("label"):o[this.PAGE_TITLE_NEW_MESSAGE_CODE],t.text(e)},fieldIsValid:function(e,t,i){var n=e.$("["+i+'="'+t+'"]').parent();n.removeClass("error"),n.find(".message.warning").text("")},fieldIsInvalid:function(e,t,i,n){if(!0!==i){var a=e.$("["+n+'="'+t+'"]').parent();a.addClass("error"),a.find(".message.warning").text(i)}},validField:function(e){var t=this.$(e).parent();t.removeClass("error"),t.find(".message.warning").text("")},invalidField:function(e,t){var i=this.$(e).parent();i.addClass("error"),i.find(".message.warning").text(t.toString())},remove:function(){return n("div[id^='selectFromRepository1'], div[id^='selectFromRepository2']").remove(),p.unbind(this),c.View.prototype.remove.call(this),this}})}),define("text!dataSource/template/customDataSourceTemplate.htm",[],function(){return'<fieldset name="customFieldsContainer" class="group shortFields">\n\n    <js-templateNonce></js-templateNonce>\n\n\t<legend class="offLeft"><span>{{- i18n[\'resource.dataSource.accessProp\']}}</span></legend>\n\n\t{{\n\n\tvar buildAttrs = function(attrs) {\n\t\treturn _.map(attrs, function(v, k){\n\t\t\tv = v.toString().replace(/"/g, "\\&quot\\;");\n\t\t\treturn k + \'="\' + _.xssHardEscape(v) + \'"\';\n\t\t}).join(" ");\n\t};\n\n\t_.each(customFields, function(field){\n\n\t\tvar\n\t\t\tattrs = {},\n\t\t\tlabel = i18n[field.label] || field.label;\n\n\t\tif (field.mandatory) {\n\t\t\tlabel = label + " (" + i18n["required.field"] + ")";\n\t\t}\n\t}}\n\n\t\t<label title="{{- label }}" class="control input text">\n\t\t\t<span class="wrap">{{- label }}:</span>\n\t\t\t{{\n\n\t\t\t\tvar properties = field.properties || {};\n                var value = modelAttributes[field.name] ? modelAttributes[field.name] : "";\n                if("password" === field.name && value !== ""){\n                    value = i18n[\'input.password.substitution\']\n                }\n\n\t\t\t\tif (properties.type === "boolean") {\n\t\t\t\t\tattrs.name = field.name;\n\t\t\t\t\tattrs.type = "checkbox";\n\t\t\t\t\tif (value == \'on\' || value == \'true\') {\n\t\t\t\t\t\tattrs.checked = "true";\n\t\t\t\t\t}\n\t\t\t\t\t}}\n\t\t\t\t\t<input {{ print(buildAttrs(attrs)) }} />\n\t\t\t\t\t{{\n\t\t\t\t} else if (properties.displayHeight != null) {\n\t\t\t\t\tattrs.name = field.name;\n\t\t\t\t\tattrs.rows = properties.displayHeight;\n\t\t\t\t\tattrs.cols = properties.displayWidth != null ? properties.displayWidth : 40;\n\t\t\t\t\tattrs["class"] = "fnormal";\n\t\t\t\t\t}}\n\t\t\t\t\t<textarea {{ print(buildAttrs(attrs)) }} >{{- value }}</textarea>\n\t\t\t\t\t{{\n\t\t\t\t} else {\n\t\t\t\t\tattrs.name = field.name;\n\t\t\t\t\tattrs.type = field.name === "password" ? "password" : "text";\n\t\t\t\t\tattrs.size = properties.displayWidth != null ? properties.displayWidth : 40;\n\t\t\t\t\tattrs["class"] = "fnormal";\n\t\t\t\t\tattrs.value = value;\n\t\t\t\t\t}}\n\t\t\t\t\t<input {{ print(buildAttrs(attrs)) }} />\n\t\t\t\t\t{{\n\t\t\t\t} }}\n\n\t\t\t<span class="message hint"></span>\n\t\t\t<span class="message warning"></span>\n\t\t</label>\n\n\t{{ }); }}\n\n</fieldset>\n'}),define("dataSource/enum/connectionTypes",{AWS:"application/repository.awsDataSource+json",AZURE_SQL:"application/repository.azureSqlDataSource+json",BEAN:"application/repository.beanDataSource+json",JDBC:"application/repository.jdbcDataSource+json",JNDI:"application/repository.jndiJdbcDataSource+json",VIRTUAL:"application/repository.virtualDataSource+json",MONGODB:"application/connections.mongodb+json",HIVE:"application/connections.hive+json",TEXT_FILE:"application/connections.txtFile+json",XLS_FILE:"application/connections.xlsFile+json",CUSTOM:"application/repository.customDataSource+json"}),define("text!common/templates/dialogErrorPopupTemplate.htm",[],function(){return"{{- message }}\n\n{{\nvar errorLbl = (typeof errorLabel !== 'undefined' ? errorLabel : 'The reason is');\n}}\n\n{{ if (typeof message2 !== 'undefined') { }}\n<br/>{{- errorLbl }}: {{- message2 }}\n{{ } else if (errorCode) { }}\n<br/>{{- errorLbl }}: {{- errorCode }}\n{{ } else if (errorMsg) { }}\n<br/>{{- errorLbl }}: {{- errorMsg }}\n{{ } }}\n\n{{ var respTextLbl = (typeof respTextLabel  !== 'undefined' ? respTextLabel : 'The full response from the server is') }}\n<br/><br/>{{- respTextLbl }}: {{- respText }}"}),define("dataSource/model/CustomDataSourceModel",["require","dataSource/model/BaseDataSourceModel","underscore","jquery","jrs.configs","requestSettings","dataSource/enum/connectionTypes","bi/repository/enum/repositoryResourceTypes","components.dialogs","bundle!all","bundle!jasperserver_config","text!common/templates/dialogErrorPopupTemplate.htm"],function(e){"use strict";var t=e("dataSource/model/BaseDataSourceModel"),i=e("underscore"),n=e("jquery"),a=e("jrs.configs"),s=e("requestSettings"),r=e("dataSource/enum/connectionTypes"),o=e("bi/repository/enum/repositoryResourceTypes"),l=e("components.dialogs"),c=e("bundle!all"),d=e("bundle!jasperserver_config"),u=e("text!common/templates/dialogErrorPopupTemplate.htm"),h=t.extend({type:o.CUSTOM_DATA_SOURCE,constructor:function(e,n){this.defaults=i.extend({},this.defaults,{dataSourceName:n.dataSourceType,connectionType:r.CUSTOM}),t.prototype.constructor.apply(this,arguments)},initialize:function(e,i){var a=t.prototype.initialize.apply(this,arguments);return this.customFields=[],this.testable=!1,this.queryTypes=null,this.initialization=n.Deferred(),this.getCustomFieldsDefinition(),a},getCustomFieldsDefinition:function(){var e={};return i.extend(e,s,{Accept:"application/json"}),n.ajax({type:"GET",headers:e,url:a.contextPath+"/rest_v2/customDataSources/"+this.get("dataSourceName")}).done(i.bind(this.getCustomFieldsDefinitionDone,this)).fail(i.bind(this.getCustomFieldsDefinitionFail,this))},getCustomFieldsDefinitionDone:function(e){var t=this;e&&e.propertyDefinitions&&i.isArray(e.propertyDefinitions)&&(this.resetValidation(),this.testable=!!e.testable,this.queryTypes=e.queryTypes?e.queryTypes:null,i.each(e.propertyDefinitions,function(e){var n={};e.properties&&(e.properties=i(e.properties).reduce(function(e,t){return e[t.key]=t.value,e},{})),t.customFields.push(e),t.defaults[e.name]=e.defaultValue,t.options.isEditMode||t.set(e.name,e.defaultValue),"password"===e.name&&t.options.isEditMode&&!t.isNew()&&t.set("password",d["input.password.substitution"]),e.properties&&e.properties.mandatory&&(n[e.name]={required:!0,msg:c[t.get("dataSourceName")+"."+e.name+".required"]||c["required.field.specify.value"]},i.extend(t.validation,n))})),this.options.isEditMode||this.set(this.parse(this.attributes),{silent:!0}),this.initialization.resolve()},getCustomFieldsDefinitionFail:function(e){var t=!1;try{t=JSON.parse(e.responseText)}catch(e){}var n=i.template(u,{message:"Failed to load custom data source definition. ",errorCode:t&&t[0]?t[0].errorCode:null,errorMsg:t&&t.message,respText:e.responseText});l.errorPopup.show(n)},parse:function(e){var n=t.prototype.parse.apply(this,arguments);return n=i.extend(n,this.parseProperties(e.properties)),delete e.properties,n},parseProperties:function(e){var t={};return i.isEmpty(e)||i.each(e,function(e){t[e.key]="password"===e.key?d["input.password.substitution"]:e.value}),t},toJSON:function(){var e=t.prototype.toJSON.apply(this,arguments);return this.customFieldsToJSON(e,this.customFields)},customFieldsToJSON:function(e,t){return i.isEmpty(t)||(e.properties=[],i.each(t,function(t){var n=e[t.name],a="password"===t.name;i.isUndefined(n)||(!a||a&&n!==d["input.password.substitution"])&&(e.properties.push({key:t.name,value:n}),delete e[t.name])})),e},resetValidation:function(){this.validation=i.clone(h.prototype.validation)}});return h}),define("dataSource/view/CustomDataSourceView",["require","underscore","jquery","bundle!all","dataSource/view/BaseDataSourceView","text!dataSource/template/customDataSourceTemplate.htm","dataSource/model/CustomDataSourceModel"],function(e){"use strict";var t=e("underscore"),i=e("jquery"),n=e("bundle!all"),a=e("dataSource/view/BaseDataSourceView"),s=e("text!dataSource/template/customDataSourceTemplate.htm"),r=e("dataSource/model/CustomDataSourceModel");return a.extend({PAGE_TITLE_NEW_MESSAGE_CODE:"resource.datasource.custom.page.title.new",PAGE_TITLE_EDIT_MESSAGE_CODE:"resource.datasource.custom.page.title.edit",modelConstructor:r,customFieldsTemplate:s,render:function(){return this.$el.empty(),this.renderCustomFieldsSection(),this.model.testable&&this.renderTestConnectionSection(),this},templateData:function(){return t.extend({},a.prototype.templateData.apply(this,arguments),{i18n:n,customFields:this.model.customFields})},renderCustomFieldsSection:function(){var e=t.template(this.customFieldsTemplate,this.templateData()),n=this.$el.find("[name=customFieldsContainer]");n.length>0?n.empty().append(i(e).children()):this.$el.append(e)}},{})}),define("dataSource/enum/dataSourceResourceTypes",{JDBC:"jdbcDataSource",AWS:"awsDataSource",AZURE_SQL:"azureSqlDataSource",JNDI:"jndiJdbcDataSource",VIRTUAL:"virtualDataSource",CUSTOM:"customDataSource",BEAN:"beanDataSource",MONGODB:"MongoDbDataSource",MONGODBJDBC:"mongoDbJDBCDataSource"}),define("dataSource/enum/customDataSourceTypes",{DIAGNOSTIC:"diagnosticCustomDataSource",HIVE:"HiveDataSource",MONGODB:"MongoDbDataSource",TEXT_FILE:"textDataSource"}),function(e){if("object"==typeof exports&&"undefined"!=typeof module)module.exports=e();else if("function"==typeof define&&define.amd)define("xregexp",[],e);else{var t;t="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:this,t.XRegExp=e()}}(function(){return function(){function e(t,i,n){function a(r,o){if(!i[r]){if(!t[r]){var l="function"==typeof require&&require;if(!o&&l)return l(r,!0);if(s)return s(r,!0);var c=new Error("Cannot find module '"+r+"'");throw c.code="MODULE_NOT_FOUND",c}var d=i[r]={exports:{}};t[r][0].call(d.exports,function(e){return a(t[r][1][e]||e)},d,d.exports,e,t,i,n)}return i[r].exports}for(var s="function"==typeof require&&require,r=0;r<n.length;r++)a(n[r]);return a}return e}()({1:[function(e,t,i){"use strict";Object.defineProperty(i,"__esModule",{value:!0}),i.default=void 0;var n=function(e){function t(e){var t=/^(?:\(\?:\))*\^/,i=/\$(?:\(\?:\))*$/;return t.test(e)&&i.test(e)&&i.test(e.replace(/\\[\s\S]/g,""))?e.replace(t,"").replace(i,""):e}function i(t,i){var n=i?"x":"";return e.isRegExp(t)?t[r]&&t[r].captureNames?t:e(t.source,n):e(t,n)}function n(t){return t instanceof RegExp?t:e.escape(t)}function a(e,t,i){return e["subpattern".concat(i)]=t,e}function s(e,t,i){return e+(t<i.length-1?"{{subpattern".concat(t,"}}"):"")}var r="xregexp",o=/(\()(?!\?)|\\([1-9]\d*)|\\[\s\S]|\[(?:[^\\\]]|\\[\s\S])*\]/g,l=e.union([/\({{([\w$]+)}}\)|{{([\w$]+)}}/,o],"g",{conjunction:"or"});e.tag=function(t){return function(i){for(var r=arguments.length,o=new Array(r>1?r-1:0),l=1;l<r;l++)o[l-1]=arguments[l];var c=o.map(n).reduce(a,{}),d=i.raw.map(s).join("");return e.build(d,c,t)}},e.build=function(n,a,s){s=s||"";var c=-1!==s.indexOf("x"),d=/^\(\?([\w$]+)\)/.exec(n);d&&(s=e._clipDuplicates(s+d[1]));var u={};for(var h in a)if(a.hasOwnProperty(h)){var p=i(a[h],c);u[h]={pattern:t(p.source),names:p[r].captureNames||[]}}var m,f=i(n,c),g=0,v=0,b=[0],S=f[r].captureNames||[],y=f.source.replace(l,function(e,t,i,n,a){var s,r,l,c=t||i;if(c){if(!u.hasOwnProperty(c))throw new ReferenceError("Undefined property ".concat(e));t?(s=S[v],b[++v]=++g,r="(?<".concat(s||c,">")):r="(?:",m=g;var d=u[c].pattern.replace(o,function(e,t,i){if(t){if(s=u[c].names[g-m],++g,s)return"(?<".concat(s,">")}else if(i)return l=+i-1,u[c].names[l]?"\\k<".concat(u[c].names[l],">"):"\\".concat(+i+m);return e});return"".concat(r).concat(d,")")}if(n){if(s=S[v],b[++v]=++g,s)return"(?<".concat(s,">")}else if(a)return l=+a-1,S[l]?"\\k<".concat(S[l],">"):"\\".concat(b[+a]);return e});return e(y,s)}};i.default=n,t.exports=i.default},{}],2:[function(e,t,i){"use strict";Object.defineProperty(i,"__esModule",{value:!0}),i.default=void 0
;var n=function(e){function t(e,t,i,n){return{name:e,value:t,start:i,end:n}}e.matchRecursive=function(i,n,a,s,r){s=s||"",r=r||{};var o,l,c,d,u,h=-1!==s.indexOf("g"),p=-1!==s.indexOf("y"),m=s.replace(/y/g,""),f=r,g=f.escapeChar,v=r.valueNames,b=[],S=0,y=0,_=0,T=0;if(n=e(n,m),a=e(a,m),g){if(g.length>1)throw new Error("Cannot use more than one escape character");g=e.escape(g),u=new RegExp("(?:".concat(g,"[\\S\\s]|(?:(?!").concat(e.union([n,a],"",{conjunction:"or"}).source,")[^").concat(g,"])+)+"),s.replace(/[^imu]+/g,""))}for(;;){if(g&&(_+=(e.exec(i,u,_,"sticky")||[""])[0].length),c=e.exec(i,n,_),d=e.exec(i,a,_),c&&d&&(c.index<=d.index?d=null:c=null),c||d)y=(c||d).index,_=y+(c||d)[0].length;else if(!S)break;if(p&&!S&&y>T)break;if(c)S||(o=y,l=_),++S;else{if(!d||!S)throw new Error("Unbalanced delimiter found in string");if(!--S&&(v?(v[0]&&o>T&&b.push(t(v[0],i.slice(T,o),T,o)),v[1]&&b.push(t(v[1],i.slice(o,l),o,l)),v[2]&&b.push(t(v[2],i.slice(l,y),l,y)),v[3]&&b.push(t(v[3],i.slice(y,_),y,_))):b.push(i.slice(l,y)),T=_,!h))break}y===_&&++_}return h&&!p&&v&&v[0]&&i.length>T&&b.push(t(v[0],i.slice(T),T,i.length)),b}};i.default=n,t.exports=i.default},{}],3:[function(e,t,i){"use strict";var n=e("@babel/runtime-corejs2/helpers/interopRequireDefault");Object.defineProperty(i,"__esModule",{value:!0}),i.default=void 0;var a=n(e("@babel/runtime-corejs2/core-js/get-iterator")),s=function(e){function t(e){return e.replace(/[- _]+/g,"").toLowerCase()}function i(e){var t=/^\\[xu](.+)/.exec(e);return t?c(t[1]):e.charCodeAt("\\"===e[0]?1:0)}function n(t){var n="",a=-1;return e.forEach(t,/(\\x..|\\u....|\\?[\s\S])(?:-(\\x..|\\u....|\\?[\s\S]))?/,function(e){var t=i(e[1]);t>a+1&&(n+="\\u".concat(u(d(a+1))),t>a+2&&(n+="-\\u".concat(u(d(t-1))))),a=i(e[2]||e[1])}),a<65535&&(n+="\\u".concat(u(d(a+1))),a<65534&&(n+="-\\uFFFF")),n}function s(e){return l[e]["b!"]||(l[e]["b!"]=n(l[e].bmp))}function r(e,t){var i=l[e],n="";return i.bmp&&!i.isBmpLast&&(n="[".concat(i.bmp,"]").concat(i.astral?"|":"")),i.astral&&(n+=i.astral),i.isBmpLast&&i.bmp&&(n+="".concat(i.astral?"|":"","[").concat(i.bmp,"]")),t?"(?:(?!".concat(n,")(?:[�-�][�-�]|[\0-￿]))"):"(?:".concat(n,")")}function o(e,t){var i=t?"a!":"a=";return l[e][i]||(l[e][i]=r(e,t))}var l={},c=e._dec,d=e._hex,u=e._pad4;e.addToken(/\\([pP])(?:{(\^?)([^}]*)}|([A-Za-z]))/,function(e,i,n){var a="P"===e[1]||!!e[2],r=-1!==n.indexOf("A"),c=t(e[4]||e[3]),d=l[c];if("P"===e[1]&&e[2])throw new SyntaxError("Invalid double negation "+e[0]);if(!l.hasOwnProperty(c))throw new SyntaxError("Unknown Unicode token "+e[0]);if(d.inverseOf){if(c=t(d.inverseOf),!l.hasOwnProperty(c))throw new ReferenceError("".concat("Unicode token missing data "+e[0]," -> ").concat(d.inverseOf));d=l[c],a=!a}if(!d.bmp&&!r)throw new SyntaxError("Astral mode required for Unicode token "+e[0]);if(r){if("class"===i)throw new SyntaxError("Astral mode does not support Unicode tokens within character classes");return o(c,a)}return"class"===i?a?s(c):d.bmp:"".concat((a?"[^":"[")+d.bmp,"]")},{scope:"all",optionalFlags:"A",leadChar:"\\"}),e.addUnicodeData=function(i){var n=!0,s=!1,r=void 0;try{for(var o,c=(0,a.default)(i);!(n=(o=c.next()).done);n=!0){var d=o.value;if(!d.name)throw new Error("Unicode token requires name");if(!(d.inverseOf||d.bmp||d.astral))throw new Error("Unicode token has no character data "+d.name);l[t(d.name)]=d,d.alias&&(l[t(d.alias)]=d)}}catch(e){s=!0,r=e}finally{try{n||null==c.return||c.return()}finally{if(s)throw r}}e.cache.flush("patterns")},e._getUnicodeProperty=function(e){var i=t(e);return l[i]}};i.default=s,t.exports=i.default},{"@babel/runtime-corejs2/core-js/get-iterator":11,"@babel/runtime-corejs2/helpers/interopRequireDefault":15}],4:[function(e,t,i){"use strict";var n=e("@babel/runtime-corejs2/helpers/interopRequireDefault");Object.defineProperty(i,"__esModule",{value:!0}),i.default=void 0;var a=n(e("../../tools/output/blocks")),s=function(e){if(!e.addUnicodeData)throw new ReferenceError("Unicode Base must be loaded before Unicode Blocks");e.addUnicodeData(a.default)};i.default=s,t.exports=i.default},{"../../tools/output/blocks":81,"@babel/runtime-corejs2/helpers/interopRequireDefault":15}],5:[function(e,t,i){"use strict";var n=e("@babel/runtime-corejs2/helpers/interopRequireDefault");Object.defineProperty(i,"__esModule",{value:!0}),i.default=void 0;var a=n(e("../../tools/output/categories")),s=function(e){if(!e.addUnicodeData)throw new ReferenceError("Unicode Base must be loaded before Unicode Categories");e.addUnicodeData(a.default)};i.default=s,t.exports=i.default},{"../../tools/output/categories":82,"@babel/runtime-corejs2/helpers/interopRequireDefault":15}],6:[function(e,t,i){"use strict";var n=e("@babel/runtime-corejs2/helpers/interopRequireDefault");Object.defineProperty(i,"__esModule",{value:!0}),i.default=void 0;var a=n(e("../../tools/output/properties")),s=function(e){if(!e.addUnicodeData)throw new ReferenceError("Unicode Base must be loaded before Unicode Properties");var t=a.default;t.push({name:"Assigned",inverseOf:"Cn"}),e.addUnicodeData(t)};i.default=s,t.exports=i.default},{"../../tools/output/properties":83,"@babel/runtime-corejs2/helpers/interopRequireDefault":15}],7:[function(e,t,i){"use strict";var n=e("@babel/runtime-corejs2/helpers/interopRequireDefault");Object.defineProperty(i,"__esModule",{value:!0}),i.default=void 0;var a=n(e("../../tools/output/scripts")),s=function(e){if(!e.addUnicodeData)throw new ReferenceError("Unicode Base must be loaded before Unicode Scripts");e.addUnicodeData(a.default)};i.default=s,t.exports=i.default},{"../../tools/output/scripts":84,"@babel/runtime-corejs2/helpers/interopRequireDefault":15}],8:[function(e,t,i){"use strict";var n=e("@babel/runtime-corejs2/helpers/interopRequireDefault");Object.defineProperty(i,"__esModule",{value:!0}),i.default=void 0;var a=n(e("./xregexp")),s=n(e("./addons/build")),r=n(e("./addons/matchrecursive")),o=n(e("./addons/unicode-base")),l=n(e("./addons/unicode-blocks")),c=n(e("./addons/unicode-categories")),d=n(e("./addons/unicode-properties")),u=n(e("./addons/unicode-scripts"));(0,s.default)(a.default),(0,r.default)(a.default),(0,o.default)(a.default),(0,l.default)(a.default),(0,c.default)(a.default),(0,d.default)(a.default),(0,u.default)(a.default);var h=a.default;i.default=h,t.exports=i.default},{"./addons/build":1,"./addons/matchrecursive":2,"./addons/unicode-base":3,"./addons/unicode-blocks":4,"./addons/unicode-categories":5,"./addons/unicode-properties":6,"./addons/unicode-scripts":7,"./xregexp":9,"@babel/runtime-corejs2/helpers/interopRequireDefault":15}],9:[function(e,t,i){"use strict";function n(e){var t=!0;try{new RegExp("",e)}catch(e){t=!1}return t}function a(e,t,i,n,a){if(e[I]={captureNames:t},a)return e;if(e.__proto__)e.__proto__=T.prototype;else for(var s in T.prototype)e[s]=T.prototype[s];return e[I].source=i,e[I].flags=n?n.split("").sort().join(""):n,e}function s(e){return M.replace.call(e,/([\s\S])(?=[\s\S]*\1)/g,"")}function r(e,t){if(!T.isRegExp(e))throw new TypeError("Type RegExp expected");var i=e[I]||{},n=c(e),r="",o="",l=null,u=null;return t=t||{},t.removeG&&(o+="g"),t.removeY&&(o+="y"),o&&(n=M.replace.call(n,new RegExp("[".concat(o,"]+"),"g"),"")),t.addG&&(r+="g"),t.addY&&(r+="y"),r&&(n=s(n+r)),t.isInternalOnly||(void 0!==i.source&&(l=i.source),null!=i.flags&&(u=r?s(i.flags+r):i.flags)),e=a(new RegExp(t.source||e.source,n),d(e)?i.captureNames.slice(0):null,l,u,t.isInternalOnly)}function o(e){return(0,x.default)(e,16)}function l(e,t,i){return"("===e.input[e.index-1]||")"===e.input[e.index+e[0].length]||"|"===e.input[e.index-1]||"|"===e.input[e.index+e[0].length]||e.index<1||e.index+e[0].length>=e.input.length||M.test.call(/^\(\?[:=!]/,e.input.substr(e.index-3,3))||h(e.input,e.index+e[0].length,i)?"":"(?:)"}function c(e){return z?e.flags:M.exec.call(/\/([a-z]*)$/i,RegExp.prototype.toString.call(e))[1]}function d(e){return!(!e[I]||!e[I].captureNames)}function u(e){return(0,x.default)(e,10).toString(16)}function h(e,t,i){return M.test.call(-1!==i.indexOf("x")?/^(?:\s|#[^#\n]*|\(\?#[^)]*\))*(?:[?*+]|{\d+(?:,\d*)?})/:/^(?:\(\?#[^)]*\))*(?:[?*+]|{\d+(?:,\d*)?})/,e.slice(t))}function p(e,t){return V.call(e)==="[object ".concat(t,"]")}function m(e){for(;e.length<4;)e="0".concat(e);return e}function f(e,t){if(s(t)!==t)throw new SyntaxError("Invalid duplicate regex flag ".concat(t));e=M.replace.call(e,/^\(\?([\w$]+)\)/,function(e,i){if(M.test.call(/[gy]/,i))throw new SyntaxError("Cannot use flag g or y in mode modifier ".concat(e));return t=s(t+i),""});var i=!0,n=!1,a=void 0;try{for(var r,o=(0,E.default)(t);!(i=(r=o.next()).done);i=!0){var l=r.value;if(!$[l])throw new SyntaxError("Unknown regex flag ".concat(l))}}catch(e){n=!0,a=e}finally{try{i||null==o.return||o.return()}finally{if(n)throw a}}return{pattern:e,flags:t}}function g(e){var t={};return p(e,"String")?(T.forEach(e,/[^\s,]+/,function(e){t[e]=!0}),t):e}function v(e){if(!/^[\w$]$/.test(e))throw new Error("Flag must be a single character A-Za-z0-9_$");$[e]=!0}function b(e,t,i,n,a){for(var s,r,o=O.length,l=e[i],c=null;o--;)if(r=O[o],!(r.leadChar&&r.leadChar!==l||r.scope!==n&&"all"!==r.scope||r.flag&&-1===t.indexOf(r.flag))&&(s=T.exec(e,r.regex,i,"sticky"))){c={matchLength:s[0].length,output:r.handler.call(a,s,n,t),reparse:r.reparse};break}return c}function S(e){N.astral=e}function y(e){N.namespacing=e}function _(e){if(null==e)throw new TypeError("Cannot convert null or undefined to object");return e}function T(e,t){if(T.isRegExp(e)){if(void 0!==t)throw new TypeError("Cannot supply flags when copying a RegExp");return r(e)}if(e=void 0===e?"":String(e),t=void 0===t?"":String(t),T.isInstalled("astral")&&-1===t.indexOf("A")&&(t+="A"),P[e]||(P[e]={}),!P[e][t]){for(var i,n={hasNamedCapture:!1,captureNames:[]},s=j,o="",l=0,c=f(e,t),d=c.pattern,u=c.flags;l<d.length;){do{(i=b(d,u,l,s,n))&&i.reparse&&(d=d.slice(0,l)+i.output+d.slice(l+i.matchLength))}while(i&&i.reparse);if(i)o+=i.output,l+=i.matchLength||1;else{var h=T.exec(d,k[s],l,"sticky"),p=(0,w.default)(h,1),m=p[0];o+=m,l+=m.length,"["===m&&s===j?s=R:"]"===m&&s===R&&(s=j)}}P[e][t]={pattern:M.replace.call(o,/(?:\(\?:\))+/g,"(?:)"),flags:M.replace.call(u,/[^gimuy]+/g,""),captures:n.hasNamedCapture?n.captureNames:null}}var g=P[e][t];return a(new RegExp(g.pattern,g.flags),g.captures,e,t)}var D=e("@babel/runtime-corejs2/helpers/interopRequireDefault");Object.defineProperty(i,"__esModule",{value:!0}),i.default=void 0;var C=D(e("@babel/runtime-corejs2/core-js/object/create")),w=D(e("@babel/runtime-corejs2/helpers/slicedToArray")),E=D(e("@babel/runtime-corejs2/core-js/get-iterator")),x=D(e("@babel/runtime-corejs2/core-js/parse-int")),I="xregexp",N={astral:!1,namespacing:!1},M={exec:RegExp.prototype.exec,test:RegExp.prototype.test,match:String.prototype.match,replace:String.prototype.replace,split:String.prototype.split},A={},L={},P={},O=[],j="default",R="class",k={default:/\\(?:0(?:[0-3][0-7]{0,2}|[4-7][0-7]?)?|[1-9]\d*|x[\dA-Fa-f]{2}|u(?:[\dA-Fa-f]{4}|{[\dA-Fa-f]+})|c[A-Za-z]|[\s\S])|\(\?(?:[:=!]|<[=!])|[?*+]\?|{\d+(?:,\d*)?}\??|[\s\S]/,class:/\\(?:[0-3][0-7]{0,2}|[4-7][0-7]?|x[\dA-Fa-f]{2}|u(?:[\dA-Fa-f]{4}|{[\dA-Fa-f]+})|c[A-Za-z]|[\s\S])|[\s\S]/},U=/\$(?:{([\w$]+)}|<([\w$]+)>|(\d\d?|[\s\S]))/g,F=void 0===M.exec.call(/()??/,"")[1],z=void 0!==/x/.flags,B={},V=B.toString,q=n("u"),H=n("y"),$={g:!0,i:!0,m:!0,u:q,y:H};T.prototype=/(?:)/,T.version="4.2.4",T._clipDuplicates=s,T._hasNativeFlag=n,T._dec=o,T._hex=u,T._pad4=m,T.addToken=function(e,t,i){i=i||{};var n=i,a=n.optionalFlags;if(i.flag&&v(i.flag),a){a=M.split.call(a,"");var s=!0,o=!1,l=void 0;try{for(var c,d=(0,E.default)(a);!(s=(c=d.next()).done);s=!0){v(c.value)}}catch(e){o=!0,l=e}finally{try{s||null==d.return||d.return()}finally{if(o)throw l}}}O.push({regex:r(e,{addG:!0,addY:H,isInternalOnly:!0}),handler:t,scope:i.scope||j,flag:i.flag,reparse:i.reparse,leadChar:i.leadChar}),T.cache.flush("patterns")},T.cache=function(e,t){return L[e]||(L[e]={}),L[e][t]||(L[e][t]=T(e,t))},T.cache.flush=function(e){"patterns"===e?P={}:L={}},T.escape=function(e){return M.replace.call(_(e),/[-\[\]{}()*+?.,\\^$|#\s]/g,"\\$&")},T.exec=function(e,t,i,n){var a,s="g",o=!1,l=!1;o=H&&!!(n||t.sticky&&!1!==n),o?s+="y":n&&(l=!0,s+="FakeY"),t[I]=t[I]||{};var c=t[I][s]||(t[I][s]=r(t,{addG:!0,addY:o,source:l?"".concat(t.source,"|()"):void 0,removeY:!1===n,isInternalOnly:!0}));return i=i||0,c.lastIndex=i,a=A.exec.call(c,e),l&&a&&""===a.pop()&&(a=null),t.global&&(t.lastIndex=a?c.lastIndex:0),a},T.forEach=function(e,t,i){for(var n,a=0,s=-1;n=T.exec(e,t,a);)i(n,++s,e,t),a=n.index+(n[0].length||1)},T.globalize=function(e){return r(e,{addG:!0})},T.install=function(e){e=g(e),!N.astral&&e.astral&&S(!0),!N.namespacing&&e.namespacing&&y(!0)},T.isInstalled=function(e){return!!N[e]},T.isRegExp=function(e){return"[object RegExp]"===V.call(e)},T.match=function(e,t,i){var n=t.global&&"one"!==i||"all"===i,a=(n?"g":"")+(t.sticky?"y":"")||"noGY";t[I]=t[I]||{};var s=t[I][a]||(t[I][a]=r(t,{addG:!!n,removeG:"one"===i,isInternalOnly:!0})),o=M.match.call(_(e),s);return t.global&&(t.lastIndex="one"===i&&o?o.index+o[0].length:0),n?o||[]:o&&o[0]},T.matchChain=function(e,t){return function e(i,n){function a(e){if(s.backref){var t="Backreference to undefined group: ".concat(s.backref),i=isNaN(s.backref);if(i&&T.isInstalled("namespacing")){if(!(s.backref in e.groups))throw new ReferenceError(t)}else if(!e.hasOwnProperty(s.backref))throw new ReferenceError(t);var n=i&&T.isInstalled("namespacing")?e.groups[s.backref]:e[s.backref];r.push(n||"")}else r.push(e[0])}var s=t[n].regex?t[n]:{regex:t[n]},r=[],o=!0,l=!1,c=void 0;try{for(var d,u=(0,E.default)(i);!(o=(d=u.next()).done);o=!0){var h=d.value;T.forEach(h,s.regex,a)}}catch(e){l=!0,c=e}finally{try{o||null==u.return||u.return()}finally{if(l)throw c}}return n!==t.length-1&&r.length?e(r,n+1):r}([e],0)},T.replace=function(e,t,i,n){var a=T.isRegExp(t),s=t.global&&"one"!==n||"all"===n,o=(s?"g":"")+(t.sticky?"y":"")||"noGY",l=t;a?(t[I]=t[I]||{},l=t[I][o]||(t[I][o]=r(t,{addG:!!s,removeG:"one"===n,isInternalOnly:!0}))):s&&(l=new RegExp(T.escape(String(t)),"g"));var c=A.replace.call(_(e),l,i);return a&&t.global&&(t.lastIndex=0),c},T.replaceEach=function(e,t){var i=!0,n=!1,a=void 0;try{for(var s,r=(0,E.default)(t);!(i=(s=r.next()).done);i=!0){var o=s.value;e=T.replace(e,o[0],o[1],o[2])}}catch(e){n=!0,a=e}finally{try{i||null==r.return||r.return()}finally{if(n)throw a}}return e},T.split=function(e,t,i){return A.split.call(_(e),t,i)},T.test=function(e,t,i,n){return!!T.exec(e,t,i,n)},T.uninstall=function(e){e=g(e),N.astral&&e.astral&&S(!1),N.namespacing&&e.namespacing&&y(!1)},T.union=function(e,t,i){function n(e,t,i){var n=s[o-a];if(t){if(++o,n)return"(?<".concat(n,">")}else if(i)return"\\".concat(+i+a);return e}i=i||{};var a,s,r=i.conjunction||"or",o=0;if(!p(e,"Array")||!e.length)throw new TypeError("Must provide a nonempty array of patterns to merge");var l=/(\()(?!\?)|\\([1-9]\d*)|\\[\s\S]|\[(?:[^\\\]]|\\[\s\S])*\]/g,c=[],d=!0,u=!1,h=void 0;try{for(var m,f=(0,E.default)(e);!(d=(m=f.next()).done);d=!0){var g=m.value;T.isRegExp(g)?(a=o,s=g[I]&&g[I].captureNames||[],c.push(M.replace.call(T(g.source).source,l,n))):c.push(T.escape(g))}}catch(e){u=!0,h=e}finally{try{d||null==f.return||f.return()}finally{if(u)throw h}}var v="none"===r?"":"|";return T(c.join(v),t)},A.exec=function(e){var t=this.lastIndex,i=M.exec.apply(this,arguments);if(i){if(!F&&i.length>1&&-1!==i.indexOf("")){var n=r(this,{removeG:!0,isInternalOnly:!0});M.replace.call(String(e).slice(i.index),n,function(){for(var e=arguments.length,t=1;t<e-2;++t)void 0===(t<0||arguments.length<=t?void 0:arguments[t])&&(i[t]=void 0)})}var a=i;if(T.isInstalled("namespacing")&&(i.groups=(0,C.default)(null),a=i.groups),this[I]&&this[I].captureNames)for(var s=1;s<i.length;++s){var o=this[I].captureNames[s-1];o&&(a[o]=i[s])}this.global&&!i[0].length&&this.lastIndex>i.index&&(this.lastIndex=i.index)}return this.global||(this.lastIndex=t),i},A.test=function(e){return!!A.exec.call(this,e)},A.match=function(e){if(T.isRegExp(e)){if(e.global){var t=M.match.apply(this,arguments);return e.lastIndex=0,t}}else e=new RegExp(e);return A.exec.call(e,_(this))},A.replace=function(e,t){var i,n,a,s=T.isRegExp(e);return s?(e[I]&&(n=e[I].captureNames),i=e.lastIndex):e+="",a=p(t,"Function")?M.replace.call(String(this),e,function(){for(var i=arguments.length,a=new Array(i),r=0;r<i;r++)a[r]=arguments[r];if(n){var o;T.isInstalled("namespacing")?(o=(0,C.default)(null),a.push(o)):(a[0]=new String(a[0]),o=a[0]);for(var l=0;l<n.length;++l)n[l]&&(o[n[l]]=a[l+1])}return s&&e.global&&(e.lastIndex=a[a.length-2]+a[0].length),t.apply(void 0,a)}):M.replace.call(null==this?this:String(this),e,function(){function e(e,t,i,s){if(t=t||i){var r=+t;if(r<=a.length-3)return a[r]||"";if((r=n?n.indexOf(t):-1)<0)throw new SyntaxError("Backreference to undefined group ".concat(e));return a[r+1]||""}if("$"===s)return"$";if("&"===s||0==+s)return a[0];if("`"===s)return a[a.length-1].slice(0,a[a.length-2]);if("'"===s)return a[a.length-1].slice(a[a.length-2]+a[0].length);if(s=+s,!isNaN(s)){if(s>a.length-3)throw new SyntaxError("Backreference to undefined group ".concat(e));return a[s]||""}throw new SyntaxError("Invalid token ".concat(e))}for(var i=arguments.length,a=new Array(i),s=0;s<i;s++)a[s]=arguments[s];return M.replace.call(String(t),U,e)}),s&&(e.global?e.lastIndex=0:e.lastIndex=i),a},A.split=function(e,t){if(!T.isRegExp(e))return M.split.apply(this,arguments);var i,n=String(this),a=[],s=e.lastIndex,r=0;return t=(void 0===t?-1:t)>>>0,T.forEach(n,e,function(e){e.index+e[0].length>r&&(a.push(n.slice(r,e.index)),e.length>1&&e.index<n.length&&Array.prototype.push.apply(a,e.slice(1)),i=e[0].length,r=e.index+i)}),r===n.length?M.test.call(e,"")&&!i||a.push(""):a.push(n.slice(r)),e.lastIndex=s,a.length>t?a.slice(0,t):a},T.addToken(/\\([ABCE-RTUVXYZaeg-mopqyz]|c(?![A-Za-z])|u(?![\dA-Fa-f]{4}|{[\dA-Fa-f]+})|x(?![\dA-Fa-f]{2}))/,function(e,t){if("B"===e[1]&&t===j)return e[0];throw new SyntaxError("Invalid escape ".concat(e[0]))},{scope:"all",leadChar:"\\"}),T.addToken(/\\u{([\dA-Fa-f]+)}/,function(e,t,i){var n=o(e[1]);if(n>1114111)throw new SyntaxError("Invalid Unicode code point ".concat(e[0]));if(n<=65535)return"\\u".concat(m(u(n)));if(q&&-1!==i.indexOf("u"))return e[0];throw new SyntaxError("Cannot use Unicode code point above \\u{FFFF} without flag u")},{scope:"all",leadChar:"\\"}),T.addToken(/\[(\^?)\]/,function(e){return e[1]?"[\\s\\S]":"\\b\\B"},{leadChar:"["}),T.addToken(/\(\?#[^)]*\)/,l,{leadChar:"("}),T.addToken(/\s+|#[^\n]*\n?/,l,{flag:"x"}),T.addToken(/\./,function(){return"[\\s\\S]"},{flag:"s",leadChar:"."}),T.addToken(/\\k<([\w$]+)>/,function(e){var t=isNaN(e[1])?this.captureNames.indexOf(e[1])+1:+e[1],i=e.index+e[0].length;if(!t||t>this.captureNames.length)throw new SyntaxError("Backreference to undefined group ".concat(e[0]));return"\\".concat(t).concat(i===e.input.length||isNaN(e.input[i])?"":"(?:)")},{leadChar:"\\"}),T.addToken(/\\(\d+)/,function(e,t){if(!(t===j&&/^[1-9]/.test(e[1])&&+e[1]<=this.captureNames.length)&&"0"!==e[1])throw new SyntaxError("Cannot use octal escape or backreference to undefined group ".concat(e[0]));return e[0]},{scope:"all",leadChar:"\\"}),T.addToken(/\(\?P?<([\w$]+)>/,function(e){if(!isNaN(e[1]))throw new SyntaxError("Cannot use integer as capture name ".concat(e[0]));if(!T.isInstalled("namespacing")&&("length"===e[1]||"__proto__"===e[1]))throw new SyntaxError("Cannot use reserved word as capture name ".concat(e[0]));if(-1!==this.captureNames.indexOf(e[1]))throw new SyntaxError("Cannot use same name for multiple groups ".concat(e[0]));return this.captureNames.push(e[1]),this.hasNamedCapture=!0,"("},{leadChar:"("}),T.addToken(/\((?!\?)/,function(e,t,i){return-1!==i.indexOf("n")?"(?:":(this.captureNames.push(null),"(")},{optionalFlags:"n",leadChar:"("});var W=T;i.default=W,t.exports=i.default},{"@babel/runtime-corejs2/core-js/get-iterator":11,"@babel/runtime-corejs2/core-js/object/create":12,"@babel/runtime-corejs2/core-js/parse-int":13,"@babel/runtime-corejs2/helpers/interopRequireDefault":15,"@babel/runtime-corejs2/helpers/slicedToArray":18}],10:[function(e,t,i){t.exports=e("core-js/library/fn/array/is-array")},{"core-js/library/fn/array/is-array":19}],11:[function(e,t,i){t.exports=e("core-js/library/fn/get-iterator")},{"core-js/library/fn/get-iterator":20}],12:[function(e,t,i){t.exports=e("core-js/library/fn/object/create")},{"core-js/library/fn/object/create":21}],13:[function(e,t,i){t.exports=e("core-js/library/fn/parse-int")},{"core-js/library/fn/parse-int":22}],14:[function(e,t,i){function n(e){if(a(e))return e}var a=e("../core-js/array/is-array");t.exports=n},{"../core-js/array/is-array":10}],15:[function(e,t,i){function n(e){return e&&e.__esModule?e:{default:e}}t.exports=n},{}],16:[function(e,t,i){function n(e,t){var i=[],n=!0,s=!1,r=void 0;try{for(var o,l=a(e);!(n=(o=l.next()).done)&&(i.push(o.value),!t||i.length!==t);n=!0);}catch(e){s=!0,r=e}finally{try{n||null==l.return||l.return()}finally{if(s)throw r}}return i}var a=e("../core-js/get-iterator");t.exports=n},{"../core-js/get-iterator":11}],17:[function(e,t,i){function n(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}t.exports=n},{}],18:[function(e,t,i){function n(e,t){return a(e)||s(e,t)||r()}var a=e("./arrayWithHoles"),s=e("./iterableToArrayLimit"),r=e("./nonIterableRest");t.exports=n},{"./arrayWithHoles":14,"./iterableToArrayLimit":16,"./nonIterableRest":17}],19:[function(e,t,i){e("../../modules/es6.array.is-array"),t.exports=e("../../modules/_core").Array.isArray},{"../../modules/_core":29,"../../modules/es6.array.is-array":75}],20:[function(e,t,i){e("../modules/web.dom.iterable"),e("../modules/es6.string.iterator"),t.exports=e("../modules/core.get-iterator")},{"../modules/core.get-iterator":74,"../modules/es6.string.iterator":79,"../modules/web.dom.iterable":80}],21:[function(e,t,i){e("../../modules/es6.object.create");var n=e("../../modules/_core").Object;t.exports=function(e,t){return n.create(e,t)}},{"../../modules/_core":29,"../../modules/es6.object.create":77}],22:[function(e,t,i){e("../modules/es6.parse-int"),t.exports=e("../modules/_core").parseInt},{"../modules/_core":29,"../modules/es6.parse-int":78}],23:[function(e,t,i){t.exports=function(e){if("function"!=typeof e)throw TypeError(e+" is not a function!");return e}},{}],24:[function(e,t,i){t.exports=function(){}},{}],25:[function(e,t,i){var n=e("./_is-object");t.exports=function(e){if(!n(e))throw TypeError(e+" is not an object!");return e}},{"./_is-object":44}],26:[function(e,t,i){var n=e("./_to-iobject"),a=e("./_to-length"),s=e("./_to-absolute-index");t.exports=function(e){return function(t,i,r){var o,l=n(t),c=a(l.length),d=s(r,c);if(e&&i!=i){for(;c>d;)if((o=l[d++])!=o)return!0}else for(;c>d;d++)if((e||d in l)&&l[d]===i)return e||d||0;return!e&&-1}}},{"./_to-absolute-index":65,"./_to-iobject":67,"./_to-length":68}],27:[function(e,t,i){var n=e("./_cof"),a=e("./_wks")("toStringTag"),s="Arguments"==n(function(){return arguments}()),r=function(e,t){try{return e[t]}catch(e){}};t.exports=function(e){var t,i,o;return void 0===e?"Undefined":null===e?"Null":"string"==typeof(i=r(t=Object(e),a))?i:s?n(t):"Object"==(o=n(t))&&"function"==typeof t.callee?"Arguments":o}},{"./_cof":28,"./_wks":72}],28:[function(e,t,i){var n={}.toString;t.exports=function(e){return n.call(e).slice(8,-1)}},{}],29:[function(e,t,i){var n=t.exports={version:"2.6.1"};"number"==typeof __e&&(__e=n)},{}],30:[function(e,t,i){var n=e("./_a-function");t.exports=function(e,t,i){if(n(e),void 0===t)return e;switch(i){case 1:return function(i){return e.call(t,i)};case 2:return function(i,n){return e.call(t,i,n)};case 3:return function(i,n,a){return e.call(t,i,n,a)}}return function(){return e.apply(t,arguments)}}},{"./_a-function":23}],31:[function(e,t,i){t.exports=function(e){if(void 0==e)throw TypeError("Can't call method on  "+e);return e}},{}],32:[function(e,t,i){t.exports=!e("./_fails")(function(){return 7!=Object.defineProperty({},"a",{get:function(){return 7}}).a})},{"./_fails":36}],33:[function(e,t,i){var n=e("./_is-object"),a=e("./_global").document,s=n(a)&&n(a.createElement);t.exports=function(e){return s?a.createElement(e):{}}},{"./_global":37,"./_is-object":44}],34:[function(e,t,i){t.exports="constructor,hasOwnProperty,isPrototypeOf,propertyIsEnumerable,toLocaleString,toString,valueOf".split(",")},{}],35:[function(e,t,i){var n=e("./_global"),a=e("./_core"),s=e("./_ctx"),r=e("./_hide"),o=e("./_has"),l=function(e,t,i){var c,d,u,h=e&l.F,p=e&l.G,m=e&l.S,f=e&l.P,g=e&l.B,v=e&l.W,b=p?a:a[t]||(a[t]={}),S=b.prototype,y=p?n:m?n[t]:(n[t]||{}).prototype;p&&(i=t);for(c in i)(d=!h&&y&&void 0!==y[c])&&o(b,c)||(u=d?y[c]:i[c],b[c]=p&&"function"!=typeof y[c]?i[c]:g&&d?s(u,n):v&&y[c]==u?function(e){var t=function(t,i,n){if(this instanceof e){switch(arguments.length){case 0:return new e;case 1:return new e(t);case 2:return new e(t,i)}return new e(t,i,n)}return e.apply(this,arguments)};return t.prototype=e.prototype,t}(u):f&&"function"==typeof u?s(Function.call,u):u,f&&((b.virtual||(b.virtual={}))[c]=u,e&l.R&&S&&!S[c]&&r(S,c,u)))};l.F=1,l.G=2,l.S=4,l.P=8,l.B=16,l.W=32,l.U=64,l.R=128,t.exports=l},{"./_core":29,"./_ctx":30,"./_global":37,"./_has":38,"./_hide":39}],36:[function(e,t,i){t.exports=function(e){try{return!!e()}catch(e){return!0}}},{}],37:[function(e,t,i){var n=t.exports="undefined"!=typeof window&&window.Math==Math?window:"undefined"!=typeof self&&self.Math==Math?self:Function("return this")();"number"==typeof __g&&(__g=n)},{}],38:[function(e,t,i){var n={}.hasOwnProperty;t.exports=function(e,t){return n.call(e,t)}},{}],39:[function(e,t,i){var n=e("./_object-dp"),a=e("./_property-desc");t.exports=e("./_descriptors")?function(e,t,i){return n.f(e,t,a(1,i))}:function(e,t,i){return e[t]=i,e}},{"./_descriptors":32,"./_object-dp":51,"./_property-desc":57}],40:[function(e,t,i){var n=e("./_global").document;t.exports=n&&n.documentElement},{"./_global":37}],41:[function(e,t,i){t.exports=!e("./_descriptors")&&!e("./_fails")(function(){return 7!=Object.defineProperty(e("./_dom-create")("div"),"a",{get:function(){return 7}}).a})},{"./_descriptors":32,"./_dom-create":33,"./_fails":36}],42:[function(e,t,i){var n=e("./_cof");t.exports=Object("z").propertyIsEnumerable(0)?Object:function(e){return"String"==n(e)?e.split(""):Object(e)}},{"./_cof":28}],43:[function(e,t,i){var n=e("./_cof");t.exports=Array.isArray||function(e){return"Array"==n(e)}},{"./_cof":28}],44:[function(e,t,i){t.exports=function(e){return"object"==typeof e?null!==e:"function"==typeof e}},{}],45:[function(e,t,i){"use strict";var n=e("./_object-create"),a=e("./_property-desc"),s=e("./_set-to-string-tag"),r={};e("./_hide")(r,e("./_wks")("iterator"),function(){return this}),t.exports=function(e,t,i){e.prototype=n(r,{next:a(1,i)}),s(e,t+" Iterator")}},{"./_hide":39,"./_object-create":50,"./_property-desc":57,"./_set-to-string-tag":59,"./_wks":72}],46:[function(e,t,i){"use strict";var n=e("./_library"),a=e("./_export"),s=e("./_redefine"),r=e("./_hide"),o=e("./_iterators"),l=e("./_iter-create"),c=e("./_set-to-string-tag"),d=e("./_object-gpo"),u=e("./_wks")("iterator"),h=!([].keys&&"next"in[].keys()),p=function(){return this};t.exports=function(e,t,i,m,f,g,v){l(i,t,m);var b,S,y,_=function(e){if(!h&&e in w)return w[e];switch(e){case"keys":case"values":return function(){return new i(this,e)}}return function(){return new i(this,e)}},T=t+" Iterator",D="values"==f,C=!1,w=e.prototype,E=w[u]||w["@@iterator"]||f&&w[f],x=E||_(f),I=f?D?_("entries"):x:void 0,N="Array"==t?w.entries||E:E;if(N&&(y=d(N.call(new e)))!==Object.prototype&&y.next&&(c(y,T,!0),n||"function"==typeof y[u]||r(y,u,p)),D&&E&&"values"!==E.name&&(C=!0,x=function(){return E.call(this)}),n&&!v||!h&&!C&&w[u]||r(w,u,x),o[t]=x,o[T]=p,f)if(b={values:D?x:_("values"),keys:g?x:_("keys"),entries:I},v)for(S in b)S in w||s(w,S,b[S]);else a(a.P+a.F*(h||C),t,b);return b}},{"./_export":35,"./_hide":39,"./_iter-create":45,"./_iterators":48,"./_library":49,"./_object-gpo":53,"./_redefine":58,"./_set-to-string-tag":59,"./_wks":72}],47:[function(e,t,i){t.exports=function(e,t){return{value:t,done:!!e}}},{}],48:[function(e,t,i){t.exports={}},{}],49:[function(e,t,i){t.exports=!0},{}],50:[function(e,t,i){var n=e("./_an-object"),a=e("./_object-dps"),s=e("./_enum-bug-keys"),r=e("./_shared-key")("IE_PROTO"),o=function(){},l=function(){var t,i=e("./_dom-create")("iframe"),n=s.length;for(i.style.display="none",e("./_html").appendChild(i),i.src="javascript:",t=i.contentWindow.document,t.open(),t.write("<script>document.F=Object<\/script>"),t.close(),l=t.F;n--;)delete l.prototype[s[n]];return l()};t.exports=Object.create||function(e,t){var i;return null!==e?(o.prototype=n(e),i=new o,o.prototype=null,i[r]=e):i=l(),void 0===t?i:a(i,t)}},{"./_an-object":25,"./_dom-create":33,"./_enum-bug-keys":34,"./_html":40,"./_object-dps":52,"./_shared-key":60}],51:[function(e,t,i){var n=e("./_an-object"),a=e("./_ie8-dom-define"),s=e("./_to-primitive"),r=Object.defineProperty;i.f=e("./_descriptors")?Object.defineProperty:function(e,t,i){if(n(e),t=s(t,!0),n(i),a)try{return r(e,t,i)}catch(e){}if("get"in i||"set"in i)throw TypeError("Accessors not supported!");return"value"in i&&(e[t]=i.value),e}},{"./_an-object":25,"./_descriptors":32,"./_ie8-dom-define":41,"./_to-primitive":70}],52:[function(e,t,i){var n=e("./_object-dp"),a=e("./_an-object"),s=e("./_object-keys");t.exports=e("./_descriptors")?Object.defineProperties:function(e,t){a(e);for(var i,r=s(t),o=r.length,l=0;o>l;)n.f(e,i=r[l++],t[i]);return e}},{"./_an-object":25,"./_descriptors":32,"./_object-dp":51,"./_object-keys":55}],53:[function(e,t,i){var n=e("./_has"),a=e("./_to-object"),s=e("./_shared-key")("IE_PROTO"),r=Object.prototype;t.exports=Object.getPrototypeOf||function(e){return e=a(e),n(e,s)?e[s]:"function"==typeof e.constructor&&e instanceof e.constructor?e.constructor.prototype:e instanceof Object?r:null}},{"./_has":38,"./_shared-key":60,"./_to-object":69}],54:[function(e,t,i){var n=e("./_has"),a=e("./_to-iobject"),s=e("./_array-includes")(!1),r=e("./_shared-key")("IE_PROTO");t.exports=function(e,t){var i,o=a(e),l=0,c=[];for(i in o)i!=r&&n(o,i)&&c.push(i);for(;t.length>l;)n(o,i=t[l++])&&(~s(c,i)||c.push(i));return c}},{"./_array-includes":26,"./_has":38,"./_shared-key":60,"./_to-iobject":67}],55:[function(e,t,i){var n=e("./_object-keys-internal"),a=e("./_enum-bug-keys");t.exports=Object.keys||function(e){return n(e,a)}},{"./_enum-bug-keys":34,"./_object-keys-internal":54}],56:[function(e,t,i){var n=e("./_global").parseInt,a=e("./_string-trim").trim,s=e("./_string-ws"),r=/^[-+]?0[xX]/;t.exports=8!==n(s+"08")||22!==n(s+"0x16")?function(e,t){var i=a(String(e),3);return n(i,t>>>0||(r.test(i)?16:10))}:n},{"./_global":37,"./_string-trim":63,"./_string-ws":64}],57:[function(e,t,i){t.exports=function(e,t){return{enumerable:!(1&e),configurable:!(2&e),writable:!(4&e),value:t}}},{}],58:[function(e,t,i){t.exports=e("./_hide")},{"./_hide":39}],59:[function(e,t,i){var n=e("./_object-dp").f,a=e("./_has"),s=e("./_wks")("toStringTag");t.exports=function(e,t,i){e&&!a(e=i?e:e.prototype,s)&&n(e,s,{configurable:!0,value:t})}},{"./_has":38,"./_object-dp":51,"./_wks":72}],60:[function(e,t,i){var n=e("./_shared")("keys"),a=e("./_uid");t.exports=function(e){return n[e]||(n[e]=a(e))}},{"./_shared":61,"./_uid":71}],61:[function(e,t,i){var n=e("./_core"),a=e("./_global"),s=a["__core-js_shared__"]||(a["__core-js_shared__"]={});(t.exports=function(e,t){return s[e]||(s[e]=void 0!==t?t:{})})("versions",[]).push({version:n.version,mode:e("./_library")?"pure":"global",copyright:"© 2018 Denis Pushkarev (zloirock.ru)"})},{"./_core":29,"./_global":37,"./_library":49}],62:[function(e,t,i){var n=e("./_to-integer"),a=e("./_defined");t.exports=function(e){return function(t,i){var s,r,o=String(a(t)),l=n(i),c=o.length;return l<0||l>=c?e?"":void 0:(s=o.charCodeAt(l),s<55296||s>56319||l+1===c||(r=o.charCodeAt(l+1))<56320||r>57343?e?o.charAt(l):s:e?o.slice(l,l+2):r-56320+(s-55296<<10)+65536)}}},{"./_defined":31,"./_to-integer":66}],63:[function(e,t,i){
var n=e("./_export"),a=e("./_defined"),s=e("./_fails"),r=e("./_string-ws"),o="["+r+"]",l="​",c=RegExp("^"+o+o+"*"),d=RegExp(o+o+"*$"),u=function(e,t,i){var a={},o=s(function(){return!!r[e]()||l[e]()!=l}),c=a[e]=o?t(h):r[e];i&&(a[i]=c),n(n.P+n.F*o,"String",a)},h=u.trim=function(e,t){return e=String(a(e)),1&t&&(e=e.replace(c,"")),2&t&&(e=e.replace(d,"")),e};t.exports=u},{"./_defined":31,"./_export":35,"./_fails":36,"./_string-ws":64}],64:[function(e,t,i){t.exports="\t\n\v\f\r   ᠎             　\u2028\u2029\ufeff"},{}],65:[function(e,t,i){var n=e("./_to-integer"),a=Math.max,s=Math.min;t.exports=function(e,t){return e=n(e),e<0?a(e+t,0):s(e,t)}},{"./_to-integer":66}],66:[function(e,t,i){var n=Math.ceil,a=Math.floor;t.exports=function(e){return isNaN(e=+e)?0:(e>0?a:n)(e)}},{}],67:[function(e,t,i){var n=e("./_iobject"),a=e("./_defined");t.exports=function(e){return n(a(e))}},{"./_defined":31,"./_iobject":42}],68:[function(e,t,i){var n=e("./_to-integer"),a=Math.min;t.exports=function(e){return e>0?a(n(e),9007199254740991):0}},{"./_to-integer":66}],69:[function(e,t,i){var n=e("./_defined");t.exports=function(e){return Object(n(e))}},{"./_defined":31}],70:[function(e,t,i){var n=e("./_is-object");t.exports=function(e,t){if(!n(e))return e;var i,a;if(t&&"function"==typeof(i=e.toString)&&!n(a=i.call(e)))return a;if("function"==typeof(i=e.valueOf)&&!n(a=i.call(e)))return a;if(!t&&"function"==typeof(i=e.toString)&&!n(a=i.call(e)))return a;throw TypeError("Can't convert object to primitive value")}},{"./_is-object":44}],71:[function(e,t,i){var n=0,a=Math.random();t.exports=function(e){return"Symbol(".concat(void 0===e?"":e,")_",(++n+a).toString(36))}},{}],72:[function(e,t,i){var n=e("./_shared")("wks"),a=e("./_uid"),s=e("./_global").Symbol,r="function"==typeof s;(t.exports=function(e){return n[e]||(n[e]=r&&s[e]||(r?s:a)("Symbol."+e))}).store=n},{"./_global":37,"./_shared":61,"./_uid":71}],73:[function(e,t,i){var n=e("./_classof"),a=e("./_wks")("iterator"),s=e("./_iterators");t.exports=e("./_core").getIteratorMethod=function(e){if(void 0!=e)return e[a]||e["@@iterator"]||s[n(e)]}},{"./_classof":27,"./_core":29,"./_iterators":48,"./_wks":72}],74:[function(e,t,i){var n=e("./_an-object"),a=e("./core.get-iterator-method");t.exports=e("./_core").getIterator=function(e){var t=a(e);if("function"!=typeof t)throw TypeError(e+" is not iterable!");return n(t.call(e))}},{"./_an-object":25,"./_core":29,"./core.get-iterator-method":73}],75:[function(e,t,i){var n=e("./_export");n(n.S,"Array",{isArray:e("./_is-array")})},{"./_export":35,"./_is-array":43}],76:[function(e,t,i){"use strict";var n=e("./_add-to-unscopables"),a=e("./_iter-step"),s=e("./_iterators"),r=e("./_to-iobject");t.exports=e("./_iter-define")(Array,"Array",function(e,t){this._t=r(e),this._i=0,this._k=t},function(){var e=this._t,t=this._k,i=this._i++;return!e||i>=e.length?(this._t=void 0,a(1)):"keys"==t?a(0,i):"values"==t?a(0,e[i]):a(0,[i,e[i]])},"values"),s.Arguments=s.Array,n("keys"),n("values"),n("entries")},{"./_add-to-unscopables":24,"./_iter-define":46,"./_iter-step":47,"./_iterators":48,"./_to-iobject":67}],77:[function(e,t,i){var n=e("./_export");n(n.S,"Object",{create:e("./_object-create")})},{"./_export":35,"./_object-create":50}],78:[function(e,t,i){var n=e("./_export"),a=e("./_parse-int");n(n.G+n.F*(parseInt!=a),{parseInt:a})},{"./_export":35,"./_parse-int":56}],79:[function(e,t,i){"use strict";var n=e("./_string-at")(!0);e("./_iter-define")(String,"String",function(e){this._t=String(e),this._i=0},function(){var e,t=this._t,i=this._i;return i>=t.length?{value:void 0,done:!0}:(e=n(t,i),this._i+=e.length,{value:e,done:!1})})},{"./_iter-define":46,"./_string-at":62}],80:[function(e,t,i){e("./es6.array.iterator");for(var n=e("./_global"),a=e("./_hide"),s=e("./_iterators"),r=e("./_wks")("toStringTag"),o="CSSRuleList,CSSStyleDeclaration,CSSValueList,ClientRectList,DOMRectList,DOMStringList,DOMTokenList,DataTransferItemList,FileList,HTMLAllCollection,HTMLCollection,HTMLFormElement,HTMLSelectElement,MediaList,MimeTypeArray,NamedNodeMap,NodeList,PaintRequestList,Plugin,PluginArray,SVGLengthList,SVGNumberList,SVGPathSegList,SVGPointList,SVGStringList,SVGTransformList,SourceBufferList,StyleSheetList,TextTrackCueList,TextTrackList,TouchList".split(","),l=0;l<o.length;l++){var c=o[l],d=n[c],u=d&&d.prototype;u&&!u[r]&&a(u,r,c),s[c]=s.Array}},{"./_global":37,"./_hide":39,"./_iterators":48,"./_wks":72,"./es6.array.iterator":76}],81:[function(e,t,i){t.exports=[{name:"InAdlam",astral:"�[�-�]"},{name:"InAegean_Numbers",astral:"�[�-�]"},{name:"InAhom",astral:"�[�-�]"},{name:"InAlchemical_Symbols",astral:"�[�-�]"},{name:"InAlphabetic_Presentation_Forms",bmp:"ﬀ-ﭏ"},{name:"InAnatolian_Hieroglyphs",astral:"�[�-�]"},{name:"InAncient_Greek_Musical_Notation",astral:"�[�-�]"},{name:"InAncient_Greek_Numbers",astral:"�[�-�]"},{name:"InAncient_Symbols",astral:"�[�-�]"},{name:"InArabic",bmp:"؀-ۿ"},{name:"InArabic_Extended_A",bmp:"ࢠ-ࣿ"},{name:"InArabic_Mathematical_Alphabetic_Symbols",astral:"�[�-�]"},{name:"InArabic_Presentation_Forms_A",bmp:"ﭐ-﷿"},{name:"InArabic_Presentation_Forms_B",bmp:"ﹰ-\ufeff"},{name:"InArabic_Supplement",bmp:"ݐ-ݿ"},{name:"InArmenian",bmp:"԰-֏"},{name:"InArrows",bmp:"←-⇿"},{name:"InAvestan",astral:"�[�-�]"},{name:"InBalinese",bmp:"ᬀ-᭿"},{name:"InBamum",bmp:"ꚠ-꛿"},{name:"InBamum_Supplement",astral:"�[�-�]"},{name:"InBasic_Latin",bmp:"\0-"},{name:"InBassa_Vah",astral:"�[�-�]"},{name:"InBatak",bmp:"ᯀ-᯿"},{name:"InBengali",bmp:"ঀ-৿"},{name:"InBhaiksuki",astral:"�[�-�]"},{name:"InBlock_Elements",bmp:"▀-▟"},{name:"InBopomofo",bmp:"㄀-ㄯ"},{name:"InBopomofo_Extended",bmp:"ㆠ-ㆿ"},{name:"InBox_Drawing",bmp:"─-╿"},{name:"InBrahmi",astral:"�[�-�]"},{name:"InBraille_Patterns",bmp:"⠀-⣿"},{name:"InBuginese",bmp:"ᨀ-᨟"},{name:"InBuhid",bmp:"ᝀ-᝟"},{name:"InByzantine_Musical_Symbols",astral:"�[�-�]"},{name:"InCJK_Compatibility",bmp:"㌀-㏿"},{name:"InCJK_Compatibility_Forms",bmp:"︰-﹏"},{name:"InCJK_Compatibility_Ideographs",bmp:"豈-﫿"},{name:"InCJK_Compatibility_Ideographs_Supplement",astral:"�[�-�]"},{name:"InCJK_Radicals_Supplement",bmp:"⺀-⻿"},{name:"InCJK_Strokes",bmp:"㇀-㇯"},{name:"InCJK_Symbols_And_Punctuation",bmp:"　-〿"},{name:"InCJK_Unified_Ideographs",bmp:"一-鿿"},{name:"InCJK_Unified_Ideographs_Extension_A",bmp:"㐀-䶿"},{name:"InCJK_Unified_Ideographs_Extension_B",astral:"[�-�][�-�]|�[�-�]"},{name:"InCJK_Unified_Ideographs_Extension_C",astral:"�[�-�]|[�-�][�-�]|�[�-�]"},{name:"InCJK_Unified_Ideographs_Extension_D",astral:"�[�-�]|�[�-�]"},{name:"InCJK_Unified_Ideographs_Extension_E",astral:"�[�-�]|[�-�][�-�]|�[�-�]"},{name:"InCJK_Unified_Ideographs_Extension_F",astral:"�[�-�]|[�-�][�-�]|�[�-�]"},{name:"InCarian",astral:"�[�-�]"},{name:"InCaucasian_Albanian",astral:"�[�-�]"},{name:"InChakma",astral:"�[�-�]"},{name:"InCham",bmp:"ꨀ-꩟"},{name:"InCherokee",bmp:"Ꭰ-᏿"},{name:"InCherokee_Supplement",bmp:"ꭰ-ꮿ"},{name:"InChess_Symbols",astral:"�[�-�]"},{name:"InCombining_Diacritical_Marks",bmp:"̀-ͯ"},{name:"InCombining_Diacritical_Marks_Extended",bmp:"᪰-᫿"},{name:"InCombining_Diacritical_Marks_For_Symbols",bmp:"⃐-⃿"},{name:"InCombining_Diacritical_Marks_Supplement",bmp:"᷀-᷿"},{name:"InCombining_Half_Marks",bmp:"︠-︯"},{name:"InCommon_Indic_Number_Forms",bmp:"꠰-꠿"},{name:"InControl_Pictures",bmp:"␀-␿"},{name:"InCoptic",bmp:"Ⲁ-⳿"},{name:"InCoptic_Epact_Numbers",astral:"�[�-�]"},{name:"InCounting_Rod_Numerals",astral:"�[�-�]"},{name:"InCuneiform",astral:"�[�-�]"},{name:"InCuneiform_Numbers_And_Punctuation",astral:"�[�-�]"},{name:"InCurrency_Symbols",bmp:"₠-⃏"},{name:"InCypriot_Syllabary",astral:"�[�-�]"},{name:"InCyrillic",bmp:"Ѐ-ӿ"},{name:"InCyrillic_Extended_A",bmp:"ⷠ-ⷿ"},{name:"InCyrillic_Extended_B",bmp:"Ꙁ-ꚟ"},{name:"InCyrillic_Extended_C",bmp:"ᲀ-᲏"},{name:"InCyrillic_Supplement",bmp:"Ԁ-ԯ"},{name:"InDeseret",astral:"�[�-�]"},{name:"InDevanagari",bmp:"ऀ-ॿ"},{name:"InDevanagari_Extended",bmp:"꣠-ꣿ"},{name:"InDingbats",bmp:"✀-➿"},{name:"InDogra",astral:"�[�-�]"},{name:"InDomino_Tiles",astral:"�[�-�]"},{name:"InDuployan",astral:"�[�-�]"},{name:"InEarly_Dynastic_Cuneiform",astral:"�[�-�]"},{name:"InEgyptian_Hieroglyphs",astral:"�[�-�]|�[�-�]"},{name:"InElbasan",astral:"�[�-�]"},{name:"InEmoticons",astral:"�[�-�]"},{name:"InEnclosed_Alphanumeric_Supplement",astral:"�[�-�]"},{name:"InEnclosed_Alphanumerics",bmp:"①-⓿"},{name:"InEnclosed_CJK_Letters_And_Months",bmp:"㈀-㋿"},{name:"InEnclosed_Ideographic_Supplement",astral:"�[�-�]"},{name:"InEthiopic",bmp:"ሀ-፿"},{name:"InEthiopic_Extended",bmp:"ⶀ-⷟"},{name:"InEthiopic_Extended_A",bmp:"꬀-꬯"},{name:"InEthiopic_Supplement",bmp:"ᎀ-᎟"},{name:"InGeneral_Punctuation",bmp:" -⁯"},{name:"InGeometric_Shapes",bmp:"■-◿"},{name:"InGeometric_Shapes_Extended",astral:"�[�-�]"},{name:"InGeorgian",bmp:"Ⴀ-ჿ"},{name:"InGeorgian_Extended",bmp:"Ა-Ჿ"},{name:"InGeorgian_Supplement",bmp:"ⴀ-⴯"},{name:"InGlagolitic",bmp:"Ⰰ-ⱟ"},{name:"InGlagolitic_Supplement",astral:"�[�-�]"},{name:"InGothic",astral:"�[�-�]"},{name:"InGrantha",astral:"�[�-�]"},{name:"InGreek_And_Coptic",bmp:"Ͱ-Ͽ"},{name:"InGreek_Extended",bmp:"ἀ-῿"},{name:"InGujarati",bmp:"઀-૿"},{name:"InGunjala_Gondi",astral:"�[�-�]"},{name:"InGurmukhi",bmp:"਀-੿"},{name:"InHalfwidth_And_Fullwidth_Forms",bmp:"＀-￯"},{name:"InHangul_Compatibility_Jamo",bmp:"㄰-㆏"},{name:"InHangul_Jamo",bmp:"ᄀ-ᇿ"},{name:"InHangul_Jamo_Extended_A",bmp:"ꥠ-꥿"},{name:"InHangul_Jamo_Extended_B",bmp:"ힰ-퟿"},{name:"InHangul_Syllables",bmp:"가-힯"},{name:"InHanifi_Rohingya",astral:"�[�-�]"},{name:"InHanunoo",bmp:"ᜠ-᜿"},{name:"InHatran",astral:"�[�-�]"},{name:"InHebrew",bmp:"֐-׿"},{name:"InHigh_Private_Use_Surrogates",bmp:"�-�"},{name:"InHigh_Surrogates",bmp:"�-�"},{name:"InHiragana",bmp:"぀-ゟ"},{name:"InIPA_Extensions",bmp:"ɐ-ʯ"},{name:"InIdeographic_Description_Characters",bmp:"⿰-⿿"},{name:"InIdeographic_Symbols_And_Punctuation",astral:"�[�-�]"},{name:"InImperial_Aramaic",astral:"�[�-�]"},{name:"InIndic_Siyaq_Numbers",astral:"�[�-�]"},{name:"InInscriptional_Pahlavi",astral:"�[�-�]"},{name:"InInscriptional_Parthian",astral:"�[�-�]"},{name:"InJavanese",bmp:"ꦀ-꧟"},{name:"InKaithi",astral:"�[�-�]"},{name:"InKana_Extended_A",astral:"�[�-�]"},{name:"InKana_Supplement",astral:"�[�-�]"},{name:"InKanbun",bmp:"㆐-㆟"},{name:"InKangxi_Radicals",bmp:"⼀-⿟"},{name:"InKannada",bmp:"ಀ-೿"},{name:"InKatakana",bmp:"゠-ヿ"},{name:"InKatakana_Phonetic_Extensions",bmp:"ㇰ-ㇿ"},{name:"InKayah_Li",bmp:"꤀-꤯"},{name:"InKharoshthi",astral:"�[�-�]"},{name:"InKhmer",bmp:"ក-៿"},{name:"InKhmer_Symbols",bmp:"᧠-᧿"},{name:"InKhojki",astral:"�[�-�]"},{name:"InKhudawadi",astral:"�[�-�]"},{name:"InLao",bmp:"຀-໿"},{name:"InLatin_1_Supplement",bmp:"-ÿ"},{name:"InLatin_Extended_A",bmp:"Ā-ſ"},{name:"InLatin_Extended_Additional",bmp:"Ḁ-ỿ"},{name:"InLatin_Extended_B",bmp:"ƀ-ɏ"},{name:"InLatin_Extended_C",bmp:"Ⱡ-Ɀ"},{name:"InLatin_Extended_D",bmp:"꜠-ꟿ"},{name:"InLatin_Extended_E",bmp:"ꬰ-꭯"},{name:"InLepcha",bmp:"ᰀ-ᱏ"},{name:"InLetterlike_Symbols",bmp:"℀-⅏"},{name:"InLimbu",bmp:"ᤀ-᥏"},{name:"InLinear_A",astral:"�[�-�]"},{name:"InLinear_B_Ideograms",astral:"�[�-�]"},{name:"InLinear_B_Syllabary",astral:"�[�-�]"},{name:"InLisu",bmp:"ꓐ-꓿"},{name:"InLow_Surrogates",bmp:"�-�"},{name:"InLycian",astral:"�[�-�]"},{name:"InLydian",astral:"�[�-�]"},{name:"InMahajani",astral:"�[�-�]"},{name:"InMahjong_Tiles",astral:"�[�-�]"},{name:"InMakasar",astral:"�[�-�]"},{name:"InMalayalam",bmp:"ഀ-ൿ"},{name:"InMandaic",bmp:"ࡀ-࡟"},{name:"InManichaean",astral:"�[�-�]"},{name:"InMarchen",astral:"�[�-�]"},{name:"InMasaram_Gondi",astral:"�[�-�]"},{name:"InMathematical_Alphanumeric_Symbols",astral:"�[�-�]"},{name:"InMathematical_Operators",bmp:"∀-⋿"},{name:"InMayan_Numerals",astral:"�[�-�]"},{name:"InMedefaidrin",astral:"�[�-�]"},{name:"InMeetei_Mayek",bmp:"ꯀ-꯿"},{name:"InMeetei_Mayek_Extensions",bmp:"ꫠ-꫿"},{name:"InMende_Kikakui",astral:"�[�-�]"},{name:"InMeroitic_Cursive",astral:"�[�-�]"},{name:"InMeroitic_Hieroglyphs",astral:"�[�-�]"},{name:"InMiao",astral:"�[�-�]"},{name:"InMiscellaneous_Mathematical_Symbols_A",bmp:"⟀-⟯"},{name:"InMiscellaneous_Mathematical_Symbols_B",bmp:"⦀-⧿"},{name:"InMiscellaneous_Symbols",bmp:"☀-⛿"},{name:"InMiscellaneous_Symbols_And_Arrows",bmp:"⬀-⯿"},{name:"InMiscellaneous_Symbols_And_Pictographs",astral:"�[�-�]|�[�-�]"},{name:"InMiscellaneous_Technical",bmp:"⌀-⏿"},{name:"InModi",astral:"�[�-�]"},{name:"InModifier_Tone_Letters",bmp:"꜀-ꜟ"},{name:"InMongolian",bmp:"᠀-᢯"},{name:"InMongolian_Supplement",astral:"�[�-�]"},{name:"InMro",astral:"�[�-�]"},{name:"InMultani",astral:"�[�-�]"},{name:"InMusical_Symbols",astral:"�[�-�]"},{name:"InMyanmar",bmp:"က-႟"},{name:"InMyanmar_Extended_A",bmp:"ꩠ-ꩿ"},{name:"InMyanmar_Extended_B",bmp:"ꧠ-꧿"},{name:"InNKo",bmp:"߀-߿"},{name:"InNabataean",astral:"�[�-�]"},{name:"InNew_Tai_Lue",bmp:"ᦀ-᧟"},{name:"InNewa",astral:"�[�-�]"},{name:"InNumber_Forms",bmp:"⅐-↏"},{name:"InNushu",astral:"�[�-�]"},{name:"InOgham",bmp:" -᚟"},{name:"InOl_Chiki",bmp:"᱐-᱿"},{name:"InOld_Hungarian",astral:"�[�-�]"},{name:"InOld_Italic",astral:"�[�-�]"},{name:"InOld_North_Arabian",astral:"�[�-�]"},{name:"InOld_Permic",astral:"�[�-�]"},{name:"InOld_Persian",astral:"�[�-�]"},{name:"InOld_Sogdian",astral:"�[�-�]"},{name:"InOld_South_Arabian",astral:"�[�-�]"},{name:"InOld_Turkic",astral:"�[�-�]"},{name:"InOptical_Character_Recognition",bmp:"⑀-⑟"},{name:"InOriya",bmp:"଀-୿"},{name:"InOrnamental_Dingbats",astral:"�[�-�]"},{name:"InOsage",astral:"�[�-�]"},{name:"InOsmanya",astral:"�[�-�]"},{name:"InPahawh_Hmong",astral:"�[�-�]"},{name:"InPalmyrene",astral:"�[�-�]"},{name:"InPau_Cin_Hau",astral:"�[�-�]"},{name:"InPhags_Pa",bmp:"ꡀ-꡿"},{name:"InPhaistos_Disc",astral:"�[�-�]"},{name:"InPhoenician",astral:"�[�-�]"},{name:"InPhonetic_Extensions",bmp:"ᴀ-ᵿ"},{name:"InPhonetic_Extensions_Supplement",bmp:"ᶀ-ᶿ"},{name:"InPlaying_Cards",astral:"�[�-�]"},{name:"InPrivate_Use_Area",bmp:"-"},{name:"InPsalter_Pahlavi",astral:"�[�-�]"},{name:"InRejang",bmp:"ꤰ-꥟"},{name:"InRumi_Numeral_Symbols",astral:"�[�-�]"},{name:"InRunic",bmp:"ᚠ-᛿"},{name:"InSamaritan",bmp:"ࠀ-࠿"},{name:"InSaurashtra",bmp:"ꢀ-꣟"},{name:"InSharada",astral:"�[�-�]"},{name:"InShavian",astral:"�[�-�]"},{name:"InShorthand_Format_Controls",astral:"�[�-�]"},{name:"InSiddham",astral:"�[�-�]"},{name:"InSinhala",bmp:"඀-෿"},{name:"InSinhala_Archaic_Numbers",astral:"�[�-�]"},{name:"InSmall_Form_Variants",bmp:"﹐-﹯"},{name:"InSogdian",astral:"�[�-�]"},{name:"InSora_Sompeng",astral:"�[�-�]"},{name:"InSoyombo",astral:"�[�-�]"},{name:"InSpacing_Modifier_Letters",bmp:"ʰ-˿"},{name:"InSpecials",bmp:"￰-￿"},{name:"InSundanese",bmp:"ᮀ-ᮿ"},{name:"InSundanese_Supplement",bmp:"᳀-᳏"},{name:"InSuperscripts_And_Subscripts",bmp:"⁰-₟"},{name:"InSupplemental_Arrows_A",bmp:"⟰-⟿"},{name:"InSupplemental_Arrows_B",bmp:"⤀-⥿"},{name:"InSupplemental_Arrows_C",astral:"�[�-�]"},{name:"InSupplemental_Mathematical_Operators",bmp:"⨀-⫿"},{name:"InSupplemental_Punctuation",bmp:"⸀-⹿"},{name:"InSupplemental_Symbols_And_Pictographs",astral:"�[�-�]"},{name:"InSupplementary_Private_Use_Area_A",astral:"[�-�][�-�]"},{name:"InSupplementary_Private_Use_Area_B",astral:"[�-�][�-�]"},{name:"InSutton_SignWriting",astral:"�[�-�]"},{name:"InSyloti_Nagri",bmp:"ꠀ-꠯"},{name:"InSyriac",bmp:"܀-ݏ"},{name:"InSyriac_Supplement",bmp:"ࡠ-࡯"},{name:"InTagalog",bmp:"ᜀ-ᜟ"},{name:"InTagbanwa",bmp:"ᝠ-᝿"},{name:"InTags",astral:"�[�-�]"},{name:"InTai_Le",bmp:"ᥐ-᥿"},{name:"InTai_Tham",bmp:"ᨠ-᪯"},{name:"InTai_Viet",bmp:"ꪀ-꫟"},{name:"InTai_Xuan_Jing_Symbols",astral:"�[�-�]"},{name:"InTakri",astral:"�[�-�]"},{name:"InTamil",bmp:"஀-௿"},{name:"InTangut",astral:"[�-�][�-�]"},{name:"InTangut_Components",astral:"�[�-�]"},{name:"InTelugu",bmp:"ఀ-౿"},{name:"InThaana",bmp:"ހ-޿"},{name:"InThai",bmp:"฀-๿"},{name:"InTibetan",bmp:"ༀ-࿿"},{name:"InTifinagh",bmp:"ⴰ-⵿"},{name:"InTirhuta",astral:"�[�-�]"},{name:"InTransport_And_Map_Symbols",astral:"�[�-�]"},{name:"InUgaritic",astral:"�[�-�]"},{name:"InUnified_Canadian_Aboriginal_Syllabics",bmp:"᐀-ᙿ"},{name:"InUnified_Canadian_Aboriginal_Syllabics_Extended",bmp:"ᢰ-᣿"},{name:"InVai",bmp:"ꔀ-꘿"},{name:"InVariation_Selectors",bmp:"︀-️"},{name:"InVariation_Selectors_Supplement",astral:"�[�-�]"},{name:"InVedic_Extensions",bmp:"᳐-᳿"},{name:"InVertical_Forms",bmp:"︐-︟"},{name:"InWarang_Citi",astral:"�[�-�]"},{name:"InYi_Radicals",bmp:"꒐-꓏"},{name:"InYi_Syllables",bmp:"ꀀ-꒏"},{name:"InYijing_Hexagram_Symbols",bmp:"䷀-䷿"},{name:"InZanabazar_Square",astral:"�[�-�]"}]},{}],82:[function(e,t,i){t.exports=[{name:"C",alias:"Other",isBmpLast:!0,bmp:"\0--­͸͹΀-΃΋΍΢԰՗՘֋֌֐׈-׏׫-׮׵-؅؜؝۝܎܏݋݌޲-޿߻߼࠮࠯࠿࡜࡝࡟࡫-࢟ࢵࢾ-࣒࣢঄঍঎঑঒঩঱঳-঵঺঻৅৆৉৊৏-৖৘-৛৞৤৥৿਀਄਋-਎਑਒਩਱਴਷਺਻਽੃-੆੉੊੎-੐੒-੘੝੟-੥੷-઀઄઎઒઩઱઴઺઻૆૊૎૏૑-૟૤૥૲-૸଀଄଍଎଑଒଩଱଴଺଻୅୆୉୊୎-୕୘-୛୞୤୥୸-஁஄஋-஍஑஖-஘஛஝஠-஢஥-஧஫-஭஺-஽௃-௅௉௎௏௑-௖௘-௥௻-௿఍఑఩఺-఼౅౉౎-౔౗౛-౟౤౥౰-౷಍಑಩಴಺಻೅೉೎-೔೗-ೝ೟೤೥೰ೳ-೿ഄ഍഑൅൉൐-൓൤൥඀ඁ඄඗-඙඲඼඾඿෇-෉෋-෎෕෗෠-෥෰෱෵-฀฻-฾๜-຀຃຅ຆຉ຋ຌຎ-ຓຘຠ຤຦ຨຩຬ຺຾຿໅໇໎໏໚໛໠-໿཈཭-཰྘྽࿍࿛-࿿჆჈-჌჎჏቉቎቏቗቙቞቟኉኎኏኱኶኷኿዁዆዇዗጑጖጗፛፜፽-፿᎚-᎟᏶᏷᏾᏿᚝-᚟᛹-᛿ᜍ᜕-ᜟ᜷-᜿᝔-᝟᝭᝱᝴-᝿៞៟៪-៯៺-៿᠎᠏᠚-᠟᡹-᡿᢫-᢯᣶-᣿᤟᤬-᤯᤼-᤿᥁-᥃᥮᥯᥵-᥿᦬-᦯᧊-᧏᧛-᧝᨜᨝᩟᩽᩾᪊-᪏᪚-᪟᪮᪯ᪿ-᫿ᭌ-᭏᭽-᭿᯴-᯻᰸-᰺᱊-᱌Ᲊ-᲏᲻᲼᳈-᳏ᳺ-᳿᷺἖἗἞἟὆὇὎὏὘὚὜὞὾὿᾵῅῔῕῜῰῱῵῿​-‏‪-‮⁠-⁯⁲⁳₏₝-₟⃀-⃏⃱-⃿↌-↏␧-␿⑋-⑟⭴⭵⮖⮗⯉⯿Ⱟⱟ⳴-⳸⴦⴨-⴬⴮⴯⵨-⵮⵱-⵾⶗-⶟⶧⶯⶷⶿⷇⷏⷗⷟⹏-⹿⺚⻴-⻿⿖-⿯⿼-⿿぀゗゘㄀-㄄㄰㆏ㆻ-ㆿ㇤-㇯㈟㋿䶶-䶿鿰-鿿꒍-꒏꓇-꓏꘬-꘿꛸-꛿Ꞻ-ꟶ꠬-꠯꠺-꠿꡸-꡿꣆-꣍꣚-꣟꥔-꥞꥽-꥿꧎꧚-꧝꧿꨷-꨿꩎꩏꩚꩛꫃-꫚꫷-꬀꬇꬈꬏꬐꬗-꬟꬧꬯ꭦ-꭯꯮꯯꯺-꯿힤-힯퟇-퟊퟼-﩮﩯﫚-﫿﬇-﬒﬘-﬜﬷﬽﬿﭂﭅﯂-﯒﵀-﵏﶐﶑﷈-﷯﷾﷿︚-︟﹓﹧﹬-﹯﹵﻽-＀﾿-￁￈￉￐￑￘￙￝-￟￧￯-￻￾￿",astral:"�[�������-��-��-��-���-��-��-��-��-��-��-��-��-���-��-�]|�[���-��-��-��-��-��-��-��-��-�]|�[�����-�����-��-���-��-��-��-��-�����-������-��-��-��-��-��-��-����-��-��-��-�]|�[�-��-��-��-��-��-��-��-�]|�[�-��-���-��-��-���-��-�����-���-������-��-��-�����������������-��-����-��-�]|�[���-��-��-����-��-��-��-��-��-����-��-�]|�[�-��-��-��-����-��-�]|�[���-��-�����-����-����-��-������-��-��-�]|�[�-�]|�[��-��-�]|[���-��-��-����-�����-��-��-�][�-�]|�[�-�]|�[�-�]|�[�-���-��-����-��-����-��-�]|�[�-��-��-��-��-��-�]|�[�-�]|�[�-�]|�[�-��-�]|�[�-��-��-����-�]|�[�-����-��-��-��-��-��-�]|�[���������������������-������]|�[�-���-�]|�[������-�]|�[���-��-��-��-�]|�[�-��-�����������-��-�����������������������-����-��-�]|�[�-��-������-��-��-��-��-��-��-��-��-�]|�[�-��-��-��-��-�]|�[�-��-��-��-��-��-�����-���-��-��-��-��-�]|�[�-�]|�[�-�]|�[��]|�[�-�]|�[�-�]|�[�-�]|�[�-��-�]"},{name:"Cc",alias:"Control",bmp:"\0--"},{name:"Cf",alias:"Format",bmp:"­؀-؅؜۝܏࣢᠎​-‏‪-‮⁠-⁤⁦-⁯\ufeff￹-￻",astral:"�[��]|�[�-�]|�[�-�]|�[��-�]"},{name:"Cn",alias:"Unassigned",bmp:"͸͹΀-΃΋΍΢԰՗՘֋֌֐׈-׏׫-׮׵-׿؝܎݋݌޲-޿߻߼࠮࠯࠿࡜࡝࡟࡫-࢟ࢵࢾ-࣒঄঍঎঑঒঩঱঳-঵঺঻৅৆৉৊৏-৖৘-৛৞৤৥৿਀਄਋-਎਑਒਩਱਴਷਺਻਽੃-੆੉੊੎-੐੒-੘੝੟-੥੷-઀઄઎઒઩઱઴઺઻૆૊૎૏૑-૟૤૥૲-૸଀଄଍଎଑଒଩଱଴଺଻୅୆୉୊୎-୕୘-୛୞୤୥୸-஁஄஋-஍஑஖-஘஛஝஠-஢஥-஧஫-஭஺-஽௃-௅௉௎௏௑-௖௘-௥௻-௿఍఑఩఺-఼౅౉౎-౔౗౛-౟౤౥౰-౷಍಑಩಴಺಻೅೉೎-೔೗-ೝ೟೤೥೰ೳ-೿ഄ഍഑൅൉൐-൓൤൥඀ඁ඄඗-඙඲඼඾඿෇-෉෋-෎෕෗෠-෥෰෱෵-฀฻-฾๜-຀຃຅ຆຉ຋ຌຎ-ຓຘຠ຤຦ຨຩຬ຺຾຿໅໇໎໏໚໛໠-໿཈཭-཰྘྽࿍࿛-࿿჆჈-჌჎჏቉቎቏቗቙቞቟኉኎኏኱኶኷኿዁዆዇዗጑጖጗፛፜፽-፿᎚-᎟᏶᏷᏾᏿᚝-᚟᛹-᛿ᜍ᜕-ᜟ᜷-᜿᝔-᝟᝭᝱᝴-᝿៞៟៪-៯៺-៿᠏᠚-᠟᡹-᡿᢫-᢯᣶-᣿᤟᤬-᤯᤼-᤿᥁-᥃᥮᥯᥵-᥿᦬-᦯᧊-᧏᧛-᧝᨜᨝᩟᩽᩾᪊-᪏᪚-᪟᪮᪯ᪿ-᫿ᭌ-᭏᭽-᭿᯴-᯻᰸-᰺᱊-᱌Ᲊ-᲏᲻᲼᳈-᳏ᳺ-᳿᷺἖἗἞἟὆὇὎὏὘὚὜὞὾὿᾵῅῔῕῜῰῱῵῿⁥⁲⁳₏₝-₟⃀-⃏⃱-⃿↌-↏␧-␿⑋-⑟⭴⭵⮖⮗⯉⯿Ⱟⱟ⳴-⳸⴦⴨-⴬⴮⴯⵨-⵮⵱-⵾⶗-⶟⶧⶯⶷⶿⷇⷏⷗⷟⹏-⹿⺚⻴-⻿⿖-⿯⿼-⿿぀゗゘㄀-㄄㄰㆏ㆻ-ㆿ㇤-㇯㈟㋿䶶-䶿鿰-鿿꒍-꒏꓇-꓏꘬-꘿꛸-꛿Ꞻ-ꟶ꠬-꠯꠺-꠿꡸-꡿꣆-꣍꣚-꣟꥔-꥞꥽-꥿꧎꧚-꧝꧿꨷-꨿꩎꩏꩚꩛꫃-꫚꫷-꬀꬇꬈꬏꬐꬗-꬟꬧꬯ꭦ-꭯꯮꯯꯺-꯿힤-힯퟇-퟊퟼-퟿﩮﩯﫚-﫿﬇-﬒﬘-﬜﬷﬽﬿﭂﭅﯂-﯒﵀-﵏﶐﶑﷈-﷯﷾﷿︚-︟﹓﹧﹬-﹯﹵﻽﻾＀﾿-￁￈￉￐￑￘￙￝-￟￧￯-￸￾￿",astral:"�[�������-��-��-��-���-��-��-��-��-��-��-��-��-���-��-�]|�[���-��-��-��-��-��-��-��-��-�]|�[�����-�����-��-���-��-��-��-��-�����-������-��-��-��-��-��-��-����-��-��-��-�]|�[�-��-��-��-��-��-��-��-�]|�[�-��-��-����-��-���-��-�����-���-������-��-��-�����������������-��-����-��-�]|�[���-��-��-����-��-��-��-��-��-����-��-�]|�[�-��-��-��-����-��-�]|�[���-��-�����-����-����-��-������-��-��-�]|�[�-�]|�[��-��-�]|[���-��-��-����-�����-��-��-�][�-�]|�[�-�]|�[�-�]|�[�-���-��-����-��-����-��-�]|�[�-��-��-��-��-��-�]|�[�-�]|�[�-�]|�[�-��-�]|�[�-��-��-����-�]|�[�-����-��-��-��-��-�]|�[���������������������-������]|�[�-���-�]|�[������-�]|�[���-��-��-��-�]|�[�-��-�����������-��-�����������������������-����-��-�]|�[�-��-������-��-��-��-��-��-��-��-��-�]|�[�-��-��-��-��-�]|�[�-��-��-��-��-��-�����-���-��-��-��-��-�]|�[�-�]|�[�-�]|�[��]|�[�-�]|�[�-�]|�[�-�]|�[��-��-��-�]|[��][��]"},{name:"Co",alias:"Private_Use",bmp:"-",astral:"[�-��-�][�-�]|[��][�-�]"},{name:"Cs",alias:"Surrogate",bmp:"�-�"},{name:"L",alias:"Letter",bmp:"A-Za-zªµºÀ-ÖØ-öø-ˁˆ-ˑˠ-ˤˬˮͰ-ʹͶͷͺ-ͽͿΆΈ-ΊΌΎ-ΡΣ-ϵϷ-ҁҊ-ԯԱ-Ֆՙՠ-ֈא-תׯ-ײؠ-يٮٯٱ-ۓەۥۦۮۯۺ-ۼۿܐܒ-ܯݍ-ޥޱߊ-ߪߴߵߺࠀ-ࠕࠚࠤࠨࡀ-ࡘࡠ-ࡪࢠ-ࢴࢶ-ࢽऄ-हऽॐक़-ॡॱ-ঀঅ-ঌএঐও-নপ-রলশ-হঽৎড়ঢ়য়-ৡৰৱৼਅ-ਊਏਐਓ-ਨਪ-ਰਲਲ਼ਵਸ਼ਸਹਖ਼-ੜਫ਼ੲ-ੴઅ-ઍએ-ઑઓ-નપ-રલળવ-હઽૐૠૡૹଅ-ଌଏଐଓ-ନପ-ରଲଳଵ-ହଽଡ଼ଢ଼ୟ-ୡୱஃஅ-ஊஎ-ஐஒ-கஙசஜஞடணதந-பம-ஹௐఅ-ఌఎ-ఐఒ-నప-హఽౘ-ౚౠౡಀಅ-ಌಎ-ಐಒ-ನಪ-ಳವ-ಹಽೞೠೡೱೲഅ-ഌഎ-ഐഒ-ഺഽൎൔ-ൖൟ-ൡൺ-ൿඅ-ඖක-නඳ-රලව-ෆก-ะาำเ-ๆກຂຄງຈຊຍດ-ທນ-ຟມ-ຣລວສຫອ-ະາຳຽເ-ໄໆໜ-ໟༀཀ-ཇཉ-ཬྈ-ྌက-ဪဿၐ-ၕၚ-ၝၡၥၦၮ-ၰၵ-ႁႎႠ-ჅჇჍა-ჺჼ-ቈቊ-ቍቐ-ቖቘቚ-ቝበ-ኈኊ-ኍነ-ኰኲ-ኵኸ-ኾዀዂ-ዅወ-ዖዘ-ጐጒ-ጕጘ-ፚᎀ-ᎏᎠ-Ᏽᏸ-ᏽᐁ-ᙬᙯ-ᙿᚁ-ᚚᚠ-ᛪᛱ-ᛸᜀ-ᜌᜎ-ᜑᜠ-ᜱᝀ-ᝑᝠ-ᝬᝮ-ᝰក-ឳៗៜᠠ-ᡸᢀ-ᢄᢇ-ᢨᢪᢰ-ᣵᤀ-ᤞᥐ-ᥭᥰ-ᥴᦀ-ᦫᦰ-ᧉᨀ-ᨖᨠ-ᩔᪧᬅ-ᬳᭅ-ᭋᮃ-ᮠᮮᮯᮺ-ᯥᰀ-ᰣᱍ-ᱏᱚ-ᱽᲀ-ᲈᲐ-ᲺᲽ-Ჿᳩ-ᳬᳮ-ᳱᳵᳶᴀ-ᶿḀ-ἕἘ-Ἕἠ-ὅὈ-Ὅὐ-ὗὙὛὝὟ-ώᾀ-ᾴᾶ-ᾼιῂ-ῄῆ-ῌῐ-ΐῖ-Ίῠ-Ῥῲ-ῴῶ-ῼⁱⁿₐ-ₜℂℇℊ-ℓℕℙ-ℝℤΩℨK-ℭℯ-ℹℼ-ℿⅅ-ⅉⅎↃↄⰀ-Ⱞⰰ-ⱞⱠ-ⳤⳫ-ⳮⳲⳳⴀ-ⴥⴧⴭⴰ-ⵧⵯⶀ-ⶖⶠ-ⶦⶨ-ⶮⶰ-ⶶⶸ-ⶾⷀ-ⷆⷈ-ⷎⷐ-ⷖⷘ-ⷞⸯ々〆〱-〵〻〼ぁ-ゖゝ-ゟァ-ヺー-ヿㄅ-ㄯㄱ-ㆎㆠ-ㆺㇰ-ㇿ㐀-䶵一-鿯ꀀ-ꒌꓐ-ꓽꔀ-ꘌꘐ-ꘟꘪꘫꙀ-ꙮꙿ-ꚝꚠ-ꛥꜗ-ꜟꜢ-ꞈꞋ-ꞹꟷ-ꠁꠃ-ꠅꠇ-ꠊꠌ-ꠢꡀ-ꡳꢂ-ꢳꣲ-ꣷꣻꣽꣾꤊ-ꤥꤰ-ꥆꥠ-ꥼꦄ-ꦲꧏꧠ-ꧤꧦ-ꧯꧺ-ꧾꨀ-ꨨꩀ-ꩂꩄ-ꩋꩠ-ꩶꩺꩾ-ꪯꪱꪵꪶꪹ-ꪽꫀꫂꫛ-ꫝꫠ-ꫪꫲ-ꫴꬁ-ꬆꬉ-ꬎꬑ-ꬖꬠ-ꬦꬨ-ꬮꬰ-ꭚꭜ-ꭥꭰ-ꯢ가-힣ힰ-ퟆퟋ-ퟻ豈-舘並-龎ﬀ-ﬆﬓ-ﬗיִײַ-ﬨשׁ-זּטּ-לּמּנּסּףּפּצּ-ﮱﯓ-ﴽﵐ-ﶏﶒ-ﷇﷰ-ﷻﹰ-ﹴﹶ-ﻼＡ-Ｚａ-ｚｦ-ﾾￂ-ￇￊ-ￏￒ-ￗￚ-ￜ",astral:"�[�-��-��-����-��-��-��-��-��-��-��-��-��-��-��-�]|�[�-��-��-��-��-��-��-��-�]|�[�-���-�����-��-��-��-����-��-��-�����-��-��-��-��-��-��-��-��-��-��-�]|�[�-��-��-��-��-���-�]|�[�-��-��-��-���-���-��-����-��-��-���-��-��-��-��-����-��-����-����-�]|�[�-��-��-�����-��-��-���-��-�]|�[�-��-����-����-��-���-�]|�[�-��-���-��-����-���-����-���-�]|�[�-�]|�[�-�]|[��-��-��-��-��-�][�-�]|�[�-�]|�[�-�]|�[�-��-��-��-��-��-��-�]|�[�-��-���-���]|�[�-�]|�[�-�]|�[�-��-�]|�[�-��-��-��-�]|�[�-��-�������-��-���-��-��-��-��-��-��-��-���-��-��-��-��-��-��-��-��-��-��-��-��-�]|�[�-��-�]|�[�-��-������-��-��������-�������������-��-��-��-���-��-��-��-��-�]|�[�-��-�]|�[�-��-�]|�[�-��-�]|�[�-��-�]|�[�-�]|�[�-�]"},{name:"LC",alias:"Cased_Letter",bmp:"A-Za-zµÀ-ÖØ-öø-ƺƼ-ƿǄ-ʓʕ-ʯͰ-ͳͶͷͻ-ͽͿΆΈ-ΊΌΎ-ΡΣ-ϵϷ-ҁҊ-ԯԱ-Ֆՠ-ֈႠ-ჅჇჍა-ჺჽ-ჿᎠ-Ᏽᏸ-ᏽᲀ-ᲈᲐ-ᲺᲽ-Ჿᴀ-ᴫᵫ-ᵷᵹ-ᶚḀ-ἕἘ-Ἕἠ-ὅὈ-Ὅὐ-ὗὙὛὝὟ-ώᾀ-ᾴᾶ-ᾼιῂ-ῄῆ-ῌῐ-ΐῖ-Ίῠ-Ῥῲ-ῴῶ-ῼℂℇℊ-ℓℕℙ-ℝℤΩℨK-ℭℯ-ℴℹℼ-ℿⅅ-ⅉⅎↃↄⰀ-Ⱞⰰ-ⱞⱠ-ⱻⱾ-ⳤⳫ-ⳮⳲⳳⴀ-ⴥⴧⴭꙀ-ꙭꚀ-ꚛꜢ-ꝯꝱ-ꞇꞋ-ꞎꞐ-ꞹꟺꬰ-ꭚꭠ-ꭥꭰ-ꮿﬀ-ﬆﬓ-ﬗＡ-Ｚａ-ｚ",astral:"�[�-��-��-�]|�[�-��-�]|�[�-�]|�[�-�]|�[�-��-�������-��-���-��-��-��-��-��-��-��-���-��-��-��-��-��-��-��-��-��-��-��-��-�]|�[�-�]"},{name:"Ll",alias:"Lowercase_Letter",bmp:"a-zµß-öø-ÿāăąćĉċčďđēĕėęěĝğġģĥħĩīĭįıĳĵķĸĺļľŀłńņňŉŋōŏőœŕŗřśŝşšţťŧũūŭůűųŵŷźżž-ƀƃƅƈƌƍƒƕƙ-ƛƞơƣƥƨƪƫƭưƴƶƹƺƽ-ƿǆǉǌǎǐǒǔǖǘǚǜǝǟǡǣǥǧǩǫǭǯǰǳǵǹǻǽǿȁȃȅȇȉȋȍȏȑȓȕȗșțȝȟȡȣȥȧȩȫȭȯȱȳ-ȹȼȿɀɂɇɉɋɍɏ-ʓʕ-ʯͱͳͷͻ-ͽΐά-ώϐϑϕ-ϗϙϛϝϟϡϣϥϧϩϫϭϯ-ϳϵϸϻϼа-џѡѣѥѧѩѫѭѯѱѳѵѷѹѻѽѿҁҋҍҏґғҕҗҙқҝҟҡңҥҧҩҫҭүұҳҵҷҹһҽҿӂӄӆӈӊӌӎӏӑӓӕӗәӛӝӟӡӣӥӧөӫӭӯӱӳӵӷӹӻӽӿԁԃԅԇԉԋԍԏԑԓԕԗԙԛԝԟԡԣԥԧԩԫԭԯՠ-ֈა-ჺჽ-ჿᏸ-ᏽᲀ-ᲈᴀ-ᴫᵫ-ᵷᵹ-ᶚḁḃḅḇḉḋḍḏḑḓḕḗḙḛḝḟḡḣḥḧḩḫḭḯḱḳḵḷḹḻḽḿṁṃṅṇṉṋṍṏṑṓṕṗṙṛṝṟṡṣṥṧṩṫṭṯṱṳṵṷṹṻṽṿẁẃẅẇẉẋẍẏẑẓẕ-ẝẟạảấầẩẫậắằẳẵặẹẻẽếềểễệỉịọỏốồổỗộớờởỡợụủứừửữựỳỵỷỹỻỽỿ-ἇἐ-ἕἠ-ἧἰ-ἷὀ-ὅὐ-ὗὠ-ὧὰ-ώᾀ-ᾇᾐ-ᾗᾠ-ᾧᾰ-ᾴᾶᾷιῂ-ῄῆῇῐ-ΐῖῗῠ-ῧῲ-ῴῶῷℊℎℏℓℯℴℹℼℽⅆ-ⅉⅎↄⰰ-ⱞⱡⱥⱦⱨⱪⱬⱱⱳⱴⱶ-ⱻⲁⲃⲅⲇⲉⲋⲍⲏⲑⲓⲕⲗⲙⲛⲝⲟⲡⲣⲥⲧⲩⲫⲭⲯⲱⲳⲵⲷⲹⲻⲽⲿⳁⳃⳅⳇⳉⳋⳍⳏⳑⳓⳕⳗⳙⳛⳝⳟⳡⳣⳤⳬⳮⳳⴀ-ⴥⴧⴭꙁꙃꙅꙇꙉꙋꙍꙏꙑꙓꙕꙗꙙꙛꙝꙟꙡꙣꙥꙧꙩꙫꙭꚁꚃꚅꚇꚉꚋꚍꚏꚑꚓꚕꚗꚙꚛꜣꜥꜧꜩꜫꜭꜯ-ꜱꜳꜵꜷꜹꜻꜽꜿꝁꝃꝅꝇꝉꝋꝍꝏꝑꝓꝕꝗꝙꝛꝝꝟꝡꝣꝥꝧꝩꝫꝭꝯꝱ-ꝸꝺꝼꝿꞁꞃꞅꞇꞌꞎꞑꞓ-ꞕꞗꞙꞛꞝꞟꞡꞣꞥꞧꞩꞯꞵꞷꞹꟺꬰ-ꭚꭠ-ꭥꭰ-ꮿﬀ-ﬆﬓ-ﬗａ-ｚ",astral:"�[�-��-�]|�[�-�]|�[�-�]|�[�-�]|�[�-��-��-��-��-���-��-��-��-��-��-��-��-��-��-��-��-��-��-��-��-��-��-��-��-��-��]|�[�-�]"},{name:"Lm",alias:"Modifier_Letter",bmp:"ʰ-ˁˆ-ˑˠ-ˤˬˮʹͺՙـۥۦߴߵߺࠚࠤࠨॱๆໆჼៗᡃᪧᱸ-ᱽᴬ-ᵪᵸᶛ-ᶿⁱⁿₐ-ₜⱼⱽⵯⸯ々〱-〵〻ゝゞー-ヾꀕꓸ-ꓽꘌꙿꚜꚝꜗ-ꜟꝰꞈꟸꟹꧏꧦꩰꫝꫳꫴꭜ-ꭟｰﾞﾟ",astral:"�[�-�]|�[�-���]"},{name:"Lo",alias:"Other_Letter",bmp:"ªºƻǀ-ǃʔא-תׯ-ײؠ-ؿف-يٮٯٱ-ۓەۮۯۺ-ۼۿܐܒ-ܯݍ-ޥޱߊ-ߪࠀ-ࠕࡀ-ࡘࡠ-ࡪࢠ-ࢴࢶ-ࢽऄ-हऽॐक़-ॡॲ-ঀঅ-ঌএঐও-নপ-রলশ-হঽৎড়ঢ়য়-ৡৰৱৼਅ-ਊਏਐਓ-ਨਪ-ਰਲਲ਼ਵਸ਼ਸਹਖ਼-ੜਫ਼ੲ-ੴઅ-ઍએ-ઑઓ-નપ-રલળવ-હઽૐૠૡૹଅ-ଌଏଐଓ-ନପ-ରଲଳଵ-ହଽଡ଼ଢ଼ୟ-ୡୱஃஅ-ஊஎ-ஐஒ-கஙசஜஞடணதந-பம-ஹௐఅ-ఌఎ-ఐఒ-నప-హఽౘ-ౚౠౡಀಅ-ಌಎ-ಐಒ-ನಪ-ಳವ-ಹಽೞೠೡೱೲഅ-ഌഎ-ഐഒ-ഺഽൎൔ-ൖൟ-ൡൺ-ൿඅ-ඖක-නඳ-රලව-ෆก-ะาำเ-ๅກຂຄງຈຊຍດ-ທນ-ຟມ-ຣລວສຫອ-ະາຳຽເ-ໄໜ-ໟༀཀ-ཇཉ-ཬྈ-ྌက-ဪဿၐ-ၕၚ-ၝၡၥၦၮ-ၰၵ-ႁႎᄀ-ቈቊ-ቍቐ-ቖቘቚ-ቝበ-ኈኊ-ኍነ-ኰኲ-ኵኸ-ኾዀዂ-ዅወ-ዖዘ-ጐጒ-ጕጘ-ፚᎀ-ᎏᐁ-ᙬᙯ-ᙿᚁ-ᚚᚠ-ᛪᛱ-ᛸᜀ-ᜌᜎ-ᜑᜠ-ᜱᝀ-ᝑᝠ-ᝬᝮ-ᝰក-ឳៜᠠ-ᡂᡄ-ᡸᢀ-ᢄᢇ-ᢨᢪᢰ-ᣵᤀ-ᤞᥐ-ᥭᥰ-ᥴᦀ-ᦫᦰ-ᧉᨀ-ᨖᨠ-ᩔᬅ-ᬳᭅ-ᭋᮃ-ᮠᮮᮯᮺ-ᯥᰀ-ᰣᱍ-ᱏᱚ-ᱷᳩ-ᳬᳮ-ᳱᳵᳶℵ-ℸⴰ-ⵧⶀ-ⶖⶠ-ⶦⶨ-ⶮⶰ-ⶶⶸ-ⶾⷀ-ⷆⷈ-ⷎⷐ-ⷖⷘ-ⷞ〆〼ぁ-ゖゟァ-ヺヿㄅ-ㄯㄱ-ㆎㆠ-ㆺㇰ-ㇿ㐀-䶵一-鿯ꀀ-ꀔꀖ-ꒌꓐ-ꓷꔀ-ꘋꘐ-ꘟꘪꘫꙮꚠ-ꛥꞏꟷꟻ-ꠁꠃ-ꠅꠇ-ꠊꠌ-ꠢꡀ-ꡳꢂ-ꢳꣲ-ꣷꣻꣽꣾꤊ-ꤥꤰ-ꥆꥠ-ꥼꦄ-ꦲꧠ-ꧤꧧ-ꧯꧺ-ꧾꨀ-ꨨꩀ-ꩂꩄ-ꩋꩠ-ꩯꩱ-ꩶꩺꩾ-ꪯꪱꪵꪶꪹ-ꪽꫀꫂꫛꫜꫠ-ꫪꫲꬁ-ꬆꬉ-ꬎꬑ-ꬖꬠ-ꬦꬨ-ꬮꯀ-ꯢ가-힣ힰ-ퟆퟋ-ퟻ豈-舘並-龎יִײַ-ﬨשׁ-זּטּ-לּמּנּסּףּפּצּ-ﮱﯓ-ﴽﵐ-ﶏﶒ-ﷇﷰ-ﷻﹰ-ﹴﹶ-ﻼｦ-ｯｱ-ﾝﾠ-ﾾￂ-ￇￊ-ￏￒ-ￗￚ-ￜ",astral:"�[�-��-��-����-��-��-��-��-��-��-��-��-��-��-��-�]|�[�-��-��-��-��-��-�]|�[�-���-�����-��-��-��-����-��-��-�����-��-��-��-��-��-��-��-��-��-��-�]|�[�-��-��-���-�]|�[�-��-��-��-���-���-��-����-��-��-���-��-��-��-��-����-��-����-����-�]|�[�-��-��-�����-��-��-���-��-�]|�[�-����-����-��-���-�]|�[�-��-���-��-����-���-����-���-�]|�[�-�]|�[�-�]|[��-��-��-��-��-�][�-�]|�[�-�]|�[�-�]|�[�-��-��-��-��-��-�]|�[�-��]|�[�-�]|�[�-�]|�[�-��-�]|�[�-��-��-��-�]|�[�-�]|�[�-��-������-��-��������-�������������-��-��-��-���-��-��-��-��-�]|�[�-��-�]|�[�-��-�]|�[�-��-�]|�[�-��-�]|�[�-�]|�[�-�]"},{name:"Lt",alias:"Titlecase_Letter",bmp:"ǅǈǋǲᾈ-ᾏᾘ-ᾟᾨ-ᾯᾼῌῼ"},{name:"Lu",alias:"Uppercase_Letter",bmp:"A-ZÀ-ÖØ-ÞĀĂĄĆĈĊČĎĐĒĔĖĘĚĜĞĠĢĤĦĨĪĬĮİĲĴĶĹĻĽĿŁŃŅŇŊŌŎŐŒŔŖŘŚŜŞŠŢŤŦŨŪŬŮŰŲŴŶŸŹŻŽƁƂƄƆƇƉ-ƋƎ-ƑƓƔƖ-ƘƜƝƟƠƢƤƦƧƩƬƮƯƱ-ƳƵƷƸƼǄǇǊǍǏǑǓǕǗǙǛǞǠǢǤǦǨǪǬǮǱǴǶ-ǸǺǼǾȀȂȄȆȈȊȌȎȐȒȔȖȘȚȜȞȠȢȤȦȨȪȬȮȰȲȺȻȽȾɁɃ-ɆɈɊɌɎͰͲͶͿΆΈ-ΊΌΎΏΑ-ΡΣ-ΫϏϒ-ϔϘϚϜϞϠϢϤϦϨϪϬϮϴϷϹϺϽ-ЯѠѢѤѦѨѪѬѮѰѲѴѶѸѺѼѾҀҊҌҎҐҒҔҖҘҚҜҞҠҢҤҦҨҪҬҮҰҲҴҶҸҺҼҾӀӁӃӅӇӉӋӍӐӒӔӖӘӚӜӞӠӢӤӦӨӪӬӮӰӲӴӶӸӺӼӾԀԂԄԆԈԊԌԎԐԒԔԖԘԚԜԞԠԢԤԦԨԪԬԮԱ-ՖႠ-ჅჇჍᎠ-ᏵᲐ-ᲺᲽ-ᲿḀḂḄḆḈḊḌḎḐḒḔḖḘḚḜḞḠḢḤḦḨḪḬḮḰḲḴḶḸḺḼḾṀṂṄṆṈṊṌṎṐṒṔṖṘṚṜṞṠṢṤṦṨṪṬṮṰṲṴṶṸṺṼṾẀẂẄẆẈẊẌẎẐẒẔẞẠẢẤẦẨẪẬẮẰẲẴẶẸẺẼẾỀỂỄỆỈỊỌỎỐỒỔỖỘỚỜỞỠỢỤỦỨỪỬỮỰỲỴỶỸỺỼỾἈ-ἏἘ-ἝἨ-ἯἸ-ἿὈ-ὍὙὛὝὟὨ-ὯᾸ-ΆῈ-ΉῘ-ΊῨ-ῬῸ-Ώℂℇℋ-ℍℐ-ℒℕℙ-ℝℤΩℨK-ℭℰ-ℳℾℿⅅↃⰀ-ⰮⱠⱢ-ⱤⱧⱩⱫⱭ-ⱰⱲⱵⱾ-ⲀⲂⲄⲆⲈⲊⲌⲎⲐⲒⲔⲖⲘⲚⲜⲞⲠⲢⲤⲦⲨⲪⲬⲮⲰⲲⲴⲶⲸⲺⲼⲾⳀⳂⳄⳆⳈⳊⳌⳎⳐⳒⳔⳖⳘⳚⳜⳞⳠⳢⳫⳭⳲꙀꙂꙄꙆꙈꙊꙌꙎꙐꙒꙔꙖꙘꙚꙜꙞꙠꙢꙤꙦꙨꙪꙬꚀꚂꚄꚆꚈꚊꚌꚎꚐꚒꚔꚖꚘꚚꜢꜤꜦꜨꜪꜬꜮꜲꜴꜶꜸꜺꜼꜾꝀꝂꝄꝆꝈꝊꝌꝎꝐꝒꝔꝖꝘꝚꝜꝞꝠꝢꝤꝦꝨꝪꝬꝮꝹꝻꝽꝾꞀꞂꞄꞆꞋꞍꞐꞒꞖꞘꞚꞜꞞꞠꞢꞤꞦꞨꞪ-ꞮꞰ-ꞴꞶꞸＡ-Ｚ",astral:"�[�-��-�]|�[�-�]|�[�-�]|�[�-�]|�[�-��-��-��������-��-��-����-��-��-����-��-���-��-��-��-��-��-��-��-��-��-��-��-��]|�[�-�]"},{name:"M",alias:"Mark",bmp:"̀-ͯ҃-҉֑-ׇֽֿׁׂׅׄؐ-ًؚ-ٰٟۖ-ۜ۟-۪ۤۧۨ-ܑۭܰ-݊ަ-ް߫-߽߳ࠖ-࠙ࠛ-ࠣࠥ-ࠧࠩ-࡙࠭-࡛࣓-ࣣ࣡-ःऺ-़ा-ॏ॑-ॗॢॣঁ-ঃ়া-ৄেৈো-্ৗৢৣ৾ਁ-ਃ਼ਾ-ੂੇੈੋ-੍ੑੰੱੵઁ-ઃ઼ા-ૅે-ૉો-્ૢૣૺ-૿ଁ-ଃ଼ା-ୄେୈୋ-୍ୖୗୢୣஂா-ூெ-ைொ-்ௗఀ-ఄా-ౄె-ైొ-్ౕౖౢౣಁ-ಃ಼ಾ-ೄೆ-ೈೊ-್ೕೖೢೣഀ-ഃ഻഼ാ-ൄെ-ൈൊ-്ൗൢൣංඃ්ා-ුූෘ-ෟෲෳัิ-ฺ็-๎ັິ-ູົຼ່-ໍ༹༘༙༵༷༾༿ཱ-྄྆྇ྍ-ྗྙ-ྼ࿆ါ-ှၖ-ၙၞ-ၠၢ-ၤၧ-ၭၱ-ၴႂ-ႍႏႚ-ႝ፝-፟ᜒ-᜔ᜲ-᜴ᝒᝓᝲᝳ឴-៓៝᠋-᠍ᢅᢆᢩᤠ-ᤫᤰ-᤻ᨗ-ᨛᩕ-ᩞ᩠-᩿᩼᪰-᪾ᬀ-ᬄ᬴-᭄᭫-᭳ᮀ-ᮂᮡ-ᮭ᯦-᯳ᰤ-᰷᳐-᳔᳒-᳨᳭ᳲ-᳴᳷-᳹᷀-᷹᷻-᷿⃐-⃰⳯-⵿⳱ⷠ-〪ⷿ-゙゚〯꙯-꙲ꙴ-꙽ꚞꚟ꛰꛱ꠂ꠆ꠋꠣ-ꠧꢀꢁꢴ-ꣅ꣠-꣱ꣿꤦ-꤭ꥇ-꥓ꦀ-ꦃ꦳-꧀ꧥꨩ-ꨶꩃꩌꩍꩻ-ꩽꪰꪲ-ꪴꪷꪸꪾ꪿꫁ꫫ-ꫯꫵ꫶ꯣ-ꯪ꯬꯭ﬞ︀-️︠-︯",astral:"�[���-�]|�[�-����-��-����]|�[�-��-�]|�[�-��-��-��-��-��-�����-��-��-��-���-��-����-����-�����-��-�]|�[�-���-��-��-����-��-��-�]|�[�-��-��-��-���-��-�]|�[�-��-��-��-��-�����-���-����-��-�]|�[�-��-�]|�[�-��-�]|�[��]|�[�-��-��-��-��-��-�]|�[�-��-����-��-�]|�[�-��-��-����-�]|�[�-��-�]|�[�-�]"},{name:"Mc",alias:"Spacing_Mark",bmp:"ःऻा-ीॉ-ौॎॏংঃা-ীেৈোৌৗਃਾ-ੀઃા-ીૉોૌଂଃାୀେୈୋୌୗாிுூெ-ைொ-ௌௗఁ-ఃు-ౄಂಃಾೀ-ೄೇೈೊೋೕೖംഃാ-ീെ-ൈൊ-ൌൗංඃා-ෑෘ-ෟෲෳ༾༿ཿါာေးျြၖၗၢ-ၤၧ-ၭႃႄႇ-ႌႏႚ-ႜាើ-ៅះៈᤣ-ᤦᤩ-ᤫᤰᤱᤳ-ᤸᨙᨚᩕᩗᩡᩣᩤᩭ-ᩲᬄᬵᬻᬽ-ᭁᭃ᭄ᮂᮡᮦᮧ᮪ᯧᯪ-ᯬᯮ᯲᯳ᰤ-ᰫᰴᰵ᳡ᳲᳳ᳷〮〯ꠣꠤꠧꢀꢁꢴ-ꣃꥒ꥓ꦃꦴꦵꦺꦻꦽ-꧀ꨯꨰꨳꨴꩍꩻꩽꫫꫮꫯꫵꯣꯤꯦꯧꯩꯪ꯬",astral:"�[����-��������-����-�����-������-����-����]|�[�-�����-���-���-��-���-�����������]|�[�-������]|�[������-������]|�[�-�]|�[���-�]"},{name:"Me",alias:"Enclosing_Mark",bmp:"҈҉᪾⃝-⃠⃢-⃤꙰-꙲"},{name:"Mn",alias:"Nonspacing_Mark",bmp:"̀-ͯ҃-֑҇-ׇֽֿׁׂׅׄؐ-ًؚ-ٰٟۖ-ۜ۟-۪ۤۧۨ-ܑۭܰ-݊ަ-ް߫-߽߳ࠖ-࠙ࠛ-ࠣࠥ-ࠧࠩ-࡙࠭-࡛࣓-ࣣ࣡-ंऺ़ु-ै्॑-ॗॢॣঁ়ু-ৄ্ৢৣ৾ਁਂ਼ੁੂੇੈੋ-੍ੑੰੱੵઁં઼ુ-ૅેૈ્ૢૣૺ-૿ଁ଼ିୁ-ୄ୍ୖୢୣஂீ்ఀఄా-ీె-ైొ-్ౕౖౢౣಁ಼ಿೆೌ್ೢೣഀഁ഻഼ു-ൄ്ൢൣ්ි-ුූัิ-ฺ็-๎ັິ-ູົຼ່-ໍཱ༹༘༙༵༷-ཾྀ-྄྆྇ྍ-ྗྙ-ྼ࿆ိ-ူဲ-့္်ွှၘၙၞ-ၠၱ-ၴႂႅႆႍႝ፝-፟ᜒ-᜔ᜲ-᜴ᝒᝓᝲᝳ឴឵ិ-ួំ៉-៓៝᠋-᠍ᢅᢆᢩᤠ-ᤢᤧᤨᤲ᤹-᤻ᨘᨗᨛᩖᩘ-ᩞ᩠ᩢᩥ-ᩬᩳ-᩿᩼᪰-᪽ᬀ-ᬃ᬴ᬶ-ᬺᬼᭂ᭫-᭳ᮀᮁᮢ-ᮥᮨᮩ᮫-ᮭ᯦ᯨᯩᯭᯯ-ᯱᰬ-ᰳᰶ᰷᳐-᳔᳒-᳢᳠-᳨᳭᳴᳸᳹᷀-᷹᷻-᷿⃐-⃥⃜⃡-⃰⳯-⵿⳱ⷠ-〪ⷿ-゙゚〭꙯ꙴ-꙽ꚞꚟ꛰꛱ꠂ꠆ꠋꠥꠦ꣄ꣅ꣠-꣱ꣿꤦ-꤭ꥇ-ꥑꦀ-ꦂ꦳ꦶ-ꦹꦼꧥꨩ-ꨮꨱꨲꨵꨶꩃꩌꩼꪰꪲ-ꪴꪷꪸꪾ꪿꫁ꫬꫭ꫶ꯥꯨ꯭ﬞ︀-️︠-︯",astral:"�[���-�]|�[�-����-��-����]|�[�-��-�]|�[��-��-��-����-��-��-�����-��-��-�������-�������-��-�]|�[�-��-����-�������-��������-�������-���-��-��-�]|�[�-����-��-��-���-��-��-���]|�[�-��-���-��-������-�����-��������]|�[�-��-�]|�[�-�]|�[��]|�[�-��-��-��-��-�]|�[�-��-����-��-�]|�[�-��-��-����-�]|�[�-��-�]|�[�-�]"},{name:"N",alias:"Number",bmp:"0-9²³¹¼-¾٠-٩۰-۹߀-߉०-९০-৯৴-৹੦-੯૦-૯୦-୯୲-୷௦-௲౦-౯౸-౾೦-೯൘-൞൦-൸෦-෯๐-๙໐-໙༠-༳၀-၉႐-႙፩-፼ᛮ-ᛰ០-៩៰-៹᠐-᠙᥆-᥏᧐-᧚᪀-᪉᪐-᪙᭐-᭙᮰-᮹᱀-᱉᱐-᱙⁰⁴-⁹₀-₉⅐-ↂↅ-↉①-⒛⓪-⓿❶-➓⳽〇〡-〩〸-〺㆒-㆕㈠-㈩㉈-㉏㉑-㉟㊀-㊉㊱-㊿꘠-꘩ꛦ-ꛯ꠰-꠵꣐-꣙꤀-꤉꧐-꧙꧰-꧹꩐-꩙꯰-꯹０-９",astral:"�[�-��-����-��-����-�]|�[�-�]|�[�-��-��-��-��-����-��-��-����-��-��-��-��-�]|�[�-��-��-��-��-�]|�[�-��-��-��-��-��-�]|�[�-��-��-��-��-�]|�[�-�]|�[�-��-��-�]|�[�-�]|�[�-��-��-�]|�[�-�]|�[�-��-�]|�[�-�]|�[�-��-�]|�[�-��-��-�]|�[�-�]"},{name:"Nd",alias:"Decimal_Number",bmp:"0-9٠-٩۰-۹߀-߉०-९০-৯੦-੯૦-૯୦-୯௦-௯౦-౯೦-೯൦-൯෦-෯๐-๙໐-໙༠-༩၀-၉႐-႙០-៩᠐-᠙᥆-᥏᧐-᧙᪀-᪉᪐-᪙᭐-᭙᮰-᮹᱀-᱉᱐-᱙꘠-꘩꣐-꣙꤀-꤉꧐-꧙꧰-꧹꩐-꩙꯰-꯹０-９",astral:"�[�-�]|�[�-�]|�[�-��-��-��-��-�]|�[�-��-��-��-��-�]|�[�-�]|�[�-��-��-�]|�[�-��-�]|�[�-�]|�[�-�]"},{name:"Nl",alias:"Letter_Number",bmp:"ᛮ-ᛰⅠ-ↂↅ-ↈ〇〡-〩〸-〺ꛦ-ꛯ",astral:"�[�-����-�]|�[�-�]"},{name:"No",alias:"Other_Number",bmp:"²³¹¼-¾৴-৹୲-୷௰-௲౸-౾൘-൞൰-൸༪-༳፩-፼៰-៹᧚⁰⁴-⁹₀-₉⅐-⅟↉①-⒛⓪-⓿❶-➓⳽㆒-㆕㈠-㈩㉈-㉏㉑-㉟㊀-㊉㊱-㊿꠰-꠵",astral:"�[�-��-����-��-�]|�[�-��-��-��-��-����-��-��-����-��-��-��-��-�]|�[�-��-��-��-�]|�[�-��-�]|�[��]|�[�-�]|�[�-�]|�[�-�]|�[�-�]|�[�-��-�]|�[�-�]|�[�-��-��-�]|�[�-�]"},{name:"P",alias:"Punctuation",bmp:"!-#%-\\*,-\\/:;\\?@\\[-\\]_\\{\\}¡§«¶·»¿;·՚-՟։֊־׀׃׆׳״؉؊،؍؛؞؟٪-٭۔܀-܍߷-߹࠰-࠾࡞।॥॰৽੶૰಄෴๏๚๛༄-༒༔༺-༽྅࿐-࿔࿙࿚၊-၏჻፠-፨᐀᙭᙮᚛᚜᛫-᛭᜵᜶។-៖៘-៚᠀-᠊᥄᥅᨞᨟᪠-᪦᪨-᪭᭚-᭠᯼-᯿᰻-᰿᱾᱿᳀-᳇᳓‐-‧‰-⁃⁅-⁑⁓-⁞⁽⁾₍₎⌈-⌋〈〉❨-❵⟅⟆⟦-⟯⦃-⦘⧘-⧛⧼⧽⳹-⳼⳾⳿⵰⸀-⸮⸰-⹎、-〃〈-】〔-〟〰〽゠・꓾꓿꘍-꘏꙳꙾꛲-꛷꡴-꡷꣎꣏꣸-꣺꣼꤮꤯꥟꧁-꧍꧞꧟꩜-꩟꫞꫟꫰꫱꯫﴾﴿︐-︙︰-﹒﹔-﹡﹣﹨﹪﹫！-＃％-＊，-／：；？＠［-］＿｛｝｟-･",astral:"�[�-���]|𐕯|�[����-���-��-��-�]|�[�-�]|�[�-����-��-����-����-��-��]|�[�-�����-��-��-��-�]|�[��-��-��-�]|�[�-�����]|�[�-�]|�[����-��]|�[�-�]|𛲟|�[�-�]|�[��]"},{name:"Pc",alias:"Connector_Punctuation",bmp:"_‿⁀⁔︳︴﹍-﹏＿"},{name:"Pd",alias:"Dash_Punctuation",bmp:"\\-֊־᐀᠆‐-―⸗⸚⸺⸻⹀〜〰゠︱︲﹘﹣－"},{name:"Pe",alias:"Close_Punctuation",bmp:"\\)\\]\\}༻༽᚜⁆⁾₎⌉⌋〉❩❫❭❯❱❳❵⟆⟧⟩⟫⟭⟯⦄⦆⦈⦊⦌⦎⦐⦒⦔⦖⦘⧙⧛⧽⸣⸥⸧⸩〉》」』】〕〗〙〛〞〟﴾︘︶︸︺︼︾﹀﹂﹄﹈﹚﹜﹞）］｝｠｣"},{name:"Pf",alias:"Final_Punctuation",bmp:"»’”›⸃⸅⸊⸍⸝⸡"},{name:"Pi",alias:"Initial_Punctuation",bmp:"«‘‛“‟‹⸂⸄⸉⸌⸜⸠"},{name:"Po",alias:"Other_Punctuation",bmp:"!-#%-'\\*,\\.\\/:;\\?@\\¡§¶·¿;·՚-՟։׀׃׆׳״؉؊،؍؛؞؟٪-٭۔܀-܍߷-߹࠰-࠾࡞।॥॰৽੶૰಄෴๏๚๛༄-༒༔྅࿐-࿔࿙࿚၊-၏჻፠-፨᙭᙮᛫-᛭᜵᜶។-៖៘-៚᠀-᠅᠇-᠊᥄᥅᨞᨟᪠-᪦᪨-᪭᭚-᭠᯼-᯿᰻-᰿᱾᱿᳀-᳇᳓‖‗†-‧‰-‸※-‾⁁-⁃⁇-⁑⁓⁕-⁞⳹-⳼⳾⳿⵰⸀⸁⸆-⸈⸋⸎-⸖⸘⸙⸛⸞⸟⸪-⸮⸰-⸹⸼-⸿⹁⹃-⹎、-〃〽・꓾꓿꘍-꘏꙳꙾꛲-꛷꡴-꡷꣎꣏꣸-꣺꣼꤮꤯꥟꧁-꧍꧞꧟꩜-꩟꫞꫟꫰꫱꯫︐-︖︙︰﹅﹆﹉-﹌﹐-﹒﹔-﹗﹟-﹡﹨﹪﹫！-＃％-＇＊，．／：；？＠＼｡､･",astral:"�[�-���]|𐕯|�[����-���-��-��-�]|�[�-�]|�[�-����-��-����-����-��-��]|�[�-�����-��-��-��-�]|�[��-��-��-�]|�[�-�����]|�[�-�]|�[����-��]|�[�-�]|𛲟|�[�-�]|�[��]"},{name:"Ps",alias:"Open_Punctuation",bmp:"\\(\\[\\{༺༼᚛‚„⁅⁽₍⌈⌊〈❨❪❬❮❰❲❴⟅⟦⟨⟪⟬⟮⦃⦅⦇⦉⦋⦍⦏⦑⦓⦕⦗⧘⧚⧼⸢⸤⸦⸨⹂〈《「『【〔〖〘〚〝﴿︗︵︷︹︻︽︿﹁﹃﹇﹙﹛﹝（［｛｟｢"},{name:"S",alias:"Symbol",bmp:"\\$\\+<->\\^`\\|~¢-¦¨©¬®-±´¸×÷˂-˅˒-˟˥-˫˭˯-˿͵΄΅϶҂֍-֏؆-؈؋؎؏۞۩۽۾߶߾߿৲৳৺৻૱୰௳-௺౿൏൹฿༁-༃༓༕-༗༚-༟༴༶༸྾-࿅࿇-࿌࿎࿏࿕-࿘႞႟᎐-᎙៛᥀᧞-᧿᭡-᭪᭴-᭼᾽᾿-῁῍-῏῝-῟῭-`´῾⁄⁒⁺-⁼₊-₌₠-₿℀℁℃-℆℈℉℔№-℘℞-℣℥℧℩℮℺℻⅀-⅄⅊-⅍⅏↊↋←-⌇⌌-⌨⌫-␦⑀-⑊⒜-ⓩ─-❧➔-⟄⟇-⟥⟰-⦂⦙-⧗⧜-⧻⧾-⭳⭶-⮕⮘-⯈⯊-⯾⳥-⳪⺀-⺙⺛-⻳⼀-⿕⿰-⿻〄〒〓〠〶〷〾〿゛゜㆐㆑㆖-㆟㇀-㇣㈀-㈞㈪-㉇㉐㉠-㉿㊊-㊰㋀-㋾㌀-㏿䷀-䷿꒐-꓆꜀-꜖꜠꜡꞉꞊꠨-꠫꠶-꠹꩷-꩹꭛﬩﮲-﯁﷼﷽﹢﹤-﹦﹩＄＋＜-＞＾｀｜～￠-￦￨-￮￼�",astral:"�[�-��-��-��-���-�]|�[���]|𑜿|�[�-��]|𛲜|�[�-��-��-��-����-��-��-���-�]|�[����������]|�[�-��-��-��-���]|�[����]|�[�-��-��-��-��-��-��-��-��-��-��-����-��-�]|�[�-��-��-��-��-�]|�[�-��-��-��-��-��-��-��-��-���-��-��-��-��-�]"},{name:"Sc",alias:"Currency_Symbol",bmp:"\\$¢-¥֏؋߾߿৲৳৻૱௹฿៛₠-₿꠸﷼﹩＄￠￡￥￦",astral:"𞲰"},{name:"Sk",alias:"Modifier_Symbol",bmp:"\\^`¨¯´¸˂-˅˒-˟˥-˫˭˯-˿͵΄΅᾽᾿-῁῍-῏῝-῟῭-`´῾゛゜꜀-꜖꜠꜡꞉꞊꭛﮲-﯁＾｀￣",astral:"�[�-�]"},{name:"Sm",alias:"Math_Symbol",bmp:"\\+<->\\|~¬±×÷϶؆-؈⁄⁒⁺-⁼₊-₌℘⅀-⅄⅋←-↔↚↛↠↣↦↮⇎⇏⇒⇔⇴-⋿⌠⌡⍼⎛-⎳⏜-⏡▷◁◸-◿♯⟀-⟄⟇-⟥⟰-⟿⤀-⦂⦙-⧗⧜-⧻⧾-⫿⬰-⭄⭇-⭌﬩﹢﹤-﹦＋＜-＞｜～￢￩-￬",astral:"�[����������]|�[��]"},{name:"So",alias:"Other_Symbol",bmp:"¦©®°҂֍֎؎؏۞۩۽۾߶৺୰௳-௸௺౿൏൹༁-༃༓༕-༗༚-༟༴༶༸྾-࿅࿇-࿌࿎࿏࿕-࿘႞႟᎐-᎙᥀᧞-᧿᭡-᭪᭴-᭼℀℁℃-℆℈℉℔№℗℞-℣℥℧℩℮℺℻⅊⅌⅍⅏↊↋↕-↙↜-↟↡↢↤↥↧-↭↯-⇍⇐⇑⇓⇕-⇳⌀-⌇⌌-⌟⌢-⌨⌫-⍻⍽-⎚⎴-⏛⏢-␦⑀-⑊⒜-ⓩ─-▶▸-◀◂-◷☀-♮♰-❧➔-➿⠀-⣿⬀-⬯⭅⭆⭍-⭳⭶-⮕⮘-⯈⯊-⯾⳥-⳪⺀-⺙⺛-⻳⼀-⿕⿰-⿻〄〒〓〠〶〷〾〿㆐㆑㆖-㆟㇀-㇣㈀-㈞㈪-㉇㉐㉠-㉿㊊-㊰㋀-㋾㌀-㏿䷀-䷿꒐-꓆꠨-꠫꠶꠷꠹꩷-꩹﷽￤￨￭￮￼�",astral:"�[�-��-��-��-���-�]|�[���]|𑜿|�[�-��]|𛲜|�[�-��-��-��-����-��-��-���-�]|�[�-��-��-��-���]|𞲬|�[�-��-��-��-��-��-��-��-��-��-��-����-��-�]|�[�-��-��-��-��-�]|�[�-��-��-��-��-��-��-��-��-���-��-��-��-��-�]"},{name:"Z",alias:"Separator",bmp:"    - \u2028\u2029  　"},{name:"Zl",alias:"Line_Separator",bmp:"\u2028"},{name:"Zp",alias:"Paragraph_Separator",bmp:"\u2029"},{name:"Zs",alias:"Space_Separator",bmp:"    -   　"}]},{}],83:[function(e,t,i){t.exports=[{name:"ASCII",bmp:"\0-"},{name:"Alphabetic",
bmp:"A-Za-zªµºÀ-ÖØ-öø-ˁˆ-ˑˠ-ˤˬˮͅͰ-ʹͶͷͺ-ͽͿΆΈ-ΊΌΎ-ΡΣ-ϵϷ-ҁҊ-ԯԱ-Ֆՙՠ-ֈְ-ׇֽֿׁׂׅׄא-תׯ-ײؐ-ؚؠ-ٗٙ-ٟٮ-ۓە-ۜۡ-ۭۨ-ۯۺ-ۼۿܐ-ܿݍ-ޱߊ-ߪߴߵߺࠀ-ࠗࠚ-ࠬࡀ-ࡘࡠ-ࡪࢠ-ࢴࢶ-ࢽࣔ-ࣣࣟ-ࣰࣩ-ऻऽ-ौॎ-ॐॕ-ॣॱ-ঃঅ-ঌএঐও-নপ-রলশ-হঽ-ৄেৈোৌৎৗড়ঢ়য়-ৣৰৱৼਁ-ਃਅ-ਊਏਐਓ-ਨਪ-ਰਲਲ਼ਵਸ਼ਸਹਾ-ੂੇੈੋੌੑਖ਼-ੜਫ਼ੰ-ੵઁ-ઃઅ-ઍએ-ઑઓ-નપ-રલળવ-હઽ-ૅે-ૉોૌૐૠ-ૣૹ-ૼଁ-ଃଅ-ଌଏଐଓ-ନପ-ରଲଳଵ-ହଽ-ୄେୈୋୌୖୗଡ଼ଢ଼ୟ-ୣୱஂஃஅ-ஊஎ-ஐஒ-கஙசஜஞடணதந-பம-ஹா-ூெ-ைொ-ௌௐௗఀ-ఃఅ-ఌఎ-ఐఒ-నప-హఽ-ౄె-ైొ-ౌౕౖౘ-ౚౠ-ౣಀ-ಃಅ-ಌಎ-ಐಒ-ನಪ-ಳವ-ಹಽ-ೄೆ-ೈೊ-ೌೕೖೞೠ-ೣೱೲഀ-ഃഅ-ഌഎ-ഐഒ-ഺഽ-ൄെ-ൈൊ-ൌൎൔ-ൗൟ-ൣൺ-ൿංඃඅ-ඖක-නඳ-රලව-ෆා-ුූෘ-ෟෲෳก-ฺเ-ๆํກຂຄງຈຊຍດ-ທນ-ຟມ-ຣລວສຫອ-ູົ-ຽເ-ໄໆໍໜ-ໟༀཀ-ཇཉ-ཬཱ-ཱྀྈ-ྗྙ-ྼက-ံးျ-ဿၐ-ၢၥ-ၨၮ-ႆႎႜႝႠ-ჅჇჍა-ჺჼ-ቈቊ-ቍቐ-ቖቘቚ-ቝበ-ኈኊ-ኍነ-ኰኲ-ኵኸ-ኾዀዂ-ዅወ-ዖዘ-ጐጒ-ጕጘ-ፚ፟ᎀ-ᎏᎠ-Ᏽᏸ-ᏽᐁ-ᙬᙯ-ᙿᚁ-ᚚᚠ-ᛪᛮ-ᛸᜀ-ᜌᜎ-ᜓᜠ-ᜳᝀ-ᝓᝠ-ᝬᝮ-ᝰᝲᝳក-ឳា-ៈៗៜᠠ-ᡸᢀ-ᢪᢰ-ᣵᤀ-ᤞᤠ-ᤫᤰ-ᤸᥐ-ᥭᥰ-ᥴᦀ-ᦫᦰ-ᧉᨀ-ᨛᨠ-ᩞᩡ-ᩴᪧᬀ-ᬳᬵ-ᭃᭅ-ᭋᮀ-ᮩᮬ-ᮯᮺ-ᯥᯧ-ᯱᰀ-ᰵᱍ-ᱏᱚ-ᱽᲀ-ᲈᲐ-ᲺᲽ-Ჿᳩ-ᳬᳮ-ᳳᳵᳶᴀ-ᶿᷧ-ᷴḀ-ἕἘ-Ἕἠ-ὅὈ-Ὅὐ-ὗὙὛὝὟ-ώᾀ-ᾴᾶ-ᾼιῂ-ῄῆ-ῌῐ-ΐῖ-Ίῠ-Ῥῲ-ῴῶ-ῼⁱⁿₐ-ₜℂℇℊ-ℓℕℙ-ℝℤΩℨK-ℭℯ-ℹℼ-ℿⅅ-ⅉⅎⅠ-ↈⒶ-ⓩⰀ-Ⱞⰰ-ⱞⱠ-ⳤⳫ-ⳮⳲⳳⴀ-ⴥⴧⴭⴰ-ⵧⵯⶀ-ⶖⶠ-ⶦⶨ-ⶮⶰ-ⶶⶸ-ⶾⷀ-ⷆⷈ-ⷎⷐ-ⷖⷘ-ⷞⷠ-ⷿⸯ々-〇〡-〩〱-〵〸-〼ぁ-ゖゝ-ゟァ-ヺー-ヿㄅ-ㄯㄱ-ㆎㆠ-ㆺㇰ-ㇿ㐀-䶵一-鿯ꀀ-ꒌꓐ-ꓽꔀ-ꘌꘐ-ꘟꘪꘫꙀ-ꙮꙴ-ꙻꙿ-ꛯꜗ-ꜟꜢ-ꞈꞋ-ꞹꟷ-ꠁꠃ-ꠅꠇ-ꠊꠌ-ꠧꡀ-ꡳꢀ-ꣃꣅꣲ-ꣷꣻꣽꣾꤊ-ꤪꤰ-ꥒꥠ-ꥼꦀ-ꦲꦴ-ꦿꧏꧠ-ꧤꧦ-ꧯꧺ-ꧾꨀ-ꨶꩀ-ꩍꩠ-ꩶꩺꩾ-ꪾꫀꫂꫛ-ꫝꫠ-ꫯꫲ-ꫵꬁ-ꬆꬉ-ꬎꬑ-ꬖꬠ-ꬦꬨ-ꬮꬰ-ꭚꭜ-ꭥꭰ-ꯪ가-힣ힰ-ퟆퟋ-ퟻ豈-舘並-龎ﬀ-ﬆﬓ-ﬗיִ-ﬨשׁ-זּטּ-לּמּנּסּףּפּצּ-ﮱﯓ-ﴽﵐ-ﶏﶒ-ﷇﷰ-ﷻﹰ-ﹴﹶ-ﻼＡ-Ｚａ-ｚｦ-ﾾￂ-ￇￊ-ￏￒ-ￗￚ-ￜ",astral:"�[�-��-��-����-��-��-��-��-��-��-��-��-��-��-��-��-�]|�[�-��-��-��-��-��-��-��-�]|�[�-���-�����-��-��-��-����-��-��-����-����-��-��-��-��-��-��-��-��-��-��-�]|�[�-��-��-��-��-���-�]|�[�-��-��-��-��-��-���-��-����-��-����-���-��-��-��-��-��-����-��-����-��-��������-�]|�[�-��-��-��-�����-��-��-��-����-��-��-�]|�[�-��-���-��-��-��-���-�]|�[�-��-��-���-��-��-��-����-�����-�����-����-����-���-�]|�[�-�]|�[�-��-�]|[��-��-��-��-��-�][�-�]|�[�-�]|�[�-�]|�[�-��-��-��-��-��-��-�]|�[�-��-��-��-���]|�[�-�]|�[�-�]|�[�-��-�]|�[�-��-��-��-��]|�[�-��-�������-��-���-��-��-��-��-��-��-��-���-��-��-��-��-��-��-��-��-��-��-��-��-�]|�[�-��-��-����-�]|�[�-��-��]|�[�-��-������-��-��������-�������������-��-��-��-���-��-��-��-��-�]|�[�-��-��-�]|�[�-��-�]|�[�-��-�]|�[�-��-�]|�[�-��-�]|�[�-�]|�[�-�]"},{name:"Any",isBmpLast:!0,bmp:"\0-￿",astral:"[�-�][�-�]"},{name:"Default_Ignorable_Code_Point",bmp:"­͏؜ᅟᅠ឴឵᠋-᠎​-‏‪-‮⁠-⁯ㅤ︀-️\ufeffﾠ￰-￸",astral:"�[�-�]|�[�-�]|[�-�][�-�]"},{name:"Lowercase",bmp:"a-zªµºß-öø-ÿāăąćĉċčďđēĕėęěĝğġģĥħĩīĭįıĳĵķĸĺļľŀłńņňŉŋōŏőœŕŗřśŝşšţťŧũūŭůűųŵŷźżž-ƀƃƅƈƌƍƒƕƙ-ƛƞơƣƥƨƪƫƭưƴƶƹƺƽ-ƿǆǉǌǎǐǒǔǖǘǚǜǝǟǡǣǥǧǩǫǭǯǰǳǵǹǻǽǿȁȃȅȇȉȋȍȏȑȓȕȗșțȝȟȡȣȥȧȩȫȭȯȱȳ-ȹȼȿɀɂɇɉɋɍɏ-ʓʕ-ʸˀˁˠ-ˤͅͱͳͷͺ-ͽΐά-ώϐϑϕ-ϗϙϛϝϟϡϣϥϧϩϫϭϯ-ϳϵϸϻϼа-џѡѣѥѧѩѫѭѯѱѳѵѷѹѻѽѿҁҋҍҏґғҕҗҙқҝҟҡңҥҧҩҫҭүұҳҵҷҹһҽҿӂӄӆӈӊӌӎӏӑӓӕӗәӛӝӟӡӣӥӧөӫӭӯӱӳӵӷӹӻӽӿԁԃԅԇԉԋԍԏԑԓԕԗԙԛԝԟԡԣԥԧԩԫԭԯՠ-ֈა-ჺჽ-ჿᏸ-ᏽᲀ-ᲈᴀ-ᶿḁḃḅḇḉḋḍḏḑḓḕḗḙḛḝḟḡḣḥḧḩḫḭḯḱḳḵḷḹḻḽḿṁṃṅṇṉṋṍṏṑṓṕṗṙṛṝṟṡṣṥṧṩṫṭṯṱṳṵṷṹṻṽṿẁẃẅẇẉẋẍẏẑẓẕ-ẝẟạảấầẩẫậắằẳẵặẹẻẽếềểễệỉịọỏốồổỗộớờởỡợụủứừửữựỳỵỷỹỻỽỿ-ἇἐ-ἕἠ-ἧἰ-ἷὀ-ὅὐ-ὗὠ-ὧὰ-ώᾀ-ᾇᾐ-ᾗᾠ-ᾧᾰ-ᾴᾶᾷιῂ-ῄῆῇῐ-ΐῖῗῠ-ῧῲ-ῴῶῷⁱⁿₐ-ₜℊℎℏℓℯℴℹℼℽⅆ-ⅉⅎⅰ-ⅿↄⓐ-ⓩⰰ-ⱞⱡⱥⱦⱨⱪⱬⱱⱳⱴⱶ-ⱽⲁⲃⲅⲇⲉⲋⲍⲏⲑⲓⲕⲗⲙⲛⲝⲟⲡⲣⲥⲧⲩⲫⲭⲯⲱⲳⲵⲷⲹⲻⲽⲿⳁⳃⳅⳇⳉⳋⳍⳏⳑⳓⳕⳗⳙⳛⳝⳟⳡⳣⳤⳬⳮⳳⴀ-ⴥⴧⴭꙁꙃꙅꙇꙉꙋꙍꙏꙑꙓꙕꙗꙙꙛꙝꙟꙡꙣꙥꙧꙩꙫꙭꚁꚃꚅꚇꚉꚋꚍꚏꚑꚓꚕꚗꚙꚛ-ꚝꜣꜥꜧꜩꜫꜭꜯ-ꜱꜳꜵꜷꜹꜻꜽꜿꝁꝃꝅꝇꝉꝋꝍꝏꝑꝓꝕꝗꝙꝛꝝꝟꝡꝣꝥꝧꝩꝫꝭꝯ-ꝸꝺꝼꝿꞁꞃꞅꞇꞌꞎꞑꞓ-ꞕꞗꞙꞛꞝꞟꞡꞣꞥꞧꞩꞯꞵꞷꞹꟸ-ꟺꬰ-ꭚꭜ-ꭥꭰ-ꮿﬀ-ﬆﬓ-ﬗａ-ｚ",astral:"�[�-��-�]|�[�-�]|�[�-�]|�[�-�]|�[�-��-��-��-��-���-��-��-��-��-��-��-��-��-��-��-��-��-��-��-��-��-��-��-��-��-��]|�[�-�]"},{name:"Noncharacter_Code_Point",bmp:"﷐-﷯￾￿",astral:"[����������������][��]"},{name:"Uppercase",bmp:"A-ZÀ-ÖØ-ÞĀĂĄĆĈĊČĎĐĒĔĖĘĚĜĞĠĢĤĦĨĪĬĮİĲĴĶĹĻĽĿŁŃŅŇŊŌŎŐŒŔŖŘŚŜŞŠŢŤŦŨŪŬŮŰŲŴŶŸŹŻŽƁƂƄƆƇƉ-ƋƎ-ƑƓƔƖ-ƘƜƝƟƠƢƤƦƧƩƬƮƯƱ-ƳƵƷƸƼǄǇǊǍǏǑǓǕǗǙǛǞǠǢǤǦǨǪǬǮǱǴǶ-ǸǺǼǾȀȂȄȆȈȊȌȎȐȒȔȖȘȚȜȞȠȢȤȦȨȪȬȮȰȲȺȻȽȾɁɃ-ɆɈɊɌɎͰͲͶͿΆΈ-ΊΌΎΏΑ-ΡΣ-ΫϏϒ-ϔϘϚϜϞϠϢϤϦϨϪϬϮϴϷϹϺϽ-ЯѠѢѤѦѨѪѬѮѰѲѴѶѸѺѼѾҀҊҌҎҐҒҔҖҘҚҜҞҠҢҤҦҨҪҬҮҰҲҴҶҸҺҼҾӀӁӃӅӇӉӋӍӐӒӔӖӘӚӜӞӠӢӤӦӨӪӬӮӰӲӴӶӸӺӼӾԀԂԄԆԈԊԌԎԐԒԔԖԘԚԜԞԠԢԤԦԨԪԬԮԱ-ՖႠ-ჅჇჍᎠ-ᏵᲐ-ᲺᲽ-ᲿḀḂḄḆḈḊḌḎḐḒḔḖḘḚḜḞḠḢḤḦḨḪḬḮḰḲḴḶḸḺḼḾṀṂṄṆṈṊṌṎṐṒṔṖṘṚṜṞṠṢṤṦṨṪṬṮṰṲṴṶṸṺṼṾẀẂẄẆẈẊẌẎẐẒẔẞẠẢẤẦẨẪẬẮẰẲẴẶẸẺẼẾỀỂỄỆỈỊỌỎỐỒỔỖỘỚỜỞỠỢỤỦỨỪỬỮỰỲỴỶỸỺỼỾἈ-ἏἘ-ἝἨ-ἯἸ-ἿὈ-ὍὙὛὝὟὨ-ὯᾸ-ΆῈ-ΉῘ-ΊῨ-ῬῸ-Ώℂℇℋ-ℍℐ-ℒℕℙ-ℝℤΩℨK-ℭℰ-ℳℾℿⅅⅠ-ⅯↃⒶ-ⓏⰀ-ⰮⱠⱢ-ⱤⱧⱩⱫⱭ-ⱰⱲⱵⱾ-ⲀⲂⲄⲆⲈⲊⲌⲎⲐⲒⲔⲖⲘⲚⲜⲞⲠⲢⲤⲦⲨⲪⲬⲮⲰⲲⲴⲶⲸⲺⲼⲾⳀⳂⳄⳆⳈⳊⳌⳎⳐⳒⳔⳖⳘⳚⳜⳞⳠⳢⳫⳭⳲꙀꙂꙄꙆꙈꙊꙌꙎꙐꙒꙔꙖꙘꙚꙜꙞꙠꙢꙤꙦꙨꙪꙬꚀꚂꚄꚆꚈꚊꚌꚎꚐꚒꚔꚖꚘꚚꜢꜤꜦꜨꜪꜬꜮꜲꜴꜶꜸꜺꜼꜾꝀꝂꝄꝆꝈꝊꝌꝎꝐꝒꝔꝖꝘꝚꝜꝞꝠꝢꝤꝦꝨꝪꝬꝮꝹꝻꝽꝾꞀꞂꞄꞆꞋꞍꞐꞒꞖꞘꞚꞜꞞꞠꞢꞤꞦꞨꞪ-ꞮꞰ-ꞴꞶꞸＡ-Ｚ",astral:"�[�-��-�]|�[�-�]|�[�-�]|�[�-�]|�[�-��-��-��������-��-��-����-��-��-����-��-���-��-��-��-��-��-��-��-��-��-��-��-��]|�[�-�]|�[�-��-��-�]"},{name:"White_Space",bmp:"\t-\r    - \u2028\u2029  　"}]},{}],84:[function(e,t,i){t.exports=[{name:"Adlam",astral:"�[�-��-���]"},{name:"Ahom",astral:"�[�-��-��-�]"},{name:"Anatolian_Hieroglyphs",astral:"�[�-�]"},{name:"Arabic",bmp:"؀-؄؆-؋؍-ؚ؜؞ؠ-ؿف-يٖ-ٯٱ-ۜ۞-ۿݐ-ݿࢠ-ࢴࢶ-ࢽ࣓-ࣣ࣡-ࣿﭐ-﯁ﯓ-ﴽﵐ-ﶏﶒ-ﷇﷰ-﷽ﹰ-ﹴﹶ-ﻼ",astral:"�[�-�]|�[�-��-������-��-��������-�������������-��-��-��-���-��-��-��-��-���]"},{name:"Armenian",bmp:"Ա-Ֆՙ-ֈ֊֍-֏ﬓ-ﬗ"},{name:"Avestan",astral:"�[�-��-�]"},{name:"Balinese",bmp:"ᬀ-ᭋ᭐-᭼"},{name:"Bamum",bmp:"ꚠ-꛷",astral:"�[�-�]"},{name:"Bassa_Vah",astral:"�[�-��-�]"},{name:"Batak",bmp:"ᯀ-᯳᯼-᯿"},{name:"Bengali",bmp:"ঀ-ঃঅ-ঌএঐও-নপ-রলশ-হ়-ৄেৈো-ৎৗড়ঢ়য়-ৣ০-৾"},{name:"Bhaiksuki",astral:"�[�-��-��-��-�]"},{name:"Bopomofo",bmp:"˪˫ㄅ-ㄯㆠ-ㆺ"},{name:"Brahmi",astral:"�[�-��-��]"},{name:"Braille",bmp:"⠀-⣿"},{name:"Buginese",bmp:"ᨀ-ᨛ᨞᨟"},{name:"Buhid",bmp:"ᝀ-ᝓ"},{name:"Canadian_Aboriginal",bmp:"᐀-ᙿᢰ-ᣵ"},{name:"Carian",astral:"�[�-�]"},{name:"Caucasian_Albanian",astral:"�[�-��]"},{name:"Chakma",astral:"�[�-��-�]"},{name:"Cham",bmp:"ꨀ-ꨶꩀ-ꩍ꩐-꩙꩜-꩟"},{name:"Cherokee",bmp:"Ꭰ-Ᏽᏸ-ᏽꭰ-ꮿ"},{name:"Common",bmp:"\0-@\\[-`\\{-©«-¹»-¿×÷ʹ-˟˥-˩ˬ-˿ʹ;΅·։؅،؛؟ـ۝࣢।॥฿࿕-࿘჻᛫-᛭᜵᜶᠂᠃᠅᳓᳡ᳩ-ᳬᳮ-ᳳᳵ-᳷ -​‎-⁤⁦-⁰⁴-⁾₀-₎₠-₿℀-℥℧-℩ℬ-ℱℳ-⅍⅏-⅟↉-↋←-␦⑀-⑊①-⟿⤀-⭳⭶-⮕⮘-⯈⯊-⯾⸀-⹎⿰-⿻　-〄〆〈-〠〰-〷〼-〿゛゜゠・ー㆐-㆟㇀-㇣㈠-㉟㉿-㋏㍘-㏿䷀-䷿꜀-꜡ꞈ-꞊꠰-꠹꤮ꧏ꭛﴾﴿︐-︙︰-﹒﹔-﹦﹨-﹫\ufeff！-＠［-｀｛-･ｰﾞﾟ￠-￦￨-￮￹-�",astral:"�[�-��-��-��-��-��-�]|�[�-�]|�[�-��-��-��-����-��-��-��-��-�]|�[�-��-�������-��-���-��-��-��-��-��-��-��-���-��-��-��-�]|�[�-�]|�[�-��-��-��-��-��-��-��-��-��-����-��-����-��-�]|�[�-��-��-��-��-�]|�[�-��-��-��-��-��-��-��-��-���-��-��-��-��-�]|�[��-�]"},{name:"Coptic",bmp:"Ϣ-ϯⲀ-ⳳ⳹-⳿"},{name:"Cuneiform",astral:"�[�-�]|�[�-��-��-�]"},{name:"Cypriot",astral:"�[�-���-�����]"},{name:"Cyrillic",bmp:"Ѐ-҄҇-ԯᲀ-ᲈᴫᵸⷠ-ⷿꙀ-ꚟ︮︯"},{name:"Deseret",astral:"�[�-�]"},{name:"Devanagari",bmp:"ऀ-ॐ॓-ॣ०-ॿ꣠-ꣿ"},{name:"Dogra",astral:"�[�-�]"},{name:"Duployan",astral:"�[�-��-��-��-��-�]"},{name:"Egyptian_Hieroglyphs",astral:"�[�-�]|�[�-�]"},{name:"Elbasan",astral:"�[�-�]"},{name:"Ethiopic",bmp:"ሀ-ቈቊ-ቍቐ-ቖቘቚ-ቝበ-ኈኊ-ኍነ-ኰኲ-ኵኸ-ኾዀዂ-ዅወ-ዖዘ-ጐጒ-ጕጘ-ፚ፝-፼ᎀ-᎙ⶀ-ⶖⶠ-ⶦⶨ-ⶮⶰ-ⶶⶸ-ⶾⷀ-ⷆⷈ-ⷎⷐ-ⷖⷘ-ⷞꬁ-ꬆꬉ-ꬎꬑ-ꬖꬠ-ꬦꬨ-ꬮ"},{name:"Georgian",bmp:"Ⴀ-ჅჇჍა-ჺჼ-ჿᲐ-ᲺᲽ-Ჿⴀ-ⴥⴧⴭ"},{name:"Glagolitic",bmp:"Ⰰ-Ⱞⰰ-ⱞ",astral:"�[�-��-��-����-�]"},{name:"Gothic",astral:"�[�-�]"},{name:"Grantha",astral:"�[�-��-����-��-����-��-����-����-��-��-�]"},{name:"Greek",bmp:"Ͱ-ͳ͵-ͷͺ-ͽͿ΄ΆΈ-ΊΌΎ-ΡΣ-ϡϰ-Ͽᴦ-ᴪᵝ-ᵡᵦ-ᵪᶿἀ-ἕἘ-Ἕἠ-ὅὈ-Ὅὐ-ὗὙὛὝὟ-ώᾀ-ᾴᾶ-ῄῆ-ΐῖ-Ί῝-`ῲ-ῴῶ-῾Ωꭥ",astral:"�[�-��]|�[�-�]"},{name:"Gujarati",bmp:"ઁ-ઃઅ-ઍએ-ઑઓ-નપ-રલળવ-હ઼-ૅે-ૉો-્ૐૠ-ૣ૦-૱ૹ-૿"},{name:"Gunjala_Gondi",astral:"�[�-����-����-��-�]"},{name:"Gurmukhi",bmp:"ਁ-ਃਅ-ਊਏਐਓ-ਨਪ-ਰਲਲ਼ਵਸ਼ਸਹ਼ਾ-ੂੇੈੋ-੍ੑਖ਼-ੜਫ਼੦-੶"},{name:"Han",bmp:"⺀-⺙⺛-⻳⼀-⿕々〇〡-〩〸-〻㐀-䶵一-鿯豈-舘並-龎",astral:"[�-��-��-��-�][�-�]|�[�-��-�]|�[�-��-�]|�[�-��-�]|�[�-��-�]|�[�-�]|�[�-�]"},{name:"Hangul",bmp:"ᄀ-ᇿ〮〯ㄱ-ㆎ㈀-㈞㉠-㉾ꥠ-ꥼ가-힣ힰ-ퟆퟋ-ퟻﾠ-ﾾￂ-ￇￊ-ￏￒ-ￗￚ-ￜ"},{name:"Hanifi_Rohingya",astral:"�[�-��-�]"},{name:"Hanunoo",bmp:"ᜠ-᜴"},{name:"Hatran",astral:"�[�-����-�]"},{name:"Hebrew",bmp:"֑-ׇא-תׯ-״יִ-זּטּ-לּמּנּסּףּפּצּ-ﭏ"},{name:"Hiragana",bmp:"ぁ-ゖゝ-ゟ",astral:"�[�-�]|🈀"},{name:"Imperial_Aramaic",astral:"�[�-��-�]"},{name:"Inherited",bmp:"̀-ًͯ҅҆-ٰٕ॒॑᪰-᪾᳐-᳔᳒-᳢᳠-᳨᳭᳴᳸᳹᷀-᷹᷻-᷿‌‍⃐-〪⃰-゙゚〭︀-️︠-︭",astral:"�[��]|𑌻|�[�-��-��-��-�]|�[�-�]"},{name:"Inscriptional_Pahlavi",astral:"�[�-��-�]"},{name:"Inscriptional_Parthian",astral:"�[�-��-�]"},{name:"Javanese",bmp:"ꦀ-꧍꧐-꧙꧞꧟"},{name:"Kaithi",astral:"�[�-��]"},{name:"Kannada",bmp:"ಀ-ಌಎ-ಐಒ-ನಪ-ಳವ-ಹ಼-ೄೆ-ೈೊ-್ೕೖೞೠ-ೣ೦-೯ೱೲ"},{name:"Katakana",bmp:"ァ-ヺヽ-ヿㇰ-ㇿ㋐-㋾㌀-㍗ｦ-ｯｱ-ﾝ",astral:"𛀀"},{name:"Kayah_Li",bmp:"꤀-꤭꤯"},{name:"Kharoshthi",astral:"�[�-����-��-��-��-��-��-�]"},{name:"Khmer",bmp:"ក-៝០-៩៰-៹᧠-᧿"},{name:"Khojki",astral:"�[�-��-�]"},{name:"Khudawadi",astral:"�[�-��-�]"},{name:"Lao",bmp:"ກຂຄງຈຊຍດ-ທນ-ຟມ-ຣລວສຫອ-ູົ-ຽເ-ໄໆ່-ໍ໐-໙ໜ-ໟ"},{name:"Latin",bmp:"A-Za-zªºÀ-ÖØ-öø-ʸˠ-ˤᴀ-ᴥᴬ-ᵜᵢ-ᵥᵫ-ᵷᵹ-ᶾḀ-ỿⁱⁿₐ-ₜKÅℲⅎⅠ-ↈⱠ-ⱿꜢ-ꞇꞋ-ꞹꟷ-ꟿꬰ-ꭚꭜ-ꭤﬀ-ﬆＡ-Ｚａ-ｚ"},{name:"Lepcha",bmp:"ᰀ-᰷᰻-᱉ᱍ-ᱏ"},{name:"Limbu",bmp:"ᤀ-ᤞᤠ-ᤫᤰ-᤻᥀᥄-᥏"},{name:"Linear_A",astral:"�[�-��-��-�]"},{name:"Linear_B",astral:"�[�-��-��-����-��-��-�]"},{name:"Lisu",bmp:"ꓐ-꓿"},{name:"Lycian",astral:"�[�-�]"},{name:"Lydian",astral:"�[�-��]"},{name:"Mahajani",astral:"�[�-�]"},{name:"Makasar",astral:"�[�-�]"},{name:"Malayalam",bmp:"ഀ-ഃഅ-ഌഎ-ഐഒ-ൄെ-ൈൊ-൏ൔ-ൣ൦-ൿ"},{name:"Mandaic",bmp:"ࡀ-࡛࡞"},{name:"Manichaean",astral:"�[�-��-�]"},{name:"Marchen",astral:"�[�-��-��-�]"},{name:"Masaram_Gondi",astral:"�[�-����-�����-��-�]"},{name:"Medefaidrin",astral:"�[�-�]"},{name:"Meetei_Mayek",bmp:"ꫠ-꫶ꯀ-꯭꯰-꯹"},{name:"Mende_Kikakui",astral:"�[�-��-�]"},{name:"Meroitic_Cursive",astral:"�[�-��-��-�]"},{name:"Meroitic_Hieroglyphs",astral:"�[�-�]"},{name:"Miao",astral:"�[�-��-��-�]"},{name:"Modi",astral:"�[�-��-�]"},{name:"Mongolian",bmp:"᠀᠁᠄᠆-᠎᠐-᠙ᠠ-ᡸᢀ-ᢪ",astral:"�[�-�]"},{name:"Mro",astral:"�[�-��-���]"},{name:"Multani",astral:"�[�-���-��-��-�]"},{name:"Myanmar",bmp:"က-႟ꧠ-ꧾꩠ-ꩿ"},{name:"Nabataean",astral:"�[�-��-�]"},{name:"New_Tai_Lue",bmp:"ᦀ-ᦫᦰ-ᧉ᧐-᧚᧞᧟"},{name:"Newa",astral:"�[�-����]"},{name:"Nko",bmp:"߀-ߺ߽-߿"},{name:"Nushu",astral:"𖿡|�[�-�]"},{name:"Ogham",bmp:" -᚜"},{name:"Ol_Chiki",bmp:"᱐-᱿"},{name:"Old_Hungarian",astral:"�[�-��-��-�]"},{name:"Old_Italic",astral:"�[�-��-�]"},{name:"Old_North_Arabian",astral:"�[�-�]"},{name:"Old_Permic",astral:"�[�-�]"},{name:"Old_Persian",astral:"�[�-��-�]"},{name:"Old_Sogdian",astral:"�[�-�]"},{name:"Old_South_Arabian",astral:"�[�-�]"},{name:"Old_Turkic",astral:"�[�-�]"},{name:"Oriya",bmp:"ଁ-ଃଅ-ଌଏଐଓ-ନପ-ରଲଳଵ-ହ଼-ୄେୈୋ-୍ୖୗଡ଼ଢ଼ୟ-ୣ୦-୷"},{name:"Osage",astral:"�[�-��-�]"},{name:"Osmanya",astral:"�[�-��-�]"},{name:"Pahawh_Hmong",astral:"�[�-��-��-��-��-�]"},{name:"Palmyrene",astral:"�[�-�]"},{name:"Pau_Cin_Hau",astral:"�[�-�]"},{name:"Phags_Pa",bmp:"ꡀ-꡷"},{name:"Phoenician",astral:"�[�-��]"},{name:"Psalter_Pahlavi",astral:"�[�-��-��-�]"},{name:"Rejang",bmp:"ꤰ-꥓꥟"},{name:"Runic",bmp:"ᚠ-ᛪᛮ-ᛸ"},{name:"Samaritan",bmp:"ࠀ-࠭࠰-࠾"},{name:"Saurashtra",bmp:"ꢀ-ꣅ꣎-꣙"},{name:"Sharada",astral:"�[�-��-�]"},{name:"Shavian",astral:"�[�-�]"},{name:"Siddham",astral:"�[�-��-�]"},{name:"SignWriting",astral:"�[�-��-��-�]"},{name:"Sinhala",bmp:"ංඃඅ-ඖක-නඳ-රලව-ෆ්ා-ුූෘ-ෟ෦-෯ෲ-෴",astral:"�[�-�]"},{name:"Sogdian",astral:"�[�-�]"},{name:"Sora_Sompeng",astral:"�[�-��-�]"},{name:"Soyombo",astral:"�[�-��-�]"},{name:"Sundanese",bmp:"ᮀ-ᮿ᳀-᳇"},{name:"Syloti_Nagri",bmp:"ꠀ-꠫"},{name:"Syriac",bmp:"܀-܍܏-݊ݍ-ݏࡠ-ࡪ"},{name:"Tagalog",bmp:"ᜀ-ᜌᜎ-᜔"},{name:"Tagbanwa",bmp:"ᝠ-ᝬᝮ-ᝰᝲᝳ"},{name:"Tai_Le",bmp:"ᥐ-ᥭᥰ-ᥴ"},{name:"Tai_Tham",bmp:"ᨠ-ᩞ᩠-᩿᩼-᪉᪐-᪙᪠-᪭"},{name:"Tai_Viet",bmp:"ꪀ-ꫂꫛ-꫟"},{name:"Takri",astral:"�[�-��-�]"},{name:"Tamil",bmp:"ஂஃஅ-ஊஎ-ஐஒ-கஙசஜஞடணதந-பம-ஹா-ூெ-ைொ-்ௐௗ௦-௺"},{name:"Tangut",astral:"𖿠|[�-�][�-�]|�[�-�]|�[�-�]"},{name:"Telugu",bmp:"ఀ-ఌఎ-ఐఒ-నప-హఽ-ౄె-ైొ-్ౕౖౘ-ౚౠ-ౣ౦-౯౸-౿"},{name:"Thaana",bmp:"ހ-ޱ"},{name:"Thai",bmp:"ก-ฺเ-๛"},{name:"Tibetan",bmp:"ༀ-ཇཉ-ཬཱ-ྗྙ-ྼ྾-࿌࿎-࿔࿙࿚"},{name:"Tifinagh",bmp:"ⴰ-ⵧⵯ⵰⵿"},{name:"Tirhuta",astral:"�[�-��-�]"},{name:"Ugaritic",astral:"�[�-��]"},{name:"Vai",bmp:"ꔀ-ꘫ"},{name:"Warang_Citi",astral:"�[�-��]"},{name:"Yi",bmp:"ꀀ-ꒌ꒐-꓆"},{name:"Zanabazar_Square",astral:"�[�-�]"}]},{}]},{},[8])(8)}),define("dataSource/util/settingsUtility",["require","underscore"],function(e){"use strict";var t=e("underscore");return{deepDefaults:function(e,i){return t.reduce(i,function(i,n,a){return i[a]=e[a]?t.defaults(e[a],n):n,i},{})}}}),define("dataSource/model/JdbcDriverModel",["require","backbone","underscore","xregexp","settings!dataSourcePatterns","dataSource/util/settingsUtility"],function(e){"use strict";var t=e("backbone"),i=e("underscore"),n=e("xregexp"),a=e("settings!dataSourcePatterns"),s=e("dataSource/util/settingsUtility"),r=t.Model.extend({idAttribute:"jdbcDriverClass",defaults:{defaultValues:{},jdbcDriverClass:"",label:"",available:!1,isDefault:!1,jdbcUrl:"",uploaded:!1},initialize:function(e,t){var o=s.deepDefaults(t,{dataSourcePatterns:a});r.DYNAMIC_URL_PART_PATTERN=o.dataSourcePatterns.dynamicUrlPartPattern,r.VALIDATION_PATTERNS=i.reduce(o.dataSourcePatterns,function(e,t,i){return e[i]=n(t),e},{})},isOtherDriver:function(){return this.get("jdbcDriverClass")===r.OTHER_DRIVER},isUploadedDriver:function(){return!0===this.get("uploaded")},getCustomAttributes:function(){if(this.isOtherDriver())return[];var e=this._getRegExpFieldGroupsFromConnectionUrlTemplate(),t=[];return i.each(e,function(e){return t.push(e[1])}),t},convertUrlTemplateToRegex:function(){var e,t=this.get("jdbcUrl");t=t.replace(/\?/g,"\\?"),t=t.replace(/\[TMPDIR\/\]/g,"\\[TMPDIR/\\]");for(var i in r.VALIDATION_PATTERNS)e=new RegExp("\\$\\["+i+"\\]","g"),t=t.replace(e,r.DYNAMIC_URL_PART_PATTERN);return"^"+t},parse:function(e){return e.isDefault=!!e.isDefault,e.defaultValues&&(e.defaultValues=i.reduce(e.defaultValues,function(e,t){return e[t.key]=t.value,e},{})),e},_getRegExpFieldGroupsFromConnectionUrlTemplate:function(){for(var e,t=[],n=[];!i.isNull(e=r.FIELD_TEMPLATE_REGEXP.exec(this.get("jdbcUrl")));)i.isArray(e)&&2===e.length&&-1===n.indexOf(e[0])&&(t.push(e),n.push(e[0]));return t}},{FIELD_TEMPLATE_REGEXP:/\$\[([^\]]+)\]/g,OTHER_DRIVER:"other"});return r}),define("dataSource/collection/JdbcDriverCollection",["require","backbone","underscore","dataSource/model/JdbcDriverModel","jrs.configs"],function(e){"use strict";var t=e("backbone"),i=e("underscore"),n=e("dataSource/model/JdbcDriverModel"),a=e("jrs.configs");return t.Collection.extend({model:n,url:a.contextPath+"/rest_v2/jdbcDrivers",initialize:function(e,t){this.options=t,this.driverUploadEnabled=!1},getDefaultDriver:function(){var e=this.find(function(e){return!i.isUndefined(e.get("isDefault"))&&!1!==e.get("isDefault")});return e||this.first()},set:function(e,n){return void 0===n&&(n={}),i.extend(n,this.options),t.Collection.prototype.set.call(this,e,n)},getDriverByClass:function(e){var t=this.findWhere({jdbcDriverClass:e});return t||this.findWhere({jdbcDriverClass:n.OTHER_DRIVER})},getDriverByName:function(e){return this.findWhere({name:e})},getAllPossibleCustomAttributes:function(){return i.keys(n.VALIDATION_PATTERNS)},fetch:function(e){return i.defaults(e||(e={}),{headers:{Accept:"application/hal+json"}}),t.Collection.prototype.fetch.call(this,e)},parse:function(e){var i=t.Collection.prototype.parse.apply(this,arguments);return i._links&&i._links.create&&i._links.edit&&(this.driverUploadEnabled=!0),i.jdbcDrivers?i.jdbcDrivers:i},markDriverAsAvailable:function(e){this.models.find(function(t){return t.id===e}).set("available",!0)}})}),define("dataSource/model/JdbcDataSourceModel",["require","dataSource/model/BaseDataSourceModel","dataSource/model/JdbcDriverModel","dataSource/collection/JdbcDriverCollection","settings!dataSourcePatterns","dataSource/enum/connectionTypes","underscore","jquery","xregexp","bundle!jasperserver_messages","bi/repository/enum/repositoryResourceTypes","bundle!jasperserver_config"],function(e){"use strict";var t=e("dataSource/model/BaseDataSourceModel"),i=e("dataSource/model/JdbcDriverModel"),n=e("dataSource/collection/JdbcDriverCollection"),a=e("settings!dataSourcePatterns"),s=e("dataSource/enum/connectionTypes"),r=e("underscore"),o=e("jquery"),l=e("xregexp"),c=l(a.forbidWhitespacesPattern),d=e("bundle!jasperserver_messages"),u=e("bi/repository/enum/repositoryResourceTypes"),h=e("bundle!jasperserver_config"),p=function(){var e={};return r.extend(e,t.prototype.validation,{connectionUrl:[{required:!0,msg:d["ReportDataSourceValidator.error.not.empty.reportDataSource.connectionUrl"]},{fn:function(e,t,i){if(!this.drivers.getDriverByClass(i.selectedDriverClass).get("allowSpacesInDbName")&&!c.test(e))return d["ReportDataSourceValidator.error.invalid.chars.reportDataSource.connectionUrl"]}}]}),e}();return t.extend({JDBC_BUNDLE_PREFIX:"resource.dataSource.jdbc.",otherDriverIsPresent:!0,type:u.JDBC_DATA_SOURCE,defaults:function(){var e={};return r.extend(e,t.prototype.defaults,{driverClass:"",selectedDriverClass:"",username:"",password:"",timezone:"",connectionUrl:"",isOtherDriver:!1,connectionType:s.JDBC}),e}(),validation:function(){return r.extend({},p)}(),initialize:function(e,i){t.prototype.initialize.apply(this,arguments),this.initialization=o.Deferred(),this.drivers=new n([],this.options);var a=this;this.fetchDrivers().then(function(){a.isNew()?a.setCustomAttributesDefaultValues(a.drivers.getDefaultDriver()):(a.set("selectedDriverClass",a.get("driverClass")),a.set(a.getCustomAttributeValuesFromConnectionUrl()),a.set("password",h["input.password.substitution"]),a.extendValidation());var e=r.map(a.drivers.getAllPossibleCustomAttributes(),function(e){return"change:"+e}).join(" ");a.on(e,a.setConnectionUrlFromCustomAttributes),a.on("change:connectionUrl",a.setCustomAttributesFromConnectionUrl),a.on("change:selectedDriverClass",a.changeSelectedDriver),a.initialization.resolve()})},fetchDrivers:function(){var e=this;return this.drivers.fetch({reset:!0}).done(function(){var t=r.groupBy(e.drivers.models,function(e){return e.attributes.available});r.each(t,function(e,i){t[i]=r.sortBy(e,function(e){return e.attributes.label})});var n=[];t.true&&(n=n.concat(t.true)),t.false&&(n=n.concat(t.false)),e.drivers.models=n,e.drivers.driverUploadEnabled&&e.otherDriverIsPresent&&e.drivers.add({defaultValues:{},jdbcDriverClass:i.OTHER_DRIVER,label:d["resource.dataSource.jdbc.otherDriver"],available:!1,default:!1,jdbcUrl:"",uploaded:!1})})},getCurrentDriver:function(){return this.drivers.getDriverByClass(this.get("selectedDriverClass"))},changeSelectedDriver:function(){var e=this.drivers.getDriverByClass(this.get("selectedDriverClass"));e&&(this.setCustomAttributesDefaultValues(e),this.setConnectionUrlFromCustomAttributes(),this.trigger("driverClassChange",this))},setCustomAttributesFromConnectionUrl:function(){var e=this.getCustomAttributeValuesFromConnectionUrl();this.set(e,{silent:!0}),this.trigger("customAttributesUpdate",this)},setConnectionUrlFromCustomAttributes:function(){var e=this.getCurrentDriver(),t=e.getCustomAttributes(),i=this.pick(t),n=this.replaceConnectionUrlTemplatePlaceholdersWithValues(e.get("jdbcUrl"),i);this.set("connectionUrl",n,{silent:!0}),this.trigger("connectionUrlUpdate",this)},getAttributeValueFromUrl:function(e,t){var i=t.exec(e);return[].slice.call(i||[],1)},getCustomAttributeValuesFromConnectionUrl:function(){var e,t=this.getCurrentDriver(),i=this.get("connectionUrl"),n=l(t.convertUrlTemplateToRegex()),a=t.getCustomAttributes(),s={};return e=this.getAttributeValueFromUrl(i,n),r.each(e,function(e,t){s[a[t]]=e}),s},setCustomAttributesDefaultValues:function(e){this.unsetCustomAttributes();var t={};e.isOtherDriver()?(t.selectedDriverClass=e.get("jdbcDriverClass"),t.driverClass="",t.isOtherDriver=!0):(r.extend(t,e.get("defaultValues")),t.selectedDriverClass=e.get("jdbcDriverClass"),t.driverClass=e.get("jdbcDriverClass"),t.isOtherDriver=!1,t.connectionUrl=this.replaceConnectionUrlTemplatePlaceholdersWithValues(e.get("jdbcUrl"),e.get("defaultValues"))),this.set(t,{silent:!0}),this.extendValidation()},unsetCustomAttributes:function(){var e=this;r.each(this.drivers.getAllPossibleCustomAttributes(),function(t){e.unset(t,{silent:!0})})},replaceConnectionUrlTemplatePlaceholdersWithValues:function(e,t){var i=this.getRegExpFieldGroupsFromConnectionUrlTemplate(e);return r.each(i,function(i){e=e.replace(i[0],r.isUndefined(t[i[1]])?"":t[i[1]])}),e},getRegExpFieldGroupsFromConnectionUrlTemplate:function(e){for(var t,n=[];!r.isNull(t=i.FIELD_TEMPLATE_REGEXP.exec(e));)r.isArray(t)&&2===t.length&&n.push(t);return n},extendValidation:function(){var e=this,t={},n=this.getCurrentDriver().getCustomAttributes();r.extend(t,p),r.each(n,function(n){t[n]=[{xRegExpPattern:i.VALIDATION_PATTERNS[n],msg:d[e.JDBC_BUNDLE_PREFIX+"invalidField"].replace("{0}",d[e.JDBC_BUNDLE_PREFIX+n])}]}),this.validation=t},toJSON:function(){var e=t.prototype.toJSON.apply(this,arguments);return this.options.isEditMode&&e.password===h["input.password.substitution"]&&(e.password=null),e}})}),define("text!dataSource/template/dialog/baseDialogTemplate.htm",[],function(){return'<div id="select" class="panel dialog select overlay moveable centered_horz centered_vert hidden">\n\n    <js-templateNonce></js-templateNonce>\n    <div class="sizer diagonal"></div>\n    <div class="content hasFooter">\n        <div class="header mover">\n            <div class="title">{{- title }}</div>\n        </div>\n        <div class="body"></div>\n        <div class="footer ">\n            <button class="button action primary up"><span class="wrap">{{- primaryButtonLabel }}</span><span class="icon"></span></button>\n            <button class="button action up"><span class="wrap">{{- secondaryButtonLabel }}</span><span class="icon"></span></button>\n        </div>\n    </div>\n</div>'}),define("dataSource/view/dialog/BaseDialog",["require","backbone","underscore","jquery","components.dialogs","text!dataSource/template/dialog/baseDialogTemplate.htm"],function(e){"use strict";var t=e("backbone"),i=e("underscore"),n=e("jquery"),a=e("components.dialogs"),s=e("text!dataSource/template/dialog/baseDialogTemplate.htm");return t.View.extend({events:{"click button.action.primary":"primaryButtonOnClick","click button.action:not(.primary)":"secondaryButtonOnClick"},isModal:!0,TITLE:"",PRIMARY_BUTTON_LABEL:"",SECONDARY_BUTTON_LABEL:"",el:function(){return i.template(s,{title:this.TITLE,primaryButtonLabel:this.PRIMARY_BUTTON_LABEL,secondaryButtonLabel:this.SECONDARY_BUTTON_LABEL})},initialize:function(){n("body").append(this.render().$el)},show:function(){a.popup.show(this.el,this.isModal)},hide:function(){a.popup.hide(this.el)},render:function(){return this},primaryButtonOnClick:function(){throw new Error("Method not implemented")},secondaryButtonOnClick:function(){this.hide()}})}),define("common/transport/AjaxFormSubmitter",["require","underscore","request","jquery"],function(e){function t(e){var t,n=null;return e.firstChild.innerText&&""!==e.firstChild.innerText&&e.body?(t=new window.ActiveXObject("Microsoft.XMLDOM"),t.async=!1,t.loadXML(e.firstChild.innerText.replace("\r\n-","\r\n"))):t=e,t.firstChild&&(n=t.firstChild.nodeName.toLowerCase()),n&&"html"!==n&&"#comment"!==n?i("xml"===t.firstChild.nodeName.toLowerCase()?t.firstChild.nextSibling:t.firstChild):{errorCode:"unexpected.error"}}function i(e){var t,n;if(e.children)t=e.children;else{t=[];for(var a=0,s=e.childNodes.length;a<s;a++)null===e.childNodes[a].nodeValue&&t.push(e.childNodes[a])}if(0===t.length&&1===e.childNodes.length)return e.childNodes[0].nodeValue;if(t.length>1&&t[0].nodeName===t[1].nodeName){n=[];for(var a=0,s=t.length;a<s;a++)n[a]=i(t[a])}else{n={};for(var a=0,s=t.length;a<s;a++)n[t[a].nodeName]=i(t[a])}return n}function n(e){var t=new o.Deferred;return e.submit(function(i){i.preventDefault(),r({url:e.attr("action"),type:e.attr("method"),data:new FormData(e[0]),cache:!1,contentType:!1,processData:!1,headers:{Accept:"application/json"}}).done(function(e){t.resolve(e)}).fail(function(e){e=e.responseJSON||e||{},s.defaults(e,{errorCode:"error.load.error"}),t.reject(e)}),e.off("submit")}),e.submit(),t}function a(e,i){var n=o.Deferred(),a=o("<iframe style='display:none' name='"+i+"'></iframe>");return e.append(a).attr("target",i),a.on("load",function(){try{n.resolve(t(this.contentWindow.document))}catch(e){n.reject({errorCode:"error.invalid.response"})}a.remove()}),a.on("abort",function(){n.reject({errorCode:"error.load.aborted"}),a.remove()}),a.on("error",function(){n.reject({errorCode:"error.load.error"}),a.remove()}),e.submit(),n}var s=e("underscore"),r=e("request"),o=e("jquery"),l=function(e,i,n,a){this.name=s.uniqueId("uploadTarget"),this.form=o(e),i&&this.form.attr("action",i),n&&this.form.attr("method",n),a&&this.form.attr("enctype",a),this.parceXmlDocToObject=t};return l.prototype.submit=function(){return window.FormData?n(this.form):a(this.form,this.name)},l}),define("text!dataSource/template/dialog/uploadJdbcDriverDialogTemplate.htm",[],function(){return'<form method="post" enctype="multipart/form-data" action="rest_v2/jdbcDrivers">\n\n    <js-templateNonce></js-templateNonce>\n    <input name="className" type="hidden" value="{{- className }}"/>\n    <div class="control groupBox fillParent">\n        <div class="content">\n            <div class="header">\n                <div class="title"></div>\n            </div>\n            <div class="body">\n                <ul title="Locate local file"></ul>\n                <div class="errorMessageContainer">\n                    <span class="message warning"></span>\n                </div>\n                <div class="hidden warningMessageContainer">\n                    <span class="message textAccent"></span>\n                </div>\n                <br/>\n                <a class="fsection" target="_blank" href="http://community.jaspersoft.com/wiki/downloading-and-installing-database-drivers">{{- i18n["resource.dataSource.jdbc.upload.downloading"]}}</a>\n            </div>\n        </div>\n    </div>\n</form>'}),define("text!dataSource/template/dialog/fileUploadTemplate.htm",[],function(){return'<li class="leaf">\n\n    <js-templateNonce></js-templateNonce>\n    <input type="file" name="file_{{- fileIndex}}" size="60" accept="jar/jar" />\n    <span class="message warning"></span>\n</li>'}),define("dataSource/view/dialog/UploadJdbcDriverDialog",["require","dataSource/view/dialog/BaseDialog","underscore","jquery","common/transport/AjaxFormSubmitter","components.dialogs","request","bundle!jasperserver_messages","text!dataSource/template/dialog/uploadJdbcDriverDialogTemplate.htm","text!dataSource/template/dialog/fileUploadTemplate.htm","utils.common"],function(e){"use strict";var t=e("dataSource/view/dialog/BaseDialog"),i=e("underscore"),n=e("jquery"),a=e("common/transport/AjaxFormSubmitter"),s=e("components.dialogs"),r=(e("request"),e("bundle!jasperserver_messages")),o=e("text!dataSource/template/dialog/uploadJdbcDriverDialogTemplate.htm"),l=e("text!dataSource/template/dialog/fileUploadTemplate.htm");return e("utils.common"),t.extend({TITLE:r["resource.dataSource.jdbc.selectDriverTitle"],PRIMARY_BUTTON_LABEL:r["button.upload"],SECONDARY_BUTTON_LABEL:r["button.cancel"],events:function(){return i.extend({},t.prototype.events,{"change input[type='file']":"onFileChange"})},initialize:function(e){this.driverClass=e.driverClass,this.driverAvailable=e.driverAvailable,this.fileIndex=0,t.prototype.initialize.apply(this,arguments)},onFileChange:function(e){var t=n(e.target),a=t.next(".message.warning");if(a.parent().removeClass("error"),t.val().match(/.jar$/)){if(t.is(this.$("input[type='file']:last-of-type"))){var s=0,o=this.$("input[type='file']");i.each(o,function(e,t){s+=t+1}),s>=o.length&&this.addFileInput(),this.$("button.primary").removeClass("disabled").attr("disabled",null)}}else a.text(r["resource.dataSource.jdbc.upload.wrongExtension"]).parent().addClass("error")},render:function(){var e=this;return this.$(".body").html(i.template(o,{className:this.driverClass,i18n:r})),i.defer(function(){e.addFileInput(),e.driverAvailable?e.$(".warningMessageContainer").removeClass("hidden").find(".message").text(r["resource.dataSource.jdbc.upload.overwriteWarning"]):e.$(".warningMessageContainer").addClass("hidden").find(".message").text("")}),this.$("button.primary").addClass("disabled").attr("disabled","disabled"),this},onSuccessCallback:function(e){this.trigger("driverUpload",e),this.hide(),s.systemConfirm.show(r["resource.dataSource.jdbc.upload.driverUploadSuccess"]),i.defer(i.bind(this.remove,this))},onErrorCallback:function(e){var t;e=e.responseJSON?e.responseJSON:e,"illegal.parameter.value.error"===e.errorCode&&e.parameters&&e.parameters.length&&"className"===e.parameters[0]?t=r["resource.dataSource.jdbc.classNotFound"].replace("{0}",this.driverClass):e.message?t=e.message:"error.invalid.response"===(t=e.errorCode)&&(t="The required driver class ("+this.driverClass+") is not found in uploaded files"),this.$(".errorMessageContainer").addClass("error").find(".message").text(t)},addFileInput:function(){this.$("ul").append(i.template(l,{fileIndex:this.fileIndex})),this.fileIndex++},primaryButtonOnClick:function(){this.$(".errorMessageContainer").removeClass("error").find(".message").text("");var e=this.$("form"),t=this;new a(e[0]).submit().done(function(e){e.errorCode?t.onErrorCallback(e):t.onSuccessCallback(e)}).fail(function(e){t.onErrorCallback(e)})},secondaryButtonOnClick:function(){this.hide(),i.defer(i.bind(this.remove,this))}})}),define("text!dataSource/template/jdbcSpecificTemplate.htm",[],function(){return'<fieldset class="group shortFields">\n\n    <js-templateNonce></js-templateNonce>\n    <legend class="offLeft"><span>{{- i18n[\'resource.dataSource.accessProp\']}}</span></legend>\n\n    <label title="{{- i18n[\'resource.dataSource.jdbc.selectDriverTitle\']}}" class="control select">\n        <span class="wrap">{{- i18n[\'resource.dataSource.jdbc.driver\']}}:</span>\n        <select name="selectedDriverClass">\n            {{ _.each(drivers, function(driver) { }}\n                <option value="{{- driver.jdbcDriverClass }}"\n                {{ if (modelAttributes.selectedDriverClass === driver.jdbcDriverClass) { }}\n                    selected="selected"\n                {{ } }}>\n                    {{ if (!driver.available && driver.jdbcDriverClass !== otherDriverValue) { }}\n                        {{- i18n["resource.dataSource.jdbc.driverMissing"] }}\n                    {{ } }}\n                    {{- driver.label }}\n                    {{ if (driver.jdbcDriverClass !== otherDriverValue && typeof (driver.label) !== "undefined" && driver.label !== "") { }}\n                        ({{- driver.jdbcDriverClass }})\n                    {{ } else if (driver.jdbcDriverClass !== otherDriverValue && (typeof driver.label === "undefined" || driver.label === "")) { }}\n                        {{- driver.jdbcDriverClass }}\n                    {{ } }}\n                </option>\n            {{ }); }}\n        </select>\n\n        {{ if (driverUploadEnabled) { }}\n\t\t<button class="button action up" id="driverUploadButton">\n\t\t\t<span class="wrap">{{- i18n[\'resource.dataSource.jdbc.upload.editDriverButton\']}}</span>\n\t\t</button>\n        {{ } }}\n    </label>\n\n    <div name="jdbcSpecificFieldsContainer"></div>\n\n    <label title="{{- i18n[\'resource.analysisConnection.url\']}}" class="control input text">\n        <span class="wrap">{{- i18n[\'resource.dataSource.jdbc.url\']}} ({{- i18n[\'required.field\']}}):</span>\n        <input type="text" value="{{- modelAttributes.connectionUrl }}" name="connectionUrl">\n        <span class="message warning"></span>\n        <span class="message hint">{{- i18n[\'resource.dataSource.jdbc.hint2\']}}</span>\n    </label>\n\n    <label title="{{- i18n[\'resource.dataSource.jdbc.username\']}}" class="control input text ">\n        <span class="wrap">{{- i18n[\'resource.dataSource.jdbc.username\']}}:</span>\n        <input type="text" value="{{- modelAttributes.username }}" name="username">\n        <span class="message warning"></span>\n        <span class="message hint"></span>\n    </label>\n\n    <label title="{{- i18n[\'resource.dataSource.jdbc.password\']}}" class="control input password ">\n        <span class="wrap">{{- i18n[\'resource.dataSource.jdbc.password\']}}:</span>\n        <input type="password" value="{{- modelAttributes.password }}" name="password">\n        <span class="message warning"></span>\n        <span class="message hint"></span>\n    </label>\n\n</fieldset>'}),define("text!dataSource/template/jdbcCustomFieldTemplate.htm",[],function(){return'<label class="control input text" title="{{- title}}">\n\n    <js-templateNonce></js-templateNonce>\n    <span class="wrap">{{- label}} ({{- i18n["required.field"] }}):</span>\n    <input name="{{- name}}" type="text" value="{{- value }}"/>\n    <span class="message warning"></span>\n    <span class="message hint">{{- hint }}</span>\n</label>'}),
define("dataSource/view/JdbcDataSourceView",["require","underscore","jquery","dataSource/view/BaseDataSourceView","dataSource/model/JdbcDataSourceModel","dataSource/model/JdbcDriverModel","dataSource/view/dialog/UploadJdbcDriverDialog","text!dataSource/template/jdbcSpecificTemplate.htm","text!dataSource/template/jdbcCustomFieldTemplate.htm","core.events.bis","bundle!jasperserver_messages"],function(e){"use strict";var t=e("underscore"),i=(e("jquery"),e("dataSource/view/BaseDataSourceView")),n=e("dataSource/model/JdbcDataSourceModel"),a=e("dataSource/model/JdbcDriverModel"),s=e("dataSource/view/dialog/UploadJdbcDriverDialog"),r=e("text!dataSource/template/jdbcSpecificTemplate.htm"),o=e("text!dataSource/template/jdbcCustomFieldTemplate.htm"),l=e("core.events.bis"),c=e("bundle!jasperserver_messages");return i.extend({PAGE_TITLE_NEW_MESSAGE_CODE:"resource.datasource.jdbc.page.title.new",PAGE_TITLE_EDIT_MESSAGE_CODE:"resource.datasource.jdbc.page.title.edit",modelConstructor:n,events:function(){var e={};return t.extend(e,i.prototype.events,{"keyup input[type='text'][name!='driverClass'], input[type='password'], textarea":"updateModelProperty","change input[type='text'][name!='driverClass'], input[type='password'], textarea, select":"updateModelProperty","keyup input[type='text'][name='driverClass']":"manuallySetDriverClass","change input[type='text'][name='driverClass']":"manuallySetDriverClass","click #driverUploadButton":"uploadDriver"}),e}(),initialize:function(e){i.prototype.initialize.apply(this,arguments),this.listenTo(this.model,"connectionUrlUpdate",this.updateConnectionUrl),this.listenTo(this.model,"customAttributesUpdate",this.updateCustomAttributes),this.listenTo(this.model,"driverClassChange",this.changeDriver),this.listenTo(this.model.drivers,"change",this.updateDriverOption),this.listenTo(this.model.drivers,"add",this.addDriverOption)},updateDriverOption:function(e){var t=this.$("select[name='selectedDriverClass'] option[value='"+e.get("jdbcDriverClass")+"']"),i=e.get("label")+" ("+e.get("jdbcDriverClass")+")";e.get("available")||(i=c["resource.dataSource.jdbc.driverMissing"]+" "+i),t.text(i),this.model.getCurrentDriver()===e&&this.changeUploadDriverButtonState()},addDriverOption:function(e){if(!e.isOtherDriver){var i=this.$("select[name='selectedDriverClass'] option[value='"+a.OTHER_DRIVER+"']"),n=e.get("jdbcDriverClass"),s=this;e.get("available")||(n=c["resource.dataSource.jdbc.driverMissing"]+" "+n),i.before("<option value='"+e.get("jdbcDriverClass")+"'>"+n+"</option>"),t.defer(function(){s.$("select[name='selectedDriverClass']").val(e.get("jdbcDriverClass")),s.model.trigger("change:driverClass")})}},manuallySetDriverClass:function(){var e=this.$("input[type='text'][name='driverClass']").val(),t={driverClass:e};this.model.set(t,{silent:!0}),this.model.validate(t),this.changeUploadDriverButtonState()},updateConnectionUrl:function(){this.$("input[name='connectionUrl']").val(this.model.get("connectionUrl"));var e=this.model.getCurrentDriver();e.isOtherDriver()||e.isUploadedDriver()||this.model.validate({connectionUrl:this.model.get("connectionUrl")})},updateCustomAttributes:function(){var e=this,i=this.model.getCurrentDriver().getCustomAttributes();t.each(i,function(t){e.$("input[name='"+t+"']").val(e.model.get(t))});var n=this.model.pick(i);this.model.validate(n)},changeDriver:function(){this.renderDriverCustomAttributeFields(),this.changeUploadDriverButtonState()},changeUploadDriverButtonState:function(){var e=this.model.getCurrentDriver(),t=this.$("#driverUploadButton");l.enable(t[0]);var i=e.get("available")?c["resource.dataSource.jdbc.upload.editDriverButton"]:c["resource.dataSource.jdbc.upload.addDriverButton"];t.find(".wrap").text(i)},uploadDriver:function(){this.model.drivers.driverUploadEnabled&&this.model.get("driverClass")?(this.fieldIsValid(this,"driverClass","name"),this.driverUploadDialog&&this.stopListening(this.driverUploadDialog),delete this.driverUploadDialog,this.initDriverUploadDialog(),this.driverUploadDialog.show()):this.fieldIsInvalid(this,"driverClass",c["ReportDataSourceValidator.error.not.empty.reportDataSource.driverClass"],"name")},initDriverUploadDialog:function(){this.driverUploadDialog=new s({driverAvailable:this.model.getCurrentDriver().get("available"),driverClass:this.model.get("isOtherDriver")?this.model.get("driverClass"):this.model.getCurrentDriver().get("jdbcDriverClass")}),this.listenTo(this.driverUploadDialog,"driverUpload",this._onDriverUploadFinished)},_onDriverUploadFinished:function(e){var i=this;this.model.fetchDrivers().then(function(){i.model.drivers.markDriverAsAvailable(e.jdbcDriverClass),t.defer(function(){i.model.validate(),i.render()})})},render:function(){return this.$el.empty(),this.renderJdbcSpecificSection(),this.renderTimezoneSection(),this.renderTestConnectionSection(),this},templateData:function(){var e=i.prototype.templateData.apply(this,arguments);return t.extend(e,{drivers:this.model.drivers.toJSON(),otherDriverValue:a.OTHER_DRIVER,driverUploadEnabled:this.model.drivers.driverUploadEnabled}),e},renderJdbcSpecificSection:function(){this.$el.append(t.template(r,this.templateData())),this.renderDriverCustomAttributeFields(),this.changeUploadDriverButtonState()},renderDriverCustomAttributeFields:function(){var e=this,i="";if(this.model.get("isOtherDriver"))i+=t.template(o,{hint:c["resource.dataSource.jdbc.hint1"],label:c["resource.dataSource.jdbc.driver"],name:"driverClass",title:c["resource.analysisConnection.driver"],value:this.model.get("driverClass"),i18n:c});else{var n=this.model.getCurrentDriver().getCustomAttributes();t.each(n,function(n){i+=t.template(o,{hint:"",label:c["resource.dataSource.jdbc."+n],name:n,title:c["resource.dataSource.jdbc.requiredTitle"].replace("{0}",c["resource.dataSource.jdbc."+n].toLowerCase()),value:e.model.get(n),i18n:c})})}this.$("[name=jdbcSpecificFieldsContainer]").html(i)},remove:function(){this.driverUploadDialog&&this.driverUploadDialog.remove(),i.prototype.remove.apply(this,arguments)}})}),define("dataSource/model/JndiDataSourceModel",["require","dataSource/model/BaseDataSourceModel","bi/repository/enum/repositoryResourceTypes","dataSource/enum/connectionTypes","underscore","bundle!jasperserver_messages"],function(e){"use strict";var t=e("dataSource/model/BaseDataSourceModel"),i=e("bi/repository/enum/repositoryResourceTypes"),n=e("dataSource/enum/connectionTypes"),a=e("underscore"),s=e("bundle!jasperserver_messages");return t.extend({type:i.JNDI_DATA_SOURCE,defaults:function(){var e={};return a.extend(e,t.prototype.defaults,{jndiName:"",timezone:"",connectionType:n.JNDI}),e}(),validation:function(){var e={};return a.extend(e,t.prototype.validation,{jndiName:[{required:!0,msg:s["ReportDataSourceValidator.error.not.empty.reportDataSource.jndiName"]}]}),e}()})}),define("text!dataSource/template/jndiSpecificTemplate.htm",[],function(){return'<fieldset class="group mediumFields">\n\n    <js-templateNonce></js-templateNonce>\n\n    <legend class="offLeft"><span>{{- i18n[\'resource.dataSource.accessProp\']}}</span></legend>\n\n    <label title="{{- i18n[\'resource.analysisConnection.driver\']}}" class="control input text ">\n        <span class="wrap">{{- i18n[\'resource.dataSource.jndi.serviceName\']}} ({{- i18n[\'required.field\']}}):</span>\n        <input type="text" value="{{- modelAttributes.jndiName }}" name="jndiName">\n        <span class="message warning"></span>\n        <span class="message hint">{{- i18n[\'resource.dataSource.jndi.hint1\']}}</span>\n    </label>\n\n</fieldset>'}),define("dataSource/view/JndiDataSourceView",["require","underscore","dataSource/view/BaseDataSourceView","dataSource/model/JndiDataSourceModel","text!dataSource/template/jndiSpecificTemplate.htm"],function(e){"use strict";var t=e("underscore"),i=e("dataSource/view/BaseDataSourceView"),n=e("dataSource/model/JndiDataSourceModel"),a=e("text!dataSource/template/jndiSpecificTemplate.htm");return i.extend({PAGE_TITLE_NEW_MESSAGE_CODE:"resource.datasource.jndi.page.title.new",PAGE_TITLE_EDIT_MESSAGE_CODE:"resource.datasource.jndi.page.title.edit",modelConstructor:n,render:function(){return this.$el.empty(),this.renderJndiSpecificSection(),this.renderTimezoneSection(),this.renderTestConnectionSection(),this},renderJndiSpecificSection:function(){this.$el.append(t.template(a,this.templateData()))}})}),define("common/component/base/Dimmer",["require","jquery","common/util/classUtil"],function(e){var t,i,n=e("jquery"),a=e("common/util/classUtil");return a.extend({constructor:function(e){t||(i=0,t=n("<div id='dialogDimmer' class='dimmer'></div>").css(e),n(document.body).append(t),t.hide()),i++},css:function(e){return t.css(e),this},show:function(){var e=this.getCount()||0;return this.setCount(++e),t.show(),this},hide:function(){if(this.isVisible()){var e=this.getCount();return this.setCount(--e),!e&&t.hide(),this}},setCount:function(e){t.data({count:e})},getCount:function(){return parseInt(t.data("count"),10)},isVisible:function(){return t.is(":visible")},remove:function(){this._removed||(this._removed=!0,t&&(--i||(t.remove(),t=null)))}})}),define("text!common/component/panel/template/panelTemplate.htm",[],function(){return'<div class="panel {{- additionalCssClasses }}">\n\n    <js-templateNonce></js-templateNonce>\n    <div class="header">\n        <div class="title">{{- title}}</div>\n    </div>\n    <div class="subcontainer"></div>\n</div>\n'}),define("common/component/panel/Panel",["require","css!panel","underscore","backbone","text!./template/panelTemplate.htm"],function(e){"use strict";e("css!panel");var t=e("underscore"),i=e("backbone"),n=e("text!./template/panelTemplate.htm");return i.View.extend({defaultTemplate:n,el:function(){var e=this.getTemplateArguments();return this.template(e)},getTemplateArguments:function(){return{title:this.title,additionalCssClasses:this.additionalCssClasses}},constructor:function(e){e||(e={}),this.template=t.template(e.template||this.defaultTemplate),this.title=e.title||"",this.additionalCssClasses=e.additionalCssClasses||"",this.content=e.content||"",this.collapsed=!e.collapsed,this.openClass=e.openClass||"open",this.closedClass=e.closedClass||"closed",this.loadingClass=e.loadingClass||"loading",this.fixedHeight=e.fixedHeight||!1,this.contentContainer=e.contentContainer||".subcontainer",this.overflow=e.overflow||"auto",this.traits=e.traits||[],t.each(this.traits,t.bind(function(e){e.extension&&t.extend(this,e.extension)},this)),this.invokeTraits("onConstructor",e),i.View.apply(this,arguments)},invokeTraits:function(e){var i=Array.prototype.slice.call(arguments,1),n=this;t.each(this.traits,function(t){t[e]&&t[e].apply(n,i)})},initialize:function(e){this.invokeTraits("beforeInitialize",e),this.content&&this.setContent(this.content),this.toggleCollapsedState(),this.invokeTraits("afterInitialize",e)},setElement:function(e){this.invokeTraits("beforeSetElement",e);var t=i.View.prototype.setElement.apply(this,arguments);return this.$contentContainer=this.$(this.contentContainer),this.$contentContainer[this.collapsed?"hide":"show"](),this.invokeTraits("afterSetElement",e),t},open:function(e){return this.invokeTraits("beforeOpen",e),this.$contentContainer.show(),this.$el.removeClass(this.closedClass).addClass(this.openClass),this.collapsed=!1,e&&e.renderContent&&this.renderContent(),this.invokeTraits("afterOpen",e),e&&e.silent||this.trigger("open",this),this},close:function(e){return this.invokeTraits("beforeClose",e),this.$contentContainer.hide(),this.$el.removeClass(this.openClass).addClass(this.closedClass),this.collapsed=!0,this.invokeTraits("afterClose",e),e&&e.silent||this.trigger("close",this),this},setContent:function(e,t){this.content=e;var i=this.renderContent();this.$contentContainer[!0===t?"append":"html"](i)},renderContent:function(){return this.content instanceof i.View?this.content.render().$el:this.content},setHeight:function(e){var i=this.$("> .header").outerHeight();this.$contentContainer.css({height:t.isNumber(e)?e-i+"px":"auto",overflow:this.overflow})},toggleCollapsedState:function(){return this.collapsed?this.open():this.close(),this},remove:function(){this.invokeTraits("onRemove"),this.content&&this.content.remove&&this.content.remove(),i.View.prototype.remove.call(this)}})}),define("common/component/base/OptionView",["require","backbone","underscore"],function(e){"use strict";var t=e("backbone"),i=e("underscore");return t.View.extend({events:{click:"select",mouseover:"mouseover",mouseout:"mouseout"},constructor:function(e){if(!e||!e.template)throw new Error("Option should have defined template");if(!(e.model&&e.model instanceof t.Model))throw new Error("Option should have associated Backbone.Model");this.template=i.template(e.template),this.disabledClass=e.disabledClass,this.hiddenClass=e.hiddenClass,this.toggleClass=e.toggleClass,this.overClass=e.overClass||"over",t.View.apply(this,arguments)},initialize:function(){t.View.prototype.initialize.apply(this,arguments);var e=this;!0===this.model.get("disabled")&&this.disable(),!0===this.model.get("hidden")&&this.hide(),!0===this.model.get("selected")&&this.addSelection(),this.listenTo(this.model,"change:over",function(t,i){i?e.$("> p").addClass(e.overClass):e.$("> p").removeClass(e.overClass)})},el:function(){return this.template(this.model.toJSON())},enable:function(){this.$el.removeAttr("disabled").removeClass(this.disabledClass)},disable:function(){this.$el.attr("disabled","disabled").addClass(this.disabledClass)},over:function(){this.model.set({over:!0})},leave:function(){this.model.set({over:!1})},show:function(){this.$el.show().removeClass(this.hiddenClass)},hide:function(){this.$el.hide().addClass(this.hiddenClass)},isVisible:function(){return this.$el.is(":visible")},isDisabled:function(){return this.$el.is(":disabled")},select:function(e){this.model.trigger("select",this,this.model,e),this.trigger("click",this,this.model,e)},addSelection:function(){this.$el.addClass(this.toggleClass),this.model.set("selected",!0)},removeSelection:function(){this.$el.removeClass(this.toggleClass),this.model.unset("selected")},mouseover:function(e){this.trigger("mouseover",this,this.model,e)},mouseout:function(e){this.trigger("mouseout",this,this.model,e)}})}),define("common/component/base/OptionContainer",["require","backbone","underscore","./OptionView"],function(e){"use strict";function t(e){if(!e||n.isEmpty(e))throw new Error("Init options must be specified");if(!e.options||!e.options.length)throw new Error("Option views descriptors must be specified");if(!e.mainTemplate&&!e.el)throw new Error("Option container must have a template");if(!e.optionTemplate)throw new Error("Option container must have an option template")}var i=e("backbone"),n=e("underscore"),a=e("./OptionView");return i.View.extend({events:{mouseout:"_mouseout",mouseover:"_mouseover"},el:function(){return n.template(this.template)()},constructor:function(e){t(e),this.contextName=e.contextName||"option",this.contentContainer=e.contentContainer?e.contentContainer:e.el||".content > ul",this.toggle=!!e.toggle,this.toggleClass=e.toggleClass||"active",this.options=[],this.collection=e.collection||new i.Collection,delete e.collection,e.options&&this.collection.reset(e.options),this.hasGroups=!(!this.collection.models[0]||!this.collection.models[0].get("groupId")),this.defalutOptionView=this.hasGroups?this.collection.where({default:!0}):[this.collection.findWhere({default:!0})],this.listenTo(this.collection,"select",this._selectOption),this.listenTo(this.collection,"update reset",this.render),this.template=e.mainTemplate,this.optionTemplate=e.optionTemplate,i.View.apply(this,arguments)},_mouseout:function(){this.trigger("container:mouseout")},_mouseover:function(){this.trigger("container:mouseover")},setElement:function(e){var t=i.View.prototype.setElement.apply(this,arguments);return this.$contentContainer=this.contentContainer?this.$(this.contentContainer).addBack().filter(this.contentContainer):this.$el,t},initialize:function(){this.render(),this.toggle&&this.defalutOptionView&&n.each(this.defalutOptionView,function(e){e&&this.getOptionView(e.get("action")).addSelection()},this)},render:function(){var e=this;n.each(this.options,function(t){e.stopListening(t,"mouseover"),e.stopListening(t,"mouseout"),t.remove()}),this.options=[],this.collection.forEach(function(t){var i=new a({template:e.optionTemplate,model:t,toggleClass:e.toggleClass});e.listenTo(i,"mouseover",function(t,i){e.trigger("mouseover",t,e,i)}),e.listenTo(i,"mouseout",function(t,i){e.trigger("mouseout",t,e,i)}),e.options.push(i),e.$contentContainer.append(i.$el)})},_onKeyDown:function(e){var t=this.getOptionView(e.keyCode,"triggerOnKeyCode");t&&!t.isDisabled()&&t.select()},_selectOption:function(e,t){if(this.toggle){var i=t.get("groupId"),a=this.hasGroups?n.reduce(this.options,function(e,t){return t.model.get("groupId")===i&&e.push(t),e},[]):this.options;n.each(a,function(e){e.removeSelection()},this),e.addSelection()}this.trigger("selection",e,t),this.trigger(this.contextName+":"+t.get("action"),e,t)},getOptionView:function(e,t){return n.find(this.options,function(i){return i.model.get(t||"action")===e})},resetSelection:function(e,t){e=e||[],this.toggle&&(this.hasGroups?(e.length<this.defalutOptionView.length&&n.each(this.defalutOptionView,function(t){var i={groupId:t.get("groupId")};!n.findWhere(e,i)&&t&&e.push(n.extend(i,{action:t.get("action")}))}),e=n.pluck(e,"action")):!e.length&&this.defalutOptionView[0]&&e.push(this.defalutOptionView[0].get("action")),n.each(this.options,function(i){e.length&&n.contains(e,i.model.get("action"))?t?this._selectOption(i,i.model):i.addSelection():i.removeSelection()},this))},select:function(){var e=Array.prototype.slice.call(arguments,0);this.toggle&&n.each(this.options,function(t){!e.length||n.contains(e,t.model.get("action"))?t.addSelection():t.removeSelection()},this)},deselect:function(){var e=Array.prototype.slice.call(arguments,0);this.toggle&&n.each(this.options,function(t){(!e.length||n.contains(e,t.model.get("action")))&&t.removeSelection()},this)},getSelection:function(){return n.chain(this.options).filter(function(e){return e.model.get("selected")}).map(function(e){return e.model.get("action")}).value()},show:function(){return n.each(this.options,function(e){var t=e.model.get("test");t&&!t()?e.hide():e[e.model.get("hidden")?"hide":"show"]()}),this.$el.show(),this.trigger("show",this),this},hide:function(){return this.$el.hide(),this.trigger("hide",this),this},enable:function(e){var t=Array.prototype.slice.call(arguments);n.each(this.options,function(e){(!t.length||n.contains(t,e.model.get("action")))&&e.enable()})},disable:function(e){var t=Array.prototype.slice.call(arguments);n.each(this.options,function(e){(!t.length||n.contains(t,e.model.get("action")))&&e.disable()})},addOptions:function(e,t){this.collection.add(e,n.extend(t||{},{silent:!0})),this.collection.reset(this.collection.toJSON())},removeOptions:function(e){var t=this.collection.filter(function(t){return!n.contains(e,t.get("action"))});t.length<this.collection.length&&this.collection.reset(t)},remove:function(){n.invoke(this.options,"remove"),i.View.prototype.remove.apply(this,arguments)}})}),define("common/component/panel/trait/abstractPanelTrait",[],function(){"use strict";return{extension:{},onConstructor:function(){},beforeInitialize:function(){},afterInitialize:function(){},beforeSetElement:function(){},afterSetElement:function(){},beforeOpen:function(){},afterOpen:function(){},beforeClose:function(){},afterClose:function(){},onRemove:function(){}}}),function(e){"function"==typeof define&&define.amd?define("jquery-ui/disable-selection",["jquery","./version"],e):e(jQuery)}(function(e){return e.fn.extend({disableSelection:function(){var e="onselectstart"in document.createElement("div")?"selectstart":"mousedown";return function(){return this.on(e+".ui-disableSelection",function(e){e.preventDefault()})}}(),enableSelection:function(){return this.off(".ui-disableSelection")}})}),function(e){"function"==typeof define&&define.amd?define("jquery-ui/plugin",["jquery","./version"],e):e(jQuery)}(function(e){return e.ui.plugin={add:function(t,i,n){var a,s=e.ui[t].prototype;for(a in n)s.plugins[a]=s.plugins[a]||[],s.plugins[a].push([i,n[a]])},call:function(e,t,i,n){var a,s=e.plugins[t];if(s&&(n||e.element[0].parentNode&&11!==e.element[0].parentNode.nodeType))for(a=0;a<s.length;a++)e.options[s[a][0]]&&s[a][1].apply(e.element,i)}}}),function(e){"function"==typeof define&&define.amd?define("jquery-ui/widgets/resizable",["jquery","./mouse","../disable-selection","../plugin","../version","../widget"],e):e(jQuery)}(function(e){return e.widget("ui.resizable",e.ui.mouse,{version:"1.12.1",widgetEventPrefix:"resize",options:{alsoResize:!1,animate:!1,animateDuration:"slow",animateEasing:"swing",aspectRatio:!1,autoHide:!1,classes:{"ui-resizable-se":"ui-icon ui-icon-gripsmall-diagonal-se"},containment:!1,ghost:!1,grid:!1,handles:"e,s,se",helper:!1,maxHeight:null,maxWidth:null,minHeight:10,minWidth:10,zIndex:90,resize:null,start:null,stop:null},_num:function(e){return parseFloat(e)||0},_isNumber:function(e){return!isNaN(parseFloat(e))},_hasScroll:function(t,i){if("hidden"===e(t).css("overflow"))return!1;var n=i&&"left"===i?"scrollLeft":"scrollTop",a=!1;return t[n]>0||(t[n]=1,a=t[n]>0,t[n]=0,a)},_create:function(){var t,i=this.options,n=this;this._addClass("ui-resizable"),e.extend(this,{_aspectRatio:!!i.aspectRatio,aspectRatio:i.aspectRatio,originalElement:this.element,_proportionallyResizeElements:[],_helper:i.helper||i.ghost||i.animate?i.helper||"ui-resizable-helper":null}),this.element[0].nodeName.match(/^(canvas|textarea|input|select|button|img)$/i)&&(this.element.wrap(e("<div class='ui-wrapper' style='overflow: hidden;'></div>").css({position:this.element.css("position"),width:this.element.outerWidth(),height:this.element.outerHeight(),top:this.element.css("top"),left:this.element.css("left")})),this.element=this.element.parent().data("ui-resizable",this.element.resizable("instance")),this.elementIsWrapper=!0,t={marginTop:this.originalElement.css("marginTop"),marginRight:this.originalElement.css("marginRight"),marginBottom:this.originalElement.css("marginBottom"),marginLeft:this.originalElement.css("marginLeft")},this.element.css(t),this.originalElement.css("margin",0),this.originalResizeStyle=this.originalElement.css("resize"),this.originalElement.css("resize","none"),this._proportionallyResizeElements.push(this.originalElement.css({position:"static",zoom:1,display:"block"})),this.originalElement.css(t),this._proportionallyResize()),this._setupHandles(),i.autoHide&&e(this.element).on("mouseenter",function(){i.disabled||(n._removeClass("ui-resizable-autohide"),n._handles.show())}).on("mouseleave",function(){i.disabled||n.resizing||(n._addClass("ui-resizable-autohide"),n._handles.hide())}),this._mouseInit()},_destroy:function(){this._mouseDestroy();var t,i=function(t){e(t).removeData("resizable").removeData("ui-resizable").off(".resizable").find(".ui-resizable-handle").remove()};return this.elementIsWrapper&&(i(this.element),t=this.element,this.originalElement.css({position:t.css("position"),width:t.outerWidth(),height:t.outerHeight(),top:t.css("top"),left:t.css("left")}).insertAfter(t),t.remove()),this.originalElement.css("resize",this.originalResizeStyle),i(this.originalElement),this},_setOption:function(e,t){switch(this._super(e,t),e){case"handles":this._removeHandles(),this._setupHandles()}},_setupHandles:function(){var t,i,n,a,s,r=this.options,o=this;if(this.handles=r.handles||(e(".ui-resizable-handle",this.element).length?{n:".ui-resizable-n",e:".ui-resizable-e",s:".ui-resizable-s",w:".ui-resizable-w",se:".ui-resizable-se",sw:".ui-resizable-sw",ne:".ui-resizable-ne",nw:".ui-resizable-nw"}:"e,s,se"),this._handles=e(),this.handles.constructor===String)for("all"===this.handles&&(this.handles="n,e,s,w,se,sw,ne,nw"),n=this.handles.split(","),this.handles={},i=0;i<n.length;i++)t=e.trim(n[i]),a="ui-resizable-"+t,s=e("<div>"),this._addClass(s,"ui-resizable-handle "+a),s.css({zIndex:r.zIndex}),this.handles[t]=".ui-resizable-"+t,this.element.append(s);this._renderAxis=function(t){var i,n,a,s;t=t||this.element;for(i in this.handles)this.handles[i].constructor===String?this.handles[i]=this.element.children(this.handles[i]).first().show():(this.handles[i].jquery||this.handles[i].nodeType)&&(this.handles[i]=e(this.handles[i]),this._on(this.handles[i],{mousedown:o._mouseDown})),this.elementIsWrapper&&this.originalElement[0].nodeName.match(/^(textarea|input|select|button)$/i)&&(n=e(this.handles[i],this.element),s=/sw|ne|nw|se|n|s/.test(i)?n.outerHeight():n.outerWidth(),a=["padding",/ne|nw|n/.test(i)?"Top":/se|sw|s/.test(i)?"Bottom":/^e$/.test(i)?"Right":"Left"].join(""),t.css(a,s),this._proportionallyResize()),this._handles=this._handles.add(this.handles[i])},this._renderAxis(this.element),this._handles=this._handles.add(this.element.find(".ui-resizable-handle")),this._handles.disableSelection(),this._handles.on("mouseover",function(){o.resizing||(this.className&&(s=this.className.match(/ui-resizable-(se|sw|ne|nw|n|e|s|w)/i)),o.axis=s&&s[1]?s[1]:"se")}),r.autoHide&&(this._handles.hide(),this._addClass("ui-resizable-autohide"))},_removeHandles:function(){this._handles.remove()},_mouseCapture:function(t){var i,n,a=!1;for(i in this.handles)((n=e(this.handles[i])[0])===t.target||e.contains(n,t.target))&&(a=!0);return!this.options.disabled&&a},_mouseStart:function(t){var i,n,a,s=this.options,r=this.element;return this.resizing=!0,this._renderProxy(),i=this._num(this.helper.css("left")),n=this._num(this.helper.css("top")),s.containment&&(i+=e(s.containment).scrollLeft()||0,n+=e(s.containment).scrollTop()||0),this.offset=this.helper.offset(),this.position={left:i,top:n},this.size=this._helper?{width:this.helper.width(),height:this.helper.height()}:{width:r.width(),height:r.height()},this.originalSize=this._helper?{width:r.outerWidth(),height:r.outerHeight()}:{width:r.width(),height:r.height()},this.sizeDiff={width:r.outerWidth()-r.width(),height:r.outerHeight()-r.height()},this.originalPosition={left:i,top:n},this.originalMousePosition={left:t.pageX,top:t.pageY},this.aspectRatio="number"==typeof s.aspectRatio?s.aspectRatio:this.originalSize.width/this.originalSize.height||1,a=e(".ui-resizable-"+this.axis).css("cursor"),e("body").css("cursor","auto"===a?this.axis+"-resize":a),this._addClass("ui-resizable-resizing"),this._propagate("start",t),!0},_mouseDrag:function(t){var i,n,a=this.originalMousePosition,s=this.axis,r=t.pageX-a.left||0,o=t.pageY-a.top||0,l=this._change[s];return this._updatePrevProperties(),!!l&&(i=l.apply(this,[t,r,o]),this._updateVirtualBoundaries(t.shiftKey),(this._aspectRatio||t.shiftKey)&&(i=this._updateRatio(i,t)),i=this._respectSize(i,t),this._updateCache(i),this._propagate("resize",t),n=this._applyChanges(),!this._helper&&this._proportionallyResizeElements.length&&this._proportionallyResize(),e.isEmptyObject(n)||(this._updatePrevProperties(),this._trigger("resize",t,this.ui()),this._applyChanges()),!1)},_mouseStop:function(t){this.resizing=!1;var i,n,a,s,r,o,l,c=this.options,d=this;return this._helper&&(i=this._proportionallyResizeElements,n=i.length&&/textarea/i.test(i[0].nodeName),a=n&&this._hasScroll(i[0],"left")?0:d.sizeDiff.height,s=n?0:d.sizeDiff.width,r={width:d.helper.width()-s,height:d.helper.height()-a},o=parseFloat(d.element.css("left"))+(d.position.left-d.originalPosition.left)||null,l=parseFloat(d.element.css("top"))+(d.position.top-d.originalPosition.top)||null,c.animate||this.element.css(e.extend(r,{top:l,left:o})),d.helper.height(d.size.height),d.helper.width(d.size.width),this._helper&&!c.animate&&this._proportionallyResize()),e("body").css("cursor","auto"),this._removeClass("ui-resizable-resizing"),this._propagate("stop",t),this._helper&&this.helper.remove(),!1},_updatePrevProperties:function(){this.prevPosition={top:this.position.top,left:this.position.left},this.prevSize={width:this.size.width,height:this.size.height}},_applyChanges:function(){var e={};return this.position.top!==this.prevPosition.top&&(e.top=this.position.top+"px"),this.position.left!==this.prevPosition.left&&(e.left=this.position.left+"px"),this.size.width!==this.prevSize.width&&(e.width=this.size.width+"px"),this.size.height!==this.prevSize.height&&(e.height=this.size.height+"px"),this.helper.css(e),e},_updateVirtualBoundaries:function(e){var t,i,n,a,s,r=this.options;s={minWidth:this._isNumber(r.minWidth)?r.minWidth:0,maxWidth:this._isNumber(r.maxWidth)?r.maxWidth:1/0,minHeight:this._isNumber(r.minHeight)?r.minHeight:0,maxHeight:this._isNumber(r.maxHeight)?r.maxHeight:1/0},(this._aspectRatio||e)&&(t=s.minHeight*this.aspectRatio,n=s.minWidth/this.aspectRatio,i=s.maxHeight*this.aspectRatio,a=s.maxWidth/this.aspectRatio,t>s.minWidth&&(s.minWidth=t),n>s.minHeight&&(s.minHeight=n),i<s.maxWidth&&(s.maxWidth=i),a<s.maxHeight&&(s.maxHeight=a)),this._vBoundaries=s},_updateCache:function(e){this.offset=this.helper.offset(),this._isNumber(e.left)&&(this.position.left=e.left),this._isNumber(e.top)&&(this.position.top=e.top),this._isNumber(e.height)&&(this.size.height=e.height),this._isNumber(e.width)&&(this.size.width=e.width)},_updateRatio:function(e){var t=this.position,i=this.size,n=this.axis;return this._isNumber(e.height)?e.width=e.height*this.aspectRatio:this._isNumber(e.width)&&(e.height=e.width/this.aspectRatio),"sw"===n&&(e.left=t.left+(i.width-e.width),e.top=null),"nw"===n&&(e.top=t.top+(i.height-e.height),e.left=t.left+(i.width-e.width)),e},_respectSize:function(e){var t=this._vBoundaries,i=this.axis,n=this._isNumber(e.width)&&t.maxWidth&&t.maxWidth<e.width,a=this._isNumber(e.height)&&t.maxHeight&&t.maxHeight<e.height,s=this._isNumber(e.width)&&t.minWidth&&t.minWidth>e.width,r=this._isNumber(e.height)&&t.minHeight&&t.minHeight>e.height,o=this.originalPosition.left+this.originalSize.width,l=this.originalPosition.top+this.originalSize.height,c=/sw|nw|w/.test(i),d=/nw|ne|n/.test(i);return s&&(e.width=t.minWidth),r&&(e.height=t.minHeight),n&&(e.width=t.maxWidth),a&&(e.height=t.maxHeight),s&&c&&(e.left=o-t.minWidth),n&&c&&(e.left=o-t.maxWidth),r&&d&&(e.top=l-t.minHeight),a&&d&&(e.top=l-t.maxHeight),e.width||e.height||e.left||!e.top?e.width||e.height||e.top||!e.left||(e.left=null):e.top=null,e},_getPaddingPlusBorderDimensions:function(e){for(var t=0,i=[],n=[e.css("borderTopWidth"),e.css("borderRightWidth"),e.css("borderBottomWidth"),e.css("borderLeftWidth")],a=[e.css("paddingTop"),e.css("paddingRight"),e.css("paddingBottom"),e.css("paddingLeft")];t<4;t++)i[t]=parseFloat(n[t])||0,i[t]+=parseFloat(a[t])||0;return{height:i[0]+i[2],width:i[1]+i[3]}},_proportionallyResize:function(){if(this._proportionallyResizeElements.length)for(var e,t=0,i=this.helper||this.element;t<this._proportionallyResizeElements.length;t++)e=this._proportionallyResizeElements[t],this.outerDimensions||(this.outerDimensions=this._getPaddingPlusBorderDimensions(e)),e.css({height:i.height()-this.outerDimensions.height||0,width:i.width()-this.outerDimensions.width||0})},_renderProxy:function(){var t=this.element,i=this.options;this.elementOffset=t.offset(),this._helper?(this.helper=this.helper||e("<div style='overflow:hidden;'></div>"),this._addClass(this.helper,this._helper),this.helper.css({width:this.element.outerWidth(),height:this.element.outerHeight(),position:"absolute",left:this.elementOffset.left+"px",top:this.elementOffset.top+"px",zIndex:++i.zIndex}),this.helper.appendTo("body").disableSelection()):this.helper=this.element},_change:{e:function(e,t){return{width:this.originalSize.width+t}},w:function(e,t){var i=this.originalSize;return{left:this.originalPosition.left+t,width:i.width-t}},n:function(e,t,i){var n=this.originalSize;return{top:this.originalPosition.top+i,height:n.height-i}},s:function(e,t,i){return{height:this.originalSize.height+i}},se:function(t,i,n){return e.extend(this._change.s.apply(this,arguments),this._change.e.apply(this,[t,i,n]))},sw:function(t,i,n){
return e.extend(this._change.s.apply(this,arguments),this._change.w.apply(this,[t,i,n]))},ne:function(t,i,n){return e.extend(this._change.n.apply(this,arguments),this._change.e.apply(this,[t,i,n]))},nw:function(t,i,n){return e.extend(this._change.n.apply(this,arguments),this._change.w.apply(this,[t,i,n]))}},_propagate:function(t,i){e.ui.plugin.call(this,t,[i,this.ui()]),"resize"!==t&&this._trigger(t,i,this.ui())},plugins:{},ui:function(){return{originalElement:this.originalElement,element:this.element,helper:this.helper,position:this.position,size:this.size,originalSize:this.originalSize,originalPosition:this.originalPosition}}}),e.ui.plugin.add("resizable","animate",{stop:function(t){var i=e(this).resizable("instance"),n=i.options,a=i._proportionallyResizeElements,s=a.length&&/textarea/i.test(a[0].nodeName),r=s&&i._hasScroll(a[0],"left")?0:i.sizeDiff.height,o=s?0:i.sizeDiff.width,l={width:i.size.width-o,height:i.size.height-r},c=parseFloat(i.element.css("left"))+(i.position.left-i.originalPosition.left)||null,d=parseFloat(i.element.css("top"))+(i.position.top-i.originalPosition.top)||null;i.element.animate(e.extend(l,d&&c?{top:d,left:c}:{}),{duration:n.animateDuration,easing:n.animateEasing,step:function(){var n={width:parseFloat(i.element.css("width")),height:parseFloat(i.element.css("height")),top:parseFloat(i.element.css("top")),left:parseFloat(i.element.css("left"))};a&&a.length&&e(a[0]).css({width:n.width,height:n.height}),i._updateCache(n),i._propagate("resize",t)}})}}),e.ui.plugin.add("resizable","containment",{start:function(){var t,i,n,a,s,r,o,l=e(this).resizable("instance"),c=l.options,d=l.element,u=c.containment,h=u instanceof e?u.get(0):/parent/.test(u)?d.parent().get(0):u;h&&(l.containerElement=e(h),/document/.test(u)||u===document?(l.containerOffset={left:0,top:0},l.containerPosition={left:0,top:0},l.parentData={element:e(document),left:0,top:0,width:e(document).width(),height:e(document).height()||document.body.parentNode.scrollHeight}):(t=e(h),i=[],e(["Top","Right","Left","Bottom"]).each(function(e,n){i[e]=l._num(t.css("padding"+n))}),l.containerOffset=t.offset(),l.containerPosition=t.position(),l.containerSize={height:t.innerHeight()-i[3],width:t.innerWidth()-i[1]},n=l.containerOffset,a=l.containerSize.height,s=l.containerSize.width,r=l._hasScroll(h,"left")?h.scrollWidth:s,o=l._hasScroll(h)?h.scrollHeight:a,l.parentData={element:h,left:n.left,top:n.top,width:r,height:o}))},resize:function(t){var i,n,a,s,r=e(this).resizable("instance"),o=r.options,l=r.containerOffset,c=r.position,d=r._aspectRatio||t.shiftKey,u={top:0,left:0},h=r.containerElement,p=!0;h[0]!==document&&/static/.test(h.css("position"))&&(u=l),c.left<(r._helper?l.left:0)&&(r.size.width=r.size.width+(r._helper?r.position.left-l.left:r.position.left-u.left),d&&(r.size.height=r.size.width/r.aspectRatio,p=!1),r.position.left=o.helper?l.left:0),c.top<(r._helper?l.top:0)&&(r.size.height=r.size.height+(r._helper?r.position.top-l.top:r.position.top),d&&(r.size.width=r.size.height*r.aspectRatio,p=!1),r.position.top=r._helper?l.top:0),a=r.containerElement.get(0)===r.element.parent().get(0),s=/relative|absolute/.test(r.containerElement.css("position")),a&&s?(r.offset.left=r.parentData.left+r.position.left,r.offset.top=r.parentData.top+r.position.top):(r.offset.left=r.element.offset().left,r.offset.top=r.element.offset().top),i=Math.abs(r.sizeDiff.width+(r._helper?r.offset.left-u.left:r.offset.left-l.left)),n=Math.abs(r.sizeDiff.height+(r._helper?r.offset.top-u.top:r.offset.top-l.top)),i+r.size.width>=r.parentData.width&&(r.size.width=r.parentData.width-i,d&&(r.size.height=r.size.width/r.aspectRatio,p=!1)),n+r.size.height>=r.parentData.height&&(r.size.height=r.parentData.height-n,d&&(r.size.width=r.size.height*r.aspectRatio,p=!1)),p||(r.position.left=r.prevPosition.left,r.position.top=r.prevPosition.top,r.size.width=r.prevSize.width,r.size.height=r.prevSize.height)},stop:function(){var t=e(this).resizable("instance"),i=t.options,n=t.containerOffset,a=t.containerPosition,s=t.containerElement,r=e(t.helper),o=r.offset(),l=r.outerWidth()-t.sizeDiff.width,c=r.outerHeight()-t.sizeDiff.height;t._helper&&!i.animate&&/relative/.test(s.css("position"))&&e(this).css({left:o.left-a.left-n.left,width:l,height:c}),t._helper&&!i.animate&&/static/.test(s.css("position"))&&e(this).css({left:o.left-a.left-n.left,width:l,height:c})}}),e.ui.plugin.add("resizable","alsoResize",{start:function(){var t=e(this).resizable("instance"),i=t.options;e(i.alsoResize).each(function(){var t=e(this);t.data("ui-resizable-alsoresize",{width:parseFloat(t.width()),height:parseFloat(t.height()),left:parseFloat(t.css("left")),top:parseFloat(t.css("top"))})})},resize:function(t,i){var n=e(this).resizable("instance"),a=n.options,s=n.originalSize,r=n.originalPosition,o={height:n.size.height-s.height||0,width:n.size.width-s.width||0,top:n.position.top-r.top||0,left:n.position.left-r.left||0};e(a.alsoResize).each(function(){var t=e(this),n=e(this).data("ui-resizable-alsoresize"),a={},s=t.parents(i.originalElement[0]).length?["width","height"]:["width","height","top","left"];e.each(s,function(e,t){var i=(n[t]||0)+(o[t]||0);i&&i>=0&&(a[t]=i||null)}),t.css(a)})},stop:function(){e(this).removeData("ui-resizable-alsoresize")}}),e.ui.plugin.add("resizable","ghost",{start:function(){var t=e(this).resizable("instance"),i=t.size;t.ghost=t.originalElement.clone(),t.ghost.css({opacity:.25,display:"block",position:"relative",height:i.height,width:i.width,margin:0,left:0,top:0}),t._addClass(t.ghost,"ui-resizable-ghost"),!1!==e.uiBackCompat&&"string"==typeof t.options.ghost&&t.ghost.addClass(this.options.ghost),t.ghost.appendTo(t.helper)},resize:function(){var t=e(this).resizable("instance");t.ghost&&t.ghost.css({position:"relative",height:t.size.height,width:t.size.width})},stop:function(){var t=e(this).resizable("instance");t.ghost&&t.helper&&t.helper.get(0).removeChild(t.ghost.get(0))}}),e.ui.plugin.add("resizable","grid",{resize:function(){var t,i=e(this).resizable("instance"),n=i.options,a=i.size,s=i.originalSize,r=i.originalPosition,o=i.axis,l="number"==typeof n.grid?[n.grid,n.grid]:n.grid,c=l[0]||1,d=l[1]||1,u=Math.round((a.width-s.width)/c)*c,h=Math.round((a.height-s.height)/d)*d,p=s.width+u,m=s.height+h,f=n.maxWidth&&n.maxWidth<p,g=n.maxHeight&&n.maxHeight<m,v=n.minWidth&&n.minWidth>p,b=n.minHeight&&n.minHeight>m;n.grid=l,v&&(p+=c),b&&(m+=d),f&&(p-=c),g&&(m-=d),/^(se|s|e)$/.test(o)?(i.size.width=p,i.size.height=m):/^(ne)$/.test(o)?(i.size.width=p,i.size.height=m,i.position.top=r.top-h):/^(sw)$/.test(o)?(i.size.width=p,i.size.height=m,i.position.left=r.left-u):((m-d<=0||p-c<=0)&&(t=i._getPaddingPlusBorderDimensions(this)),m-d>0?(i.size.height=m,i.position.top=r.top-h):(m=d-t.height,i.size.height=m,i.position.top=r.top+s.height-m),p-c>0?(i.size.width=p,i.position.left=r.left-u):(p=c-t.width,i.size.width=p,i.position.left=r.left+s.width-p))}}),e.ui.resizable}),define("common/component/panel/trait/resizablePanelTrait",["require","underscore","./abstractPanelTrait","css!jquery-ui/jquery-ui","jquery-ui/widgets/resizable"],function(e){"use strict";function t(e,t){this.trigger("resize",e,t)}function i(e,t){this.trigger("resizeStart",e,t)}function n(e,t){this.trigger("resizeStop",e,t)}var a=e("underscore"),s=e("./abstractPanelTrait");return e("css!jquery-ui/jquery-ui"),e("jquery-ui/widgets/resizable"),a.extend({},s,{onConstructor:function(e){e||(e={}),this.handles=e.handles||"e, s, se",this.minWidth=e.minWidth||10,this.minHeight=e.minHeight||10,this.maxWidth=e.maxWidth||null,this.maxHeight=e.maxHeight||null,this.alsoResize=e.alsoResize||!1,this.resizableEl=e.resizableEl},afterSetElement:function(){this.$resizableEl=this.$el.find(this.resizableEl).length?this.$el.find(this.resizableEl):this.$el;var e=this.handles;"function"==typeof e&&(e=e(this.$el)),this.$resizableEl.resizable({handles:e,minHeight:this.minHeight,minWidth:this.minWidth,maxWidth:this.maxWidth,maxHeight:this.maxHeight,alsoResize:this.alsoResize,resize:a.bind(t,this),start:a.bind(i,this),stop:a.bind(n,this)})},onRemove:function(){try{this.$el.resizable("destroy")}catch(e){}}})}),define("text!common/component/dialog/template/dialogTemplate.htm",[],function(){return'<div class="jr-mDialog jr {{- additionalCssClasses }}" tabindex="-1">\n\n    <js-templateNonce></js-templateNonce>\n    <div class="jr-mDialog-header mover jr">\n        <h1 class="jr-mDialog-header-title jr">{{- title }}</h1>\n    </div>\n    <div class="jr-mDialog-body jr {{- additionalBodyCssClasses }}">\n        <div class="jr-mDialog-body-wrapper jr subcontainer"></div>\n    </div>\n    <div class="jr-mDialog-footer jr"></div>\n\n</div>\n'}),define("text!common/component/dialog/template/dialogButtonTemplate.htm",[],function(){return"<button class=\"button action up {{- primary ? 'primary' : ''}} {{- (typeof float !== 'undefined' ? 'right' : '') }}\">\n\n    <js-templateNonce></js-templateNonce>\n    <span class=\"wrap\">{{- label }}<span class=\"icon\"></span></span>\n</button>\n"}),function(e){"function"==typeof define&&define.amd?define("jquery-ui/data",["jquery","./version"],e):e(jQuery)}(function(e){return e.extend(e.expr[":"],{data:e.expr.createPseudo?e.expr.createPseudo(function(t){return function(i){return!!e.data(i,t)}}):function(t,i,n){return!!e.data(t,n[3])}})}),function(e){"function"==typeof define&&define.amd?define("jquery-ui/safe-active-element",["jquery","./version"],e):e(jQuery)}(function(e){return e.ui.safeActiveElement=function(e){var t;try{t=e.activeElement}catch(i){t=e.body}return t||(t=e.body),t.nodeName||(t=e.body),t}}),function(e){"function"==typeof define&&define.amd?define("jquery-ui/safe-blur",["jquery","./version"],e):e(jQuery)}(function(e){return e.ui.safeBlur=function(t){t&&"body"!==t.nodeName.toLowerCase()&&e(t).trigger("blur")}}),function(e){"function"==typeof define&&define.amd?define("jquery-ui/scroll-parent",["jquery","./version"],e):e(jQuery)}(function(e){return e.fn.scrollParent=function(t){var i=this.css("position"),n="absolute"===i,a=t?/(auto|scroll|hidden)/:/(auto|scroll)/,s=this.parents().filter(function(){var t=e(this);return(!n||"static"!==t.css("position"))&&a.test(t.css("overflow")+t.css("overflow-y")+t.css("overflow-x"))}).eq(0);return"fixed"!==i&&s.length?s:e(this[0].ownerDocument||document)}}),function(e){"function"==typeof define&&define.amd?define("jquery-ui/widgets/draggable",["jquery","./mouse","../data","../plugin","../safe-active-element","../safe-blur","../scroll-parent","../version","../widget"],e):e(jQuery)}(function(e){return e.widget("ui.draggable",e.ui.mouse,{version:"1.12.1",widgetEventPrefix:"drag",options:{addClasses:!0,appendTo:"parent",axis:!1,connectToSortable:!1,containment:!1,cursor:"auto",cursorAt:!1,grid:!1,handle:!1,helper:"original",iframeFix:!1,opacity:!1,refreshPositions:!1,revert:!1,revertDuration:500,scope:"default",scroll:!0,scrollSensitivity:20,scrollSpeed:20,snap:!1,snapMode:"both",snapTolerance:20,stack:!1,zIndex:!1,drag:null,start:null,stop:null},_create:function(){"original"===this.options.helper&&this._setPositionRelative(),this.options.addClasses&&this._addClass("ui-draggable"),this._setHandleClassName(),this._mouseInit()},_setOption:function(e,t){this._super(e,t),"handle"===e&&(this._removeHandleClassName(),this._setHandleClassName())},_destroy:function(){if((this.helper||this.element).is(".ui-draggable-dragging"))return void(this.destroyOnClear=!0);this._removeHandleClassName(),this._mouseDestroy()},_mouseCapture:function(t){var i=this.options;return!(this.helper||i.disabled||e(t.target).closest(".ui-resizable-handle").length>0)&&(this.handle=this._getHandle(t),!!this.handle&&(this._blurActiveElement(t),this._blockFrames(!0===i.iframeFix?"iframe":i.iframeFix),!0))},_blockFrames:function(t){this.iframeBlocks=this.document.find(t).map(function(){var t=e(this);return e("<div>").css("position","absolute").appendTo(t.parent()).outerWidth(t.outerWidth()).outerHeight(t.outerHeight()).offset(t.offset())[0]})},_unblockFrames:function(){this.iframeBlocks&&(this.iframeBlocks.remove(),delete this.iframeBlocks)},_blurActiveElement:function(t){var i=e.ui.safeActiveElement(this.document[0]);e(t.target).closest(i).length||e.ui.safeBlur(i)},_mouseStart:function(t){var i=this.options;return this.helper=this._createHelper(t),this._addClass(this.helper,"ui-draggable-dragging"),this._cacheHelperProportions(),e.ui.ddmanager&&(e.ui.ddmanager.current=this),this._cacheMargins(),this.cssPosition=this.helper.css("position"),this.scrollParent=this.helper.scrollParent(!0),this.offsetParent=this.helper.offsetParent(),this.hasFixedAncestor=this.helper.parents().filter(function(){return"fixed"===e(this).css("position")}).length>0,this.positionAbs=this.element.offset(),this._refreshOffsets(t),this.originalPosition=this.position=this._generatePosition(t,!1),this.originalPageX=t.pageX,this.originalPageY=t.pageY,i.cursorAt&&this._adjustOffsetFromHelper(i.cursorAt),this._setContainment(),!1===this._trigger("start",t)?(this._clear(),!1):(this._cacheHelperProportions(),e.ui.ddmanager&&!i.dropBehaviour&&e.ui.ddmanager.prepareOffsets(this,t),this._mouseDrag(t,!0),e.ui.ddmanager&&e.ui.ddmanager.dragStart(this,t),!0)},_refreshOffsets:function(e){this.offset={top:this.positionAbs.top-this.margins.top,left:this.positionAbs.left-this.margins.left,scroll:!1,parent:this._getParentOffset(),relative:this._getRelativeOffset()},this.offset.click={left:e.pageX-this.offset.left,top:e.pageY-this.offset.top}},_mouseDrag:function(t,i){if(this.hasFixedAncestor&&(this.offset.parent=this._getParentOffset()),this.position=this._generatePosition(t,!0),this.positionAbs=this._convertPositionTo("absolute"),!i){var n=this._uiHash();if(!1===this._trigger("drag",t,n))return this._mouseUp(new e.Event("mouseup",t)),!1;this.position=n.position}return this.helper[0].style.left=this.position.left+"px",this.helper[0].style.top=this.position.top+"px",e.ui.ddmanager&&e.ui.ddmanager.drag(this,t),!1},_mouseStop:function(t){var i=this,n=!1;return e.ui.ddmanager&&!this.options.dropBehaviour&&(n=e.ui.ddmanager.drop(this,t)),this.dropped&&(n=this.dropped,this.dropped=!1),"invalid"===this.options.revert&&!n||"valid"===this.options.revert&&n||!0===this.options.revert||e.isFunction(this.options.revert)&&this.options.revert.call(this.element,n)?e(this.helper).animate(this.originalPosition,parseInt(this.options.revertDuration,10),function(){!1!==i._trigger("stop",t)&&i._clear()}):!1!==this._trigger("stop",t)&&this._clear(),!1},_mouseUp:function(t){return this._unblockFrames(),e.ui.ddmanager&&e.ui.ddmanager.dragStop(this,t),this.handleElement.is(t.target)&&this.element.trigger("focus"),e.ui.mouse.prototype._mouseUp.call(this,t)},cancel:function(){return this.helper.is(".ui-draggable-dragging")?this._mouseUp(new e.Event("mouseup",{target:this.element[0]})):this._clear(),this},_getHandle:function(t){return!this.options.handle||!!e(t.target).closest(this.element.find(this.options.handle)).length},_setHandleClassName:function(){this.handleElement=this.options.handle?this.element.find(this.options.handle):this.element,this._addClass(this.handleElement,"ui-draggable-handle")},_removeHandleClassName:function(){this._removeClass(this.handleElement,"ui-draggable-handle")},_createHelper:function(t){var i=this.options,n=e.isFunction(i.helper),a=n?e(i.helper.apply(this.element[0],[t])):"clone"===i.helper?this.element.clone().removeAttr("id"):this.element;return a.parents("body").length||a.appendTo("parent"===i.appendTo?this.element[0].parentNode:i.appendTo),n&&a[0]===this.element[0]&&this._setPositionRelative(),a[0]===this.element[0]||/(fixed|absolute)/.test(a.css("position"))||a.css("position","absolute"),a},_setPositionRelative:function(){/^(?:r|a|f)/.test(this.element.css("position"))||(this.element[0].style.position="relative")},_adjustOffsetFromHelper:function(t){"string"==typeof t&&(t=t.split(" ")),e.isArray(t)&&(t={left:+t[0],top:+t[1]||0}),"left"in t&&(this.offset.click.left=t.left+this.margins.left),"right"in t&&(this.offset.click.left=this.helperProportions.width-t.right+this.margins.left),"top"in t&&(this.offset.click.top=t.top+this.margins.top),"bottom"in t&&(this.offset.click.top=this.helperProportions.height-t.bottom+this.margins.top)},_isRootNode:function(e){return/(html|body)/i.test(e.tagName)||e===this.document[0]},_getParentOffset:function(){var t=this.offsetParent.offset(),i=this.document[0];return"absolute"===this.cssPosition&&this.scrollParent[0]!==i&&e.contains(this.scrollParent[0],this.offsetParent[0])&&(t.left+=this.scrollParent.scrollLeft(),t.top+=this.scrollParent.scrollTop()),this._isRootNode(this.offsetParent[0])&&(t={top:0,left:0}),{top:t.top+(parseInt(this.offsetParent.css("borderTopWidth"),10)||0),left:t.left+(parseInt(this.offsetParent.css("borderLeftWidth"),10)||0)}},_getRelativeOffset:function(){if("relative"!==this.cssPosition)return{top:0,left:0};var e=this.element.position(),t=this._isRootNode(this.scrollParent[0]);return{top:e.top-(parseInt(this.helper.css("top"),10)||0)+(t?0:this.scrollParent.scrollTop()),left:e.left-(parseInt(this.helper.css("left"),10)||0)+(t?0:this.scrollParent.scrollLeft())}},_cacheMargins:function(){this.margins={left:parseInt(this.element.css("marginLeft"),10)||0,top:parseInt(this.element.css("marginTop"),10)||0,right:parseInt(this.element.css("marginRight"),10)||0,bottom:parseInt(this.element.css("marginBottom"),10)||0}},_cacheHelperProportions:function(){this.helperProportions={width:this.helper.outerWidth(),height:this.helper.outerHeight()}},_setContainment:function(){var t,i,n,a=this.options,s=this.document[0];return this.relativeContainer=null,a.containment?"window"===a.containment?void(this.containment=[e(window).scrollLeft()-this.offset.relative.left-this.offset.parent.left,e(window).scrollTop()-this.offset.relative.top-this.offset.parent.top,e(window).scrollLeft()+e(window).width()-this.helperProportions.width-this.margins.left,e(window).scrollTop()+(e(window).height()||s.body.parentNode.scrollHeight)-this.helperProportions.height-this.margins.top]):"document"===a.containment?void(this.containment=[0,0,e(s).width()-this.helperProportions.width-this.margins.left,(e(s).height()||s.body.parentNode.scrollHeight)-this.helperProportions.height-this.margins.top]):a.containment.constructor===Array?void(this.containment=a.containment):("parent"===a.containment&&(a.containment=this.helper[0].parentNode),i=e(a.containment),void((n=i[0])&&(t=/(scroll|auto)/.test(i.css("overflow")),this.containment=[(parseInt(i.css("borderLeftWidth"),10)||0)+(parseInt(i.css("paddingLeft"),10)||0),(parseInt(i.css("borderTopWidth"),10)||0)+(parseInt(i.css("paddingTop"),10)||0),(t?Math.max(n.scrollWidth,n.offsetWidth):n.offsetWidth)-(parseInt(i.css("borderRightWidth"),10)||0)-(parseInt(i.css("paddingRight"),10)||0)-this.helperProportions.width-this.margins.left-this.margins.right,(t?Math.max(n.scrollHeight,n.offsetHeight):n.offsetHeight)-(parseInt(i.css("borderBottomWidth"),10)||0)-(parseInt(i.css("paddingBottom"),10)||0)-this.helperProportions.height-this.margins.top-this.margins.bottom],this.relativeContainer=i))):void(this.containment=null)},_convertPositionTo:function(e,t){t||(t=this.position);var i="absolute"===e?1:-1,n=this._isRootNode(this.scrollParent[0]);return{top:t.top+this.offset.relative.top*i+this.offset.parent.top*i-("fixed"===this.cssPosition?-this.offset.scroll.top:n?0:this.offset.scroll.top)*i,left:t.left+this.offset.relative.left*i+this.offset.parent.left*i-("fixed"===this.cssPosition?-this.offset.scroll.left:n?0:this.offset.scroll.left)*i}},_generatePosition:function(e,t){var i,n,a,s,r=this.options,o=this._isRootNode(this.scrollParent[0]),l=e.pageX,c=e.pageY;return o&&this.offset.scroll||(this.offset.scroll={top:this.scrollParent.scrollTop(),left:this.scrollParent.scrollLeft()}),t&&(this.containment&&(this.relativeContainer?(n=this.relativeContainer.offset(),i=[this.containment[0]+n.left,this.containment[1]+n.top,this.containment[2]+n.left,this.containment[3]+n.top]):i=this.containment,e.pageX-this.offset.click.left<i[0]&&(l=i[0]+this.offset.click.left),e.pageY-this.offset.click.top<i[1]&&(c=i[1]+this.offset.click.top),e.pageX-this.offset.click.left>i[2]&&(l=i[2]+this.offset.click.left),e.pageY-this.offset.click.top>i[3]&&(c=i[3]+this.offset.click.top)),r.grid&&(a=r.grid[1]?this.originalPageY+Math.round((c-this.originalPageY)/r.grid[1])*r.grid[1]:this.originalPageY,c=i?a-this.offset.click.top>=i[1]||a-this.offset.click.top>i[3]?a:a-this.offset.click.top>=i[1]?a-r.grid[1]:a+r.grid[1]:a,s=r.grid[0]?this.originalPageX+Math.round((l-this.originalPageX)/r.grid[0])*r.grid[0]:this.originalPageX,l=i?s-this.offset.click.left>=i[0]||s-this.offset.click.left>i[2]?s:s-this.offset.click.left>=i[0]?s-r.grid[0]:s+r.grid[0]:s),"y"===r.axis&&(l=this.originalPageX),"x"===r.axis&&(c=this.originalPageY)),{top:c-this.offset.click.top-this.offset.relative.top-this.offset.parent.top+("fixed"===this.cssPosition?-this.offset.scroll.top:o?0:this.offset.scroll.top),left:l-this.offset.click.left-this.offset.relative.left-this.offset.parent.left+("fixed"===this.cssPosition?-this.offset.scroll.left:o?0:this.offset.scroll.left)}},_clear:function(){this._removeClass(this.helper,"ui-draggable-dragging"),this.helper[0]===this.element[0]||this.cancelHelperRemoval||this.helper.remove(),this.helper=null,this.cancelHelperRemoval=!1,this.destroyOnClear&&this.destroy()},_trigger:function(t,i,n){return n=n||this._uiHash(),e.ui.plugin.call(this,t,[i,n,this],!0),/^(drag|start|stop)/.test(t)&&(this.positionAbs=this._convertPositionTo("absolute"),n.offset=this.positionAbs),e.Widget.prototype._trigger.call(this,t,i,n)},plugins:{},_uiHash:function(){return{helper:this.helper,position:this.position,originalPosition:this.originalPosition,offset:this.positionAbs}}}),e.ui.plugin.add("draggable","connectToSortable",{start:function(t,i,n){var a=e.extend({},i,{item:n.element});n.sortables=[],e(n.options.connectToSortable).each(function(){var i=e(this).sortable("instance");i&&!i.options.disabled&&(n.sortables.push(i),i.refreshPositions(),i._trigger("activate",t,a))})},stop:function(t,i,n){var a=e.extend({},i,{item:n.element});n.cancelHelperRemoval=!1,e.each(n.sortables,function(){var e=this;e.isOver?(e.isOver=0,n.cancelHelperRemoval=!0,e.cancelHelperRemoval=!1,e._storedCSS={position:e.placeholder.css("position"),top:e.placeholder.css("top"),left:e.placeholder.css("left")},e._mouseStop(t),e.options.helper=e.options._helper):(e.cancelHelperRemoval=!0,e._trigger("deactivate",t,a))})},drag:function(t,i,n){e.each(n.sortables,function(){var a=!1,s=this;s.positionAbs=n.positionAbs,s.helperProportions=n.helperProportions,s.offset.click=n.offset.click,s._intersectsWith(s.containerCache)&&(a=!0,e.each(n.sortables,function(){return this.positionAbs=n.positionAbs,this.helperProportions=n.helperProportions,this.offset.click=n.offset.click,this!==s&&this._intersectsWith(this.containerCache)&&e.contains(s.element[0],this.element[0])&&(a=!1),a})),a?(s.isOver||(s.isOver=1,n._parent=i.helper.parent(),s.currentItem=i.helper.appendTo(s.element).data("ui-sortable-item",!0),s.options._helper=s.options.helper,s.options.helper=function(){return i.helper[0]},t.target=s.currentItem[0],s._mouseCapture(t,!0),s._mouseStart(t,!0,!0),s.offset.click.top=n.offset.click.top,s.offset.click.left=n.offset.click.left,s.offset.parent.left-=n.offset.parent.left-s.offset.parent.left,s.offset.parent.top-=n.offset.parent.top-s.offset.parent.top,n._trigger("toSortable",t),n.dropped=s.element,e.each(n.sortables,function(){this.refreshPositions()}),n.currentItem=n.element,s.fromOutside=n),s.currentItem&&(s._mouseDrag(t),i.position=s.position)):s.isOver&&(s.isOver=0,s.cancelHelperRemoval=!0,s.options._revert=s.options.revert,s.options.revert=!1,s._trigger("out",t,s._uiHash(s)),s._mouseStop(t,!0),s.options.revert=s.options._revert,s.options.helper=s.options._helper,s.placeholder&&s.placeholder.remove(),i.helper.appendTo(n._parent),n._refreshOffsets(t),i.position=n._generatePosition(t,!0),n._trigger("fromSortable",t),n.dropped=!1,e.each(n.sortables,function(){this.refreshPositions()}))})}}),e.ui.plugin.add("draggable","cursor",{start:function(t,i,n){var a=e("body"),s=n.options;a.css("cursor")&&(s._cursor=a.css("cursor")),a.css("cursor",s.cursor)},stop:function(t,i,n){var a=n.options;a._cursor&&e("body").css("cursor",a._cursor)}}),e.ui.plugin.add("draggable","opacity",{start:function(t,i,n){var a=e(i.helper),s=n.options;a.css("opacity")&&(s._opacity=a.css("opacity")),a.css("opacity",s.opacity)},stop:function(t,i,n){var a=n.options;a._opacity&&e(i.helper).css("opacity",a._opacity)}}),e.ui.plugin.add("draggable","scroll",{start:function(e,t,i){i.scrollParentNotHidden||(i.scrollParentNotHidden=i.helper.scrollParent(!1)),i.scrollParentNotHidden[0]!==i.document[0]&&"HTML"!==i.scrollParentNotHidden[0].tagName&&(i.overflowOffset=i.scrollParentNotHidden.offset())},drag:function(t,i,n){var a=n.options,s=!1,r=n.scrollParentNotHidden[0],o=n.document[0];r!==o&&"HTML"!==r.tagName?(a.axis&&"x"===a.axis||(n.overflowOffset.top+r.offsetHeight-t.pageY<a.scrollSensitivity?r.scrollTop=s=r.scrollTop+a.scrollSpeed:t.pageY-n.overflowOffset.top<a.scrollSensitivity&&(r.scrollTop=s=r.scrollTop-a.scrollSpeed)),a.axis&&"y"===a.axis||(n.overflowOffset.left+r.offsetWidth-t.pageX<a.scrollSensitivity?r.scrollLeft=s=r.scrollLeft+a.scrollSpeed:t.pageX-n.overflowOffset.left<a.scrollSensitivity&&(r.scrollLeft=s=r.scrollLeft-a.scrollSpeed))):(a.axis&&"x"===a.axis||(t.pageY-e(o).scrollTop()<a.scrollSensitivity?s=e(o).scrollTop(e(o).scrollTop()-a.scrollSpeed):e(window).height()-(t.pageY-e(o).scrollTop())<a.scrollSensitivity&&(s=e(o).scrollTop(e(o).scrollTop()+a.scrollSpeed))),a.axis&&"y"===a.axis||(t.pageX-e(o).scrollLeft()<a.scrollSensitivity?s=e(o).scrollLeft(e(o).scrollLeft()-a.scrollSpeed):e(window).width()-(t.pageX-e(o).scrollLeft())<a.scrollSensitivity&&(s=e(o).scrollLeft(e(o).scrollLeft()+a.scrollSpeed)))),!1!==s&&e.ui.ddmanager&&!a.dropBehaviour&&e.ui.ddmanager.prepareOffsets(n,t)}}),e.ui.plugin.add("draggable","snap",{start:function(t,i,n){var a=n.options;n.snapElements=[],e(a.snap.constructor!==String?a.snap.items||":data(ui-draggable)":a.snap).each(function(){var t=e(this),i=t.offset();this!==n.element[0]&&n.snapElements.push({item:this,width:t.outerWidth(),height:t.outerHeight(),top:i.top,left:i.left})})},drag:function(t,i,n){var a,s,r,o,l,c,d,u,h,p,m=n.options,f=m.snapTolerance,g=i.offset.left,v=g+n.helperProportions.width,b=i.offset.top,S=b+n.helperProportions.height;for(h=n.snapElements.length-1;h>=0;h--)l=n.snapElements[h].left-n.margins.left,c=l+n.snapElements[h].width,d=n.snapElements[h].top-n.margins.top,u=d+n.snapElements[h].height,v<l-f||g>c+f||S<d-f||b>u+f||!e.contains(n.snapElements[h].item.ownerDocument,n.snapElements[h].item)?(n.snapElements[h].snapping&&n.options.snap.release&&n.options.snap.release.call(n.element,t,e.extend(n._uiHash(),{snapItem:n.snapElements[h].item})),n.snapElements[h].snapping=!1):("inner"!==m.snapMode&&(a=Math.abs(d-S)<=f,s=Math.abs(u-b)<=f,r=Math.abs(l-v)<=f,o=Math.abs(c-g)<=f,a&&(i.position.top=n._convertPositionTo("relative",{top:d-n.helperProportions.height,left:0}).top),s&&(i.position.top=n._convertPositionTo("relative",{top:u,left:0}).top),r&&(i.position.left=n._convertPositionTo("relative",{top:0,left:l-n.helperProportions.width}).left),o&&(i.position.left=n._convertPositionTo("relative",{top:0,left:c}).left)),p=a||s||r||o,"outer"!==m.snapMode&&(a=Math.abs(d-b)<=f,s=Math.abs(u-S)<=f,r=Math.abs(l-g)<=f,o=Math.abs(c-v)<=f,a&&(i.position.top=n._convertPositionTo("relative",{top:d,left:0}).top),s&&(i.position.top=n._convertPositionTo("relative",{top:u-n.helperProportions.height,left:0}).top),r&&(i.position.left=n._convertPositionTo("relative",{top:0,left:l}).left),o&&(i.position.left=n._convertPositionTo("relative",{top:0,left:c-n.helperProportions.width}).left)),!n.snapElements[h].snapping&&(a||s||r||o||p)&&n.options.snap.snap&&n.options.snap.snap.call(n.element,t,e.extend(n._uiHash(),{snapItem:n.snapElements[h].item})),n.snapElements[h].snapping=a||s||r||o||p)}}),e.ui.plugin.add("draggable","stack",{start:function(t,i,n){var a,s=n.options,r=e.makeArray(e(s.stack)).sort(function(t,i){return(parseInt(e(t).css("zIndex"),10)||0)-(parseInt(e(i).css("zIndex"),10)||0)});r.length&&(a=parseInt(e(r[0]).css("zIndex"),10)||0,e(r).each(function(t){e(this).css("zIndex",a+t)}),this.css("zIndex",a+r.length))}}),e.ui.plugin.add("draggable","zIndex",{start:function(t,i,n){var a=e(i.helper),s=n.options;a.css("zIndex")&&(s._zIndex=a.css("zIndex")),a.css("zIndex",s.zIndex)},stop:function(t,i,n){var a=n.options;a._zIndex&&e(i.helper).css("zIndex",a._zIndex)}}),e.ui.draggable}),define("common/component/dialog/Dialog",["require","underscore","jquery","common/component/base/Dimmer","common/component/panel/Panel","common/component/base/OptionContainer","common/component/panel/trait/resizablePanelTrait","text!./template/dialogTemplate.htm","text!./template/dialogButtonTemplate.htm","jquery-ui/widgets/draggable"],function(e){"use strict";var t=e("underscore"),i=e("jquery"),n=e("common/component/base/Dimmer"),a=e("common/component/panel/Panel"),s=e("common/component/base/OptionContainer"),r=e("common/component/panel/trait/resizablePanelTrait"),o=e("text!./template/dialogTemplate.htm"),l=e("text!./template/dialogButtonTemplate.htm");e("jquery-ui/widgets/draggable");var c=a.extend({defaultTemplate:o,events:{mousedown:"_focus",touchstart:"_focus",keydown:"_onKeyDown",keyup:"_onKeyboardEvent",keypress:"_onKeyboardEvent",resize:"_onDialogResize"},constructor:function(e){e||(e={}),e.traits||(e.traits=[]),this.resizable=e.resizable||!1,this.modal=e.modal||!1,this.additionalBodyCssClasses=e.additionalBodyCssClasses||"",this.resizable&&-1===t.indexOf(e.traits,r)&&e.traits.push(r),a.call(this,e)},initialize:function(e){this.dialogOptions=t.extend({},e),this.collapsed=!this.collapsed,this.resetSizeOnOpen=!!t.isUndefined(e.resetSizeOnOpen)||e.resetSizeOnOpen,t.isEmpty(e.buttons)||(this.buttons=new s({options:e.buttons,el:this.$(".jr-mDialog-footer")[0]||this.$(".footer")[0],contextName:"button",optionTemplate:e.dialogButtonTemplate||l})),a.prototype.initialize.apply(this,arguments),this.buttons&&this.listenTo(this.buttons,t.map(e.buttons,function(e){return"button:"+e.action}).join(" "),t.bind(function(e,t){this.trigger("button:"+t.get("action"),e,t)},this)),this.render()},getTemplateArguments:function(){var e=a.prototype.getTemplateArguments.apply(this,arguments);return t.extend(e,{additionalBodyCssClasses:this.additionalBodyCssClasses})},setElement:function(e){var t=a.prototype.setElement.apply(this,arguments);return this.buttons&&this.buttons.setElement(this.$(".jr-mDialog-footer")[0]||this.$(".footer")[0]),t},setTitle:function(e){this.$(".jr-mDialog-header > .jr-mDialog-header-title").text(e)},render:function(){return this.$el.hide(),this.modal&&(this.dimmer=new n({zIndex:900})),i("body").append(this.$el),this.$el.draggable({handle:".mover",addClasses:!1,containment:"document"}),this},open:function(e){return this.isVisible()?this:(this.resetSizeOnOpen&&(this.$el.css({height:"",width:""}),this.$el.find("textarea").css({height:"",width:""})),a.prototype.open.apply(this,arguments),this.modal&&this.dimmer.css({zIndex:++c.highestIndex}).show(),this._setMinSize(),this._position(e),this._increaseZIndex(),this.buttons&&this.buttons.$(".over").removeClass("over"),this.$el.show(),this.$el.find("input").first().focus(),this._onDialogResize(),this.trigger("dialog:visible"),this)},close:function(){if(this.isVisible())return this.$el.css({zIndex:--c.highestIndex}),this.modal&&this.dimmer.css({zIndex:--c.highestIndex}).hide(),this.$el.hide(),a.prototype.close.apply(this,arguments),this},addCssClasses:function(e){this.$el.addClass(e)},toggleCollapsedState:function(){return this},enableButton:function(e){this.buttons.enable(e)},disableButton:function(e){this.buttons.disable(e)},isVisible:function(){return this.$el.is(":visible")},_setMinSize:function(){this.dialogOptions.minWidth&&this.$el.css({minWidth:this.dialogOptions.minWidth}),
this.dialogOptions.minHeight&&this.$el.css({minHeight:this.dialogOptions.minHeight}),this.dialogOptions.setMinSizeAsSize&&this.$el.css({width:this.dialogOptions.minWidth,height:this.dialogOptions.minHeight})},_position:function(e){var t,n,a=i("body"),s=this.$el.height(),r=this.$el.width();if(e&&void 0!==e.top&&void 0!==e.left){t=e.top,n=e.left;var o=a.height(),l=a.width(),c=o-e.top,d=l-e.left;c<s&&(t=e.top-s,t=t<0?o/2-s/2:t),d<r&&(n=e.left-r,n=n<0?l/2-r/2:n)}else t=i(window).height()/2-s/2,n=i(window).width()/2-r/2;return this.$el.css({top:Math.max(0,t),left:Math.max(0,n),position:"absolute"}),this},_focus:function(){!this.modal&&this._increaseZIndex()},_increaseZIndex:function(){this.$el.css({zIndex:++c.highestIndex})},_onKeyDown:function(e){this.buttons._onKeyDown(e),e.stopPropagation()},_onKeyboardEvent:function(e){e.stopPropagation()},_onDialogResize:function(){},remove:function(){this.buttons&&this.buttons.remove(),this.dimmer&&this.dimmer.remove();try{this.$el.draggable("destroy")}catch(e){}a.prototype.remove.call(this)}},{highestIndex:5e3,resetHighestIndex:function(e){c.highestIndex=e||5e3}});return c}),define("text!common/component/dialog/template/alertDialogTemplate.htm",[],function(){return"<p class='alertText'>\n\n    <js-templateNonce></js-templateNonce>\n    {{- message }}\n</p>"}),define("common/component/dialog/AlertDialog",["require","underscore","./Dialog","common/util/xssUtil","text!./template/alertDialogTemplate.htm","bundle!js-sdk/CommonBundle"],function(e){"use strict";var t=e("underscore"),i=e("./Dialog"),n=e("common/util/xssUtil"),a=e("text!./template/alertDialogTemplate.htm"),s=e("bundle!js-sdk/CommonBundle");return i.extend({contentTemplate:t.template(a),constructor:function(e){e||(e={}),i.prototype.constructor.call(this,{modal:!1!==e.modal,message:e.message,additionalCssClasses:"alertDialog "+(e.additionalCssClasses||""),title:e.title||s["dialog.exception.title"],buttons:[{label:s["button.close"],action:"close",primary:!0}]},e)},initialize:function(e){i.prototype.initialize.apply(this,arguments),this.on("button:close",this.close),this.setMessage(e.message)},setMessage:function(e){e=n.softHtmlEscape(e,{whiteList:["br"]}),this.content=this.contentTemplate({message:e});var t=this.renderContent();this.$contentContainer.html(t)}})}),define("dataSource/model/AwsDataSourceModel",["require","dataSource/model/JdbcDataSourceModel","dataSource/model/BaseDataSourceModel","dataSource/collection/JdbcDriverCollection","settings!dataSourcePatterns","dataSource/enum/connectionTypes","bi/repository/enum/repositoryResourceTypes","underscore","jquery","bundle!jasperserver_messages","settings!awsSettings","bundle!jasperserver_config","dataSource/util/settingsUtility","xregexp"],function(e){"use strict";var t=e("dataSource/model/JdbcDataSourceModel"),i=e("dataSource/model/BaseDataSourceModel"),n=e("dataSource/collection/JdbcDriverCollection"),a=e("settings!dataSourcePatterns"),s=e("dataSource/enum/connectionTypes"),r=e("bi/repository/enum/repositoryResourceTypes"),o=e("underscore"),l=e("jquery"),c=e("bundle!jasperserver_messages"),d=e("settings!awsSettings"),u=e("bundle!jasperserver_config"),h=e("dataSource/util/settingsUtility"),p=e("xregexp"),m=t.extend({otherDriverIsPresent:!1,type:r.AWS_DATA_SOURCE,defaults:function(){var e={};return o.extend(e,t.prototype.defaults,{dbName:"",dbInstanceIdentifier:"",dbService:"",accessKey:"",secretKey:"",roleArn:"",region:"",credentialsType:"",connectionType:s.AWS}),e}(),validation:function(){var e={};return o.extend(e,{connectionUrl:[{required:!0,msg:c["ReportDataSourceValidator.error.not.empty.reportDataSource.connectionUrl"]},{xRegExpPattern:p(a.forbidWhitespacesPattern),msg:c["ReportDataSourceValidator.error.invalid.chars.reportDataSource.connectionUrl"]}],username:[{required:!0,msg:c["ReportDataSourceValidator.error.not.empty.reportDataSource.username"]}],driverClass:[{required:!0,msg:c["ReportDataSourceValidator.error.not.empty.reportDataSource.driverClass"]},{xRegExpPattern:p(a.forbidWhitespacesPattern),msg:c["ReportDataSourceValidator.error.invalid.chars.reportDataSource.driverClass"]},{fn:function(e,t,i){if(!new RegExp(a.attributePlaceholderPattern).test(e)){var n=this.drivers.getDriverByClass(e);if(!n||!n.get("available"))return c["ReportDataSourceValidator.error.not.empty.reportDataSource.driverNotInstalled"]}}}],dbName:[{required:!0,msg:c["ReportDataSourceValidator.error.not.empty.reportDataSource.dbNameIsEmpty"]}],region:[{required:!0}],accessKey:[{fn:function(e,t,i){if(i.credentialsType===m.credentialsType.AWS&&(o.isNull(e)||o.isUndefined(e)||o.isString(e)&&""===e))return c["fillParameters.error.mandatoryField"]}}],secretKey:[{fn:function(e,t,i){if(i.credentialsType===m.credentialsType.AWS&&(o.isNull(e)||o.isUndefined(e)||o.isString(e)&&""===e))return c["fillParameters.error.mandatoryField"]}}]}),e}(),initialize:function(e,t){i.prototype.initialize.apply(this,arguments);var a=h.deepDefaults(t,{awsSettings:d});this.isNew()?this.set("region",o.first(a.awsSettings.awsRegions)):(this.set("password",u["input.password.substitution"]),this.set("secretKey",u["input.password.substitution"])),this.set("credentialsType",!a.awsSettings.isEc2Instance||a.awsSettings.suppressEc2CredentialsWarnings||""!==this.get("accessKey")?m.credentialsType.AWS:m.credentialsType.EC2),this.initialization=l.Deferred(),this.drivers=new n([],this.options);var s=this;this.drivers.fetch({reset:!0}).done(function(){s.initialization.resolve()}),this.on("change:dbName change:dbPort change:dbHost change:sName change:connectionUrlTemplate",this.updateConnectionUrl),this.on("change:credentialsType",this.changeCredentialsType)},updateConnectionUrl:function(){if(this.get("connectionUrlTemplate")){var e=this.pick(["dbName","dbPort","dbHost","sName"]);e.sName||(e.sName=e.dbName);var t=this.replaceConnectionUrlTemplatePlaceholdersWithValues(this.get("connectionUrlTemplate"),e);this.set("connectionUrl",t)}},changeCredentialsType:function(){this.get("credentialsType")===m.credentialsType.EC2&&this.set({accessKey:"",secretKey:"",roleArn:""})},toJSON:function(){var e=t.prototype.toJSON.apply(this,arguments);return this.options.isEditMode&&e.secretKey===u["input.password.substitution"]&&(e.secretKey=null),e},getFullDbTreePath:function(){return this.get("dbInstanceIdentifier")&&this.get("dbService")?"/"+this.get("dbService")+"/"+this.get("dbInstanceIdentifier"):null}},{credentialsType:{EC2:"ec2",AWS:"aws"}});return m});var dynamicTree={trees:{},nodes:{},treeNodeEdited:null,editaborted:!1,activeTreeId:null,Tree:function(e,t){this.id=e,t?(this.setRootNode(t.root),this.bShowRoot=!!t.bShowRoot,this.handleNodeOnDblclick=void 0===t.handleNodeOnDblclick||t.handleNodeOnDblclick,this.multiSelectEnabled=!!t.multiSelectEnabled,this.showAllNodesOnStartup=!!t.showAllNodesOnStartup,this.treeClassName=t.treeClassName?t.treeClassName:"",this.dragPattern=t.dragPattern,this.dragClasses=t.dragClasses,this.dropClasses=t.dropClasses,this.selectOnMousedown=t.selectOnMousedown,this.regionID=t.regionID,this.scroll=t.scroll,this.templateDomId=t.templateDomId?t.templateDomId:this.DEFAULT_TREE_TEMPLATE_ID):(this.templateDomId=this.DEFAULT_TREE_TEMPLATE_ID,this.handleNodeOnDblclick=!0),this.stateObject={},this.sortNodes=!0,this.sorters=[this.sortByOrder,this.sortByName],this.selectedNodes=[],this.TREE_NN_ITEMS_SELECTED="#{count} items selected",dynamicTree.trees[this.id]=this,this._createFromTemplate(),this.refreshStyle(),this._registerEvents(),this._registerCustomScroll()},getNextId:function(){var e=1;return function(){return e++}}(),getActiveTree:function(){return dynamicTree.trees[dynamicTree.activeTreeId]},getTreeNode:function(e){return dynamicTree.nodes[e]},getStorageVal:function(e){return(JSON.parse(window.localStorage.getItem("dynamicTree"))||{})[e]||null},setStorageVal:function(e,t){var i=window.localStorage,n=JSON.parse(i.getItem("dynamicTree"))||{};n[e]=t;try{i.setItem("dynamicTree",JSON.stringify(n))}catch(e){window.console&&console.log(e)}},_templateHash:{}};dynamicTree.Tree.addVar("DEFAULT_TREE_TEMPLATE_ID","list_responsive_collapsible"),dynamicTree.Tree.addVar("HIDE_ROOT_CLASS_NAME","hideRoot"),dynamicTree.Tree.addMethod("getId",function(){return this.id}),dynamicTree.Tree.addMethod("_getElement",function(){return this._element||(this._element=$(this.id)),this._element}),dynamicTree.Tree.addMethod("_createFromTemplate",function(){this._getElement()&&(this._getElement().insert({after:this._getTemplateElement(this._getElement())}),this._getElement().remove(),this._element=null,this._getElement().update())}),dynamicTree.Tree.addMethod("_registerCustomScroll",function(){if(!this.scroll&&this._getElement()){var e=this._getElement().up(layoutModule.SWIPE_SCROLL_PATTERN);if(e){var t=layoutModule.scrolls.get(e.identify());t&&(this.scroll=t)}}}),dynamicTree.Tree.addMethod("setRootNode",function(e){this.rootNode=e,this.rootNode&&(this.rootNode.treeId=this.id)}),dynamicTree.Tree.addMethod("getRootNode",function(){return this.rootNode}),dynamicTree.Tree.addMethod("refreshStyle",function(){var e=this._getElement();e.templateClassName&&(e.className=e.templateClassName),this.treeClassName&&e.addClassName(this.treeClassName),this.bShowRoot?e.removeClassName(this.HIDE_ROOT_CLASS_NAME):e.addClassName(this.HIDE_ROOT_CLASS_NAME)}),dynamicTree.Tree.addMethod("resetSelected",function(){this._prevSelectedNodes=this.selectedNodes.clone(),this.selectedNodes=[]}),dynamicTree.Tree.addMethod("revertSelection",function(e){var t=this._prevSelectedNodes.clone();t=t.concat(this.selectedNodes),this.selectedNodes=this._prevSelectedNodes.clone();for(var i=0;i<t.length;i++)t[i].refreshStyle()}),dynamicTree.Tree.addMethod("getSelectedNode",function(){return 0===this.selectedNodes.length?null:this.selectedNodes[0]}),dynamicTree.Tree.addMethod("addNodeToSelected",function(e){this.selectedNodes.push(e),this._prevSelectedNodes=this.selectedNodes.clone()}),dynamicTree.Tree.addMethod("removeNodeFromSelected",function(e){for(var t=0;t<this.selectedNodes.length;t++)if(this.selectedNodes[t]==e)return this._prevSelectedNodes=this.selectedNodes.clone(),void this.selectedNodes.splice(t,1)}),dynamicTree.Tree.addMethod("isNodeSelected",function(e){var t=this.selectedNodes&&this.selectedNodes.length;if(t)for(var i=0;i<t;i++)if(this.selectedNodes[i]==e)return!0;return!1}),dynamicTree.Tree.addMethod("resortSubtree",function(e){if(e){e.resortChilds();for(var t=0;t<e.childs.length;t++)this.resortSubtree(e.childs[t])}}),dynamicTree.Tree.addMethod("resortTree",function(){this.sortNodes&&this.resortSubtree(this.rootNode)}),dynamicTree.Tree.addMethod("readStates",function(){var e=dynamicTree.getStorageVal("tree"+this.id);if(e)for(var t in e)this.stateObject[t]=e[t]}),dynamicTree.Tree.addMethod("getState",function(e){var t,i=this.stateObject;return i[e]?(t=i[e],null!==t&&""!==t||(t=dynamicTree.TreeNode.State.CLOSED),t):dynamicTree.TreeNode.State.CLOSED}),dynamicTree.Tree.addMethod("writeStates",function(e,t){var i={},n=this.stateObject;for(var a in n)i[a]=n[a];n[e]=t,null!=t&&(i[e]=t),dynamicTree.setStorageVal("tree"+this.id,i)}),dynamicTree.Tree.addMethod("resetStates",function(){this.stateObject={},dynamicTree.setStorageVal("tree"+this.id,"")}),dynamicTree.Tree.addMethod("comparer",function(e,t){var i,n;if(this.sorters&&this.sorters.length)for(i=0;i<this.sorters.length;i++)if(0!==(n=this.sorters[i](e,t)))return n;return 0}),dynamicTree.Tree.addMethod("renderTree",function(){this.readStates(),this.stopWaiting(),this.refreshStyle();var e=this._getElement();this.rootNode&&(this.writeStates(this.rootNode.id,dynamicTree.TreeNode.State.OPEN),this.rootNode.showNode(),this.rootNode.render(e),this.refreshScroll())}),dynamicTree.Tree.addMethod("refreshScroll",function(e){e?setTimeout(function(){this.scroll&&this.scroll.refresh()}.bind(this),e):this.scroll&&this.scroll.refresh()}),dynamicTree.Tree.addMethod("binarySearchOfNode",function(e,t){for(var i=0,n=e.length-1;i<=n;){var a=Math.round((i+n)/2),s=e[a];if(this.comparer(s,t)<0)i=a+1;else{if(!(this.comparer(s,t)>0))return a;n=a-1}}return-(i+1)}),dynamicTree.Tree.addMethod("_deselectAllNodes",function(e){if(this.selectedNodes.length>0){var t=this.selectedNodes.clone();this.resetSelected();for(var i=0;i<t.length;i++)t[i].refreshStyle();if(e){dynamicTree.trees[this.id].fireUnSelectAllEvent(e)}}}),dynamicTree.Tree.addMethod("_selectOrEditNode",function(e,t,i,n,a,s){var r,o,l,c=t.isSelected()&&a,d=this.multiSelectEnabled&&t.isSelected()&&i&&!c,u=t.isSelected()&&dynamicTree.treeNodeEdited!==t&&!this.multiSelectEnabled&&!i&&!c,h=null!=dynamicTree.treeNodeEdited&&(f||d),p=this.multiSelectEnabled&&!t.isSelected()&&n&&isNotNullORUndefined(this._lastSelectedNode)&&this._lastSelectedNode.parent===t.parent,m=this.multiSelectEnabled&&t.isSelected()&&n&&isNotNullORUndefined(this._lastSelectedNode)&&this._lastSelectedNode.parent===t.parent,f=!this.multiSelectEnabled&&!t.isSelected()||this.multiSelectEnabled&&!i&&!t.isSelected(),g=!t.isSelected()||f&&this.selectedNodes.length>1;if(n&&this._lastSelectedNode||(this._lastSelectedNode=t),d&&t.deselect(e),f&&this._deselectAllNodes(e),u)return void t.edit(e);if(h&&dynamicTree.treeNodeEdited.doEndEdit(e),p||m){l=t.parent;var v=l.childs.indexOf(this._lastSelectedNode),b=l.childs.indexOf(t);r=Math.min(v,b),o=Math.max(v,b)}if(p)if(r>-1)for(var S=r;S<=o;S++)l.childs[S].select(e);else l.childs[o].select(e);else if(m){for(var S=0;S<r;S++)l.childs[S].deselect(e);for(var S=o+1;S<l.childs.length;S++)l.childs[S].deselect(e)}else g&&t.select(e,t.nofocus,s)}),dynamicTree.Tree.addMethod("_deselectOthers",function(e,t,i,n,a){this.multiSelectEnabled&&this.selectedNodes.length>1&&t.isSelected()&&!(i||n||a)&&this.selectedNodes.findAll(function(e){return e!=t}.bind(this)).invoke("deselect",e)}),dynamicTree.Tree.addMethod("_selectNextNode",function(e,t){function i(e){return e=e.parent,e?e.nextSibling?e.nextSibling:i(e):null}var n=e.isOpen()&&e.getFirstChild()||e.nextSibling||i(e);n&&e.deselect()&&n.select(t)}),dynamicTree.Tree.addMethod("_selectPreviousNode",function(e,t){function i(e){return!(e.isOpen()&&e.hasChilds())&&e||i(e.getLastChild())}var n=e.prevSibling&&i(e.prevSibling)||e.parent;n&&e.deselect()&&n.select(t)}),dynamicTree.Tree.addMethod("_selectInwards",function(e,t){var i=e.isOpen()&&e.getFirstChild();i?e.deselect()&&i.select(t):e.handleNode(t)}),dynamicTree.Tree.addMethod("_selectOutwards",function(e,t){if(!e.isHiddenRootNode()){var i=e.isOpen()?null:e.parent;i?e.deselect()&&i.select(t):e.handleNode(t)}}),dynamicTree.Tree.addMethod("sortByOrder",function(e,t){var i=e.orderNumber,n=t.orderNumber;return null==i&&null==n?0:null==i?1:null==n?-1:i-n}),dynamicTree.Tree.addMethod("sortByName",function(e,t){var i=e.name.toLowerCase(),n=t.name.toLowerCase();return i>n?1:i<n?-1:0}),dynamicTree.Tree.addVar("TREE_WAIT_TEMPLATE_DOM_ID","list_responsive_collapsible:loading"),dynamicTree.Tree.addMethod("wait",function(){$(this.id).update($(this.TREE_WAIT_TEMPLATE_DOM_ID).cloneNode(!0))}),dynamicTree.Tree.addMethod("stopWaiting",function(){$(this.id).update("")}),dynamicTree.Tree.addMethod("_getTemplateElement",function(e){var t=this.templateDomId,i=$(t).cloneNode(!0);return i.writeAttribute("id",this.getId()),i.templateId=t,i.templateClassName=i.className,cloneCustomAttributes(e,i),i}),define("dynamicTree.tree",["prototype","dragdrop.extra","touchcontroller","utils.common","core.layout"],function(e){return function(){return e.dynamicTree}}(this)),dynamicTree.TreeNode=function(e){this.id=dynamicTree.getNextId(),this.treeId=null,this.name=null!=e.name?e.name:this.DEFAULT_NAME,this.param=null!=e.param?e.param:{},this.orderNumber=null!=e.orderNumber?e.orderNumber:null,this.childs=[],this.parent=null,this.Types={Folder:new dynamicTree.TreeNode.Type(this.FOLDER_TYPE_NAME)},this.isloaded=!1,this.delayedRendering=!0,this.haschilds=!1,this.editable=!1,this.isWaiting=!1,this.hidden=!1,this.isDropTarget=!1,dynamicTree.nodes[this.id]=this},dynamicTree.TreeNode.Type=function(e,t){this.name=e,t&&(this.cssClassName=t.cssClassName,this.templateDomId=t.templateDomId)},dynamicTree.TreeNode.State={OPEN:"open",CLOSED:"closed"},dynamicTree.TreeNode.addVar("FOLDER_TYPE_NAME","com.jaspersoft.jasperserver.api.metadata.common.domain.Folder"),dynamicTree.TreeNode.addVar("DEFAULT_NAME","unset name"),dynamicTree.TreeNode.addVar("NODE_ID_PREFIX","node"),dynamicTree.TreeNode.addVar("SUB_NODE_ID_SUFFIX","sub"),dynamicTree.TreeNode.addVar("HANDLER_ID_PREFIX","handler"),dynamicTree.TreeNode.addVar("NODE_CLASS_NAME","node").addVar("LEAF_CLASS_NAME","leaf").addVar("OPEN_CLASS_NAME","open").addVar("CLOSED_CLASS_NAME","closed").addVar("SELECTED_CLASS_NAME","selected").addVar("LOADING_CLASS_NAME","loading").addVar("ROOTS_CLASS_NAME","roots"),dynamicTree.TreeNode.addVar("nodeHeaderTemplateDomId","list_responsive_collapsible:leaf"),dynamicTree.TreeNode.addVar("nodeFooterTemplateDomId","list_responsive_collapsible"),dynamicTree.TreeNode.addVar("nodeInputTemplateDomId","list_responsive_collapsible:input"),dynamicTree.TreeNode.addVar("isSelectable",!1),dynamicTree.TreeNode.addMethod("getTreeId",function(){return this.treeId||this.parent&&this.parent.getTreeId()}),dynamicTree.TreeNode.addMethod("getState",function(){return dynamicTree.trees[this.getTreeId()].getState(this.id)}),dynamicTree.TreeNode.addMethod("isParent",function(){return this.param.type==this.Types.Folder.name}),dynamicTree.TreeNode.addMethod("addChild",function(e){if(this.isParent()){var t=this.childs[this.childs.length-1];t&&(t.nextSibling=e,e.prevSibling=t),this.childs.push(e),e.parent=this,this.resortChilds(),this.delayedRendering||(e.showNode(),e.render(this._getChildrenElement(),e.nextSibling))}}),dynamicTree.TreeNode.addMethod("removeChild",function(e){for(var t=0;t<this.childs.length;t++)if(this.childs[t]==e){this.childs.splice(t,1);break}if(e.deselect(),!this.delayedRendering){var i=e._getElement();i&&i.remove()}}),dynamicTree.TreeNode.addMethod("resortChilds",function(){var e=this.getTreeId(),t=dynamicTree.trees[e];if(t&&t.sortNodes&&isArray(this.childs)){this.childs.sort(function(e,i){return t.comparer(e,i)});for(var i=this.childs.length;i--;){var n=this.childs[i];n.prevSibling=this.childs[i-1],n.nextSibling=this.childs[i+1]}}}),dynamicTree.TreeNode.addMethod("resetChilds",function(){this.childs=[]}),dynamicTree.TreeNode.addMethod("setHasChilds",function(e){this.haschilds=e}),dynamicTree.TreeNode.addMethod("hasChilds",function(){return!!this.haschilds||this.getChildCount()>0}),dynamicTree.TreeNode.addMethod("getChildCount",function(){return this.childs.length}),dynamicTree.TreeNode.addMethod("getFirstChild",function(){return this.hasChilds()?this.childs[0]:null}),dynamicTree.TreeNode.addMethod("getLastChild",function(){return this.hasChilds()?this.childs[this.childs.length-1]:null}),dynamicTree.TreeNode.addMethod("_getElement",function(e){return this._element||(this._element=$(this.NODE_ID_PREFIX+this.id)),this._element}),dynamicTree.TreeNode.addMethod("_getTitle",function(){var e=this._getElement().childElements()[0];e.cleanWhitespace();var t=e.childNodes[e.childNodes.length-1];return"#text"!==t.nodeName&&(t=document.createTextNode(""),e.appendChild(t)),t}),dynamicTree.TreeNode.addMethod("_getTitleInputElement",function(){return $(this._getElement().getElementsByTagName("input")[0])}),dynamicTree.TreeNode.addMethod("_getChildrenElement",function(){return this._childrenElement||(this._childrenElement=$(this.NODE_ID_PREFIX+this.id+this.SUB_NODE_ID_SUFFIX)),this._childrenElement}),dynamicTree.TreeNode.addMethod("isOpen",function(){return this.getState()===dynamicTree.TreeNode.State.OPEN}),dynamicTree.TreeNode.addMethod("changeName",function(e){this.name=e,this._getTitle().data=this.name}),dynamicTree.TreeNode.addMethod("getType",function(){for(var e in this.Types)if(this.param.type===this.Types[e].name)return this.Types[e]}),dynamicTree.TreeNode.addMethod("refreshStyle",function(e){if(e=$(e)||this._getElement()){e.templateClassName&&(e.className=e.templateClassName),this.isParent()?(e.addClassName(this.NODE_CLASS_NAME).removeClassName(this.LEAF_CLASS_NAME),this.isWaiting||(this.isOpen()?e.addClassName(this.OPEN_CLASS_NAME).removeClassName(this.CLOSED_CLASS_NAME):e.addClassName(this.CLOSED_CLASS_NAME).removeClassName(this.OPEN_CLASS_NAME))):e.addClassName(this.LEAF_CLASS_NAME).removeClassName(this.NODE_CLASS_NAME),this.isWaiting?e.addClassName(this.LOADING_CLASS_NAME):e.removeClassName(this.LOADING_CLASS_NAME),this.isSelected()?e.addClassName(this.SELECTED_CLASS_NAME):e.removeClassName(this.SELECTED_CLASS_NAME),this.hidden?e.addClassName(layoutModule.HIDDEN_CLASS):e.removeClassName(layoutModule.HIDDEN_CLASS),this.param.cssClass&&e.addClassName(this.param.cssClass);var t=this.getType();t&&t.cssClassName&&e.addClassName(t.cssClassName);var i=e.down();this.isDropTarget&&i&&i.addClassName(layoutModule.DROP_TARGET_CLASS),!this.isDropTarget&&i&&i.removeClassName(layoutModule.DROP_TARGET_CLASS)}}),dynamicTree.TreeNode.addMethod("_createNode",function(){var e=this.id,t=dynamicTree.trees[this.getTreeId()],i=this._getHeaderTemplateElement();i.id=this.NODE_ID_PREFIX+e,i.tabIndex=-1,this.refreshStyle(i),this.treeId=t.id,i.treeNode=this;var n=i.childElements()[0];n.insert(xssUtil.softHtmlEscape(this.name,{whiteList:["a"]})),null!=this.tooltip&&this.tooltip.length>0&&(n.title=this.tooltip),n.childElements().each(function(t,i){0===i&&(t.id=this.HANDLER_ID_PREFIX+e);var n=this.iconTooltip;n&&(t.title=isArray(n)?n[i]:n)}.bind(this)),this._element=i}),dynamicTree.TreeNode.addMethod("_createNodeChildren",function(){var e=this._getFooterTemplateElement();e.id=this.NODE_ID_PREFIX+this.id+this.SUB_NODE_ID_SUFFIX,this._childrenElement=e}),dynamicTree.TreeNode.addMethod("showNode",function(e){var t=dynamicTree.trees[this.getTreeId()];if(this._createNode(),this.isParent()){if(this.isOpen()||t.showAllNodesOnStartup){this._createNodeChildren();for(var i=0;i<this.getChildCount();i++)this.childs[i].showNode(this._getChildrenElement());this.delayedRendering=!1,t.fireOpenEvent(this)}}this.render(e)}),dynamicTree.TreeNode.addMethod("render",function(e,t){if(!Object.isUndefined(e)){var i=$(e);i&&(this._getChildrenElement()&&this._getElement().insert(this._getChildrenElement()),t?i.insert(this._getElement(),{before:t._getElement()}):i.insert(this._getElement()))}}),dynamicTree.TreeNode.addMethod("_renderChildren",function(){var e=this._getElement();e&&this._getChildrenElement()&&e.insert(this._getChildrenElement())}),dynamicTree.TreeNode.addMethod("refreshNode",function(){if(this.refreshStyle(),this.isParent()&&this.isOpen()&&this.isloaded){this.delayedRendering?(this._createNodeChildren(),this._renderChildren()):this._getChildrenElement().update("");for(var e=0;e<this.getChildCount();e++)this.childs[e].showNode(this._getChildrenElement());this.delayedRendering=!1}dynamicTree.trees[this.getTreeId()].refreshScroll()}),dynamicTree.TreeNode.addMethod("wait",function(){this.isWaiting=!0,this.refreshStyle()}),dynamicTree.TreeNode.addMethod("stopWaiting",function(){this.isWaiting=!1,this.refreshStyle()}),dynamicTree.TreeNode.addMethod("isHiddenRootNode",function(){var e=dynamicTree.trees[this.getTreeId()];return e.rootNode==this&&!e.bShowRoot}),dynamicTree.TreeNode.addMethod("deselect",function(e){var t=dynamicTree.trees[this.getTreeId()];return!(!t||!this.isSelected())&&(t.removeNodeFromSelected(this),this.refreshStyle(),e&&t.fireUnSelectEvent(this,e),!0)}),dynamicTree.TreeNode.addMethod("select",function(e,t,i){if(i=i||{},!t&&this.focus(),this.isSelected())return!1;var n=dynamicTree.trees[this.getTreeId()];return n.addNodeToSelected(this),this.refreshStyle(),!i.silent&&n.fireSelectEvent(this,e),!0}),dynamicTree.TreeNode.addMethod("focus",function(){var e=this;!isIPad()&&this._getElement()&&setTimeout(function(){e._getElement().focus()},100)}),dynamicTree.TreeNode.addMethod("isSelected",function(){var e=dynamicTree.trees[this.getTreeId()];return e&&e.isNodeSelected(this)}),dynamicTree.TreeNode.addMethod("_removeTitle",function(){var e=this._getTitle();e.data="",$(e.parentNode).cleanWhitespace()}),dynamicTree.TreeNode.addMethod("edit",function(e){if(this.editable){if(dynamicTree.treeNodeEdited==this)return;dynamicTree.treeNodeEdited=this;var t=this.name,i=$(this._getTitle().parentNode),n=this._getInputTemplateElement();this._getTitle().data="",i.cleanWhitespace(),i.insert(n),n.value=xssUtil.unescape(this.name),n.focus(),n.select(e),n.onclick=function(e){cancelEventBubbling(e)},n.ondblclick=function(e){cancelEventBubbling(e)},n.onmousedown=function(e){cancelEventBubbling(e)},n.onmouseup=function(e){cancelEventBubbling(e)},n.onkeydown=function(e){var i=window.event?window.event:e;13==i.keyCode?(n.onblur=null,this.doEndEdit(i)):27==i.keyCode&&(n.onblur=null,n.value=t,this.doEndEdit(i))}.bindAsEventListener(this),n.onblur=function(e){this.doEndEdit(e)}.bindAsEventListener(this),dynamicTree.trees[this.getTreeId()].fireStartEditEvent(this,n)}}),dynamicTree.TreeNode.addMethod("doEndEdit",function(e){this.editEnded(),dynamicTree.trees[this.getTreeId()].fireEndEditEvent(this)}),dynamicTree.TreeNode.addMethod("editEnded",function(){var e=dynamicTree.trees[this.getTreeId()];if(null!=dynamicTree.treeNodeEdited){var t=this._getTitleInputElement(),i=($(t.parentNode),t.value);if(i==dynamicTree.treeNodeEdited.name)return t.remove(),this._getTitle().data=dynamicTree.treeNodeEdited.name,void(dynamicTree.treeNodeEdited=null);e.fireEditEvent(dynamicTree.treeNodeEdited,i),dynamicTree.editaborted||(dynamicTree.treeNodeEdited.name=i,t.remove(),this._getTitle().data=i),dynamicTree.treeNodeEdited=null}}),dynamicTree.TreeNode.addMethod("scroll",function(e){var t=dynamicTree.trees[this.getTreeId()].rootNode._getElement(),i=e?$(e):$(t.parentNode),n=this._getElement();if(i){var a=i.clientHeight,s=i.clientWidth,r=i.scrollTop,o=i.scrollLeft,l=n.cumulativeOffset().top-i.cumulativeOffset().top,c=n.offsetLeft,d=n.clientHeight,u=n.clientWidth;l>r+a?i.scrollTop=l-(a/2-d/2):l+d<r&&(i.scrollTop=l-(a/2-d/2)),c>o+s?i.scrollLeft=c-(s/2-u/2):c+u<o&&(i.scrollTop=c-(s/2-u/2))}}),dynamicTree.TreeNode.addMethod("handleNode",function(e){if(this.isParent()){var t=dynamicTree.trees[this.getTreeId()];this.isOpen()?t.writeStates(this.id,dynamicTree.TreeNode.State.CLOSED):(t.writeStates(this.id,dynamicTree.TreeNode.State.OPEN),t.fireOpenEvent(this,e)),this.refreshNode()}}),dynamicTree.TreeNode.addMethod("openNode",function(e){if(this.isParent()){var t=dynamicTree.trees[this.getTreeId()];this.isOpen()||(t.writeStates(this.id,dynamicTree.TreeNode.State.OPEN),t.fireOpenEvent(this,e)),this.refreshNode()}}),dynamicTree.TreeNode.addMethod("_getHeaderTemplateElement",function(){var e=this.getType(),t=e&&e.templateDomId?e.templateDomId:this.nodeHeaderTemplateDomId,i=$(t).cloneNode(!0);return i.templateId=t,i.templateClassName=i.className,i}),dynamicTree.TreeNode.addMethod("_getFooterTemplateElement",function(){var e=this.nodeFooterTemplateDomId,t=$(e).cloneNode(!0);return t.templateId=e,t.update(""),t}),dynamicTree.TreeNode.addMethod("_getInputTemplateElement",function(){var e=this.nodeInputTemplateDomId,t=$(e).cloneNode(!0);return t.templateId=e,t}),define("dynamicTree.treenode",["prototype","underscore","dynamicTree.tree"],function(e){return function(){return e.dynamicTree}}(this)),dynamicTree.Tree.addVar("NODE_PATTERN",".node").addVar("NODE_WRAPPER_PATTERN",".node > .wrap").addVar("NODE_ICON_PATTERN",".node > .wrap .icon").addVar("NODE_CUSTOM_PATTERNS",[]),dynamicTree.Tree.addVar("LEAF_PATTERN",".leaf").addVar("LEAF_WRAPPER_PATTERN",".leaf > .wrap").addVar("LEAF_ICON_PATTERN",".leaf > .wrap .icon").addVar("LEAF_CUSTOM_PATTERNS",[]),dynamicTree.Tree.addVar("EXPANDING_TIME",1e3),dynamicTree.Tree.addVar("draggables",[]),dynamicTree.Tree.addMethod("getTreeNodeByEvent",function(e){var t=Event.element(e);return this.getTreeNodeByElement(t)}),dynamicTree.Tree.addMethod("getTreeNodeByElement",function(e){for(;e&&e.readAttribute&&e.readAttribute("id")!==this.id;){var t=e.treeNode;if(t&&t.getTreeId()===this.getId())return t;e=$(e.parentNode)}return null}),dynamicTree.Tree.addMethod("isNodeEvent",function(e){var t=matchMeOrUp(e.element().parentNode,"LI");return t&&t.hasClassName(layoutModule.NODE_CLASS)}),dynamicTree.Tree.addMethod("isLeafEvent",function(e){var t=matchMeOrUp(e.element().parentNode,"LI");return t&&t.hasClassName(layoutModule.LEAF_CLASS)}),dynamicTree.Tree.addMethod("isIconEvent",function(e){return e.element().hasClassName(layoutModule.ICON_CLASS)}),dynamicTree.Tree.addMethod("_registerEvents",function(){this._cleanUpListeners(),this._registerClickEvents(),this._registerCustomEvents(),this._registerKeyEvents(),this._registerMouseEvents()}),dynamicTree.Tree.addMethod("_cleanUpListeners",function(){var e=this._getElement();e.stopObserving("click"),e.stopObserving("dblclick"),isSupportsTouch()?(e.stopObserving("touchstart"),e.stopObserving("drag:touchstart"),e.stopObserving("touchend")):(e.stopObserving("mousedown"),e.stopObserving("drag:mousedown"),e.stopObserving("mouseup")),e.stopObserving("mouseover"),e.stopObserving("mouseout")}),dynamicTree.Tree.addMethod("_registerClickEvents",function(){var e=this._getElement();e.observe("click",function(t){var i=matchMeOrUp(t.element(),layoutModule.BUTTON_PATTERN)&&this.getTreeNodeByEvent(t);if(i){var n=this.isIconEvent(t),a=this.isNodeEvent(t),s=this.isLeafEvent(t);a?(n&&e.fire("nodeIcon:click",{targetEvent:t,node:i}),e.fire("node:click",{targetEvent:t,node:i})):s&&(n&&e.fire("nodeIcon:click",{targetEvent:t,node:i}),e.fire("leaf:click",{targetEvent:t,node:i})),!isIPad()&&a&&n&&i.handleNode(t)}}.bindAsEventListener(this)),e.observe("dblclick",function(t){var i=matchMeOrUp(t.element(),layoutModule.BUTTON_PATTERN)&&this.getTreeNodeByEvent(t);if(i){var n=this.isIconEvent(t),a=this.isNodeEvent(t),s=this.isLeafEvent(t);a?(n&&e.fire("nodeIcon:dblclick",{targetEvent:t,node:i}),e.fire("node:dblclick",{targetEvent:t,node:i})):s&&(n&&e.fire("leafIcon:dblclick",{targetEvent:t,node:i}),e.fire("leaf:dblclick",{targetEvent:t,node:i})),this.handleNodeOnDblclick&&(a||s)&&!n&&i.handleNode(t)}}.bindAsEventListener(this))}),dynamicTree.Tree.addMethod("_registerMouseEvents",function(){var e=this._getElement();e.observe(isSupportsTouch()?"touchstart":"mousedown",function(t){var i=t.element(),n=matchMeOrUp(i,layoutModule.BUTTON_PATTERN)&&this.getTreeNodeByEvent(t);if(n){t.treeEvent=!0;var a=this.isIconEvent(t),s=this.isNodeEvent(t),r=this.isLeafEvent(t);if(isSupportsTouch())if(JRS.vars.ajax_in_progress)alert("please wait");else if(this.twofingers=!1,2==t.touches.length&&(this.twofingers=!0,this._selectOrEditNode(t,n,isMetaHeld(t),isShiftHeld(t),isRightClick(t)),n.isSelected()||designerBase&&designerBase.isInSelection(n))){var o=jQuery(i).parents("li:first");return void(o.hasClass("selected")&&document.fire(layoutModule.ELEMENT_CONTEXTMENU,{targetEvent:t,node:i}))}isSupportsTouch()&&JRS.vars.ajax_in_progress||(!this.selectOnMousedown||isSupportsTouch()&&1!=t.touches.length||this._selectOrEditNode(t,n,isMetaHeld(t),isShiftHeld(t),isRightClick(t)),s?(a&&e.fire("nodeIcon:mousedown",{targetEvent:t,node:n}),e.fire("node:mousedown",{targetEvent:t,node:n})):r&&(a&&e.fire("leafIcon:mousedown",{targetEvent:t,node:n}),e.fire("leaf:mousedown",{targetEvent:t,node:n})))}}.bindAsEventListener(this)),e.observe(isSupportsTouch()?"drag:touchstart":"drag:mousedown",function(t){var i=t.memo.targetEvent,n=matchMeOrUp(i.element(),layoutModule.BUTTON_PATTERN)&&this.getTreeNodeByEvent(i);if(n){i.treeEvent=!0;var a=this.isIconEvent(i),s=this.isNodeEvent(i),r=this.isLeafEvent(i);this.selectOnMousedown&&!isRightClick(i)&&this._selectOrEditNode(i,n,isMetaHeld(i),isShiftHeld(i),isRightClick(i)),s?(a&&e.fire("nodeIcon.drag:mousedown",{targetEvent:i,node:n}),e.fire("node.drag:mousedown",{targetEvent:i,node:n})):r&&(a&&e.fire("leafIcon.drag:mousedown",{targetEvent:i,node:n}),e.fire("leaf.drag:mousedown",{targetEvent:i,node:n}))}}.bindAsEventListener(this)),e.observe(isSupportsTouch()?"touchend":"mouseup",function(t){
var i=matchMeOrUp(t.element(),layoutModule.BUTTON_PATTERN)&&this.getTreeNodeByEvent(t);if(i){t.treeEvent=!0;var n=this.isIconEvent(t),a=this.isNodeEvent(t),s=this.isLeafEvent(t);if(this.twofingers&&(t.isEmulatedRightClick=!0),isSupportsTouch()&&!this.twofingers&&(this.clickid==i.id&&!JRS.vars.ajax_in_progress&&t.timeStamp-this.clicktime<700&&(a?(n&&e.fire("nodeIcon:dblclick",{targetEvent:t,node:i}),e.fire("node:dblclick",{targetEvent:t,node:i})):s&&(n&&e.fire("leafIcon:dblclick",{targetEvent:t,node:i}),e.fire("leaf:dblclick",{targetEvent:t,node:i})),this.handleNodeOnDblclick&&(a||s)&&!n&&i.handleNode(t)),this.clicktime=t.timeStamp,this.clickid=i.id),!isSupportsTouch()||!JRS.vars.ajax_in_progress){this.selectOnMousedown||TouchController.element_scrolled||isSupportsTouch()&&1!=t.changedTouches.length||this._selectOrEditNode(t,i,isMetaHeld(t),isShiftHeld(t),isRightClick(t)),this._deselectOthers(t,i,isMetaHeld(t),isShiftHeld(t),isRightClick(t));a?(n&&e.fire("nodeIcon:mouseup",{targetEvent:t,node:i}),e.fire("node:mouseup",{targetEvent:t,node:i})):s&&(n&&e.fire("leafIcon:mouseup",{targetEvent:t,node:i}),e.fire("leaf:mouseup",{targetEvent:t,node:i})),isSupportsTouch()&&a&&n&&!TouchController.element_scrolled&&i.handleNode(t)}}}.bindAsEventListener(this)),"createTouch"in document||(e.observe("mouseover",function(t){var i=t.element(),n=matchMeOrUp(i,layoutModule.BUTTON_PATTERN)&&this.getTreeNodeByEvent(t);n&&(Draggables.dragging&&(clearTimeout(this.timeout_id),this.timeout_id=setTimeout(function(e){n.openNode(e)},this.EXPANDING_TIME)),this.createDraggableIfNeeded(t,n),!isIE7()&&e.fire("tree:mouseover",{targetEvent:t,node:n}))}.bindAsEventListener(this)),isIE7()||e.observe("mouseout",function(t){var i=matchMeOrUp(t.element(),layoutModule.BUTTON_PATTERN)&&this.getTreeNodeByEvent(t);i&&e.fire("tree:mouseout",{targetEvent:t,node:i})}.bindAsEventListener(this))),Droppables.add(e,{accept:this.dropClasses,onDrop:function(e){this.elementDropped=e}.bind(this)})}),dynamicTree.Tree.addMethod("_registerKeyEvents",function(){var e=this._getElement();e.observe("key:down",function(e){var t=this.getTreeNodeByEvent(e);dynamicTree.treeNodeEdited!==t&&t&&this._selectNextNode(t,e.memo.targetEvent)}.bindAsEventListener(this)),e.observe("key:up",function(e){var t=this.getTreeNodeByEvent(e);dynamicTree.treeNodeEdited!==t&&t&&this._selectPreviousNode(t,e.memo.targetEvent)}.bindAsEventListener(this)),e.observe("key:right",function(e){var t=this.getTreeNodeByEvent(e);dynamicTree.treeNodeEdited!==t&&t&&this._selectInwards(t,e.memo.targetEvent)}.bindAsEventListener(this)),e.observe("key:left",function(e){var t=this.getTreeNodeByEvent(e);dynamicTree.treeNodeEdited!==t&&t&&this._selectOutwards(t,e.memo.targetEvent)}.bindAsEventListener(this))}),dynamicTree.Tree.addMethod("_registerCustomEvents",function(){var e=this._getElement();e.observe("mousedown",function(t){dynamicTree.activeTreeId&&dynamicTree.activeTreeId===this.getId()||(e.fire("tree:blur",{targetEvent:t,tree:dynamicTree.getActiveTree()}),dynamicTree.activeTreeId=this.getId(),e.fire("tree:focus",{targetEvent:t,tree:dynamicTree.getActiveTree()}))}.bindAsEventListener(this)),e.observe("mouseover",function(t){this.getTreeNodeByEvent(t)||e.fire("tree:mouseover",{targetEvent:t,tree:this})}.bindAsEventListener(this)),e.observe("mouseout",function(t){this.getTreeNodeByEvent(t)||e.fire("tree:mouseout",{targetEvent:t,tree:this})}.bindAsEventListener(this))}),dynamicTree.Tree.addMethod("fireOpenEvent",function(e,t){this._getElement().fire("node:open",{node:e,targetEvent:t})}),dynamicTree.Tree.addMethod("fireSelectEvent",function(e,t){this._getElement().fire(e.isParent()?"node:selected":"leaf:selected",{node:e,targetEvent:t})}),dynamicTree.Tree.addMethod("fireUnSelectEvent",function(e,t){this._getElement().fire(e.isParent()?"node:unselected":"leaf:unselected",{node:e,targetEvent:t})}),dynamicTree.Tree.addMethod("fireUnSelectAllEvent",function(e){this._getElement().fire("items:unselected",{targetEvent:e})}),dynamicTree.Tree.addMethod("fireEditEvent",function(e,t){this._getElement().fire(e.isParent()?"node:edit":"leaf:edit",{node:e,newValue:t})}),dynamicTree.Tree.addMethod("fireStartEditEvent",function(e,t){this._getElement().fire(e.isParent()?"node:startEdit":"leaf:startEdit",{node:e,input:t})}),dynamicTree.Tree.addMethod("fireEndEditEvent",function(e){this._getElement().fire(e.isParent()?"node:endEdit":"leaf:endEdit",{node:e})}),dynamicTree.Tree.addMethod("observe",function(e,t){this._getElement().observe(e,t)}),dynamicTree.Tree.addMethod("stopObserving",function(e,t){this._getElement().stopObserving(e,t)}),dynamicTree.Tree.addMethod("createDraggableIfNeeded",function(e,t){var i=e?e.element():t._getElement().down(this.dragPattern),n=this.draggables[i.identify()];if(this.dragPattern&&!n){var a=matchAny(i,[this.dragPattern],!0);if(a&&i.className.toLowerCase().indexOf("icon")<0&&!this.draggables[a.identify()])return this.draggables[a.identify()]=new Draggable(i,{superghosting:!0,mouseOffset:!0,delay:isIE()||isSupportsTouch()?200:0,onStart:this.setDragStartState.bind(this,t),onEnd:this.setDragEndState.bind(this,t)}),this.draggables[a.identify()]}return null}),dynamicTree.Tree.addMethod("setDragStartState",function(e,t,i){var n=e._getElement().templateClassName;n&&t.element.addClassName(n),t.element.setStyle({width:null,height:null}),t.element.addClassName(layoutModule.DRAGGING_CLASS).addClassName(this.getId()),this.dragClasses&&t.element.addClassName(this.dragClasses),this.selectedNodes.length>1&&t.element.update(new Template(this.TREE_NN_ITEMS_SELECTED).evaluate({count:this.selectedNodes.length})),t.element.node=e,t.element.nodes=this.selectedNodes,t.options.scroll=this._getElement(),t.options.scrollSensitivity=layoutModule.SCROLL_SENSITIVITY,Draggables.dragging=this.regionID||!0}),dynamicTree.Tree.addMethod("setDragEndState",function(e,t,i){delete Draggables.dragging}),define("dynamicTree.events",["prototype","dynamicTree.tree"],function(e){return function(){return e.dynamicTree}}(this)),dynamicTree.TreeSupport=function(e,t){if(dynamicTree.Tree.call(this,e,t),this.providerId=t.providerId,this.hideLoader=t.hideLoader,this.rootUri=Object.isUndefined(t.rootUri)?"/":t.rootUri,this.nodeClass=t.nodeClass&&Object.isFunction(t.nodeClass)?t.nodeClass:dynamicTree.TreeNode,t.rootObjectModifier&&(this.modifyRootObject=t.rootObjectModifier),this.resetStatesOnShow=Object.isUndefined(t.resetStatesOnShow)||t.resetStatesOnShow,this.inInit=!0,this.ajaxBufferId="ajaxbuffer",this.nodeTextId="treeNodeText",this.urlGetNode=t.urlGetNode?t.urlGetNode:this._getFlowUrl("getNode"),this.urlGetChildren=t.urlGetChildren?t.urlGetChildren:this._getFlowUrl("getChildren"),this.urlGetMultipleChildren=t.urlGetMultipleChildren?t.urlGetMultipleChildren:this._getFlowUrl("getMultipleChildren"),this.urlGetMessage=t.urlGetMessage?t.urlGetMessage:this._getFlowUrl("getMessage"),this.additionalParams=t.additionalParams?t.additionalParams:{},null==this.TREE_NN_ITEMS_SELECTED){var i=function(e){this.TREE_NN_ITEMS_SELECTED=e}.bind(this);this.getMessage("TREE_NN_ITEMS_SELECTED",i,null)}this._initOpenListener()},dynamicTree.TreeSupport.prototype=deepClone(dynamicTree.Tree.prototype),dynamicTree.TreeSupport.addMethod("_initOpenListener",function(){this.observe("node:open",function(e){var t=e.memo.node;t&&!t.isloaded&&this.getTreeNodeChildren(t)}.bindAsEventListener(this))}),dynamicTree.TreeSupport.addMethod("stopObserving",function(e,t){this._getElement().stopObserving(e,t),"node:open"!==e||t||this._initOpenListener()}),dynamicTree.TreeSupport.addMethod("_getFlowUrl",function(e){return __jrsConfigs__.contextPath+"/flow.html?_flowId=treeFlow&method="+e}),dynamicTree.TreeSupport.addMethod("showTree",function(e,t,i,n){var a=this.urlGetNode+"&provider="+this.providerId+"&uri="+this.rootUri+"&depth="+e;n&&(a+="&forceHtmlEscape=true"),a+="&"+this._evaluateAdditionalParams(),this._showTree(a,t,i)}),dynamicTree.TreeSupport.addMethod("_evaluateAdditionalParams",function(){var e=this.additionalParams;return _.isFunction(e)&&(e=e.call(null)),_.isObject(e)?Object.toQueryString(e):null}),dynamicTree.TreeSupport.addMethod("showTreePrefetchNodes",function(e,t,i){var n=this.urlGetNode+"&provider="+this.providerId+"&uri="+this.rootUri;e&&(n+="&prefetch="+encodeURIComponent(e)),n+="&"+this._evaluateAdditionalParams(),this._showTree(n,t,i)}),dynamicTree.TreeSupport.addMethod("_showTree",function(e,t,i){var n=this;this.inInit=!0,this.wait();var a=function(e,t,i){return function(){return e.showTreeCallback(t,i)}}(this,t,i),s=function(){var e=!1;return n.httpErrorHandler&&(e=n.httpErrorHandler.apply(window,arguments)),!1===e&&(e=baseErrorHandler.apply(window,arguments)),e};ajaxTargettedUpdate(e,{fillLocation:this.ajaxBufferId,callback:a,errorHandler:s,hideLoader:this.hideLoader})}),dynamicTree.TreeSupport.addMethod("showTreeCallback",function(e,t){var i=document.getElementById(this.nodeTextId);if(null==i)return void(t?t():this.fireServerErrorEvent());var n=xssUtil.unescape(jQuery(i).text()),a=n.evalJSON();this.modifyRootObject&&(a=this.modifyRootObject(a,!1)),i=document.getElementById(this.ajaxBufferId),jQuery(i).html(""),this.setRootNode(this.processNode(a)),this.resortTree(),this.resetStatesOnShow&&this.resetStates(),this.renderTree(),this.inInit=!1,e?e():this.fireTreeLoadedEvent({tree:this})}),dynamicTree.TreeSupport.addMethod("processNode",function(e){var t={};t.id=e.id,t.type=e.type,t.uri=e.uri,t.extra=deepClone(e.extra),e.cssClass&&(t.cssClass=e.cssClass);var i=this.nodeClass,n=new i({name:unescapeBackslash(e.label),param:t,orderNumber:e.order});e.tooltip&&(n.tooltip=e.tooltip);var a=e.children;if(null!=a){var s=a.length;if(0===s)n.setHasChilds(!1);else for(var r=0;r<s;r++){var o=a[r];if(o){var l=this.processNode(o);n.addChild(l)}}n.isloaded=!0}return n}),dynamicTree.TreeSupport.addMethod("getTreeNodeChildren",function(e,t,i){var n=e.param.uri,a=function(e,t,i,n){return function(){return e.getTreeNodeChildrenCallback(t,i,n)}}(this,e.id,t,i),s=function(t){(500==t.status||t.getResponseHeader("JasperServerError"))&&e.stopWaiting(),baseErrorHandler(t)};ajaxTargettedUpdate(this.urlGetChildren+"&provider="+this.providerId+"&uri="+encodeURIComponent(encodeURIComponent(n))+"&"+this._evaluateAdditionalParams(),{fillLocation:this.ajaxBufferId,callback:a,errorHandler:s,hideLoader:this.hideLoader}),this.inInit||e.wait()}),dynamicTree.TreeSupport.addMethod("getTreeNodeChildrenCallback",function(e,t,i){var n=document.getElementById(this.nodeTextId);if(null==n)return void(i?i():this.fireServerErrorEvent());var a=xssUtil.unescape(jQuery(n).text()).evalJSON(),s=dynamicTree.nodes[e];this.modifyRootObject&&(a=this.modifyRootObject(a,!0,s)),n=document.getElementById(this.ajaxBufferId),jQuery(n).html(""),s.resetChilds(),s.stopWaiting();var r=a.length;if(0===r)s.setHasChilds(!1);else{var o=s.getTreeId(),l=o?dynamicTree.trees[o]:null,c=l?l.sortNodes:null;l&&(l.sortNodes=!1);for(var d=0;d<r;d++){var u=this.processNode(a[d]);s.addChild(u)}l&&(l.sortNodes=c,s.resortChilds())}s.isloaded=!0,s.refreshNode(),t?t(s.childs):this.fireChildrenLoadedEvent(s.childs)}),dynamicTree.TreeSupport.addMethod("getTreeMultipleNodesChildren",function(e,t,i){var n,a="",s=[];if(e&&e.length)for(n=0;n<e.length;n++)n>0&&(a+=","),a+=encodeURIComponent(encodeURIComponent(e[n].param.uri)),s[n]=e[n].id;if(a.length){var r=function(e,t,i,n){return function(){return e.getTreeMultipleNodesChildrenCallback(t,i,n)}}(this,s,t,i);if(ajaxTargettedUpdate(this.urlGetMultipleChildren+"&provider="+this.providerId,{fillLocation:this.ajaxBufferId,callback:r,postData:"uris="+a,errorHandler:baseErrorHandler,hideLoader:this.hideLoader}),!this.inInit)for(n=0;n<e.length;n++)e[n].wait()}}),dynamicTree.TreeSupport.addMethod("getTreeMultipleNodesChildrenCallback",function(e,t,i){var n=document.getElementById(this.nodeTextId);if(null==n)return void(i?i():this.fireServerErrorEvent());var a=xssUtil.unescape(jQuery(n).text()).evalJSON();n=document.getElementById(this.ajaxBufferId),jQuery(n).html(""),t?t(e,a):(this.setMultipleNodesChilden(e,a),this.fireMultipleChildrenLoadedEvent(e,a))}),dynamicTree.TreeSupport.addMethod("setMultipleNodesChilden",function(e,t,i){if(e&&t)for(var n=0;n<t.length;n++){for(var a=t[n],s=a.children,r=null,o=0;o<e.length;o++){var l=dynamicTree.nodes[e[o]];if(l.param.uri==a.parentUri){r=l;break}}if(r){r.resetChilds(),r.stopWaiting();var c=s.length;if(0===c)r.setHasChilds(!1);else{var d=r.getTreeId(),u=d?dynamicTree.trees[d]:null,h=u?u.sortNodes:null;u&&(u.sortNodes=!1);for(var p=0;p<c;p++){var m=this.processNode(s[p]);r.addChild(m)}u&&(u.sortNodes=h,r.resortChilds())}r.isloaded=!0,i||r.refreshNode()}}}),dynamicTree.TreeSupport.addMethod("getTreeNodeChildrenPrefetched",function(e,t,i,n,a,s,r){var o=e.param.uri,l=this.urlGetNode+"&provider="+this.providerId+"&uri="+o,c="";t&&(c="&prefetch="+t),a&&(l+="&depth="+a);var d=function(e,t,i,n,a,s){return function(){return e.getTreeNodeChildrenPrefetchedCallback(t,i,n,a,s)}}(this,e.id,i,n,s,r);ajaxTargettedUpdate(l,{fillLocation:this.ajaxBufferId,callback:d,postData:c,errorHandler:baseErrorHandler,hideLoader:this.hideLoader}),this.inInit||e.wait()}),dynamicTree.TreeSupport.addMethod("getTreeNodeChildrenPrefetchedCallback",function(e,t,i,n,a){var s=document.getElementById(this.nodeTextId);if(null==s)return void(i?i():this.fireServerErrorEvent());var r=xssUtil.unescape(jQuery(s).text()).evalJSON();s=document.getElementById(this.ajaxBufferId),jQuery(s).html("");var o=dynamicTree.nodes[e];if(o.resetChilds(),o.stopWaiting(),r.children){var l=o.getTreeId(),c=l?dynamicTree.trees[l]:null,d=c?c.sortNodes:null;c&&(c.sortNodes=!1);for(var u=0;u<r.children.length;u++){var h=this.processNode(r.children[u]);o.addChild(h)}c&&(c.sortNodes=d,n||o.resortChilds())}o.isloaded=!0,a||o.refreshNode(),t?t():this.fireChildredPrefetchedLoadedEvent(o.childs)}),dynamicTree.TreeSupport.addMethod("openAndSelectNode",function(e,t,i,n){var a=function(e){var t=dynamicTree.trees[e.getTreeId()];e.parent&&t&&t.rootNode!=e.parent&&t.getState(e.parent.id)==dynamicTree.TreeNode.State.CLOSED&&e.parent.handleNode(),e&&jQuery("#dataChooserSource").length&&(e.nofocus=!0),t._selectOrEditNode(void 0,e,!1,!1,!1,n)};this.processNodePath(e,a,i);var s=this.getSelectedNode();s&&s.scroll(),t&&t()}),dynamicTree.TreeSupport.addMethod("processNodePath",function(e,t,i){var n=this.getRootNode();if("/"===e)t(n);else{var a,s=e.split("/");for(a=0;a<s.length;a++)if(s[a]){var r=n;if(!(n=this.findNodeChildByMetaName(n,s[a]))){if(!i)return;if(!(n=this.findNodeFirstNodeChildByAlphabeticalOrder(r)))return}t(n)}}}),dynamicTree.TreeSupport.addMethod("findLastLoadedNode",function(e){var t={node:null},i=function(e){return function(t){e.node=t}}(t);return this.processNodePath(e,i),t.node}),dynamicTree.TreeSupport.addMethod("findNodeChildByMetaName",function(e,t){if(e.hasChilds())for(var i=0;i<e.childs.length;i++)if(e.childs[i].param.id==t)return e.childs[i];return null}),dynamicTree.TreeSupport.addMethod("findNodeFirstNodeChildByAlphabeticalOrder",function(e){var t=null,i=null;if(e.childs.length>0){t=e.childs[0].param.id,i=0;for(var n=null,a=null,s=1;s<e.childs.length;s++){n=e.childs[s].param.id,a=s;for(var r=n.length<t.length?n.length:t.length,o=0;o<r;o++){if(n.charCodeAt(o)<t.charCodeAt(o)){t=n,i=a;break}if(n.charCodeAt(o)>t.charCodeAt(o))break}}return e.childs[i]}return null}),dynamicTree.TreeSupport.addMethod("findNodeById",function(e,t){return function e(t,i){if(!i||!t)return null;if(i.param.id===t)return i;if(i.hasChilds())for(var n=0;n<i.childs.length;++n){var a=e(t,i.childs[n]);if(a)return a}return null}(e,t||this.getRootNode())}),dynamicTree.TreeSupport.addMethod("hasVisibleFolders",function(e){if(this.bShowRoot)return!0;var t=e.children;if(t)for(var i=0;i<t.length;i++){var n=e.children[i].children;if(n&&n.length>0)return!0}return!1}),dynamicTree.TreeSupport.addMethod("getMessage",function(e,t,i){var n=this.urlGetMessage+"&messageId="+e,a=function(e,t,i){return function(){return e.getMessageCallback(t,i)}}(this,t,i);ajaxTargettedUpdate(n,{fillLocation:this.ajaxBufferId,callback:a,errorHandler:baseErrorHandler,hideLoader:this.hideLoader})}),dynamicTree.TreeSupport.addMethod("getMessageCallback",function(e,t){var i=document.getElementById(this.ajaxBufferId);if(null==i)return void(t&&t());var n=jQuery(i),a=trim(n.html());n.html(""),e&&e(a)}),dynamicTree.TreeSupport.addMethod("fireServerErrorEvent",function(){this._getElement().fire("server:error",{})}),dynamicTree.TreeSupport.addMethod("fireTreeLoadedEvent",function(e){this._getElement().fire("tree:loaded",{tree:e})}),dynamicTree.TreeSupport.addMethod("fireChildrenLoadedEvent",function(e){this._getElement().fire("children:loaded",{nodes:e})}),dynamicTree.TreeSupport.addMethod("fireMultipleChildrenLoadedEvent",function(e,t){this._getElement().fire("multipleChildren:loaded",{parentNodeIds:e,metaNodes:t})}),dynamicTree.TreeSupport.addMethod("fireChildredPrefetchedLoadedEvent",function(e){this._getElement().fire("childredPrefetched:loaded",{nodes:e})}),define("components.dynamicTree",["prototype","dynamicTree.tree","dynamicTree.treenode","dynamicTree.events","core.ajax"],function(e){return function(){return e.dynamicTree}}(this)),dynamicTree.RepositoryFolder=function(e){dynamicTree.TreeNode.call(this,e),this.Types={Folder:new dynamicTree.TreeNode.Type("com.jaspersoft.jasperserver.api.metadata.common.domain.Folder"),SuperRoot:new dynamicTree.TreeNode.Type("superroot"),Root:new dynamicTree.TreeNode.Type("root")},this.nodeHeaderTemplateDomId="list_responsive_collapsible_folders:folders",this.param.extra&&this.param.extra.isActiveThemeFolder&&(this.param.cssClass=this.ACTIVE_THEME_CLASS)},dynamicTree.TreeNode&&(dynamicTree.RepositoryFolder.prototype=deepClone(dynamicTree.TreeNode.prototype)),dynamicTree.RepositoryFolder.addVar("ACTIVE_THEME_CLASS","activeTheme"),dynamicTree.RepositoryFolder.addMethod("isParent",function(){return this.param.type==this.Types.Folder.name||this.param.type==this.Types.SuperRoot.name||this.param.type==this.Types.Root.name}),dynamicTree.RepositoryFolder.addMethod("isSuperRoot",function(){return this.param.type==this.Types.SuperRoot.name}),dynamicTree.RepositoryFolder.addMethod("isPublic",function(){return"public"===this.param.id}),dynamicTree.createRepositoryTree=function(e,t){var i=null!=t.organizationId&&""!==t.organizationId;null==t.bShowRoot&&(t.bShowRoot=!i),t.nodeClass||(t.nodeClass=dynamicTree.RepositoryFolder),t.templateDomId="list_responsive_collapsible_folders";var n=new dynamicTree.TreeSupport(e,t);if(n.organizationId=t.organizationId,n.publicFolderUri=t.publicFolderUri,n.orgMode=i,n.modifyRootObject=function(e,t,i){var n;if(t){n=[];for(var a=0;a<e.length;a++)e[a].uri==this.publicFolderUri&&i&&"/"!=i.param.uri||n.push(e[a])}else if(this.orgMode&&null!=e.children){for(var s,r=e.children,o=[],a=0;a<r.length;a++)r[a].uri==this.publicFolderUri?s=r[a]:o.push(r[a]);e.children=o,n={type:"superroot",label:"",extra:{}},n.children=[e,s]}else n=e;return n},n.getRootNode=function(){var e=this.rootNode;return e.isSuperRoot()?e.childs[0].isPublic()?e.childs[1]:e.childs[0]:e},n.findNodeChildByMetaName=function(e,t){if(e.isSuperRoot()){var i,a;if(e.childs[0].isPublic()?(i=e.childs[0],a=e.childs[1]):(i=e.childs[1],a=e.childs[0]),"public"===t)return i;e=a}if(e.hasChilds())for(var s=0;s<e.childs.length;s++)if(e.childs[s].param.id==t)return e.childs[s];return"public"==t&&e.parent&&e.parent.isSuperRoot()?n.findNodeChildByMetaName(e.parent,t):null},isIPad()){var a=$(e);n.touchController=new TouchController(a,a.up(1),{absolute:!0})}return n},define("dynamicTree.utils",["components.dynamicTree","touchcontroller","dynamicTree.treenode"],function(e){return function(){return e.dynamicTree}}(this)),define("text!dataSource/template/awsSpecificTemplate.htm",[],function(){return'<fieldset class="group">\n\n    <legend><span>{{- i18n[\'resource.dataSource.aws.settings.title\']}}</span></legend>\n\n    <ul class="list inputSet">\n        <li class="leaf">\n            <div class="control radio">\n                <label title="{{- i18n[\'resource.dataSource.aws.option.useDefault.title\']}}" class="wrap">\n                    {{- i18n[\'resource.dataSource.aws.option.useDefault\']}}\n                </label>\n                <input type="radio" value="{{- credentialsType.EC2 }}" name="credentialsType" {{ if(modelAttributes.credentialsType === credentialsType.EC2) { }}checked{{ } }} {{ if (disableAwsDefaults) { }}disabled="disabled"{{ } }}>\n            </div>\n        </li>\n        <li class="leaf">\n            <div class="control radio">\n                <label title="{{- i18n[\'resource.dataSource.aws.option.userDefined.title\']}}" class="wrap">\n                   {{= i18n[\'resource.dataSource.aws.option.userDefined\'].replace(\'{0}\',i18n[\'resource.dataSource.aws.option.url\']) }}\n                </label>\n                <input type="radio" value="{{- credentialsType.AWS }}" name="credentialsType" {{ if(modelAttributes.credentialsType === credentialsType.AWS ) { }}checked{{ } }}>\n            </div>\n        </li>\n    </ul>\n\n    <fieldset class="group shortFields" id="aws_settings" {{ if (modelAttributes.credentialsType === credentialsType.EC2) { }}style="display: none;"{{ } }}>\n\n        <label title="{{- i18n[\'resource.dataSource.aws.setting.accessKey.title\']}}" class="control input text ">\n            <span class="wrap">{{- i18n[\'resource.dataSource.aws.setting.accessKey\']}}:</span>\n            <input type="text" value="{{- modelAttributes.accessKey }}" name="accessKey">\n            <span class="message warning"></span>\n            <span class="message hint"></span>\n        </label>\n\n        <label title="{{- i18n[\'resource.dataSource.aws.setting.secretKey.title\']}}" class="control input password ">\n            <span class="wrap">{{- i18n[\'resource.dataSource.aws.setting.secretKey\']}}:</span>\n            <input type="password" autocomplete="off" value="{{- modelAttributes.secretKey }}" name="secretKey">\n            <span class="message warning"></span>\n            <span class="message hint"></span>\n        </label>\n\n        <label title="{{- i18n[\'resource.dataSource.aws.setting.arn.title\']}}" class="control input text ">\n            <span disabled="disabled" class="wrap">{{- i18n[\'resource.dataSource.aws.setting.arn\']}}:</span>\n            <input type="text" value="{{- modelAttributes.roleArn }}" name="roleArn">\n            <span class="message warning"></span>\n            <span class="message hint">{{- i18n[\'resource.dataSource.aws.optional.arn\']}}</span>\n        </label>\n\n    </fieldset>\n\n</fieldset>\n\n<fieldset class="group">\n\n    <legend><span>{{- i18n[\'resource.dataSource.aws.tree\']}}</span></legend>\n\n    <label title="{{- i18n[\'resource.dataSource.aws.setting.region.title\']}}" class="control select " style="display: inline-block; margin-right: 6px; margin-top: 6px; width: 350px;">\n        <span class="wrap">{{- i18n[\'resource.dataSource.aws.setting.region\']}}:</span>\n        <select class="fnormal" name="region">\n            {{ _.each(awsRegions, function(region) { }}\n            <option value="{{- region }}" {{ if (region === modelAttributes.region) { }}selected="selected"{{ } }}>{{- i18n[region] || region }}</option>\n            {{ }); }}\n        </select>\n        <span class="message warning"></span>\n    </label>\n\n    <button class="button action" id="findAwsDataSources">\n        <span class="wrap">{{- i18n[\'resource.dataSource.aws.updateTree\']}}<span class="icon"></span></span>\n    </button>\n\n</fieldset>\n\n<fieldset class="group">\n\n    <div class="control groupBox" style="height: 150px; margin: 0; width: 538px;">\n        <div class="content">\n            <div class="header">\n                <div class="title"></div>\n            </div>\n            <div class="body" style="height: 137px; overflow: auto; padding: 6px;">\n                <ul class="list collapsible folders hideRoot" id="awsDataSourceTree" style="position: relative; height: 137px; overflow: auto; padding: 6px;"></ul>\n            </div>\n        </div>\n    </div>\n\n</fieldset>\n\n<fieldset class="group shortFields">\n\n    <label title="{{- i18n[\'resource.dataSource.jdbc.username\']}}" class="control input text ">\n        <span class="wrap">{{- i18n[\'resource.dataSource.jdbc.username\']}} ({{- i18n[\'required.field\']}}):</span>\n        <input type="text" value="{{- modelAttributes.username }}" name="username">\n        <span class="message warning"></span>\n        <span class="message hint"></span>\n    </label>\n\n    <label title="{{- i18n[\'resource.dataSource.jdbc.password\']}}" class="control input password ">\n        <span class="wrap">{{- i18n[\'resource.dataSource.jdbc.password\']}}:</span>\n        <input type="password" value="{{- modelAttributes.password }}" name="password">\n        <span class="message warning"></span>\n        <span class="message hint"></span>\n    </label>\n\n    <label title="{{- i18n[\'resource.dataSource.aws.database.name.title\']}}" class="control input text">\n        <span class="wrap">{{- i18n[\'resource.dataSource.aws.database.name\']}} ({{- i18n[\'required.field\']}}):</span>\n        <input type="text" value="{{- modelAttributes.dbName }}" name="dbName">\n        <span class="message warning"></span>\n        <span class="message hint"></span>\n    </label>\n\n</fieldset>\n\n<fieldset class="group mediumFields">\n\n    <label title="{{- i18n[\'resource.analysisConnection.driver\']}}" class="control input text">\n        <span class="wrap">{{- i18n[\'resource.dataSource.jdbc.driver\']}} ({{- i18n[\'required.field\']}}):</span>\n        <input class="control inline" type="text" value="{{- modelAttributes.driverClass }}" name="driverClass">\n        {{ if (driverUploadEnabled) { }}\n        <button class="button action up" id="driverUploadButton">\n            <span class="wrap">{{- i18n[\'resource.dataSource.jdbc.upload.addDriverButton\']}}</span>\n        </button>\n        {{ } }}\n        <span class="message warning"></span>\n        <span class="message hint">{{- i18n[\'resource.dataSource.jdbc.hint1\']}}</span>\n    </label>\n\n    <label title="{{- i18n[\'resource.analysisConnection.requiredURL\']}}" class="control input text">\n        <span class="wrap">{{- i18n[\'resource.dataSource.jdbc.url\']}} ({{- i18n[\'required.field\']}}):</span>\n        <input type="text" value="{{- modelAttributes.connectionUrl }}" name="connectionUrl">\n        <span class="message warning"></span>\n        <span class="message hint">{{- i18n[\'resource.dataSource.jdbc.hint2\']}}</span>\n    </label>\n\n</fieldset>'}),define("dataSource/view/AwsDataSourceView",["require","underscore","common/component/dialog/AlertDialog","dataSource/view/JdbcDataSourceView","dataSource/view/BaseDataSourceView","dataSource/model/AwsDataSourceModel","dataSource/view/dialog/UploadJdbcDriverDialog","dynamicTree.utils","core.events.bis","bundle!jasperserver_messages","text!dataSource/template/awsSpecificTemplate.htm","settings!awsSettings","dataSource/util/settingsUtility"],function(e){"use strict";var t=e("underscore"),i=e("common/component/dialog/AlertDialog"),n=e("dataSource/view/JdbcDataSourceView"),a=e("dataSource/view/BaseDataSourceView"),s=e("dataSource/model/AwsDataSourceModel"),r=e("dataSource/view/dialog/UploadJdbcDriverDialog"),o=e("dynamicTree.utils"),l=e("core.events.bis"),c=e("bundle!jasperserver_messages"),d=e("text!dataSource/template/awsSpecificTemplate.htm"),u=e("settings!awsSettings"),h=e("dataSource/util/settingsUtility");return n.extend({PAGE_TITLE_NEW_MESSAGE_CODE:"resource.datasource.aws.page.title.new",PAGE_TITLE_EDIT_MESSAGE_CODE:"resource.datasource.aws.page.title.edit",modelConstructor:s,events:function(){var e={};return t.extend(e,n.prototype.events),e["change input[name='credentialsType']"]="changeCredentialsType",e["click #findAwsDataSources"]="refreshAwsDataSourceTree",e},initialize:function(e){a.prototype.initialize.apply(this,arguments),this.deepDefaults=h.deepDefaults(e,{awsSettings:u}),this.listenTo(this.model,"change:credentialsType",this.onCredentialsTypeChange),this.listenTo(this.model,"change:driverClass",this.changeUploadDriverButtonState),this.listenTo(this.model,"change",this.updateInput),this.listenTo(this.model.drivers,"change add",this.recheckDriver)},changeCredentialsType:function(){var e=this.$("input[name='credentialsType']:checked").val();this.model.set("credentialsType",e)},recheckDriver:function(){this.model.validate({driverClass:this.model.get("driverClass")}),this.changeUploadDriverButtonState()},changeUploadDriverButtonState:function(){var e=this.$("#driverUploadButton");if(""===this.model.get("driverClass"))l.disable(e[0]);else{l.enable(e[0]);var t=this.model.drivers.getDriverByClass(this.model.get("driverClass"));e.find(".wrap").text(c[t&&t.get("available")?"resource.dataSource.jdbc.upload.editDriverButton":"resource.dataSource.jdbc.upload.addDriverButton"])}},initDriverUploadDialog:function(){var e=this,i=this.model.drivers.getDriverByClass(this.model.get("driverClass"));this.driverUploadDialog=new r({driverAvailable:!(!i||!i.get("available")),driverClass:this.model.get("driverClass")}),this.driverUploadDialog.on("driverUpload",function(i){e.model.drivers.markDriverAsAvailable(i.jdbcDriverClass),t.defer(t.bind(e.model.validate,e.model))})},updateInput:function(){var e=t.keys(this.model.changedAttributes()),i=["accessKey","secretKey","roleArn","connectionUrl","driverClass","dbName"],n=this;t.each(t.intersection(e,i),function(e){var t=n.model.get(e);n.$("[name='"+e+"']").val()!==t&&n.$("[name='"+e+"']").val(t)})},onCredentialsTypeChange:function(){var e=this.model.get("credentialsType")===s.credentialsType.EC2;this.$("#aws_settings")[e?"hide":"show"](),e&&this.showAwsDsTree(this.model.getFullDbTreePath())},refreshAwsDataSourceTree:function(e){e.preventDefault(),this.showAwsDsTree("/")},render:function(){return this.$el.empty(),this.renderTimezoneSection(),this.renderAwsSpecificSection(),this.renderTestConnectionSection(),this.initDataSourceTree(),(this.options.isEditMode||this.model.get("credentialsType")===s.credentialsType.EC2)&&this.showAwsDsTree(this.model.getFullDbTreePath()),this},showAwsDsTree:function(e){this.model.validate({accessKey:this.model.get("accessKey"),secretKey:this.model.get("secretKey")}),this.model.isValid("secretKey")&&this.model.isValid("accessKey")&&this.awsDataSourceTree.showTreePrefetchNodes(e||"/")},templateData:function(){var e=n.prototype.templateData.apply(this,arguments);return t.extend(e,{credentialsType:s.credentialsType,awsRegions:this.deepDefaults.awsSettings.awsRegions,disableAwsDefaults:!this.deepDefaults.awsSettings.isEc2Instance||this.deepDefaults.awsSettings.suppressEc2CredentialsWarnings}),e},renderAwsSpecificSection:function(){this.$el.append(t.template(d,this.templateData())),this.changeUploadDriverButtonState()},initDataSourceTree:function(){var e=this.options.isEditMode,t=this,n={hideLoader:!0,bShowRoot:!1,treeId:"awsDataSourceTree",providerId:"awsDataSourceTreeDataProvider",selectLeavesOnly:!0,additionalParams:function(){return{arn:t.model.get("roleArn"),awsAccessKey:t.model.get("accessKey"),awsSecretKey:t.model.get("secretKey"),region:t.model.get("region"),datasourceUri:t.model.get("uri")}}};this.awsDataSourceTree=o.createRepositoryTree("awsDataSourceTree",n),this.awsDataSourceTree.httpErrorHandler=function(e){var t,n=!1;return-1===e.responseText.indexOf("AWS Access Key is invalid")&&-1===e.responseText.indexOf("The security token included in the request is invalid")||(n=c["error.aws.key.is.invalid"]),!1!==n||-1===e.responseText.indexOf("AWS Secret Key is invalid")&&-1===e.responseText.indexOf("The request signature we calculated does not match the signature you provided. Check your AWS Secret Access Key and signing method")||(n=c["error.aws.secret.key.is.invalid"]),!1===n&&-1!==e.responseText.indexOf("is not authorized to perform")&&(n=c["error.aws.arn.is.invalid"]),
!1===n&&-1!==e.responseText.indexOf("The security token included in the request is invalid")&&(n=c["error.security.token.is.invalid"]),!!n&&(t=new i({modal:!0}),t.setMessage(n),t.open(),!0)},this.awsDataSourceTree.observe("leaf:selected",function(i){var n=i.memo.node.param;if("awsDb"===n.type&&!e){var a=n.extra,s=a.dbUri.split("/");t.model.set({connectionUrlTemplate:a.jdbcTemplate,driverClass:a.jdbcDriverClass,dbName:a.dBName,dbHost:a.dnsAddress,dbPort:a.dbPort,sName:a.dBName,dbService:s[1],dbInstanceIdentifier:s[2]}),t.model.validate({driverClass:t.model.get("driverClass")})}}),this.awsDataSourceTree.observe("tree:loaded",function(){t.model.getFullDbTreePath()&&t.awsDataSourceTree.openAndSelectNode(t.model.getFullDbTreePath(),function(){e=!1})})},remove:function(){this.awsDataSourceTree&&this.awsDataSourceTree.stopObserving(),n.prototype.remove.apply(this,arguments)}})}),define("dataSource/model/AzureSqlDataSourceModel",["require","dataSource/model/JdbcDataSourceModel","dataSource/model/BaseDataSourceModel","dataSource/collection/JdbcDriverCollection","settings!dataSourcePatterns","dataSource/enum/connectionTypes","bi/repository/enum/repositoryResourceTypes","underscore","jquery","bundle!jasperserver_messages","settings!awsSettings","bundle!jasperserver_config","dataSource/util/settingsUtility"],function(e){"use strict";var t=e("dataSource/model/JdbcDataSourceModel"),i=e("dataSource/model/BaseDataSourceModel"),n=e("dataSource/collection/JdbcDriverCollection"),a=(e("settings!dataSourcePatterns"),e("dataSource/enum/connectionTypes")),s=e("bi/repository/enum/repositoryResourceTypes"),r=e("underscore"),o=e("jquery"),l=e("bundle!jasperserver_messages"),c=e("settings!awsSettings"),d=e("bundle!jasperserver_config"),u=e("dataSource/util/settingsUtility");return t.extend({otherDriverIsPresent:!1,type:s.AZURE_SQL_DATA_SOURCE,defaults:function(){var e={};return r.extend(e,t.prototype.defaults,{subscriptionId:"",keyStorePassword:"",keyStoreUri:"",serverName:"",dbName:"",selectedDriverClass:"",useMicrosoftDriver:!1,microsoftDriverAvailable:!1,connectionType:a.AZURE_SQL}),e}(),validation:function(){var e={};return r.extend(e,t.prototype.validation,{subscriptionId:[{required:!0,msg:l["ReportDataSourceValidator.error.azureSqlDataSource.subscriptionId"]}],keyStorePassword:[{required:!0,msg:l["ReportDataSourceValidator.error.azureSqlDataSource.keyStorePassword"]}],keyStoreUri:[{required:!0,msg:l["ReportDataSourceValidator.error.azureSqlDataSource.keyStoreUri"]}],serverName:[{required:!0,msg:l["ReportDataSourceValidator.error.azureSqlDataSource.serverName"]}],dbName:[{required:!0,msg:l["ReportDataSourceValidator.error.not.empty.reportDataSource.dbNameIsEmpty"]}],username:[{required:!0,msg:l["ReportDataSourceValidator.error.not.empty.reportDataSource.username"]}]}),e}(),initialize:function(e,t){i.prototype.initialize.apply(this,arguments);u.deepDefaults(t,{awsSettings:c});this.isNew()||(this.set("password",d["input.password.substitution"]),this.set("keyStorePassword",d["input.password.substitution"])),this.initialization=o.Deferred(),this.drivers=new n([],this.options);var a=this;this.drivers.fetch({reset:!0}).done(function(){a.isNew()?a.set("selectedDriverClass",a.drivers.getDriverByName("sqlserver").get("jdbcDriverClass")):a.set("selectedDriverClass",a.get("driverClass"));var e=a.drivers.getDriverByName("sqlserver_standard");null!=e&&(a.set("microsoftDriverAvailable",e.get("available")),a.set("useMicrosoftDriver",a.get("selectedDriverClass")===e.get("jdbcDriverClass"))),a.initialization.resolve()}),this.on("change:dbName change:serverName change:connectionUrlTemplate change:useMicrosoftDriver",this.updateConnectionUrl),this.on("change:useMicrosoftDriver",this.updateDriverClass)},updateConnectionUrl:function(){if(this.get("connectionUrlTemplate")){var e=this.pick(["dbName","serverName","dbPort"]);e.dbPort=1433;var t=this.drivers.getDriverByName("sqlserver_standard"),i=this.get("connectionUrlTemplate");this.get("useMicrosoftDriver")&&null!=t&&(e.serverName+=".database.windows.net",i=t.get("jdbcUrl")),e.dbHost=e.serverName;var n=this.replaceConnectionUrlTemplatePlaceholdersWithValues(i,e);this.set("connectionUrl",n)}},updateDriverClass:function(){var e=this.drivers.getDriverByName("sqlserver_standard"),t=this.get("useMicrosoftDriver")&&null!=e?"sqlserver_standard":"sqlserver",i=this.drivers.getDriverByName(t).get("jdbcDriverClass");this.set("selectedDriverClass",i),this.set("driverClass",i)},toJSON:function(){var e=t.prototype.toJSON.apply(this,arguments);return this.options.isEditMode&&e.keyStorePassword===d["input.password.substitution"]&&(e.keyStorePassword=null),e},getFullDbTreePath:function(){return this.get("serverName")&&this.get("dbName")?"/"+this.get("serverName")+"/"+this.get("dbName"):null}})}),define("text!dataSource/template/azureSqlSpecificTemplate.htm",[],function(){return'<fieldset class="group">\n\n    <js-templateNonce></js-templateNonce>\n\n    <legend><span>{{- i18n[\'resource.dataSource.azureSql.settings.title\']}}</span></legend>\n\n    <fieldset class="group shortFields" id="aws_settings">\n\n        <label title="{{- i18n[\'resource.dataSource.azureSql.setting.subscriptionId.title\']}}" class="control input text ">\n            <span class="wrap">{{- i18n[\'resource.dataSource.azureSql.setting.subscriptionId\']}} ({{- i18n[\'required.field\']}}):</span>\n            <input type="text" value="{{- modelAttributes.subscriptionId }}" name="subscriptionId">\n            <span class="message warning"></span>\n            <span class="message hint"></span>\n        </label>\n\n        <label title="{{- i18n[\'resource.dataSource.azureSql.setting.keyStoreUri.title\']}}" class="control input text">\n            <span class="wrap">{{- i18n[\'resource.dataSource.azureSql.setting.keyStoreUri\']}} ({{- i18n[\'required.field\']}}):</span>\n            <input type="text" value="{{- modelAttributes.keyStoreUri }}" name="keyStoreUri">\n            <button class="button action" type="button" name="repositoryBrowserButton">\n                <span class="wrap">{{- i18n[\'dialog.file.browse\'] }}...<span class="icon"></span></span>\n            </button>\n            <span class="message warning"></span>\n            <span class="message hint">{{- i18n[\'resource.dataSource.azureSql.optional.keyStoreUri\']}}</span>\n        </label>\n\n        <label title="{{- i18n[\'resource.dataSource.azureSql.setting.keyStorePassword.title\']}}" class="control input password ">\n            <span class="wrap">{{- i18n[\'resource.dataSource.azureSql.setting.keyStorePassword\']}} ({{- i18n[\'required.field\']}}):</span>\n            <input type="password" autocomplete="off" value="{{- modelAttributes.keyStorePassword }}" name="keyStorePassword">\n            <span class="message warning"></span>\n            <span class="message hint"></span>\n        </label>\n\n    </fieldset>\n\n</fieldset>\n\n<fieldset class="group">\n\n    <legend><span>{{- i18n[\'resource.dataSource.azureSql.tree\']}}</span></legend>\n\n    <button class="button action" id="updateDatabaseTree">\n        <span class="wrap">{{- i18n[\'resource.dataSource.azureSql.updateTree\']}}<span class="icon"></span></span>\n    </button>\n\n</fieldset>\n\n<fieldset class="group">\n\n    <div class="control groupBox" style="height: 150px; margin: 0; width: 538px;">\n        <div class="content">\n            <div class="header">\n                <div class="title"></div>\n            </div>\n            <div class="body" style="height: 137px; overflow: auto; padding: 6px;">\n                <ul class="list collapsible folders hideRoot" id="azureSqlDataSourceTree" style="position: relative; height: 137px; overflow: auto; padding: 6px;"></ul>\n            </div>\n        </div>\n    </div>\n\n</fieldset>\n\n<fieldset class="group shortFields">\n\n    <label title="{{- i18n[\'resource.dataSource.azureSql.server.name.title\']}}" class="control input text">\n        <span class="wrap">{{- i18n[\'resource.dataSource.azureSql.server.name\']}} ({{- i18n[\'required.field\']}}):</span>\n        <input type="text" value="{{- modelAttributes.serverName }}" name="serverName">\n        <span class="message warning"></span>\n        <span class="message hint"></span>\n    </label>\n\n    <label title="{{- i18n[\'resource.dataSource.azureSql.database.name.title\']}}" class="control input text">\n        <span class="wrap">{{- i18n[\'resource.dataSource.azureSql.database.name\']}} ({{- i18n[\'required.field\']}}):</span>\n        <input type="text" value="{{- modelAttributes.dbName }}" name="dbName">\n        <span class="message warning"></span>\n        <span class="message hint"></span>\n    </label>\n\n    <label title="{{- i18n[\'resource.dataSource.jdbc.username\']}}" class="control input text ">\n        <span class="wrap">{{- i18n[\'resource.dataSource.jdbc.username\']}} ({{- i18n[\'required.field\']}}):</span>\n        <input type="text" value="{{- modelAttributes.username }}" name="username">\n        <span class="message warning"></span>\n        <span class="message hint">{{- i18n[\'resource.dataSource.azureSql.database.username.hint\']}}</span>\n    </label>\n\n    <label title="{{- i18n[\'resource.dataSource.jdbc.password\']}}" class="control input password ">\n        <span class="wrap">{{- i18n[\'resource.dataSource.jdbc.password\']}}:</span>\n        <input type="password" value="{{- modelAttributes.password }}" name="password">\n        <span class="message warning"></span>\n        <span class="message hint"></span>\n    </label>\n\n    <label title="{{- i18n[\'resource.dataSource.azureSql.useMicrosoftDriver\']}}" class="control input checkBox">\n        <span class="wrap">{{- i18n[\'resource.dataSource.azureSql.useMicrosoftDriver\']}}\n            {{ if (!modelAttributes.microsoftDriverAvailable) { }}\n                ({{- i18n["resource.dataSource.azureSql.microsoftDriverMissing"] }})\n            {{ } }}\n            </span>\n        <input type="checkbox" name="useMicrosoftDriver" value="{{- modelAttributes.useMicrosoftDriver }}"\n            {{ if (modelAttributes.useMicrosoftDriver) { }}checked="checked"{{ } }} \n            {{ if (!modelAttributes.microsoftDriverAvailable) { }}disabled="disabled"{{ } }}>\n    </label>\n\n\n</fieldset>\n\n<fieldset class="group mediumFields">\n\n    <label title="{{- i18n[\'resource.analysisConnection.requiredURL\']}}" class="control input text">\n        <span class="wrap">{{- i18n[\'resource.dataSource.jdbc.url\']}} ({{- i18n[\'required.field\']}}):</span>\n        <input type="text" value="{{- modelAttributes.connectionUrl }}" name="connectionUrl">\n        <span class="message warning"></span>\n        <span class="message hint">{{- i18n[\'resource.dataSource.azureSql.connectionUrl.hint\']}}</span>\n    </label>\n\n</fieldset>'}),define("text!common/templates/components.pickers.htm",[],function(){return'<div class="panel dialog selectFromRepository overlay moveable sizeable centered_horz centered_vert hidden">\n\n    <js-templateNonce></js-templateNonce>\n\t<div class="sizer diagonal"></div>\n\t<div class="content hasFooter">\n\t\t<div class="header mover">\n\t\t\t<div class="title">\n\t\t\t</div>\n\t\t</div>\n\t\t<div class="body">\n\t\t\t<div class="control groupBox fillParent">\n\t\t\t\t<div class="content">\n\t\t\t\t\t<div class="header">\n\t\t\t\t\t\t<div class="title">\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t\t<div class="body">\n\t\t\t\t\t\t<ul id="selectFromRepoTree"></ul>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t</div>\n\t\t<div class="footer">\n\t\t\t<button id="selectFromRepoBtnSelect" class="button action primary up"><span class="wrap">{{- i18n["button.select"] }}</span><span class="icon"></span></button>\n\t\t\t<button id="selectFromRepoBtnCancel" class="button action up"><span class="wrap">{{- i18n["button.cancel"] }}</span><span class="icon"></span></button>\n\t\t</div>\n\t</div>\n</div>\n'});var resource={messages:{},resourceLabelMaxLength:100,resourceIdMaxLength:100,resourceDescriptionMaxLength:250,PROPAGATE_EVENT:"propagateEvent",STEP_DISPLAY_ID:"stepDisplay",FLOW_CONTROLS_ID:"flowControls",initSwipeScroll:function(){var e=$(resource.STEP_DISPLAY_ID);e&&new TouchController(e.up(),e.up(1),{})},submitForm:function(e,t,i){if(t){var n=buildActionUrl(t);i&&i(),$(e).writeAttribute("method","post").writeAttribute("action",n),$(e).submit()}},registerClickHandlers:function(e,t,i){if(resource._bodyClickEventHandlers)return void(i?Array.prototype.unshift:Array.prototype.push).apply(resource._bodyClickEventHandlers,e);resource._bodyClickEventHandlers=e;var n=t||"body";$$(n)[0].observe("click",function(e){resource._bodyClickEventHandlers&&resource._bodyClickEventHandlers.each(function(t){var i=t(e);if(i)throw i!==resource.PROPAGATE_EVENT&&Event.stop(e),$break})})},TreeWrapper:function(e){var t=this;if(this._treeId=e.treeId,this._resourceUriInput=$(e.resourceUriInput||"resourceUri"),this._uri=this._resourceUriInput&&this._resourceUriInput.getValue()||e.uri||"/",!e.providerId)throw"There is no tree provider set for tree #{id}".interpolate({id:this._treeId});var i=["providerId","rootUri","organizationId","publicFolderUri","urlGetNode","urlGetChildren"].inject({},function(t,i){return null!==e[i]&&(t[i]=e[i]),t});return this._tree=new dynamicTree.createRepositoryTree(this._treeId,i),this._tree.observe("tree:loaded",function(){t._tree.openAndSelectNode($(t._resourceUriInput).getValue())}),this._tree.observe("leaf:selected",function(e){t._uri=e.memo.node.param.uri,t._resourceUriInput.setValue(t._uri)}),this._tree.observe("node:selected",function(){t._resourceUriInput.setValue(t._uri="")}),{getTreeId:function(){return t._treeId},getTree:function(){return t._tree},selectFolder:function(e){t._tree.openAndSelectNode(e)},getSelectedFolderUri:function(){return t._uri}}},switchButtonState:function(e,t){buttonManager[t?"enable":"disable"].call(buttonManager,e)},switchDisableState:function(e,t){(e=$(e))&&e[t?"disable":"enable"].call(e)},generateResourceId:function(e){if(localContext&&localContext.initOptions&&localContext.initOptions.resourceIdNotSupportedSymbols)return e.replace(new RegExp(localContext.initOptions.resourceIdNotSupportedSymbols,"g"),"_");throw"There is no resourceIdNotSupportedSymbols property in init options."},testResourceId:function(e){if(localContext&&localContext.initOptions&&localContext.initOptions.resourceIdNotSupportedSymbols)return new RegExp(localContext.initOptions.resourceIdNotSupportedSymbols,"g").test(e);throw"There is no resourceIdNotSupportedSymbols property in init options."},labelValidator:function(e){var t=!0,i="";return e.blank()?(i=resource.messages.labelIsEmpty,t=!1):e.length>resource.resourceLabelMaxLength&&(i=resource.messages.labelToLong,t=!1),{isValid:t,errorMessage:i}},getLabelValidationEntry:function(e){return{element:e,validators:[{method:"mandatory",messages:{mandatory:resource.messages.labelIsEmpty}},{method:"minMaxLength",messages:{tooLong:resource.messages.labelToLong},options:{maxLength:resource.resourceLabelMaxLength}}]}},getIdValidationEntry:function(e){return{element:e,validators:[{method:"resourceIdChars",messages:resource.messages},{method:"mandatory",messages:{mandatory:resource.messages.resourceIdIsEmpty}},{method:"minMaxLength",messages:{tooLong:resource.messages.resourceIdToLong},options:{maxLength:resource.resourceIdMaxLength}}]}},resourceIdValidator:function(e){var t=!0,i="";return this._isEditMode||(e.blank()?(i=resource.messages.resourceIdIsEmpty,t=!1):e.length>resource.resourceIdMaxLength?(i=resource.messages.resourceIdToLong,t=!1):resource.testResourceId(e)&&(i=resource.messages.resourceIdInvalidChars,t=!1)),{isValid:t,errorMessage:i}},getDescriptionValidationEntry:function(e){return{element:e,validators:[{method:"minMaxLength",messages:{tooLong:resource.messages.descriptionToLong},options:{maxLength:resource.resourceDescriptionMaxLength}}]}},descriptionValidator:function(e){var t=!0,i="";return e.length>resource.resourceDescriptionMaxLength&&(i=resource.messages.descriptionToLong,t=!1),{isValid:t,errorMessage:i}},dataSourceValidator:function(e){var t=!0,i="";return""===e.trim()&&(i=resource.messages.dataSourceInvalid,t=!1),{isValid:t,errorMessage:i}},queryValidator:function(e){var t=!0,i="";return""===e.trim()&&(i=resource.messages.queryInvalid,t=!1),{isValid:t,errorMessage:i}},getValidationEntries:function(e){return e.collect(function(e){return e.validationEntry?e.validationEntry:{validator:e.validator,element:e}})}};"undefined"==typeof require&&isIPad()&&document.observe("dom:loaded",resource.initSwipeScroll.bind(resource)),define("resource.base",["prototype","utils.common","core.layout"],function(e){return function(){return e.resource}}(this));var picker={};picker.FileSelector=function(e){this._disabled=void 0!==e.disabled&&e.disabled,this._uriTextbox=$(e.uriTextboxId),this._browseButtonId=$(e.browseButtonId),this._onChange=e.onChange||!1,this._options=e,this._disabled?(buttonManager.disable(this._uriTextbox),buttonManager.disable(this._browseButtonId)):(this._id=e.id,this._suffix=e.suffix?e.suffix:(new Date).getTime(),this._treeDomId=e.treeId,this._selectLeavesOnly=void 0!==e.selectLeavesOnly&&e.selectLeavesOnly,this._selectedUri=$F(this._uriTextbox),this._process(e),this._assignHandlers(),this._refreshButtonsState())},picker.FileSelector.addVar("DEFAULT_TEMPLATE_DOM_ID","selectFromRepository"),picker.FileSelector.addVar("DEFAULT_TREE_ID","selectFromRepoTree"),picker.FileSelector.addVar("OK_BUTTON_ID","selectFromRepoBtnSelect"),picker.FileSelector.addVar("CANCEL_BUTTON_ID","selectFromRepoBtnCancel"),picker.FileSelector.addVar("TITLE_PATTERN","div.title"),picker.FileSelector.addMethod("_process",function(e){!this._id&&(this._id=this.DEFAULT_TEMPLATE_DOM_ID),!$(this._id)&&this._options.template&&this._options.i18n?(this._dom=jQuery(_.template(this._options.template,{i18n:this._options.i18n})),this._dom=this._dom[0]):this._dom=$(this._id).cloneNode(!0),this._dom.writeAttribute("id",this._id+this._suffix),this._okButton=this._dom.select("#"+this.OK_BUTTON_ID)[0],this._okButton.writeAttribute("id",this.OK_BUTTON_ID+this._suffix),this._cancelButton=this._dom.select("#"+this.CANCEL_BUTTON_ID)[0],this._cancelButton.writeAttribute("id",this.CANCEL_BUTTON_ID+this._suffix),!this._treeDomId&&(this._treeDomId=this.DEFAULT_TREE_ID),this._treeDom=this._dom.select("#"+this._treeDomId)[0],this._treeDom.writeAttribute("id",this._treeDomId+this._suffix),this._visible=!1,e.title&&this._dom.select(this.TITLE_PATTERN)[0].update(e.title),this._onOk=e.onOk,this._onCancel=e.onCancel,jQuery(document.body).append(this._dom);var t,i=this._dom.down(layoutModule.SWIPE_SCROLL_PATTERN);i&&(t=layoutModule.createScroller(i));var n=Object.extend({providerId:e.providerId,scroll:t},e.treeOptions);this._tree=dynamicTree.createRepositoryTree(this._treeDomId+this._suffix,n),this._selectedUri&&this._selectedUri.length>0?this._tree.showTreePrefetchNodes(this._selectedUri):this._tree.showTree(1)}),picker.FileSelector.addMethod("_assignHandlers",function(){this._dom.observe("click",this._dialogClickHandler.bindAsEventListener(this)),["node:dblclick","leaf:dblclick"].each(function(e){this._tree.observe(e,this._treeClickHandler.bindAsEventListener(this))},this),["node:click","leaf:click","node:selected","leaf:selected"].each(function(e){this._tree.observe(e,this._refreshButtonsState.bindAsEventListener(this))},this),["childredPrefetched:loaded","tree:loaded"].each(function(e){this._tree.observe(e,this._treeLoadHandler.bindAsEventListener(this))},this),this._browseButtonId.observe("click",this._browseClickHandler.bindAsEventListener(this))}),picker.FileSelector.addMethod("_canClickOk",function(e){return this._tree.getSelectedNode()&&(!this._selectLeavesOnly||this._tree.getSelectedNode().param.type!==this._tree.getSelectedNode().FOLDER_TYPE_NAME)}),picker.FileSelector.addMethod("_dialogClickHandler",function(e){var t=e.element();if(matchAny(t,["#"+this.OK_BUTTON_ID+this._suffix],!0)){e.stop();var i=this._tree.getSelectedNode().param.uri;this._uriTextbox.setValue(i),this._onChange&&this._onChange(i),this._hide(),this._onOk&&this._onOk()}else matchAny(t,["#"+this.CANCEL_BUTTON_ID+this._suffix],!0)&&(e.stop(),this._hide(),this._onCancel&&this._onCancel())}),picker.FileSelector.addMethod("_treeClickHandler",function(e){if(this._canClickOk()){var t=this._tree.getSelectedNode().param.uri;this._uriTextbox.setValue(t),this._onChange&&this._onChange(t),this._hide(),this._onOk&&this._onOk()}}),picker.FileSelector.addMethod("_treeLoadHandler",function(e){this._visible&&this._selectedUri&&this._tree.openAndSelectNode(this._selectedUri)}),picker.FileSelector.addMethod("_browseClickHandler",function(e){e.stop(),this._show()}),picker.FileSelector.addMethod("_refreshButtonsState",function(){this._canClickOk()?buttonManager.enable(this._okButton):buttonManager.disable(this._okButton)}),picker.FileSelector.addMethod("_hide",function(){dialogs.popup.hide(this._dom),this._visible=!1}),picker.FileSelector.addMethod("_show",function(){this._selectedUri=$F(this._uriTextbox),this._selectedUri&&this._selectedUri.length>0?this._tree.showTreePrefetchNodes(this._selectedUri):this._tree.showTree(1),dialogs.popup.show(this._dom,!0),this._visible=!0,this._selectedUri&&this._tree.openAndSelectNode(this._selectedUri),this._refreshButtonsState()}),picker.FileSelector.addMethod("remove",function(){jQuery(this._dom).remove()}),define("components.pickers",["utils.common","components.dialogs","core.layout","core.events.bis","prototype","jquery","dynamicTree.utils"],function(e){return function(){return e.picker}}(this));var resourceLocator={CONTENT_REPOSITORY:"CONTENT_REPOSITORY",LOCAL:"LOCAL",NONE:"NONE",FILE_SYSTEM:"FILE_SYSTEM",LOCATE_EVENT:"resource:locate",ALLOWED_FILE_RESOURCE_EXTENSIONS:["css","ttf","jpg","jpeg","gif","bmp","png","jar","jrxml","properties","jrtx","xml","agxml","docx","doc","ppt","pptx","xls","xlsx","ods","odt","odp","pdf","rtf","html"],initialize:function(e){var t=function(e){return _.isObject(e)?e:$(e)};this.resourceUri=t(e.resourceInput),this.browseButton=t(e.browseButton),this.filePath=t(e.fileUploadInput),this.fakeFilePath=t(e.fakeFileUploadInput),this.fakeFileInput=t(e.fakeFileUploadInputText),this.newResourceLink=t(e.newResourceLink);try{this._initFileSelector(e)}catch(e){}finally{this._initEvents(e)}return this},_initEvents:function(e){jQuery(document).on("click","#CONTENT_REPOSITORY, #FILE_SYSTEM, #NONE, #LOCAL",this._clickHandler),"fileResourceTreeDataProvider"===e.providerId&&(jQuery("#next").on("click",resourceLocator._nextClickHandler),jQuery("#filePath").on("change",resourceLocator._uploadChangeHandler))},_nextClickHandler:function(e){jQuery("#fileUpload").hasClass("error")&&e.preventDefault()},_uploadChangeHandler:function(e){jQuery("#fileUpload").removeClass("error");var t=!0;if(jQuery("#filePath")[0].value){var i=jQuery("#filePath")[0].value.match(/.*\.([^\.]+)$/);if(i){var n=i[1];_.indexOf(resourceLocator.ALLOWED_FILE_RESOURCE_EXTENSIONS,n)<0&&(t=!1)}else t=!1}else t=!1;if(!t){var a=resource.messages["resource.report.unsupportedFileType.error"]+" "+resourceLocator.ALLOWED_FILE_RESOURCE_EXTENSIONS.join(", ");jQuery("#fileUpload").addClass("error").find("span.warning").html(a)}},_clickHandler:function(e){resourceLocator._updateResourceSelectorState(e.target.id)},_updateResourceSelectorState:function(e){resource.switchButtonState(this.filePath,e===this.FILE_SYSTEM),resource.switchButtonState(this.fakeFilePath,e===this.FILE_SYSTEM),resource.switchButtonState(this.fakeFileInput,e===this.FILE_SYSTEM),resource.switchButtonState(this.browseButton,e===this.CONTENT_REPOSITORY),resource.switchDisableState(this.resourceUri,e!==this.CONTENT_REPOSITORY);var t=e===this.LOCAL?["disabled","launcher"]:["launcher","disabled"];this._switchElementClasses(this.newResourceLink,t)},_initFileSelector:function(e){this.fileSelector=new picker.FileSelector(_.extend({},e,{uriTextboxId:this.resourceUri,browseButtonId:this.browseButton,title:e.dialogTitle}))},remove:function(e){this.fileSelector.remove()},_switchElementClasses:function(e,t){e&&t&&e.removeClassName(t[0]).addClassName(t[1])}};define("resource.locate",["resource.base","jquery","components.pickers"],function(e){return function(){return e.resourceLocator}}(this)),define("dataSource/view/AzureSqlDataSourceView",["require","underscore","common/component/dialog/AlertDialog","dataSource/view/JdbcDataSourceView","dataSource/view/BaseDataSourceView","dataSource/model/AzureSqlDataSourceModel","dataSource/view/dialog/UploadJdbcDriverDialog","dynamicTree.utils","core.events.bis","bundle!jasperserver_messages","bundle!jsexceptions_messages","text!dataSource/template/azureSqlSpecificTemplate.htm","text!common/templates/components.pickers.htm","settings!awsSettings","resource.locate","dataSource/util/settingsUtility"],function(e){"use strict";var t=e("underscore"),i=e("common/component/dialog/AlertDialog"),n=e("dataSource/view/JdbcDataSourceView"),a=e("dataSource/view/BaseDataSourceView"),s=e("dataSource/model/AzureSqlDataSourceModel"),r=(e("dataSource/view/dialog/UploadJdbcDriverDialog"),e("dynamicTree.utils")),o=(e("core.events.bis"),e("bundle!jasperserver_messages")),l=e("bundle!jsexceptions_messages"),c=e("text!dataSource/template/azureSqlSpecificTemplate.htm"),d=e("text!common/templates/components.pickers.htm"),u=(e("settings!awsSettings"),e("resource.locate"));e("dataSource/util/settingsUtility");return n.extend({PAGE_TITLE_NEW_MESSAGE_CODE:"resource.datasource.aws.page.title.new",PAGE_TITLE_EDIT_MESSAGE_CODE:"resource.datasource.aws.page.title.edit",modelConstructor:s,events:function(){var e={};return t.extend(e,n.prototype.events),e["click #updateDatabaseTree"]="updateDatabaseTree",e},initialize:function(e){a.prototype.initialize.apply(this,arguments),this.listenTo(this.model,"change",this.onModelChange)},onModelChange:function(){var e=t.keys(this.model.changedAttributes()),i=["serverName","dbName","connectionUrl"],n=this;t.each(t.intersection(e,i),function(e){n.$("[name='"+e+"']").val(n.model.get(e))})},updateDatabaseTree:function(e){e.preventDefault(),this.showAzureSqlDsTree("/")},render:function(){return this.$el.empty(),this.renderTimezoneSection(),this.renderAzureSqlSpecificSection(),this.renderTestConnectionSection(),this.initDataSourceTree(),this.options.isEditMode&&this.showAzureSqlDsTree(this.model.getFullDbTreePath()),this},showAzureSqlDsTree:function(e){this.model.validate({subscriptionId:this.model.get("subscriptionId"),keyStorePassword:this.model.get("keyStorePassword"),keyStoreUri:this.model.get("keyStoreUri")}),this.model.isValid("keyStorePassword")&&this.model.isValid("subscriptionId")&&this.azureSqlDataSourceTree.showTreePrefetchNodes(e||"/")},renderAzureSqlSpecificSection:function(){this.$el.append(t.template(c,this.templateData())),this.browseButton=u.initialize({i18n:o,template:d,resourceInput:this.$el.find("[name=keyStoreUri]")[0],browseButton:this.$el.find("[name=repositoryBrowserButton]")[0],providerId:"fileResourceBaseTreeDataProvider",dialogTitle:o["resource.Add.Files.Title"],selectLeavesOnly:!0,onChange:t.bind(function(e){this.model.set("keyStoreUri",e),this.model.validate({keyStoreUri:e})},this)})},initDataSourceTree:function(){var e=this.options.isEditMode,t=this,n={hideLoader:!0,bShowRoot:!1,treeId:"azureSqlDataSourceTree",providerId:"azureSqlDataSourceTreeDataProvider",selectLeavesOnly:!0,additionalParams:function(){return{subscriptionId:t.model.get("subscriptionId"),keyStorePassword:t.model.get("keyStorePassword"),keyStoreUri:t.model.get("keyStoreUri"),datasourceUri:t.model.get("uri")}}};this.azureSqlDataSourceTree=r.createRepositoryTree("azureSqlDataSourceTree",n),this.azureSqlDataSourceTree.httpErrorHandler=function(e){var t,n,a=!1,s=["azure.exception.datasource.recovery.public.ip.not.provided","azure.exception.datasource.recovery.firewall.rule.name.not.provided","azure.exception.datasource.recovery.server.name.not.provided","azure.exception.datasource.recovery.subscription.id.not.provided","azure.exception.datasource.recovery.key.store.file.not.provided","azure.exception.datasource.recovery.key.store.type.not.provided","azure.exception.datasource.key.error","azure.exception.datasource.auth.error","azure.exception.datasource.cannot.retrieve.database.list","azure.exception.datasource.cannot.ensure.firewall.rule","azure.exception.datasource.cannot.recover.datasource"];for(n=0;n<s.length;n++){var r=s[n];if(-1!==e.responseText.indexOf(r)){a=l[r];break}}return!!a&&(t=new i({modal:!0}),t.setMessage(a),t.open(),!0)},this.azureSqlDataSourceTree.observe("leaf:selected",function(i){var n=i.memo.node.param;if("leaf"===n.type&&!e){var a=n.extra;t.model.set({serverName:a.serverName,dbName:a.dBName,connectionUrlTemplate:a.jdbcTemplate,driverClass:a.jdbcDriver})}}),this.azureSqlDataSourceTree.observe("tree:loaded",function(){t.model.getFullDbTreePath()&&t.azureSqlDataSourceTree.openAndSelectNode(t.model.getFullDbTreePath(),function(){e=!1;var i=t.azureSqlDataSourceTree.getSelectedNode();i&&i.param&&i.param.extra&&t.model.set({connectionUrlTemplate:i.param.extra.jdbcTemplate,dbHost:i.param.extra.dnsAddress,dbPort:i.param.extra.dbPort})})})},remove:function(){this.azureSqlDataSourceTree&&this.azureSqlDataSourceTree.stopObserving(),n.prototype.remove.apply(this,arguments)}})}),define("dataSource/model/SubDataSourceModel",["require","backbone","underscore","bi/repository/model/RepositoryResourceModel","bundle!jasperserver_messages"],function(e){"use strict";var t=e("backbone"),i=(e("underscore"),e("bi/repository/model/RepositoryResourceModel")),n=e("bundle!jasperserver_messages");return t.Model.extend({defaults:{id:void 0,uri:"",name:"",readOnly:!1},idAttribute:"uri",validation:{id:[{required:!0,msg:n["ReportDataSourceValidator.error.not.empty.reportDataSource.name"]},{maxLength:i.settings.NAME_MAX_LENGTH,msg:n["ReportDataSourceValidator.error.too.long.reportDataSource.name"]},{startsWithLetter:!0,msg:n["ReportDataSourceValidator.error.invalid.chars.shouldStartWithLetter"]},{containsOnlyWordCharacters:!0,msg:n["ReportDataSourceValidator.error.invalid.chars.wordCharsOnly"]}]},initialize:function(e){this.set("name",/.*\/(.+)$/.exec(e.uri)[1])}})}),define("dataSource/collection/SubDataSourceCollection",["require","backbone","dataSource/model/SubDataSourceModel"],function(e){"use strict";var t=e("backbone"),i=e("dataSource/model/SubDataSourceModel");return t.Collection.extend({model:i,hasNonReadOnlyItems:function(){return this.some(function(e){return!e.get("readOnly")})}})}),define("dataSource/model/VirtualDataSourceModel",["require","dataSource/model/BaseDataSourceModel","dataSource/collection/SubDataSourceCollection","bi/repository/enum/repositoryResourceTypes","underscore","bundle!jasperserver_messages"],function(e){"use strict";var t=e("dataSource/model/BaseDataSourceModel"),i=e("dataSource/collection/SubDataSourceCollection"),n=e("bi/repository/enum/repositoryResourceTypes"),a=e("underscore"),s=e("bundle!jasperserver_messages");return t.extend({type:n.VIRTUAL_DATA_SOURCE,defaults:function(){var e={};return a.extend(e,t.prototype.defaults,{subDataSources:[]}),e}(),validation:function(){var e={};return a.extend(e,t.prototype.validation,{subDataSources:[{arrayMinLength:1,msg:s["ReportDataSourceValidator.error.sub.datasources.needed"]},{fn:function(e,t,i){var n=a.map(e,function(e){return e.id.toLowerCase()}),r={},o=[];a.each(n,function(e){e in r?r[e]++:r[e]=1});for(var l in r)r[l]>1&&o.push(l);if(o.length>0)return s["ReportDataSourceValidator.error.sub.datasources.id.duplicates"].replace("{0}",o.join(", "))}},{fn:function(){for(var e=null,t=0;t<this.subDataSources.models.length;t++)this.subDataSources.models[t].isValid(!0)||(e=!0);return e}}]}),e}(),initialize:function(e,n){t.prototype.initialize.apply(this,arguments),this.subDataSources=new i(this.get("subDataSources")),this.listenTo(this.subDataSources,"change reset",this.updateSubDataSourcesArray),
n.dependentResources&&n.dependentResources.length>0&&this.subDataSources.forEach(function(e){e.set("readOnly",!0)})},updateSubDataSourcesArray:function(){this.set("subDataSources",this.subDataSources.toJSON())}})}),dialogs.dependentResources={dependenciesPanel:null,show:function(e,t,i){this.dependenciesPanel=jQuery("#dependencies"),this._$title=this.dependenciesPanel.find(".content .header .title"),i.dialogTitle&&(this._titleBackup=this._$title.html(),this._$title.html(i.dialogTitle)),dialogs.popup.show(this.dependenciesPanel[0]),this._changeMessage(i),this._switchButtons(i);var n=this._initList(e);this.dependenciesPanel.on("click",function(e){var i=jQuery(e.target).closest("button").attr("id"),a=t&&t[i];_.include(["dependenciesBtnSave","dependenciesBtnSaveAs","dependenciesBtnOk","dependenciesBtnCancel"],i)&&(dialogs.dependentResources.hide(),n.setItems([]),e.stopPropagation(),a&&a())})},hide:function(){this.dependenciesPanel&&(this.dependenciesPanel.off("click"),dialogs.popup.hide(this.dependenciesPanel[0]),this.dependenciesPanel=null),this._titleBackup&&this._$title&&(this._$title.html(this._titleBackup),this._titleBackup=null)},_changeMessage:function(e){jQuery("#topMessage").html(e.topMessage),jQuery("#bottomMessage").html(e.bottomMessage)},_initList:function(e){var t=new dynamicList.List("dependenciesList",{listTemplateDomId:"tabular_oneColumn",itemTemplateDomId:"tabular_oneColumn:leaf"}),i=[];return e&&(i=e.collect(function(e){var t=new dynamicList.ListItem({cssClassName:layoutModule.LEAF_CLASS,value:e});return t.processTemplate=function(e){var t,i=e.select(".uri")[0];return t="string"==typeof this.getValue()?this.getValue():this.getValue().uristring?this.getValue().uristring:this.getValue().URIString,i.update(xssUtil.hardEscape(t)),e},t})),t.setItems(i),t.show(),t},_switchButtons:function(e){var t,i={save:jQuery("#dependenciesBtnSave"),saveAs:jQuery("#dependenciesBtnSaveAs"),ok:jQuery("#dependenciesBtnOk"),cancel:jQuery("#dependenciesBtnCancel")};t=e.buttons?e.buttons:e.okOnly?["ok"]:e.canSave?["save","saveAs","cancel"]:["ok","cancel"],_.each(i,function(e,i){t.indexOf(i)<0?e.addClass("hidden"):e.removeClass("hidden")})}},define("components.dependent.dialog",["prototype","components.dialogs","jquery","components.list"],function(e){return function(){return e.dialogs.dependentResources}}(this)),define("text!dataSource/template/virtualSpecificTemplate.htm",[],function(){return'<fieldset class="group">\n\n    <js-templateNonce></js-templateNonce>\n    <input type="hidden" name="subDataSources" value=""/>\n    <span class="message warning"></span>\n</fieldset>\n<fieldset class="group">\n    <div style="position:relative" class="content" id="dataSourcesSelector">\n        <div class="body twoColumn_equal pickWells" id="subDsSelectionContainer">\n            <div class="moveButtons" id="moveButtons">\n                <button title="{{- i18n[\'resource.moveRight\'] }}" class="button action square move right up"\n                        disabled="disabled" name="toRight"><span class="wrap">{{- i18n["resource.moveRight"] }}<span\n                        class="icon"></span></span></button>\n                <button title="{{- i18n[\'resource.moveLeft\'] }}" class="button action square move left up"\n                        disabled="disabled" name="toLeft"><span class="wrap">{{- i18n["resource.moveLeft"] }}<span\n                        class="icon"></span></span></button>\n                <button title="{{- i18n[\'resource.moveAllLeft\'] }}" class="button action square move toLeft up"\n                        disabled="disabled" name="allToLeft"><span class="wrap">{{- i18n["resource.moveAllLeft"] }}<span\n                        class="icon"></span></span></button>\n            </div>\n\n            <div class="column secondary" id="availableDataSources">\n                <label for="subDataSourcesTree" class="control">\n                    <span class="wrap">{{- i18n["resource.dataSource.virtual.availableDataSources"] }}</span>\n                    <br>\n\n                    <div class="control groupBox">\n                        <div class="content ">\n                            <div class="header ">\n                                <div class="title"></div>\n                            </div>\n                            <div class="body  ">\n                                <ul class="list collapsible folders" id="subDataSourcesTree"></ul>\n                            </div>\n                        </div>\n                    </div>\n                </label>\n            </div>\n\n            <div class="column primary" id="selectedDataSources">\n                <label for="selectedSubDataSourcesList" class="control">\n                    <span class="wrap">{{- i18n["resource.dataSource.virtual.selectedDataSources"] }}</span>\n                    <br>\n\n                    <div class="content">\n                        <ul class="list tabular twoColumn header" id="selectedDataSourcesHeader">\n                            <li>\n                                <div class="wrap">\n                                    <div class="column one">\n                                        <p class="dataSourceName">{{- i18n["resource.dataSource.name"] }}</p>\n                                    </div>\n                                    <div class="column two">\n                                        <p class="dataSourceID">{{- i18n["resource.dataSource.virtual.subDsId"] }}</p>\n                                    </div>\n                                </div>\n                            </li>\n                        </ul>\n                        <div id="selectedSubDataSourcesListContainer">\n                            <ol class="list tabular twoColumn" id="selectedSubDataSourcesList"></ol>\n                        </div>\n                    </div>\n                </label>\n            </div>\n        </div>\n    </div>\n</fieldset>'}),define("text!dataSource/template/dialog/dependenciesTemplate.htm",[],function(){return'<div id="dependencies" class="panel dialog overlay dependencies sizeable moveable hidden centered_vert centered_horz">\n\n    <js-templateNonce></js-templateNonce>\n    <div class="sizer diagonal"></div>\n    <div class="content hasFooter ">\n        <div class="header mover">\n            <div class="title">{{- i18n["dialog.dependencies.title"] }}</div>\n        </div>\n        <div class="body">\n            <p id="topMessage"></p>\n\n            <div class="control groupBox">\n                <ul id="dependenciesList"></ul>\n            </div>\n            <p id="bottomMessage" class="saveMessage"></p>\n        </div>\n        <div class="footer ">\n            <button id="dependenciesBtnSave" class="button action primary up">\n                <span class="wrap">{{- i18n["button.save"] }}</span>\n                <span class="icon"></span>\n            </button>\n            <button id="dependenciesBtnSaveAs" class="button action primary up">\n                <span class="wrap">{{- i18n["button.saveAs"] }}</span>\n                <span class="icon"></span>\n            </button>\n            <button id="dependenciesBtnOk" class="button action primary up">\n                <span class="wrap">{{- i18n["button.ok"] }}</span>\n                <span class="icon"></span>\n            </button>\n            <button id="dependenciesBtnCancel" class="button action up">\n                <span class="wrap">{{- i18n["button.cancel"] }}</span>\n                <span class="icon"></span>\n            </button>\n        </div>\n    </div>\n</div>'}),define("text!dataSource/template/subDataSourceItemTemplate.htm",[],function(){return'<li class="leaf">\n\n    <js-templateNonce></js-templateNonce>\n    <div class="wrap button {{ if (readOnly) { }}disabled{{ } }}">\n        <div class="column one">\n            <p class="dataSourceName">{{- name }}</p>\n        </div>\n        <div class="column two">\n            <input type="text" size="30" class="dataSourceID" value="{{- id }}" {{ if (readOnly) { }}readonly="true"{{ } }}>\n            <div class="wrap validatorMessageContainer">\n                <span class="message warning"></span>\n            </div>\n        </div>\n    </div>\n</li>'}),define("dataSource/view/SubDataSourceItemView",["require","backbone","jquery","underscore","core.layout","components.list","common/util/featureDetection","text!dataSource/template/subDataSourceItemTemplate.htm","backbone.validation"],function(e){"use strict";var t=e("backbone"),i=e("jquery"),n=(e("underscore"),e("core.layout")),a=e("components.list"),s=(e("common/util/featureDetection"),e("text!dataSource/template/subDataSourceItemTemplate.htm")),r=e("backbone.validation");return t.View.extend({events:{"keyup input[type='text']":"updateDataSourceId","change input[type='text']":"updateDataSourceId"},initialize:function(e){var t=this.model.toJSON();this._listItem=new a.UnderscoreTemplatedListItem({template:s,cssClassName:n.LEAF_CLASS,value:t,tooltipText:this.model.get("uri")}),r.bind(this,{valid:this.fieldIsValid,invalid:this.fieldIsInvalid,forceUpdate:!0})},updateDataSourceId:function(e){var t=this.$("input[type='text']"),n={};n.id=i.trim(t.val()),this.model.set(n),this.model.validate(n),this._listItem.setValue(this.model.toJSON())},getListItem:function(){return this._listItem},setRootElement:function(){this.setElement(this._listItem._getElement())},fieldIsValid:function(e,t,i){var n=e.$("input[type='text']").parent();n.removeClass("error"),n.find(".validatorMessageContainer").removeClass("error"),n.find(".message.warning").text("")},fieldIsInvalid:function(e,t,i,n){var a=e.$("input[type='text']").parent();a.addClass("error"),a.find(".validatorMessageContainer").addClass("error"),a.find(".message.warning").text(i)}})}),define("text!dataSource/template/subDataSourcesListTemplate.htm",[],function(){return'<ul id="selectedDataSourcesTemplate" class="list tabular twoColumn">\n\n    <js-templateNonce></js-templateNonce>\n</ul>'}),define("dataSource/view/SubDataSourcesListView",["require","backbone","underscore","components.list","dataSource/view/SubDataSourceItemView","common/util/featureDetection","text!dataSource/template/subDataSourcesListTemplate.htm","utils.common"],function(e){"use strict";var t=e("backbone"),i=e("underscore"),n=e("components.list"),a=e("dataSource/view/SubDataSourceItemView"),s=e("common/util/featureDetection"),r=e("text!dataSource/template/subDataSourcesListTemplate.htm");return e("utils.common"),t.View.extend({events:{"blur input.dataSourceID":"disableSelection","focus input.dataSourceID":"enableSelection"},initialize:function(e){this.options=e,this.subviews=[],this._list=new n.UnderscoreTemplatedList("selectedSubDataSourcesList",{template:r,dragPattern:"",multiSelect:!0,selectOnMousedown:!s.supportsTouch}),this._list.observe("item:unselected",i.bind(this._itemUnselected,this)),this._list.observe("item:selected",i.bind(this._itemSelected,this)),this.setElement("#selectedSubDataSourcesList",!1),this.listenTo(this.collection,"reset",this.render)},disableSelection:function(){disableSelectionWithoutCursorStyle(this._list._getElement())},enableSelection:function(){enableSelection(this._list._getElement())},_itemUnselected:function(e){var t=this.getSubviewByListItem(e.memo.item),i=t?t.model:null;this.trigger("item:unselected",i)},_itemSelected:function(e){var t=this.getSubviewByListItem(e.memo.item),i=t?t.model:null;this.trigger("item:selected",i)},render:function(e,t){this._list.resetSelected();var n=[],s=[],r=[],o=!1,l=this.collection.map(function(e){return e.get("uri")}),c=this;if(t&&t.previousModels&&(r=i.map(t.previousModels,function(e){return e.get("uri")}),i.each(t.previousModels,function(e){i.include(l,e.get("uri"))||s.push(e)}),o=!0),this.collection.forEach(function(e){i.include(r,e.get("uri"))||n.push(e)}),n.length){if(i.each(n,function(e){var t=new a({model:e});c.subviews.push(t),c._list.addItems([t.getListItem()]),c._list.show()}),this._list.show(),o){var d=i.compact(i.map(n,i.bind(c.getSubviewByModel,c)));i.each(d,function(e){c._list.selectItem(e.getListItem(),!0)})}i.each(this.subviews,function(e){i.defer(i.bind(e.setRootElement,e))})}return s.length&&(i.each(s,function(e){c.removeSubview(e)}),this._list.show()),this},getSubviewByModel:function(e){return i.find(this.subviews,function(t){return t.model===e})},getList:function(){return this._list},getListLength:function(){return this._list._items.length},getSelectedModels:function(){var e=this._list.getSelectedItems(),t=i.compact(i.map(e,i.bind(this.getSubviewByListItem,this)));return i.map(t,function(e){return e.model})},getSubviewByListItem:function(e){return i.find(this.subviews,function(t){return t.getListItem()===e})},removeSubview:function(e){var t=this.getSubviewByModel(e);t&&(this._list.removeItems([t.getListItem()]),t.remove(),this._list.show())},removeSubviews:function(){var e=i.map(this.subviews,function(e){return e.getListItem()});this._list.removeItems(e),i.invoke(this.subviews,"remove")},remove:function(){this.removeSubviews(),t.View.prototype.remove.apply(this,arguments)}})}),define("dataSource/view/VirtualDataSourceView",["require","underscore","dataSource/view/BaseDataSourceView","dataSource/model/VirtualDataSourceModel","dataSource/model/SubDataSourceModel","dynamicTree.utils","components.dependent.dialog","common/util/featureDetection","bundle!jasperserver_messages","text!dataSource/template/virtualSpecificTemplate.htm","text!dataSource/template/dialog/dependenciesTemplate.htm","dataSource/view/SubDataSourcesListView"],function(e){"use strict";var t=e("underscore"),i=e("dataSource/view/BaseDataSourceView"),n=e("dataSource/model/VirtualDataSourceModel"),a=e("dataSource/model/SubDataSourceModel"),s=e("dynamicTree.utils"),r=e("components.dependent.dialog"),o=(e("common/util/featureDetection"),e("bundle!jasperserver_messages")),l=e("text!dataSource/template/virtualSpecificTemplate.htm"),c=e("text!dataSource/template/dialog/dependenciesTemplate.htm"),d=e("dataSource/view/SubDataSourcesListView");return i.extend({PAGE_TITLE_NEW_MESSAGE_CODE:"resource.datasource.virtual.page.title.new",PAGE_TITLE_EDIT_MESSAGE_CODE:"resource.datasource.virtual.page.title.edit",hasDependedResources:!1,modelConstructor:n,events:{"keyup input[type='text'][class!='dataSourceID'], textarea":"updateModelProperty","change input[type='text'][class!='dataSourceID'], textarea, select":"updateModelProperty","click [name=toRight]":"chooseTreeNodes","click [name=toLeft]":"removeSelectedSubDataSources","click [name=allToLeft]":"removeAllSubDataSources"},initialize:function(e){this.dependentResources=e.dependentResources,this._subDataSourcesHiddenNodes={},this.dependentResources&&this.dependentResources.length>0&&(this.hasDependedResources=!0),i.prototype.initialize.apply(this,arguments),this.showDependentResources(),this.listenTo(this.model.subDataSources,"reset",this.updateAllToLeftButtonState)},chooseTreeNodes:function(e){e.preventDefault(),this.$("[name=toRight]").attr("disabled","disabled").removeClass("over");var i=this.subDataSourcesTree.selectedNodes,n=t.compact(t.map(i,function(e){return e?new a({name:e.name,id:e.param.id,uri:e.param.uri,readOnly:!1}):null}));this.model.subDataSources.reset(this.model.subDataSources.models.concat(n));var s=t.map(i,function(e){return e.param.uri});this._hideAvailableSubDataSources(s)},removeAllSubDataSources:function(e){if(e.preventDefault(),!this.hasDependedResources){this.subDataSourcesTree._deselectAllNodes();var t=this;this.model.subDataSources.forEach(function(e){t._unhideAvailableSubDataSources(e.get("uri"))}),this.model.subDataSources.reset([]),this.updateRightButtonState()}},removeSelectedSubDataSources:function(e){e.preventDefault(),this.subDataSourcesTree._deselectAllNodes();var i=this.selectedSubDataSourcesList.getSelectedModels(),n=this,a=[];t.each(i,function(e){n._unhideAvailableSubDataSources(e.get("uri"))}),this.model.subDataSources.forEach(function(e){t.include(i,e)||a.push(e)}),this.model.subDataSources.reset(a),this.updateRightButtonState()},updateAllToLeftButtonState:function(){this.hasDependedResources||0===this.selectedSubDataSourcesList.getListLength()?this.$("[name=allToLeft]").attr("disabled","disabled").removeClass("over"):this.$("[name=allToLeft]").removeAttr("disabled")},updateRightButtonState:function(){for(var e=this.$("[name=toRight]"),t=this.subDataSourcesTree.selectedNodes,i=!1,n=!1,a=0;a<t.length;a++){if(t[a].isParent()||this.model.subDataSources.where({uri:t[a].param.uri}).length){n=!0;break}i=!0}i&&!n?e.removeAttr("disabled"):e.attr("disabled","disabled").removeClass("over")},updateLeftButtonState:function(){var e=this.selectedSubDataSourcesList.getSelectedModels(),t=this.$("[name=toLeft]");e.length>0?t.removeAttr("disabled"):t.attr("disabled","disabled").removeClass("over")},render:function(){return this.$el.empty(),this.renderVirtualSpecificSection(),this.updateAllToLeftButtonState(),this},showDependentResources:function(){this.hasDependedResources&&r.show(this.dependentResources,{},{canSave:!1,okOnly:!0,topMessage:o["resource.dataSource.virtual.dependencies.top.message"],bottomMessage:o["resource.dataSource.virtual.dependencies.bottom.message"]})},renderVirtualSpecificSection:function(){var e=this,i=function(){e._hideAvailableSubDataSources(e.model.subDataSources.map(function(e){return e.get("uri")}))};this.$el.append(t.template(l,this.templateData())),this.$el.append(t.template(c,this.templateData())),this.selectedSubDataSourcesList=new d({collection:this.model.subDataSources}),this.listenTo(this.selectedSubDataSourcesList,"item:unselected item:selected",t.bind(this.updateLeftButtonState,this)),this.selectedSubDataSourcesList.render(),this.subDataSourcesTree=s.createRepositoryTree("subDataSourcesTree",{treeId:"subDataSourcesTree",providerId:"joinableDsTreeDataProvider",selectLeavesOnly:!0,multiSelectEnabled:!0}),this.subDataSourcesTree.observe("leaf:dblclick",t.bind(this.chooseTreeNodes,this)),this.subDataSourcesTree.observe("node:selected",t.bind(this.updateRightButtonState,this)),this.subDataSourcesTree.observe("node:unselected",t.bind(this.updateRightButtonState,this)),this.subDataSourcesTree.observe("leaf:selected",t.bind(this.updateRightButtonState,this)),this.subDataSourcesTree.observe("leaf:unselected",t.bind(this.updateRightButtonState,this)),this.subDataSourcesTree.observe("children:loaded",i),this.subDataSourcesTree.showTreePrefetchNodes(this.model.subDataSources.map(function(e){return e.get("uri")}).join(","),i)},_hideAvailableSubDataSources:function(e){var i=this;if(t.isArray(e))t.each(e,function(e){i._hideAvailableSubDataSources(e)});else{var n=this.subDataSourcesTree.findLastLoadedNode(e);if(n&&n.param.uri===e){this._subDataSourcesHiddenNodes[e]={parent:n.parent,child:n};var a=n.parent;a.removeChild(n),a.resortChilds()}}},_unhideAvailableSubDataSources:function(e){function i(e,t){e.processNodePath(t,function(i){i.parent&&(e.rootNode!=i.parent&&e.getState(i.parent.id)==s.TreeNode.State.CLOSED&&i.parent.handleNode(),i.param.uri===t&&i.select())})}var n=this,a=[];t.each(t.isArray(e)?e:[e],function(e){var t=n._subDataSourcesHiddenNodes[e];t?(t.parent.addChild(t.child),t.parent.resortChilds(),t.parent.refreshNode(),i(n.subDataSourcesTree,e)):a.push(e)}),a.length&&this.subDataSourcesTree.showTreePrefetchNodes(a.join(","),function(){t.each(a,t.bind(i,this,n.subDataSourcesTree))})},remove:function(){this.selectedSubDataSourcesList&&this.selectedSubDataSourcesList.remove(),i.prototype.remove.apply(this,arguments)}})}),define("dataSource/model/BeanDataSourceModel",["require","dataSource/model/BaseDataSourceModel","dataSource/enum/connectionTypes","bi/repository/enum/repositoryResourceTypes","underscore","bundle!jasperserver_messages"],function(e){"use strict";var t=e("dataSource/model/BaseDataSourceModel"),i=e("dataSource/enum/connectionTypes"),n=e("bi/repository/enum/repositoryResourceTypes"),a=e("underscore"),s=e("bundle!jasperserver_messages");return t.extend({type:n.BEAN_DATA_SOURCE,defaults:function(){var e={};return a.extend(e,t.prototype.defaults,{beanName:"",beanMethod:"",connectionType:i.BEAN}),e}(),validation:function(){var e={};return a.extend(e,t.prototype.validation,{beanName:[{required:!0,msg:s["ReportDataSourceValidator.error.not.empty.reportDataSource.beanName"]}],beanMethod:[{required:!0,msg:s["ReportDataSourceValidator.error.not.empty.reportDataSource.beanMethod"]}]}),e}()})}),define("text!dataSource/template/beanSpecificTemplate.htm",[],function(){return'<fieldset class="group shortFields">\n\n    <js-templateNonce></js-templateNonce>\n\n    <legend class="offLeft"><span></span></legend>\n\n    <label title="{{- i18n[\'resource.dataSource.bean.name\'] }}" class="control input text">\n        <span class="wrap">{{- i18n["resource.dataSource.bean.name"]}} ({{- i18n[\'required.field\']}}):</span>\n        <input type="text" value="{{- modelAttributes.beanName }}" name="beanName">\n        <span class="message warning"></span>\n        <span class="message hint">{{- i18n["resource.dataSource.bean.hint1"]}}</span>\n    </label>\n\n    <label title="{{- i18n[\'resource.dataSource.bean.method\'] }}" class="control input text">\n        <span class="wrap">{{- i18n["resource.dataSource.bean.method"]}} ({{- i18n[\'required.field\']}}):</span>\n        <input type="text" value="{{- modelAttributes.beanMethod }}" name="beanMethod">\n        <span class="message warning"></span>\n        <span class="message hint">{{- i18n["resource.dataSource.bean.hint2"]}}</span>\n    </label>\n\n</fieldset>'}),define("dataSource/view/BeanDataSourceView",["require","underscore","dataSource/view/BaseDataSourceView","dataSource/model/BeanDataSourceModel","text!dataSource/template/beanSpecificTemplate.htm"],function(e){"use strict";var t=e("underscore"),i=e("dataSource/view/BaseDataSourceView"),n=e("dataSource/model/BeanDataSourceModel"),a=e("text!dataSource/template/beanSpecificTemplate.htm");return i.extend({PAGE_TITLE_NEW_MESSAGE_CODE:"resource.datasource.bean.page.title.new",PAGE_TITLE_EDIT_MESSAGE_CODE:"resource.datasource.bean.page.title.edit",modelConstructor:n,render:function(){return this.$el.empty(),this.renderBeanSpecificSection(),this.renderTestConnectionSection(),this},renderBeanSpecificSection:function(){this.$el.append(t.template(a,this.templateData()))}})}),define("text!dataSource/template/mongoDbSpecificTemplate.htm",[],function(){return'<fieldset name="customFieldsContainer" class="group shortFields">\n\n    <js-templateNonce></js-templateNonce>\n\n\t<legend class="offLeft"><span>Access Properties</span></legend>\n\n\n\n\n\t<label title="MongoDB URI (required)" class="control input text">\n\t\t<span class="wrap">{{- i18n[\'MongoDbDataSource.properties.mongoURI\'] }} ({{- i18n[\'required.field\']}}):</span>\n\t\t<input name="mongoURI" type="text" size="40" class="fnormal" value="{{- modelAttributes.mongoURI }}">\n\t\t<span class="message hint"></span>\n\t\t<span class="message warning"></span>\n\t</label>\n\n\n\t<label title="User Name (optional)" class="control input text">\n\t\t<span class="wrap">{{- i18n[\'MongoDbDataSource.properties.username\'] }} ({{- i18n[\'optional.field\']}}):</span>\n\t\t<input name="username" type="text" size="40" class="fnormal" value="{{- modelAttributes.username }}">\n\t\t<span class="message hint"></span>\n\t\t<span class="message warning"></span>\n\t</label>\n\n\t<label title="Password (optional)" class="control input text">\n\t\t<span class="wrap">{{- i18n[\'MongoDbDataSource.properties.password\'] }} ({{- i18n[\'optional.field\']}}):</span>\n\t\t<input name="password" type="password" size="40" class="fnormal" value="{{- modelAttributes.password }}">\n\t\t<span class="message hint"></span>\n\t\t<span class="message warning"></span>\n\t</label>\n\n</fieldset>'}),define("dataSource/view/MongoDbDataSourceView",["require","underscore","dataSource/view/CustomDataSourceView","text!dataSource/template/mongoDbSpecificTemplate.htm"],function(e){"use strict";var t=e("underscore"),i=e("dataSource/view/CustomDataSourceView"),n=e("text!dataSource/template/mongoDbSpecificTemplate.htm");return i.extend({PAGE_TITLE_NEW_MESSAGE_CODE:"resource.datasource.mongo.page.title.new",PAGE_TITLE_EDIT_MESSAGE_CODE:"resource.datasource.mongo.page.title.edit",render:function(){return this.$el.empty(),this.renderMongoDbSpecificSection(),this.renderTestConnectionSection(),this},renderMongoDbSpecificSection:function(){this.$el.append(t.template(n,this.templateData()))}})}),define("dataSource/enum/mongoJdbcFileSourceTypes",{REPOSITORY:{name:"repository",label:"resource.datasource.text.fileLocation.options.repository"},SERVER_FILE_SYSTEM:{name:"serverFileSystem",label:"resource.datasource.text.fileLocation.options.serverFileSystem"}}),define("restResource",["require","request","requestSettings","underscore","jrs.configs"],function(e){"use strict";var t=e("request"),i=e("requestSettings"),n=e("underscore"),a=e("jrs.configs"),s=a.contextPath+"/rest_v2/",r=function(e,a){var r=n.extend({},i,{type:"GET",dataType:"json",url:s+e});t(r).fail(function(){a(null)}).then(function(e){a(e)})};return r.load=function(e,t,i,n){if(n.isBuild)return void i();r(e,i)},r}),define("dataSource/model/MongoDbJdbcDataSourceModel",["require","dataSource/model/CustomDataSourceModel","dataSource/enum/connectionTypes","dataSource/enum/mongoJdbcFileSourceTypes","bi/repository/enum/repositoryResourceTypes","restResource!hypermedia/workflows?parentName=admin","underscore","bundle!jasperserver_messages"],function(e){"use strict";var t=e("dataSource/model/CustomDataSourceModel"),i=(e("dataSource/enum/connectionTypes"),e("dataSource/enum/mongoJdbcFileSourceTypes")),n=(e("bi/repository/enum/repositoryResourceTypes"),e("restResource!hypermedia/workflows?parentName=admin")),a=e("underscore"),s=e("bundle!jasperserver_messages"),r=t.extend({fileTypes:["pdf","config"],defaults:function(){var e={};return a.extend(e,t.prototype.defaults,{dataSourceName:"mongoDbJDBCDataSource",fileSourceType:"repository",timeZone:""}),e}(),validation:function(){var e={};return a.extend(e,t.prototype.validation,{serverAddress:[{required:!0,msg:s["ReportDataSourceValidator.error.not.empty.host"]}],portNumber:[{required:!0,msg:s["ReportDataSourceValidator.error.not.empty.server.port"]}],repositoryFileName:[{fn:function(e,t,i){return!i.autoSchemaDefinition&&"repository"===i.fileSourceType&&(a.isNull(e)||a.isUndefined(e)||a.isString(e)&&""===e)?s["fillParameters.error.mandatoryField"]:null}},{fn:function(e,t,i){return i.autoSchemaDefinition||"repository"!==i.fileSourceType||a.isString(e)&&""!==e&&0===e.indexOf("/")?null:s["resource.file.invalid.path"]}}],serverFileName:[{fn:function(e,t,i){return!i.autoSchemaDefinition&&"serverFileSystem"===i.fileSourceType&&(a.isNull(e)||a.isUndefined(e)||a.isString(e)&&""===e)?s["fillParameters.error.mandatoryField"]:null}}]}),e}(),isLocalFileSystemAccessAllowed:function(){return n&&n._embedded&&n._embedded.workflow&&a.find(n._embedded.workflow,function(e){return"serverSettings"===e.name})},parse:function(){var e=t.prototype.parse.apply(this,arguments);if(a.isString(e.fileName)){if(-1!==e.fileName.indexOf("repo:")){var n=e.fileName.split(":");e.fileSourceType=i.REPOSITORY.name,e.repositoryFileName=n[1]}else e.fileSourceType=i.SERVER_FILE_SYSTEM.name,e.serverFileName=e.fileName;delete e.fileName,e.autoSchemaDefinition=!1}else e.autoSchemaDefinition=!0;return e.timezone=e.timeZone,delete e.timeZone,e},toJSON:function(){var e=t.prototype.toJSON.apply(this,arguments);return e.fileName=e.serverFileName,e},customFieldsToJSON:function(e,n){return e.fileSourceType===i.REPOSITORY.name?e.fileName="repo:"+e.repositoryFileName:e.fileSourceType===i.SERVER_FILE_SYSTEM.name&&(e.fileName=e.serverFileName),delete e.repositoryFileName,delete e.serverFileName,e.autoSchemaDefinition&&(delete e.fileName,delete e.fileSourceType),delete e.autoSchemaDefinition,e.timeZone=e.timezone,delete e.timezone,e=t.prototype.customFieldsToJSON.call(this,e,n)},resetValidation:function(){this.validation=a.clone(r.prototype.validation)}});return r}),define("text!dataSource/template/mongoDbJdbcSpecificTemplate.htm",[],function(){return'<fieldset class="group shortFields mongoDbJdbcSpecificFields">\n\n    <js-templateNonce></js-templateNonce>\n\n\t<legend class="offLeft"><span></span></legend>\n\n\t<label title="{{- i18n[\'resource.datasource.mongoJdbc.host\'] }}" class="control input text">\n\t\t<span class="wrap">{{- i18n["resource.datasource.mongoJdbc.host"]}} ({{- i18n[\'required.field\']}}):</span>\n\t\t<input type="text" value="{{- modelAttributes.serverAddress }}" name="serverAddress">\n\t\t<span class="message warning"></span>\n\t\t<span class="message hint"></span>\n\t</label>\n\n\t<label title="{{- i18n[\'resource.datasource.mongoJdbc.port.number\'] }}" class="control input text">\n\t\t<span class="wrap">{{- i18n["resource.datasource.mongoJdbc.port.number"]}} ({{- i18n[\'required.field\']}}):</span>\n\t\t<input type="text" value="{{- modelAttributes.portNumber }}" name="portNumber">\n\t\t<span class="message warning"></span>\n\t\t<span class="message hint"></span>\n\t</label>\n\n\t<label title="{{- i18n[\'resource.datasource.mongoJdbc.database.name\'] }}" class="control input text">\n\t\t<span class="wrap">{{- i18n["resource.datasource.mongoJdbc.database.name"]}}:</span>\n\t\t<input type="text" value="{{- modelAttributes.database }}" name="database">\n\t\t<span class="message warning"></span>\n\t\t<span class="message hint"></span>\n\t</label>\n\n\t<label title="{{- i18n[\'resource.datasource.mongoJdbc.user.name\'] }}" class="control input text">\n\t\t<span class="wrap">{{- i18n["resource.datasource.mongoJdbc.user.name"]}}:</span>\n\t\t<input type="text" value="{{- modelAttributes.username }}" name="username">\n\t\t<span class="message warning"></span>\n\t\t<span class="message hint"></span>\n\t</label>\n\n\t<label title="{{- i18n[\'resource.datasource.mongoJdbc.password\'] }}" class="control input text">\n\t\t<span class="wrap">{{- i18n["resource.datasource.mongoJdbc.password"]}}:</span>\n\t\t<input type="password" value="{{- modelAttributes.password }}" name="password">\n\t\t<span class="message warning"></span>\n\t\t<span class="message hint"></span>\n\t</label>\n\n\t<label title="{{- i18n[\'resource.datasource.mongoJdbc.connection.options\'] }}" class="control input text">\n\t\t<span class="wrap">{{- i18n["resource.datasource.mongoJdbc.connection.options"]}}:</span>\n\t\t<input type="text" value="{{- modelAttributes.connectionOptions }}" name="connectionOptions">\n\t\t<span class="message warning"></span>\n\t\t<span class="message hint"></span>\n\t</label>\n\n\t<div class="control checkBox">\n\t\t<label for="__jrs_autoSchemaDefinitionCheckbox" title="{{- i18n[\'resource.datasource.mongoJdbc.schema.auto.generate\']}}" class="wrap">\n\t\t\t{{- i18n[\'resource.datasource.mongoJdbc.schema.auto.generate\']}}\n\t\t</label>\n\t\t<input type="checkbox" id="__jrs_autoSchemaDefinitionCheckbox" name="autoSchemaDefinition" {{ if (modelAttributes.autoSchemaDefinition) { }}checked{{ } }} {{- isEditMode ? \'disabled=disabled\' : \'\'}} >\n\t</div>\n\n\t<div name="fileLocationContainer" class="section"></div>\n</fieldset>'}),define("text!dataSource/template/mongoDbJdbcFileLocationSectionTemplate.htm",[],function(){
return'<div name="fileLocationContainer" class="">\n\n    <js-templateNonce></js-templateNonce>\n\n\t{{ if (_.keys(fileSourceTypeOptions).length > 1) { }}\n\t<div class="">\n\t\t<label title="{{- i18n[\'resource.datasource.mongoJdbc.fileLocation.source\'] }}" class="control select">\n\t\t\t<span class="wrap">{{- i18n[\'resource.datasource.mongoJdbc.fileLocation.source\'] }}:</span>\n\t\t\t<select id="fileSourceSelect" name="fileSourceType" {{- (isEditMode || modelAttributes.autoSchemaDefinition) ? \'disabled=disabled\' : \'\'}}>\n\t\t\t{{ _.each(fileSourceTypeOptions, function(item) { }}\n\t\t\t\t<option value="{{- item.name }}" {{- (item.name == modelAttributes.fileSourceType) ? "selected=selected" : "" }} > {{- i18n[item.label] }}</option>\n\t\t\t{{ }); }}\n\t\t\t</select>\n\t\t\t<span class="message warning"></span>\n\t\t</label>\n\t</div>\n    {{ } }}\n\n\t{{ if (modelAttributes.fileSourceType === "repository") { }}\n\n\t<div id="repositoryInput" class="">\n\t\t<label title="{{- i18n[\'resource.datasource.mongoJdbc.fileLocation.repository.fileLocation\']}}" class="control input text">\n\t\t\t<span class="wrap">{{- i18n[\'resource.datasource.mongoJdbc.fileLocation.repository.fileLocation\']}}{{ if (!modelAttributes.autoSchemaDefinition) { }} ({{- i18n[\'required.field\']}}){{ } }}:</span>\n\t\t\t<input type="text" value="{{- modelAttributes.repositoryFileName }}" name="repositoryFileName" {{- (isEditMode || modelAttributes.autoSchemaDefinition) ? \'disabled=disabled\' : \'\'}}>\n\t\t\t<button class="button action" type="button" name="repositoryBrowserButton"  {{- isEditMode || modelAttributes.autoSchemaDefinition ? \'disabled=disabled\' : \'\'}}>\n\t\t\t       <span class="wrap">{{- i18n[\'dialog.file.browse\'] }}...<span class="icon"></span></span>\n\t\t\t</button>\n\t\t\t<span class="message warning"></span>\n\t\t</label>\n\t</div>\n\n\t{{ } else { }}\n\n\t<div id="serverInput" class="">\n\t\t<label title="{{- i18n[\'resource.datasource.mongoJdbc.fileLocation.serverFileSystem.fileLocation\']}}" class="control browser">\n\t\t\t<span class="wrap">{{- i18n[\'resource.datasource.mongoJdbc.fileLocation.serverFileSystem.fileLocation\']}}{{ if (!modelAttributes.autoSchemaDefinition) { }} ({{- i18n[\'required.field\']}}){{ } }}:</span>\n\t\t\t<input type="text" value="{{- modelAttributes.serverFileName }}" name="serverFileName" {{- (isEditMode || modelAttributes.autoSchemaDefinition) ? \'disabled=disabled\' : \'\'}}>\n\t\t\t<span class="message warning"></span>\n\t\t</label>\n\t</div>\n\n\t{{ } }}\n</div>'}),define("dataSource/view/MongoDbJdbcDataSourceView",["require","underscore","jquery","bundle!all","resource.locate","dataSource/enum/mongoJdbcFileSourceTypes","dataSource/view/CustomDataSourceView","dataSource/model/MongoDbJdbcDataSourceModel","text!dataSource/template/mongoDbJdbcSpecificTemplate.htm","text!dataSource/template/mongoDbJdbcFileLocationSectionTemplate.htm","text!common/templates/components.pickers.htm"],function(e){"use strict";var t=e("underscore"),i=e("jquery"),n=e("bundle!all"),a=e("resource.locate"),s=e("dataSource/enum/mongoJdbcFileSourceTypes"),r=e("dataSource/view/CustomDataSourceView"),o=e("dataSource/model/MongoDbJdbcDataSourceModel"),l=e("text!dataSource/template/mongoDbJdbcSpecificTemplate.htm"),c=e("text!dataSource/template/mongoDbJdbcFileLocationSectionTemplate.htm"),d=e("text!common/templates/components.pickers.htm");return r.extend({PAGE_TITLE_NEW_MESSAGE_CODE:"resource.datasource.mongoJdbc.page.title.new",PAGE_TITLE_EDIT_MESSAGE_CODE:"resource.datasource.mongoJdbc.page.title.edit",modelConstructor:o,browseButton:!1,events:function(){var e=t.extend({},r.prototype.events);return e["change [name=fileSourceType]"]="changeFileSourceType",e["change [name=autoSchemaDefinition]"]="changeAutoSchemaDefinition",e},initialize:function(e){r.prototype.initialize.apply(this,arguments),this.listenTo(this.model,"change:serverFileName",this.adjustFileSystemConnectButton)},changeFileSourceType:function(){t.defer(t.bind(function(){this.renderFileLocationSection()},this))},changeAutoSchemaDefinition:function(){t.defer(t.bind(function(){this.renderFileLocationSection()},this))},render:function(){return this.$el.empty(),this.renderMongoDbSpecificSection(),this.renderFileLocationSection(),this.renderTimezoneSection(),this.renderTestConnectionSection(),this.$el.find("[name=serverAddress]").focus(),this},validationMethodOnSaveClick:function(e){!this.model.get("parentFolderUri")&&this.model.set("parentFolderUri","/"),!this.model.get("label")&&this.model.set("label",i("[name=dataSourceType] option:selected").text());var a=this;this.model.save({},{dryRun:!0}).fail(function(e){var i=!1;try{i=JSON.parse(e.responseText)}catch(e){}var s=t.isArray(i)?i:[i];t.each(s,function(e){e&&e.errorCode&&e.parameters&&("illegal.parameter.value.error"===e.errorCode&&"resourceReference.uri"===e.parameters[0]?a.fieldIsInvalid(a,"repositoryFileName",n["resource.file.invalid.path"],"name"):"invalid.server.file.system.path"===e.errorCode&&"textDataSource.propertyMap[fileName]"===e.parameters[0]&&a.fieldIsInvalid(a,"serverFileName",n["resource.file.invalid.path"],"name"))})}).done(e)},templateData:function(){var e=t.extend({},s);return this.model.isLocalFileSystemAccessAllowed()||delete e.SERVER_FILE_SYSTEM,t.extend(r.prototype.templateData.apply(this,arguments),{fileSourceTypeOptions:e})},renderMongoDbSpecificSection:function(){this.$el.append(t.template(l,this.templateData()))},renderFileLocationSection:function(){this.renderOrAddAnyBlock(this.$el.find("[name=fileLocationContainer]"),t.template(c,this.templateData())),this.browseButton&&(this.browseButton.remove(),this.browseButton=!1),"repository"!==this.model.get("fileSourceType")||this.model.get("autoSchemaDefinition")||(this.browseButton=a.initialize({i18n:n,template:d,resourceInput:this.$el.find("[name=repositoryFileName]")[0],browseButton:this.$el.find("[name=repositoryBrowserButton]")[0],providerId:"fileResourceBaseTreeDataProvider",dialogTitle:n["resource.Add.Files.Title"],selectLeavesOnly:!0,onChange:t.bind(function(e){this.model.set("repositoryFileName",e),this.model.validate({repositoryFileName:e})},this)}))}})}),define("text!dataSource/template/InternalDiagnosticTemplate.htm",[],function(){return'<fieldset name="customFieldsContainer" class="group shortFields">\n\n    <js-templateNonce></js-templateNonce>\n\t{{- i18n["resource.datasource.internalDiagnostic.line1"] }}\n\t<br/>\n\t{{- i18n["resource.datasource.internalDiagnostic.line2"] }}\n\t<br/>\n\t{{- i18n["resource.datasource.internalDiagnostic.line3"] }}\n\t<br/>\n\t<br/>\n\t<strong>{{- i18n["resource.datasource.internalDiagnostic.line4"] }}</strong>\n</fieldset>'}),define("dataSource/view/DiagnosticCustomDataSourceView",["require","dataSource/view/BaseDataSourceView","underscore","bundle!all","dataSource/model/CustomDataSourceModel","text!dataSource/template/InternalDiagnosticTemplate.htm"],function(e){"use strict";var t=e("dataSource/view/BaseDataSourceView"),i=e("underscore"),n=e("bundle!all"),a=e("dataSource/model/CustomDataSourceModel"),s=e("text!dataSource/template/InternalDiagnosticTemplate.htm");return t.extend({PAGE_TITLE_NEW_MESSAGE_CODE:"resource.datasource.jndi.page.title.new",PAGE_TITLE_EDIT_MESSAGE_CODE:"resource.datasource.jndi.page.title.edit",modelConstructor:a,render:function(){return this.$el.empty(),this.renderBlankBody(),this},renderBlankBody:function(){this.$el.append(i.template(s,{i18n:n}))}})}),define("dataSource/factory/dataSourceViewFactory",["require","dataSource/view/CustomDataSourceView","dataSource/enum/dataSourceResourceTypes","dataSource/enum/customDataSourceTypes","dataSource/view/JdbcDataSourceView","dataSource/view/JndiDataSourceView","dataSource/view/AwsDataSourceView","dataSource/view/AzureSqlDataSourceView","dataSource/view/VirtualDataSourceView","dataSource/view/BeanDataSourceView","dataSource/view/MongoDbDataSourceView","dataSource/view/MongoDbJdbcDataSourceView","dataSource/view/DiagnosticCustomDataSourceView"],function(e){"use strict";var t=e("dataSource/view/CustomDataSourceView"),i=e("dataSource/enum/dataSourceResourceTypes"),n=e("dataSource/enum/customDataSourceTypes"),a=e("dataSource/view/JdbcDataSourceView"),s=e("dataSource/view/JndiDataSourceView"),r=e("dataSource/view/AwsDataSourceView"),o=e("dataSource/view/AzureSqlDataSourceView"),l=e("dataSource/view/VirtualDataSourceView"),c=e("dataSource/view/BeanDataSourceView"),d=e("dataSource/view/MongoDbDataSourceView"),u=e("dataSource/view/MongoDbJdbcDataSourceView"),h=e("dataSource/view/DiagnosticCustomDataSourceView"),p={};return p[i.JDBC.toLowerCase()]=a,p[i.JNDI.toLowerCase()]=s,p[i.AWS.toLowerCase()]=r,p[i.AZURE_SQL.toLowerCase()]=o,p[i.VIRTUAL.toLowerCase()]=l,p[i.BEAN.toLowerCase()]=c,p[i.MONGODB]=d,p[i.MONGODBJDBC]=u,p[n.DIAGNOSTIC]=h,{getView:function(e){var i;return e.dataSourceType?(i=p[e.dataSourceType])||(i=t):i=a,new i(e)},getViewType:function(e,t){var n=/application\/repository\.([^+]+)\+json/.exec(e),a=n&&n[1]?n[1].toLowerCase():e.toLowerCase();return i.CUSTOM.toLowerCase()===a&&(a=t.dataSourceName),a}}}),define("common/component/dialog/DialogWithModelInputValidation",["require","jquery","underscore","./Dialog","backbone.validation"],function(e){"use strict";var t=e("jquery"),i=e("underscore"),n=e("./Dialog"),a=e("backbone.validation");return n.extend({events:i.extend({"keyup input[type=text], textarea, select":"updateModelProperty","change input[type=text], input:checkbox, textarea, select":"updateModelProperty"},n.prototype.events),initialize:function(){this._bindEvents(),n.prototype.initialize.apply(this,arguments)},_bindEvents:function(){},_unbindEvents:function(){},updateModelProperty:function(e){var i={},n=t(e.target);"input"===n[0].tagName.toLowerCase()&&"text"===n.attr("type")||"select"===n[0].tagName.toLowerCase()&&"true"!==n.attr("multiple")||"textarea"===n[0].tagName.toLowerCase()?i[n.attr("name")]=t.trim(n.val()):"input"===n[0].tagName.toLowerCase()&&"checkbox"===n.attr("type")&&(i[n.attr("name")]=n.is(":checked")),this.beforeModelPropertySet&&this.beforeModelPropertySet(i),this.model.set(i),this.model.validate(i)},bindValidation:function(){a.bind(this,{valid:this.fieldIsValid,invalid:this.fieldIsInvalid,forceUpdate:!0,selector:"name"})},unbindValidation:function(){a.unbind(this)},fieldIsValid:function(e,t,i){var n=e.$("["+i+'="'+t+'"]').parent();n.removeClass("error"),n.find(".message.warning").text("")},fieldIsInvalid:function(e,t,i,n){var a=e.$("["+n+'="'+t+'"]').parent();a.addClass("error"),a.find(".message.warning").text(i.toString())},validField:function(e){var t=this.$(e).parent();t.removeClass("error"),t.find(".message.warning").text("")},invalidField:function(e,t){var i=this.$(e).parent();i.addClass("error"),i.find(".message.warning").text(t.toString())},clearValidationErrors:function(){this.$("label").removeClass("error"),this.$(".message.warning").text("")},remove:function(){this.unbindValidation(),this._unbindEvents(),n.prototype.remove.apply(this,arguments)}})}),define("text!dataSource/saveDialog/template/baseSaveDialogTemplate.htm",[],function(){return'<label title="{{- i18n[\'resource.datasource.saveDialog.dataSourceNameTitle\']}}" class="control input text ">\n\n    <js-templateNonce></js-templateNonce>\n\t<span class="wrap">{{- i18n[\'resource.datasource.saveDialog.dataSourceName\']}} ({{- i18n[\'required.field\']}}):</span>\n\t<input type="text" value="{{- model.label }}" name="label">\n\t<span class="message warning"></span>\n</label>\n\n\n<label title="{{- i18n[\'resource.datasource.saveDialog.resourceIDTitle\']}}" class="control input text ">\n\t<span class="wrap">{{- i18n[\'resource.datasource.saveDialog.resourceID\']}} ({{- i18n[\'required.field\']}}):</span>\n\t<input type="text" {{ if (isEditMode) { }}readonly="readonly"{{ } }} value="{{- model.name }}" name="name">\n\t<span class="message warning"></span>\n</label>\n\n\n<label title="{{- i18n[\'resource.datasource.saveDialog.descriptionTitle\']}}" class="control textArea">\n\t<span class="wrap">{{- i18n[\'resource.datasource.saveDialog.description\']}}</span>\n\t<textarea type="text" name="description">{{- model.description }}</textarea>\n\t<span class="message warning"></span>\n</label>\n\n{{ if (skipLocation === false) { }}\n<div class="control groupBox treeBox">\n\t<div class="content">\n\t\t<div class="header ">\n\t\t\t<div class="title"></div>\n\t\t</div>\n        <ul class="list collapsible folders"></ul>\n\t</div>\n</div>\n\n<label class="control textArea">\n\t<textarea type="text" class="hidden" name="parentFolderUri"></textarea>\n\t<span class="message warning"></span>\n</label>\n{{ } }}\n'}),define("common/component/panel/trait/collapsiblePanelTrait",["require","underscore","jquery","./abstractPanelTrait"],function(e){"use strict";function t(e,t){!t&&e.stopPropagation(),this.onCollapseControlPressed?this.onCollapseControlPressed(e):this.toggleCollapsedState()}function i(){this.$collapser&&this.$collapser.off("mousedown"),this.$el&&this.$el.find(this.expandOnDblClickSelector).off("dblclick")}var n=e("underscore"),a=e("jquery"),s=e("./abstractPanelTrait");return n.extend({},s,{onConstructor:function(e){this.collapserClass=e.collapserClass||"buttonIconToggle",this.collapserSelector=e.collapserSelector||".buttonIconToggle",this.collapsiblePanelClass=e.collapsiblePanelClass||"collapsiblePanel",this.expandOnDblClickSelector=e.expandOnDblClickSelector||"> p:first",this.allowEventPropagation=!!e.allowMouseDownEventPropagation,this.onCollapseControlPressed=e.onCollapseControlPressed},beforeSetElement:function(){i.call(this)},afterSetElement:function(){this.$el.addClass(this.collapsiblePanelClass),this.$collapser=this.$(this.collapserSelector),this.$collapser.length||(this.$collapser=a("<button></button>").addClass(this.collapserClass),this.$("> .header").prepend(this.$collapser)),this.$collapser.on("mousedown",n.bind(t,this,this.allowEventPropagation)),this.$el.find(this.expandOnDblClickSelector).on("dblclick",n.bind(t,this))},onRemove:function(){i.call(this)}})}),define("common/component/list/model/ScalableListModel",["require","backbone","underscore"],function(e){"use strict";var t=e("backbone"),i=e("underscore");return t.Model.extend({initialize:function(e){i.bindAll(this,"_fetchComplete","fetchFailed","afterFetchComplete","fetch"),this.set({items:[]},{silent:!0}),this.getData=e.getData,this.bufferSize=e.bufferSize||100,this.loadFactor=e.loadFactor||.95},_fetchComplete:function(e){this.attributes.total=e.total,this.set({items:e.data},{silent:!0}),this.attributes.bufferEndIndex=Math.max(0,Math.min(this.attributes.bufferStartIndex+this.bufferSize-1,this.attributes.bufferStartIndex+e.data.length-1)),this.attributes.bufferEndIndex<this.attributes.bufferStartIndex+this.bufferSize-1&&(this.attributes.total=Math.min(e.total,this.attributes.bufferEndIndex+1)),this.afterFetchComplete&&this.afterFetchComplete(e.data,this.attributes.total),this.trigger("change",this)},_isBufferReloadNecessary:function(e,t){if(void 0===this.get("bufferStartIndex")||void 0===this.get("bufferEndIndex"))return!0;if(e>=0&&e<this.get("bufferStartIndex")||t<this.get("total")&&t>this.get("bufferEndIndex"))return!0;if(e===this.get("bufferStartIndex")&&t===this.get("bufferEndIndex"))return!1;var i=1-(e-this.get("bufferStartIndex"))/this.bufferSize,n=1-(this.get("bufferEndIndex")-t)/this.bufferSize;return this.get("bufferStartIndex")>0&&i>=this.loadFactor||this.get("bufferEndIndex")<this.get("total")&&n>=this.loadFactor},afterFetchComplete:function(e,t){},fetchFailed:function(e,t){this.trigger("fetchFailed",e,t)},fetch:function(e){if(e=i.extend({top:this.get("bufferStartIndex")||0,bottom:this.get("bufferEndIndex")||this.bufferSize-1},e),e.force||this._isBufferReloadNecessary(e.top,e.bottom)){if(e.top!==this.attributes.bufferStartIndex||e.bottom!==this.attributes.bufferEndIndex||e.force){var t=e.top+Math.floor((e.bottom-e.top)/2),n=Math.floor(this.bufferSize/2);this.attributes.bufferStartIndex=Math.max(0,t-n),this.get("total")&&!e.force?this.attributes.bufferEndIndex=Math.min(this.get("total"),this.attributes.bufferStartIndex+this.bufferSize)-1:this.attributes.bufferEndIndex=this.attributes.bufferStartIndex+this.bufferSize-1}this.getData({offset:this.get("bufferStartIndex"),limit:this.get("bufferEndIndex")-this.get("bufferStartIndex")+1}).done(this._fetchComplete).fail(this.fetchFailed)}else this.afterFetchComplete&&this.afterFetchComplete(this.get("items"),this.get("total"))},reset:function(e){this.attributes={},this.set({items:[]},{silent:!0}),e&&e.silent||this.trigger("change",this)}})}),define("common/component/list/model/BaseListWithSelectionModel",["require","underscore","common/component/list/model/ScalableListModel"],function(e){"use strict";var t=e("underscore"),i=e("common/component/list/model/ScalableListModel");return i.extend({initialize:function(e){i.prototype.initialize.call(this,e),this.select(e.value,{silent:!0})},_addToSelection:function(e,t){throw"Not implemented"},_removeFromSelection:function(e,t){throw"Not implemented"},_clearSelection:function(){throw"Not implemented"},_selectionContains:function(e,t){throw"Not implemented"},_getSelection:function(){throw"Not implemented"},_triggerSelectionChange:function(e){e&&e.silent||this.trigger("change"),this.trigger("selection:change")},_addRangeToSelection:function(e,t,i){for(var n=0;n<e.length;n++)this._addToSelection(e[n].value,n+t);this.trigger("selection:addRange",{start:t,end:i,selection:this.getSelection()})},_fetchAllDataAndModifySelection:function(e,t){return this.getData().done(function(i){for(var n=0;n<i.data.length;n++)e(i.data[n].value,n);t&&t()}).fail(this.fetchFailed),this},addValueToSelection:function(e,t){return this.selectionStartIndex=t,this._addToSelection(e,t),this.trigger("selection:add",{value:e,index:t})},addRangeToSelection:function(e,t){if(void 0===this.selectionStartIndex)return void this.addValueToSelection(e,t);if(this.selectionStartIndex!==t){var i=Math.min(this.selectionStartIndex,t),n=Math.max(this.selectionStartIndex,t);if(this.selectionStartIndex=t,i>=this.get("bufferStartIndex")&&n<=this.get("bufferEndIndex")){var a=Array.prototype.slice.call(this.get("items"),i-this.get("bufferStartIndex"),n-this.get("bufferStartIndex")+1);this._addRangeToSelection(a,i,n)}else{var s=this;this.getData({offset:i,limit:n-i+1}).done(function(e){s._addRangeToSelection(e.data,i,n)}).fail(this.fetchFailed)}}},removeValueFromSelection:function(e,t){this._removeFromSelection(e,t),this.trigger("selection:remove",{value:e,index:t})},toggleSelection:function(e,t){this.selectionContains(e,t)?this.removeValueFromSelection(e,t):this.addValueToSelection(e,t)},selectionContains:function(e,t){return this._selectionContains(e,t)},clearSelection:function(){return this._clearSelection(),this.trigger("selection:clear")},getSelection:function(){return this._getSelection()},select:function(e,t){throw"Not implemented"},selectAll:function(){var e=this,i=!0;this._fetchAllDataAndModifySelection(function(t,n){i&&(e._clearSelection(),i=!1),e._addToSelection(t,n)},t.bind(this._triggerSelectionChange,this))},invertSelection:function(){var e=this;this._fetchAllDataAndModifySelection(function(t,i){e._selectionContains(t,i)?e._removeFromSelection(t,i):e._addToSelection(t,i)},t.bind(this._triggerSelectionChange,this))}})}),define("common/component/list/model/ListWithSelectionModel",["require","underscore","common/component/list/model/BaseListWithSelectionModel"],function(e){"use strict";var t=e("underscore"),i=e("common/component/list/model/BaseListWithSelectionModel");return i.extend({_addToSelection:function(e,t){this.selection[t]=e},_removeFromSelection:function(e,t){this.selection[t]=void 0},_clearSelection:function(){this.selection=[]},_selectionContains:function(e,t){return this.selection[t]===e},_getSelection:function(){return this.selection},_isSelectionEmpty:function(e){if(!e)return!0;if(t.isArray(e)&&0===e.length)return!0;if(t.isArray(e)||"string"==typeof e)return!1;for(var i in e)if(e.hasOwnProperty(i)&&void 0!==e[i])return!1;return!0},_selectPendingSelection:function(e,t){if(0===this.get("bufferStartIndex")&&this.get("bufferEndIndex")==this.get("total")-1)this._convertInitialArrayToSelection(this.get("items"),e,t);else{var i=this;this.getData().done(function(n){i._convertInitialArrayToSelection(n.data,e,t)}).fail(this.fetchFailed)}},_convertInitialArrayToSelection:function(e,t,i){for(var n=0;n<e.length;n++)t[e[n].value]&&this._addToSelection(e[n].value,n);this._triggerSelectionChange(i)},_triggerSelectionChange:function(e){this._calcSelectionStartIndex&&this._calcSelectionStartIndex(),i.prototype._triggerSelectionChange.call(this,e)},_calcSelectionStartIndex:function(){if(void 0===this.selectionStartIndex)for(var e in this.selection)if(this.selection.hasOwnProperty(e)&&void 0!==this.selection[e]){this.selectionStartIndex=parseInt(e,10);break}},select:function(e,i){if(this._clearSelection(),this._isSelectionEmpty(e))return void this._triggerSelectionChange(i);if(t.isArray(e)||"string"==typeof e){var n={};if("string"==typeof e)n[e]=!0;else for(var a=0;a<e.length;a++)n[e[a]]=!0;this._selectPendingSelection(n,i)}else{for(var s in e)if(e.hasOwnProperty(s)){var r=e[s];void 0!==r&&this._addToSelection(r,s)}this._triggerSelectionChange(i)}}})}),define("text!common/component/list/templates/viewPortChunksTemplate.htm",[],function(){return'{{_.each(chunks, function(chunk) { }}\n<div class="j-view-port-chunk" style="height: {{- chunk.height}}px">\n\n    <js-templateNonce></js-templateNonce>\n</div>\n{{ }); }}\n'}),define("text!common/component/list/templates/itemsTemplate.htm",[],function(){return'<ul class="jr-mSelectlist jr" style="top: {{- top}}px; position: relative;">\n\n    <js-templateNonce></js-templateNonce>\n    {{_.each(items, function(item) { }}\n    <li class="jr-mSelectlist-item {{ if (item.selected) print(\'jr-isSelected\'); }} jr" title="{{ print(item.label && item.label.trim() ? _.xssHardEscape(item.label) : \'&nbsp;\')}}" data-index="{{- item.index}}">\n        <div class="jr-mSelectlist-item-wrapper jr">\n            <a class="jr-mSelectlist-item-text jr">{{ print(item.label && item.label.trim() ? _.xssHardEscape(item.label) : \'&nbsp;\')}}</a>\n        </div>\n    </li>\n    {{ }); }}\n</ul>'}),define("common/component/list/view/ScalableList",["require","jquery","backbone","underscore","common/component/list/model/ScalableListModel","text!common/component/list/templates/viewPortChunksTemplate.htm","text!common/component/list/templates/itemsTemplate.htm"],function(e){"use strict";var t=e("jquery"),i=e("backbone"),n=e("underscore"),a=e("common/component/list/model/ScalableListModel"),s=e("text!common/component/list/templates/viewPortChunksTemplate.htm"),r=e("text!common/component/list/templates/itemsTemplate.htm");return i.View.extend({ListModel:a,listItemSelector:"li",events:{scroll:"onScroll",touchmove:"onScroll"},attributes:{style:"overflow-y: auto; height: 100px"},initialize:function(e){return n.bindAll(this,"_fetchVisibleData"),this.model=e.model||new this.ListModel(e),this.chunksTemplate=n.template(e.chunksTemplate||s),this.itemsTemplate=n.template(e.itemsTemplate||r),this.defaultChunkHeight=this.chunkHeight=e.chunkHeight||1e6,this.scrollTimeout=void 0!==e.scrollTimeout?e.scrollTimeout:50,this.manualScrollInterval=e.manualScrollInterval||50,this.lazy=e.lazy,this.defaultItemHeight=e.listItemHeight||21,this.listItemSelector=e.listItemSelector||this.listItemSelector,this.render(),this.initListeners(),this.lazy||this.model.fetch(),this},initListeners:function(){this.listenTo(this.model,"change",this.onModelChange,this),this.listenTo(this.model,"fetchFailed",this.onFetchFailed,this)},render:function(){return this},onScroll:function(e){this.scrollTimeout>0?(clearTimeout(this.scrollTimer),this.scrollTimer=setTimeout(this._fetchVisibleData,this.scrollTimeout)):this._fetchVisibleData()},onModelChange:function(){this.renderData()},onFetchFailed:function(e,t){this.trigger("listRenderError",e,t)},postProcessChunkModelItem:function(e,i){e.index=this.model.get("bufferStartIndex")+i,void 0===e.label&&(e.label=e.value),e.label=t.trim(e.label)},_renderItems:function(){var e=this.model.get("bufferStartIndex"),i=this.model.get("bufferEndIndex"),n=this.itemsPerChunk?Math.ceil((e+1)/this.itemsPerChunk):1,a=this.itemsPerChunk?Math.ceil((i+1)/this.itemsPerChunk):1,s=this;this.$el.find(".j-view-port-chunk").each(function(r,o){var l=s._getChunkModel({index:r+1,firstChunkWithData:n,lastChunkWithData:a,bufferStart:e,bufferEnd:i,total:s.totalItems,itemsPerChunk:s.itemsPerChunk,itemHeight:s.itemHeight,chunkHeight:s.chunkHeight,model:s.model}),c=l?s.itemsTemplate(l):"";t(o).html(c)})},_renderViewChunks:function(e){(this.totalItems!==this.model.get("total")||e)&&(this.totalItems=this.model.get("total"),this.$el.html(this.chunksTemplate({_:n,chunks:this._getViewChunksModel()})),this.$firstViewChunk=this.$el.find(".j-view-port-chunk:first"))},_getViewChunksModel:function(){for(var e=this.itemsPerChunk?Math.ceil(this.totalItems/this.itemsPerChunk):1,t=e>0?this.itemHeight?this.totalItems*this.itemHeight-(e-1)*this.chunkHeight:this.chunkHeight:1,i=[],n=1;n<e;n++)i.push({height:this.chunkHeight});return i.push({height:t}),i},_calcViewPortConstants:function(e){e=e||{},this.viewPortConstantsInitialized||(this.itemHeight=this.defaultItemHeight,this.$firstViewChunk&&(this.itemHeight=this.$el.find(this.listItemSelector+":first").outerHeight(!0),!this.itemHeight||this.itemHeight<=2?(this.itemHeight=this.defaultItemHeight,this.viewPortConstantsInitialized=!1):this.viewPortConstantsInitialized=!0),this._calcViewPortHeight(),this.itemsPerChunk=Math.floor(this.defaultChunkHeight/this.itemHeight),this.chunkHeight=this.itemsPerChunk*this.itemHeight,this._renderViewChunks(!0),this._renderItems())},_calcViewPortHeight:function(){this.viewPortHeight=this.$el.height(),this.itemsPerView=Math.floor(this.viewPortHeight/this.itemHeight)-1},_getItemsPerView:function(){return this._renderData(),this.itemsPerView},_getChunkModel:function(e){var t=e.index;if(t<e.firstChunkWithData||t>e.lastChunkWithData)return null;var i=e.itemsPerChunk?Math.max(e.bufferStart,e.itemsPerChunk*(t-1)):e.bufferStart,a=e.itemsPerChunk?Math.min(e.bufferEnd,e.itemsPerChunk*t-1):e.bufferEnd,s=e.itemHeight?i*e.itemHeight-(t-1)*e.chunkHeight:0,r=Array.prototype.slice.call(e.model.get("items"),i-e.bufferStart,a-e.bufferStart+1);return n.each(r,function(t,n){this.postProcessChunkModelItem(t,n+(i-e.bufferStart))},this),{top:s,items:r}},_fetchVisibleData:function(){var e=this._getVisibleItems();this.model.fetch({top:e.top,bottom:e.bottom})},_getVisibleItems:function(){var e=this._getScrollPos(),t=this.model.get("total"),i=Math.min(t-this.itemsPerView,Math.floor(e/this.itemHeight));return{top:i,bottom:Math.min(t-1,i+this.itemsPerView+1)}},_getScrollPos:function(){this._renderData();var e=0;if(this.$firstViewChunk){var t=this.$el.offset(),i=this.$firstViewChunk.offset();t&&i&&(e=t.top-i.top)}return e},renderData:function(){return!this.lazy&&this.model.has("bufferStartIndex")&&this.model.has("bufferEndIndex")?this._renderData():(this.lazy=null,this.model.fetch()),this},_renderData:function(){this.trigger("before:render:data"),this._renderViewChunks(),this._renderItems(),this._calcViewPortConstants(),this.trigger("render:data")},resize:function(){if(this.$el.is(":visible")){var e=this.$el.outerHeight();e!==this._componentHeight&&(this._componentHeight=e,this.viewPortConstantsInitialized=!1,this._renderData())}},fetch:function(e,t){this.lazy=!1,t=t||{};var i;t.keepPosition?i=this.$el.get(0).scrollTop:this.reset({silent:!0,lazy:!1}),this.model.once("change",function(){t.keepPosition&&this.$el.scrollTop(i),e&&e.apply(this,arguments)},this).fetch({force:!0})},reset:function(e){e=n.defaults(e||{},{lazy:!0}),this.$el.scrollTop(0),this.lazy=e.lazy,this.model.reset(e)},scrollTo:function(e){if("number"==typeof e){var t=this._getScrollPos();if(this.viewPortConstantsInitialized){this._calcViewPortHeight();var i=null,n=e*this.itemHeight;n<t?i=n:n+this.itemHeight>t+this.viewPortHeight&&(i=n+this.itemHeight-this.viewPortHeight),null!==i&&this.$el.scrollTop(i)}}}})}),define("common/component/list/view/ListWithSelection",["require","jquery","underscore","common/component/list/model/ListWithSelectionModel","common/component/list/view/ScalableList"],function(e){"use strict";var t=e("jquery"),i=e("underscore"),n=e("common/component/list/model/ListWithSelectionModel"),a=e("common/component/list/view/ScalableList"),s={LEFT:"left",RIGHT:"right"};return a.extend({ListModel:n,globalEvents:!0,initialize:function(e){return i.bindAll(this,"onGlobalMouseup","onGlobalMousemove","_autoScroll","fetch"),this.eventListenerPattern=e.eventListenerPattern||"li",this.markerClass=e.markerClass?e.markerClass:"",this.selectedClass=e.selectedClass?e.selectedClass:"selected",this._initSelection(e.selection),a.prototype.initialize.call(this,e)},delegateEvents:function(){var e=a.prototype.delegateEvents.apply(this,arguments);return this.$el.on("mousedown",this.eventListenerPattern,i.bind(this.onMousedown,this)).on("mousemove",this.eventListenerPattern,i.bind(this.onMousemove,this)).on("dblclick",this.eventListenerPattern,i.bind(this.onMousedblclick,this)).on("contextmenu",this.eventListenerPattern,i.bind(this.onItemEvent,this,this.$el)).on("mouseout",this.eventListenerPattern,i.bind(this.onItemEvent,this,this.$el)).on("mouseover",this.eventListenerPattern,i.bind(this.onItemEvent,this,this.$el)),!this.globalEvents&&this.$el.on("mouseup",this.eventListenerPattern,this.onGlobalMouseup),e},undelegateEvents:function(){var e=a.prototype.undelegateEvents.apply(this,arguments);return this.$el.off("mouseup").off("mousedown").off("mousemove").off("dblclick").off("contextmenu").off("mouseout").off("mouseover"),e},_initSelection:function(e){e=i.extend({allowed:{}},e);var t=e.allowed,n=i.isObject(t)?t.left:t;this.selection={allowed:{left:void 0===n||n,right:void 0!==t.right&&t.right},multiple:void 0===e.multiple||e.multiple}},initListeners:function(){a.prototype.initListeners.call(this),this.listenTo(this.model,"selection:clear",this.clearSelection,this),this.listenTo(this.model,"selection:add",this.selectValue,this),this.listenTo(this.model,"selection:addRange",this.selectRange,this),this.listenTo(this.model,"selection:remove",this.deselectValue,this),this.globalEvents&&t("body").on("mouseup",this.onGlobalMouseup).on("mousemove",this.onGlobalMousemove)},postProcessChunkModelItem:function(e,t){a.prototype.postProcessChunkModelItem.call(this,e,t),e.selected=this.model.selectionContains&&this.model.selectionContains(e.value,e.index)},onMousedblclick:function(e){if(!this.selection.multiple&&(this.selection.allowed.left||this.selection.allowed.right)&&!this.getDisabled()){var t=this._getDomItemData(e.currentTarget);this._singleSelect(e,t.value,t.index),this.selectionChanged&&(this._triggerSelectionChanged(),this._triggerDblclicked(),this.selectionChanged=!1)}},getItemByEvent:function(e){return this._getDomItemData(e.currentTarget).item},onItemEvent:function(e,t){var i=t.type,n=this.getItemByEvent(t);this.trigger("list:item:"+i,n,t)},onMousedown:function(e){if(!this.getDisabled()&&(this.selection.allowed.left&&1===e.which||this.selection.allowed.right&&3===e.which)){var t=1===e.which?s.LEFT:s.RIGHT;this.selection.multiple&&(this[t+"MouseButtonPressed"]=!0,this.mouseDownPos=this._getMousePos(e));var i=this._getDomItemData(e.currentTarget);this.selection.multiple?this._multiSelect(e,i.value,i.index):this._singleSelect(e,i.value,i.index)}},onMousemove:function(e){if(this._allowMouseMoveSelection()&&(this._stopAutoScroll(),this._mouseMoved(e,this.mouseDownPos))){this.mouseDownPos=this._getMousePos(e);var t=this._getDomItemData(e.currentTarget);this.model.selectionContains(t.value,t.index)||this.model.addRangeToSelection(t.value,t.index)}},onGlobalMouseup:function(e){var t=this;(this.leftMouseButtonPressed||this.rightMouseButtonPressed)&&(i.each(s,function(e){t[e+"MouseButtonPressed"]=!1}),
delete this.mouseDownPos,this._stopAutoScroll(),this.selectionChanged&&(this._triggerSelectionChanged(),this.selectionChanged=!1))},onGlobalMousemove:function(e){this._allowMouseMoveSelection()&&(this.mousePosY=e.clientY,this.scrollInterval||(this.scrollInterval=setInterval(this._autoScroll,this.manualScrollInterval)))},clearSelection:function(){this.$el.find("li."+this.selectedClass+this.markerClass).removeClass(this.selectedClass),this.selectionChanged=!0},selectValue:function(e){this.$el.find("li"+this.markerClass+"[data-index='"+e.index+"']:not(."+this.selectedClass+")").addClass(this.selectedClass),this.selection.multiple?this.selectionChanged=!0:this._triggerSelectionChanged()},selectRange:function(e){var i=this,n=Math.max(this.model.get("bufferStartIndex"),e.start),a=Math.min(this.model.get("bufferEndIndex"),e.end);this.$el.find("li"+this.markerClass+":not(."+this.selectedClass+")").each(function(){var e=t(this),s=parseInt(e.attr("data-index"),10);if(s>=n&&s<=a){var r=i.model.get("items")[s-i.model.get("bufferStartIndex")];i.model.selectionContains(r.value,s)&&e.addClass(i.selectedClass)}}),this.selectionChanged=!0},deselectValue:function(e){this.$el.find("li[data-index='"+e.index+"']."+this.selectedClass+this.markerClass).removeClass(this.selectedClass),this.selection.multiple?this.selectionChanged=!0:this._triggerSelectionChanged()},_autoScroll:function(){var e,t=this.$el.offset().top,i=this.$el.scrollTop(),n=void 0!==this.scrollTop?this.scrollTop:i,a=!1;this.mousePosY<t?(e=n-3*this.itemHeight,a=e<i):this.mousePosY>t+this.viewPortHeight&&(e=n+3*this.itemHeight,a=e>i),a&&(this.$el.scrollTop(e),this.scrollTop=this.$el.scrollTop(),this._fetchVisibleData()),this._selectRangeOnAutoScroll(n,e)},_selectRangeOnAutoScroll:function(e,t){var i;if(e<t?i=this._getVisibleItems().bottom:e>t&&(i=this._getVisibleItems().top),i){var n=this.model.get("items")[i-this.model.get("bufferStartIndex")];n&&(this.model.selectionContains(n.value,i)||this.model.addRangeToSelection(n.value,i))}},_stopAutoScroll:function(){this.scrollInterval&&(clearInterval(this.scrollInterval),this.scrollInterval=void 0,this.scrollTop=void 0)},_multiSelect:function(e,t,i){e.shiftKey?this.model.addRangeToSelection(t,i):e.ctrlKey||e.metaKey?this._singleSelect(e,t,i):this.model.toggleSelection(t,i)},_singleSelect:function(e,t,i){this.model.clearSelection().addValueToSelection(t,i)},_triggerSelectionChanged:function(){this.trigger("selection:change",this.getValue())},_triggerDblclicked:function(){this.trigger("item:dblclick",this.getValue())},_getDomItemData:function(e){for(var i=t(e),n=i.attr("data-index");void 0===n;)i=i.parent(),n=i.attr("data-index");n=parseInt(n,10);var a=this.model.get("items")[n-this.model.get("bufferStartIndex")];return{item:a,value:a.value,index:n}},_mouseMoved:function(e,t){return Math.abs(t.x-e.clientX)+Math.abs(t.y-e.clientY)>=1},_getMousePos:function(e){return{x:e.clientX,y:e.clientY}},_allowMouseMoveSelection:function(){return(this.selection.allowed.left&&this.leftMouseButtonPressed||this.selection.allowed.right&&this.rightMouseButtonPressed)&&this.selection.multiple&&!this.getDisabled()},getValue:function(){return this.model.getSelection()},setValue:function(e,t){return t=t||{},t&&t.silent||t.modelOptions&&t.modelOptions.silent||this.model.once("selection:change",this._triggerSelectionChanged,this),t=t.modelOptions,this.model.select(e,t),this},selectAll:function(e){return e&&e.silent||this.model.once("selection:change",this._triggerSelectionChanged,this),this.model.selectAll(),this},selectNone:function(e){return this.setValue({},e)},invertSelection:function(e){return e&&e.silent||this.model.once("selection:change",this._triggerSelectionChanged,this),this.model.invertSelection(),this},setDisabled:function(e){return this.disabled=e,this.disabled?this.$el.addClass("disabled"):this.$el.removeClass("disabled"),this},getDisabled:function(){return this.disabled},remove:function(){return t("body").off("mouseup",this.onGlobalMouseup).off("mousemove",this.onGlobalMousemove),a.prototype.remove.call(this)}})}),define("common/component/tree/trait/addToSelectionModelTrait",["require","underscore","common/component/list/model/ScalableListModel"],function(e){"use strict";var t=e("underscore"),i=e("common/component/list/model/ScalableListModel");return{afterFetchComplete:function(e,n){i.prototype.afterFetchComplete.apply(this,arguments);var a,s;t.each(e,function(e,t){e.addToSelection&&(e.selected=!0,a=e.value,s=this.get("bufferStartIndex")+t,this.selectionContains&&!this.selectionContains(a,s)&&this.addValueToSelection(a,s),delete e.addToSelection)},this)}}}),define("common/component/tree/plugin/TreePlugin",["require","backbone"],function(e){"use strict";return e("backbone").View.extend({dataLayerObtained:function(){},itemsRendered:function(){}},{processors:null,treeInitialized:function(){},treeRemoved:function(){}})}),define("text!common/component/tooltip/template/tooltipTemplate.htm",[],function(){return'<div class="{{- cssClasses }}" style="position: absolute; z-index: 100000;">\n\n    <js-templateNonce></js-templateNonce>\n    <div class="content">\n        <div class="body"></div>\n    </div>\n</div>\n'}),define("common/component/tooltip/Tooltip",["require","jquery","underscore","backbone","text!./template/tooltipTemplate.htm"],function(e){"use strict";var t=e("jquery"),i=e("underscore"),n=e("backbone"),a=e("text!./template/tooltipTemplate.htm");return n.View.extend({template:i.template(a),delay:500,offset:{x:10,y:10},attribute:"data-tooltip",cssClasses:"panel info tooltip",contentSelector:".body",triggerEvents:!1,el:function(){return this.template({cssClasses:this.cssClasses})},constructor:function(e){if(e||(e={}),!e.attachTo||0===t(e.attachTo).length)throw new Error("Tooltip should be attached to an element");if(!e.contentTemplate)throw new Error("Tooltip should have contentTemplate");this._shown=!1,this.$attachTo=t(e.attachTo),this.$attachTo[0].tooltip=this,e.delay&&(this.delay=e.delay),e.offset&&(this.offset=e.offset),e.attribute&&(this.attribute=e.attribute),e.cssClasses&&(this.cssClasses=e.cssClasses),this.contentTemplate=e.contentTemplate,this.i18n=e.i18n||{},!i.isUndefined(e.triggerEvents)&&(this.triggerEvents=e.triggerEvents),this.selector="["+this.attribute+"]",i.bindAll(this,"show","_onMouseMove","_onMouseLeave"),this.$attachTo.on("mousemove touchmove",this.selector,this._onMouseMove),this.$attachTo.on("mouseleave touchend",this.selector,this._onMouseLeave),n.View.prototype.constructor.apply(this,arguments)},_render:function(e,t,a){if(this._event){e=e instanceof n.Model?e.toJSON():e;var s=i.template(this.contentTemplate)({model:e,i18n:this.i18n,options:t||{}});this.$el.find(".body").empty().append(s),this._showTooltip()}a.resolve()},show:function(e,n){var a=new t.Deferred;return this._timer=setTimeout(i.bind(this._render,this,e,n,a),this.delay),a},_showTooltip:function(){t("body").append(this.$el),this._updatePosition(),this._shown=!0,this.triggerEvents&&this.trigger("show",this)},hide:function(){this.contentTemplate&&this._timer&&clearTimeout(this._timer),this.$el.detach(),this._shown=!1,this.triggerEvents&&this.trigger("hide",this)},_updatePosition:function(){var e=this.$el.innerHeight(),i=this.$el.innerWidth(),n=t(window).height(),a=t(window).width(),s=this.offset.y,r=this.offset.x;e+this._event.pageY+this.offset.y+3>=n&&(s=-this.offset.y-e),i+this._event.pageX+this.offset.x+3>=a&&(r=-this.offset.x-i),this.$el.css({top:this._event.pageY+s,left:this._event.pageX+r})},_onMouseMove:function(e){this._event=e},_onMouseLeave:function(){this._shown&&this.hide(),this._timer&&clearTimeout(this._timer),this._event=null},remove:function(){this._shown&&this.hide(),this._timer&&clearTimeout(this._timer),this.$attachTo.off("mousemove touchmove",this.selector,this._onMouseMove),this.$attachTo.off("mouseleave touchend",this.selector,this._onMouseLeave),n.View.prototype.remove.apply(this,arguments)}},{attachTo:function(e,t){var i=this;return t||(t={}),t.attachTo=e||"body",new i(t)},detachFrom:function(e){e=t(e)[0],e.tooltip&&e.tooltip.remove()}})}),define("common/component/tree/plugin/TooltipPlugin",["require","./TreePlugin","underscore","common/component/tooltip/Tooltip"],function(e){"use strict";var t=e("./TreePlugin"),i=e("underscore"),n=e("common/component/tooltip/Tooltip");return t.extend({initialize:function(e){this.tooltip=n.attachTo(e.attachTo,i.omit(e,"el")),this.listensToList=!1,t.prototype.initialize.apply(this,arguments)},itemsRendered:function(e,t){var i=this;this.listensToList||(this.listensToList=!0,this.listenTo(t,"list:item:mouseover",function(e,t){i.tooltip.show(e)}),this.listenTo(t,"list:item:mouseout",function(){i.tooltip.hide()}))},remove:function(){n.detachFrom(this.$el),this.tooltip.remove(),t.prototype.remove.apply(this,arguments)}})}),define("common/component/tree/dataprovider/DataProviderWithSearchCache",["require","underscore","jquery"],function(e){"use strict";var t=e("underscore"),i=e("jquery"),n=function(e){t.bindAll(this,"getData"),e=e||{},this.dataCache=[],this.dataCacheTotal=null,this.dataCachePages=[],this.pageSize=e.pageSize||999,this.criteriaKey=e.searchKey||"criteria",this.maxSearchCacheSize=e.maxSearchCacheSize||50,this.getDataByCriteriaHolder={},this.controlGetTotal=void 0!==e.controlGetTotal&&e.controlGetTotal,this.dataConverter=e.dataConverter,this.saveLastCriteria=void 0!==e.saveLastCriteria&&e.saveLastCriteria,this.lastCriteria=null,this.serialRequestsDelay=void 0!==e.serialRequestsDelay?e.serialRequestsDelay:50,this.serialRequestsDelayedPromise=null,this.request=e.request};return t.extend(n.prototype,{getData:function(e){if(e=e||{},e[this.criteriaKey])return this._getDataByCriteria(e[this.criteriaKey])(e);if(void 0===e[this.criteriaKey]&&this.saveLastCriteria&&this.lastCriteria)return this._getDataByCriteria(this.lastCriteria)(e);this.lastCriteria=null;var t=i.Deferred(),n=this._getPagesToLoad(e);return n?this._requestData(e,n,t):this._resolveDeferredUsingDataFromCache(t,e),t.promise()},clear:function(){this.dataCache=[],this.dataCacheTotal=null,this.dataCachePages=[],this.getDataByCriteriaHolder={},this.lastCriteria=null},_requestData:function(e,i,n){var a=(i[i.length-1]-i[0]+1)*this.pageSize,s=t.extend({},e,{offset:i[0]*this.pageSize,limit:a});this.controlGetTotal&&(s.skipGetTotal=!0),a>=2147483647/this.pageSize*this.pageSize&&delete s.limit,this.controlGetTotal&&"number"!=typeof this.dataCacheTotal&&delete s.skipGetTotal,this.serialRequestsDelay>0?(clearTimeout(this.deferredTimeout),this.deferredTimeout=setTimeout(t.bind(this._requestDataDeferred,this,e,s,n),this.serialRequestsDelay)):this._requestDataDeferred(e,s,n)},_requestDataDeferred:function(e,i,n){this._getPagesToLoad(e)?this.serialRequestsDelayedPromise&&t.isEqual(i,this.serialRequestsDelayedPromise.query)?this.serialRequestsDelayedPromise.promise.done(n.resolve).fail(n.reject):(this.serialRequestsDelayedPromise={promise:n.promise(),query:i},this.request(i).done(t.bind(this._requestDone,this,e,i,n)).fail(n.reject)):this._resolveDeferredUsingDataFromCache(n,e)},_requestDone:function(e,t,i,n){this._putDataToCache(t,n),this.serialRequestsDelayedPromise=null,this._resolveDeferredUsingDataFromCache(i,e)},_resolveDeferredUsingDataFromCache:function(e,t){var i=this._getDataFromCache(t);e.resolve({total:this.dataCacheTotal,data:i})},_getPagesToLoad:function(e){var t,i=this._convertLimitOffsetToFirstLast(e),n=this._findPageIndex(i.first),a=this._findPageIndex(i.last),s=[];for(t=n;t<=a;t++)if(!this.dataCachePages[t]){s.push(t);break}for(t=a;t>=n;t--)if(!this.dataCachePages[t]){s.push(t);break}return s.length>0?s:null},_findPageIndex:function(e){return Math.floor(e/this.pageSize)},_convertLimitOffsetToFirstLast:function(e){var t=e&&e.offset?e.offset:0,i=e&&e.limit?t+e.limit-1:this.dataCacheTotal?this.dataCacheTotal-1:2147483647;return this.dataCacheTotal&&i>this.dataCacheTotal-1&&(i=this.dataCacheTotal-1),{first:t,last:i}},_getDataFromCache:function(e){e=t.defaults(e,{offset:0,limit:2147483647});var i=Math.max(0,e.offset),n=Math.min(i+e.limit,this.dataCacheTotal);return this.dataCache.slice(i,n)},_putDataToCache:function(e,t){var i;for(void 0!==t.total&&(this.dataCacheTotal=t.total),e.limit=e.limit||2147483647,i=0;i<t.data.length;i++)this.dataCache[i+e.offset]=this.dataConverter?this.dataConverter(t.data[i]):t.data[i];var n=e.offset/this.pageSize,a=Math.floor((Math.min(e.limit,t.data.length)+e.offset-1)/this.pageSize);for(i=n;i<=a;i++)this.dataCachePages[i]=!0},_getDataByCriteria:function(e){if(!this.getDataByCriteriaHolder[e]){var t,i=Number.MAX_VALUE,n=0,a=0;for(var s in this.getDataByCriteriaHolder)if(this.getDataByCriteriaHolder.hasOwnProperty(s)){a+=1;var r=this.getDataByCriteriaHolder[s];r.index<i&&(i=r.index,t=s),r.index>n&&(n=r.index)}a>=this.maxSearchCacheSize&&delete this.getDataByCriteriaHolder[t],this.getDataByCriteriaHolder[e]={getData:this._createDataProviderForCriteria(e),index:n+1}}return this.lastCriteria=e,this.getDataByCriteriaHolder[e].getData},_createDataProviderForCriteria:function(e){var i=this.request,a=this,s=new n({pageSize:this.pageSize,dataConverter:this.dataConverter,serialRequestsDelay:this.serialRequestsDelay,searchKey:this.criteriaKey,controlGetTotal:this.controlGetTotal,request:function(n){var s=t.extend({},n);return s[a.criteriaKey]=e,i(s)}}),r=s.getData;return s.getData=function(e){var i=t.extend({},e);return delete i[a.criteriaKey],r.call(s,i)},s.getData}}),n}),define("common/component/tree/TreeLevel",["require","underscore","common/component/panel/Panel","common/component/panel/trait/collapsiblePanelTrait","common/component/list/view/ListWithSelection","common/component/tree/trait/addToSelectionModelTrait","common/component/list/model/ListWithSelectionModel","common/component/tree/plugin/TooltipPlugin","./dataprovider/DataProviderWithSearchCache"],function(e){"use strict";function t(){this.$el.removeClass(this.loadingClass).addClass(this.openClass),l.invoke(this.plugins,"itemsRendered",this.list.model,this.list);var e=this.list.$("> .j-view-port-chunk > ul > li").addClass(this.cid).length,t=l.isFunction(this.levelHeight)?this.levelHeight():this.levelHeight;t&&e*this.listItemHeight>t?this.list.$el.css({height:t+"px","overflow-y":"auto"}):this.list.$el.css({height:"auto",overflow:"auto"}),this.list._calcViewPortHeight(),this._isReady=!0,this.trigger("ready",this)}function i(e,t){this.listRenderError=!0,this.trigger("listRenderError",e,t,this)}function n(e){var t=[];l.chain(e).keys(e).each(function(i){t.push(e[i])}),this.selection.multiple||o(this),this.trigger("selection:change",t,this,[])}function a(e){var t=[];l.chain(e).keys(e).each(function(i){t.push(e[i])}),this.selection.multiple||o(this),this.trigger("item:dblclick",t)}function s(e,t){for(var i=0;i<t.length;i++)if(t[i]===e)return!0}function r(e,t,i,n){i&&i.exclude&&l.isArray(i.exclude)&&s(e,i.exclude)||(void 0===n||n>0)&&l.chain(e.items).keys().each(function(a){i&&i.exclude&&l.isArray(i.exclude)&&s(e.items[a],i.exclude)||t.call(e.items[a],i),r(e.items[a],t,i,void 0===n?n:--n)})}function o(e,t){t=t&&{exclude:t.exclude},r(e,function(e){this.list.clearSelection(),this.list.model.selection=[]},t)}var l=e("underscore"),c=e("common/component/panel/Panel"),d=e("common/component/panel/trait/collapsiblePanelTrait"),u=e("common/component/list/view/ListWithSelection"),h=e("common/component/tree/trait/addToSelectionModelTrait"),p=e("common/component/list/model/ListWithSelectionModel").extend(h),m=(e("common/component/tree/plugin/TooltipPlugin"),e("./dataprovider/DataProviderWithSearchCache"));return c.extend({constructor:function(e){e||(e={}),l.extend(e,{traits:[d]}),c.prototype.constructor.call(this,e)},initialize:function(e){e||(e={}),this._isReady=!1,this.item=e.item||{},this.id=this.item.id,this.owner=e.owner,this.parent=e.parent,this.itemsTemplate=e.itemsTemplate,this.listItemHeight=e.listItemHeight,this.levelHeight=e.levelHeight,this.lazyLoad=!!e.lazyLoad,this.selection=e.selection||{allowed:!1,multiple:!1},this.resource=this.item.value,this.bufferSize=e.bufferSize,this.cache=void 0!==e.cache&&e.cache,this.allowMouseDownEventPropagation=e.allowMouseDownEventPropagation,this.items={},this.plugins=[];for(var t={el:this.el,model:this.model},i=0,n=e.plugins.length;i<n;i++){var a=e.plugins[i].constr;this.plugins.push(new a(l.extend({},t,e.plugins[i].options)))}this.dataLayer=this.owner.getDataLayer(this),l.invoke(this.plugins,"dataLayerObtained",this.dataLayer),c.prototype.initialize.apply(this,arguments)},render:function(){var e=new p({bufferSize:this.bufferSize,getData:this._getDataProvider(this.cache)});return this.list=new u({markerClass:"."+this.cid,eventListenerPattern:"."+this.cid+":not(.readonly) > p",el:this.$contentContainer,itemsTemplate:this.itemsTemplate,listItemHeight:this.listItemHeight,lazy:!0,selection:this.selection,allowMouseDownEventPropagation:this.allowMouseDownEventPropagation,model:e}),this.list.on("render:data",l.bind(t,this)),this.list.on("listRenderError",l.bind(i,this)),this.list.on("selection:change",l.bind(n,this)),this.list.on("item:dblclick",l.bind(a,this)),this.lazyLoad?this.on("open",this._onOpen,this):this.list.renderData(),this},_getDataProvider:function(e){var t=this,i=l.bind(function(e){return this.obtainData(e,t)},this.dataLayer),n={};return e&&("object"==typeof e&&(n=l.extend(n,e)),n.request=n.request||i,this.dataProvider=new m(n),i=this.dataProvider.getData),function(e){return e||(e={offset:0,limit:100}),e.id=t.id,i(l.extend({},t.owner.context,e),t)}},_onOpen:function(){this.$el.removeClass(this.openClass).addClass(this.loadingClass),this.list.renderData()},setElement:function(e){var t=c.prototype.setElement.apply(this,arguments);return this.list&&(this.list.setElement(this.$contentContainer),this.list.totalItems=-1),l.each(this.plugins,function(t){t.setElement(e)}),this.lazyLoad||this.list&&this.list.renderData(),this.collapsed||(this.open({silent:!0,depth:0}),this.lazyLoad&&this.list.renderData()),t},open:function(e){r(this,c.prototype.open,e,e?e.depth:0),c.prototype.open.call(this,e)},close:function(e){c.prototype.close.call(this,e),r(this,c.prototype.close,e,e?e.depth:void 0),o(this)},getLevel:function(e){return l(this.items).reduce(function(t,i){return t||(i.id===e?i:i.getLevel(e))},!1)},refresh:function(e){this.listRenderError||(this.lazyLoad&&!this.collapsed||!this.lazyLoad?(this.once("ready",l.bind(r,this,this,this.refresh,e,1)),this.list.model.fetch({top:0,bottom:this.list.model.bufferSize,force:!0}),this.list.scrollTo(0)):(this.list.model.set("bufferStartIndex",void 0,{silent:!0}),this.list.model.set("bufferEndIndex",void 0,{silent:!0}),this.list.model.set("total",void 0,{silent:!0}),r(this,this.refresh,e)))},fetch:function(e,t){this.list.fetch(t,e)},recalcConstraints:function(){this.list.resize()},fetchVisibleData:function(){this.list._fetchVisibleData()},resetSelection:function(e){o(this,e),e&&e.silent||this.trigger("selection:change",[])},hasItems:function(){return!!this.$("> .subcontainer > .j-view-port-chunk > ul > li").length},clearCache:function(){l.each(this.items,function(e){e.clearCache()}),this.dataProvider&&this.dataProvider.clear()},remove:function(){var e=this,t=-1;if(l.forEach(l.keys(this.items),function(t){e.items[t].remove()}),this.dataProvider&&this.dataProvider.clear(),this.list.remove(),this.parent){var i=this.parent.id,n=this.owner.getDataLayer(i);if(n&&n.predefinedData&&n.predefinedData[i]&&l.isArray(n.predefinedData[i])){for(var a=0;a<n.predefinedData[i].length;a++)if(n.predefinedData[i][a].id===this.id){t=a;break}t>-1&&(n.predefinedData[i].splice(t,1),delete n.predefinedData[this.id])}delete this.parent.items[this.id]}c.prototype.remove.apply(this,arguments)},isReady:function(){return this._isReady}})}),define("common/component/tree/TreeDataLayer",["require","underscore","jquery","common/util/classUtil","./TreeLevel","common/util/xssUtil","request"],function(e){"use strict";function t(e,t){return n.call(this,i.call(this,e),t)}function i(e){for(var t=0,i=e.length;t<i;t++)e[t]={id:this.extractId(e[t]),value:e[t]};return e}function n(e,t){var i,n;if(this.processors&&this.processors.length)for(var a=0,s=this.processors.length;a<s;a++){i=[];for(var r=0,o=e.length;r<o;r++)(n=this.processors[a].processItem(e[r],t,this))&&i.push(n);e=i}return e}var a=e("underscore"),s=e("jquery"),r=e("common/util/classUtil"),o=(e("./TreeLevel"),e("common/util/xssUtil"),e("request"));return r.extend({constructor:function(e){this.requestType=e.requestType?e.requestType:"GET",e.getDataUri&&(this.getDataUri=e.getDataUri),this.getDataUri||(this.getDataUri=a.template(e.dataUriTemplate)),e.getDataArray&&(this.getDataArray=e.getDataArray),e.getDataSize&&(this.getDataSize=e.getDataSize),e.extractId&&(this.extractId=e.extractId),this.levelDataId=e.levelDataId?e.levelDataId:"id",this.processors=e.processors||[],this.initialize(e)},initialize:function(e){},extractId:function(e){return e[this.levelDataId]},getDataSize:function(e,t,i){return this.getDataArray(e,t,i).length},getDataArray:function(e,t,i){return e},obtainData:function(e,i){var n=new s.Deferred,a=this;return this.predefinedData&&this.predefinedData[e.id]?n.resolve({total:this.predefinedData[e.id].length,data:this.predefinedData[e.id]}):o({type:this.requestType,dataType:this.dataType||"json",headers:{Accept:this.accept||"application/json","Content-Type":this.contentType||void 0},cache:!1,data:this.data||void 0,url:this.getDataUri(e)}).done(function(){var i=arguments[0];a.dataSize=a.getDataSize.call(a,i,e,arguments[2]),n.resolve({total:a.dataSize,data:t.call(a,a.getDataArray.call(a,i,e,arguments[2]),e)})}).fail(function(e){n.reject(e.status,e.responseText)}),n},_process:t})}),define("text!common/component/tree/template/treeLevelListTemplate.htm",[],function(){return'<ul class="list collapsible folders" style="top: {{- top}}px; position: relative;">\n\n    <js-templateNonce></js-templateNonce>\n    {{ _.each(items, function(item){ }}\n    <li class="{{- item._node ? \'node closed\' : \'leaf\'}} {{- item.selected ? \'selected\' : \'\'}}" data-index="{{- item.index }}" tabindex="-1">\n        <p class="wrap button draggable" data-tooltip="{{- item.value.label }}"><b class="icon"/> {{- item.value.label }} </p>\n        <div class="subcontainer" />\n    </li>\n    {{ }) }}\n</ul>\n'}),define("text!common/component/tree/template/treeLevelTemplate.htm",[],function(){return'<div>\n\n    <js-templateNonce></js-templateNonce>\n    <ul class="list collapsible folders">\n        <li class="node">\n            <p class="wrap button">\n                <b class="icon" id="handler2" title=""></b>root\n            </p>\n            <div class="subcontainer"/>\n        </li>\n    </ul>\n</div>'}),define("common/component/tree/Tree",["require","css!lists","jquery","underscore","backbone","./TreeLevel","./TreeDataLayer","text!./template/treeLevelListTemplate.htm","text!./template/treeLevelTemplate.htm"],function(e){"use strict";function t(e){var i=e.list.model.get("items"),a=this;i=n.where(i,{_node:!0}),e.$(".node").each(function(r,o){var l=i[r].id;e.items[l]?e.items[l].setElement(o):(e.items[l]=new s(n.extend({},a._options,{el:o,item:i[r],parent:e})),a.listenTo(e.items[l],"listRenderError",n.bind(function(e,t,i){this.trigger("levelRenderError",e,t,i)},a)),e.listenTo(e.items[l],"ready",n.bind(t,a)),e.listenTo(e.items[l],"selection:change",function(t,i,n){i&&n.push(i),e.list.model.clearSelection(),e.trigger("selection:change",t,e,n)}),e.listenTo(e.items[l],"item:dblclick",function(t){e.list.model.clearSelection(),e.trigger("item:dblclick",t)}),e.items[l].render())}).length&&e.$(".j-view-port-chunk").css({height:"auto"})}e("css!lists");var i=e("jquery"),n=e("underscore"),a=e("backbone"),s=e("./TreeLevel"),r=e("./TreeDataLayer"),o=e("text!./template/treeLevelListTemplate.htm"),l=e("text!./template/treeLevelTemplate.htm"),c={ADD:"add",UPDATE:"update"},d=a.View.extend({template:n.template(l),_plugins:[],el:function(){return this.template()},constructor:function(e){e||(e={}),this.defaultDataLayer=new r(e),this.customDataLayers=e.customDataLayers,e.type?(this._type=e.type,e.type=void 0):this._type="tree",e.collapserSelector||(e.collapserSelector="b.icon:eq(0)"),e.predefinedData?(this.defaultDataLayer.predefinedData=e.predefinedData,e.predefinedData=void 0):this.defaultDataLayer.predefinedData={},e.rootless&&(this.rootless=e.rootless,e.rootless=void 0),e.additionalCssClasses&&(this.additionalCssClasses=e.additionalCssClasses,e.additionalCssClasses=void 0),e.getDataLayer&&(this.getDataLayer=e.getDataLayer,e.getDataLayer=void 0),this._options=n.extend({itemsTemplate:o,plugins:this._plugins,owner:this},e),this.context=e.context||{};for(var t=0,i=this._plugins.length;t<i;t++)this._plugins[t].processors&&(this.processors=this.processors.concat(this._plugins[t].processors));a.View.apply(this,arguments)},initialize:function(e){this.rootLevel=new s(n.extend({},this._options,{levelHeight:e.rootLevelHeight},{el:this.$("li")[0]},{item:{id:"/",value:{id:"/",resourceType:"folder"}}})),this.rootless&&this.$el.find("ul:first").addClass("hideRoot"),this.additionalCssClasses&&this.$el.find("ul:first").addClass(this.additionalCssClasses),this.listenTo(this.rootLevel,"ready",n.bind(t,this)),this.listenTo(this.rootLevel,"selection:change",n.bind(function(e,t,i){t&&i&&n.isArray(i)&&(this.rootLevel.selection.multiple||this.rootLevel.resetSelection({silent:!0,exclude:[i[0]]})),this.trigger("selection:change",e)},this)),this.listenTo(this.rootLevel,"item:dblclick",n.bind(function(e){this.trigger("item:dblclick",e)},this));for(var i=0,a=this._plugins.length;i<a;i++)this._plugins[i].constr.treeInitialized.call(this,this._plugins[i].options);this.rootLevel.render(),e.collapsed&&e.lazyLoad&&this.rootless&&this.expand("/")},remove:function(){for(var e=0,t=this._plugins.length;e<t;e++)this._plugins[e].constr.treeRemoved.call(this);this.rootLevel.remove(),a.View.prototype.remove.apply(this,arguments)},expand:function(e,t){var i=this.getLevel(e);return i&&i.open(t),this},collapse:function(e,t){var i=this.getLevel(e);return i&&i.close(t),this},_getNodeByLevelId:function(e){var t,i,a=this.getLevel(e);if(a)return a.parent?(t=a.parent.list,{node:a.item,nodeElement:a.$el,itsList:t}):null;var s=!1;if("list"===this._type)s=this.rootLevel;else if("tree"===this._type){var r=e.split("/");if(r=r.slice(0,r.length-1).join("/"),""===r&&(r="/"),!(s=this.getLevel(r)))return null}return s?(t=s.list,i=n.find(t.model.get("items"),function(t){return t.id===e}),i?{node:i,nodeElement:t.$el.find("li.leaf.selected"),itsList:t}:null):null},select:function(e){var t=this._getNodeByLevelId(e);t&&(t.itsList.model.clearSelection().addValueToSelection(t.node.value,t.node.index),this.trigger("selection:change",t.itsList.getValue()))},deselect:function(e){},addItem:function(e,t){var i=this.getLevel(e),n=c.ADD;return i&&this._getNodeItems(e,i,t,n),this},updateItem:function(e,t){var i=t?this.getLevel(t):this.rootLevel;return i&&this._getNodeItems(i.id,i,e),this},resetSelection:function(e){return this.rootLevel.list.clearSelection(),this.rootLevel.list.model.selection=[],this.rootLevel.resetSelection(e),this},refresh:function(e){e&&(this.context=e),this.rootLevel.refresh()},recalcConstraints:function(){this.rootLevel.recalcConstraints()},fetchVisibleData:function(){this.rootLevel.fetchVisibleData()},clearCache:function(){this.rootLevel.clearCache()},getLevel:function(e){return this.rootLevel.id===e?this.rootLevel:this.rootLevel.getLevel(e)},getDataLayer:function(e){return this.customDataLayers&&this.customDataLayers[e.id]?this.customDataLayers[e.id]:this.defaultDataLayer},_addItem:function(e,t,i){return!n.findWhere(e,{id:i.id})&&e.push(i),e},_updateItem:function(e,t){return n.each(e,function(e){e.id===t.id&&n.extend(e,t)},this),e},_getNodeItems:function(e,t,i,a){var s,r=this.getDataLayer(t),o=t.list.model.get("items")?t.list.model.get("items"):[];r.predefinedData=r.predefinedData||{},s=a===c.ADD?this._addItem(o,e,i):this._updateItem(o,i),r.predefinedData[e]=n.sortBy(s,"label"),t.fetch({force:!0,keepPosition:!0})},_selectTreeNode:function(e,t){if(n.isString(e)&&""!==e){var a=n.bind(function(){var s=n.bind(function(){var i=e,n=this.getLevelId(i);if(this.expand(n),this.select(n),"list"===this._type)this.rootLevel.on("ready",a);else if("tree"===this._type&&t&&t.length){var s=this.$el,r=this._getNodeByLevelId(n);if(!r)return;var o=r.nodeElement;if(!o)return;var l=o.offset().top-s.offset().top-t.height()/2+o.height()/2;t.scrollTop(l)}},this);if("/"===e||"/public"===e||"list"===this._type)s();else{var r=e.replace(/\/$/,""),o=r.substr(0,r.lastIndexOf("/"));o=o||"/";var l=new i.Deferred;this._openPath(o,l,0),l.done(s)}},this);this.rootLevel.isReady()?a():this.rootLevel.on("ready",a)}},_openPath:function(e,t,i){if(!e)return t.resolve();var a,s,r,o,l=this;if("/"===e?s=["/"]:(s=e.split("/"),s[0]="/"),"/"===s[0]&&"public"===s[1]&&(s=n.union(["/public"],n.rest(s,2))),(i=i||0)===s.length)return t.resolve();a=n.first(s,i+1).join("/"),a=a.replace(/\/\//g,"/"),o=this.getLevelId(a),(r=this.getLevel(o))&&(r.collapsed?(r.once("ready",function(){l._openPath(e,t,i+1)}),r.open()):this._openPath(e,t,i+1))},getLevelId:function(e){var t="",i=["/public"];if("/"===e||"/root"===e)t="/root";else{for(var n=!1,a=0;a<i.length;a++)if(0===e.indexOf(i[a])){n=!0;break}t=n?e:"/root/"+e.substr(1)}return t}},{instance:function(e){return new this(e)}});return{use:function(e,t){return function(e){return{use:function(t,i){return e.prototype._plugins.push({constr:t,options:i}),this},create:function(){return e}}}(d.extend({_plugins:[{constr:e,options:t}]}))},create:function(){return d}}}),define("bi/repository/enum/olapConnectionTypesEnum",["require","bi/repository/enum/repositoryResourceTypes"],function(e){var t=e("bi/repository/enum/repositoryResourceTypes");return[t.MONDRIAN_CONNECTION,t.SECURE_MONDRIAN_CONNECTION,t.XMLA_CONNECTION]}),define("bi/repository/dialog/processor/factory/processorFactory",["require","underscore","settings/generalSettings","bi/repository/enum/olapConnectionTypesEnum","bi/repository/enum/repositoryResourceTypes","bundle!CommonBundle"],function(e){function t(e){switch(e.value.resourceType){case r.REPORT_UNIT:e.cssClass="report";break;case r.DOMAIN_TOPIC:e.cssClass="domain topic";break;case r.SEMANTIC_LAYER_DATA_SOURCE:e.cssClass="domain";break;case r.OLAP_CUBE:e.cssClass="olap"}return e}function i(e){return l[e]}var n=e("underscore"),a=e("settings/generalSettings"),s=e("bi/repository/enum/olapConnectionTypesEnum"),r=e("bi/repository/enum/repositoryResourceTypes"),o=e("bundle!CommonBundle"),l={folderTreeProcessor:{processItem:function(e){return e._readonly=!(1==e.value.permissionMask||4&e.value.permissionMask),e}},treeNodeProcessor:{processItem:function(e){return e._node=n.contains(n.union([r.FOLDER],s),e.value.resourceType),e}},i18nItemProcessor:{processItem:function(e){return e.i18n=o,e}},filterPublicFolderProcessor:{processItem:function(e){if(e.value.uri!=="/root"+a.publicFolderUri&&e.value.uri!=="/root"+a.tempFolderUri)return e}},filterEmptyFoldersProcessor:{processItem:function(e){if("folder"!==e.value.resourceType||""!==e.value._links.content)return e}},cssClassItemProcessor:{processItem:t},fakeUriProcessor:{processItem:function(e){return e.value.uri&&e.value.uri.match(/^\/root/)&&(e.value.uri=e.value.uri.replace("/root","")),e}}};return i}),define("text!bi/repository/dialog/resourceChooser/template/repositoryFolderChooserDialogTooltipTemplate.htm",[],function(){return'<p class="message label">\n\n    <js-templateNonce></js-templateNonce>\n    {{- model.i18n[\'tooltip.name\'] }}</p>\n<p class="message">{{- model.value.label }}</p>\n<p class="message label">{{- model.i18n[\'tooltip.path\'] }}</p>\n<p class="message">{{- model.value.uri }}</p>'}),define("text!bi/repository/dialog/resourceChooser/template/repositoryFoldersTreeLevelTemplate.htm",[],function(){
return'<ul class="list collapsible" style="top: {{- top}}px; position: relative;">\n\n    <js-templateNonce></js-templateNonce>\n\t{{ _.each(items, function(item){ }}\n\t<li class="{{- item._node ? \'node closed\' : \'leaf\'}} {{- item.selected ? \'selected\' : \'\'}} {{- item._readonly ? \'readonly\' : \'\'}}" data-index="{{- item.index }}" tabindex="-1">\n\t\t<p class="wrap button draggable" data-tooltip=\'true\'><b class="icon"/> {{- item.value.label }} </p>\n\t\t<div class="subcontainer" />\n\t</li>\n\t{{ }) }}\n</ul>\n'}),define("bi/repository/factory/repositoryTreeFactory",["require","common/component/tree/Tree","jquery","underscore","bundle!CommonBundle","common/component/tree/TreeDataLayer","bi/repository/dialog/processor/factory/processorFactory","common/component/tree/plugin/TooltipPlugin","bi/repository/enum/repositoryResourceTypes","bi/repository/enum/olapConnectionTypesEnum","text!../dialog/resourceChooser/template/repositoryFolderChooserDialogTooltipTemplate.htm","text!../dialog/resourceChooser/template/repositoryFoldersTreeLevelTemplate.htm","settings/generalSettings","jrs.configs"],function(e){"use strict";function t(e){var t=h.extend({},{i18n:p,contentTemplate:S},e.tooltipOptions);return e.constr||d.use(g,t).create()}function i(e){e=e||{};var i=e.processors=h.map(e.processors,function(e){return f(e)});return t(e).instance({listItemHeight:D,bufferSize:e.treeBufferSize||C,additionalCssClasses:"folders",collapserSelector:e.collapserSelector,openClass:e.openClass,closedClass:e.closedClass,levelDataId:"uri",itemsTemplate:e.treeItemsTemplate||y,collapsed:!0,lazyLoad:!0,rootless:!0,getDataUri:h.partial(l,{containerType:e.containerType,types:e.types,isList:!1}),selection:{allowed:!0,multiple:!1},customDataLayers:{"/":a(e)},processors:i,getDataArray:function(e){if(e&&e[v.RESOURCE_LOOKUP]){e=e[v.RESOURCE_LOOKUP];var t=this.levelDataId;return h.first(e)[t].match(/^\/public/)||(e=h.map(e,function(e){return e.uri="/root"+e[t],e})),e}return[]},getDataSize:function(e,t,i){return+i.getResponseHeader("Total-Count")},getDataLayer:o})}function n(e){var t=[],i=f("filterPublicFolderProcessor");return h.each(e,function(e){e!==i&&t.push(e)}),t}function a(e){var t=e.processors,i=n(t);return h.extend(new m({dataUriTemplate:e.contextPath+"/flow.html?_flowId=searchFlow&method=getNode&provider=repositoryExplorerTreeFoldersProvider&uri=/&depth=1",processors:i,getDataArray:function(e){e=JSON.parse(u(e).text());var t=h.find(e.children,function(e){return"/public"===e.uri}),i=[{id:"/root",label:e.label,uri:"/",resourceType:"folder",permissionMask:c(e.extra),_links:{content:"@fakeContentLink"}}];return t&&i.push({id:"/public",label:t.label,uri:"/public",resourceType:"folder",permissionMask:c(t.extra),_links:{content:"@fakeContentLink"}}),i}}),{accept:"text/html",dataType:"text"})}function s(e){var i=r(),n=e.processors;return t(e).instance({itemsTemplate:e.treeItemsTemplate||y,listItemHeight:D,selection:{allowed:!0,multiple:!1},rootless:!0,collapsed:!0,lazyLoad:!0,getDataUri:h.partial(l,{containerType:e.containerType,types:e.types,isList:!0}),levelDataId:"uri",cache:{searchKey:"searchString",pageSize:100},processors:n,customDataLayers:{olapDataLayer:i},getDataLayer:o,getDataArray:function(e){return e&&e[v.RESOURCE_LOOKUP]?e[v.RESOURCE_LOOKUP]:[]},getDataSize:function(e,t,i){return+i.getResponseHeader("Total-Count")}})}function r(){return new m({requestType:"POST",dataUriTemplate:T.contextPath+"/rest_v2/connections",processors:[f("i18nItemProcessor"),f("cssClassItemProcessor")],levelDataId:"uri",getDataArray:function(e){return e&&e[v.RESOURCE_LOOKUP]?e[v.RESOURCE_LOOKUP]:[]}})}function o(e){var t;if(e=e.item?e:this.getLevel(e.id)){if(t=e.item.value.resourceType,h.contains(b,t)){var i=h.clone(this.customDataLayers.olapDataLayer);return h.extend(i,{accept:"application/repository."+t+".metadata+json",contentType:"application/repository."+t+"+json",data:JSON.stringify(t)}),i}return this.customDataLayers&&this.customDataLayers[e.id]?this.customDataLayers[e.id]:this.defaultDataLayer}}function l(e,t){var i,n,a=T.contextPath+"/rest_v2/api/resources?";return i=t.id.match(/^\/root/)?t.id.replace("/root",""):t.id,i&&(a+="folderUri="+i),n=e.isList?x:E,e.containerType&&(n=n+"&containerType="+e.containerType),a+n+"&type="+e.types.join("&type=")+h.template(w)(t)}function c(e){var t=2;return e.isWritable&&(t|=4),e.isRemovable&&(t|=16),e.isAdministrable&&(t=1),t}var d=e("common/component/tree/Tree"),u=e("jquery"),h=e("underscore"),p=e("bundle!CommonBundle"),m=e("common/component/tree/TreeDataLayer"),f=e("bi/repository/dialog/processor/factory/processorFactory"),g=e("common/component/tree/plugin/TooltipPlugin"),v=e("bi/repository/enum/repositoryResourceTypes"),b=e("bi/repository/enum/olapConnectionTypesEnum"),S=e("text!../dialog/resourceChooser/template/repositoryFolderChooserDialogTooltipTemplate.htm"),y=e("text!../dialog/resourceChooser/template/repositoryFoldersTreeLevelTemplate.htm"),_=e("settings/generalSettings"),T=e("jrs.configs"),D=22,C=5e3,w="&offset={{= offset }}&limit={{= limit }}&forceTotalCount=true&forceFullPage=true",E="&recursive=false",x="&recursive=true",I=function(e){if(e=e||{},!e.types)throw"Resources types required";return e.listView?s(e):i(e)};return I.settings=_,I}),define("dataSource/saveDialog/BaseSaveDialogView",["require","underscore","bundle!all","common/util/browserDetection","bi/repository/model/RepositoryResourceModel","common/component/dialog/DialogWithModelInputValidation","text!dataSource/saveDialog/template/baseSaveDialogTemplate.htm","settings!treeComponent","bi/repository/factory/repositoryTreeFactory","bi/repository/enum/repositoryResourceTypes"],function(e){"use strict";var t=e("underscore"),i=e("bundle!all"),n=(e("common/util/browserDetection"),e("bi/repository/model/RepositoryResourceModel")),a=e("common/component/dialog/DialogWithModelInputValidation"),s=e("text!dataSource/saveDialog/template/baseSaveDialogTemplate.htm"),r=e("settings!treeComponent"),o=e("bi/repository/factory/repositoryTreeFactory"),l=e("bi/repository/enum/repositoryResourceTypes");return a.extend({theDialogIsOpen:!1,autoUpdateResourceID:!0,saveDialogTemplate:s,constructor:function(e){e||(e={}),this.options=e;var n=this.extendModel(this.options.model),s=this._getLabelForSaveButton(n);this.autoUpdateResourceID=!this.options.isEditMode,this.preSelectedFolder=e.parentFolderUri,a.prototype.constructor.call(this,{skipLocation:!!e.skipLocation,modal:!0,model:n,minHeight:500,minWidth:440,setMinSizeAsSize:!0,resizable:!e.skipLocation,additionalCssClasses:"dataSourceSaveDialog"+(e.skipLocation?" no-minheight":""),title:i["resource.datasource.saveDialog.save"],content:t.template(this.saveDialogTemplate,{i18n:i,model:t.extend({},n.attributes),skipLocation:!!this.options.skipLocation,isEmbedded:this.options.isEmbedded,isEditMode:this.options.isEditMode}),buttons:[{label:i[s],action:"save",primary:!0},{label:i["resource.datasource.saveDialog.cancel"],action:"cancel",primary:!1}]}),this.on("button:save",t.bind(this._onSaveDialogSaveButtonClick,this)),this.on("button:cancel",t.bind(this._onSaveDialogCancelButtonClick,this))},initialize:function(e){a.prototype.initialize.apply(this,arguments),!t.isUndefined(this.preSelectedFolder)&&this.preSelectedFolder||(this.preSelectedFolder="/"),e.skipLocation||this.initializeTree(),this.listenTo(this.model,"change:label",this._onDataSourceNameChange),this.$contentContainer.find("[name=name]").change(t.bind(this._onResourceIDInputChange,this))},restoreModel:function(){this.originalModelValidation&&(this.model.validation=this.originalModelValidation)},extendModel:function(e){return this.originalModelValidation=e.validation,e.validation=t.extend({},n.prototype.validation,{label:[{required:!0,msg:i["resource.datasource.saveDialog.validation.not.empty.label"]},{maxLength:n.settings.LABEL_MAX_LENGTH,msg:i["resource.datasource.saveDialog.validation.too.long.label"]}],name:[{required:!0,msg:i["resource.datasource.saveDialog.validation.not.empty.name"]},{maxLength:n.settings.NAME_MAX_LENGTH,msg:i["resource.datasource.saveDialog.validation.too.long.name"]},{doesNotContainSymbols:n.settings.NAME_NOT_SUPPORTED_SYMBOLS,msg:i["resource.datasource.saveDialog.validation.invalid.chars.name"]}],description:[{required:!1},{maxLength:n.settings.DESCRIPTION_MAX_LENGTH,msg:i["resource.datasource.saveDialog.validation.too.long.description"]}],parentFolderUri:[{fn:function(e){if(!this.options.skipLocation){if(t.isNull(e)||t.isUndefined(e)||t.isString(e)&&""===e)return i["resource.datasource.saveDialog.validation.not.empty.parentFolderIsEmpty"];if("/"!==e.slice(0,1))return i["resource.datasource.saveDialog.validation.folder.not.found"].replace("{0}",e)}}}]}),e},initializeTree:function(){this.foldersTree=o({processors:["folderTreeProcessor","treeNodeProcessor","i18nItemProcessor","filterPublicFolderProcessor","cssClassItemProcessor","fakeUriProcessor"],treeBufferSize:r.treeLevelLimit,types:[l.FOLDER],tooltipOptions:{}}),this.listenTo(this.foldersTree,"selection:change",function(e){var i;e&&t.isArray(e)&&e[0]&&e[0].uri&&(i=e[0].uri),i&&this.model.set("parentFolderUri",i)}),this.$el.find(".treeBox .folders").append(this.foldersTree.render().el);var e=this.foldersTree.$el.parent().parent().parent();this.foldersTree._selectTreeNode(this.preSelectedFolder,e)},startSaveDialog:function(){this._openDialog()},_openDialog:function(){this.theDialogIsOpen||(this.bindValidation(),a.prototype.open.apply(this,arguments),this.$contentContainer.find("[name=label]").focus(),this.theDialogIsOpen=!0)},_closeDialog:function(){this.theDialogIsOpen&&(this.unbindValidation(),this.clearValidationErrors(),a.prototype.close.apply(this,arguments),this.theDialogIsOpen=!1)},_getLabelForSaveButton:function(){return"resource.datasource.saveDialog.save"},_onDialogResize:function(){var e=this,t=0,i=this.$contentContainer.find(".control.groupBox.treeBox"),n=this.$contentContainer.closest(".jr-mDialog > .jr-mDialog-body");this.$contentContainer.children().not(i).each(function(){t+=e.$(this).outerHeight(!0)}),i.height(n.outerHeight(!0)-t-40)},_onDataSourceNameChange:function(){if(this.autoUpdateResourceID){var e=n.generateResourceName(this.model.get("label"));this.model.set("name",e),this.$("input[name='name']").val(e)}},_onResourceIDInputChange:function(){this.autoUpdateResourceID=!1},_onSaveDialogCancelButtonClick:function(){this.restoreModel(),this._closeDialog()},_onSaveDialogSaveButtonClick:function(){this.model.isValid(!0)&&this.performSave()},performSave:function(){if(this.options.saveFn)return void this.options.saveFn(this.model.attributes,this.model);this.model.save({},{success:t.bind(this._saveSuccessCallback,this),error:t.bind(this._saveErrorCallback,this)})},_saveSuccessCallback:function(e){this._closeDialog(),t.isFunction(this.options.success)&&this.options.success(e)},_saveErrorCallback:function(e,n,a){var s=this,r=!1,o=!1;try{r=JSON.parse(n.responseText)}catch(e){}t.isArray(r)||(r=[r]),t.each(r,function(e){var t=!1,n=!1;e&&(s.theDialogIsOpen&&("version.not.match"===e.errorCode?(t="name",n=i["resource.dataSource.resource.alreadyInUse"]):"mandatory.parameter.error"===e.errorCode?e.parameters&&e.parameters[0]&&(n=i["resource.datasource.saveDialog.parameterIsMissing"],t=e.parameters[0].substr(e.parameters[0].indexOf(".")+1)):"illegal.parameter.value.error"===e.errorCode?e.parameters&&e.parameters[0]&&(t=e.parameters[0].substr(e.parameters[0].indexOf(".")+1),n=i["resource.datasource.saveDialog.parameterIsWrong"]):"folder.not.found"===e.errorCode?(t="parentFolderUri",n=i["ReportDataSourceValidator.error.folder.not.found"].replace("{0}",e.parameters[0])):"access.denied"===e.errorCode&&(t="parentFolderUri",n=i["jsp.accessDenied.errorMsg"])),n&&t&&-1!==["label","name","description","parentFolderUri"].indexOf(t)&&(s.invalidField("[name="+t+"]",n),o=!0))}),!1===o&&t.isFunction(this.options.error)&&this.options.error(e,n,a)}})}),define("common/enum/javaTypeMapper",[],function(){return{"java.lang.Date":"javaTypes.java.lang.Date","java.lang.String":"javaTypes.java.lang.String","java.lang.Integer":"javaTypes.java.lang.Integer","java.lang.Boolean":"javaTypes.java.lang.Boolean","java.lang.Double":"javaTypes.java.lang.Double","java.sql.Timestamp":"javaTypes.java.sql.Timestamp","java.lang.Short":"javaTypes.java.lang.Short","java.math.BigDecimal":"javaTypes.java.math.BigDecimal","java.lang.Long":"javaTypes.java.lang.Long","java.sql.Time":"javaTypes.java.sql.Time"}}),define("dataSource/fileDataSource/enum/javaTypes",[],function(){return["java.lang.Date","java.lang.String","java.lang.Integer","java.lang.Boolean","java.lang.Double","java.sql.Timestamp","java.lang.Short","java.math.BigDecimal","java.lang.Long","java.sql.Time"]}),define("dataSource/fileDataSource/SimpleDomainModel",["require","jquery","underscore","request","jrs.configs","bi/repository/model/RepositoryResourceModel"],function(e){"use strict";var t=e("jquery"),i=e("underscore"),n=e("request"),a=e("jrs.configs"),s=e("bi/repository/model/RepositoryResourceModel");return s.extend({defaults:{uri:void 0,label:void 0,columns:[],dataSourceUri:void 0},validation:{columns:function(e){var t=[];return i.each(e,function(e,i){e.label||t.push({rowId:i,name:"label"})}),0!==t.length?this.trigger("validationFailed",t):this.trigger("validationPassed"),null}},type:"simpleDomain",url:function(){return a.contextPath+"/rest_v2/domains"},isNew:function(){return!0},constructor:function(e,t){s.prototype.constructor.apply(this,arguments),this.dataSource=t.dataSource,t.dataSource&&t.dataSource.uri&&this.set("dataSourceUri",t.dataSource.uri)},save:function(e,t){return i.defaults(t||(t={}),{headers:{Accept:"application/json","Content-Type":"application/simpleDomain+json; charset=UTF-8"}}),s.prototype.save.call(this,e,t)},parseMetadata:function(e){return i.each(e.columns,function(e){e.show=!0}),e},parse:function(e){var t=s.prototype.parse.apply(this,arguments);return t.dataSource&&(t.dataSourceUri=t.dataSource.dataSourceReference,delete t.dataSource),t.metadata&&(t.columns=t.metadata.columns,delete t.metadata),t},toJSON:function(){var e=s.prototype.toJSON.apply(this,arguments);return e.dataSource={dataSourceReference:e.dataSourceUri},e.metadata={columns:i.reduce(e.columns,function(e,t){return t.show&&e.push(t),e},[]),queryLanguage:"csv"},delete e.dataSourceUri,delete e.columns,e},fetchMetadata:function(){var e=this,i=t.Deferred();return n({type:"POST",url:a.contextPath+"/rest_v2/connections",dataType:"json",data:JSON.stringify(this.dataSource),headers:{"Content-Type":"application/repository.customDataSource+json",Accept:"application/table.metadata+json"}}).done(function(t){t=e.parseMetadata(t),e.set("columns",t.columns),i.resolve(t)}).fail(function(e){i.reject(e)}),i}})}),define("text!common/templates/standardConfirm.htm",[],function(){return'<div class="panel dialog overlay standardConfirm moveable centered_horz centered_vert">\n\n    <js-templateNonce></js-templateNonce>\n    <div class="content hasFooter ">\n        <div class="header mover">\n            <div class="title">\n                Confirm\n            </div>\n        </div>\n\n        <div class="body  ">\n        </div>\n\n        <div class="footer ">\n\n            <button class="button action primary up ok" name="buttonOK">\n                <span class="wrap">OK</span>\n                <span class="icon"></span>\n            </button>\n            <button class="button action up cancel" name="buttonCancel">\n                <span class="wrap">Cancel</span>\n                <span class="icon"></span>\n            </button>\n\n        </div>\n\n    </div>\n</div>'}),define("text!dataSource/saveDialog/template/domainSaveDialogTemplate.htm",[],function(){return'<label title="{{- i18n[\'resource.datasource.saveDomainDialog.domainNameTitle\']}}" class="control input text ">\n\n    <js-templateNonce></js-templateNonce>\n\t<span class="wrap">{{- i18n[\'resource.datasource.saveDomainDialog.domainName\']}} ({{- i18n[\'required.field\']}}):</span>\n\t<input type="text" value="{{- model.label }}" name="label">\n\t<span class="message warning"></span>\n</label>\n\n\n<label title="{{- i18n[\'resource.datasource.saveDomainDialog.resourceIDTitle\']}}" class="control input text ">\n\t<span class="wrap">{{- i18n[\'resource.datasource.saveDomainDialog.resourceID\']}} ({{- i18n[\'required.field\']}}):</span>\n\t<input type="text" {{ if (model.isEditMode) { }}readonly="readonly"{{ } }} value="{{- model.name }}" name="name">\n\t<span class="message warning"></span>\n</label>\n\n\n<label title="{{- i18n[\'resource.datasource.saveDomainDialog.descriptionTitle\']}}" class="control textArea">\n\t<span class="wrap">{{- i18n[\'resource.datasource.saveDomainDialog.description\']}}</span>\n\t<textarea type="text" name="description">{{- model.description }}</textarea>\n\t<span class="message warning"></span>\n</label>\n\n{{ if (skipLocation === false) { }}\n<div class="control groupBox treeBox">\n\t<div class="content">\n\t\t<div class="header ">\n\t\t\t<div class="title"></div>\n\t\t</div>\n        <ul class="list collapsible folders"></ul>\n\t</div>\n</div>\n\n<label class="control textArea">\n\t<textarea type="text" class="hidden" name="parentFolderUri"></textarea>\n\t<span class="message warning"></span>\n</label>\n{{ } }}\n\n\x3c!--\n<div class="control checkBox toggle">\n    <label for="__jrs_openInAdHocDesigner" class="wrap">{{- i18n[\'resource.datasource.saveDomainDialog.openInAdhoc\']}}</label>\n    <input type="checkbox" name="openInAdHocDesigner" id="__jrs_openInAdHocDesigner" {{ if (model.openInAdHocDesigner) { }}checked="checked"{{ } }} />\n</div>\n--\x3e'}),define("dataSource/saveDialog/DomainSaveDialogView",["require","underscore","jquery","bundle!all","request","bi/repository/model/RepositoryResourceModel","dataSource/saveDialog/BaseSaveDialogView","text!common/templates/standardConfirm.htm","text!dataSource/saveDialog/template/domainSaveDialogTemplate.htm"],function(e){"use strict";var t=e("underscore"),i=e("jquery"),n=e("bundle!all"),a=(e("request"),e("bi/repository/model/RepositoryResourceModel")),s=e("dataSource/saveDialog/BaseSaveDialogView"),r=e("text!common/templates/standardConfirm.htm"),o=e("text!dataSource/saveDialog/template/domainSaveDialogTemplate.htm");return s.extend({saveDialogTemplate:o,constructor:function(e){e||(e={}),this.options=e,s.prototype.constructor.call(this,e)},initialize:function(){this.preSelectedFolder=a.getParentFolderFromUri(this.options.dataSource.uri)||"/",s.prototype.initialize.apply(this,arguments),this.listenTo(this.model,"change:openInAdHocDesigner",this._onOpenInAdHocDesignerChange)},extendModel:function(e){var i,r,o,l=s.prototype.extendModel.call(this,e),c=this;return l.set("openInAdHocDesigner",!1),i=e.dataSource.label,r=i+" Domain",o=a.generateResourceName(r),l.set("label",r),l.set("name",o),l.validation=t.extend({},a.prototype.validation,{label:[{required:!0,msg:n["resource.datasource.saveDomainDialog.validation.not.empty.label"]},{maxLength:a.settings.LABEL_MAX_LENGTH,msg:n["resource.datasource.saveDomainDialog.validation.too.long.label"]}],name:[{required:!0,msg:n["resource.datasource.saveDomainDialog.validation.not.empty.name"]},{maxLength:a.settings.NAME_MAX_LENGTH,msg:n["resource.datasource.saveDomainDialog.validation.too.long.name"]},{doesNotContainCharacters:a.settings.NAME_NOT_SUPPORTED_SYMBOLS,msg:n["resource.datasource.saveDomainDialog.validation.invalid.chars.name"]}],description:[{required:!1},{maxLength:a.settings.DESCRIPTION_MAX_LENGTH,msg:n["resource.datasource.saveDomainDialog.validation.too.long.description"]}],parentFolderUri:[{fn:function(e){if(!c.options.skipLocation){if(t.isNull(e)||t.isUndefined(e)||t.isString(e)&&""===e)return n["resource.datasource.saveDomainDialog.validation.not.empty.parentFolderIsEmpty"];if("/"!==e.slice(0,1))return n["resource.datasource.saveDomainDialog.validation.folder.not.found"].replace("{0}",e)}}}]}),l},_onOpenInAdHocDesignerChange:function(){var e=this._getLabelForSaveButton();this.changeButtonLabel("save",n[e])},_getLabelForSaveButton:function(e){e=e||this.model;var t="resource.datasource.saveDialog.save";return e.get("openInAdHocDesigner")&&(t="resource.datasource.saveDomainDialog.saveAndOpenDesigner"),t},_onSaveDialogCancelButtonClick:function(){var e=this,n=i(r);n.find(".body").html("You are about to cancel the creation of a new domain.<br/>If You wish to create a domain in the future,<br/>You will need to go through the regular Domain Designer.<br/>The data source, however, has successfully been saved."),dialogs.popupConfirm.show(n.get(0),!0,{okButtonSelector:"[name=buttonOK]",cancelButtonSelector:"[name=buttonCancel]"}).done(function(){e._closeDialog(),t.isFunction(e.options.success)&&e.options.success()})},performSave:function(){var e=this;this.model.save().done(function(){e._closeDialog(),t.isFunction(e.options.success)&&e.options.success()})}})}),define("text!dataSource/fileDataSource/template/simpleDomainDialogTemplate.htm",[],function(){return'<div class="usageTooltip">\n\n    <js-templateNonce></js-templateNonce>\n    {{- i18n[\'resource.datasource.createDomain.useTooltip\']}}.</div>\n\n<div class="tableHolder">\n    <table class="table" unselectable="on" onselectstart="return false">\n        <tbody>\n\n        <tr class="header">\n            <td class="jrs-grid-cell"><div class="jrs-grid-cell-content">{{- i18n[\'resource.datasource.createDomain.table.fields.show\']}}</div></td>\n            <td class="jrs-grid-cell"><div class="jrs-grid-cell-content">{{- i18n[\'resource.datasource.createDomain.table.fields.fieldName\']}}</div></td>\n            <td class="jrs-grid-cell"><div class="jrs-grid-cell-content">{{- i18n[\'resource.datasource.createDomain.table.fields.displayLabel\']}}</div></td>\n            <td class="jrs-grid-cell"><div class="jrs-grid-cell-content">{{- i18n[\'resource.datasource.createDomain.table.fields.type\']}}</div></td>\n        </tr>\n\n        {{_.each(columns, function(field, y) { }}\n        <tr class="bodyCell" data-fieldId="{{- y }}">\n            <td class="jrs-grid-cell cell_1">\n                <div class="jrs-grid-cell-content">\n                    <input type="checkbox" name="show" {{- field.show ? "checked" : "" }} />\n                </div>\n            </td>\n            <td class="jrs-grid-cell cell_2">\n                <div class="jrs-grid-cell-content">\n                    {{- field.name }}\n                </div>\n            </td>\n            <td class="jrs-grid-cell cell_3">\n                <div class="jrs-grid-cell-content">\n                    <input type="text" name="label" value="{{- field.label }}" />\n                    <span class="message warning"></span>\n                </div>\n            </td>\n            <td class="jrs-grid-cell cell_4">\n                <div class="jrs-grid-cell-content">\n                    <select name="javaType">\n                    {{ _.each(javaTypes, function(javaType) { }}\n                        <option value="{{- javaType }}" {{- javaType === field.javaType ? "selected" : ""}}>{{- i18n[javaTypeMapper[javaType]]}}</option>\n                    {{ }); }}\n                    </select>\n                </div>\n            </td>\n        </tr>\n        {{ }); }}\n        </tbody>\n    </table>\n</div>\n\n<div class="usageDescription">{{- i18n[\'resource.datasource.createDomain.useTooptip.firstPart\']}}.</div>\n\n<div class="usageDescription2">{{- i18n[\'resource.datasource.createDomain.useTooptip.secondPart\']}}.</div>\n'}),define("dataSource/fileDataSource/SimpleDomainView",["require","jquery","underscore","bundle!all","common/enum/javaTypeMapper","dataSource/fileDataSource/enum/javaTypes","jrs.configs","dataSource/fileDataSource/SimpleDomainModel","common/component/dialog/DialogWithModelInputValidation","dataSource/saveDialog/DomainSaveDialogView","text!common/templates/standardConfirm.htm","text!dataSource/fileDataSource/template/simpleDomainDialogTemplate.htm"],function(e){"use strict";var t=e("jquery"),i=e("underscore"),n=e("bundle!all"),a=e("common/enum/javaTypeMapper"),s=e("dataSource/fileDataSource/enum/javaTypes"),r=e("jrs.configs"),o=e("dataSource/fileDataSource/SimpleDomainModel"),l=e("common/component/dialog/DialogWithModelInputValidation"),c=e("dataSource/saveDialog/DomainSaveDialogView"),d=e("text!common/templates/standardConfirm.htm"),u=e("text!dataSource/fileDataSource/template/simpleDomainDialogTemplate.htm");return l.extend({hasChanges:!1,modelIsValid:!0,theDialogIsOpen:!1,constructor:function(e){e||(e={}),this.options=e,this.dataSource=e.dataSource?e.dataSource:{};this.model=new o({},e),l.prototype.constructor.call(this,{modal:!0,model:this.model,width:400,additionalCssClasses:"dataSourceCreateNewDomainDialog",title:n["resource.datasource.createDomain.dialogTitle"],content:"",buttons:[{label:n["resource.datasource.createDomain.save"],action:"save",primary:!0},{label:n["resource.datasource.createDomain.cancel"],action:"cancel",primary:!1}]}),this.on("button:save",i.bind(this._onSaveButtonClick,this)),this.on("button:cancel",i.bind(this._onCancelButtonClick,this)),this.model.on("validationPassed",i.bind(this.clearValidationErrors,this)),this.model.on("validationFailed",i.bind(this.validationFailed,this))},initialize:function(e){l.prototype.initialize.apply(this,arguments)},updateModelProperty:function(e){var i,a,s=t(e.target),r=s.attr("type"),o=s.attr("name"),l=s.parents("tr").attr("data-fieldId");a="checkbox"===r||"radio"===r?s.is(":checked"):t.trim(s.val()),i=this.model.get("columns"),i[l][o]=a,this.model.set("columns",i),this.model.validate("columns"),!1===this.hasChanges&&this.changeButtonLabel("save",n["resource.datasource.createDomain.applyAndSave"]),this.hasChanges=!0},startDialog:function(){var e=this;this.theDialogIsOpen||(this.bindValidation(),this.model.fetchMetadata(this.dataSource).done(function(){l.prototype.open.apply(e,arguments);var t=i.template(u,{i18n:n,javaTypes:s,columns:e.model.get("columns"),javaTypeMapper:a});e.setContent(t),e._center()}),this.theDialogIsOpen=!0)},fieldIsValid:function(){},fieldIsInvalid:function(e){},clearValidationErrors:function(){this.$el.find(".error").removeClass("error"),this.modelIsValid=!0},validationFailed:function(e){var a=this;this.clearValidationErrors(),this.modelIsValid=!1,i.each(e,function(e){var i=t(a.$el.find("table tr").get(e.rowId+1));i.find("[name="+e.name+"]").parent().addClass("error"),i.find(".message").text(n["resource.datasource.createDomain.validation.missing.label"])})},_closeDialog:function(){this.theDialogIsOpen&&(this.unbindValidation(),this.clearValidationErrors(),l.prototype.close.apply(this,arguments),this.theDialogIsOpen=!1)},_onCancelButtonClick:function(){var e=this,i=n["resource.datasource.createDomain.cancelMessage"],a=t(d);a.find(".body").html(i),dialogs.popupConfirm.show(a.get(0),!0,{okButtonSelector:"[name=buttonOK]",cancelButtonSelector:"[name=buttonCancel]"}).done(function(){e._closeDialog(),e.options.cancel&&e.options.cancel()})},_onSaveButtonClick:function(){this.modelIsValid&&(this._closeDialog(),this.saveDialog=new c(i.extend({},this.options,{model:this.model,success:function(){redirectToUrl(r.contextPath+"/flow.html?_flowId=repositoryConfirmFlow&resourceType=dataSource&resourceType=domain")}})),this.saveDialog.startSaveDialog())}})}),define("text!dataSource/saveDialog/template/textDataSourceSaveDialogTemplate.htm",[],function(){return'<label title="{{- i18n[\'resource.datasource.saveDialog.dataSourceNameTitle\']}}" class="control input text ">\n\n    <js-templateNonce></js-templateNonce>\n\t<span class="wrap">{{- i18n[\'resource.datasource.saveDialog.dataSourceName\']}} ({{- i18n[\'required.field\']}}):</span>\n\t<input type="text" value="{{- model.label }}" name="label">\n\t<span class="message warning"></span>\n</label>\n\n\n<label title="{{- i18n[\'resource.datasource.saveDialog.resourceIDTitle\']}}" class="control input text ">\n\t<span class="wrap">{{- i18n[\'resource.datasource.saveDialog.resourceID\']}} ({{- i18n[\'required.field\']}}):</span>\n\t<input type="text" {{ if (isEditMode) { }}readonly="readonly"{{ } }} value="{{- model.name }}" name="name">\n\t<span class="message warning"></span>\n</label>\n\n\n<label title="{{- i18n[\'resource.datasource.saveDialog.descriptionTitle\']}}" class="control textArea">\n\t<span class="wrap">{{- i18n[\'resource.datasource.saveDialog.description\']}}</span>\n\t<textarea type="text" name="description">{{- model.description }}</textarea>\n\t<span class="message warning"></span>\n</label>\n\n{{ if (skipLocation === false) { }}\n<div class="control groupBox treeBox">\n\t<div class="content">\n\t\t<div class="header ">\n\t\t\t<div class="title"></div>\n\t\t</div>\n        <ul class="list collapsible folders"></ul>\n\t</div>\n</div>\n\n<label class="control textArea">\n\t<textarea type="text" class="hidden" name="parentFolderUri"></textarea>\n\t<span class="message warning"></span>\n</label>\n{{ } }}\n\n{{ if (!(isEmbedded || isEditMode)) { }}\n<div class="control checkBox toggle">\n    <label for="__jrs_prepareDataForReporting" class="wrap">{{- i18n[\'resource.datasource.saveDialog.prepareData\']}}</label>\n    <input type="checkbox" name="prepareDataForReporting" id="__jrs_prepareDataForReporting" {{ if (model.prepareDataForReporting) { }}checked="checked"{{ } }} />\n</div>\n{{ } }}\n'}),define("dataSource/saveDialog/TextDataSourceSaveDialogView",["require","underscore","bundle!all","dataSource/fileDataSource/SimpleDomainView","dataSource/saveDialog/BaseSaveDialogView","text!dataSource/saveDialog/template/textDataSourceSaveDialogTemplate.htm"],function(e){"use strict";var t=e("underscore"),i=e("bundle!all"),n=e("dataSource/fileDataSource/SimpleDomainView"),a=e("dataSource/saveDialog/BaseSaveDialogView"),s=e("text!dataSource/saveDialog/template/textDataSourceSaveDialogTemplate.htm");return a.extend({saveDialogTemplate:s,constructor:function(e){e||(e={}),this.options=t.extend({},e),this.options.isEmbedded=!!this.options.saveFn,a.prototype.constructor.call(this,e)},initialize:function(){this.preSelectedFolder=this.options.model.options.parentFolderUri,a.prototype.initialize.apply(this,arguments),this.listenTo(this.model,"change:prepareDataForReporting",this._onPrepareDataForReportingChange)},extendModel:function(e){var t=a.prototype.extendModel.call(this,e);return t.set("prepareDataForReporting",!(this.options.isEmbedded||this.options.isEditMode)),t},_onPrepareDataForReportingChange:function(){var e=this._getLabelForSaveButton();this.changeButtonLabel("save",i[e])},_getLabelForSaveButton:function(e){e=e||this.model;var t="resource.datasource.saveDialog.save";return"textDataSource"===e.get("dataSourceName")&&e.get("prepareDataForReporting")&&(t="resource.datasource.saveDialog.saveAndCreateDomain"),t},_saveSuccessCallback:function(e,i){if(this.model.get("prepareDataForReporting")){new n({cancel:this.options.success,dataSource:this.model.toJSON()}).startDialog()}else t.isFunction(this.options.success)&&this.options.success();this._closeDialog()}})}),define("dataSource/factory/saveDialogViewFactory",["require","dataSource/saveDialog/BaseSaveDialogView","dataSource/saveDialog/TextDataSourceSaveDialogView","dataSource/saveDialog/DomainSaveDialogView"],function(e){"use strict";var t=e("dataSource/saveDialog/BaseSaveDialogView"),i=e("dataSource/saveDialog/TextDataSourceSaveDialogView"),n=e("dataSource/saveDialog/DomainSaveDialogView"),a={};return a.textDataSource=i,a.domain=n,{getView:function(e){var i;return i=t,a[e]&&(i=a[e]),i}}}),define("text!dataSource/template/dataSourceMainTemplate.htm",[],function(){
return'<div class="column decorated primary showingToolBar">\n\n    <js-templateNonce></js-templateNonce>\n    <div class="content hasFooter">\n        <div class="header">\n            <div class="title">\n                {{ if (isEditMode) { }}\n                    {{- i18n[\'resource.dataSource.title.edit\'] }}\n                {{ } else { }}\n                    {{- i18n[\'resource.dataSource.title.new\'] }}\n                {{ } }}\n            </div>\n        </div>\n        <div class="body {{ if (supportsTouch) { }}swipeScroll{{ } }}">\n            <div id="flowControls"></div>\n\n            <div id="stepDisplay">\n\n                <fieldset class="row instructions">\n                    <legend class="offLeft"><span>{{- i18n["resource.dataSource.instructions"] }}</span></legend>\n                    <h2 class="textAccent02">{{- i18n["resource.dataSource.instructions1"] }}</h2>\n                    <h4>{{- i18n["resource.dataSource.instructions2"] }}</h4>\n                </fieldset>\n\n                <fieldset class="row inputs oneColumn">\n                    <legend class="offLeft"><span>{{- i18n["resource.dataSource.inputs"] }}</span></legend>\n                    <div class="column primary">\n                        <div class="content">\n                            <div class="header">\n                                <div class="title">{{- i18n["resource.dataSource.type"] }}</div>\n                                <label class="control select inline" title="{{- i18n[\'resource.dataSource.dsType\'] }}">\n                                    <span class="wrap offLeft">{{- i18n[\'resource.dataSource.dsType\'] }}</span>\n                                    <select name="dataSourceType" {{ if (isEditMode) { }}disabled="disabled"{{ } }}>\n                                        {{ _.each(dataSourceTypeOptions, function(option) { }}\n                                        <option value="{{- option.value }}">{{- option.label }}</option>\n                                        {{ }); }}\n                                    </select>\n                                    <span class="message warning"></span>\n                                </label>\n                            </div>\n                            <div class="body dataSourceBody"></div>\n                        </div>\n                    </div>\n                </fieldset>\n            </div>\n        </div>\n        <div class="footer ">\n            <fieldset id="wizardNav">\n                <button class="button primary action up" id="saveBtn"><span class="wrap">{{- i18n[\'resource.datasource.saveDialog.save\'] }}</span><span class="icon"></span></button>\n                <button class="button up action" id="cancelBtn"><span class="wrap">{{- i18n[\'resource.datasource.saveDialog.cancel\'] }}</span><span class="icon"></span></button>\n            </fieldset>\n        </div>\n    </div>\n</div>'}),define("dataSource/collection/CustomDataSourceCollection",["require","backbone","underscore","jrs.configs"],function(e){"use strict";var t=e("backbone"),i=e("underscore"),n=e("jrs.configs");return t.Collection.extend({url:n.contextPath+"/rest_v2/customDataSources",parse:function(e){var t=[];return e.definition&&i.each(e.definition,function(e){t.push({id:e})}),t}})}),define("dataSource/DataSourceController",["require","backbone","underscore","jquery","bundle!all","dataSource/model/BaseDataSourceModel","touchcontroller","common/util/featureDetection","util/historyHelper","dataSource/factory/dataSourceViewFactory","dataSource/enum/dataSourceResourceTypes","dataSource/factory/saveDialogViewFactory","text!dataSource/template/dataSourceMainTemplate.htm","text!common/templates/dialogErrorPopupTemplate.htm","jrs.configs","dataSource/collection/CustomDataSourceCollection","settings!awsSettings","dataSource/util/settingsUtility"],function(e){"use strict";var t=e("backbone"),i=e("underscore"),n=e("jquery"),a=e("bundle!all"),s=e("dataSource/model/BaseDataSourceModel"),r=e("touchcontroller"),o=e("common/util/featureDetection"),l=e("util/historyHelper"),c=e("dataSource/factory/dataSourceViewFactory"),d=e("dataSource/enum/dataSourceResourceTypes"),u=e("dataSource/factory/saveDialogViewFactory"),h=e("text!dataSource/template/dataSourceMainTemplate.htm"),p=e("text!common/templates/dialogErrorPopupTemplate.htm"),m=e("jrs.configs"),f=e("dataSource/collection/CustomDataSourceCollection"),g=e("settings!awsSettings"),v=e("dataSource/util/settingsUtility"),b=i.template(m.contextPath+"/domaindesigner.html?dataSource={{-resourceUri}}");return t.View.extend({dataSourceType:!1,dataSourceView:!1,saveDialog:!1,events:{"change select[name='dataSourceType']":"onDataSourceTypeChange","click #saveBtn, #createDomainBtn":"onSaveClick","click #cancelBtn":"onCancelClick"},historyBackToken:"DataSourceControllerHistory",constructor:function(e){e=n.extend(!0,{},e),arguments[0]=e,this.isEditMode=e.isEditMode,t.View.apply(this,arguments)},initialize:function(e){this.options=e,this.dataSourceType=void 0,o.supportsTouch&&this.initSwipeScroll(),l.saveReferrer(this.historyBackToken),this.fetchingCustomDataSourcesDeferred=n.Deferred(),this.fetchingTheModelDeferred=n.Deferred(),this.customDataSourceCollection=new f,this.customDataSourceCollection.fetch().done(i.bind(function(){this.renderDataSourceContainer()},this));var t=v.deepDefaults(e,{awsSettings:g});if(this.options.resourceUri){var a=this,r=new s({uri:this.options.resourceUri});r.fetch().then(function(e,t,i){a.dataSource=r.attributes,a.dataSourceType=c.getViewType(i.getResponseHeader("Content-Type"),a.dataSource),a.fetchingTheModelDeferred.resolve()})}else this.options.dataSource&&this.options.dataSourceClientType?(this.dataSource=this.options.dataSource,this.dataSourceType=c.getViewType(this.options.dataSourceClientType,this.options.dataSource),this.fetchingTheModelDeferred.resolve()):(t.awsSettings.productTypeIsEc2&&(this.dataSourceType=c.getViewType(d.AWS,null)),this.fetchingTheModelDeferred.resolve())},renderDataSourceContainer:function(){var e={AZURE_SQL:"AzureSql",AWS:"Aws",BEAN:"Bean",JDBC:"JDBC",JNDI:"JNDI",VIRTUAL:"Virtual"},t=i.chain(e).map(function(e,t){return{value:d[t].toLowerCase(),label:a["resource.dataSource.dstype"+e]}}).value();this.customDataSourceCollection.forEach(function(e){var i=e.get("id");t.push({value:i,label:a[i+".name"]?a[i+".name"]:i})}),t=i.sortBy(t,function(e){return e.label.toLowerCase()}),this.$el.append(i.template(h,{dataSourceTypeOptions:t,i18n:a,supportsTouch:o.supportsTouch,isEditMode:this.isEditMode})),this.fetchingCustomDataSourcesDeferred.resolve()},initSwipeScroll:function(){var e=this.$("#stepDisplay");e.length&&new r(e.parent()[0],e.parent().parent()[0],{})},render:function(){n.when(this.fetchingCustomDataSourcesDeferred,this.fetchingTheModelDeferred).done(i.bind(function(){this._render()},this))},_render:function(){var e={};return this.dataSourceView&&(e={label:this.dataSourceView.model.get("label"),name:this.dataSourceView.model.get("name"),description:this.dataSourceView.model.get("description")}),this.dataSourceView&&this.dataSourceView.remove(),delete this.dataSourceView,0===this.$(".row.inputs .body:eq(0)").length&&this.$(".row.inputs > .column > .content").append("<div class='body dataSourceBody'></div>"),this.dataSourceType||(this.dataSourceType=d.JDBC.toLowerCase()),this.dataSourceView=c.getView(i.extend(this.options,{dataSourceType:this.dataSourceType,dataSource:i.extend({},this.dataSource,e),el:this.$(".row.inputs .body:eq(0)")})),this.$(".dataSourceBody").attr("dstype",this.dataSourceType.toLowerCase()),this.$("select[name='dataSourceType']").val(this.dataSourceType),this},onDataSourceTypeChange:function(e){var t=n(e.target).val();this.dataSourceType!=t&&(this.dataSourceType=t,this.render())},_prepareSaveDialog:function(e){this.saveDialog&&this.saveDialog.remove();var t=u.getView(this.dataSourceType);this.saveDialog=new t(i.extend({},this.options,{model:this.dataSourceView.model,saveFn:this.options.saveFn,success:i.bind(e?this._onSaveAndCreateDomainDone:this._onSaveDone,this),error:i.bind(this._onSaveFail,this)}))},onSaveClick:function(e){if(this.dataSourceView.model.isValid(!0)){var t=this,n=e&&"createDomainBtn"==e.currentTarget.id,a=function(){t._prepareSaveDialog(n),t.saveDialog.startSaveDialog()};return i.isUndefined(this.dataSourceView.model.validationMethodOnSaveClick)?i.isUndefined(this.dataSourceView.validationMethodOnSaveClick)?void a():void this.dataSourceView.validationMethodOnSaveClick(a):void this.dataSourceView.model.validationMethodOnSaveClick(a)}},_onSaveDone:function(){redirectToUrl(m.contextPath+"/flow.html?_flowId=repositoryConfirmFlow&resourceType=dataSource")},_onSaveAndCreateDomainDone:function(e){redirectToUrl(b({resourceUri:e.get("uri")}))},_onSaveFail:function(e,t){this.saveDialog&&(this.saveDialog.close(),this.saveDialog.remove());var n=this,s=!1,r=!1;try{s=JSON.parse(t.responseText)}catch(e){}if(i.isArray(s)||(s=[s]),i.each(s,function(e){var t=!1,i=!1;e&&("mandatory.parameter.error"===e.errorCode?e.parameters&&e.parameters[0]&&(i=a["resource.datasource.saveDialog.parameterIsMissing"],t=e.parameters[0].substr(e.parameters[0].indexOf(".")+1)):"illegal.parameter.value.error"===e.errorCode&&e.parameters&&e.parameters[0]&&(t=e.parameters[0].substr(e.parameters[0].indexOf(".")+1),i=a["resource.datasource.saveDialog.parameterIsWrong"]),"ConnectionUrl"===t&&(t="connectionUrl"),i&&t&&(n.dataSourceView.invalidField("[name="+t+"]",i),r=!0))}),!1===r){var o=i.template(p,{message:"Failed to save data source.",errorCode:s[0]?s[0].errorCode:null,errorMsg:s.message,respText:t.responseText});dialogs.errorPopup.show(o)}},onCancelClick:function(){this.options.cancelFn?this.options.cancelFn():l.restore(this.historyBackToken)}})}),define("dataSource/dataSourceMain",["require","commons.main","!domReady","jquery","jrs.configs","bi/repository/model/RepositoryResourceModel","bi/repository/enum/repositoryResourceTypes","dataSource/DataSourceController"],function(e){"use strict";e("commons.main");var t=e("!domReady"),i=e("jquery"),n=e("jrs.configs"),a=e("bi/repository/model/RepositoryResourceModel"),s=e("bi/repository/enum/repositoryResourceTypes"),r=e("dataSource/DataSourceController");t(function(){var e=n.addDataSource.initOptions,t=/ParentFolderUri=([^&]+)/.exec(location.href),o=i.Deferred().done(function(){var t=new r(e);i("#display").append(t.$el),t.render()});if(t&&t[1]){var l=decodeURIComponent(t[1]);if("/"===l)e.parentFolderUri=l,o.resolve();else{var c=new a({uri:l},{contextPath:n.contextPath});c.fetch().always(function(){c.type&&s.FOLDER.toLowerCase()===c.type.toLowerCase()&&(e.parentFolderUri=l),o.resolve()})}}else o.resolve()})});