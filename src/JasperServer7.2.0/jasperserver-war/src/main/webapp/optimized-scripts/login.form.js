define(["jquery","jrs.configs","common/util/encrypter"],function(e,s,o){e(function(){var n=e("#j_username"),r=e("#j_password_pseudo"),a=e("#orgId");webHelpModule.setCurrentContext("login");var d=function(n){if(s.isEncryptionOn){var a={j_password:r.val()};if("undefined"!=typeof doesAllowUserPasswordChange&&doesAllowUserPasswordChange){var d=e("#j_newpassword1_pseudo").val(),i=e("#j_newpassword2_pseudo").val();e.trim(d)&&(a.j_newpassword1=d),e.trim(i)&&(a.j_newpassword2=i)}o.encryptData(a,function(s){for(var o in s)e("#"+o).val(s[o]),e("#"+o+"_pseudo").val("");e("#loginForm").submit()})}else e("#j_password").val(r.val()),e("#j_newpassword1").val(e("#j_newpassword1_pseudo").val()),e("#j_newpassword2").val(e("#j_newpassword2_pseudo").val()),e("#loginForm").submit();n.preventDefault()};e("#submitButton").click(d).removeAttr("disabled"),n.keypress(function(e){13==(e.keyCode||e.which)&&d(e)}),r.keypress(function(e){13==(e.keyCode||e.which)&&d(e)}),a.keypress(function(e){13==(e.keyCode||e.which)&&d(e)})})});