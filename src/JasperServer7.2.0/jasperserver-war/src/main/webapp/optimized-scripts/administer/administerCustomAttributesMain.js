"undefined"==typeof Administer&&(Administer={}),Administer=_.extend({_messages:{},urlContext:null,getMessage:function(e,t){var i=this._messages[e];return i?new Template(i).evaluate(t||{}):""},menuActions:{"p#navAnalysisOptions":function(){return Administer.urlContext+"/flow.html?_flowId=mondrianPropertiesFlow"},"p#navAnalysisOptionsCE":function(){return Administer.urlContext+"/olap/properties.html"},"p#navDesignerOptions":function(){return Administer.urlContext+"/flow.html?_flowId=designerOptionsFlow"},"p#navDesignerCache":function(){return Administer.urlContext+"/flow.html?_flowId=designerCacheFlow"},"p#navAwsSettings":function(){return Administer.urlContext+"/flow.html?_flowId=awsSettingsFlow"},"p#navLogSettings":function(){return Administer.urlContext+"/log_settings.html"},"p#logCollectors":function(){return Administer.urlContext+"/logCollectors.html"},"p#navImport":function(){return Administer.urlContext+"/adminImport.html"},"p#navExport":function(){return Administer.urlContext+"/adminExport.html"},"p#navCustomAttributes":function(){return Administer.urlContext+"/customAttributes.html"},"p#navResetSettings":function(){return Administer.urlContext+"/resetSettings.html"}},_sendRequest:function(e,t,i){ajaxTargettedUpdate(e,{postData:t,callback:i,mode:AjaxRequester.prototype.EVAL_JSON,errorHandler:this._errorHandler})},_errorHandler:function(e){return e.getResponseHeader("LoginRequested")?(window.location="flow.html?_flowId=designerCacheFlow",!0):baseErrorHandler(e)}},Administer),define("administer.base",["prototype","underscore","core.ajax"],function(e){return function(){return e.Administer}}(this));var logging={initialize:function(){layoutModule.resizeOnClient("serverSettingsMenu","settings"),webHelpModule.setCurrentContext("admin"),this.initEvents()},initEvents:function(){var e=this;$("display").observe("click",function(e){var t=e.element(),i=matchAny(t,[layoutModule.BUTTON_PATTERN],!0);if(i)for(var n in Administer.menuActions)if(i.match(n)&&!i.up("li").hasClassName("selected"))return void(document.location=Administer.menuActions[n]())}),jQuery(".js-logSettings select").on("change",function(t){var i,n=jQuery(t.target);i=n.hasClass("js-newLogger")?jQuery("#newLoggerName").val():n.parent().prev().text(),e._setLevel(encodeURIComponent(i),n.val())})},_setLevel:function(e,t){document.location="log_settings.html?logger="+e+"&level="+t}};"undefined"==typeof require&&document.observe("dom:loaded",function(){logging.initialize()}),define("administer.logging",["administer.base","core.layout","components.webHelp","utils.common"],function(e){return function(){return e.logging}}(this)),define("serverSettingsCommon/enum/confirmDialogTypesEnum",[],function(){return{CANCEL_CONFIRM:"cancelConfirm",DELETE_CONFIRM:"deleteConfirm",PERMISSION_CONFIRM:"permissionConfirm",NAME_CONFIRM:"nameConfirm",EDIT_CONFIRM:"editConfirm"}}),define("attributes/enum/attributesTypesEnum",[],function(){return{USER:"user",TENANT:"tenant",SERVER:"server"}}),define("common/component/base/Dimmer",["require","jquery","common/util/classUtil"],function(e){var t,i,n=e("jquery"),s=e("common/util/classUtil");return s.extend({constructor:function(e){t||(i=0,t=n("<div id='dialogDimmer' class='dimmer'></div>").css(e),n(document.body).append(t),t.hide()),i++},css:function(e){return t.css(e),this},show:function(){var e=this.getCount()||0;return this.setCount(++e),t.show(),this},hide:function(){if(this.isVisible()){var e=this.getCount();return this.setCount(--e),!e&&t.hide(),this}},setCount:function(e){t.data({count:e})},getCount:function(){return parseInt(t.data("count"),10)},isVisible:function(){return t.is(":visible")},remove:function(){this._removed||(this._removed=!0,t&&(--i||(t.remove(),t=null)))}})}),define("text!common/component/panel/template/panelTemplate.htm",[],function(){return'<div class="panel {{- additionalCssClasses }}">\n\n    <js-templateNonce></js-templateNonce>\n    <div class="header">\n        <div class="title">{{- title}}</div>\n    </div>\n    <div class="subcontainer"></div>\n</div>\n'}),define("common/component/panel/Panel",["require","css!panel","underscore","backbone","text!./template/panelTemplate.htm"],function(e){"use strict";e("css!panel");var t=e("underscore"),i=e("backbone"),n=e("text!./template/panelTemplate.htm");return i.View.extend({defaultTemplate:n,el:function(){var e=this.getTemplateArguments();return this.template(e)},getTemplateArguments:function(){return{title:this.title,additionalCssClasses:this.additionalCssClasses}},constructor:function(e){e||(e={}),this.template=t.template(e.template||this.defaultTemplate),this.title=e.title||"",this.additionalCssClasses=e.additionalCssClasses||"",this.content=e.content||"",this.collapsed=!e.collapsed,this.openClass=e.openClass||"open",this.closedClass=e.closedClass||"closed",this.loadingClass=e.loadingClass||"loading",this.fixedHeight=e.fixedHeight||!1,this.contentContainer=e.contentContainer||".subcontainer",this.overflow=e.overflow||"auto",this.traits=e.traits||[],t.each(this.traits,t.bind(function(e){e.extension&&t.extend(this,e.extension)},this)),this.invokeTraits("onConstructor",e),i.View.apply(this,arguments)},invokeTraits:function(e){var i=Array.prototype.slice.call(arguments,1),n=this;t.each(this.traits,function(t){t[e]&&t[e].apply(n,i)})},initialize:function(e){this.invokeTraits("beforeInitialize",e),this.content&&this.setContent(this.content),this.toggleCollapsedState(),this.invokeTraits("afterInitialize",e)},setElement:function(e){this.invokeTraits("beforeSetElement",e);var t=i.View.prototype.setElement.apply(this,arguments);return this.$contentContainer=this.$(this.contentContainer),this.$contentContainer[this.collapsed?"hide":"show"](),this.invokeTraits("afterSetElement",e),t},open:function(e){return this.invokeTraits("beforeOpen",e),this.$contentContainer.show(),this.$el.removeClass(this.closedClass).addClass(this.openClass),this.collapsed=!1,e&&e.renderContent&&this.renderContent(),this.invokeTraits("afterOpen",e),e&&e.silent||this.trigger("open",this),this},close:function(e){return this.invokeTraits("beforeClose",e),this.$contentContainer.hide(),this.$el.removeClass(this.openClass).addClass(this.closedClass),this.collapsed=!0,this.invokeTraits("afterClose",e),e&&e.silent||this.trigger("close",this),this},setContent:function(e,t){this.content=e;var i=this.renderContent();this.$contentContainer[!0===t?"append":"html"](i)},renderContent:function(){return this.content instanceof i.View?this.content.render().$el:this.content},setHeight:function(e){var i=this.$("> .header").outerHeight();this.$contentContainer.css({height:t.isNumber(e)?e-i+"px":"auto",overflow:this.overflow})},toggleCollapsedState:function(){return this.collapsed?this.open():this.close(),this},remove:function(){this.invokeTraits("onRemove"),this.content&&this.content.remove&&this.content.remove(),i.View.prototype.remove.call(this)}})}),define("common/component/base/OptionView",["require","backbone","underscore"],function(e){"use strict";var t=e("backbone"),i=e("underscore");return t.View.extend({events:{click:"select",mouseover:"mouseover",mouseout:"mouseout"},constructor:function(e){if(!e||!e.template)throw new Error("Option should have defined template");if(!(e.model&&e.model instanceof t.Model))throw new Error("Option should have associated Backbone.Model");this.template=i.template(e.template),this.disabledClass=e.disabledClass,this.hiddenClass=e.hiddenClass,this.toggleClass=e.toggleClass,this.overClass=e.overClass||"over",t.View.apply(this,arguments)},initialize:function(){t.View.prototype.initialize.apply(this,arguments);var e=this;!0===this.model.get("disabled")&&this.disable(),!0===this.model.get("hidden")&&this.hide(),!0===this.model.get("selected")&&this.addSelection(),this.listenTo(this.model,"change:over",function(t,i){i?e.$("> p").addClass(e.overClass):e.$("> p").removeClass(e.overClass)})},el:function(){return this.template(this.model.toJSON())},enable:function(){this.$el.removeAttr("disabled").removeClass(this.disabledClass)},disable:function(){this.$el.attr("disabled","disabled").addClass(this.disabledClass)},over:function(){this.model.set({over:!0})},leave:function(){this.model.set({over:!1})},show:function(){this.$el.show().removeClass(this.hiddenClass)},hide:function(){this.$el.hide().addClass(this.hiddenClass)},isVisible:function(){return this.$el.is(":visible")},isDisabled:function(){return this.$el.is(":disabled")},select:function(e){this.model.trigger("select",this,this.model,e),this.trigger("click",this,this.model,e)},addSelection:function(){this.$el.addClass(this.toggleClass),this.model.set("selected",!0)},removeSelection:function(){this.$el.removeClass(this.toggleClass),this.model.unset("selected")},mouseover:function(e){this.trigger("mouseover",this,this.model,e)},mouseout:function(e){this.trigger("mouseout",this,this.model,e)}})}),define("common/component/base/OptionContainer",["require","backbone","underscore","./OptionView"],function(e){"use strict";function t(e){if(!e||n.isEmpty(e))throw new Error("Init options must be specified");if(!e.options||!e.options.length)throw new Error("Option views descriptors must be specified");if(!e.mainTemplate&&!e.el)throw new Error("Option container must have a template");if(!e.optionTemplate)throw new Error("Option container must have an option template")}var i=e("backbone"),n=e("underscore"),s=e("./OptionView");return i.View.extend({events:{mouseout:"_mouseout",mouseover:"_mouseover"},el:function(){return n.template(this.template)()},constructor:function(e){t(e),this.contextName=e.contextName||"option",this.contentContainer=e.contentContainer?e.contentContainer:e.el||".content > ul",this.toggle=!!e.toggle,this.toggleClass=e.toggleClass||"active",this.options=[],this.collection=e.collection||new i.Collection,delete e.collection,e.options&&this.collection.reset(e.options),this.hasGroups=!(!this.collection.models[0]||!this.collection.models[0].get("groupId")),this.defalutOptionView=this.hasGroups?this.collection.where({default:!0}):[this.collection.findWhere({default:!0})],this.listenTo(this.collection,"select",this._selectOption),this.listenTo(this.collection,"update reset",this.render),this.template=e.mainTemplate,this.optionTemplate=e.optionTemplate,i.View.apply(this,arguments)},_mouseout:function(){this.trigger("container:mouseout")},_mouseover:function(){this.trigger("container:mouseover")},setElement:function(e){var t=i.View.prototype.setElement.apply(this,arguments);return this.$contentContainer=this.contentContainer?this.$(this.contentContainer).addBack().filter(this.contentContainer):this.$el,t},initialize:function(){this.render(),this.toggle&&this.defalutOptionView&&n.each(this.defalutOptionView,function(e){e&&this.getOptionView(e.get("action")).addSelection()},this)},render:function(){var e=this;n.each(this.options,function(t){e.stopListening(t,"mouseover"),e.stopListening(t,"mouseout"),t.remove()}),this.options=[],this.collection.forEach(function(t){var i=new s({template:e.optionTemplate,model:t,toggleClass:e.toggleClass});e.listenTo(i,"mouseover",function(t,i){e.trigger("mouseover",t,e,i)}),e.listenTo(i,"mouseout",function(t,i){e.trigger("mouseout",t,e,i)}),e.options.push(i),e.$contentContainer.append(i.$el)})},_onKeyDown:function(e){var t=this.getOptionView(e.keyCode,"triggerOnKeyCode");t&&!t.isDisabled()&&t.select()},_selectOption:function(e,t){if(this.toggle){var i=t.get("groupId"),s=this.hasGroups?n.reduce(this.options,function(e,t){return t.model.get("groupId")===i&&e.push(t),e},[]):this.options;n.each(s,function(e){e.removeSelection()},this),e.addSelection()}this.trigger("selection",e,t),this.trigger(this.contextName+":"+t.get("action"),e,t)},getOptionView:function(e,t){return n.find(this.options,function(i){return i.model.get(t||"action")===e})},resetSelection:function(e,t){e=e||[],this.toggle&&(this.hasGroups?(e.length<this.defalutOptionView.length&&n.each(this.defalutOptionView,function(t){var i={groupId:t.get("groupId")};!n.findWhere(e,i)&&t&&e.push(n.extend(i,{action:t.get("action")}))}),e=n.pluck(e,"action")):!e.length&&this.defalutOptionView[0]&&e.push(this.defalutOptionView[0].get("action")),n.each(this.options,function(i){e.length&&n.contains(e,i.model.get("action"))?t?this._selectOption(i,i.model):i.addSelection():i.removeSelection()},this))},select:function(){var e=Array.prototype.slice.call(arguments,0);this.toggle&&n.each(this.options,function(t){!e.length||n.contains(e,t.model.get("action"))?t.addSelection():t.removeSelection()},this)},deselect:function(){var e=Array.prototype.slice.call(arguments,0);this.toggle&&n.each(this.options,function(t){(!e.length||n.contains(e,t.model.get("action")))&&t.removeSelection()},this)},getSelection:function(){return n.chain(this.options).filter(function(e){return e.model.get("selected")}).map(function(e){return e.model.get("action")}).value()},show:function(){return n.each(this.options,function(e){var t=e.model.get("test");t&&!t()?e.hide():e[e.model.get("hidden")?"hide":"show"]()}),this.$el.show(),this.trigger("show",this),this},hide:function(){return this.$el.hide(),this.trigger("hide",this),this},enable:function(e){var t=Array.prototype.slice.call(arguments);n.each(this.options,function(e){(!t.length||n.contains(t,e.model.get("action")))&&e.enable()})},disable:function(e){var t=Array.prototype.slice.call(arguments);n.each(this.options,function(e){(!t.length||n.contains(t,e.model.get("action")))&&e.disable()})},addOptions:function(e,t){this.collection.add(e,n.extend(t||{},{silent:!0})),this.collection.reset(this.collection.toJSON())},removeOptions:function(e){var t=this.collection.filter(function(t){return!n.contains(e,t.get("action"))});t.length<this.collection.length&&this.collection.reset(t)},remove:function(){n.invoke(this.options,"remove"),i.View.prototype.remove.apply(this,arguments)}})}),define("common/component/panel/trait/abstractPanelTrait",[],function(){"use strict";return{extension:{},onConstructor:function(){},beforeInitialize:function(){},afterInitialize:function(){},beforeSetElement:function(){},afterSetElement:function(){},beforeOpen:function(){},afterOpen:function(){},beforeClose:function(){},afterClose:function(){},onRemove:function(){}}}),function(e){"function"==typeof define&&define.amd?define("jquery-ui/disable-selection",["jquery","./version"],e):e(jQuery)}(function(e){return e.fn.extend({disableSelection:function(){var e="onselectstart"in document.createElement("div")?"selectstart":"mousedown";return function(){return this.on(e+".ui-disableSelection",function(e){e.preventDefault()})}}(),enableSelection:function(){return this.off(".ui-disableSelection")}})}),function(e){"function"==typeof define&&define.amd?define("jquery-ui/plugin",["jquery","./version"],e):e(jQuery)}(function(e){return e.ui.plugin={add:function(t,i,n){var s,o=e.ui[t].prototype;for(s in n)o.plugins[s]=o.plugins[s]||[],o.plugins[s].push([i,n[s]])},call:function(e,t,i,n){var s,o=e.plugins[t];if(o&&(n||e.element[0].parentNode&&11!==e.element[0].parentNode.nodeType))for(s=0;s<o.length;s++)e.options[o[s][0]]&&o[s][1].apply(e.element,i)}}}),function(e){"function"==typeof define&&define.amd?define("jquery-ui/widgets/resizable",["jquery","./mouse","../disable-selection","../plugin","../version","../widget"],e):e(jQuery)}(function(e){return e.widget("ui.resizable",e.ui.mouse,{version:"1.12.1",widgetEventPrefix:"resize",options:{alsoResize:!1,animate:!1,animateDuration:"slow",animateEasing:"swing",aspectRatio:!1,autoHide:!1,classes:{"ui-resizable-se":"ui-icon ui-icon-gripsmall-diagonal-se"},containment:!1,ghost:!1,grid:!1,handles:"e,s,se",helper:!1,maxHeight:null,maxWidth:null,minHeight:10,minWidth:10,zIndex:90,resize:null,start:null,stop:null},_num:function(e){return parseFloat(e)||0},_isNumber:function(e){return!isNaN(parseFloat(e))},_hasScroll:function(t,i){if("hidden"===e(t).css("overflow"))return!1;var n=i&&"left"===i?"scrollLeft":"scrollTop",s=!1;return t[n]>0||(t[n]=1,s=t[n]>0,t[n]=0,s)},_create:function(){var t,i=this.options,n=this;this._addClass("ui-resizable"),e.extend(this,{_aspectRatio:!!i.aspectRatio,aspectRatio:i.aspectRatio,originalElement:this.element,_proportionallyResizeElements:[],_helper:i.helper||i.ghost||i.animate?i.helper||"ui-resizable-helper":null}),this.element[0].nodeName.match(/^(canvas|textarea|input|select|button|img)$/i)&&(this.element.wrap(e("<div class='ui-wrapper' style='overflow: hidden;'></div>").css({position:this.element.css("position"),width:this.element.outerWidth(),height:this.element.outerHeight(),top:this.element.css("top"),left:this.element.css("left")})),this.element=this.element.parent().data("ui-resizable",this.element.resizable("instance")),this.elementIsWrapper=!0,t={marginTop:this.originalElement.css("marginTop"),marginRight:this.originalElement.css("marginRight"),marginBottom:this.originalElement.css("marginBottom"),marginLeft:this.originalElement.css("marginLeft")},this.element.css(t),this.originalElement.css("margin",0),this.originalResizeStyle=this.originalElement.css("resize"),this.originalElement.css("resize","none"),this._proportionallyResizeElements.push(this.originalElement.css({position:"static",zoom:1,display:"block"})),this.originalElement.css(t),this._proportionallyResize()),this._setupHandles(),i.autoHide&&e(this.element).on("mouseenter",function(){i.disabled||(n._removeClass("ui-resizable-autohide"),n._handles.show())}).on("mouseleave",function(){i.disabled||n.resizing||(n._addClass("ui-resizable-autohide"),n._handles.hide())}),this._mouseInit()},_destroy:function(){this._mouseDestroy();var t,i=function(t){e(t).removeData("resizable").removeData("ui-resizable").off(".resizable").find(".ui-resizable-handle").remove()};return this.elementIsWrapper&&(i(this.element),t=this.element,this.originalElement.css({position:t.css("position"),width:t.outerWidth(),height:t.outerHeight(),top:t.css("top"),left:t.css("left")}).insertAfter(t),t.remove()),this.originalElement.css("resize",this.originalResizeStyle),i(this.originalElement),this},_setOption:function(e,t){switch(this._super(e,t),e){case"handles":this._removeHandles(),this._setupHandles()}},_setupHandles:function(){var t,i,n,s,o,r=this.options,a=this;if(this.handles=r.handles||(e(".ui-resizable-handle",this.element).length?{n:".ui-resizable-n",e:".ui-resizable-e",s:".ui-resizable-s",w:".ui-resizable-w",se:".ui-resizable-se",sw:".ui-resizable-sw",ne:".ui-resizable-ne",nw:".ui-resizable-nw"}:"e,s,se"),this._handles=e(),this.handles.constructor===String)for("all"===this.handles&&(this.handles="n,e,s,w,se,sw,ne,nw"),n=this.handles.split(","),this.handles={},i=0;i<n.length;i++)t=e.trim(n[i]),s="ui-resizable-"+t,o=e("<div>"),this._addClass(o,"ui-resizable-handle "+s),o.css({zIndex:r.zIndex}),this.handles[t]=".ui-resizable-"+t,this.element.append(o);this._renderAxis=function(t){var i,n,s,o;t=t||this.element;for(i in this.handles)this.handles[i].constructor===String?this.handles[i]=this.element.children(this.handles[i]).first().show():(this.handles[i].jquery||this.handles[i].nodeType)&&(this.handles[i]=e(this.handles[i]),this._on(this.handles[i],{mousedown:a._mouseDown})),this.elementIsWrapper&&this.originalElement[0].nodeName.match(/^(textarea|input|select|button)$/i)&&(n=e(this.handles[i],this.element),o=/sw|ne|nw|se|n|s/.test(i)?n.outerHeight():n.outerWidth(),s=["padding",/ne|nw|n/.test(i)?"Top":/se|sw|s/.test(i)?"Bottom":/^e$/.test(i)?"Right":"Left"].join(""),t.css(s,o),this._proportionallyResize()),this._handles=this._handles.add(this.handles[i])},this._renderAxis(this.element),this._handles=this._handles.add(this.element.find(".ui-resizable-handle")),this._handles.disableSelection(),this._handles.on("mouseover",function(){a.resizing||(this.className&&(o=this.className.match(/ui-resizable-(se|sw|ne|nw|n|e|s|w)/i)),a.axis=o&&o[1]?o[1]:"se")}),r.autoHide&&(this._handles.hide(),this._addClass("ui-resizable-autohide"))},_removeHandles:function(){this._handles.remove()},_mouseCapture:function(t){var i,n,s=!1;for(i in this.handles)((n=e(this.handles[i])[0])===t.target||e.contains(n,t.target))&&(s=!0);return!this.options.disabled&&s},_mouseStart:function(t){var i,n,s,o=this.options,r=this.element;return this.resizing=!0,this._renderProxy(),i=this._num(this.helper.css("left")),n=this._num(this.helper.css("top")),o.containment&&(i+=e(o.containment).scrollLeft()||0,n+=e(o.containment).scrollTop()||0),this.offset=this.helper.offset(),this.position={left:i,top:n},this.size=this._helper?{width:this.helper.width(),height:this.helper.height()}:{width:r.width(),height:r.height()},this.originalSize=this._helper?{width:r.outerWidth(),height:r.outerHeight()}:{width:r.width(),height:r.height()},this.sizeDiff={width:r.outerWidth()-r.width(),height:r.outerHeight()-r.height()},this.originalPosition={left:i,top:n},this.originalMousePosition={left:t.pageX,top:t.pageY},this.aspectRatio="number"==typeof o.aspectRatio?o.aspectRatio:this.originalSize.width/this.originalSize.height||1,s=e(".ui-resizable-"+this.axis).css("cursor"),e("body").css("cursor","auto"===s?this.axis+"-resize":s),this._addClass("ui-resizable-resizing"),this._propagate("start",t),!0},_mouseDrag:function(t){var i,n,s=this.originalMousePosition,o=this.axis,r=t.pageX-s.left||0,a=t.pageY-s.top||0,l=this._change[o];return this._updatePrevProperties(),!!l&&(i=l.apply(this,[t,r,a]),this._updateVirtualBoundaries(t.shiftKey),(this._aspectRatio||t.shiftKey)&&(i=this._updateRatio(i,t)),i=this._respectSize(i,t),this._updateCache(i),this._propagate("resize",t),n=this._applyChanges(),!this._helper&&this._proportionallyResizeElements.length&&this._proportionallyResize(),e.isEmptyObject(n)||(this._updatePrevProperties(),this._trigger("resize",t,this.ui()),this._applyChanges()),!1)},_mouseStop:function(t){this.resizing=!1;var i,n,s,o,r,a,l,h=this.options,d=this;return this._helper&&(i=this._proportionallyResizeElements,n=i.length&&/textarea/i.test(i[0].nodeName),s=n&&this._hasScroll(i[0],"left")?0:d.sizeDiff.height,o=n?0:d.sizeDiff.width,r={width:d.helper.width()-o,height:d.helper.height()-s},a=parseFloat(d.element.css("left"))+(d.position.left-d.originalPosition.left)||null,l=parseFloat(d.element.css("top"))+(d.position.top-d.originalPosition.top)||null,h.animate||this.element.css(e.extend(r,{top:l,left:a})),d.helper.height(d.size.height),d.helper.width(d.size.width),this._helper&&!h.animate&&this._proportionallyResize()),e("body").css("cursor","auto"),this._removeClass("ui-resizable-resizing"),this._propagate("stop",t),this._helper&&this.helper.remove(),!1},_updatePrevProperties:function(){this.prevPosition={top:this.position.top,left:this.position.left},this.prevSize={width:this.size.width,height:this.size.height}},_applyChanges:function(){var e={};return this.position.top!==this.prevPosition.top&&(e.top=this.position.top+"px"),this.position.left!==this.prevPosition.left&&(e.left=this.position.left+"px"),this.size.width!==this.prevSize.width&&(e.width=this.size.width+"px"),this.size.height!==this.prevSize.height&&(e.height=this.size.height+"px"),this.helper.css(e),e},_updateVirtualBoundaries:function(e){var t,i,n,s,o,r=this.options;o={minWidth:this._isNumber(r.minWidth)?r.minWidth:0,maxWidth:this._isNumber(r.maxWidth)?r.maxWidth:1/0,minHeight:this._isNumber(r.minHeight)?r.minHeight:0,maxHeight:this._isNumber(r.maxHeight)?r.maxHeight:1/0},(this._aspectRatio||e)&&(t=o.minHeight*this.aspectRatio,n=o.minWidth/this.aspectRatio,i=o.maxHeight*this.aspectRatio,s=o.maxWidth/this.aspectRatio,t>o.minWidth&&(o.minWidth=t),n>o.minHeight&&(o.minHeight=n),i<o.maxWidth&&(o.maxWidth=i),s<o.maxHeight&&(o.maxHeight=s)),this._vBoundaries=o},_updateCache:function(e){this.offset=this.helper.offset(),this._isNumber(e.left)&&(this.position.left=e.left),this._isNumber(e.top)&&(this.position.top=e.top),this._isNumber(e.height)&&(this.size.height=e.height),this._isNumber(e.width)&&(this.size.width=e.width)},_updateRatio:function(e){var t=this.position,i=this.size,n=this.axis;return this._isNumber(e.height)?e.width=e.height*this.aspectRatio:this._isNumber(e.width)&&(e.height=e.width/this.aspectRatio),"sw"===n&&(e.left=t.left+(i.width-e.width),e.top=null),"nw"===n&&(e.top=t.top+(i.height-e.height),e.left=t.left+(i.width-e.width)),e},_respectSize:function(e){var t=this._vBoundaries,i=this.axis,n=this._isNumber(e.width)&&t.maxWidth&&t.maxWidth<e.width,s=this._isNumber(e.height)&&t.maxHeight&&t.maxHeight<e.height,o=this._isNumber(e.width)&&t.minWidth&&t.minWidth>e.width,r=this._isNumber(e.height)&&t.minHeight&&t.minHeight>e.height,a=this.originalPosition.left+this.originalSize.width,l=this.originalPosition.top+this.originalSize.height,h=/sw|nw|w/.test(i),d=/nw|ne|n/.test(i);return o&&(e.width=t.minWidth),r&&(e.height=t.minHeight),n&&(e.width=t.maxWidth),s&&(e.height=t.maxHeight),o&&h&&(e.left=a-t.minWidth),n&&h&&(e.left=a-t.maxWidth),r&&d&&(e.top=l-t.minHeight),s&&d&&(e.top=l-t.maxHeight),e.width||e.height||e.left||!e.top?e.width||e.height||e.top||!e.left||(e.left=null):e.top=null,e},_getPaddingPlusBorderDimensions:function(e){for(var t=0,i=[],n=[e.css("borderTopWidth"),e.css("borderRightWidth"),e.css("borderBottomWidth"),e.css("borderLeftWidth")],s=[e.css("paddingTop"),e.css("paddingRight"),e.css("paddingBottom"),e.css("paddingLeft")];t<4;t++)i[t]=parseFloat(n[t])||0,i[t]+=parseFloat(s[t])||0;return{height:i[0]+i[2],width:i[1]+i[3]}},_proportionallyResize:function(){if(this._proportionallyResizeElements.length)for(var e,t=0,i=this.helper||this.element;t<this._proportionallyResizeElements.length;t++)e=this._proportionallyResizeElements[t],this.outerDimensions||(this.outerDimensions=this._getPaddingPlusBorderDimensions(e)),e.css({height:i.height()-this.outerDimensions.height||0,width:i.width()-this.outerDimensions.width||0})},_renderProxy:function(){var t=this.element,i=this.options;this.elementOffset=t.offset(),this._helper?(this.helper=this.helper||e("<div style='overflow:hidden;'></div>"),this._addClass(this.helper,this._helper),this.helper.css({width:this.element.outerWidth(),height:this.element.outerHeight(),position:"absolute",left:this.elementOffset.left+"px",top:this.elementOffset.top+"px",zIndex:++i.zIndex}),this.helper.appendTo("body").disableSelection()):this.helper=this.element},_change:{e:function(e,t){return{width:this.originalSize.width+t}},w:function(e,t){var i=this.originalSize;return{left:this.originalPosition.left+t,width:i.width-t}},n:function(e,t,i){var n=this.originalSize;return{top:this.originalPosition.top+i,height:n.height-i}},s:function(e,t,i){return{height:this.originalSize.height+i}},se:function(t,i,n){return e.extend(this._change.s.apply(this,arguments),this._change.e.apply(this,[t,i,n]))},sw:function(t,i,n){return e.extend(this._change.s.apply(this,arguments),this._change.w.apply(this,[t,i,n]))},ne:function(t,i,n){return e.extend(this._change.n.apply(this,arguments),this._change.e.apply(this,[t,i,n]))},nw:function(t,i,n){return e.extend(this._change.n.apply(this,arguments),this._change.w.apply(this,[t,i,n]))}},_propagate:function(t,i){e.ui.plugin.call(this,t,[i,this.ui()]),"resize"!==t&&this._trigger(t,i,this.ui())},plugins:{},ui:function(){return{originalElement:this.originalElement,element:this.element,helper:this.helper,position:this.position,size:this.size,originalSize:this.originalSize,originalPosition:this.originalPosition}}}),e.ui.plugin.add("resizable","animate",{stop:function(t){var i=e(this).resizable("instance"),n=i.options,s=i._proportionallyResizeElements,o=s.length&&/textarea/i.test(s[0].nodeName),r=o&&i._hasScroll(s[0],"left")?0:i.sizeDiff.height,a=o?0:i.sizeDiff.width,l={width:i.size.width-a,height:i.size.height-r},h=parseFloat(i.element.css("left"))+(i.position.left-i.originalPosition.left)||null,d=parseFloat(i.element.css("top"))+(i.position.top-i.originalPosition.top)||null;i.element.animate(e.extend(l,d&&h?{top:d,left:h}:{}),{duration:n.animateDuration,easing:n.animateEasing,step:function(){var n={width:parseFloat(i.element.css("width")),height:parseFloat(i.element.css("height")),top:parseFloat(i.element.css("top")),left:parseFloat(i.element.css("left"))};s&&s.length&&e(s[0]).css({width:n.width,height:n.height}),i._updateCache(n),i._propagate("resize",t)}})}}),e.ui.plugin.add("resizable","containment",{start:function(){var t,i,n,s,o,r,a,l=e(this).resizable("instance"),h=l.options,d=l.element,c=h.containment,u=c instanceof e?c.get(0):/parent/.test(c)?d.parent().get(0):c;u&&(l.containerElement=e(u),/document/.test(c)||c===document?(l.containerOffset={left:0,top:0},l.containerPosition={left:0,top:0},l.parentData={element:e(document),left:0,top:0,width:e(document).width(),height:e(document).height()||document.body.parentNode.scrollHeight}):(t=e(u),i=[],e(["Top","Right","Left","Bottom"]).each(function(e,n){i[e]=l._num(t.css("padding"+n))}),l.containerOffset=t.offset(),l.containerPosition=t.position(),l.containerSize={height:t.innerHeight()-i[3],width:t.innerWidth()-i[1]},n=l.containerOffset,s=l.containerSize.height,o=l.containerSize.width,r=l._hasScroll(u,"left")?u.scrollWidth:o,a=l._hasScroll(u)?u.scrollHeight:s,l.parentData={element:u,left:n.left,top:n.top,width:r,height:a}))},resize:function(t){var i,n,s,o,r=e(this).resizable("instance"),a=r.options,l=r.containerOffset,h=r.position,d=r._aspectRatio||t.shiftKey,c={top:0,left:0},u=r.containerElement,p=!0;u[0]!==document&&/static/.test(u.css("position"))&&(c=l),h.left<(r._helper?l.left:0)&&(r.size.width=r.size.width+(r._helper?r.position.left-l.left:r.position.left-c.left),d&&(r.size.height=r.size.width/r.aspectRatio,p=!1),r.position.left=a.helper?l.left:0),h.top<(r._helper?l.top:0)&&(r.size.height=r.size.height+(r._helper?r.position.top-l.top:r.position.top),d&&(r.size.width=r.size.height*r.aspectRatio,p=!1),r.position.top=r._helper?l.top:0),s=r.containerElement.get(0)===r.element.parent().get(0),o=/relative|absolute/.test(r.containerElement.css("position")),s&&o?(r.offset.left=r.parentData.left+r.position.left,r.offset.top=r.parentData.top+r.position.top):(r.offset.left=r.element.offset().left,r.offset.top=r.element.offset().top),i=Math.abs(r.sizeDiff.width+(r._helper?r.offset.left-c.left:r.offset.left-l.left)),n=Math.abs(r.sizeDiff.height+(r._helper?r.offset.top-c.top:r.offset.top-l.top)),i+r.size.width>=r.parentData.width&&(r.size.width=r.parentData.width-i,d&&(r.size.height=r.size.width/r.aspectRatio,p=!1)),n+r.size.height>=r.parentData.height&&(r.size.height=r.parentData.height-n,d&&(r.size.width=r.size.height*r.aspectRatio,p=!1)),p||(r.position.left=r.prevPosition.left,r.position.top=r.prevPosition.top,r.size.width=r.prevSize.width,r.size.height=r.prevSize.height)},stop:function(){var t=e(this).resizable("instance"),i=t.options,n=t.containerOffset,s=t.containerPosition,o=t.containerElement,r=e(t.helper),a=r.offset(),l=r.outerWidth()-t.sizeDiff.width,h=r.outerHeight()-t.sizeDiff.height;t._helper&&!i.animate&&/relative/.test(o.css("position"))&&e(this).css({left:a.left-s.left-n.left,width:l,height:h}),t._helper&&!i.animate&&/static/.test(o.css("position"))&&e(this).css({left:a.left-s.left-n.left,width:l,height:h})}}),e.ui.plugin.add("resizable","alsoResize",{start:function(){var t=e(this).resizable("instance"),i=t.options;e(i.alsoResize).each(function(){var t=e(this);t.data("ui-resizable-alsoresize",{width:parseFloat(t.width()),height:parseFloat(t.height()),left:parseFloat(t.css("left")),top:parseFloat(t.css("top"))})})},resize:function(t,i){var n=e(this).resizable("instance"),s=n.options,o=n.originalSize,r=n.originalPosition,a={height:n.size.height-o.height||0,width:n.size.width-o.width||0,top:n.position.top-r.top||0,left:n.position.left-r.left||0};e(s.alsoResize).each(function(){var t=e(this),n=e(this).data("ui-resizable-alsoresize"),s={},o=t.parents(i.originalElement[0]).length?["width","height"]:["width","height","top","left"];e.each(o,function(e,t){var i=(n[t]||0)+(a[t]||0);i&&i>=0&&(s[t]=i||null)}),t.css(s)})},stop:function(){e(this).removeData("ui-resizable-alsoresize")}}),e.ui.plugin.add("resizable","ghost",{start:function(){var t=e(this).resizable("instance"),i=t.size;t.ghost=t.originalElement.clone(),t.ghost.css({opacity:.25,display:"block",
position:"relative",height:i.height,width:i.width,margin:0,left:0,top:0}),t._addClass(t.ghost,"ui-resizable-ghost"),!1!==e.uiBackCompat&&"string"==typeof t.options.ghost&&t.ghost.addClass(this.options.ghost),t.ghost.appendTo(t.helper)},resize:function(){var t=e(this).resizable("instance");t.ghost&&t.ghost.css({position:"relative",height:t.size.height,width:t.size.width})},stop:function(){var t=e(this).resizable("instance");t.ghost&&t.helper&&t.helper.get(0).removeChild(t.ghost.get(0))}}),e.ui.plugin.add("resizable","grid",{resize:function(){var t,i=e(this).resizable("instance"),n=i.options,s=i.size,o=i.originalSize,r=i.originalPosition,a=i.axis,l="number"==typeof n.grid?[n.grid,n.grid]:n.grid,h=l[0]||1,d=l[1]||1,c=Math.round((s.width-o.width)/h)*h,u=Math.round((s.height-o.height)/d)*d,p=o.width+c,m=o.height+u,f=n.maxWidth&&n.maxWidth<p,g=n.maxHeight&&n.maxHeight<m,v=n.minWidth&&n.minWidth>p,b=n.minHeight&&n.minHeight>m;n.grid=l,v&&(p+=h),b&&(m+=d),f&&(p-=h),g&&(m-=d),/^(se|s|e)$/.test(a)?(i.size.width=p,i.size.height=m):/^(ne)$/.test(a)?(i.size.width=p,i.size.height=m,i.position.top=r.top-u):/^(sw)$/.test(a)?(i.size.width=p,i.size.height=m,i.position.left=r.left-c):((m-d<=0||p-h<=0)&&(t=i._getPaddingPlusBorderDimensions(this)),m-d>0?(i.size.height=m,i.position.top=r.top-u):(m=d-t.height,i.size.height=m,i.position.top=r.top+o.height-m),p-h>0?(i.size.width=p,i.position.left=r.left-c):(p=h-t.width,i.size.width=p,i.position.left=r.left+o.width-p))}}),e.ui.resizable}),define("common/component/panel/trait/resizablePanelTrait",["require","underscore","./abstractPanelTrait","css!jquery-ui/jquery-ui","jquery-ui/widgets/resizable"],function(e){"use strict";function t(e,t){this.trigger("resize",e,t)}function i(e,t){this.trigger("resizeStart",e,t)}function n(e,t){this.trigger("resizeStop",e,t)}var s=e("underscore"),o=e("./abstractPanelTrait");return e("css!jquery-ui/jquery-ui"),e("jquery-ui/widgets/resizable"),s.extend({},o,{onConstructor:function(e){e||(e={}),this.handles=e.handles||"e, s, se",this.minWidth=e.minWidth||10,this.minHeight=e.minHeight||10,this.maxWidth=e.maxWidth||null,this.maxHeight=e.maxHeight||null,this.alsoResize=e.alsoResize||!1,this.resizableEl=e.resizableEl},afterSetElement:function(){this.$resizableEl=this.$el.find(this.resizableEl).length?this.$el.find(this.resizableEl):this.$el;var e=this.handles;"function"==typeof e&&(e=e(this.$el)),this.$resizableEl.resizable({handles:e,minHeight:this.minHeight,minWidth:this.minWidth,maxWidth:this.maxWidth,maxHeight:this.maxHeight,alsoResize:this.alsoResize,resize:s.bind(t,this),start:s.bind(i,this),stop:s.bind(n,this)})},onRemove:function(){try{this.$el.resizable("destroy")}catch(e){}}})}),define("text!common/component/dialog/template/dialogTemplate.htm",[],function(){return'<div class="jr-mDialog jr {{- additionalCssClasses }}" tabindex="-1">\n\n    <js-templateNonce></js-templateNonce>\n    <div class="jr-mDialog-header mover jr">\n        <h1 class="jr-mDialog-header-title jr">{{- title }}</h1>\n    </div>\n    <div class="jr-mDialog-body jr {{- additionalBodyCssClasses }}">\n        <div class="jr-mDialog-body-wrapper jr subcontainer"></div>\n    </div>\n    <div class="jr-mDialog-footer jr"></div>\n\n</div>\n'}),define("text!common/component/dialog/template/dialogButtonTemplate.htm",[],function(){return"<button class=\"button action up {{- primary ? 'primary' : ''}} {{- (typeof float !== 'undefined' ? 'right' : '') }}\">\n\n    <js-templateNonce></js-templateNonce>\n    <span class=\"wrap\">{{- label }}<span class=\"icon\"></span></span>\n</button>\n"}),function(e){"function"==typeof define&&define.amd?define("jquery-ui/data",["jquery","./version"],e):e(jQuery)}(function(e){return e.extend(e.expr[":"],{data:e.expr.createPseudo?e.expr.createPseudo(function(t){return function(i){return!!e.data(i,t)}}):function(t,i,n){return!!e.data(t,n[3])}})}),function(e){"function"==typeof define&&define.amd?define("jquery-ui/safe-active-element",["jquery","./version"],e):e(jQuery)}(function(e){return e.ui.safeActiveElement=function(e){var t;try{t=e.activeElement}catch(i){t=e.body}return t||(t=e.body),t.nodeName||(t=e.body),t}}),function(e){"function"==typeof define&&define.amd?define("jquery-ui/safe-blur",["jquery","./version"],e):e(jQuery)}(function(e){return e.ui.safeBlur=function(t){t&&"body"!==t.nodeName.toLowerCase()&&e(t).trigger("blur")}}),function(e){"function"==typeof define&&define.amd?define("jquery-ui/scroll-parent",["jquery","./version"],e):e(jQuery)}(function(e){return e.fn.scrollParent=function(t){var i=this.css("position"),n="absolute"===i,s=t?/(auto|scroll|hidden)/:/(auto|scroll)/,o=this.parents().filter(function(){var t=e(this);return(!n||"static"!==t.css("position"))&&s.test(t.css("overflow")+t.css("overflow-y")+t.css("overflow-x"))}).eq(0);return"fixed"!==i&&o.length?o:e(this[0].ownerDocument||document)}}),function(e){"function"==typeof define&&define.amd?define("jquery-ui/widgets/draggable",["jquery","./mouse","../data","../plugin","../safe-active-element","../safe-blur","../scroll-parent","../version","../widget"],e):e(jQuery)}(function(e){return e.widget("ui.draggable",e.ui.mouse,{version:"1.12.1",widgetEventPrefix:"drag",options:{addClasses:!0,appendTo:"parent",axis:!1,connectToSortable:!1,containment:!1,cursor:"auto",cursorAt:!1,grid:!1,handle:!1,helper:"original",iframeFix:!1,opacity:!1,refreshPositions:!1,revert:!1,revertDuration:500,scope:"default",scroll:!0,scrollSensitivity:20,scrollSpeed:20,snap:!1,snapMode:"both",snapTolerance:20,stack:!1,zIndex:!1,drag:null,start:null,stop:null},_create:function(){"original"===this.options.helper&&this._setPositionRelative(),this.options.addClasses&&this._addClass("ui-draggable"),this._setHandleClassName(),this._mouseInit()},_setOption:function(e,t){this._super(e,t),"handle"===e&&(this._removeHandleClassName(),this._setHandleClassName())},_destroy:function(){if((this.helper||this.element).is(".ui-draggable-dragging"))return void(this.destroyOnClear=!0);this._removeHandleClassName(),this._mouseDestroy()},_mouseCapture:function(t){var i=this.options;return!(this.helper||i.disabled||e(t.target).closest(".ui-resizable-handle").length>0)&&(this.handle=this._getHandle(t),!!this.handle&&(this._blurActiveElement(t),this._blockFrames(!0===i.iframeFix?"iframe":i.iframeFix),!0))},_blockFrames:function(t){this.iframeBlocks=this.document.find(t).map(function(){var t=e(this);return e("<div>").css("position","absolute").appendTo(t.parent()).outerWidth(t.outerWidth()).outerHeight(t.outerHeight()).offset(t.offset())[0]})},_unblockFrames:function(){this.iframeBlocks&&(this.iframeBlocks.remove(),delete this.iframeBlocks)},_blurActiveElement:function(t){var i=e.ui.safeActiveElement(this.document[0]);e(t.target).closest(i).length||e.ui.safeBlur(i)},_mouseStart:function(t){var i=this.options;return this.helper=this._createHelper(t),this._addClass(this.helper,"ui-draggable-dragging"),this._cacheHelperProportions(),e.ui.ddmanager&&(e.ui.ddmanager.current=this),this._cacheMargins(),this.cssPosition=this.helper.css("position"),this.scrollParent=this.helper.scrollParent(!0),this.offsetParent=this.helper.offsetParent(),this.hasFixedAncestor=this.helper.parents().filter(function(){return"fixed"===e(this).css("position")}).length>0,this.positionAbs=this.element.offset(),this._refreshOffsets(t),this.originalPosition=this.position=this._generatePosition(t,!1),this.originalPageX=t.pageX,this.originalPageY=t.pageY,i.cursorAt&&this._adjustOffsetFromHelper(i.cursorAt),this._setContainment(),!1===this._trigger("start",t)?(this._clear(),!1):(this._cacheHelperProportions(),e.ui.ddmanager&&!i.dropBehaviour&&e.ui.ddmanager.prepareOffsets(this,t),this._mouseDrag(t,!0),e.ui.ddmanager&&e.ui.ddmanager.dragStart(this,t),!0)},_refreshOffsets:function(e){this.offset={top:this.positionAbs.top-this.margins.top,left:this.positionAbs.left-this.margins.left,scroll:!1,parent:this._getParentOffset(),relative:this._getRelativeOffset()},this.offset.click={left:e.pageX-this.offset.left,top:e.pageY-this.offset.top}},_mouseDrag:function(t,i){if(this.hasFixedAncestor&&(this.offset.parent=this._getParentOffset()),this.position=this._generatePosition(t,!0),this.positionAbs=this._convertPositionTo("absolute"),!i){var n=this._uiHash();if(!1===this._trigger("drag",t,n))return this._mouseUp(new e.Event("mouseup",t)),!1;this.position=n.position}return this.helper[0].style.left=this.position.left+"px",this.helper[0].style.top=this.position.top+"px",e.ui.ddmanager&&e.ui.ddmanager.drag(this,t),!1},_mouseStop:function(t){var i=this,n=!1;return e.ui.ddmanager&&!this.options.dropBehaviour&&(n=e.ui.ddmanager.drop(this,t)),this.dropped&&(n=this.dropped,this.dropped=!1),"invalid"===this.options.revert&&!n||"valid"===this.options.revert&&n||!0===this.options.revert||e.isFunction(this.options.revert)&&this.options.revert.call(this.element,n)?e(this.helper).animate(this.originalPosition,parseInt(this.options.revertDuration,10),function(){!1!==i._trigger("stop",t)&&i._clear()}):!1!==this._trigger("stop",t)&&this._clear(),!1},_mouseUp:function(t){return this._unblockFrames(),e.ui.ddmanager&&e.ui.ddmanager.dragStop(this,t),this.handleElement.is(t.target)&&this.element.trigger("focus"),e.ui.mouse.prototype._mouseUp.call(this,t)},cancel:function(){return this.helper.is(".ui-draggable-dragging")?this._mouseUp(new e.Event("mouseup",{target:this.element[0]})):this._clear(),this},_getHandle:function(t){return!this.options.handle||!!e(t.target).closest(this.element.find(this.options.handle)).length},_setHandleClassName:function(){this.handleElement=this.options.handle?this.element.find(this.options.handle):this.element,this._addClass(this.handleElement,"ui-draggable-handle")},_removeHandleClassName:function(){this._removeClass(this.handleElement,"ui-draggable-handle")},_createHelper:function(t){var i=this.options,n=e.isFunction(i.helper),s=n?e(i.helper.apply(this.element[0],[t])):"clone"===i.helper?this.element.clone().removeAttr("id"):this.element;return s.parents("body").length||s.appendTo("parent"===i.appendTo?this.element[0].parentNode:i.appendTo),n&&s[0]===this.element[0]&&this._setPositionRelative(),s[0]===this.element[0]||/(fixed|absolute)/.test(s.css("position"))||s.css("position","absolute"),s},_setPositionRelative:function(){/^(?:r|a|f)/.test(this.element.css("position"))||(this.element[0].style.position="relative")},_adjustOffsetFromHelper:function(t){"string"==typeof t&&(t=t.split(" ")),e.isArray(t)&&(t={left:+t[0],top:+t[1]||0}),"left"in t&&(this.offset.click.left=t.left+this.margins.left),"right"in t&&(this.offset.click.left=this.helperProportions.width-t.right+this.margins.left),"top"in t&&(this.offset.click.top=t.top+this.margins.top),"bottom"in t&&(this.offset.click.top=this.helperProportions.height-t.bottom+this.margins.top)},_isRootNode:function(e){return/(html|body)/i.test(e.tagName)||e===this.document[0]},_getParentOffset:function(){var t=this.offsetParent.offset(),i=this.document[0];return"absolute"===this.cssPosition&&this.scrollParent[0]!==i&&e.contains(this.scrollParent[0],this.offsetParent[0])&&(t.left+=this.scrollParent.scrollLeft(),t.top+=this.scrollParent.scrollTop()),this._isRootNode(this.offsetParent[0])&&(t={top:0,left:0}),{top:t.top+(parseInt(this.offsetParent.css("borderTopWidth"),10)||0),left:t.left+(parseInt(this.offsetParent.css("borderLeftWidth"),10)||0)}},_getRelativeOffset:function(){if("relative"!==this.cssPosition)return{top:0,left:0};var e=this.element.position(),t=this._isRootNode(this.scrollParent[0]);return{top:e.top-(parseInt(this.helper.css("top"),10)||0)+(t?0:this.scrollParent.scrollTop()),left:e.left-(parseInt(this.helper.css("left"),10)||0)+(t?0:this.scrollParent.scrollLeft())}},_cacheMargins:function(){this.margins={left:parseInt(this.element.css("marginLeft"),10)||0,top:parseInt(this.element.css("marginTop"),10)||0,right:parseInt(this.element.css("marginRight"),10)||0,bottom:parseInt(this.element.css("marginBottom"),10)||0}},_cacheHelperProportions:function(){this.helperProportions={width:this.helper.outerWidth(),height:this.helper.outerHeight()}},_setContainment:function(){var t,i,n,s=this.options,o=this.document[0];return this.relativeContainer=null,s.containment?"window"===s.containment?void(this.containment=[e(window).scrollLeft()-this.offset.relative.left-this.offset.parent.left,e(window).scrollTop()-this.offset.relative.top-this.offset.parent.top,e(window).scrollLeft()+e(window).width()-this.helperProportions.width-this.margins.left,e(window).scrollTop()+(e(window).height()||o.body.parentNode.scrollHeight)-this.helperProportions.height-this.margins.top]):"document"===s.containment?void(this.containment=[0,0,e(o).width()-this.helperProportions.width-this.margins.left,(e(o).height()||o.body.parentNode.scrollHeight)-this.helperProportions.height-this.margins.top]):s.containment.constructor===Array?void(this.containment=s.containment):("parent"===s.containment&&(s.containment=this.helper[0].parentNode),i=e(s.containment),void((n=i[0])&&(t=/(scroll|auto)/.test(i.css("overflow")),this.containment=[(parseInt(i.css("borderLeftWidth"),10)||0)+(parseInt(i.css("paddingLeft"),10)||0),(parseInt(i.css("borderTopWidth"),10)||0)+(parseInt(i.css("paddingTop"),10)||0),(t?Math.max(n.scrollWidth,n.offsetWidth):n.offsetWidth)-(parseInt(i.css("borderRightWidth"),10)||0)-(parseInt(i.css("paddingRight"),10)||0)-this.helperProportions.width-this.margins.left-this.margins.right,(t?Math.max(n.scrollHeight,n.offsetHeight):n.offsetHeight)-(parseInt(i.css("borderBottomWidth"),10)||0)-(parseInt(i.css("paddingBottom"),10)||0)-this.helperProportions.height-this.margins.top-this.margins.bottom],this.relativeContainer=i))):void(this.containment=null)},_convertPositionTo:function(e,t){t||(t=this.position);var i="absolute"===e?1:-1,n=this._isRootNode(this.scrollParent[0]);return{top:t.top+this.offset.relative.top*i+this.offset.parent.top*i-("fixed"===this.cssPosition?-this.offset.scroll.top:n?0:this.offset.scroll.top)*i,left:t.left+this.offset.relative.left*i+this.offset.parent.left*i-("fixed"===this.cssPosition?-this.offset.scroll.left:n?0:this.offset.scroll.left)*i}},_generatePosition:function(e,t){var i,n,s,o,r=this.options,a=this._isRootNode(this.scrollParent[0]),l=e.pageX,h=e.pageY;return a&&this.offset.scroll||(this.offset.scroll={top:this.scrollParent.scrollTop(),left:this.scrollParent.scrollLeft()}),t&&(this.containment&&(this.relativeContainer?(n=this.relativeContainer.offset(),i=[this.containment[0]+n.left,this.containment[1]+n.top,this.containment[2]+n.left,this.containment[3]+n.top]):i=this.containment,e.pageX-this.offset.click.left<i[0]&&(l=i[0]+this.offset.click.left),e.pageY-this.offset.click.top<i[1]&&(h=i[1]+this.offset.click.top),e.pageX-this.offset.click.left>i[2]&&(l=i[2]+this.offset.click.left),e.pageY-this.offset.click.top>i[3]&&(h=i[3]+this.offset.click.top)),r.grid&&(s=r.grid[1]?this.originalPageY+Math.round((h-this.originalPageY)/r.grid[1])*r.grid[1]:this.originalPageY,h=i?s-this.offset.click.top>=i[1]||s-this.offset.click.top>i[3]?s:s-this.offset.click.top>=i[1]?s-r.grid[1]:s+r.grid[1]:s,o=r.grid[0]?this.originalPageX+Math.round((l-this.originalPageX)/r.grid[0])*r.grid[0]:this.originalPageX,l=i?o-this.offset.click.left>=i[0]||o-this.offset.click.left>i[2]?o:o-this.offset.click.left>=i[0]?o-r.grid[0]:o+r.grid[0]:o),"y"===r.axis&&(l=this.originalPageX),"x"===r.axis&&(h=this.originalPageY)),{top:h-this.offset.click.top-this.offset.relative.top-this.offset.parent.top+("fixed"===this.cssPosition?-this.offset.scroll.top:a?0:this.offset.scroll.top),left:l-this.offset.click.left-this.offset.relative.left-this.offset.parent.left+("fixed"===this.cssPosition?-this.offset.scroll.left:a?0:this.offset.scroll.left)}},_clear:function(){this._removeClass(this.helper,"ui-draggable-dragging"),this.helper[0]===this.element[0]||this.cancelHelperRemoval||this.helper.remove(),this.helper=null,this.cancelHelperRemoval=!1,this.destroyOnClear&&this.destroy()},_trigger:function(t,i,n){return n=n||this._uiHash(),e.ui.plugin.call(this,t,[i,n,this],!0),/^(drag|start|stop)/.test(t)&&(this.positionAbs=this._convertPositionTo("absolute"),n.offset=this.positionAbs),e.Widget.prototype._trigger.call(this,t,i,n)},plugins:{},_uiHash:function(){return{helper:this.helper,position:this.position,originalPosition:this.originalPosition,offset:this.positionAbs}}}),e.ui.plugin.add("draggable","connectToSortable",{start:function(t,i,n){var s=e.extend({},i,{item:n.element});n.sortables=[],e(n.options.connectToSortable).each(function(){var i=e(this).sortable("instance");i&&!i.options.disabled&&(n.sortables.push(i),i.refreshPositions(),i._trigger("activate",t,s))})},stop:function(t,i,n){var s=e.extend({},i,{item:n.element});n.cancelHelperRemoval=!1,e.each(n.sortables,function(){var e=this;e.isOver?(e.isOver=0,n.cancelHelperRemoval=!0,e.cancelHelperRemoval=!1,e._storedCSS={position:e.placeholder.css("position"),top:e.placeholder.css("top"),left:e.placeholder.css("left")},e._mouseStop(t),e.options.helper=e.options._helper):(e.cancelHelperRemoval=!0,e._trigger("deactivate",t,s))})},drag:function(t,i,n){e.each(n.sortables,function(){var s=!1,o=this;o.positionAbs=n.positionAbs,o.helperProportions=n.helperProportions,o.offset.click=n.offset.click,o._intersectsWith(o.containerCache)&&(s=!0,e.each(n.sortables,function(){return this.positionAbs=n.positionAbs,this.helperProportions=n.helperProportions,this.offset.click=n.offset.click,this!==o&&this._intersectsWith(this.containerCache)&&e.contains(o.element[0],this.element[0])&&(s=!1),s})),s?(o.isOver||(o.isOver=1,n._parent=i.helper.parent(),o.currentItem=i.helper.appendTo(o.element).data("ui-sortable-item",!0),o.options._helper=o.options.helper,o.options.helper=function(){return i.helper[0]},t.target=o.currentItem[0],o._mouseCapture(t,!0),o._mouseStart(t,!0,!0),o.offset.click.top=n.offset.click.top,o.offset.click.left=n.offset.click.left,o.offset.parent.left-=n.offset.parent.left-o.offset.parent.left,o.offset.parent.top-=n.offset.parent.top-o.offset.parent.top,n._trigger("toSortable",t),n.dropped=o.element,e.each(n.sortables,function(){this.refreshPositions()}),n.currentItem=n.element,o.fromOutside=n),o.currentItem&&(o._mouseDrag(t),i.position=o.position)):o.isOver&&(o.isOver=0,o.cancelHelperRemoval=!0,o.options._revert=o.options.revert,o.options.revert=!1,o._trigger("out",t,o._uiHash(o)),o._mouseStop(t,!0),o.options.revert=o.options._revert,o.options.helper=o.options._helper,o.placeholder&&o.placeholder.remove(),i.helper.appendTo(n._parent),n._refreshOffsets(t),i.position=n._generatePosition(t,!0),n._trigger("fromSortable",t),n.dropped=!1,e.each(n.sortables,function(){this.refreshPositions()}))})}}),e.ui.plugin.add("draggable","cursor",{start:function(t,i,n){var s=e("body"),o=n.options;s.css("cursor")&&(o._cursor=s.css("cursor")),s.css("cursor",o.cursor)},stop:function(t,i,n){var s=n.options;s._cursor&&e("body").css("cursor",s._cursor)}}),e.ui.plugin.add("draggable","opacity",{start:function(t,i,n){var s=e(i.helper),o=n.options;s.css("opacity")&&(o._opacity=s.css("opacity")),s.css("opacity",o.opacity)},stop:function(t,i,n){var s=n.options;s._opacity&&e(i.helper).css("opacity",s._opacity)}}),e.ui.plugin.add("draggable","scroll",{start:function(e,t,i){i.scrollParentNotHidden||(i.scrollParentNotHidden=i.helper.scrollParent(!1)),i.scrollParentNotHidden[0]!==i.document[0]&&"HTML"!==i.scrollParentNotHidden[0].tagName&&(i.overflowOffset=i.scrollParentNotHidden.offset())},drag:function(t,i,n){var s=n.options,o=!1,r=n.scrollParentNotHidden[0],a=n.document[0];r!==a&&"HTML"!==r.tagName?(s.axis&&"x"===s.axis||(n.overflowOffset.top+r.offsetHeight-t.pageY<s.scrollSensitivity?r.scrollTop=o=r.scrollTop+s.scrollSpeed:t.pageY-n.overflowOffset.top<s.scrollSensitivity&&(r.scrollTop=o=r.scrollTop-s.scrollSpeed)),s.axis&&"y"===s.axis||(n.overflowOffset.left+r.offsetWidth-t.pageX<s.scrollSensitivity?r.scrollLeft=o=r.scrollLeft+s.scrollSpeed:t.pageX-n.overflowOffset.left<s.scrollSensitivity&&(r.scrollLeft=o=r.scrollLeft-s.scrollSpeed))):(s.axis&&"x"===s.axis||(t.pageY-e(a).scrollTop()<s.scrollSensitivity?o=e(a).scrollTop(e(a).scrollTop()-s.scrollSpeed):e(window).height()-(t.pageY-e(a).scrollTop())<s.scrollSensitivity&&(o=e(a).scrollTop(e(a).scrollTop()+s.scrollSpeed))),s.axis&&"y"===s.axis||(t.pageX-e(a).scrollLeft()<s.scrollSensitivity?o=e(a).scrollLeft(e(a).scrollLeft()-s.scrollSpeed):e(window).width()-(t.pageX-e(a).scrollLeft())<s.scrollSensitivity&&(o=e(a).scrollLeft(e(a).scrollLeft()+s.scrollSpeed)))),!1!==o&&e.ui.ddmanager&&!s.dropBehaviour&&e.ui.ddmanager.prepareOffsets(n,t)}}),e.ui.plugin.add("draggable","snap",{start:function(t,i,n){var s=n.options;n.snapElements=[],e(s.snap.constructor!==String?s.snap.items||":data(ui-draggable)":s.snap).each(function(){var t=e(this),i=t.offset();this!==n.element[0]&&n.snapElements.push({item:this,width:t.outerWidth(),height:t.outerHeight(),top:i.top,left:i.left})})},drag:function(t,i,n){var s,o,r,a,l,h,d,c,u,p,m=n.options,f=m.snapTolerance,g=i.offset.left,v=g+n.helperProportions.width,b=i.offset.top,w=b+n.helperProportions.height;for(u=n.snapElements.length-1;u>=0;u--)l=n.snapElements[u].left-n.margins.left,h=l+n.snapElements[u].width,d=n.snapElements[u].top-n.margins.top,c=d+n.snapElements[u].height,v<l-f||g>h+f||w<d-f||b>c+f||!e.contains(n.snapElements[u].item.ownerDocument,n.snapElements[u].item)?(n.snapElements[u].snapping&&n.options.snap.release&&n.options.snap.release.call(n.element,t,e.extend(n._uiHash(),{snapItem:n.snapElements[u].item})),n.snapElements[u].snapping=!1):("inner"!==m.snapMode&&(s=Math.abs(d-w)<=f,o=Math.abs(c-b)<=f,r=Math.abs(l-v)<=f,a=Math.abs(h-g)<=f,s&&(i.position.top=n._convertPositionTo("relative",{top:d-n.helperProportions.height,left:0}).top),o&&(i.position.top=n._convertPositionTo("relative",{top:c,left:0}).top),r&&(i.position.left=n._convertPositionTo("relative",{top:0,left:l-n.helperProportions.width}).left),a&&(i.position.left=n._convertPositionTo("relative",{top:0,left:h}).left)),p=s||o||r||a,"outer"!==m.snapMode&&(s=Math.abs(d-b)<=f,o=Math.abs(c-w)<=f,r=Math.abs(l-g)<=f,a=Math.abs(h-v)<=f,s&&(i.position.top=n._convertPositionTo("relative",{top:d,left:0}).top),o&&(i.position.top=n._convertPositionTo("relative",{top:c-n.helperProportions.height,left:0}).top),r&&(i.position.left=n._convertPositionTo("relative",{top:0,left:l}).left),a&&(i.position.left=n._convertPositionTo("relative",{top:0,left:h-n.helperProportions.width}).left)),!n.snapElements[u].snapping&&(s||o||r||a||p)&&n.options.snap.snap&&n.options.snap.snap.call(n.element,t,e.extend(n._uiHash(),{snapItem:n.snapElements[u].item})),n.snapElements[u].snapping=s||o||r||a||p)}}),e.ui.plugin.add("draggable","stack",{start:function(t,i,n){var s,o=n.options,r=e.makeArray(e(o.stack)).sort(function(t,i){return(parseInt(e(t).css("zIndex"),10)||0)-(parseInt(e(i).css("zIndex"),10)||0)});r.length&&(s=parseInt(e(r[0]).css("zIndex"),10)||0,e(r).each(function(t){e(this).css("zIndex",s+t)}),this.css("zIndex",s+r.length))}}),e.ui.plugin.add("draggable","zIndex",{start:function(t,i,n){var s=e(i.helper),o=n.options;s.css("zIndex")&&(o._zIndex=s.css("zIndex")),s.css("zIndex",o.zIndex)},stop:function(t,i,n){var s=n.options;s._zIndex&&e(i.helper).css("zIndex",s._zIndex)}}),e.ui.draggable}),define("common/component/dialog/Dialog",["require","underscore","jquery","common/component/base/Dimmer","common/component/panel/Panel","common/component/base/OptionContainer","common/component/panel/trait/resizablePanelTrait","text!./template/dialogTemplate.htm","text!./template/dialogButtonTemplate.htm","jquery-ui/widgets/draggable"],function(e){"use strict";var t=e("underscore"),i=e("jquery"),n=e("common/component/base/Dimmer"),s=e("common/component/panel/Panel"),o=e("common/component/base/OptionContainer"),r=e("common/component/panel/trait/resizablePanelTrait"),a=e("text!./template/dialogTemplate.htm"),l=e("text!./template/dialogButtonTemplate.htm");e("jquery-ui/widgets/draggable");var h=s.extend({defaultTemplate:a,events:{mousedown:"_focus",touchstart:"_focus",keydown:"_onKeyDown",keyup:"_onKeyboardEvent",keypress:"_onKeyboardEvent",resize:"_onDialogResize"},constructor:function(e){e||(e={}),e.traits||(e.traits=[]),this.resizable=e.resizable||!1,this.modal=e.modal||!1,this.additionalBodyCssClasses=e.additionalBodyCssClasses||"",this.resizable&&-1===t.indexOf(e.traits,r)&&e.traits.push(r),s.call(this,e)},initialize:function(e){this.dialogOptions=t.extend({},e),this.collapsed=!this.collapsed,this.resetSizeOnOpen=!!t.isUndefined(e.resetSizeOnOpen)||e.resetSizeOnOpen,t.isEmpty(e.buttons)||(this.buttons=new o({options:e.buttons,el:this.$(".jr-mDialog-footer")[0]||this.$(".footer")[0],contextName:"button",optionTemplate:e.dialogButtonTemplate||l})),s.prototype.initialize.apply(this,arguments),this.buttons&&this.listenTo(this.buttons,t.map(e.buttons,function(e){return"button:"+e.action}).join(" "),t.bind(function(e,t){this.trigger("button:"+t.get("action"),e,t)},this)),this.render()},getTemplateArguments:function(){var e=s.prototype.getTemplateArguments.apply(this,arguments);return t.extend(e,{additionalBodyCssClasses:this.additionalBodyCssClasses})},setElement:function(e){var t=s.prototype.setElement.apply(this,arguments);return this.buttons&&this.buttons.setElement(this.$(".jr-mDialog-footer")[0]||this.$(".footer")[0]),t},setTitle:function(e){this.$(".jr-mDialog-header > .jr-mDialog-header-title").text(e)},render:function(){return this.$el.hide(),this.modal&&(this.dimmer=new n({zIndex:900})),i("body").append(this.$el),this.$el.draggable({handle:".mover",addClasses:!1,containment:"document"}),this},open:function(e){return this.isVisible()?this:(this.resetSizeOnOpen&&(this.$el.css({height:"",width:""}),this.$el.find("textarea").css({height:"",width:""})),s.prototype.open.apply(this,arguments),this.modal&&this.dimmer.css({zIndex:++h.highestIndex}).show(),this._setMinSize(),this._position(e),this._increaseZIndex(),this.buttons&&this.buttons.$(".over").removeClass("over"),this.$el.show(),this.$el.find("input").first().focus(),this._onDialogResize(),this.trigger("dialog:visible"),this)},close:function(){if(this.isVisible())return this.$el.css({zIndex:--h.highestIndex}),this.modal&&this.dimmer.css({zIndex:--h.highestIndex}).hide(),this.$el.hide(),s.prototype.close.apply(this,arguments),this},addCssClasses:function(e){this.$el.addClass(e)},toggleCollapsedState:function(){return this},enableButton:function(e){this.buttons.enable(e)},disableButton:function(e){this.buttons.disable(e)},isVisible:function(){return this.$el.is(":visible")},_setMinSize:function(){this.dialogOptions.minWidth&&this.$el.css({minWidth:this.dialogOptions.minWidth}),this.dialogOptions.minHeight&&this.$el.css({minHeight:this.dialogOptions.minHeight}),this.dialogOptions.setMinSizeAsSize&&this.$el.css({width:this.dialogOptions.minWidth,height:this.dialogOptions.minHeight})},_position:function(e){var t,n,s=i("body"),o=this.$el.height(),r=this.$el.width();if(e&&void 0!==e.top&&void 0!==e.left){t=e.top,n=e.left;var a=s.height(),l=s.width(),h=a-e.top,d=l-e.left;h<o&&(t=e.top-o,t=t<0?a/2-o/2:t),d<r&&(n=e.left-r,n=n<0?l/2-r/2:n)}else t=i(window).height()/2-o/2,n=i(window).width()/2-r/2;return this.$el.css({top:Math.max(0,t),left:Math.max(0,n),position:"absolute"}),this},_focus:function(){!this.modal&&this._increaseZIndex()},_increaseZIndex:function(){this.$el.css({zIndex:++h.highestIndex})},_onKeyDown:function(e){this.buttons._onKeyDown(e),e.stopPropagation()},_onKeyboardEvent:function(e){e.stopPropagation()},_onDialogResize:function(){},remove:function(){this.buttons&&this.buttons.remove(),this.dimmer&&this.dimmer.remove();try{this.$el.draggable("destroy")}catch(e){}s.prototype.remove.call(this)}},{highestIndex:5e3,resetHighestIndex:function(e){h.highestIndex=e||5e3}});return h}),define("text!common/component/dialog/template/confirmDialogTemplate.htm",[],function(){return"<p class='confirmationText'>\n\n    <js-templateNonce></js-templateNonce>\n    {{ print(_.xssSoftEscape(text)) }}\n</p>"}),define("common/component/dialog/ConfirmationDialog",["require","underscore","./Dialog","text!./template/confirmDialogTemplate.htm","bundle!js-sdk/CommonBundle"],function(e){"use strict";var t=e("underscore"),i=e("./Dialog"),n=e("text!./template/confirmDialogTemplate.htm"),s=e("bundle!js-sdk/CommonBundle");return i.extend({constructor:function(e){e||(e={}),this.confirmDialogTemplate=t.template(n),i.prototype.constructor.call(this,{modal:!0,additionalCssClasses:e.additionalCssClasses||"confirmationDialog",title:e.title||s["dialog.confirm.title"],content:this.confirmDialogTemplate({text:e.text}),buttons:[{label:e.yesLabel||s["button.yes"],action:"yes",primary:!0},{label:e.noLabel||s["button.no"],action:"no",primary:!1}]})},initialize:function(){i.prototype.initialize.apply(this,arguments),this.on("button:yes",this.close),this.on("button:no",this.close)},setContent:function(e){i.prototype.setContent.call(this,this.confirmDialogTemplate({text:e}))}})}),define("attributes/factory/confirmationDialogFactory",["require","underscore","bundle!AttributesBundle","serverSettingsCommon/enum/confirmDialogTypesEnum","common/component/dialog/ConfirmationDialog"],function(e){var t=e("underscore"),i=e("bundle!AttributesBundle"),n=e("serverSettingsCommon/enum/confirmDialogTypesEnum"),s=e("common/component/dialog/ConfirmationDialog"),o={},r={title:i["attributes.confirm.dialog.title"]};return o[n.DELETE_CONFIRM]=r,o[n.NAME_CONFIRM]={title:i["attributes.confirm.dialog.title"],text:i["attributes.confirm.name.dialog.text"]},o[n.CANCEL_CONFIRM]={title:i["attributes.confirm.dialog.title"],text:i["attributes.confirm.cancel.dialog.text.custom"]},o[n.PERMISSION_CONFIRM]=r,o[n.EDIT_CONFIRM]=t.extend({},{text:i["attributes.confirm.edit.dialog.text"]},r),function(e){return o[e]&&new s(o[e])}}),define("text!attributes/templates/attributesDesignerTemplate.htm",[],function(){return'<div class="baseTableContainer {{-type}}">\n\n    <js-templateNonce></js-templateNonce>\n    <div class="baseTable">\n        <div class="table-row thead">\n            <div class="name table-column">\n                <div class="item">\n                    <p>\n                        {{- i18n["attributes.name"]}}\n                    </p>\n                </div>\n            </div>\n            <div class="value table-column">\n                <div class="item">\n                    <p>\n                        {{- i18n["attributes.value"]}}\n                    </p>\n                </div>\n            </div>\n            <div class="secure table-column">\n                <div class="item">\n                    <p>\n                        {{- i18n["attributes.encrypted"]}}\n                    </p>\n                </div>\n            </div>\n            {{ if (type !== types.SERVER) { }}\n            <div class="inherited table-column">\n                <div class="item">\n                    <p>\n                        {{- i18n["attributes.inherited"]}}\n                    </p>\n                </div>\n            </div>\n            {{ } if (type !== types.USER) { }}\n            <div class="permission table-column">\n                <div class="item">\n                    <p>\n                        {{- i18n["attributes.permission"]}}\n                    </p>\n                </div>\n            </div>\n            {{ } }}\n            <div class="actions table-column"></div>\n        </div>\n        <div class="tbody"></div>\n    </div>\n    <a href="#" class="addNewItem">{{- i18n["attributes.button.add.new"]}}</a>\n</div>'}),define("text!attributes/templates/attributesViewerTemplate.htm",[],function(){
return'<div class="baseTableContainer {{-type}}">\n\n    <js-templateNonce></js-templateNonce>\n    <div class="baseTable">\n        <div class="table-row thead">\n            <div class="name table-column viewer">\n                <div class="item">\n                    <p>\n                        {{- i18n["attributes.name"]}}\n                    </p>\n                </div>\n            </div>\n            <div class="value table-column viewer">\n                <div class="item">\n                    <p>\n                        {{- i18n["attributes.value"]}}\n                    </p>\n                </div>\n            </div>\n            <div class="secure table-column viewer">\n                <div class="item">\n                    <p>\n                        {{- i18n["attributes.encrypted"]}}\n                    </p>\n                </div>\n            </div>\n            {{ if (type !== types.SERVER) { }}\n            <div class="inherited table-column viewer">\n                <div class="item">\n                    <p>\n                        {{- i18n["attributes.inherited"]}}\n                    </p>\n                </div>\n            </div>\n            {{ } if (type !== types.USER) { }}\n            <div class="permission table-column viewer">\n                <div class="item">\n                    <p>\n                        {{- i18n["attributes.permission"]}}\n                    </p>\n                </div>\n            </div>\n            {{ } }}\n        </div>\n        <div class="tbody"></div>\n    </div>\n</div>\n'}),define("text!attributes/templates/emptyViewerTemplate.htm",[],function(){return'<div class="tbody">\n\n    <js-templateNonce></js-templateNonce>\n    <p class="emptyTemplateMessage">{{- i18n["attributes.no.attributes"]}}</p>\n</div>\n'}),define("attributes/factory/tableTemplatesFactory",["require","text!attributes/templates/attributesDesignerTemplate.htm","text!attributes/templates/attributesViewerTemplate.htm","text!attributes/templates/emptyViewerTemplate.htm"],function(e){var t=e("text!attributes/templates/attributesDesignerTemplate.htm"),i=e("text!attributes/templates/attributesViewerTemplate.htm"),n=e("text!attributes/templates/emptyViewerTemplate.htm");return function(e){return e=e||{},e.readOnly?e.empty?n:i:t}}),define("attributes/factory/errorFactory",["require","bundle!AttributesBundle","underscore"],function(e){function t(e,t){var i={};return s.each(e,function(e,n){s.isObject(e)?i[e.field]=e.fn(t[n]):i[e]=t[n]}),i}function i(e){return n["attributes.attribute.permissionMask."+e]}var n=e("bundle!AttributesBundle"),s=e("underscore"),o={},r=[n["attributes.error.message.unknown.error"]];return o["access.denied"]=[n["attributes.error.message.access.denied"],["name"]],o[401]=[n["attributes.error.message.not.authenticated"]],o["illegal.parameter.value.error"]=[n["attributes.illegal.parameter.value.error"]],o["attribute.invalid.permission.order"]=[n["attributes.error.message.invalid.permission.order"],["name",{field:"strongerPermission",fn:i},{field:"inheritedPermission",fn:i}]],o["attribute.duplicate.server.level"]=[n["attributes.error.message.duplicate.server.level"],["name"]],function(e){var i=e.responseJSON||{},n=i.errorCode,a=i.parameters,l=e.status,h=o[n||l]||r;return s.template(h[0])(h[1]?t(h[1],a):{})}}),function(e,t){if("function"==typeof define&&define.amd)define("backbone.wreqr",["backbone","underscore"],function(e,i){return t(e,i)});else if("undefined"!=typeof exports){var i=require("backbone"),n=require("underscore");module.exports=t(i,n)}else t(e.Backbone,e._)}(this,function(e,t){"use strict";var i=e.Wreqr,n=e.Wreqr={};return e.Wreqr.VERSION="1.4.0",e.Wreqr.noConflict=function(){return e.Wreqr=i,this},n.Handlers=function(e,t){var i=function(e){this.options=e,this._wreqrHandlers={},t.isFunction(this.initialize)&&this.initialize(e)};return i.extend=e.Model.extend,t.extend(i.prototype,e.Events,{setHandlers:function(e){t.each(e,t.bind(function(e,i){var n=null;t.isObject(e)&&!t.isFunction(e)&&(n=e.context,e=e.callback),this.setHandler(i,e,n)},this))},setHandler:function(e,t,i){var n={callback:t,context:i};this._wreqrHandlers[e]=n,this.trigger("handler:add",e,t,i)},hasHandler:function(e){return!!this._wreqrHandlers[e]},getHandler:function(e){var t=this._wreqrHandlers[e];if(t)return function(){return t.callback.apply(t.context,arguments)}},removeHandler:function(e){delete this._wreqrHandlers[e]},removeAllHandlers:function(){this._wreqrHandlers={}}}),i}(e,t),n.CommandStorage=function(){var i=function(e){this.options=e,this._commands={},t.isFunction(this.initialize)&&this.initialize(e)};return t.extend(i.prototype,e.Events,{getCommands:function(e){var t=this._commands[e];return t||(t={command:e,instances:[]},this._commands[e]=t),t},addCommand:function(e,t){this.getCommands(e).instances.push(t)},clearCommands:function(e){this.getCommands(e).instances=[]}}),i}(),n.Commands=function(e,t){return e.Handlers.extend({storageType:e.CommandStorage,constructor:function(t){this.options=t||{},this._initializeStorage(this.options),this.on("handler:add",this._executeCommands,this),e.Handlers.prototype.constructor.apply(this,arguments)},execute:function(e){e=arguments[0];var i=t.rest(arguments);this.hasHandler(e)?this.getHandler(e).apply(this,i):this.storage.addCommand(e,i)},_executeCommands:function(e,i,n){var s=this.storage.getCommands(e);t.each(s.instances,function(e){i.apply(n,e)}),this.storage.clearCommands(e)},_initializeStorage:function(e){var i,n=e.storageType||this.storageType;i=t.isFunction(n)?new n:n,this.storage=i}})}(n,t),n.RequestResponse=function(e,t){return e.Handlers.extend({request:function(e){if(this.hasHandler(e))return this.getHandler(e).apply(this,t.rest(arguments))}})}(n,t),n.EventAggregator=function(e,t){var i=function(){};return i.extend=e.Model.extend,t.extend(i.prototype,e.Events),i}(e,t),n.Channel=function(i){var n=function(t){this.vent=new e.Wreqr.EventAggregator,this.reqres=new e.Wreqr.RequestResponse,this.commands=new e.Wreqr.Commands,this.channelName=t};return t.extend(n.prototype,{reset:function(){return this.vent.off(),this.vent.stopListening(),this.reqres.removeAllHandlers(),this.commands.removeAllHandlers(),this},connectEvents:function(e,t){return this._connect("vent",e,t),this},connectCommands:function(e,t){return this._connect("commands",e,t),this},connectRequests:function(e,t){return this._connect("reqres",e,t),this},_connect:function(e,i,n){if(i){n=n||this;var s="vent"===e?"on":"setHandler";t.each(i,t.bind(function(i,o){this[e][s](o,t.bind(i,n))},this))}}}),n}(),n.radio=function(e,t){var i=function(){this._channels={},this.vent={},this.commands={},this.reqres={},this._proxyMethods()};t.extend(i.prototype,{channel:function(e){if(!e)throw new Error("Channel must receive a name");return this._getChannel(e)},_getChannel:function(t){var i=this._channels[t];return i||(i=new e.Channel(t),this._channels[t]=i),i},_proxyMethods:function(){t.each(["vent","commands","reqres"],t.bind(function(e){t.each(n[e],t.bind(function(t){this[e][t]=s(this,e,t)},this))},this))}});var n={vent:["on","off","trigger","once","stopListening","listenTo","listenToOnce"],commands:["execute","setHandler","setHandlers","removeHandler","removeAllHandlers"],reqres:["request","setHandler","setHandlers","removeHandler","removeAllHandlers"]},s=function(e,i,n){return function(s){var o=e._getChannel(s)[i];return o[n].apply(o,t.rest(arguments))}};return new i}(n,t),e.Wreqr}),function(e,t){if("function"==typeof define&&define.amd)define("backbone.babysitter",["backbone","underscore"],function(e,i){return t(e,i)});else if("undefined"!=typeof exports){var i=require("backbone"),n=require("underscore");module.exports=t(i,n)}else t(e.Backbone,e._)}(this,function(e,t){"use strict";var i=e.ChildViewContainer;return e.ChildViewContainer=function(e,t){var i=function(e){this._views={},this._indexByModel={},this._indexByCustom={},this._updateLength(),t.each(e,this.add,this)};t.extend(i.prototype,{add:function(e,t){var i=e.cid;return this._views[i]=e,e.model&&(this._indexByModel[e.model.cid]=i),t&&(this._indexByCustom[t]=i),this._updateLength(),this},findByModel:function(e){return this.findByModelCid(e.cid)},findByModelCid:function(e){var t=this._indexByModel[e];return this.findByCid(t)},findByCustom:function(e){var t=this._indexByCustom[e];return this.findByCid(t)},findByIndex:function(e){return t.values(this._views)[e]},findByCid:function(e){return this._views[e]},remove:function(e){var i=e.cid;return e.model&&delete this._indexByModel[e.model.cid],t.any(this._indexByCustom,function(e,t){if(e===i)return delete this._indexByCustom[t],!0},this),delete this._views[i],this._updateLength(),this},call:function(e){this.apply(e,t.tail(arguments))},apply:function(e,i){t.each(this._views,function(n){t.isFunction(n[e])&&n[e].apply(n,i||[])})},_updateLength:function(){this.length=t.size(this._views)}});var n=["forEach","each","map","find","detect","filter","select","reject","every","all","some","any","include","contains","invoke","toArray","first","initial","rest","last","without","isEmpty","pluck","reduce"];return t.each(n,function(e){i.prototype[e]=function(){var i=t.values(this._views),n=[i].concat(t.toArray(arguments));return t[e].apply(t,n)}}),i}(0,t),e.ChildViewContainer.VERSION="0.1.11",e.ChildViewContainer.noConflict=function(){return e.ChildViewContainer=i,this},e.ChildViewContainer}),function(e,t){if("function"==typeof define&&define.amd)define("backbone.marionette",["backbone","underscore","backbone.wreqr","backbone.babysitter"],function(i,n){return e.Marionette=e.Mn=t(e,i,n)});else if("undefined"!=typeof exports){var i=require("backbone"),n=require("underscore");require("backbone.wreqr"),require("backbone.babysitter");module.exports=t(e,i,n)}else e.Marionette=e.Mn=t(e,e.Backbone,e._)}(this,function(e,t,i){"use strict";var n=e.Marionette,s=e.Mn,o=t.Marionette={};o.VERSION="2.3.2",o.noConflict=function(){return e.Marionette=n,e.Mn=s,this},o.Deferred=t.$.Deferred,o.extend=t.Model.extend,o.isNodeAttached=function(e){return t.$.contains(document.documentElement,e)},o.getOption=function(e,t){if(e&&t)return e.options&&void 0!==e.options[t]?e.options[t]:e[t]},o.proxyGetOption=function(e){return o.getOption(this,e)},o._getValue=function(e,t,n){return i.isFunction(e)&&(n=n||[],e=e.apply(t,n)),e},o.normalizeMethods=function(e){return i.reduce(e,function(e,t,n){return i.isFunction(t)||(t=this[t]),t&&(e[n]=t),e},{},this)},o.normalizeUIString=function(e,t){return e.replace(/@ui\.[a-zA-Z_$0-9]*/g,function(e){return t[e.slice(4)]})},o.normalizeUIKeys=function(e,t){return i.reduce(e,function(e,i,n){return e[o.normalizeUIString(n,t)]=i,e},{})},o.normalizeUIValues=function(e,t){return i.each(e,function(n,s){i.isString(n)&&(e[s]=o.normalizeUIString(n,t))}),e},o.actAsCollection=function(e,t){var n=["forEach","each","map","find","detect","filter","select","reject","every","all","some","any","include","contains","invoke","toArray","first","initial","rest","last","without","isEmpty","pluck"];i.each(n,function(n){e[n]=function(){var e=i.values(i.result(this,t)),s=[e].concat(i.toArray(arguments));return i[n].apply(i,s)}})};var r=o.deprecate=function(e,t){i.isObject(e)&&(e=e.prev+" is going to be removed in the future. Please use "+e.next+" instead."+(e.url?" See: "+e.url:"")),void 0!==t&&t||r._cache[e]||(r._warn("Deprecation warning: "+e),r._cache[e]=!0)};r._warn="undefined"!=typeof console&&(console.warn||console.log)||function(){},r._cache={},o._triggerMethod=function(){function e(e,t,i){return i.toUpperCase()}var t=/(^|:)(\w)/gi;return function(n,s,o){var r=arguments.length<3;r&&(o=s,s=o[0]);var a,l="on"+s.replace(t,e),h=n[l];return i.isFunction(h)&&(a=h.apply(n,r?i.rest(o):o)),i.isFunction(n.trigger)&&(r+o.length>1?n.trigger.apply(n,r?o:[s].concat(i.rest(o,0))):n.trigger(s)),a}}(),o.triggerMethod=function(e){return o._triggerMethod(this,arguments)},o.triggerMethodOn=function(e){return(i.isFunction(e.triggerMethod)?e.triggerMethod:o.triggerMethod).apply(e,i.rest(arguments))},o.MonitorDOMRefresh=function(e){function t(){e._isShown=!0,s()}function n(){e._isRendered=!0,s()}function s(){e._isShown&&e._isRendered&&o.isNodeAttached(e.el)&&i.isFunction(e.triggerMethod)&&e.triggerMethod("dom:refresh")}e.on({show:t,render:n})},function(e){function t(t,n,s,o){var r=o.split(/\s+/);i.each(r,function(i){var o=t[i];if(!o)throw new e.Error('Method "'+i+'" was configured as an event handler, but does not exist.');t.listenTo(n,s,o)})}function n(e,t,i,n){e.listenTo(t,i,n)}function s(e,t,n,s){var o=s.split(/\s+/);i.each(o,function(i){var s=e[i];e.stopListening(t,n,s)})}function o(e,t,i,n){e.stopListening(t,i,n)}function r(t,n,s,o,r){if(n&&s){if(!i.isObject(s))throw new e.Error({message:"Bindings must be an object or function.",url:"marionette.functions.html#marionettebindentityevents"});s=e._getValue(s,t),i.each(s,function(e,s){i.isFunction(e)?o(t,n,s,e):r(t,n,s,e)})}}e.bindEntityEvents=function(e,i,s){r(e,i,s,n,t)},e.unbindEntityEvents=function(e,t,i){r(e,t,i,o,s)},e.proxyBindEntityEvents=function(t,i){return e.bindEntityEvents(this,t,i)},e.proxyUnbindEntityEvents=function(t,i){return e.unbindEntityEvents(this,t,i)}}(o);var a=["description","fileName","lineNumber","name","message","number"];return o.Error=o.extend.call(Error,{urlRoot:"http://marionettejs.com/docs/v"+o.VERSION+"/",constructor:function(e,t){i.isObject(e)?(t=e,e=t.message):t||(t={});var n=Error.call(this,e);i.extend(this,i.pick(n,a),i.pick(t,a)),this.captureStackTrace(),t.url&&(this.url=this.urlRoot+t.url)},captureStackTrace:function(){Error.captureStackTrace&&Error.captureStackTrace(this,o.Error)},toString:function(){return this.name+": "+this.message+(this.url?" See: "+this.url:"")}}),o.Error.extend=o.extend,o.Callbacks=function(){this._deferred=o.Deferred(),this._callbacks=[]},i.extend(o.Callbacks.prototype,{add:function(e,t){var n=i.result(this._deferred,"promise");this._callbacks.push({cb:e,ctx:t}),n.then(function(i){t&&(i.context=t),e.call(i.context,i.options)})},run:function(e,t){this._deferred.resolve({options:e,context:t})},reset:function(){var e=this._callbacks;this._deferred=o.Deferred(),this._callbacks=[],i.each(e,function(e){this.add(e.cb,e.ctx)},this)}}),o.Controller=function(e){this.options=e||{},i.isFunction(this.initialize)&&this.initialize(this.options)},o.Controller.extend=o.extend,i.extend(o.Controller.prototype,t.Events,{destroy:function(){return o._triggerMethod(this,"before:destroy",arguments),o._triggerMethod(this,"destroy",arguments),this.stopListening(),this.off(),this},triggerMethod:o.triggerMethod,getOption:o.proxyGetOption}),o.Object=function(e){this.options=i.extend({},i.result(this,"options"),e),this.initialize.apply(this,arguments)},o.Object.extend=o.extend,i.extend(o.Object.prototype,t.Events,{initialize:function(){},destroy:function(){this.triggerMethod("before:destroy"),this.triggerMethod("destroy"),this.stopListening()},triggerMethod:o.triggerMethod,getOption:o.proxyGetOption,bindEntityEvents:o.proxyBindEntityEvents,unbindEntityEvents:o.proxyUnbindEntityEvents}),o.Region=o.Object.extend({constructor:function(e){if(this.options=e||{},this.el=this.getOption("el"),this.el=this.el instanceof t.$?this.el[0]:this.el,!this.el)throw new o.Error({name:"NoElError",message:'An "el" must be specified for a region.'});this.$el=this.getEl(this.el),o.Object.call(this,e)},show:function(e,t){if(this._ensureElement()){this._ensureViewIsIntact(e);var i=t||{},n=e!==this.currentView,s=!!i.preventDestroy,r=!!i.forceShow,a=!!this.currentView,l=n&&!s,h=n||r;if(a&&this.triggerMethod("before:swapOut",this.currentView,this,t),this.currentView&&delete this.currentView._parent,l?this.empty():a&&h&&this.currentView.off("destroy",this.empty,this),h){e.once("destroy",this.empty,this),e.render(),e._parent=this,a&&this.triggerMethod("before:swap",e,this,t),this.triggerMethod("before:show",e,this,t),o.triggerMethodOn(e,"before:show",e,this,t),a&&this.triggerMethod("swapOut",this.currentView,this,t);var d=o.isNodeAttached(this.el),c=[],u=i.triggerBeforeAttach||this.triggerBeforeAttach,p=i.triggerAttach||this.triggerAttach;return d&&u&&(c=this._displayedViews(e),this._triggerAttach(c,"before:")),this.attachHtml(e),this.currentView=e,d&&p&&(c=this._displayedViews(e),this._triggerAttach(c)),a&&this.triggerMethod("swap",e,this,t),this.triggerMethod("show",e,this,t),o.triggerMethodOn(e,"show",e,this,t),this}return this}},triggerBeforeAttach:!0,triggerAttach:!0,_triggerAttach:function(e,t){var n=(t||"")+"attach";i.each(e,function(e){o.triggerMethodOn(e,n,e,this)},this)},_displayedViews:function(e){return i.union([e],i.result(e,"_getNestedViews")||[])},_ensureElement:function(){if(i.isObject(this.el)||(this.$el=this.getEl(this.el),this.el=this.$el[0]),!this.$el||0===this.$el.length){if(this.getOption("allowMissingEl"))return!1;throw new o.Error('An "el" '+this.$el.selector+" must exist in DOM")}return!0},_ensureViewIsIntact:function(e){if(!e)throw new o.Error({name:"ViewNotValid",message:"The view passed is undefined and therefore invalid. You must pass a view instance to show."});if(e.isDestroyed)throw new o.Error({name:"ViewDestroyedError",message:'View (cid: "'+e.cid+'") has already been destroyed and cannot be used.'})},getEl:function(e){return t.$(e,o._getValue(this.options.parentEl,this))},attachHtml:function(e){this.$el.contents().detach(),this.el.appendChild(e.el)},empty:function(){var e=this.currentView;if(e)return e.off("destroy",this.empty,this),this.triggerMethod("before:empty",e),this._destroyView(),this.triggerMethod("empty",e),delete this.currentView,this},_destroyView:function(){var e=this.currentView;e.destroy&&!e.isDestroyed?e.destroy():e.remove&&(e.remove(),e.isDestroyed=!0)},attachView:function(e){return this.currentView=e,this},hasView:function(){return!!this.currentView},reset:function(){return this.empty(),this.$el&&(this.el=this.$el.selector),delete this.$el,this}},{buildRegion:function(e,t){if(i.isString(e))return this._buildRegionFromSelector(e,t);if(e.selector||e.el||e.regionClass)return this._buildRegionFromObject(e,t);if(i.isFunction(e))return this._buildRegionFromRegionClass(e);throw new o.Error({message:"Improper region configuration type.",url:"marionette.region.html#region-configuration-types"})},_buildRegionFromSelector:function(e,t){return new t({el:e})},_buildRegionFromObject:function(e,t){var n=e.regionClass||t,s=i.omit(e,"selector","regionClass");return e.selector&&!s.el&&(s.el=e.selector),new n(s)},_buildRegionFromRegionClass:function(e){return new e}}),o.RegionManager=o.Controller.extend({constructor:function(e){this._regions={},o.Controller.call(this,e),this.addRegions(this.getOption("regions"))},addRegions:function(e,t){return e=o._getValue(e,this,arguments),i.reduce(e,function(e,n,s){return i.isString(n)&&(n={selector:n}),n.selector&&(n=i.defaults({},n,t)),e[s]=this.addRegion(s,n),e},{},this)},addRegion:function(e,t){var i;return i=t instanceof o.Region?t:o.Region.buildRegion(t,o.Region),this.triggerMethod("before:add:region",e,i),i._parent=this,this._store(e,i),this.triggerMethod("add:region",e,i),i},get:function(e){return this._regions[e]},getRegions:function(){return i.clone(this._regions)},removeRegion:function(e){var t=this._regions[e];return this._remove(e,t),t},removeRegions:function(){var e=this.getRegions();return i.each(this._regions,function(e,t){this._remove(t,e)},this),e},emptyRegions:function(){var e=this.getRegions();return i.invoke(e,"empty"),e},destroy:function(){return this.removeRegions(),o.Controller.prototype.destroy.apply(this,arguments)},_store:function(e,t){this._regions[e]=t,this._setLength()},_remove:function(e,t){this.triggerMethod("before:remove:region",e,t),t.empty(),t.stopListening(),delete t._parent,delete this._regions[e],this._setLength(),this.triggerMethod("remove:region",e,t)},_setLength:function(){this.length=i.size(this._regions)}}),o.actAsCollection(o.RegionManager.prototype,"_regions"),o.TemplateCache=function(e){this.templateId=e},i.extend(o.TemplateCache,{templateCaches:{},get:function(e){var t=this.templateCaches[e];return t||(t=new o.TemplateCache(e),this.templateCaches[e]=t),t.load()},clear:function(){var e,t=i.toArray(arguments),n=t.length;if(n>0)for(e=0;e<n;e++)delete this.templateCaches[t[e]];else this.templateCaches={}}}),i.extend(o.TemplateCache.prototype,{load:function(){if(this.compiledTemplate)return this.compiledTemplate;var e=this.loadTemplate(this.templateId);return this.compiledTemplate=this.compileTemplate(e),this.compiledTemplate},loadTemplate:function(e){var i=t.$(e).html();if(!i||0===i.length)throw new o.Error({name:"NoTemplateError",message:'Could not find template: "'+e+'"'});return i},compileTemplate:function(e){return i.template(e)}}),o.Renderer={render:function(e,t){if(!e)throw new o.Error({name:"TemplateNotFoundError",message:"Cannot render the template since its false, null or undefined."});return(i.isFunction(e)?e:o.TemplateCache.get(e))(t)}},o.View=t.View.extend({isDestroyed:!1,constructor:function(e){i.bindAll(this,"render"),e=o._getValue(e,this),this.options=i.extend({},i.result(this,"options"),e),this._behaviors=o.Behaviors(this),t.View.apply(this,arguments),o.MonitorDOMRefresh(this),this.on("show",this.onShowCalled)},getTemplate:function(){return this.getOption("template")},serializeModel:function(e){return e.toJSON.apply(e,i.rest(arguments))},mixinTemplateHelpers:function(e){e=e||{};var t=this.getOption("templateHelpers");return t=o._getValue(t,this),i.extend(e,t)},normalizeUIKeys:function(e){var t=i.result(this,"_uiBindings");return o.normalizeUIKeys(e,t||i.result(this,"ui"))},normalizeUIValues:function(e){var t=i.result(this,"ui"),n=i.result(this,"_uiBindings");return o.normalizeUIValues(e,n||t)},configureTriggers:function(){if(this.triggers){var e=this.normalizeUIKeys(i.result(this,"triggers"));return i.reduce(e,function(e,t,i){return e[i]=this._buildViewTrigger(t),e},{},this)}},delegateEvents:function(e){return this._delegateDOMEvents(e),this.bindEntityEvents(this.model,this.getOption("modelEvents")),this.bindEntityEvents(this.collection,this.getOption("collectionEvents")),i.each(this._behaviors,function(e){e.bindEntityEvents(this.model,e.getOption("modelEvents")),e.bindEntityEvents(this.collection,e.getOption("collectionEvents"))},this),this},_delegateDOMEvents:function(e){var n=o._getValue(e||this.events,this);n=this.normalizeUIKeys(n),i.isUndefined(e)&&(this.events=n);var s={},r=i.result(this,"behaviorEvents")||{},a=this.configureTriggers(),l=i.result(this,"behaviorTriggers")||{};i.extend(s,r,n,a,l),t.View.prototype.delegateEvents.call(this,s)},undelegateEvents:function(){return t.View.prototype.undelegateEvents.apply(this,arguments),this.unbindEntityEvents(this.model,this.getOption("modelEvents")),this.unbindEntityEvents(this.collection,this.getOption("collectionEvents")),i.each(this._behaviors,function(e){e.unbindEntityEvents(this.model,e.getOption("modelEvents")),e.unbindEntityEvents(this.collection,e.getOption("collectionEvents"))},this),this},onShowCalled:function(){},_ensureViewIsIntact:function(){if(this.isDestroyed)throw new o.Error({name:"ViewDestroyedError",message:'View (cid: "'+this.cid+'") has already been destroyed and cannot be used.'})},destroy:function(){if(!this.isDestroyed){var e=i.toArray(arguments);return this.triggerMethod.apply(this,["before:destroy"].concat(e)),this.isDestroyed=!0,this.triggerMethod.apply(this,["destroy"].concat(e)),this.unbindUIElements(),this.remove(),i.invoke(this._behaviors,"destroy",e),this}},bindUIElements:function(){this._bindUIElements(),i.invoke(this._behaviors,this._bindUIElements)},_bindUIElements:function(){if(this.ui){this._uiBindings||(this._uiBindings=this.ui);var e=i.result(this,"_uiBindings");this.ui={},i.each(e,function(e,t){this.ui[t]=this.$(e)},this)}},unbindUIElements:function(){this._unbindUIElements(),i.invoke(this._behaviors,this._unbindUIElements)},_unbindUIElements:function(){this.ui&&this._uiBindings&&(i.each(this.ui,function(e,t){delete this.ui[t]},this),this.ui=this._uiBindings,delete this._uiBindings)},_buildViewTrigger:function(e){var t=i.isObject(e),n=i.defaults({},t?e:{},{preventDefault:!0,stopPropagation:!0}),s=t?n.event:e;return function(e){e&&(e.preventDefault&&n.preventDefault&&e.preventDefault(),e.stopPropagation&&n.stopPropagation&&e.stopPropagation());var t={view:this,model:this.model,collection:this.collection};this.triggerMethod(s,t)}},setElement:function(){var e=t.View.prototype.setElement.apply(this,arguments);return i.invoke(this._behaviors,"proxyViewProperties",this),e},triggerMethod:function(){for(var e=o._triggerMethod,t=e(this,arguments),i=this._behaviors,n=0,s=i&&i.length;n<s;n++)e(i[n],arguments);return t},_getImmediateChildren:function(){return[]},_getNestedViews:function(){var e=this._getImmediateChildren();return e.length?i.reduce(e,function(e,t){return t._getNestedViews?e.concat(t._getNestedViews()):e},e):e},normalizeMethods:o.normalizeMethods,getOption:o.proxyGetOption,bindEntityEvents:o.proxyBindEntityEvents,unbindEntityEvents:o.proxyUnbindEntityEvents}),o.ItemView=o.View.extend({constructor:function(){o.View.apply(this,arguments)},serializeData:function(){if(!this.model&&!this.collection)return{};var e=[this.model||this.collection];return arguments.length&&e.push.apply(e,arguments),this.model?this.serializeModel.apply(this,e):{items:this.serializeCollection.apply(this,e)}},serializeCollection:function(e){return e.toJSON.apply(e,i.rest(arguments))},render:function(){return this._ensureViewIsIntact(),this.triggerMethod("before:render",this),this._renderTemplate(),this.bindUIElements(),this.triggerMethod("render",this),this},_renderTemplate:function(){var e=this.getTemplate();if(!1!==e){if(!e)throw new o.Error({name:"UndefinedTemplateError",message:"Cannot render the template since it is null or undefined."});var t=this.serializeData();t=this.mixinTemplateHelpers(t);var i=o.Renderer.render(e,t,this);return this.attachElContent(i),this}},attachElContent:function(e){return this.$el.html(e),this}}),o.CollectionView=o.View.extend({childViewEventPrefix:"childview",constructor:function(e){var t=e||{};i.isUndefined(this.sort)&&(this.sort=!!i.isUndefined(t.sort)||t.sort),this.once("render",this._initialEvents),this._initChildViewStorage(),o.View.apply(this,arguments),this.initRenderBuffer()},initRenderBuffer:function(){this.elBuffer=document.createDocumentFragment(),this._bufferedChildren=[]},startBuffering:function(){this.initRenderBuffer(),this.isBuffering=!0},endBuffering:function(){this.isBuffering=!1,this._triggerBeforeShowBufferedChildren(),this.attachBuffer(this,this.elBuffer),this._triggerShowBufferedChildren(),this.initRenderBuffer()},_triggerBeforeShowBufferedChildren:function(){this._isShown&&i.each(this._bufferedChildren,i.partial(this._triggerMethodOnChild,"before:show"))},_triggerShowBufferedChildren:function(){this._isShown&&(i.each(this._bufferedChildren,i.partial(this._triggerMethodOnChild,"show")),this._bufferedChildren=[])},_triggerMethodOnChild:function(e,t){o.triggerMethodOn(t,e)},_initialEvents:function(){this.collection&&(this.listenTo(this.collection,"add",this._onCollectionAdd),this.listenTo(this.collection,"remove",this._onCollectionRemove),this.listenTo(this.collection,"reset",this.render),this.sort&&this.listenTo(this.collection,"sort",this._sortViews))},_onCollectionAdd:function(e){this.destroyEmptyView();var t=this.getChildView(e),i=this.collection.indexOf(e);this.addChild(e,t,i)},_onCollectionRemove:function(e){var t=this.children.findByModel(e);this.removeChildView(t),this.checkEmpty()},onShowCalled:function(){this.children.each(i.partial(this._triggerMethodOnChild,"show"))},render:function(){return this._ensureViewIsIntact(),this.triggerMethod("before:render",this),this._renderChildren(),this.triggerMethod("render",this),this},resortView:function(){this.render()},_sortViews:function(){this.collection.find(function(e,t){var i=this.children.findByModel(e);return!i||i._index!==t},this)&&this.resortView()},_emptyViewIndex:-1,_renderChildren:function(){this.destroyEmptyView(),this.destroyChildren(),this.isEmpty(this.collection)?this.showEmptyView():(this.triggerMethod("before:render:collection",this),this.startBuffering(),this.showCollection(),this.endBuffering(),this.triggerMethod("render:collection",this))},showCollection:function(){var e;this.collection.each(function(t,i){e=this.getChildView(t),this.addChild(t,e,i)},this)},showEmptyView:function(){var e=this.getEmptyView();if(e&&!this._showingEmptyView){this.triggerMethod("before:render:empty"),this._showingEmptyView=!0;var i=new t.Model;this.addEmptyView(i,e),this.triggerMethod("render:empty")}},destroyEmptyView:function(){this._showingEmptyView&&(this.triggerMethod("before:remove:empty"),this.destroyChildren(),delete this._showingEmptyView,this.triggerMethod("remove:empty"))},getEmptyView:function(){return this.getOption("emptyView")},addEmptyView:function(e,t){var n=this.getOption("emptyViewOptions")||this.getOption("childViewOptions");i.isFunction(n)&&(n=n.call(this,e,this._emptyViewIndex));var s=this.buildChildView(e,t,n);s._parent=this,this.proxyChildEvents(s),this._isShown&&o.triggerMethodOn(s,"before:show"),this.children.add(s),this.renderChildView(s,this._emptyViewIndex),this._isShown&&o.triggerMethodOn(s,"show")},getChildView:function(e){var t=this.getOption("childView");if(!t)throw new o.Error({name:"NoChildViewError",message:'A "childView" must be specified'});return t},addChild:function(e,t,i){var n=this.getOption("childViewOptions");n=o._getValue(n,this,[e,i]);var s=this.buildChildView(e,t,n);return this._updateIndices(s,!0,i),this._addChildView(s,i),s._parent=this,s},_updateIndices:function(e,t,i){this.sort&&(t&&(e._index=i),this.children.each(function(i){i._index>=e._index&&(i._index+=t?1:-1)}))},_addChildView:function(e,t){this.proxyChildEvents(e),this.triggerMethod("before:add:child",e),this.children.add(e),this.renderChildView(e,t),this._isShown&&!this.isBuffering&&o.triggerMethodOn(e,"show"),this.triggerMethod("add:child",e)},renderChildView:function(e,t){return e.render(),this.attachHtml(this,e,t),e},buildChildView:function(e,t,n){return new t(i.extend({model:e},n))},removeChildView:function(e){return e&&(this.triggerMethod("before:remove:child",e),e.destroy?e.destroy():e.remove&&e.remove(),delete e._parent,this.stopListening(e),this.children.remove(e),this.triggerMethod("remove:child",e),this._updateIndices(e,!1)),e},isEmpty:function(){return!this.collection||0===this.collection.length},checkEmpty:function(){this.isEmpty(this.collection)&&this.showEmptyView()},attachBuffer:function(e,t){e.$el.append(t)},attachHtml:function(e,t,i){e.isBuffering?(e.elBuffer.appendChild(t.el),e._bufferedChildren.push(t)):e._insertBefore(t,i)||e._insertAfter(t)},_insertBefore:function(e,t){var i;return this.sort&&t<this.children.length-1&&(i=this.children.find(function(e){return e._index===t+1})),!!i&&(i.$el.before(e.el),!0)},_insertAfter:function(e){this.$el.append(e.el)},_initChildViewStorage:function(){this.children=new t.ChildViewContainer},destroy:function(){if(!this.isDestroyed)return this.triggerMethod("before:destroy:collection"),this.destroyChildren(),this.triggerMethod("destroy:collection"),o.View.prototype.destroy.apply(this,arguments)},destroyChildren:function(){var e=this.children.map(i.identity);return this.children.each(this.removeChildView,this),this.checkEmpty(),e},proxyChildEvents:function(e){var t=this.getOption("childViewEventPrefix");this.listenTo(e,"all",function(){var n=i.toArray(arguments),s=n[0],o=this.normalizeMethods(i.result(this,"childEvents"));n[0]=t+":"+s,n.splice(1,0,e),void 0!==o&&i.isFunction(o[s])&&o[s].apply(this,n.slice(1)),this.triggerMethod.apply(this,n)},this)},_getImmediateChildren:function(){return i.values(this.children._views)}}),o.CompositeView=o.CollectionView.extend({constructor:function(){o.CollectionView.apply(this,arguments)},_initialEvents:function(){this.collection&&(this.listenTo(this.collection,"add",this._onCollectionAdd),this.listenTo(this.collection,"remove",this._onCollectionRemove),
this.listenTo(this.collection,"reset",this._renderChildren),this.sort&&this.listenTo(this.collection,"sort",this._sortViews))},getChildView:function(e){return this.getOption("childView")||this.constructor},serializeData:function(){var e={};return this.model&&(e=i.partial(this.serializeModel,this.model).apply(this,arguments)),e},render:function(){return this._ensureViewIsIntact(),this.isRendered=!0,this.resetChildViewContainer(),this.triggerMethod("before:render",this),this._renderTemplate(),this._renderChildren(),this.triggerMethod("render",this),this},_renderChildren:function(){this.isRendered&&o.CollectionView.prototype._renderChildren.call(this)},_renderTemplate:function(){var e={};e=this.serializeData(),e=this.mixinTemplateHelpers(e),this.triggerMethod("before:render:template");var t=this.getTemplate(),i=o.Renderer.render(t,e,this);this.attachElContent(i),this.bindUIElements(),this.triggerMethod("render:template")},attachElContent:function(e){return this.$el.html(e),this},attachBuffer:function(e,t){this.getChildViewContainer(e).append(t)},_insertAfter:function(e){this.getChildViewContainer(this,e).append(e.el)},getChildViewContainer:function(e,t){if("$childViewContainer"in e)return e.$childViewContainer;var i,n=o.getOption(e,"childViewContainer");if(n){var s=o._getValue(n,e);if(i="@"===s.charAt(0)&&e.ui?e.ui[s.substr(4)]:e.$(s),i.length<=0)throw new o.Error({name:"ChildViewContainerMissingError",message:'The specified "childViewContainer" was not found: '+e.childViewContainer})}else i=e.$el;return e.$childViewContainer=i,i},resetChildViewContainer:function(){this.$childViewContainer&&delete this.$childViewContainer}}),o.LayoutView=o.ItemView.extend({regionClass:o.Region,constructor:function(e){e=e||{},this._firstRender=!0,this._initializeRegions(e),o.ItemView.call(this,e)},render:function(){return this._ensureViewIsIntact(),this._firstRender?this._firstRender=!1:this._reInitializeRegions(),o.ItemView.prototype.render.apply(this,arguments)},destroy:function(){return this.isDestroyed?this:(this.regionManager.destroy(),o.ItemView.prototype.destroy.apply(this,arguments))},addRegion:function(e,t){var i={};return i[e]=t,this._buildRegions(i)[e]},addRegions:function(e){return this.regions=i.extend({},this.regions,e),this._buildRegions(e)},removeRegion:function(e){return delete this.regions[e],this.regionManager.removeRegion(e)},getRegion:function(e){return this.regionManager.get(e)},getRegions:function(){return this.regionManager.getRegions()},_buildRegions:function(e){var t={regionClass:this.getOption("regionClass"),parentEl:i.partial(i.result,this,"el")};return this.regionManager.addRegions(e,t)},_initializeRegions:function(e){var t;this._initRegionManager(),t=o._getValue(this.regions,this,[e])||{};var n=this.getOption.call(e,"regions");n=o._getValue(n,this,[e]),i.extend(t,n),t=this.normalizeUIValues(t),this.addRegions(t)},_reInitializeRegions:function(){this.regionManager.invoke("reset")},getRegionManager:function(){return new o.RegionManager},_initRegionManager:function(){this.regionManager=this.getRegionManager(),this.regionManager._parent=this,this.listenTo(this.regionManager,"before:add:region",function(e){this.triggerMethod("before:add:region",e)}),this.listenTo(this.regionManager,"add:region",function(e,t){this[e]=t,this.triggerMethod("add:region",e,t)}),this.listenTo(this.regionManager,"before:remove:region",function(e){this.triggerMethod("before:remove:region",e)}),this.listenTo(this.regionManager,"remove:region",function(e,t){delete this[e],this.triggerMethod("remove:region",e,t)})},_getImmediateChildren:function(){return i.chain(this.regionManager.getRegions()).pluck("currentView").compact().value()}}),o.Behavior=o.Object.extend({constructor:function(e,t){this.view=t,this.defaults=i.result(this,"defaults")||{},this.options=i.extend({},this.defaults,e),o.Object.apply(this,arguments)},$:function(){return this.view.$.apply(this.view,arguments)},destroy:function(){this.stopListening()},proxyViewProperties:function(e){this.$el=e.$el,this.el=e.el}}),o.Behaviors=function(e,t){function i(e,n){return t.isObject(e.behaviors)?(n=i.parseBehaviors(e,n||t.result(e,"behaviors")),i.wrap(e,n,t.keys(o)),n):{}}function n(e,i){this._view=e,this._viewUI=t.result(e,"ui"),this._behaviors=i,this._triggers={}}var s=/^(\S+)\s*(.*)$/,o={behaviorTriggers:function(e,t){return new n(this,t).buildBehaviorTriggers()},behaviorEvents:function(i,n){var o={},r=this._uiBindings||t.result(this,"ui");return t.each(n,function(i,n){var a={},l=t.clone(t.result(i,"events"))||{},h=i._uiBindings||t.result(i,"ui"),d=t.extend({},r,h);l=e.normalizeUIKeys(l,d);var c=0;t.each(l,function(e,o){var r=o.match(s),l=r[1]+"."+[this.cid,n,c++," "].join(""),h=r[2],d=l+h,u=t.isFunction(e)?e:i[e];a[d]=t.bind(u,i)},this),o=t.extend(o,a)},this),o}};return t.extend(i,{behaviorsLookup:function(){throw new e.Error({message:"You must define where your behaviors are stored.",url:"marionette.behaviors.html#behaviorslookup"})},getBehaviorClass:function(t,n){return t.behaviorClass?t.behaviorClass:e._getValue(i.behaviorsLookup,this,[t,n])[n]},parseBehaviors:function(e,n){return t.chain(n).map(function(n,s){var o=i.getBehaviorClass(n,s),r=new o(n,e);return[r].concat(i.parseBehaviors(e,t.result(r,"behaviors")))}).flatten().value()},wrap:function(e,i,n){t.each(n,function(n){e[n]=t.partial(o[n],e[n],i)})}}),t.extend(n.prototype,{buildBehaviorTriggers:function(){return t.each(this._behaviors,this._buildTriggerHandlersForBehavior,this),this._triggers},_buildTriggerHandlersForBehavior:function(i,n){var s=t.extend({},this._viewUI,t.result(i,"ui")),o=t.clone(t.result(i,"triggers"))||{};o=e.normalizeUIKeys(o,s),t.each(o,t.bind(this._setHandlerForBehavior,this,i,n))},_setHandlerForBehavior:function(e,t,i,n){var s=n.replace(/^\S+/,function(e){return e+".behaviortriggers"+t});this._triggers[s]=this._view._buildViewTrigger(i)}}),i}(o,i),o.AppRouter=t.Router.extend({constructor:function(e){this.options=e||{},t.Router.apply(this,arguments);var i=this.getOption("appRoutes"),n=this._getController();this.processAppRoutes(n,i),this.on("route",this._processOnRoute,this)},appRoute:function(e,t){var i=this._getController();this._addAppRoute(i,e,t)},_processOnRoute:function(e,t){if(i.isFunction(this.onRoute)){var n=i.invert(this.getOption("appRoutes"))[e];this.onRoute(e,n,t)}},processAppRoutes:function(e,t){if(t){var n=i.keys(t).reverse();i.each(n,function(i){this._addAppRoute(e,i,t[i])},this)}},_getController:function(){return this.getOption("controller")},_addAppRoute:function(e,t,n){var s=e[n];if(!s)throw new o.Error('Method "'+n+'" was not found on the controller');this.route(t,n,i.bind(s,e))},getOption:o.proxyGetOption,triggerMethod:o.triggerMethod,bindEntityEvents:o.proxyBindEntityEvents,unbindEntityEvents:o.proxyUnbindEntityEvents}),o.Application=o.Object.extend({constructor:function(e){this._initializeRegions(e),this._initCallbacks=new o.Callbacks,this.submodules={},i.extend(this,e),this._initChannel(),o.Object.call(this,e)},execute:function(){this.commands.execute.apply(this.commands,arguments)},request:function(){return this.reqres.request.apply(this.reqres,arguments)},addInitializer:function(e){this._initCallbacks.add(e)},start:function(e){this.triggerMethod("before:start",e),this._initCallbacks.run(e,this),this.triggerMethod("start",e)},addRegions:function(e){return this._regionManager.addRegions(e)},emptyRegions:function(){return this._regionManager.emptyRegions()},removeRegion:function(e){return this._regionManager.removeRegion(e)},getRegion:function(e){return this._regionManager.get(e)},getRegions:function(){return this._regionManager.getRegions()},module:function(e,t){var n=o.Module.getClass(t),s=i.toArray(arguments);return s.unshift(this),n.create.apply(n,s)},getRegionManager:function(){return new o.RegionManager},_initializeRegions:function(e){var t=i.isFunction(this.regions)?this.regions(e):this.regions||{};this._initRegionManager();var n=o.getOption(e,"regions");return i.isFunction(n)&&(n=n.call(this,e)),i.extend(t,n),this.addRegions(t),this},_initRegionManager:function(){this._regionManager=this.getRegionManager(),this._regionManager._parent=this,this.listenTo(this._regionManager,"before:add:region",function(){o._triggerMethod(this,"before:add:region",arguments)}),this.listenTo(this._regionManager,"add:region",function(e,t){this[e]=t,o._triggerMethod(this,"add:region",arguments)}),this.listenTo(this._regionManager,"before:remove:region",function(){o._triggerMethod(this,"before:remove:region",arguments)}),this.listenTo(this._regionManager,"remove:region",function(e){delete this[e],o._triggerMethod(this,"remove:region",arguments)})},_initChannel:function(){this.channelName=i.result(this,"channelName")||"global",this.channel=i.result(this,"channel")||t.Wreqr.radio.channel(this.channelName),this.vent=i.result(this,"vent")||this.channel.vent,this.commands=i.result(this,"commands")||this.channel.commands,this.reqres=i.result(this,"reqres")||this.channel.reqres}}),o.Module=function(e,t,n){this.moduleName=e,this.options=i.extend({},this.options,n),this.initialize=n.initialize||this.initialize,this.submodules={},this._setupInitializersAndFinalizers(),this.app=t,i.isFunction(this.initialize)&&this.initialize(e,t,this.options)},o.Module.extend=o.extend,i.extend(o.Module.prototype,t.Events,{startWithParent:!0,initialize:function(){},addInitializer:function(e){this._initializerCallbacks.add(e)},addFinalizer:function(e){this._finalizerCallbacks.add(e)},start:function(e){this._isInitialized||(i.each(this.submodules,function(t){t.startWithParent&&t.start(e)}),this.triggerMethod("before:start",e),this._initializerCallbacks.run(e,this),this._isInitialized=!0,this.triggerMethod("start",e))},stop:function(){this._isInitialized&&(this._isInitialized=!1,this.triggerMethod("before:stop"),i.invoke(this.submodules,"stop"),this._finalizerCallbacks.run(void 0,this),this._initializerCallbacks.reset(),this._finalizerCallbacks.reset(),this.triggerMethod("stop"))},addDefinition:function(e,t){this._runModuleDefinition(e,t)},_runModuleDefinition:function(e,n){if(e){var s=i.flatten([this,this.app,t,o,t.$,i,n]);e.apply(this,s)}},_setupInitializersAndFinalizers:function(){this._initializerCallbacks=new o.Callbacks,this._finalizerCallbacks=new o.Callbacks},triggerMethod:o.triggerMethod}),i.extend(o.Module,{create:function(e,t,n){var s=e,o=i.rest(arguments,3);t=t.split(".");var r=t.length,a=[];return a[r-1]=n,i.each(t,function(t,i){var r=s;s=this._getModule(r,t,e,n),this._addModuleDefinition(r,s,a[i],o)},this),s},_getModule:function(e,t,n,s,o){var r=i.extend({},s),a=this.getClass(s),l=e[t];return l||(l=new a(t,n,r),e[t]=l,e.submodules[t]=l),l},getClass:function(e){var t=o.Module;return e?e.prototype instanceof t?e:e.moduleClass||t:t},_addModuleDefinition:function(e,t,i,n){var s=this._getDefine(i),o=this._getStartWithParent(i,t);s&&t.addDefinition(s,n),this._addStartWithParent(e,t,o)},_getStartWithParent:function(e,t){var n;return i.isFunction(e)&&e.prototype instanceof o.Module?(n=t.constructor.prototype.startWithParent,!!i.isUndefined(n)||n):!i.isObject(e)||(n=e.startWithParent,!!i.isUndefined(n)||n)},_getDefine:function(e){return!i.isFunction(e)||e.prototype instanceof o.Module?i.isObject(e)?e.define:null:e},_addStartWithParent:function(e,t,i){t.startWithParent=t.startWithParent&&i,t.startWithParent&&!t.startWithParentIsConfigured&&(t.startWithParentIsConfigured=!0,e.addInitializer(function(e){t.startWithParent&&t.start(e)}))}}),o}),define("text!common/component/tooltip/template/tooltipTemplate.htm",[],function(){return'<div class="{{- cssClasses }}" style="position: absolute; z-index: 100000;">\n\n    <js-templateNonce></js-templateNonce>\n    <div class="content">\n        <div class="body"></div>\n    </div>\n</div>\n'}),define("common/component/tooltip/Tooltip",["require","jquery","underscore","backbone","text!./template/tooltipTemplate.htm"],function(e){"use strict";var t=e("jquery"),i=e("underscore"),n=e("backbone"),s=e("text!./template/tooltipTemplate.htm");return n.View.extend({template:i.template(s),delay:500,offset:{x:10,y:10},attribute:"data-tooltip",cssClasses:"panel info tooltip",contentSelector:".body",triggerEvents:!1,el:function(){return this.template({cssClasses:this.cssClasses})},constructor:function(e){if(e||(e={}),!e.attachTo||0===t(e.attachTo).length)throw new Error("Tooltip should be attached to an element");if(!e.contentTemplate)throw new Error("Tooltip should have contentTemplate");this._shown=!1,this.$attachTo=t(e.attachTo),this.$attachTo[0].tooltip=this,e.delay&&(this.delay=e.delay),e.offset&&(this.offset=e.offset),e.attribute&&(this.attribute=e.attribute),e.cssClasses&&(this.cssClasses=e.cssClasses),this.contentTemplate=e.contentTemplate,this.i18n=e.i18n||{},!i.isUndefined(e.triggerEvents)&&(this.triggerEvents=e.triggerEvents),this.selector="["+this.attribute+"]",i.bindAll(this,"show","_onMouseMove","_onMouseLeave"),this.$attachTo.on("mousemove touchmove",this.selector,this._onMouseMove),this.$attachTo.on("mouseleave touchend",this.selector,this._onMouseLeave),n.View.prototype.constructor.apply(this,arguments)},_render:function(e,t,s){if(this._event){e=e instanceof n.Model?e.toJSON():e;var o=i.template(this.contentTemplate)({model:e,i18n:this.i18n,options:t||{}});this.$el.find(".body").empty().append(o),this._showTooltip()}s.resolve()},show:function(e,n){var s=new t.Deferred;return this._timer=setTimeout(i.bind(this._render,this,e,n,s),this.delay),s},_showTooltip:function(){t("body").append(this.$el),this._updatePosition(),this._shown=!0,this.triggerEvents&&this.trigger("show",this)},hide:function(){this.contentTemplate&&this._timer&&clearTimeout(this._timer),this.$el.detach(),this._shown=!1,this.triggerEvents&&this.trigger("hide",this)},_updatePosition:function(){var e=this.$el.innerHeight(),i=this.$el.innerWidth(),n=t(window).height(),s=t(window).width(),o=this.offset.y,r=this.offset.x;e+this._event.pageY+this.offset.y+3>=n&&(o=-this.offset.y-e),i+this._event.pageX+this.offset.x+3>=s&&(r=-this.offset.x-i),this.$el.css({top:this._event.pageY+o,left:this._event.pageX+r})},_onMouseMove:function(e){this._event=e},_onMouseLeave:function(){this._shown&&this.hide(),this._timer&&clearTimeout(this._timer),this._event=null},remove:function(){this._shown&&this.hide(),this._timer&&clearTimeout(this._timer),this.$attachTo.off("mousemove touchmove",this.selector,this._onMouseMove),this.$attachTo.off("mouseleave touchend",this.selector,this._onMouseLeave),n.View.prototype.remove.apply(this,arguments)}},{attachTo:function(e,t){var i=this;return t||(t={}),t.attachTo=e||"body",new i(t)},detachFrom:function(e){e=t(e)[0],e.tooltip&&e.tooltip.remove()}})}),define("common/component/baseTable/BaseTable",["require","backbone.marionette","common/component/tooltip/Tooltip"],function(e){var t=e("backbone.marionette"),i=e("common/component/tooltip/Tooltip");return t.CompositeView.extend({initialize:function(e){e=e||{};var t=e.tooltip;t&&t.template&&t.i18n&&(this.tooltip=new i({i18n:t.i18n,attachTo:this.$el,contentTemplate:t.template}))},remove:function(){this.tooltip&&this.tooltip.remove(),t.CompositeView.prototype.remove.apply(this,arguments)}})}),define("attributes/view/AttributesViewer",["require","jquery","underscore","bundle!AttributesBundle","attributes/enum/attributesTypesEnum","common/component/baseTable/BaseTable","attributes/factory/tableTemplatesFactory","common/util/xssUtil","css!attributes.css"],function(e){var t=e("jquery"),i=e("underscore"),n=e("bundle!AttributesBundle"),s=e("attributes/enum/attributesTypesEnum"),o=e("common/component/baseTable/BaseTable"),r=e("attributes/factory/tableTemplatesFactory");e("common/util/xssUtil");return e("css!attributes.css"),o.extend({className:"attributesViewer",templateHelpers:function(){return{i18n:n,type:this.type,types:s}},initialize:function(e){e=e||{},this.type=e.type,this.childViewOptions=i.extend({},e.childViewOptions,{type:this.type}),this.$container=t(e.$container),o.prototype.initialize.apply(this,arguments),this.tooltip&&this._initTooltipEvents()},render:function(){return o.prototype.render.apply(this,arguments),this.$container.append(this.$el),this},setContext:function(e,t){return this.collection.setContext(e,t)},show:function(){this.$el.show()},hide:function(){this.$el.hide()},getTemplate:function(){var e=r({readOnly:!0,empty:!this.collection.models.length});return i.template(e)},_initTooltipEvents:function(){this.listenTo(this,"childview:mouseover",this._onChildViewMouseOver),this.listenTo(this,"childview:mouseout",this._onChildViewMouseOut)},_onChildViewMouseOver:function(e,n,s){var o=t(s.target).closest(".table-column");o.hasClass("name")&&(n=i.pick(n.toJSON(),["name","description"])),o.hasClass("value")&&(n=i.pick(n.toJSON(),"value")),this.tooltip.show(n)},_onChildViewMouseOut:function(e,t,i){this.tooltip.hide()}})}),define("text!common/component/notification/template/notificationTemplate.htm",[],function(){return'<div class="notificationAlert">\n\n    <js-templateNonce></js-templateNonce>\n    <p class="notificationMessage">\n        <span>{{- message }}</span>\n        <span class="close">| <a href="#">{{- i18n[\'notification.button.close\'] }}</a></span>\n    </p>\n</div>'}),define("common/component/notification/Notification",["require","underscore","jquery","backbone","bundle!js-sdk/CommonBundle","text!./template/notificationTemplate.htm","css!notifications"],function(e){"use strict";var t,i,n=e("underscore"),s=e("jquery"),o=e("backbone"),r=e("bundle!js-sdk/CommonBundle"),a=e("text!./template/notificationTemplate.htm");e("css!notifications");var l={SUCCESS:"success",WARNING:"warning"},h={};return h[l.WARNING]=l.WARNING,i=o.View.extend({template:n.template(a),events:{"click .close a":"hide"},el:function(){return this.template({message:this.message,i18n:r})},initialize:function(){this.render()},render:function(){return s("body").append(this.$el),this.$el.hide(),this.$messageContainer=this.$(".notificationMessage > span:first-child"),this},show:function(e){return e=n.extend({type:l.WARNING,delay:2e3},e),this.$messageContainer.text(e.message),this.$messageContainer.removeClass().attr({class:h[e.type]}),this.$el.slideDown(),e.delay&&n.delay(n.bind(this.hide,this),e.delay),this},hide:function(){return arguments.length&&arguments[0].preventDefault&&arguments[0].preventDefault(),this.$el.slideUp(),this},remove:function(){o.View.prototype.remove.apply(this,arguments)}},{show:function(){return t||(t=new i),t.show.apply(t,arguments)},hide:function(){return t||(t=new i),t.hide.apply(t,arguments)}})}),define("text!common/component/dialog/template/alertDialogTemplate.htm",[],function(){return"<p class='alertText'>\n\n    <js-templateNonce></js-templateNonce>\n    {{- message }}\n</p>"}),define("common/component/dialog/AlertDialog",["require","underscore","./Dialog","common/util/xssUtil","text!./template/alertDialogTemplate.htm","bundle!js-sdk/CommonBundle"],function(e){"use strict";var t=e("underscore"),i=e("./Dialog"),n=e("common/util/xssUtil"),s=e("text!./template/alertDialogTemplate.htm"),o=e("bundle!js-sdk/CommonBundle");return i.extend({contentTemplate:t.template(s),constructor:function(e){e||(e={}),i.prototype.constructor.call(this,{modal:!1!==e.modal,message:e.message,additionalCssClasses:"alertDialog "+(e.additionalCssClasses||""),title:e.title||o["dialog.exception.title"],buttons:[{label:o["button.close"],action:"close",primary:!0}]},e)},initialize:function(e){i.prototype.initialize.apply(this,arguments),this.on("button:close",this.close),this.setMessage(e.message)},setMessage:function(e){e=n.softHtmlEscape(e,{whiteList:["br"]}),this.content=this.contentTemplate({message:e});var t=this.renderContent();this.$contentContainer.html(t)}})}),define("attributes/view/AttributesDesigner",["require","underscore","jquery","backbone","bundle!AttributesBundle","serverSettingsCommon/enum/confirmDialogTypesEnum","attributes/enum/attributesTypesEnum","attributes/enum/permissionMasksEnum","attributes/factory/confirmationDialogFactory","attributes/factory/tableTemplatesFactory","attributes/factory/errorFactory","attributes/view/AttributesViewer","common/component/notification/Notification","common/component/dialog/AlertDialog"],function(e){var t=e("underscore"),i=e("jquery"),n=e("backbone"),s=e("bundle!AttributesBundle"),o=e("serverSettingsCommon/enum/confirmDialogTypesEnum"),r=e("attributes/enum/attributesTypesEnum"),a=(e("attributes/enum/permissionMasksEnum"),e("attributes/factory/confirmationDialogFactory")),l=e("attributes/factory/tableTemplatesFactory"),h=e("attributes/factory/errorFactory"),d=e("attributes/view/AttributesViewer"),c=e("common/component/notification/Notification"),u=e("common/component/dialog/AlertDialog");return d.extend({className:"attributesDesigner",ui:{addNewBtn:".addNewItem"},events:{"click @ui.addNewBtn":"_addNewChildView","mousedown .filterItems, .actions.table-column button, .permission.table-column select, .secure.table-column input":"_checkCurrentAttribute","focus .filterItems, .actions.table-column button, .permission.table-column select, .secure.table-column input":"_checkCurrentAttribute"},childEvents:{active:"_activeChildView",changed:"_saveChildViewToChangedList","open:confirm":"_openConfirm",validate:"_validateChildView"},initialize:function(e){e=e||{};var i={type:e.type};this.notification=new c,this.alertDialog=new u,this.model=new n.Model,this.changedModels=[],this.overriddenInheritedModels=[],d.prototype.initialize.apply(this,arguments),this.childViewOptions=t.extend({},e.childViewOptions,i),this.emptyViewOptions=t.extend({},e.emptyViewOptions,i),this._initConfirmationDialogs(),this._initFilters&&this._initFilters(e),!t.isEmpty(e.buttons)&&e.buttonsContainer&&this._initButtons&&this._initButtons(e),this._initEvents()},render:function(e){return d.prototype.render.apply(this,arguments),this._renderFilters&&this._renderFilters(e),this},hide:function(){this._resetFilters&&this._resetFilters(),d.prototype.hide.apply(this,arguments)},saveChildren:function(){var e=this,n=this._filterChangeList("isDeleted"),s=t.difference(this.changedModels,n);return this.saveDfD=new i.Deferred,this._validateNotAcceptedChildView().done(function(){e.containsUnsavedItems()?e.collection.save(e.changedModels,s).done(t.bind(e._successAjaxCallback,e)).fail(t.bind(e._errorAjaxCallback,e)):e.saveDfD.resolve()}).fail(function(){e.saveDfD.reject()}),this.saveDfD},_validateNotAcceptedChildView:function(){var e=new i.Deferred;return this.currentChildView?this.currentChildView.runValidation(null,{dfd:e}):e.resolve(),e},revertChanges:function(){this.revertDfd=new i.Deferred;var e,t=this,n=new i.Deferred;return this.currentChildView?this.currentChildView.toggleActive().done(n.resolve):n.resolve(),n.done(function(){for(var i=t.changedModels.length,n=i-1;n>=0;n--)e=t.changedModels[n],e.isDeleted?t.revertViewRemoval(e):e.isNew()?t._removeModel(e):e.reset().setState("confirmedState",e.getState());t._resetChangedList(),t.revertDfd.resolve()}),this.revertDfd},getTemplate:function(){return t.template(l())},containsUnsavedItems:function(){return!!this.changedModels.length},removeView:function(e){var t=this._findChildrenByModel(e);e.isDeleted={index:this.collection.indexOf(e)},e.get("inherited")?this._saveRemovedOverriddenInheritedModelToList(e):this._saveChildViewToChangedList(t,!e.isNew()),this._removeModel(e)},revertViewRemoval:function(e){var i=e.isDeleted&&e.isDeleted.index,n=t.isNumber(i)?i:this.collection.models.length;this._deleteViewFromChangedList(e),e.reset(),this.collection.add(e,{at:n}),delete e.isDeleted},remove:function(){i(window).off("beforeunload",this._onPageLeave),this._removeConfirmationDialogs(),this.notification&&this.notification.remove(),this.alertDialog&&this.alertDialog.remove(),d.prototype.remove.apply(this,arguments)},_initEvents:function(){i(window).on("beforeunload",t.bind(this._onPageLeave,this))},_initConfirmationDialogs:function(){this.confirmationDialogs={},t.each(o,function(e){this.confirmationDialogs[e]=a(e)},this),this.listenTo(this.confirmationDialogs[o.DELETE_CONFIRM],"button:yes",this._onDeleteConfirm),this.listenTo(this.confirmationDialogs[o.NAME_CONFIRM],"button:yes",this._onNameConfirm),this.listenTo(this.confirmationDialogs[o.NAME_CONFIRM],"button:no",t.bind(this._revertChangedModelProperty,this,"name")),this.listenTo(this.confirmationDialogs[o.CANCEL_CONFIRM],"button:yes",this.revertChanges),this.listenTo(this.confirmationDialogs[o.EDIT_CONFIRM],"button:yes",this._onEditConfirm),this._initPermissionConfirmEvents&&this._initPermissionConfirmEvents()},_removeConfirmationDialogs:function(){t.each(this.confirmationDialogs,function(e){e.remove()},this)},_successAjaxCallback:function(e){this.notification.show({message:s["attributes.notification.message.saved"],type:"success"}),this._sendSearchRequest()?this._searchForInherited(t.union(this.deletedModels,this.renamedModels)).then(this.saveDfD.resolve,this.saveDfD.reject):this.saveDfD.resolve(),e&&this._postProcessItems(e),this._resetChangedList()},_sendSearchRequest:function(){return!this._isServerLevel()&&this._searchForInherited&&this._deletedRenamedModels()},_deletedRenamedModels:function(){return this.deletedModels=this._filterChangeList("isDeleted"),this.renamedModels=this._filterChangeList("isRenamed"),this.deletedModels.length||this.renamedModels.length},_filterChangeList:function(e){var i;return t.compact(t.filter(this.changedModels,function(n){if(i=n[e],!n.get("inherited"))return t.isFunction(i)?n[e]():i}))},_postProcessItems:function(e){var i,n=e.attribute;t.each(n,function(e){(i=this._findChildrenByModel(e.name))&&i._onSaveSuccess()},this)},_errorAjaxCallback:function(e){this.alertDialog.setMessage(h(e)),this.alertDialog.open(),this.saveDfD.reject()},_toggleAddNewItemButton:function(e){var t=i(this.ui.addNewBtn);e?t.show():t.hide()},_checkCurrentAttribute:function(e){this.currentChildView&&(e.preventDefault(),this.confirmationDialogs[o.EDIT_CONFIRM].open())},_onPageLeave:function(e){if(this.containsUnsavedItems())return(e||window.event).returnValue=s["attributes.dialog.unsaved.changes"],s["attributes.dialog.unsaved.changes"]},_onEditConfirm:function(){this.currentChildView.cancel()},_onNameConfirm:function(){this.validateDfD&&this.validateDfD.resolve()},_onDeleteConfirm:function(){var e=this.model.get("changedChildView"),t=e.model,i=t.get("name");e.isInherited()&&!t.isRenamed()?t.reset():(this.removeView(t),this._revertInheritedRemoval&&this._revertInheritedRemoval(i))},_isServerLevel:function(){return this.type===r.SERVER||null===this.collection.getContext().id},_revertChangedModelProperty:function(e){(this.model.get("changedChildView")||this.currentChildView).model.reset(e,"confirmedState")},_addNewChildView:function(){var e=this.collection.addNew(),t=this._findChildrenByModel(e);this._saveChildViewToChangedList(t,!0),t.toggleActive()},_scrollToChildView:function(e){var t=this.$el.closest(".body"),i=t.height(),n=e.$el,s=n.height(),o=n.position(),r=i<o.top+s&&{scrollTop:t.scrollTop()+(o.top+s-i)};r&&t.animate(r,900)},_successValidationCallback:function(e,t,i){var n=this,s=e.model;this._filterInheritedViews&&this._filterInheritedViews(i),e.validateIfSecure(),e.toggleIfModelIsValid().done(function(){n._removeInheritedView&&n._removeInheritedView(s),n._addInheritedView&&n._addInheritedView(s),n._showPermissionConfirm&&n._showPermissionConfirm(e),n._resetFilters&&n._resetFilters(),t.resolve()})},_deleteViewFromChangedList:function(e){var i=t.indexOf(this.changedModels,e);-1!==i&&this.changedModels.splice(i,1)},_removeModel:function(e){this.collection.remove(e)},_findModelsWhere:function(e){return this.collection.findWhere(e)},_findChildrenByModel:function(e){return(e=t.isString(e)?this._findModelsWhere({name:e}):e)&&this.children.findByModel(e)},_resetChangedList:function(){this.changedModels.length=0,this.overriddenInheritedModels.length=0,this._triggerChangeEvent()},_triggerChangeEvent:function(){this.toggleButtons&&this.toggleButtons(),this.trigger("change")},_activeChildView:function(e,t,i){this._setCurrentChildView(t?e:null),this._scrollToChildView(e),i&&i.resolve()},_saveChildViewToChangedList:function(e,i){var n=e.model;t.contains(this.changedModels,n)?!i&&this._deleteViewFromChangedList(n):i&&this.changedModels.push(n),e.invokeFiltration()&&this._resetFilters&&this._resetFilters(),this._triggerChangeEvent()},_saveRemovedOverriddenInheritedModelToList:function(e){!t.contains(this.overriddenInheritedModels,e)&&this.overriddenInheritedModels.push(e)},_openConfirm:function(e,i,n){this.validateDfD=n.dfd,this.model.set("changedChildView",e);var r=this.confirmationDialogs[i],a=i!==o.CANCEL_CONFIRM||this.containsUnsavedItems();switch(i){case o.DELETE_CONFIRM:r.setContent(t.template(s["attributes.confirm.delete.dialog.text"],{name:e.model.get("name")}));break;case o.PERMISSION_CONFIRM:r.setContent(s["attributes.confirm.permission.dialog.text"])}a&&r.open()},_validateChildView:function(e,n){n=n||{};var s=e.model,o=n.dfd?n.dfd:new i.Deferred,r=!s.isOriginallyInherited(),a=t.bind(this._successValidationCallback,this,e,o),l=this._isServerLevel();return e.getChangedProperties("name")&&!this._sendValidateSearchRequest(s)?this.collection.validateSearch(s,this.changedModels,r,l).then(a):a(),o},_sendValidateSearchRequest:function(e){var i=this._filterChangeList("isDeleted"),n=t.filter(i,function(t){return e.get("name")===t.get("name")}).length,s=t.filter(this.changedModels,function(t){return e.get("name")===t.get("name")}).length;return n&&!e.isDeleted&&s<=2},_setCurrentChildView:function(e){this._toggleAddNewItemButton(!e);var t=this.currentChildView;if(t){var i=t.model;i.isNew()&&!t.isStateConfirmed()&&this.removeView(i)}this.currentChildView=e}})}),define("text!serverSettingsCommon/templates/buttonTemplate.htm",[],function(){return'<button class="button action up {{= primary ? \'primary\' : \'\'}}">\n\n    <span class="wrap">{{- label }}<span class="icon"></span></span>\n</button>\n'}),define("serverSettingsCommon/view/traits/buttonsTrait",["require","underscore","common/component/base/OptionContainer","serverSettingsCommon/enum/confirmDialogTypesEnum","text!serverSettingsCommon/templates/buttonTemplate.htm"],function(e){var t=e("underscore"),i=e("common/component/base/OptionContainer"),n=e("serverSettingsCommon/enum/confirmDialogTypesEnum"),s=e("text!serverSettingsCommon/templates/buttonTemplate.htm");return{_initButtons:function(e){this.buttons=new i({options:e.buttons,el:e.buttonsContainer,contextName:"button",optionTemplate:s}),this.buttons.disable(),this.listenTo(this.buttons,"button:save",this.saveChildren),this.listenTo(this.buttons,"button:cancel",t.bind(this._openConfirm,this,null,n.CANCEL_CONFIRM))},toggleButtons:function(){var e=this.buttons;this.containsUnsavedItems()?e.enable():(t.each(e.options,function(e){e.$el.removeClass("over")}),e.disable())}}}),define("common/view/mixin/epoxyCustomBindingHandlers",["require"],function(e){return{}}),define("common/view/mixin/epoxyCustomBindingFilters",["require"],function(e){return{}}),define("common/view/mixin/epoxyViewMixin",["require","backbone.epoxy","underscore","./epoxyCustomBindingHandlers","./epoxyCustomBindingFilters"],function(e){var t=e("backbone.epoxy"),i=e("underscore"),n=e("./epoxyCustomBindingHandlers"),s=e("./epoxyCustomBindingFilters");return{epoxifyView:function(){var e=this.remove;t.View.mixin(this),e&&(this.remove=e),this.bindingFilters&&(this.bindingFilters=i.extend({},s,this.bindingFilters)),this.bindingHandlers&&(this.bindingHandlers=i.extend({},n,this.bindingHandlers))},applyEpoxyBindings:function(){this.applyBindings&&this.applyBindings()},removeEpoxyBindings:function(){this.removeBindings&&this.removeBindings()}}}),define("attributes/attributesFilter/AttributesFilterCollectionView",["require","jquery","underscore","backbone","backbone.marionette","bundle!AttributesBundle","common/view/mixin/epoxyViewMixin"],function(e){
var t=e("jquery"),i=e("underscore"),n=e("backbone"),s=e("backbone.marionette"),o=e("bundle!AttributesBundle"),r=e("common/view/mixin/epoxyViewMixin"),a=["true","false"],l=s.CompositeView.extend({className:"filtersContainer",events:{"change select":"_onCurrentFilterChange"},templateHelpers:function(){return{i18n:o}},constructor:function(e){this._initCurrentCriteria(),s.CompositeView.apply(this,arguments)},initialize:function(e){this.targetCollection=e&&e.targetCollection||[],this.epoxifyView(),this.initEvents()},initEvents:function(){this.listenTo(this.targetCollection,"add",this.addItemToFilterCollection),this.listenTo(this.targetCollection,"remove",this.removeItemFromFilterCollection),this.listenTo(this.targetCollection,"sync",this._initFilterCollection)},filter:function(e){var t=e||this.currentCriteria,i=t.defaultFilter?this.filterCollection.models:this.filterCollection.where(t);this.targetCollection.reset(i)},reset:function(){this.currentCriteria.defaultFilter||(this.$el.find("option[value='defaultFilter::true']").prop("selected",!0),this._initCurrentCriteria(),this.filter())},addItemToFilterCollection:function(e){this.filterCollection.add(e)},removeItemFromFilterCollection:function(e){this.filterCollection.remove(e)},render:function(){return s.CompositeView.prototype.render.apply(this,arguments),this.applyEpoxyBindings(),this.delegateEvents(this.events),this},remove:function(){this.removeEpoxyBindings(),s.CompositeView.prototype.remove.apply(this,arguments)},_initCurrentCriteria:function(e,t){e=e||"defaultFilter",t=!!i.isUndefined(t)||t,this.currentCriteria={},this.currentCriteria[e]=t},_initFilterCollection:function(){this.filterCollection=new n.Collection(this.targetCollection.models)},_onCurrentFilterChange:function(e){var n=t(e.target).val().split("::"),s=n[0],o=n[1];-1!==i.indexOf(a,o)&&(this._initCurrentCriteria(s,JSON.parse(o)),this.filter())}});return i.extend(l.prototype,r),l}),define("text!attributes/attributesFilter/template/attributesFilterViewTemplate.htm",[],function(){return'<option value="{{- model.field + \'::\' + model.value}}" {{ if(model.selected) { }}selected="selected"{{ } }} >{{- model.title }}</option>\n\n    <js-templateNonce></js-templateNonce>'}),define("attributes/attributesFilter/view/AttributesFilterView",["require","underscore","text!attributes/attributesFilter/template/attributesFilterViewTemplate.htm","backbone.marionette"],function(e){var t=e("underscore"),i=e("text!attributes/attributesFilter/template/attributesFilterViewTemplate.htm");return e("backbone.marionette").ItemView.extend({template:function(e){return t.template(i)({model:e})},onRender:function(){this.$el=this.$el.children(),this.$el.unwrap(),this.setElement(this.$el)}})}),define("text!attributes/attributesFilter/template/attributesFilterCollectionViewTemplate.htm",[],function(){return'<span>\n\n    <js-templateNonce></js-templateNonce>\n    {{- i18n["attributes.table.filters.filter.by"]}}</span>\n<select class="filterItems"></select>\n\n'}),define("attributes/view/trait/designerFilterTrait",["require","underscore","backbone","common/util/xssUtil","attributes/attributesFilter/AttributesFilterCollectionView","attributes/attributesFilter/view/AttributesFilterView","text!attributes/attributesFilter/template/attributesFilterCollectionViewTemplate.htm"],function(e){var t=e("underscore"),i=e("backbone"),n=(e("common/util/xssUtil"),e("attributes/attributesFilter/AttributesFilterCollectionView")),s=e("attributes/attributesFilter/view/AttributesFilterView"),o=e("text!attributes/attributesFilter/template/attributesFilterCollectionViewTemplate.htm");return{_initFilters:function(e){this.filters=new n({collection:new i.Collection(e.filters||[]),childView:s,childViewContainer:"select",template:t.template(o),model:new i.Model({currentFilter:null}),targetCollection:this.collection})},_renderFilters:function(e){var t=this.filters.render().el;return!e&&this.$el.prepend(t)},_resetFilters:function(){this.filters.reset()}}}),define("attributes/view/trait/designerInheritedTrait",["require","underscore"],function(e){var t=e("underscore");return{_findOriginallyInheritedModelByName:function(e,i){return t.find(e,function(e){return e.isOriginallyInherited()&&e.get("name")===i})},_filterInheritedViews:function(e){this.filteredInheriteds=this.collection.filterInheritedAttributes(e)},_findInheriteds:function(e){return this._findModelsWhere({name:e,inherited:!0})},_revertInheritedRemoval:function(e){if(!this._findInheriteds(e)){var i=this._findOriginallyInheritedModelByName(t.union(this.changedModels,this.overriddenInheritedModels),e);i&&this.revertViewRemoval(i)}},_searchForInherited:function(e){var t=this;return this.collection.search(e).done(function(e){e&&(t._filterInheritedViews(e),t.collection.addItemsToCollection(t.filteredInheriteds))})},_removeInheritedView:function(e){var t=this._findInheriteds(e.get("name"));t&&this.removeView(t)},_addInheritedView:function(e){this.filteredInheriteds&&this.filteredInheriteds.length&&(e.resetField("id"),this.collection.addItemsToCollection(this.filteredInheriteds))}}}),define("attributes/view/trait/designerPermissionTrait",["require","serverSettingsCommon/enum/confirmDialogTypesEnum"],function(e){var t=e("serverSettingsCommon/enum/confirmDialogTypesEnum");return{_initPermissionConfirmEvents:function(){this.listenTo(this.confirmationDialogs[t.PERMISSION_CONFIRM],"button:yes",this._onPermissionConfirm),this.listenTo(this.confirmationDialogs[t.PERMISSION_CONFIRM],"button:no",this._onPermissionCancel)},_onPermissionConfirm:function(){var e;this.currentChildView?this.currentChildView.triggerModelValidation({dfd:this.validateDfD}):(e=this.model.get("changedChildView").model,e.setState("confirmedState"),e.hasChanged("inherited")&&this._resetFilters&&this._resetFilters())},_onPermissionCancel:function(){this._revertChangedModelProperty("_embedded")},_showPermissionConfirm:function(e){e._showPermissionConfirm(!1)}}}),define("attributes/factory/attributesDesignerFactory",["require","underscore","attributes/view/AttributesDesigner","attributes/enum/attributesTypesEnum","serverSettingsCommon/view/traits/buttonsTrait","attributes/view/trait/designerFilterTrait","attributes/view/trait/designerInheritedTrait","attributes/view/trait/designerPermissionTrait"],function(e){function t(e){var t={};return i.each(e,function(e){i.extend(t,e)}),t}var i=e("underscore"),n=e("attributes/view/AttributesDesigner"),s=e("attributes/enum/attributesTypesEnum"),o=e("serverSettingsCommon/view/traits/buttonsTrait"),r=e("attributes/view/trait/designerFilterTrait"),a=e("attributes/view/trait/designerInheritedTrait"),l=e("attributes/view/trait/designerPermissionTrait"),h={};return h[s.SERVER]=[o,l],h[s.TENANT]=[r,a,l],h[s.USER]=[r,a],function(e,i){return new(n.extend(t(h[e])))(i)}}),define("common/component/baseTable/behaviors/TooltipRowBehavior",["require","backbone.marionette"],function(e){return e("backbone.marionette").Behavior.extend({events:{mouseover:"_onMouseOver",mouseout:"_onMouseOut"},_onMouseOver:function(e){this.view.trigger("mouseover",this.view.model,e)},_onMouseOut:function(e){this.view.trigger("mouseout",this.view.model,e)}})}),define("common/component/baseTable/childView/BaseRow",["require","underscore","backbone.marionette","common/view/mixin/epoxyViewMixin","common/component/baseTable/behaviors/TooltipRowBehavior"],function(e){var t=e("underscore"),i=e("backbone.marionette"),n=e("common/view/mixin/epoxyViewMixin"),s=e("common/component/baseTable/behaviors/TooltipRowBehavior"),o=i.ItemView.extend({behaviors:{Tooltip:{behaviorClass:s}},initialize:function(){this.epoxifyView()},render:function(){return i.ItemView.prototype.render.apply(this,arguments),this.applyEpoxyBindings(),this},remove:function(){this.removeEpoxyBindings(),i.ItemView.prototype.remove.apply(this,arguments)}});return t.extend(o.prototype,n),o}),define("text!attributes/templates/rowDesignerEditTemplate.htm",[],function(){return'<div class="editMode">\n\n    <js-templateNonce></js-templateNonce>\n    <span class="control firstInputGroup">\n        <span class="name editMode control" data-bind="validationErrorClass:name">\n            <div class="wrap">{{- i18n["attributes.name"]}}:</div>\n            <input type="text" data-bind="value:name, events:[\'keyup\'], disabled:inherited" />\n            <span class="message warning" data-bind="validationErrorText:name" ></span>\n        </span>\n        <span class="value editMode control" data-bind="validationErrorClass:value">\n            <div class="wrap">{{- i18n["attributes.value"]}}:</div>\n            <input type="password" data-bind="toggle:secure, value:encrypt, events:[\'keyup\']" />\n            <input type="text" data-bind="toggle:not(secure), value:value, events:[\'keyup\']" />\n            <span class="message warning" data-bind="validationErrorText:value"></span>\n        </span>\n    </span>\n    <label class="descriptionArea editMode control" data-bind="validationErrorClass:description">\n        <div class="wrap">{{- i18n["attributes.description"]}}:</div>\n        <input type="text" data-bind="value:description, events:[\'keyup\']" />\n        <span class="message warning" data-bind="validationErrorText:description"></span>\n    </label>\n    {{ if (type !== types.USER) { }}\n    <span class="permission editMode control">\n        <div class="wrap">{{- i18n["attributes.permission"]}}:</div>\n        <select data-bind="value:integer(permissionEmbedded)">\n            <option value="1">{{- i18n["attributes.attribute.permissionMask.1"]}}</option>\n            <option value="2">{{- i18n["attributes.attribute.permissionMask.2"]}}</option>\n            <option value="32">{{- i18n["attributes.attribute.permissionMask.32"]}}</option>\n            <option value="0">{{- i18n["attributes.attribute.permissionMask.0"]}}</option>\n        </select>\n    </span>\n    {{ } }}\n    <div class="secure editMode control">\n        <input name="secure" data-bind="checked:secure" type="checkbox"/>\n        <span class="wrap">{{- i18n["attributes.encrypt"]}}</span>\n    </div>\n    <div class="actions control">\n        <button class="button action up primary ok editMode">\n            <span class="wrap">{{- i18n2["button.ok"] }}</span>\n        </button>\n        <button class="button action up cancel editMode">\n            <span class="wrap">{{- i18n2["button.cancel"] }}</span>\n        </button>\n    </div>\n</div>\n'}),define("text!attributes/templates/rowDesignerViewTemplate.htm",[],function(){return'<div class="name table-column" data-tooltip="true">\n\n    <js-templateNonce></js-templateNonce>\n    <div class="item"><p data-bind="text:name"></p></div>\n</div>\n<div class="value table-column"\n     data-tooltip="true">\n    <div class="item">\n        <input readonly type="password" data-bind="toggle:secure, value:encrypt"/>\n        <p data-bind="toggle:not(secure), text:value"></p>\n    </div>\n</div>\n<div class="secure table-column">\n    <div class="item">\n        <input data-bind="toggle:not(readOnly), checked:secure" type="checkbox"/>\n        <span data-bind="toggle:readOnly, text:secure"></span>\n    </div>\n</div>\n{{ if (type !== types.SERVER) { }}\n<div class="inherited table-column">\n    <div class="item">\n        <span data-bind="text:inherited"></span>\n    </div>\n</div>\n{{ } if (type !== types.USER) { }}\n<div class="permission table-column">\n    <div class="item">\n        <select data-bind="value:integer(permissionEmbedded), disabled:readOnly">\n            <option value="1">{{- i18n["attributes.attribute.permissionMask.1"]}}</option>\n            <option value="2">{{- i18n["attributes.attribute.permissionMask.2"]}}</option>\n            <option value="32">{{- i18n["attributes.attribute.permissionMask.32"]}}</option>\n            <option value="0">{{- i18n["attributes.attribute.permissionMask.0"]}}</option>\n        </select>\n    </div>\n</div>\n{{ } }}\n<div class="actions table-column">\n    <div class="item">\n        <div class="actionButtons">\n            <span data-bind="toggle:not(readOnly)">\n                <button name="editButton" class="button action simple edit"></button>\n            </span>\n            <span data-bind="toggle:not(disableRemove)">\n                <button name="deleteButton" class="button action simple delete"></button>\n            </span>\n        </div>\n    </div>\n</div>\n\n'}),define("text!attributes/templates/emptyDesignerTemplate.htm",[],function(){return'<div class="table-column name">\n\n    <js-templateNonce></js-templateNonce>\n</div>\n<div class="table-column value"></div>\n<div class="table-column secure"></div>\n{{ if (type !== types.SERVER) { }}<div class="table-column inherited"></div>\n{{ } if (type !== types.USER) { }} <div class="table-column permission"></div> {{ } }}\n<div class="table-column actions"></div>\n'}),define("text!attributes/templates/rowViewTemplate.htm",[],function(){return'<div class="name table-column viewer" data-tooltip="true">\n\n    <js-templateNonce></js-templateNonce>\n    <div class="item">\n        <p data-bind="text:name"></p></div>\n</div>\n<div class="value table-column viewer"\n     data-tooltip="true">\n    <div class="item">\n        <input readonly type="password" data-bind="toggle:secure, value:encrypt"/>\n\n        <p data-bind="toggle:not(secure), text:value"></p>\n    </div>\n</div>\n<div class="secure table-column viewer">\n    <div class="item">\n        <span name="secure" data-bind="text:secure"></span>\n    </div>\n</div>\n{{ if (type !== types.SERVER) { }}\n<div class="inherited table-column viewer">\n    <div class="item">\n        <span data-bind="text:inherited"></span>\n    </div>\n</div>\n{{ } if (type !== types.USER) { }}\n<div class="permission table-column viewer">\n    <div class="item">\n        <select data-bind="value:integer(permissionEmbedded)" disabled="disabled">\n            <option value="1">{{- i18n["attributes.attribute.permissionMask.1"]}}</option>\n            <option value="2">{{- i18n["attributes.attribute.permissionMask.2"]}}</option>\n            <option value="32">{{- i18n["attributes.attribute.permissionMask.32"]}}</option>\n            <option value="0">{{- i18n["attributes.attribute.permissionMask.0"]}}</option>\n        </select>\n    </div>\n</div>\n{{ } }}\n\n\n\n'}),define("attributes/factory/rowTemplatesFactory",["require","text!attributes/templates/rowDesignerEditTemplate.htm","text!attributes/templates/rowDesignerViewTemplate.htm","text!attributes/templates/emptyDesignerTemplate.htm","text!attributes/templates/rowViewTemplate.htm"],function(e){var t=e("text!attributes/templates/rowDesignerEditTemplate.htm"),i=e("text!attributes/templates/rowDesignerViewTemplate.htm"),n=e("text!attributes/templates/emptyDesignerTemplate.htm"),s=e("text!attributes/templates/rowViewTemplate.htm");return function(e){return e=e||{},e.readOnly?s:e.empty?n:e.editMode?t:i}}),define("attributes/view/RowView",["require","underscore","bundle!AttributesBundle","bundle!CommonBundle","common/component/baseTable/childView/BaseRow","attributes/enum/attributesTypesEnum","attributes/factory/rowTemplatesFactory"],function(e){var t=e("underscore"),i=e("bundle!AttributesBundle"),n=e("bundle!CommonBundle"),s=e("common/component/baseTable/childView/BaseRow"),o=e("attributes/enum/attributesTypesEnum"),r=e("attributes/factory/rowTemplatesFactory");return s.extend({className:"table-row",template:t.template(r({readOnly:!0})),templateHelpers:function(){return{i18n:i,i18n2:n,type:this.type,types:o,encrypted:"~secure~"}},computeds:{encrypt:{get:function(){return"~secure~"},set:function(e){this.setBinding("value",e)}}},initialize:function(e){this.type=e.type,s.prototype.initialize.apply(this,arguments)}})}),define("serverSettingsCommon/behaviors/DeleteConfirmBehavior",["require","backbone.marionette","serverSettingsCommon/enum/confirmDialogTypesEnum"],function(e){var t=e("backbone.marionette"),i=e("serverSettingsCommon/enum/confirmDialogTypesEnum");return t.Behavior.extend({events:{"click .delete":"_onDeleteClick"},_onDeleteClick:function(e){this.view.trigger("open:confirm",i.DELETE_CONFIRM,this.view,this.view.model)}})}),define("attributes/view/DesignerRowView",["require","underscore","jquery","attributes/view/RowView","serverSettingsCommon/behaviors/DeleteConfirmBehavior","serverSettingsCommon/enum/confirmDialogTypesEnum","attributes/enum/permissionMasksEnum","attributes/factory/rowTemplatesFactory"],function(e){var t=e("underscore"),i=e("jquery"),n=e("attributes/view/RowView"),s=e("serverSettingsCommon/behaviors/DeleteConfirmBehavior"),o=e("serverSettingsCommon/enum/confirmDialogTypesEnum"),r=e("attributes/enum/permissionMasksEnum"),a=e("attributes/factory/rowTemplatesFactory");return n.extend({tagName:"div",className:"table-row",ui:{passwordInput:"input[type='password']"},events:t.extend({},n.prototype.events,{"click .edit":"toggleActive","click .cancel":"cancel","click .ok":"runValidation","click @ui.passwordInput":"toggleValue","blur @ui.passwordInput":"toggleValue"}),modelEvents:{change:"_onModelChange"},behaviors:t.extend(n.prototype.behaviors,{DeleteConfirm:{behaviorClass:s}}),computeds:t.extend(n.prototype.computeds,{readOnly:{deps:["inherited","permissionMask"],get:function(e,t){var i=t===r.READ_ONLY;return i||e&&i}},disableRemove:{deps:["inherited","permissionMask"],get:function(e,t){return e||t===r.READ_ONLY}}}),initialize:function(e){this.editMode=!1,this._onViewInitialize&&this._onViewInitialize(),n.prototype.initialize.apply(this,arguments)},render:function(){return n.prototype.render.apply(this,arguments),this._onViewRender&&this._onViewRender(),this},getTemplate:function(){var e=!this.editMode&&this.model.get("name");return t.template(a({editMode:!e}))},toggleActive:function(){var e=new i.Deferred,t=this;return this.toggleMode().done(function(){t.trigger("active",t.editMode,e)}),e},toggleMode:function(){var e=new i.Deferred;return this.editMode=!this.editMode,this.editMode?this.slideDown(e):this.slideUp(e),e},toggleIfModelIsValid:function(){return this.validateModel()?(this.model.setState("confirmedState"),this.model.isNew()&&this.confirmState(),this.modelChanged=null,this.toggleActive()):new i.Deferred},slideDown:function(e){return this.render().hide().slideDown({done:function(){e.resolve()}}),this},slideUp:function(e,t){t=t||"28px";var i=this;return this.$el.animate({height:t},{done:function(){i.render().$el.css({height:"100%"}).show(),e.resolve()}}),this},hide:function(){return this.$el.hide()},show:function(){return this.$el.show()},cancel:function(){this.model.set(this.model.getState("confirmedState")),this.toggleActive()},runValidation:function(e,t){this.validateModel(t)&&this.triggerConfirmOpening(t)},triggerConfirmOpening:function(e){e=e||{};var n=new i.Deferred,s=this,r=function(){s.permissionConfirmShouldBeShown?s._openPermissionConfirm&&t.bind(s._openPermissionConfirm,s,e)():s.triggerModelValidation(e)};this.model.isNew()?r():this.modelChanged?(this.modelChanged.name?this.trigger("open:confirm",o.NAME_CONFIRM,{dfd:n}):n.resolve(),n.done(function(){s.modelChanged._embedded?r():s.triggerModelValidation(e)})):this.toggleActive()},triggerModelValidation:function(e){this.model.trimAttrs(["name","value","description"]),this.trigger("validate",e)},validateModel:function(e){e=e||{};var t=this.model.isValid(!0);return!t&&e.dfd&&e.dfd.reject(),t},confirmState:function(e){this.model.confirmState(e)},isStateConfirmed:function(){return this.model.isStateConfirmed()},isInherited:function(){return this.model.getState("originalState").inherited},getChangedProperties:function(e){if(this.modelChanged)return e?this.modelChanged[e]:this.modelChanged},toggleValue:function(e){if(this.editMode){var t=i(e.target),n=t.val(),s="~secure~"===n,o=i(e.relatedTarget).hasClass("ok"),r="click"===e.type;n&&(r&&s&&(t.val(""),this.model.resetField("value")),r||o||t.val("~secure~"))}},invokeFiltration:function(){var e=this.model;if(e.hasChanged("secure")||e.hasChanged("_embedded")&&!this._isPermissionLimited())return!this.editMode&&e.hasChanged("inherited")},validateIfSecure:function(){var e=this.getChangedProperties("name");this.model.validateIfSecure=this.model.validateSecureValue()&&e||!1},_onSaveSuccess:function(){this.modelChanged=null,this.model.setId(),this.model.get("secure")&&this.model.resetField("value"),this.model.setState(),this.model.setState("confirmedState")},_onModelChange:function(e){this.modelChanged=this.modelChanged||{};var i,n=e.changedAttributes(),s=this.model.getState(),o=this.isInherited(),r=e.isNew();t.each(n,function(e,i){if("inherited"!==i){var n=s[i];(t.isObject(e)?t.isEqual(n,e):n===e)?delete this.modelChanged[i]:this.modelChanged[i]=e}},this),i=!t.isEmpty(this.modelChanged),o&&e.set("inherited",!i),!this.editMode&&n.secure&&e.setState("confirmedState"),this.trigger("changed",i||r),this.model.validate(this.modelChanged)}})}),define("attributes/view/DesignerEmptyView",["require","underscore","backbone.marionette","attributes/enum/attributesTypesEnum","attributes/factory/rowTemplatesFactory"],function(e){var t=e("underscore"),i=e("backbone.marionette"),n=e("attributes/enum/attributesTypesEnum"),s=e("attributes/factory/rowTemplatesFactory");return i.ItemView.extend({className:"table-row",templateHelpers:function(){return{type:this.type,types:n}},initialize:function(e){e=e||{},this.type=e.type,this.template=t.template(s({empty:!0}))}})}),define("attributes/view/viewWithPermissionTrait",["require","underscore","serverSettingsCommon/enum/confirmDialogTypesEnum","attributes/enum/permissionMasksEnum"],function(e){var t=e("underscore"),i=e("serverSettingsCommon/enum/confirmDialogTypesEnum"),n=e("attributes/enum/permissionMasksEnum"),s={1:1,2:2,32:3,0:4};return{_onViewInitialize:function(){this.listenTo(this.model,"change:_embedded",t.bind(this._onPermissionChange,this))},_onViewRender:function(){var e=this.model.get("inherited"),i=this.model.getPermission(),s=i&&i.mask,o=t.isNumber(s)?s:this.model.get("permissionMask");if(e&&o!==n.ADMINISTRATOR){this.$el.find("option:selected").prevAll().attr("disabled","disabled")}},_onPermissionChange:function(e,t){var i=this._isPermissionLimited(t);this._showPermissionConfirm(!1),this.modelChanged._embedded&&i?this.editMode?this._showPermissionConfirm(!0):this._openPermissionConfirm():!this.editMode&&e.setState("confirmedState")},_showPermissionConfirm:function(e){this.permissionConfirmShouldBeShown=e},_isPermissionLimited:function(e){var t=this.model,i=t.getState("confirmedState");return s[t.getPermission(e).mask]>s[t.getPermission(i._embedded).mask]},_openPermissionConfirm:function(e){this.trigger("open:confirm",i.PERMISSION_CONFIRM,e||{})}}}),define("attributes/enum/roleEnum",{ROLE_ADMINISTRATOR:"role:/ROLE_ADMINISTRATOR"}),define("attributes/model/modelWithPermissionTrait",["require","underscore","attributes/enum/roleEnum","attributes/enum/permissionMasksEnum"],function(e){var t=e("underscore"),i=e("attributes/enum/roleEnum");e("attributes/enum/permissionMasksEnum");return{computeds:{permissionEmbedded:{deps:["_embedded","permissionMask"],get:function(e,t){var i=this.getPermission(e);return i?i.mask:t},set:function(e){var n=t.cloneDeep(this.get("_embedded")),s=this.getPermission(n);return s?s.mask=e:n.permission.push({mask:e,recipient:i.ROLE_ADMINISTRATOR}),{_embedded:n}}}},_initModelWithPermissionDefaults:function(){this.defaults=t.extend({},this.defaults,{_embedded:{permission:[{recipient:i.ROLE_ADMINISTRATOR,mask:"1"}]}})},getPermission:function(e){if(e=e||this.get("_embedded"))return t.find(e.permission,function(e){return e.recipient===i.ROLE_ADMINISTRATOR})}}}),define("text!attributes/templates/tooltipTemplate.htm",[],function(){return"{{ if( !_.isUndefined(model.value) ) { }}\n    <p class='message label'>{{- i18n['attributes.value'] + ':'}}</p>\n    <p class='message'>{{- model.value }}</p>\n{{ }else{ }}\n    <p class='message label'>{{- i18n['attributes.name'] + ':'}}</p>\n    <p class='message'>{{- model.name }}</p>\n    <p class='message label'>{{- i18n['attributes.description'] + ':'}}</p>\n    <p class='message'>{{- model.description }}</p>\n{{ } }}\n\n    <js-templateNonce></js-templateNonce>"}),define("attributes/factory/attributesViewOptionsFactory",["require","underscore","bundle!AttributesBundle","attributes/collection/AttributesCollection","attributes/view/DesignerRowView","attributes/view/DesignerEmptyView","attributes/view/viewWithPermissionTrait","attributes/view/RowView","attributes/enum/attributesTypesEnum","bundle!CommonBundle","attributes/model/AttributeModel","attributes/model/modelWithPermissionTrait","text!attributes/templates/tooltipTemplate.htm"],function(e){var t=e("underscore"),i=e("bundle!AttributesBundle"),n=e("attributes/collection/AttributesCollection"),s=e("attributes/view/DesignerRowView"),o=e("attributes/view/DesignerEmptyView"),r=e("attributes/view/viewWithPermissionTrait"),a=e("attributes/view/RowView"),l=e("attributes/enum/attributesTypesEnum"),h=e("bundle!CommonBundle"),d=e("attributes/model/AttributeModel"),c=e("attributes/model/modelWithPermissionTrait"),u=e("text!attributes/templates/tooltipTemplate.htm");return function(e){var p=new n([],{context:e.context,model:e.type===l.USER?d:d.extend(c)}),m={type:e.type,collection:p,childViewContainer:".tbody",tooltip:{template:u,i18n:i}};return t.extend(m,e.type!==l.SERVER?{$container:e.container,designer:{childView:e.type===l.USER?s:s.extend(r),emptyView:o,filters:[{title:i["attributes.table.filters.all"],value:"true",field:"defaultFilter",selected:!0},{title:i["attributes.table.filters.true"],value:"true",field:"inherited"},{title:i["attributes.table.filters.false"],value:"false",field:"inherited"}]},viewer:{childView:a}}:{el:e.el,childView:s.extend(r),emptyView:o,buttons:[{label:h["button.save"],action:"save",primary:!0},{label:h["button.cancel"],action:"cancel",primary:!1}],buttonsContainer:".buttonsContainer"})}}),define("attributes/trait/attributesViewScrollEventTrait",["require","attributes/enum/attributesTypesEnum"],function(e){var t=e("attributes/enum/attributesTypesEnum");return{initScrollEvent:function(e){var i=e.type===t.SERVER?e.$el.parent():e.$container.parent(),n=e.$el.find(".addNewItem");i.scroll(function(e){n.css("margin-right",20-i.scrollLeft()+"px")})},detachScrollEvent:function(e){e.off()}}}),define("administer/administerCustomAttributesMain",["require","!domReady","jquery","administer.logging","administer.base","jrs.configs","attributes/factory/attributesDesignerFactory","attributes/factory/attributesViewOptionsFactory","attributes/trait/attributesViewScrollEventTrait","attributes/enum/attributesTypesEnum"],function(e){"use strict";var t=e("!domReady"),i=e("jquery"),n=e("administer.logging"),s=e("administer.base"),o=e("jrs.configs"),r=e("attributes/factory/attributesDesignerFactory"),a=e("attributes/factory/attributesViewOptionsFactory"),l=e("attributes/trait/attributesViewScrollEventTrait"),h=e("attributes/enum/attributesTypesEnum");t(function(){s.urlContext=o.urlContext,n.initialize();var e=r(h.SERVER,a({type:h.SERVER,el:i(".attributes")}));e.setContext().done(e.render).then(function(){l.initScrollEvent(e)})})});