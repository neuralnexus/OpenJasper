"undefined"==typeof Administer&&(Administer={}),Administer=_.extend({_messages:{},urlContext:null,getMessage:function(t,e){var i=this._messages[t];return i?new Template(i).evaluate(e||{}):""},menuActions:{"p#navAnalysisOptions":function(){return Administer.urlContext+"/flow.html?_flowId=mondrianPropertiesFlow"},"p#navAnalysisOptionsCE":function(){return Administer.urlContext+"/olap/properties.html"},"p#navDesignerOptions":function(){return Administer.urlContext+"/flow.html?_flowId=designerOptionsFlow"},"p#navDesignerCache":function(){return Administer.urlContext+"/flow.html?_flowId=designerCacheFlow"},"p#navAwsSettings":function(){return Administer.urlContext+"/flow.html?_flowId=awsSettingsFlow"},"p#navLogSettings":function(){return Administer.urlContext+"/log_settings.html"},"p#logCollectors":function(){return Administer.urlContext+"/logCollectors.html"},"p#navImport":function(){return Administer.urlContext+"/adminImport.html"},"p#navExport":function(){return Administer.urlContext+"/adminExport.html"},"p#navCustomAttributes":function(){return Administer.urlContext+"/customAttributes.html"},"p#navResetSettings":function(){return Administer.urlContext+"/resetSettings.html"}},_sendRequest:function(t,e,i){ajaxTargettedUpdate(t,{postData:e,callback:i,mode:AjaxRequester.prototype.EVAL_JSON,errorHandler:this._errorHandler})},_errorHandler:function(t){return t.getResponseHeader("LoginRequested")?(window.location="flow.html?_flowId=designerCacheFlow",!0):baseErrorHandler(t)}},Administer),define("administer.base",["prototype","underscore","core.ajax"],function(t){return function(){return t.Administer}}(this));var logging={initialize:function(){layoutModule.resizeOnClient("serverSettingsMenu","settings"),webHelpModule.setCurrentContext("admin"),this.initEvents()},initEvents:function(){var t=this;$("display").observe("click",function(t){var e=t.element(),i=matchAny(e,[layoutModule.BUTTON_PATTERN],!0);if(i)for(var n in Administer.menuActions)if(i.match(n)&&!i.up("li").hasClassName("selected"))return void(document.location=Administer.menuActions[n]())}),jQuery(".js-logSettings select").on("change",function(e){var i,n=jQuery(e.target);i=n.hasClass("js-newLogger")?jQuery("#newLoggerName").val():n.parent().prev().text(),t._setLevel(encodeURIComponent(i),n.val())})},_setLevel:function(t,e){document.location="log_settings.html?logger="+t+"&level="+e}};"undefined"==typeof require&&document.observe("dom:loaded",function(){logging.initialize()}),define("administer.logging",["administer.base","core.layout","components.webHelp","utils.common"],function(t){return function(){return t.logging}}(this)),define("common/component/base/OptionView",["require","backbone","underscore"],function(t){"use strict";var e=t("backbone"),i=t("underscore");return e.View.extend({events:{click:"select",mouseover:"mouseover",mouseout:"mouseout"},constructor:function(t){if(!t||!t.template)throw new Error("Option should have defined template");if(!(t.model&&t.model instanceof e.Model))throw new Error("Option should have associated Backbone.Model");this.template=i.template(t.template),this.disabledClass=t.disabledClass,this.hiddenClass=t.hiddenClass,this.toggleClass=t.toggleClass,this.overClass=t.overClass||"over",e.View.apply(this,arguments)},initialize:function(){e.View.prototype.initialize.apply(this,arguments);var t=this;!0===this.model.get("disabled")&&this.disable(),!0===this.model.get("hidden")&&this.hide(),!0===this.model.get("selected")&&this.addSelection(),this.listenTo(this.model,"change:over",function(e,i){i?t.$("> p").addClass(t.overClass):t.$("> p").removeClass(t.overClass)})},el:function(){return this.template(this.model.toJSON())},enable:function(){this.$el.removeAttr("disabled").removeClass(this.disabledClass)},disable:function(){this.$el.attr("disabled","disabled").addClass(this.disabledClass)},over:function(){this.model.set({over:!0})},leave:function(){this.model.set({over:!1})},show:function(){this.$el.show().removeClass(this.hiddenClass)},hide:function(){this.$el.hide().addClass(this.hiddenClass)},isVisible:function(){return this.$el.is(":visible")},isDisabled:function(){return this.$el.is(":disabled")},select:function(t){this.model.trigger("select",this,this.model,t),this.trigger("click",this,this.model,t)},addSelection:function(){this.$el.addClass(this.toggleClass),this.model.set("selected",!0)},removeSelection:function(){this.$el.removeClass(this.toggleClass),this.model.unset("selected")},mouseover:function(t){this.trigger("mouseover",this,this.model,t)},mouseout:function(t){this.trigger("mouseout",this,this.model,t)}})}),define("common/component/base/OptionContainer",["require","backbone","underscore","./OptionView"],function(t){"use strict";function e(t){if(!t||n.isEmpty(t))throw new Error("Init options must be specified");if(!t.options||!t.options.length)throw new Error("Option views descriptors must be specified");if(!t.mainTemplate&&!t.el)throw new Error("Option container must have a template");if(!t.optionTemplate)throw new Error("Option container must have an option template")}var i=t("backbone"),n=t("underscore"),s=t("./OptionView");return i.View.extend({events:{mouseout:"_mouseout",mouseover:"_mouseover"},el:function(){return n.template(this.template)()},constructor:function(t){e(t),this.contextName=t.contextName||"option",this.contentContainer=t.contentContainer?t.contentContainer:t.el||".content > ul",this.toggle=!!t.toggle,this.toggleClass=t.toggleClass||"active",this.options=[],this.collection=t.collection||new i.Collection,delete t.collection,t.options&&this.collection.reset(t.options),this.hasGroups=!(!this.collection.models[0]||!this.collection.models[0].get("groupId")),this.defalutOptionView=this.hasGroups?this.collection.where({default:!0}):[this.collection.findWhere({default:!0})],this.listenTo(this.collection,"select",this._selectOption),this.listenTo(this.collection,"update reset",this.render),this.template=t.mainTemplate,this.optionTemplate=t.optionTemplate,i.View.apply(this,arguments)},_mouseout:function(){this.trigger("container:mouseout")},_mouseover:function(){this.trigger("container:mouseover")},setElement:function(t){var e=i.View.prototype.setElement.apply(this,arguments);return this.$contentContainer=this.contentContainer?this.$(this.contentContainer).addBack().filter(this.contentContainer):this.$el,e},initialize:function(){this.render(),this.toggle&&this.defalutOptionView&&n.each(this.defalutOptionView,function(t){t&&this.getOptionView(t.get("action")).addSelection()},this)},render:function(){var t=this;n.each(this.options,function(e){t.stopListening(e,"mouseover"),t.stopListening(e,"mouseout"),e.remove()}),this.options=[],this.collection.forEach(function(e){var i=new s({template:t.optionTemplate,model:e,toggleClass:t.toggleClass});t.listenTo(i,"mouseover",function(e,i){t.trigger("mouseover",e,t,i)}),t.listenTo(i,"mouseout",function(e,i){t.trigger("mouseout",e,t,i)}),t.options.push(i),t.$contentContainer.append(i.$el)})},_onKeyDown:function(t){var e=this.getOptionView(t.keyCode,"triggerOnKeyCode");e&&!e.isDisabled()&&e.select()},_selectOption:function(t,e){if(this.toggle){var i=e.get("groupId"),s=this.hasGroups?n.reduce(this.options,function(t,e){return e.model.get("groupId")===i&&t.push(e),t},[]):this.options;n.each(s,function(t){t.removeSelection()},this),t.addSelection()}this.trigger("selection",t,e),this.trigger(this.contextName+":"+e.get("action"),t,e)},getOptionView:function(t,e){return n.find(this.options,function(i){return i.model.get(e||"action")===t})},resetSelection:function(t,e){t=t||[],this.toggle&&(this.hasGroups?(t.length<this.defalutOptionView.length&&n.each(this.defalutOptionView,function(e){var i={groupId:e.get("groupId")};!n.findWhere(t,i)&&e&&t.push(n.extend(i,{action:e.get("action")}))}),t=n.pluck(t,"action")):!t.length&&this.defalutOptionView[0]&&t.push(this.defalutOptionView[0].get("action")),n.each(this.options,function(i){t.length&&n.contains(t,i.model.get("action"))?e?this._selectOption(i,i.model):i.addSelection():i.removeSelection()},this))},select:function(){var t=Array.prototype.slice.call(arguments,0);this.toggle&&n.each(this.options,function(e){!t.length||n.contains(t,e.model.get("action"))?e.addSelection():e.removeSelection()},this)},deselect:function(){var t=Array.prototype.slice.call(arguments,0);this.toggle&&n.each(this.options,function(e){(!t.length||n.contains(t,e.model.get("action")))&&e.removeSelection()},this)},getSelection:function(){return n.chain(this.options).filter(function(t){return t.model.get("selected")}).map(function(t){return t.model.get("action")}).value()},show:function(){return n.each(this.options,function(t){var e=t.model.get("test");e&&!e()?t.hide():t[t.model.get("hidden")?"hide":"show"]()}),this.$el.show(),this.trigger("show",this),this},hide:function(){return this.$el.hide(),this.trigger("hide",this),this},enable:function(t){var e=Array.prototype.slice.call(arguments);n.each(this.options,function(t){(!e.length||n.contains(e,t.model.get("action")))&&t.enable()})},disable:function(t){var e=Array.prototype.slice.call(arguments);n.each(this.options,function(t){(!e.length||n.contains(e,t.model.get("action")))&&t.disable()})},addOptions:function(t,e){this.collection.add(t,n.extend(e||{},{silent:!0})),this.collection.reset(this.collection.toJSON())},removeOptions:function(t){var e=this.collection.filter(function(e){return!n.contains(t,e.get("action"))});e.length<this.collection.length&&this.collection.reset(e)},remove:function(){n.invoke(this.options,"remove"),i.View.prototype.remove.apply(this,arguments)}})}),define("serverSettingsCommon/enum/confirmDialogTypesEnum",[],function(){return{CANCEL_CONFIRM:"cancelConfirm",DELETE_CONFIRM:"deleteConfirm",PERMISSION_CONFIRM:"permissionConfirm",NAME_CONFIRM:"nameConfirm",EDIT_CONFIRM:"editConfirm"}}),define("text!serverSettingsCommon/templates/buttonTemplate.htm",[],function(){return'<button class="button action up {{= primary ? \'primary\' : \'\'}}">\n\n    <span class="wrap">{{- label }}<span class="icon"></span></span>\n</button>\n'}),define("serverSettingsCommon/view/traits/buttonsTrait",["require","underscore","common/component/base/OptionContainer","serverSettingsCommon/enum/confirmDialogTypesEnum","text!serverSettingsCommon/templates/buttonTemplate.htm"],function(t){var e=t("underscore"),i=t("common/component/base/OptionContainer"),n=t("serverSettingsCommon/enum/confirmDialogTypesEnum"),s=t("text!serverSettingsCommon/templates/buttonTemplate.htm");return{_initButtons:function(t){this.buttons=new i({options:t.buttons,el:t.buttonsContainer,contextName:"button",optionTemplate:s}),this.buttons.disable(),this.listenTo(this.buttons,"button:save",this.saveChildren),this.listenTo(this.buttons,"button:cancel",e.bind(this._openConfirm,this,null,n.CANCEL_CONFIRM))},toggleButtons:function(){var t=this.buttons;this.containsUnsavedItems()?t.enable():(e.each(t.options,function(t){t.$el.removeClass("over")}),t.disable())}}}),function(t,e){if("function"==typeof define&&define.amd)define("backbone.wreqr",["backbone","underscore"],function(t,i){return e(t,i)});else if("undefined"!=typeof exports){var i=require("backbone"),n=require("underscore");module.exports=e(i,n)}else e(t.Backbone,t._)}(this,function(t,e){"use strict";var i=t.Wreqr,n=t.Wreqr={};return t.Wreqr.VERSION="1.4.0",t.Wreqr.noConflict=function(){return t.Wreqr=i,this},n.Handlers=function(t,e){var i=function(t){this.options=t,this._wreqrHandlers={},e.isFunction(this.initialize)&&this.initialize(t)};return i.extend=t.Model.extend,e.extend(i.prototype,t.Events,{setHandlers:function(t){e.each(t,e.bind(function(t,i){var n=null;e.isObject(t)&&!e.isFunction(t)&&(n=t.context,t=t.callback),this.setHandler(i,t,n)},this))},setHandler:function(t,e,i){var n={callback:e,context:i};this._wreqrHandlers[t]=n,this.trigger("handler:add",t,e,i)},hasHandler:function(t){return!!this._wreqrHandlers[t]},getHandler:function(t){var e=this._wreqrHandlers[t];if(e)return function(){return e.callback.apply(e.context,arguments)}},removeHandler:function(t){delete this._wreqrHandlers[t]},removeAllHandlers:function(){this._wreqrHandlers={}}}),i}(t,e),n.CommandStorage=function(){var i=function(t){this.options=t,this._commands={},e.isFunction(this.initialize)&&this.initialize(t)};return e.extend(i.prototype,t.Events,{getCommands:function(t){var e=this._commands[t];return e||(e={command:t,instances:[]},this._commands[t]=e),e},addCommand:function(t,e){this.getCommands(t).instances.push(e)},clearCommands:function(t){this.getCommands(t).instances=[]}}),i}(),n.Commands=function(t,e){return t.Handlers.extend({storageType:t.CommandStorage,constructor:function(e){this.options=e||{},this._initializeStorage(this.options),this.on("handler:add",this._executeCommands,this),t.Handlers.prototype.constructor.apply(this,arguments)},execute:function(t){t=arguments[0];var i=e.rest(arguments);this.hasHandler(t)?this.getHandler(t).apply(this,i):this.storage.addCommand(t,i)},_executeCommands:function(t,i,n){var s=this.storage.getCommands(t);e.each(s.instances,function(t){i.apply(n,t)}),this.storage.clearCommands(t)},_initializeStorage:function(t){var i,n=t.storageType||this.storageType;i=e.isFunction(n)?new n:n,this.storage=i}})}(n,e),n.RequestResponse=function(t,e){return t.Handlers.extend({request:function(t){if(this.hasHandler(t))return this.getHandler(t).apply(this,e.rest(arguments))}})}(n,e),n.EventAggregator=function(t,e){var i=function(){};return i.extend=t.Model.extend,e.extend(i.prototype,t.Events),i}(t,e),n.Channel=function(i){var n=function(e){this.vent=new t.Wreqr.EventAggregator,this.reqres=new t.Wreqr.RequestResponse,this.commands=new t.Wreqr.Commands,this.channelName=e};return e.extend(n.prototype,{reset:function(){return this.vent.off(),this.vent.stopListening(),this.reqres.removeAllHandlers(),this.commands.removeAllHandlers(),this},connectEvents:function(t,e){return this._connect("vent",t,e),this},connectCommands:function(t,e){return this._connect("commands",t,e),this},connectRequests:function(t,e){return this._connect("reqres",t,e),this},_connect:function(t,i,n){if(i){n=n||this;var s="vent"===t?"on":"setHandler";e.each(i,e.bind(function(i,o){this[t][s](o,e.bind(i,n))},this))}}}),n}(),n.radio=function(t,e){var i=function(){this._channels={},this.vent={},this.commands={},this.reqres={},this._proxyMethods()};e.extend(i.prototype,{channel:function(t){if(!t)throw new Error("Channel must receive a name");return this._getChannel(t)},_getChannel:function(e){var i=this._channels[e];return i||(i=new t.Channel(e),this._channels[e]=i),i},_proxyMethods:function(){e.each(["vent","commands","reqres"],e.bind(function(t){e.each(n[t],e.bind(function(e){this[t][e]=s(this,t,e)},this))},this))}});var n={vent:["on","off","trigger","once","stopListening","listenTo","listenToOnce"],commands:["execute","setHandler","setHandlers","removeHandler","removeAllHandlers"],reqres:["request","setHandler","setHandlers","removeHandler","removeAllHandlers"]},s=function(t,i,n){return function(s){var o=t._getChannel(s)[i];return o[n].apply(o,e.rest(arguments))}};return new i}(n,e),t.Wreqr}),function(t,e){if("function"==typeof define&&define.amd)define("backbone.babysitter",["backbone","underscore"],function(t,i){return e(t,i)});else if("undefined"!=typeof exports){var i=require("backbone"),n=require("underscore");module.exports=e(i,n)}else e(t.Backbone,t._)}(this,function(t,e){"use strict";var i=t.ChildViewContainer;return t.ChildViewContainer=function(t,e){var i=function(t){this._views={},this._indexByModel={},this._indexByCustom={},this._updateLength(),e.each(t,this.add,this)};e.extend(i.prototype,{add:function(t,e){var i=t.cid;return this._views[i]=t,t.model&&(this._indexByModel[t.model.cid]=i),e&&(this._indexByCustom[e]=i),this._updateLength(),this},findByModel:function(t){return this.findByModelCid(t.cid)},findByModelCid:function(t){var e=this._indexByModel[t];return this.findByCid(e)},findByCustom:function(t){var e=this._indexByCustom[t];return this.findByCid(e)},findByIndex:function(t){return e.values(this._views)[t]},findByCid:function(t){return this._views[t]},remove:function(t){var i=t.cid;return t.model&&delete this._indexByModel[t.model.cid],e.any(this._indexByCustom,function(t,e){if(t===i)return delete this._indexByCustom[e],!0},this),delete this._views[i],this._updateLength(),this},call:function(t){this.apply(t,e.tail(arguments))},apply:function(t,i){e.each(this._views,function(n){e.isFunction(n[t])&&n[t].apply(n,i||[])})},_updateLength:function(){this.length=e.size(this._views)}});var n=["forEach","each","map","find","detect","filter","select","reject","every","all","some","any","include","contains","invoke","toArray","first","initial","rest","last","without","isEmpty","pluck","reduce"];return e.each(n,function(t){i.prototype[t]=function(){var i=e.values(this._views),n=[i].concat(e.toArray(arguments));return e[t].apply(e,n)}}),i}(0,e),t.ChildViewContainer.VERSION="0.1.11",t.ChildViewContainer.noConflict=function(){return t.ChildViewContainer=i,this},t.ChildViewContainer}),function(t,e){if("function"==typeof define&&define.amd)define("backbone.marionette",["backbone","underscore","backbone.wreqr","backbone.babysitter"],function(i,n){return t.Marionette=t.Mn=e(t,i,n)});else if("undefined"!=typeof exports){var i=require("backbone"),n=require("underscore");require("backbone.wreqr"),require("backbone.babysitter");module.exports=e(t,i,n)}else t.Marionette=t.Mn=e(t,t.Backbone,t._)}(this,function(t,e,i){"use strict";var n=t.Marionette,s=t.Mn,o=e.Marionette={};o.VERSION="2.3.2",o.noConflict=function(){return t.Marionette=n,t.Mn=s,this},o.Deferred=e.$.Deferred,o.extend=e.Model.extend,o.isNodeAttached=function(t){return e.$.contains(document.documentElement,t)},o.getOption=function(t,e){if(t&&e)return t.options&&void 0!==t.options[e]?t.options[e]:t[e]},o.proxyGetOption=function(t){return o.getOption(this,t)},o._getValue=function(t,e,n){return i.isFunction(t)&&(n=n||[],t=t.apply(e,n)),t},o.normalizeMethods=function(t){return i.reduce(t,function(t,e,n){return i.isFunction(e)||(e=this[e]),e&&(t[n]=e),t},{},this)},o.normalizeUIString=function(t,e){return t.replace(/@ui\.[a-zA-Z_$0-9]*/g,function(t){return e[t.slice(4)]})},o.normalizeUIKeys=function(t,e){return i.reduce(t,function(t,i,n){return t[o.normalizeUIString(n,e)]=i,t},{})},o.normalizeUIValues=function(t,e){return i.each(t,function(n,s){i.isString(n)&&(t[s]=o.normalizeUIString(n,e))}),t},o.actAsCollection=function(t,e){var n=["forEach","each","map","find","detect","filter","select","reject","every","all","some","any","include","contains","invoke","toArray","first","initial","rest","last","without","isEmpty","pluck"];i.each(n,function(n){t[n]=function(){var t=i.values(i.result(this,e)),s=[t].concat(i.toArray(arguments));return i[n].apply(i,s)}})};var r=o.deprecate=function(t,e){i.isObject(t)&&(t=t.prev+" is going to be removed in the future. Please use "+t.next+" instead."+(t.url?" See: "+t.url:"")),void 0!==e&&e||r._cache[t]||(r._warn("Deprecation warning: "+t),r._cache[t]=!0)};r._warn="undefined"!=typeof console&&(console.warn||console.log)||function(){},r._cache={},o._triggerMethod=function(){function t(t,e,i){return i.toUpperCase()}var e=/(^|:)(\w)/gi;return function(n,s,o){var r=arguments.length<3;r&&(o=s,s=o[0]);var a,l="on"+s.replace(e,t),h=n[l];return i.isFunction(h)&&(a=h.apply(n,r?i.rest(o):o)),i.isFunction(n.trigger)&&(r+o.length>1?n.trigger.apply(n,r?o:[s].concat(i.rest(o,0))):n.trigger(s)),a}}(),o.triggerMethod=function(t){return o._triggerMethod(this,arguments)},o.triggerMethodOn=function(t){return(i.isFunction(t.triggerMethod)?t.triggerMethod:o.triggerMethod).apply(t,i.rest(arguments))},o.MonitorDOMRefresh=function(t){function e(){t._isShown=!0,s()}function n(){t._isRendered=!0,s()}function s(){t._isShown&&t._isRendered&&o.isNodeAttached(t.el)&&i.isFunction(t.triggerMethod)&&t.triggerMethod("dom:refresh")}t.on({show:e,render:n})},function(t){function e(e,n,s,o){var r=o.split(/\s+/);i.each(r,function(i){var o=e[i];if(!o)throw new t.Error('Method "'+i+'" was configured as an event handler, but does not exist.');e.listenTo(n,s,o)})}function n(t,e,i,n){t.listenTo(e,i,n)}function s(t,e,n,s){var o=s.split(/\s+/);i.each(o,function(i){var s=t[i];t.stopListening(e,n,s)})}function o(t,e,i,n){t.stopListening(e,i,n)}function r(e,n,s,o,r){if(n&&s){if(!i.isObject(s))throw new t.Error({message:"Bindings must be an object or function.",url:"marionette.functions.html#marionettebindentityevents"});s=t._getValue(s,e),i.each(s,function(t,s){i.isFunction(t)?o(e,n,s,t):r(e,n,s,t)})}}t.bindEntityEvents=function(t,i,s){r(t,i,s,n,e)},t.unbindEntityEvents=function(t,e,i){r(t,e,i,o,s)},t.proxyBindEntityEvents=function(e,i){return t.bindEntityEvents(this,e,i)},t.proxyUnbindEntityEvents=function(e,i){return t.unbindEntityEvents(this,e,i)}}(o);var a=["description","fileName","lineNumber","name","message","number"];return o.Error=o.extend.call(Error,{urlRoot:"http://marionettejs.com/docs/v"+o.VERSION+"/",constructor:function(t,e){i.isObject(t)?(e=t,t=e.message):e||(e={});var n=Error.call(this,t);i.extend(this,i.pick(n,a),i.pick(e,a)),this.captureStackTrace(),e.url&&(this.url=this.urlRoot+e.url)},captureStackTrace:function(){Error.captureStackTrace&&Error.captureStackTrace(this,o.Error)},toString:function(){return this.name+": "+this.message+(this.url?" See: "+this.url:"")}}),o.Error.extend=o.extend,o.Callbacks=function(){this._deferred=o.Deferred(),this._callbacks=[]},i.extend(o.Callbacks.prototype,{add:function(t,e){var n=i.result(this._deferred,"promise");this._callbacks.push({cb:t,ctx:e}),n.then(function(i){e&&(i.context=e),t.call(i.context,i.options)})},run:function(t,e){this._deferred.resolve({options:t,context:e})},reset:function(){var t=this._callbacks;this._deferred=o.Deferred(),this._callbacks=[],i.each(t,function(t){this.add(t.cb,t.ctx)},this)}}),o.Controller=function(t){this.options=t||{},i.isFunction(this.initialize)&&this.initialize(this.options)},o.Controller.extend=o.extend,i.extend(o.Controller.prototype,e.Events,{destroy:function(){return o._triggerMethod(this,"before:destroy",arguments),o._triggerMethod(this,"destroy",arguments),this.stopListening(),this.off(),this},triggerMethod:o.triggerMethod,getOption:o.proxyGetOption}),o.Object=function(t){this.options=i.extend({},i.result(this,"options"),t),this.initialize.apply(this,arguments)},o.Object.extend=o.extend,i.extend(o.Object.prototype,e.Events,{initialize:function(){},destroy:function(){this.triggerMethod("before:destroy"),this.triggerMethod("destroy"),this.stopListening()},triggerMethod:o.triggerMethod,getOption:o.proxyGetOption,bindEntityEvents:o.proxyBindEntityEvents,unbindEntityEvents:o.proxyUnbindEntityEvents}),o.Region=o.Object.extend({constructor:function(t){if(this.options=t||{},this.el=this.getOption("el"),this.el=this.el instanceof e.$?this.el[0]:this.el,!this.el)throw new o.Error({name:"NoElError",message:'An "el" must be specified for a region.'});this.$el=this.getEl(this.el),o.Object.call(this,t)},show:function(t,e){if(this._ensureElement()){this._ensureViewIsIntact(t);var i=e||{},n=t!==this.currentView,s=!!i.preventDestroy,r=!!i.forceShow,a=!!this.currentView,l=n&&!s,h=n||r;if(a&&this.triggerMethod("before:swapOut",this.currentView,this,e),this.currentView&&delete this.currentView._parent,l?this.empty():a&&h&&this.currentView.off("destroy",this.empty,this),h){t.once("destroy",this.empty,this),t.render(),t._parent=this,a&&this.triggerMethod("before:swap",t,this,e),this.triggerMethod("before:show",t,this,e),o.triggerMethodOn(t,"before:show",t,this,e),a&&this.triggerMethod("swapOut",this.currentView,this,e);var c=o.isNodeAttached(this.el),d=[],u=i.triggerBeforeAttach||this.triggerBeforeAttach,p=i.triggerAttach||this.triggerAttach;return c&&u&&(d=this._displayedViews(t),this._triggerAttach(d,"before:")),this.attachHtml(t),this.currentView=t,c&&p&&(d=this._displayedViews(t),this._triggerAttach(d)),a&&this.triggerMethod("swap",t,this,e),this.triggerMethod("show",t,this,e),o.triggerMethodOn(t,"show",t,this,e),this}return this}},triggerBeforeAttach:!0,triggerAttach:!0,_triggerAttach:function(t,e){var n=(e||"")+"attach";i.each(t,function(t){o.triggerMethodOn(t,n,t,this)},this)},_displayedViews:function(t){return i.union([t],i.result(t,"_getNestedViews")||[])},_ensureElement:function(){if(i.isObject(this.el)||(this.$el=this.getEl(this.el),this.el=this.$el[0]),!this.$el||0===this.$el.length){if(this.getOption("allowMissingEl"))return!1;throw new o.Error('An "el" '+this.$el.selector+" must exist in DOM")}return!0},_ensureViewIsIntact:function(t){if(!t)throw new o.Error({name:"ViewNotValid",message:"The view passed is undefined and therefore invalid. You must pass a view instance to show."});if(t.isDestroyed)throw new o.Error({name:"ViewDestroyedError",message:'View (cid: "'+t.cid+'") has already been destroyed and cannot be used.'})},getEl:function(t){return e.$(t,o._getValue(this.options.parentEl,this))},attachHtml:function(t){this.$el.contents().detach(),this.el.appendChild(t.el)},empty:function(){var t=this.currentView;if(t)return t.off("destroy",this.empty,this),this.triggerMethod("before:empty",t),this._destroyView(),this.triggerMethod("empty",t),delete this.currentView,this},_destroyView:function(){var t=this.currentView;t.destroy&&!t.isDestroyed?t.destroy():t.remove&&(t.remove(),t.isDestroyed=!0)},attachView:function(t){return this.currentView=t,this},hasView:function(){return!!this.currentView},reset:function(){return this.empty(),this.$el&&(this.el=this.$el.selector),delete this.$el,this}},{buildRegion:function(t,e){if(i.isString(t))return this._buildRegionFromSelector(t,e);if(t.selector||t.el||t.regionClass)return this._buildRegionFromObject(t,e);if(i.isFunction(t))return this._buildRegionFromRegionClass(t);throw new o.Error({message:"Improper region configuration type.",url:"marionette.region.html#region-configuration-types"})},_buildRegionFromSelector:function(t,e){return new e({el:t})},_buildRegionFromObject:function(t,e){var n=t.regionClass||e,s=i.omit(t,"selector","regionClass");return t.selector&&!s.el&&(s.el=t.selector),new n(s)},_buildRegionFromRegionClass:function(t){return new t}}),o.RegionManager=o.Controller.extend({constructor:function(t){this._regions={},o.Controller.call(this,t),this.addRegions(this.getOption("regions"))},addRegions:function(t,e){return t=o._getValue(t,this,arguments),i.reduce(t,function(t,n,s){return i.isString(n)&&(n={selector:n}),n.selector&&(n=i.defaults({},n,e)),t[s]=this.addRegion(s,n),t},{},this)},addRegion:function(t,e){var i;return i=e instanceof o.Region?e:o.Region.buildRegion(e,o.Region),this.triggerMethod("before:add:region",t,i),i._parent=this,this._store(t,i),this.triggerMethod("add:region",t,i),i},get:function(t){return this._regions[t]},getRegions:function(){return i.clone(this._regions)},removeRegion:function(t){var e=this._regions[t];return this._remove(t,e),e},removeRegions:function(){var t=this.getRegions();return i.each(this._regions,function(t,e){this._remove(e,t)},this),t},emptyRegions:function(){var t=this.getRegions();return i.invoke(t,"empty"),t},destroy:function(){return this.removeRegions(),o.Controller.prototype.destroy.apply(this,arguments)},_store:function(t,e){this._regions[t]=e,this._setLength()},_remove:function(t,e){this.triggerMethod("before:remove:region",t,e),e.empty(),e.stopListening(),delete e._parent,delete this._regions[t],this._setLength(),this.triggerMethod("remove:region",t,e)},_setLength:function(){this.length=i.size(this._regions)}}),o.actAsCollection(o.RegionManager.prototype,"_regions"),o.TemplateCache=function(t){this.templateId=t},i.extend(o.TemplateCache,{templateCaches:{},get:function(t){var e=this.templateCaches[t];return e||(e=new o.TemplateCache(t),this.templateCaches[t]=e),e.load()},clear:function(){var t,e=i.toArray(arguments),n=e.length;if(n>0)for(t=0;t<n;t++)delete this.templateCaches[e[t]];else this.templateCaches={}}}),i.extend(o.TemplateCache.prototype,{load:function(){if(this.compiledTemplate)return this.compiledTemplate;var t=this.loadTemplate(this.templateId);return this.compiledTemplate=this.compileTemplate(t),this.compiledTemplate},loadTemplate:function(t){var i=e.$(t).html();if(!i||0===i.length)throw new o.Error({name:"NoTemplateError",message:'Could not find template: "'+t+'"'});return i},compileTemplate:function(t){return i.template(t)}}),o.Renderer={render:function(t,e){if(!t)throw new o.Error({name:"TemplateNotFoundError",message:"Cannot render the template since its false, null or undefined."});return(i.isFunction(t)?t:o.TemplateCache.get(t))(e)}},o.View=e.View.extend({isDestroyed:!1,constructor:function(t){i.bindAll(this,"render"),t=o._getValue(t,this),this.options=i.extend({},i.result(this,"options"),t),this._behaviors=o.Behaviors(this),e.View.apply(this,arguments),o.MonitorDOMRefresh(this),this.on("show",this.onShowCalled)},getTemplate:function(){return this.getOption("template")},serializeModel:function(t){return t.toJSON.apply(t,i.rest(arguments))},mixinTemplateHelpers:function(t){t=t||{};var e=this.getOption("templateHelpers");return e=o._getValue(e,this),i.extend(t,e)},normalizeUIKeys:function(t){var e=i.result(this,"_uiBindings");return o.normalizeUIKeys(t,e||i.result(this,"ui"))},normalizeUIValues:function(t){var e=i.result(this,"ui"),n=i.result(this,"_uiBindings");return o.normalizeUIValues(t,n||e)},configureTriggers:function(){if(this.triggers){var t=this.normalizeUIKeys(i.result(this,"triggers"));return i.reduce(t,function(t,e,i){return t[i]=this._buildViewTrigger(e),t},{},this)}},delegateEvents:function(t){return this._delegateDOMEvents(t),this.bindEntityEvents(this.model,this.getOption("modelEvents")),this.bindEntityEvents(this.collection,this.getOption("collectionEvents")),i.each(this._behaviors,function(t){t.bindEntityEvents(this.model,t.getOption("modelEvents")),t.bindEntityEvents(this.collection,t.getOption("collectionEvents"))},this),this},_delegateDOMEvents:function(t){var n=o._getValue(t||this.events,this);n=this.normalizeUIKeys(n),i.isUndefined(t)&&(this.events=n);var s={},r=i.result(this,"behaviorEvents")||{},a=this.configureTriggers(),l=i.result(this,"behaviorTriggers")||{};i.extend(s,r,n,a,l),e.View.prototype.delegateEvents.call(this,s)},undelegateEvents:function(){return e.View.prototype.undelegateEvents.apply(this,arguments),this.unbindEntityEvents(this.model,this.getOption("modelEvents")),this.unbindEntityEvents(this.collection,this.getOption("collectionEvents")),i.each(this._behaviors,function(t){t.unbindEntityEvents(this.model,t.getOption("modelEvents")),t.unbindEntityEvents(this.collection,t.getOption("collectionEvents"))},this),this},onShowCalled:function(){},_ensureViewIsIntact:function(){if(this.isDestroyed)throw new o.Error({name:"ViewDestroyedError",message:'View (cid: "'+this.cid+'") has already been destroyed and cannot be used.'})},destroy:function(){if(!this.isDestroyed){var t=i.toArray(arguments);return this.triggerMethod.apply(this,["before:destroy"].concat(t)),this.isDestroyed=!0,this.triggerMethod.apply(this,["destroy"].concat(t)),this.unbindUIElements(),this.remove(),i.invoke(this._behaviors,"destroy",t),this}},bindUIElements:function(){this._bindUIElements(),i.invoke(this._behaviors,this._bindUIElements)},_bindUIElements:function(){if(this.ui){this._uiBindings||(this._uiBindings=this.ui);var t=i.result(this,"_uiBindings");this.ui={},i.each(t,function(t,e){this.ui[e]=this.$(t)},this)}},unbindUIElements:function(){this._unbindUIElements(),i.invoke(this._behaviors,this._unbindUIElements)},_unbindUIElements:function(){this.ui&&this._uiBindings&&(i.each(this.ui,function(t,e){delete this.ui[e]},this),this.ui=this._uiBindings,delete this._uiBindings)},_buildViewTrigger:function(t){var e=i.isObject(t),n=i.defaults({},e?t:{},{preventDefault:!0,stopPropagation:!0}),s=e?n.event:t;return function(t){t&&(t.preventDefault&&n.preventDefault&&t.preventDefault(),t.stopPropagation&&n.stopPropagation&&t.stopPropagation());var e={view:this,model:this.model,collection:this.collection};this.triggerMethod(s,e)}},setElement:function(){
var t=e.View.prototype.setElement.apply(this,arguments);return i.invoke(this._behaviors,"proxyViewProperties",this),t},triggerMethod:function(){for(var t=o._triggerMethod,e=t(this,arguments),i=this._behaviors,n=0,s=i&&i.length;n<s;n++)t(i[n],arguments);return e},_getImmediateChildren:function(){return[]},_getNestedViews:function(){var t=this._getImmediateChildren();return t.length?i.reduce(t,function(t,e){return e._getNestedViews?t.concat(e._getNestedViews()):t},t):t},normalizeMethods:o.normalizeMethods,getOption:o.proxyGetOption,bindEntityEvents:o.proxyBindEntityEvents,unbindEntityEvents:o.proxyUnbindEntityEvents}),o.ItemView=o.View.extend({constructor:function(){o.View.apply(this,arguments)},serializeData:function(){if(!this.model&&!this.collection)return{};var t=[this.model||this.collection];return arguments.length&&t.push.apply(t,arguments),this.model?this.serializeModel.apply(this,t):{items:this.serializeCollection.apply(this,t)}},serializeCollection:function(t){return t.toJSON.apply(t,i.rest(arguments))},render:function(){return this._ensureViewIsIntact(),this.triggerMethod("before:render",this),this._renderTemplate(),this.bindUIElements(),this.triggerMethod("render",this),this},_renderTemplate:function(){var t=this.getTemplate();if(!1!==t){if(!t)throw new o.Error({name:"UndefinedTemplateError",message:"Cannot render the template since it is null or undefined."});var e=this.serializeData();e=this.mixinTemplateHelpers(e);var i=o.Renderer.render(t,e,this);return this.attachElContent(i),this}},attachElContent:function(t){return this.$el.html(t),this}}),o.CollectionView=o.View.extend({childViewEventPrefix:"childview",constructor:function(t){var e=t||{};i.isUndefined(this.sort)&&(this.sort=!!i.isUndefined(e.sort)||e.sort),this.once("render",this._initialEvents),this._initChildViewStorage(),o.View.apply(this,arguments),this.initRenderBuffer()},initRenderBuffer:function(){this.elBuffer=document.createDocumentFragment(),this._bufferedChildren=[]},startBuffering:function(){this.initRenderBuffer(),this.isBuffering=!0},endBuffering:function(){this.isBuffering=!1,this._triggerBeforeShowBufferedChildren(),this.attachBuffer(this,this.elBuffer),this._triggerShowBufferedChildren(),this.initRenderBuffer()},_triggerBeforeShowBufferedChildren:function(){this._isShown&&i.each(this._bufferedChildren,i.partial(this._triggerMethodOnChild,"before:show"))},_triggerShowBufferedChildren:function(){this._isShown&&(i.each(this._bufferedChildren,i.partial(this._triggerMethodOnChild,"show")),this._bufferedChildren=[])},_triggerMethodOnChild:function(t,e){o.triggerMethodOn(e,t)},_initialEvents:function(){this.collection&&(this.listenTo(this.collection,"add",this._onCollectionAdd),this.listenTo(this.collection,"remove",this._onCollectionRemove),this.listenTo(this.collection,"reset",this.render),this.sort&&this.listenTo(this.collection,"sort",this._sortViews))},_onCollectionAdd:function(t){this.destroyEmptyView();var e=this.getChildView(t),i=this.collection.indexOf(t);this.addChild(t,e,i)},_onCollectionRemove:function(t){var e=this.children.findByModel(t);this.removeChildView(e),this.checkEmpty()},onShowCalled:function(){this.children.each(i.partial(this._triggerMethodOnChild,"show"))},render:function(){return this._ensureViewIsIntact(),this.triggerMethod("before:render",this),this._renderChildren(),this.triggerMethod("render",this),this},resortView:function(){this.render()},_sortViews:function(){this.collection.find(function(t,e){var i=this.children.findByModel(t);return!i||i._index!==e},this)&&this.resortView()},_emptyViewIndex:-1,_renderChildren:function(){this.destroyEmptyView(),this.destroyChildren(),this.isEmpty(this.collection)?this.showEmptyView():(this.triggerMethod("before:render:collection",this),this.startBuffering(),this.showCollection(),this.endBuffering(),this.triggerMethod("render:collection",this))},showCollection:function(){var t;this.collection.each(function(e,i){t=this.getChildView(e),this.addChild(e,t,i)},this)},showEmptyView:function(){var t=this.getEmptyView();if(t&&!this._showingEmptyView){this.triggerMethod("before:render:empty"),this._showingEmptyView=!0;var i=new e.Model;this.addEmptyView(i,t),this.triggerMethod("render:empty")}},destroyEmptyView:function(){this._showingEmptyView&&(this.triggerMethod("before:remove:empty"),this.destroyChildren(),delete this._showingEmptyView,this.triggerMethod("remove:empty"))},getEmptyView:function(){return this.getOption("emptyView")},addEmptyView:function(t,e){var n=this.getOption("emptyViewOptions")||this.getOption("childViewOptions");i.isFunction(n)&&(n=n.call(this,t,this._emptyViewIndex));var s=this.buildChildView(t,e,n);s._parent=this,this.proxyChildEvents(s),this._isShown&&o.triggerMethodOn(s,"before:show"),this.children.add(s),this.renderChildView(s,this._emptyViewIndex),this._isShown&&o.triggerMethodOn(s,"show")},getChildView:function(t){var e=this.getOption("childView");if(!e)throw new o.Error({name:"NoChildViewError",message:'A "childView" must be specified'});return e},addChild:function(t,e,i){var n=this.getOption("childViewOptions");n=o._getValue(n,this,[t,i]);var s=this.buildChildView(t,e,n);return this._updateIndices(s,!0,i),this._addChildView(s,i),s._parent=this,s},_updateIndices:function(t,e,i){this.sort&&(e&&(t._index=i),this.children.each(function(i){i._index>=t._index&&(i._index+=e?1:-1)}))},_addChildView:function(t,e){this.proxyChildEvents(t),this.triggerMethod("before:add:child",t),this.children.add(t),this.renderChildView(t,e),this._isShown&&!this.isBuffering&&o.triggerMethodOn(t,"show"),this.triggerMethod("add:child",t)},renderChildView:function(t,e){return t.render(),this.attachHtml(this,t,e),t},buildChildView:function(t,e,n){return new e(i.extend({model:t},n))},removeChildView:function(t){return t&&(this.triggerMethod("before:remove:child",t),t.destroy?t.destroy():t.remove&&t.remove(),delete t._parent,this.stopListening(t),this.children.remove(t),this.triggerMethod("remove:child",t),this._updateIndices(t,!1)),t},isEmpty:function(){return!this.collection||0===this.collection.length},checkEmpty:function(){this.isEmpty(this.collection)&&this.showEmptyView()},attachBuffer:function(t,e){t.$el.append(e)},attachHtml:function(t,e,i){t.isBuffering?(t.elBuffer.appendChild(e.el),t._bufferedChildren.push(e)):t._insertBefore(e,i)||t._insertAfter(e)},_insertBefore:function(t,e){var i;return this.sort&&e<this.children.length-1&&(i=this.children.find(function(t){return t._index===e+1})),!!i&&(i.$el.before(t.el),!0)},_insertAfter:function(t){this.$el.append(t.el)},_initChildViewStorage:function(){this.children=new e.ChildViewContainer},destroy:function(){if(!this.isDestroyed)return this.triggerMethod("before:destroy:collection"),this.destroyChildren(),this.triggerMethod("destroy:collection"),o.View.prototype.destroy.apply(this,arguments)},destroyChildren:function(){var t=this.children.map(i.identity);return this.children.each(this.removeChildView,this),this.checkEmpty(),t},proxyChildEvents:function(t){var e=this.getOption("childViewEventPrefix");this.listenTo(t,"all",function(){var n=i.toArray(arguments),s=n[0],o=this.normalizeMethods(i.result(this,"childEvents"));n[0]=e+":"+s,n.splice(1,0,t),void 0!==o&&i.isFunction(o[s])&&o[s].apply(this,n.slice(1)),this.triggerMethod.apply(this,n)},this)},_getImmediateChildren:function(){return i.values(this.children._views)}}),o.CompositeView=o.CollectionView.extend({constructor:function(){o.CollectionView.apply(this,arguments)},_initialEvents:function(){this.collection&&(this.listenTo(this.collection,"add",this._onCollectionAdd),this.listenTo(this.collection,"remove",this._onCollectionRemove),this.listenTo(this.collection,"reset",this._renderChildren),this.sort&&this.listenTo(this.collection,"sort",this._sortViews))},getChildView:function(t){return this.getOption("childView")||this.constructor},serializeData:function(){var t={};return this.model&&(t=i.partial(this.serializeModel,this.model).apply(this,arguments)),t},render:function(){return this._ensureViewIsIntact(),this.isRendered=!0,this.resetChildViewContainer(),this.triggerMethod("before:render",this),this._renderTemplate(),this._renderChildren(),this.triggerMethod("render",this),this},_renderChildren:function(){this.isRendered&&o.CollectionView.prototype._renderChildren.call(this)},_renderTemplate:function(){var t={};t=this.serializeData(),t=this.mixinTemplateHelpers(t),this.triggerMethod("before:render:template");var e=this.getTemplate(),i=o.Renderer.render(e,t,this);this.attachElContent(i),this.bindUIElements(),this.triggerMethod("render:template")},attachElContent:function(t){return this.$el.html(t),this},attachBuffer:function(t,e){this.getChildViewContainer(t).append(e)},_insertAfter:function(t){this.getChildViewContainer(this,t).append(t.el)},getChildViewContainer:function(t,e){if("$childViewContainer"in t)return t.$childViewContainer;var i,n=o.getOption(t,"childViewContainer");if(n){var s=o._getValue(n,t);if(i="@"===s.charAt(0)&&t.ui?t.ui[s.substr(4)]:t.$(s),i.length<=0)throw new o.Error({name:"ChildViewContainerMissingError",message:'The specified "childViewContainer" was not found: '+t.childViewContainer})}else i=t.$el;return t.$childViewContainer=i,i},resetChildViewContainer:function(){this.$childViewContainer&&delete this.$childViewContainer}}),o.LayoutView=o.ItemView.extend({regionClass:o.Region,constructor:function(t){t=t||{},this._firstRender=!0,this._initializeRegions(t),o.ItemView.call(this,t)},render:function(){return this._ensureViewIsIntact(),this._firstRender?this._firstRender=!1:this._reInitializeRegions(),o.ItemView.prototype.render.apply(this,arguments)},destroy:function(){return this.isDestroyed?this:(this.regionManager.destroy(),o.ItemView.prototype.destroy.apply(this,arguments))},addRegion:function(t,e){var i={};return i[t]=e,this._buildRegions(i)[t]},addRegions:function(t){return this.regions=i.extend({},this.regions,t),this._buildRegions(t)},removeRegion:function(t){return delete this.regions[t],this.regionManager.removeRegion(t)},getRegion:function(t){return this.regionManager.get(t)},getRegions:function(){return this.regionManager.getRegions()},_buildRegions:function(t){var e={regionClass:this.getOption("regionClass"),parentEl:i.partial(i.result,this,"el")};return this.regionManager.addRegions(t,e)},_initializeRegions:function(t){var e;this._initRegionManager(),e=o._getValue(this.regions,this,[t])||{};var n=this.getOption.call(t,"regions");n=o._getValue(n,this,[t]),i.extend(e,n),e=this.normalizeUIValues(e),this.addRegions(e)},_reInitializeRegions:function(){this.regionManager.invoke("reset")},getRegionManager:function(){return new o.RegionManager},_initRegionManager:function(){this.regionManager=this.getRegionManager(),this.regionManager._parent=this,this.listenTo(this.regionManager,"before:add:region",function(t){this.triggerMethod("before:add:region",t)}),this.listenTo(this.regionManager,"add:region",function(t,e){this[t]=e,this.triggerMethod("add:region",t,e)}),this.listenTo(this.regionManager,"before:remove:region",function(t){this.triggerMethod("before:remove:region",t)}),this.listenTo(this.regionManager,"remove:region",function(t,e){delete this[t],this.triggerMethod("remove:region",t,e)})},_getImmediateChildren:function(){return i.chain(this.regionManager.getRegions()).pluck("currentView").compact().value()}}),o.Behavior=o.Object.extend({constructor:function(t,e){this.view=e,this.defaults=i.result(this,"defaults")||{},this.options=i.extend({},this.defaults,t),o.Object.apply(this,arguments)},$:function(){return this.view.$.apply(this.view,arguments)},destroy:function(){this.stopListening()},proxyViewProperties:function(t){this.$el=t.$el,this.el=t.el}}),o.Behaviors=function(t,e){function i(t,n){return e.isObject(t.behaviors)?(n=i.parseBehaviors(t,n||e.result(t,"behaviors")),i.wrap(t,n,e.keys(o)),n):{}}function n(t,i){this._view=t,this._viewUI=e.result(t,"ui"),this._behaviors=i,this._triggers={}}var s=/^(\S+)\s*(.*)$/,o={behaviorTriggers:function(t,e){return new n(this,e).buildBehaviorTriggers()},behaviorEvents:function(i,n){var o={},r=this._uiBindings||e.result(this,"ui");return e.each(n,function(i,n){var a={},l=e.clone(e.result(i,"events"))||{},h=i._uiBindings||e.result(i,"ui"),c=e.extend({},r,h);l=t.normalizeUIKeys(l,c);var d=0;e.each(l,function(t,o){var r=o.match(s),l=r[1]+"."+[this.cid,n,d++," "].join(""),h=r[2],c=l+h,u=e.isFunction(t)?t:i[t];a[c]=e.bind(u,i)},this),o=e.extend(o,a)},this),o}};return e.extend(i,{behaviorsLookup:function(){throw new t.Error({message:"You must define where your behaviors are stored.",url:"marionette.behaviors.html#behaviorslookup"})},getBehaviorClass:function(e,n){return e.behaviorClass?e.behaviorClass:t._getValue(i.behaviorsLookup,this,[e,n])[n]},parseBehaviors:function(t,n){return e.chain(n).map(function(n,s){var o=i.getBehaviorClass(n,s),r=new o(n,t);return[r].concat(i.parseBehaviors(t,e.result(r,"behaviors")))}).flatten().value()},wrap:function(t,i,n){e.each(n,function(n){t[n]=e.partial(o[n],t[n],i)})}}),e.extend(n.prototype,{buildBehaviorTriggers:function(){return e.each(this._behaviors,this._buildTriggerHandlersForBehavior,this),this._triggers},_buildTriggerHandlersForBehavior:function(i,n){var s=e.extend({},this._viewUI,e.result(i,"ui")),o=e.clone(e.result(i,"triggers"))||{};o=t.normalizeUIKeys(o,s),e.each(o,e.bind(this._setHandlerForBehavior,this,i,n))},_setHandlerForBehavior:function(t,e,i,n){var s=n.replace(/^\S+/,function(t){return t+".behaviortriggers"+e});this._triggers[s]=this._view._buildViewTrigger(i)}}),i}(o,i),o.AppRouter=e.Router.extend({constructor:function(t){this.options=t||{},e.Router.apply(this,arguments);var i=this.getOption("appRoutes"),n=this._getController();this.processAppRoutes(n,i),this.on("route",this._processOnRoute,this)},appRoute:function(t,e){var i=this._getController();this._addAppRoute(i,t,e)},_processOnRoute:function(t,e){if(i.isFunction(this.onRoute)){var n=i.invert(this.getOption("appRoutes"))[t];this.onRoute(t,n,e)}},processAppRoutes:function(t,e){if(e){var n=i.keys(e).reverse();i.each(n,function(i){this._addAppRoute(t,i,e[i])},this)}},_getController:function(){return this.getOption("controller")},_addAppRoute:function(t,e,n){var s=t[n];if(!s)throw new o.Error('Method "'+n+'" was not found on the controller');this.route(e,n,i.bind(s,t))},getOption:o.proxyGetOption,triggerMethod:o.triggerMethod,bindEntityEvents:o.proxyBindEntityEvents,unbindEntityEvents:o.proxyUnbindEntityEvents}),o.Application=o.Object.extend({constructor:function(t){this._initializeRegions(t),this._initCallbacks=new o.Callbacks,this.submodules={},i.extend(this,t),this._initChannel(),o.Object.call(this,t)},execute:function(){this.commands.execute.apply(this.commands,arguments)},request:function(){return this.reqres.request.apply(this.reqres,arguments)},addInitializer:function(t){this._initCallbacks.add(t)},start:function(t){this.triggerMethod("before:start",t),this._initCallbacks.run(t,this),this.triggerMethod("start",t)},addRegions:function(t){return this._regionManager.addRegions(t)},emptyRegions:function(){return this._regionManager.emptyRegions()},removeRegion:function(t){return this._regionManager.removeRegion(t)},getRegion:function(t){return this._regionManager.get(t)},getRegions:function(){return this._regionManager.getRegions()},module:function(t,e){var n=o.Module.getClass(e),s=i.toArray(arguments);return s.unshift(this),n.create.apply(n,s)},getRegionManager:function(){return new o.RegionManager},_initializeRegions:function(t){var e=i.isFunction(this.regions)?this.regions(t):this.regions||{};this._initRegionManager();var n=o.getOption(t,"regions");return i.isFunction(n)&&(n=n.call(this,t)),i.extend(e,n),this.addRegions(e),this},_initRegionManager:function(){this._regionManager=this.getRegionManager(),this._regionManager._parent=this,this.listenTo(this._regionManager,"before:add:region",function(){o._triggerMethod(this,"before:add:region",arguments)}),this.listenTo(this._regionManager,"add:region",function(t,e){this[t]=e,o._triggerMethod(this,"add:region",arguments)}),this.listenTo(this._regionManager,"before:remove:region",function(){o._triggerMethod(this,"before:remove:region",arguments)}),this.listenTo(this._regionManager,"remove:region",function(t){delete this[t],o._triggerMethod(this,"remove:region",arguments)})},_initChannel:function(){this.channelName=i.result(this,"channelName")||"global",this.channel=i.result(this,"channel")||e.Wreqr.radio.channel(this.channelName),this.vent=i.result(this,"vent")||this.channel.vent,this.commands=i.result(this,"commands")||this.channel.commands,this.reqres=i.result(this,"reqres")||this.channel.reqres}}),o.Module=function(t,e,n){this.moduleName=t,this.options=i.extend({},this.options,n),this.initialize=n.initialize||this.initialize,this.submodules={},this._setupInitializersAndFinalizers(),this.app=e,i.isFunction(this.initialize)&&this.initialize(t,e,this.options)},o.Module.extend=o.extend,i.extend(o.Module.prototype,e.Events,{startWithParent:!0,initialize:function(){},addInitializer:function(t){this._initializerCallbacks.add(t)},addFinalizer:function(t){this._finalizerCallbacks.add(t)},start:function(t){this._isInitialized||(i.each(this.submodules,function(e){e.startWithParent&&e.start(t)}),this.triggerMethod("before:start",t),this._initializerCallbacks.run(t,this),this._isInitialized=!0,this.triggerMethod("start",t))},stop:function(){this._isInitialized&&(this._isInitialized=!1,this.triggerMethod("before:stop"),i.invoke(this.submodules,"stop"),this._finalizerCallbacks.run(void 0,this),this._initializerCallbacks.reset(),this._finalizerCallbacks.reset(),this.triggerMethod("stop"))},addDefinition:function(t,e){this._runModuleDefinition(t,e)},_runModuleDefinition:function(t,n){if(t){var s=i.flatten([this,this.app,e,o,e.$,i,n]);t.apply(this,s)}},_setupInitializersAndFinalizers:function(){this._initializerCallbacks=new o.Callbacks,this._finalizerCallbacks=new o.Callbacks},triggerMethod:o.triggerMethod}),i.extend(o.Module,{create:function(t,e,n){var s=t,o=i.rest(arguments,3);e=e.split(".");var r=e.length,a=[];return a[r-1]=n,i.each(e,function(e,i){var r=s;s=this._getModule(r,e,t,n),this._addModuleDefinition(r,s,a[i],o)},this),s},_getModule:function(t,e,n,s,o){var r=i.extend({},s),a=this.getClass(s),l=t[e];return l||(l=new a(e,n,r),t[e]=l,t.submodules[e]=l),l},getClass:function(t){var e=o.Module;return t?t.prototype instanceof e?t:t.moduleClass||e:e},_addModuleDefinition:function(t,e,i,n){var s=this._getDefine(i),o=this._getStartWithParent(i,e);s&&e.addDefinition(s,n),this._addStartWithParent(t,e,o)},_getStartWithParent:function(t,e){var n;return i.isFunction(t)&&t.prototype instanceof o.Module?(n=e.constructor.prototype.startWithParent,!!i.isUndefined(n)||n):!i.isObject(t)||(n=t.startWithParent,!!i.isUndefined(n)||n)},_getDefine:function(t){return!i.isFunction(t)||t.prototype instanceof o.Module?i.isObject(t)?t.define:null:t},_addStartWithParent:function(t,e,i){e.startWithParent=e.startWithParent&&i,e.startWithParent&&!e.startWithParentIsConfigured&&(e.startWithParentIsConfigured=!0,t.addInitializer(function(t){e.startWithParent&&e.start(t)}))}}),o}),define("text!common/component/tooltip/template/tooltipTemplate.htm",[],function(){return'<div class="{{- cssClasses }}" style="position: absolute; z-index: 100000;">\n\n    <js-templateNonce></js-templateNonce>\n    <div class="content">\n        <div class="body"></div>\n    </div>\n</div>\n'}),define("common/component/tooltip/Tooltip",["require","jquery","underscore","backbone","text!./template/tooltipTemplate.htm"],function(t){"use strict";var e=t("jquery"),i=t("underscore"),n=t("backbone"),s=t("text!./template/tooltipTemplate.htm");return n.View.extend({template:i.template(s),delay:500,offset:{x:10,y:10},attribute:"data-tooltip",cssClasses:"panel info tooltip",contentSelector:".body",triggerEvents:!1,el:function(){return this.template({cssClasses:this.cssClasses})},constructor:function(t){if(t||(t={}),!t.attachTo||0===e(t.attachTo).length)throw new Error("Tooltip should be attached to an element");if(!t.contentTemplate)throw new Error("Tooltip should have contentTemplate");this._shown=!1,this.$attachTo=e(t.attachTo),this.$attachTo[0].tooltip=this,t.delay&&(this.delay=t.delay),t.offset&&(this.offset=t.offset),t.attribute&&(this.attribute=t.attribute),t.cssClasses&&(this.cssClasses=t.cssClasses),this.contentTemplate=t.contentTemplate,this.i18n=t.i18n||{},!i.isUndefined(t.triggerEvents)&&(this.triggerEvents=t.triggerEvents),this.selector="["+this.attribute+"]",i.bindAll(this,"show","_onMouseMove","_onMouseLeave"),this.$attachTo.on("mousemove touchmove",this.selector,this._onMouseMove),this.$attachTo.on("mouseleave touchend",this.selector,this._onMouseLeave),n.View.prototype.constructor.apply(this,arguments)},_render:function(t,e,s){if(this._event){t=t instanceof n.Model?t.toJSON():t;var o=i.template(this.contentTemplate)({model:t,i18n:this.i18n,options:e||{}});this.$el.find(".body").empty().append(o),this._showTooltip()}s.resolve()},show:function(t,n){var s=new e.Deferred;return this._timer=setTimeout(i.bind(this._render,this,t,n,s),this.delay),s},_showTooltip:function(){e("body").append(this.$el),this._updatePosition(),this._shown=!0,this.triggerEvents&&this.trigger("show",this)},hide:function(){this.contentTemplate&&this._timer&&clearTimeout(this._timer),this.$el.detach(),this._shown=!1,this.triggerEvents&&this.trigger("hide",this)},_updatePosition:function(){var t=this.$el.innerHeight(),i=this.$el.innerWidth(),n=e(window).height(),s=e(window).width(),o=this.offset.y,r=this.offset.x;t+this._event.pageY+this.offset.y+3>=n&&(o=-this.offset.y-t),i+this._event.pageX+this.offset.x+3>=s&&(r=-this.offset.x-i),this.$el.css({top:this._event.pageY+o,left:this._event.pageX+r})},_onMouseMove:function(t){this._event=t},_onMouseLeave:function(){this._shown&&this.hide(),this._timer&&clearTimeout(this._timer),this._event=null},remove:function(){this._shown&&this.hide(),this._timer&&clearTimeout(this._timer),this.$attachTo.off("mousemove touchmove",this.selector,this._onMouseMove),this.$attachTo.off("mouseleave touchend",this.selector,this._onMouseLeave),n.View.prototype.remove.apply(this,arguments)}},{attachTo:function(t,e){var i=this;return e||(e={}),e.attachTo=t||"body",new i(e)},detachFrom:function(t){t=e(t)[0],t.tooltip&&t.tooltip.remove()}})}),define("common/component/baseTable/BaseTable",["require","backbone.marionette","common/component/tooltip/Tooltip"],function(t){var e=t("backbone.marionette"),i=t("common/component/tooltip/Tooltip");return e.CompositeView.extend({initialize:function(t){t=t||{};var e=t.tooltip;e&&e.template&&e.i18n&&(this.tooltip=new i({i18n:e.i18n,attachTo:this.$el,contentTemplate:e.template}))},remove:function(){this.tooltip&&this.tooltip.remove(),e.CompositeView.prototype.remove.apply(this,arguments)}})}),define("text!administer/resetSettings/templates/collectionViewTemplate.htm",[],function(){return'<div class="baseTableContainer">\n\n    <js-templateNonce></js-templateNonce>\n    <div class="baseTable resetSettingsTable">\n        <div class="table-row thead">\n            <div class="name table-column">\n                <div class="item">\n                    <p>\n                        {{- i18n["editSettings.name"]}}\n                    </p>\n                </div>\n            </div>\n            <div class="value table-column">\n                <div class="item">\n                    <p>\n                        {{- i18n["editSettings.value"]}}\n                    </p>\n                </div>\n            </div>\n            <div class="actions table-column"></div>\n        </div>\n        <div class="tbody"></div>\n    </div>\n</div>'}),define("common/component/base/Dimmer",["require","jquery","common/util/classUtil"],function(t){var e,i,n=t("jquery"),s=t("common/util/classUtil");return s.extend({constructor:function(t){e||(i=0,e=n("<div id='dialogDimmer' class='dimmer'></div>").css(t),n(document.body).append(e),e.hide()),i++},css:function(t){return e.css(t),this},show:function(){var t=this.getCount()||0;return this.setCount(++t),e.show(),this},hide:function(){if(this.isVisible()){var t=this.getCount();return this.setCount(--t),!t&&e.hide(),this}},setCount:function(t){e.data({count:t})},getCount:function(){return parseInt(e.data("count"),10)},isVisible:function(){return e.is(":visible")},remove:function(){this._removed||(this._removed=!0,e&&(--i||(e.remove(),e=null)))}})}),define("text!common/component/panel/template/panelTemplate.htm",[],function(){return'<div class="panel {{- additionalCssClasses }}">\n\n    <js-templateNonce></js-templateNonce>\n    <div class="header">\n        <div class="title">{{- title}}</div>\n    </div>\n    <div class="subcontainer"></div>\n</div>\n'}),define("common/component/panel/Panel",["require","css!panel","underscore","backbone","text!./template/panelTemplate.htm"],function(t){"use strict";t("css!panel");var e=t("underscore"),i=t("backbone"),n=t("text!./template/panelTemplate.htm");return i.View.extend({defaultTemplate:n,el:function(){var t=this.getTemplateArguments();return this.template(t)},getTemplateArguments:function(){return{title:this.title,additionalCssClasses:this.additionalCssClasses}},constructor:function(t){t||(t={}),this.template=e.template(t.template||this.defaultTemplate),this.title=t.title||"",this.additionalCssClasses=t.additionalCssClasses||"",this.content=t.content||"",this.collapsed=!t.collapsed,this.openClass=t.openClass||"open",this.closedClass=t.closedClass||"closed",this.loadingClass=t.loadingClass||"loading",this.fixedHeight=t.fixedHeight||!1,this.contentContainer=t.contentContainer||".subcontainer",this.overflow=t.overflow||"auto",this.traits=t.traits||[],e.each(this.traits,e.bind(function(t){t.extension&&e.extend(this,t.extension)},this)),this.invokeTraits("onConstructor",t),i.View.apply(this,arguments)},invokeTraits:function(t){var i=Array.prototype.slice.call(arguments,1),n=this;e.each(this.traits,function(e){e[t]&&e[t].apply(n,i)})},initialize:function(t){this.invokeTraits("beforeInitialize",t),this.content&&this.setContent(this.content),this.toggleCollapsedState(),this.invokeTraits("afterInitialize",t)},setElement:function(t){this.invokeTraits("beforeSetElement",t);var e=i.View.prototype.setElement.apply(this,arguments);return this.$contentContainer=this.$(this.contentContainer),this.$contentContainer[this.collapsed?"hide":"show"](),this.invokeTraits("afterSetElement",t),e},open:function(t){return this.invokeTraits("beforeOpen",t),this.$contentContainer.show(),this.$el.removeClass(this.closedClass).addClass(this.openClass),this.collapsed=!1,t&&t.renderContent&&this.renderContent(),this.invokeTraits("afterOpen",t),t&&t.silent||this.trigger("open",this),this},close:function(t){return this.invokeTraits("beforeClose",t),this.$contentContainer.hide(),this.$el.removeClass(this.openClass).addClass(this.closedClass),this.collapsed=!0,this.invokeTraits("afterClose",t),t&&t.silent||this.trigger("close",this),this},setContent:function(t,e){this.content=t;var i=this.renderContent();this.$contentContainer[!0===e?"append":"html"](i)},renderContent:function(){return this.content instanceof i.View?this.content.render().$el:this.content},setHeight:function(t){var i=this.$("> .header").outerHeight();this.$contentContainer.css({height:e.isNumber(t)?t-i+"px":"auto",overflow:this.overflow})},toggleCollapsedState:function(){return this.collapsed?this.open():this.close(),this},remove:function(){this.invokeTraits("onRemove"),this.content&&this.content.remove&&this.content.remove(),i.View.prototype.remove.call(this)}})}),define("common/component/panel/trait/abstractPanelTrait",[],function(){"use strict";return{extension:{},onConstructor:function(){},beforeInitialize:function(){},afterInitialize:function(){},beforeSetElement:function(){},afterSetElement:function(){},beforeOpen:function(){},afterOpen:function(){},beforeClose:function(){},afterClose:function(){},onRemove:function(){}}}),function(t){"function"==typeof define&&define.amd?define("jquery-ui/disable-selection",["jquery","./version"],t):t(jQuery)}(function(t){return t.fn.extend({disableSelection:function(){var t="onselectstart"in document.createElement("div")?"selectstart":"mousedown";return function(){return this.on(t+".ui-disableSelection",function(t){t.preventDefault()})}}(),enableSelection:function(){return this.off(".ui-disableSelection")}})}),function(t){"function"==typeof define&&define.amd?define("jquery-ui/plugin",["jquery","./version"],t):t(jQuery)}(function(t){return t.ui.plugin={add:function(e,i,n){var s,o=t.ui[e].prototype;for(s in n)o.plugins[s]=o.plugins[s]||[],o.plugins[s].push([i,n[s]])},call:function(t,e,i,n){var s,o=t.plugins[e];if(o&&(n||t.element[0].parentNode&&11!==t.element[0].parentNode.nodeType))for(s=0;s<o.length;s++)t.options[o[s][0]]&&o[s][1].apply(t.element,i)}}}),function(t){"function"==typeof define&&define.amd?define("jquery-ui/widgets/resizable",["jquery","./mouse","../disable-selection","../plugin","../version","../widget"],t):t(jQuery)}(function(t){return t.widget("ui.resizable",t.ui.mouse,{version:"1.12.1",widgetEventPrefix:"resize",options:{alsoResize:!1,animate:!1,animateDuration:"slow",animateEasing:"swing",aspectRatio:!1,autoHide:!1,classes:{"ui-resizable-se":"ui-icon ui-icon-gripsmall-diagonal-se"},containment:!1,ghost:!1,grid:!1,handles:"e,s,se",helper:!1,maxHeight:null,maxWidth:null,minHeight:10,minWidth:10,zIndex:90,resize:null,start:null,stop:null},_num:function(t){return parseFloat(t)||0},_isNumber:function(t){return!isNaN(parseFloat(t))},_hasScroll:function(e,i){if("hidden"===t(e).css("overflow"))return!1;var n=i&&"left"===i?"scrollLeft":"scrollTop",s=!1;return e[n]>0||(e[n]=1,s=e[n]>0,e[n]=0,s)},_create:function(){var e,i=this.options,n=this;this._addClass("ui-resizable"),t.extend(this,{_aspectRatio:!!i.aspectRatio,aspectRatio:i.aspectRatio,originalElement:this.element,_proportionallyResizeElements:[],_helper:i.helper||i.ghost||i.animate?i.helper||"ui-resizable-helper":null}),this.element[0].nodeName.match(/^(canvas|textarea|input|select|button|img)$/i)&&(this.element.wrap(t("<div class='ui-wrapper' style='overflow: hidden;'></div>").css({position:this.element.css("position"),width:this.element.outerWidth(),height:this.element.outerHeight(),top:this.element.css("top"),left:this.element.css("left")})),this.element=this.element.parent().data("ui-resizable",this.element.resizable("instance")),this.elementIsWrapper=!0,e={marginTop:this.originalElement.css("marginTop"),marginRight:this.originalElement.css("marginRight"),marginBottom:this.originalElement.css("marginBottom"),marginLeft:this.originalElement.css("marginLeft")},this.element.css(e),this.originalElement.css("margin",0),this.originalResizeStyle=this.originalElement.css("resize"),this.originalElement.css("resize","none"),this._proportionallyResizeElements.push(this.originalElement.css({position:"static",zoom:1,display:"block"})),this.originalElement.css(e),this._proportionallyResize()),this._setupHandles(),i.autoHide&&t(this.element).on("mouseenter",function(){i.disabled||(n._removeClass("ui-resizable-autohide"),n._handles.show())}).on("mouseleave",function(){i.disabled||n.resizing||(n._addClass("ui-resizable-autohide"),n._handles.hide())}),this._mouseInit()},_destroy:function(){this._mouseDestroy();var e,i=function(e){t(e).removeData("resizable").removeData("ui-resizable").off(".resizable").find(".ui-resizable-handle").remove()};return this.elementIsWrapper&&(i(this.element),e=this.element,this.originalElement.css({position:e.css("position"),width:e.outerWidth(),height:e.outerHeight(),top:e.css("top"),left:e.css("left")}).insertAfter(e),e.remove()),this.originalElement.css("resize",this.originalResizeStyle),i(this.originalElement),this},_setOption:function(t,e){switch(this._super(t,e),t){case"handles":this._removeHandles(),this._setupHandles()}},_setupHandles:function(){var e,i,n,s,o,r=this.options,a=this;if(this.handles=r.handles||(t(".ui-resizable-handle",this.element).length?{n:".ui-resizable-n",e:".ui-resizable-e",s:".ui-resizable-s",
w:".ui-resizable-w",se:".ui-resizable-se",sw:".ui-resizable-sw",ne:".ui-resizable-ne",nw:".ui-resizable-nw"}:"e,s,se"),this._handles=t(),this.handles.constructor===String)for("all"===this.handles&&(this.handles="n,e,s,w,se,sw,ne,nw"),n=this.handles.split(","),this.handles={},i=0;i<n.length;i++)e=t.trim(n[i]),s="ui-resizable-"+e,o=t("<div>"),this._addClass(o,"ui-resizable-handle "+s),o.css({zIndex:r.zIndex}),this.handles[e]=".ui-resizable-"+e,this.element.append(o);this._renderAxis=function(e){var i,n,s,o;e=e||this.element;for(i in this.handles)this.handles[i].constructor===String?this.handles[i]=this.element.children(this.handles[i]).first().show():(this.handles[i].jquery||this.handles[i].nodeType)&&(this.handles[i]=t(this.handles[i]),this._on(this.handles[i],{mousedown:a._mouseDown})),this.elementIsWrapper&&this.originalElement[0].nodeName.match(/^(textarea|input|select|button)$/i)&&(n=t(this.handles[i],this.element),o=/sw|ne|nw|se|n|s/.test(i)?n.outerHeight():n.outerWidth(),s=["padding",/ne|nw|n/.test(i)?"Top":/se|sw|s/.test(i)?"Bottom":/^e$/.test(i)?"Right":"Left"].join(""),e.css(s,o),this._proportionallyResize()),this._handles=this._handles.add(this.handles[i])},this._renderAxis(this.element),this._handles=this._handles.add(this.element.find(".ui-resizable-handle")),this._handles.disableSelection(),this._handles.on("mouseover",function(){a.resizing||(this.className&&(o=this.className.match(/ui-resizable-(se|sw|ne|nw|n|e|s|w)/i)),a.axis=o&&o[1]?o[1]:"se")}),r.autoHide&&(this._handles.hide(),this._addClass("ui-resizable-autohide"))},_removeHandles:function(){this._handles.remove()},_mouseCapture:function(e){var i,n,s=!1;for(i in this.handles)((n=t(this.handles[i])[0])===e.target||t.contains(n,e.target))&&(s=!0);return!this.options.disabled&&s},_mouseStart:function(e){var i,n,s,o=this.options,r=this.element;return this.resizing=!0,this._renderProxy(),i=this._num(this.helper.css("left")),n=this._num(this.helper.css("top")),o.containment&&(i+=t(o.containment).scrollLeft()||0,n+=t(o.containment).scrollTop()||0),this.offset=this.helper.offset(),this.position={left:i,top:n},this.size=this._helper?{width:this.helper.width(),height:this.helper.height()}:{width:r.width(),height:r.height()},this.originalSize=this._helper?{width:r.outerWidth(),height:r.outerHeight()}:{width:r.width(),height:r.height()},this.sizeDiff={width:r.outerWidth()-r.width(),height:r.outerHeight()-r.height()},this.originalPosition={left:i,top:n},this.originalMousePosition={left:e.pageX,top:e.pageY},this.aspectRatio="number"==typeof o.aspectRatio?o.aspectRatio:this.originalSize.width/this.originalSize.height||1,s=t(".ui-resizable-"+this.axis).css("cursor"),t("body").css("cursor","auto"===s?this.axis+"-resize":s),this._addClass("ui-resizable-resizing"),this._propagate("start",e),!0},_mouseDrag:function(e){var i,n,s=this.originalMousePosition,o=this.axis,r=e.pageX-s.left||0,a=e.pageY-s.top||0,l=this._change[o];return this._updatePrevProperties(),!!l&&(i=l.apply(this,[e,r,a]),this._updateVirtualBoundaries(e.shiftKey),(this._aspectRatio||e.shiftKey)&&(i=this._updateRatio(i,e)),i=this._respectSize(i,e),this._updateCache(i),this._propagate("resize",e),n=this._applyChanges(),!this._helper&&this._proportionallyResizeElements.length&&this._proportionallyResize(),t.isEmptyObject(n)||(this._updatePrevProperties(),this._trigger("resize",e,this.ui()),this._applyChanges()),!1)},_mouseStop:function(e){this.resizing=!1;var i,n,s,o,r,a,l,h=this.options,c=this;return this._helper&&(i=this._proportionallyResizeElements,n=i.length&&/textarea/i.test(i[0].nodeName),s=n&&this._hasScroll(i[0],"left")?0:c.sizeDiff.height,o=n?0:c.sizeDiff.width,r={width:c.helper.width()-o,height:c.helper.height()-s},a=parseFloat(c.element.css("left"))+(c.position.left-c.originalPosition.left)||null,l=parseFloat(c.element.css("top"))+(c.position.top-c.originalPosition.top)||null,h.animate||this.element.css(t.extend(r,{top:l,left:a})),c.helper.height(c.size.height),c.helper.width(c.size.width),this._helper&&!h.animate&&this._proportionallyResize()),t("body").css("cursor","auto"),this._removeClass("ui-resizable-resizing"),this._propagate("stop",e),this._helper&&this.helper.remove(),!1},_updatePrevProperties:function(){this.prevPosition={top:this.position.top,left:this.position.left},this.prevSize={width:this.size.width,height:this.size.height}},_applyChanges:function(){var t={};return this.position.top!==this.prevPosition.top&&(t.top=this.position.top+"px"),this.position.left!==this.prevPosition.left&&(t.left=this.position.left+"px"),this.size.width!==this.prevSize.width&&(t.width=this.size.width+"px"),this.size.height!==this.prevSize.height&&(t.height=this.size.height+"px"),this.helper.css(t),t},_updateVirtualBoundaries:function(t){var e,i,n,s,o,r=this.options;o={minWidth:this._isNumber(r.minWidth)?r.minWidth:0,maxWidth:this._isNumber(r.maxWidth)?r.maxWidth:1/0,minHeight:this._isNumber(r.minHeight)?r.minHeight:0,maxHeight:this._isNumber(r.maxHeight)?r.maxHeight:1/0},(this._aspectRatio||t)&&(e=o.minHeight*this.aspectRatio,n=o.minWidth/this.aspectRatio,i=o.maxHeight*this.aspectRatio,s=o.maxWidth/this.aspectRatio,e>o.minWidth&&(o.minWidth=e),n>o.minHeight&&(o.minHeight=n),i<o.maxWidth&&(o.maxWidth=i),s<o.maxHeight&&(o.maxHeight=s)),this._vBoundaries=o},_updateCache:function(t){this.offset=this.helper.offset(),this._isNumber(t.left)&&(this.position.left=t.left),this._isNumber(t.top)&&(this.position.top=t.top),this._isNumber(t.height)&&(this.size.height=t.height),this._isNumber(t.width)&&(this.size.width=t.width)},_updateRatio:function(t){var e=this.position,i=this.size,n=this.axis;return this._isNumber(t.height)?t.width=t.height*this.aspectRatio:this._isNumber(t.width)&&(t.height=t.width/this.aspectRatio),"sw"===n&&(t.left=e.left+(i.width-t.width),t.top=null),"nw"===n&&(t.top=e.top+(i.height-t.height),t.left=e.left+(i.width-t.width)),t},_respectSize:function(t){var e=this._vBoundaries,i=this.axis,n=this._isNumber(t.width)&&e.maxWidth&&e.maxWidth<t.width,s=this._isNumber(t.height)&&e.maxHeight&&e.maxHeight<t.height,o=this._isNumber(t.width)&&e.minWidth&&e.minWidth>t.width,r=this._isNumber(t.height)&&e.minHeight&&e.minHeight>t.height,a=this.originalPosition.left+this.originalSize.width,l=this.originalPosition.top+this.originalSize.height,h=/sw|nw|w/.test(i),c=/nw|ne|n/.test(i);return o&&(t.width=e.minWidth),r&&(t.height=e.minHeight),n&&(t.width=e.maxWidth),s&&(t.height=e.maxHeight),o&&h&&(t.left=a-e.minWidth),n&&h&&(t.left=a-e.maxWidth),r&&c&&(t.top=l-e.minHeight),s&&c&&(t.top=l-e.maxHeight),t.width||t.height||t.left||!t.top?t.width||t.height||t.top||!t.left||(t.left=null):t.top=null,t},_getPaddingPlusBorderDimensions:function(t){for(var e=0,i=[],n=[t.css("borderTopWidth"),t.css("borderRightWidth"),t.css("borderBottomWidth"),t.css("borderLeftWidth")],s=[t.css("paddingTop"),t.css("paddingRight"),t.css("paddingBottom"),t.css("paddingLeft")];e<4;e++)i[e]=parseFloat(n[e])||0,i[e]+=parseFloat(s[e])||0;return{height:i[0]+i[2],width:i[1]+i[3]}},_proportionallyResize:function(){if(this._proportionallyResizeElements.length)for(var t,e=0,i=this.helper||this.element;e<this._proportionallyResizeElements.length;e++)t=this._proportionallyResizeElements[e],this.outerDimensions||(this.outerDimensions=this._getPaddingPlusBorderDimensions(t)),t.css({height:i.height()-this.outerDimensions.height||0,width:i.width()-this.outerDimensions.width||0})},_renderProxy:function(){var e=this.element,i=this.options;this.elementOffset=e.offset(),this._helper?(this.helper=this.helper||t("<div style='overflow:hidden;'></div>"),this._addClass(this.helper,this._helper),this.helper.css({width:this.element.outerWidth(),height:this.element.outerHeight(),position:"absolute",left:this.elementOffset.left+"px",top:this.elementOffset.top+"px",zIndex:++i.zIndex}),this.helper.appendTo("body").disableSelection()):this.helper=this.element},_change:{e:function(t,e){return{width:this.originalSize.width+e}},w:function(t,e){var i=this.originalSize;return{left:this.originalPosition.left+e,width:i.width-e}},n:function(t,e,i){var n=this.originalSize;return{top:this.originalPosition.top+i,height:n.height-i}},s:function(t,e,i){return{height:this.originalSize.height+i}},se:function(e,i,n){return t.extend(this._change.s.apply(this,arguments),this._change.e.apply(this,[e,i,n]))},sw:function(e,i,n){return t.extend(this._change.s.apply(this,arguments),this._change.w.apply(this,[e,i,n]))},ne:function(e,i,n){return t.extend(this._change.n.apply(this,arguments),this._change.e.apply(this,[e,i,n]))},nw:function(e,i,n){return t.extend(this._change.n.apply(this,arguments),this._change.w.apply(this,[e,i,n]))}},_propagate:function(e,i){t.ui.plugin.call(this,e,[i,this.ui()]),"resize"!==e&&this._trigger(e,i,this.ui())},plugins:{},ui:function(){return{originalElement:this.originalElement,element:this.element,helper:this.helper,position:this.position,size:this.size,originalSize:this.originalSize,originalPosition:this.originalPosition}}}),t.ui.plugin.add("resizable","animate",{stop:function(e){var i=t(this).resizable("instance"),n=i.options,s=i._proportionallyResizeElements,o=s.length&&/textarea/i.test(s[0].nodeName),r=o&&i._hasScroll(s[0],"left")?0:i.sizeDiff.height,a=o?0:i.sizeDiff.width,l={width:i.size.width-a,height:i.size.height-r},h=parseFloat(i.element.css("left"))+(i.position.left-i.originalPosition.left)||null,c=parseFloat(i.element.css("top"))+(i.position.top-i.originalPosition.top)||null;i.element.animate(t.extend(l,c&&h?{top:c,left:h}:{}),{duration:n.animateDuration,easing:n.animateEasing,step:function(){var n={width:parseFloat(i.element.css("width")),height:parseFloat(i.element.css("height")),top:parseFloat(i.element.css("top")),left:parseFloat(i.element.css("left"))};s&&s.length&&t(s[0]).css({width:n.width,height:n.height}),i._updateCache(n),i._propagate("resize",e)}})}}),t.ui.plugin.add("resizable","containment",{start:function(){var e,i,n,s,o,r,a,l=t(this).resizable("instance"),h=l.options,c=l.element,d=h.containment,u=d instanceof t?d.get(0):/parent/.test(d)?c.parent().get(0):d;u&&(l.containerElement=t(u),/document/.test(d)||d===document?(l.containerOffset={left:0,top:0},l.containerPosition={left:0,top:0},l.parentData={element:t(document),left:0,top:0,width:t(document).width(),height:t(document).height()||document.body.parentNode.scrollHeight}):(e=t(u),i=[],t(["Top","Right","Left","Bottom"]).each(function(t,n){i[t]=l._num(e.css("padding"+n))}),l.containerOffset=e.offset(),l.containerPosition=e.position(),l.containerSize={height:e.innerHeight()-i[3],width:e.innerWidth()-i[1]},n=l.containerOffset,s=l.containerSize.height,o=l.containerSize.width,r=l._hasScroll(u,"left")?u.scrollWidth:o,a=l._hasScroll(u)?u.scrollHeight:s,l.parentData={element:u,left:n.left,top:n.top,width:r,height:a}))},resize:function(e){var i,n,s,o,r=t(this).resizable("instance"),a=r.options,l=r.containerOffset,h=r.position,c=r._aspectRatio||e.shiftKey,d={top:0,left:0},u=r.containerElement,p=!0;u[0]!==document&&/static/.test(u.css("position"))&&(d=l),h.left<(r._helper?l.left:0)&&(r.size.width=r.size.width+(r._helper?r.position.left-l.left:r.position.left-d.left),c&&(r.size.height=r.size.width/r.aspectRatio,p=!1),r.position.left=a.helper?l.left:0),h.top<(r._helper?l.top:0)&&(r.size.height=r.size.height+(r._helper?r.position.top-l.top:r.position.top),c&&(r.size.width=r.size.height*r.aspectRatio,p=!1),r.position.top=r._helper?l.top:0),s=r.containerElement.get(0)===r.element.parent().get(0),o=/relative|absolute/.test(r.containerElement.css("position")),s&&o?(r.offset.left=r.parentData.left+r.position.left,r.offset.top=r.parentData.top+r.position.top):(r.offset.left=r.element.offset().left,r.offset.top=r.element.offset().top),i=Math.abs(r.sizeDiff.width+(r._helper?r.offset.left-d.left:r.offset.left-l.left)),n=Math.abs(r.sizeDiff.height+(r._helper?r.offset.top-d.top:r.offset.top-l.top)),i+r.size.width>=r.parentData.width&&(r.size.width=r.parentData.width-i,c&&(r.size.height=r.size.width/r.aspectRatio,p=!1)),n+r.size.height>=r.parentData.height&&(r.size.height=r.parentData.height-n,c&&(r.size.width=r.size.height*r.aspectRatio,p=!1)),p||(r.position.left=r.prevPosition.left,r.position.top=r.prevPosition.top,r.size.width=r.prevSize.width,r.size.height=r.prevSize.height)},stop:function(){var e=t(this).resizable("instance"),i=e.options,n=e.containerOffset,s=e.containerPosition,o=e.containerElement,r=t(e.helper),a=r.offset(),l=r.outerWidth()-e.sizeDiff.width,h=r.outerHeight()-e.sizeDiff.height;e._helper&&!i.animate&&/relative/.test(o.css("position"))&&t(this).css({left:a.left-s.left-n.left,width:l,height:h}),e._helper&&!i.animate&&/static/.test(o.css("position"))&&t(this).css({left:a.left-s.left-n.left,width:l,height:h})}}),t.ui.plugin.add("resizable","alsoResize",{start:function(){var e=t(this).resizable("instance"),i=e.options;t(i.alsoResize).each(function(){var e=t(this);e.data("ui-resizable-alsoresize",{width:parseFloat(e.width()),height:parseFloat(e.height()),left:parseFloat(e.css("left")),top:parseFloat(e.css("top"))})})},resize:function(e,i){var n=t(this).resizable("instance"),s=n.options,o=n.originalSize,r=n.originalPosition,a={height:n.size.height-o.height||0,width:n.size.width-o.width||0,top:n.position.top-r.top||0,left:n.position.left-r.left||0};t(s.alsoResize).each(function(){var e=t(this),n=t(this).data("ui-resizable-alsoresize"),s={},o=e.parents(i.originalElement[0]).length?["width","height"]:["width","height","top","left"];t.each(o,function(t,e){var i=(n[e]||0)+(a[e]||0);i&&i>=0&&(s[e]=i||null)}),e.css(s)})},stop:function(){t(this).removeData("ui-resizable-alsoresize")}}),t.ui.plugin.add("resizable","ghost",{start:function(){var e=t(this).resizable("instance"),i=e.size;e.ghost=e.originalElement.clone(),e.ghost.css({opacity:.25,display:"block",position:"relative",height:i.height,width:i.width,margin:0,left:0,top:0}),e._addClass(e.ghost,"ui-resizable-ghost"),!1!==t.uiBackCompat&&"string"==typeof e.options.ghost&&e.ghost.addClass(this.options.ghost),e.ghost.appendTo(e.helper)},resize:function(){var e=t(this).resizable("instance");e.ghost&&e.ghost.css({position:"relative",height:e.size.height,width:e.size.width})},stop:function(){var e=t(this).resizable("instance");e.ghost&&e.helper&&e.helper.get(0).removeChild(e.ghost.get(0))}}),t.ui.plugin.add("resizable","grid",{resize:function(){var e,i=t(this).resizable("instance"),n=i.options,s=i.size,o=i.originalSize,r=i.originalPosition,a=i.axis,l="number"==typeof n.grid?[n.grid,n.grid]:n.grid,h=l[0]||1,c=l[1]||1,d=Math.round((s.width-o.width)/h)*h,u=Math.round((s.height-o.height)/c)*c,p=o.width+d,f=o.height+u,m=n.maxWidth&&n.maxWidth<p,g=n.maxHeight&&n.maxHeight<f,v=n.minWidth&&n.minWidth>p,b=n.minHeight&&n.minHeight>f;n.grid=l,v&&(p+=h),b&&(f+=c),m&&(p-=h),g&&(f-=c),/^(se|s|e)$/.test(a)?(i.size.width=p,i.size.height=f):/^(ne)$/.test(a)?(i.size.width=p,i.size.height=f,i.position.top=r.top-u):/^(sw)$/.test(a)?(i.size.width=p,i.size.height=f,i.position.left=r.left-d):((f-c<=0||p-h<=0)&&(e=i._getPaddingPlusBorderDimensions(this)),f-c>0?(i.size.height=f,i.position.top=r.top-u):(f=c-e.height,i.size.height=f,i.position.top=r.top+o.height-f),p-h>0?(i.size.width=p,i.position.left=r.left-d):(p=h-e.width,i.size.width=p,i.position.left=r.left+o.width-p))}}),t.ui.resizable}),define("common/component/panel/trait/resizablePanelTrait",["require","underscore","./abstractPanelTrait","css!jquery-ui/jquery-ui","jquery-ui/widgets/resizable"],function(t){"use strict";function e(t,e){this.trigger("resize",t,e)}function i(t,e){this.trigger("resizeStart",t,e)}function n(t,e){this.trigger("resizeStop",t,e)}var s=t("underscore"),o=t("./abstractPanelTrait");return t("css!jquery-ui/jquery-ui"),t("jquery-ui/widgets/resizable"),s.extend({},o,{onConstructor:function(t){t||(t={}),this.handles=t.handles||"e, s, se",this.minWidth=t.minWidth||10,this.minHeight=t.minHeight||10,this.maxWidth=t.maxWidth||null,this.maxHeight=t.maxHeight||null,this.alsoResize=t.alsoResize||!1,this.resizableEl=t.resizableEl},afterSetElement:function(){this.$resizableEl=this.$el.find(this.resizableEl).length?this.$el.find(this.resizableEl):this.$el;var t=this.handles;"function"==typeof t&&(t=t(this.$el)),this.$resizableEl.resizable({handles:t,minHeight:this.minHeight,minWidth:this.minWidth,maxWidth:this.maxWidth,maxHeight:this.maxHeight,alsoResize:this.alsoResize,resize:s.bind(e,this),start:s.bind(i,this),stop:s.bind(n,this)})},onRemove:function(){try{this.$el.resizable("destroy")}catch(t){}}})}),define("text!common/component/dialog/template/dialogTemplate.htm",[],function(){return'<div class="jr-mDialog jr {{- additionalCssClasses }}" tabindex="-1">\n\n    <js-templateNonce></js-templateNonce>\n    <div class="jr-mDialog-header mover jr">\n        <h1 class="jr-mDialog-header-title jr">{{- title }}</h1>\n    </div>\n    <div class="jr-mDialog-body jr {{- additionalBodyCssClasses }}">\n        <div class="jr-mDialog-body-wrapper jr subcontainer"></div>\n    </div>\n    <div class="jr-mDialog-footer jr"></div>\n\n</div>\n'}),define("text!common/component/dialog/template/dialogButtonTemplate.htm",[],function(){return"<button class=\"button action up {{- primary ? 'primary' : ''}} {{- (typeof float !== 'undefined' ? 'right' : '') }}\">\n\n    <js-templateNonce></js-templateNonce>\n    <span class=\"wrap\">{{- label }}<span class=\"icon\"></span></span>\n</button>\n"}),function(t){"function"==typeof define&&define.amd?define("jquery-ui/data",["jquery","./version"],t):t(jQuery)}(function(t){return t.extend(t.expr[":"],{data:t.expr.createPseudo?t.expr.createPseudo(function(e){return function(i){return!!t.data(i,e)}}):function(e,i,n){return!!t.data(e,n[3])}})}),function(t){"function"==typeof define&&define.amd?define("jquery-ui/safe-active-element",["jquery","./version"],t):t(jQuery)}(function(t){return t.ui.safeActiveElement=function(t){var e;try{e=t.activeElement}catch(i){e=t.body}return e||(e=t.body),e.nodeName||(e=t.body),e}}),function(t){"function"==typeof define&&define.amd?define("jquery-ui/safe-blur",["jquery","./version"],t):t(jQuery)}(function(t){return t.ui.safeBlur=function(e){e&&"body"!==e.nodeName.toLowerCase()&&t(e).trigger("blur")}}),function(t){"function"==typeof define&&define.amd?define("jquery-ui/scroll-parent",["jquery","./version"],t):t(jQuery)}(function(t){return t.fn.scrollParent=function(e){var i=this.css("position"),n="absolute"===i,s=e?/(auto|scroll|hidden)/:/(auto|scroll)/,o=this.parents().filter(function(){var e=t(this);return(!n||"static"!==e.css("position"))&&s.test(e.css("overflow")+e.css("overflow-y")+e.css("overflow-x"))}).eq(0);return"fixed"!==i&&o.length?o:t(this[0].ownerDocument||document)}}),function(t){"function"==typeof define&&define.amd?define("jquery-ui/widgets/draggable",["jquery","./mouse","../data","../plugin","../safe-active-element","../safe-blur","../scroll-parent","../version","../widget"],t):t(jQuery)}(function(t){return t.widget("ui.draggable",t.ui.mouse,{version:"1.12.1",widgetEventPrefix:"drag",options:{addClasses:!0,appendTo:"parent",axis:!1,connectToSortable:!1,containment:!1,cursor:"auto",cursorAt:!1,grid:!1,handle:!1,helper:"original",iframeFix:!1,opacity:!1,refreshPositions:!1,revert:!1,revertDuration:500,scope:"default",scroll:!0,scrollSensitivity:20,scrollSpeed:20,snap:!1,snapMode:"both",snapTolerance:20,stack:!1,zIndex:!1,drag:null,start:null,stop:null},_create:function(){"original"===this.options.helper&&this._setPositionRelative(),this.options.addClasses&&this._addClass("ui-draggable"),this._setHandleClassName(),this._mouseInit()},_setOption:function(t,e){this._super(t,e),"handle"===t&&(this._removeHandleClassName(),this._setHandleClassName())},_destroy:function(){if((this.helper||this.element).is(".ui-draggable-dragging"))return void(this.destroyOnClear=!0);this._removeHandleClassName(),this._mouseDestroy()},_mouseCapture:function(e){var i=this.options;return!(this.helper||i.disabled||t(e.target).closest(".ui-resizable-handle").length>0)&&(this.handle=this._getHandle(e),!!this.handle&&(this._blurActiveElement(e),this._blockFrames(!0===i.iframeFix?"iframe":i.iframeFix),!0))},_blockFrames:function(e){this.iframeBlocks=this.document.find(e).map(function(){var e=t(this);return t("<div>").css("position","absolute").appendTo(e.parent()).outerWidth(e.outerWidth()).outerHeight(e.outerHeight()).offset(e.offset())[0]})},_unblockFrames:function(){this.iframeBlocks&&(this.iframeBlocks.remove(),delete this.iframeBlocks)},_blurActiveElement:function(e){var i=t.ui.safeActiveElement(this.document[0]);t(e.target).closest(i).length||t.ui.safeBlur(i)},_mouseStart:function(e){var i=this.options;return this.helper=this._createHelper(e),this._addClass(this.helper,"ui-draggable-dragging"),this._cacheHelperProportions(),t.ui.ddmanager&&(t.ui.ddmanager.current=this),this._cacheMargins(),this.cssPosition=this.helper.css("position"),this.scrollParent=this.helper.scrollParent(!0),this.offsetParent=this.helper.offsetParent(),this.hasFixedAncestor=this.helper.parents().filter(function(){return"fixed"===t(this).css("position")}).length>0,this.positionAbs=this.element.offset(),this._refreshOffsets(e),this.originalPosition=this.position=this._generatePosition(e,!1),this.originalPageX=e.pageX,this.originalPageY=e.pageY,i.cursorAt&&this._adjustOffsetFromHelper(i.cursorAt),this._setContainment(),!1===this._trigger("start",e)?(this._clear(),!1):(this._cacheHelperProportions(),t.ui.ddmanager&&!i.dropBehaviour&&t.ui.ddmanager.prepareOffsets(this,e),this._mouseDrag(e,!0),t.ui.ddmanager&&t.ui.ddmanager.dragStart(this,e),!0)},_refreshOffsets:function(t){this.offset={top:this.positionAbs.top-this.margins.top,left:this.positionAbs.left-this.margins.left,scroll:!1,parent:this._getParentOffset(),relative:this._getRelativeOffset()},this.offset.click={left:t.pageX-this.offset.left,top:t.pageY-this.offset.top}},_mouseDrag:function(e,i){if(this.hasFixedAncestor&&(this.offset.parent=this._getParentOffset()),this.position=this._generatePosition(e,!0),this.positionAbs=this._convertPositionTo("absolute"),!i){var n=this._uiHash();if(!1===this._trigger("drag",e,n))return this._mouseUp(new t.Event("mouseup",e)),!1;this.position=n.position}return this.helper[0].style.left=this.position.left+"px",this.helper[0].style.top=this.position.top+"px",t.ui.ddmanager&&t.ui.ddmanager.drag(this,e),!1},_mouseStop:function(e){var i=this,n=!1;return t.ui.ddmanager&&!this.options.dropBehaviour&&(n=t.ui.ddmanager.drop(this,e)),this.dropped&&(n=this.dropped,this.dropped=!1),"invalid"===this.options.revert&&!n||"valid"===this.options.revert&&n||!0===this.options.revert||t.isFunction(this.options.revert)&&this.options.revert.call(this.element,n)?t(this.helper).animate(this.originalPosition,parseInt(this.options.revertDuration,10),function(){!1!==i._trigger("stop",e)&&i._clear()}):!1!==this._trigger("stop",e)&&this._clear(),!1},_mouseUp:function(e){return this._unblockFrames(),t.ui.ddmanager&&t.ui.ddmanager.dragStop(this,e),this.handleElement.is(e.target)&&this.element.trigger("focus"),t.ui.mouse.prototype._mouseUp.call(this,e)},cancel:function(){return this.helper.is(".ui-draggable-dragging")?this._mouseUp(new t.Event("mouseup",{target:this.element[0]})):this._clear(),this},_getHandle:function(e){return!this.options.handle||!!t(e.target).closest(this.element.find(this.options.handle)).length},_setHandleClassName:function(){this.handleElement=this.options.handle?this.element.find(this.options.handle):this.element,this._addClass(this.handleElement,"ui-draggable-handle")},_removeHandleClassName:function(){this._removeClass(this.handleElement,"ui-draggable-handle")},_createHelper:function(e){var i=this.options,n=t.isFunction(i.helper),s=n?t(i.helper.apply(this.element[0],[e])):"clone"===i.helper?this.element.clone().removeAttr("id"):this.element;return s.parents("body").length||s.appendTo("parent"===i.appendTo?this.element[0].parentNode:i.appendTo),n&&s[0]===this.element[0]&&this._setPositionRelative(),s[0]===this.element[0]||/(fixed|absolute)/.test(s.css("position"))||s.css("position","absolute"),s},_setPositionRelative:function(){/^(?:r|a|f)/.test(this.element.css("position"))||(this.element[0].style.position="relative")},_adjustOffsetFromHelper:function(e){"string"==typeof e&&(e=e.split(" ")),t.isArray(e)&&(e={left:+e[0],top:+e[1]||0}),"left"in e&&(this.offset.click.left=e.left+this.margins.left),"right"in e&&(this.offset.click.left=this.helperProportions.width-e.right+this.margins.left),"top"in e&&(this.offset.click.top=e.top+this.margins.top),"bottom"in e&&(this.offset.click.top=this.helperProportions.height-e.bottom+this.margins.top)},_isRootNode:function(t){return/(html|body)/i.test(t.tagName)||t===this.document[0]},_getParentOffset:function(){var e=this.offsetParent.offset(),i=this.document[0];return"absolute"===this.cssPosition&&this.scrollParent[0]!==i&&t.contains(this.scrollParent[0],this.offsetParent[0])&&(e.left+=this.scrollParent.scrollLeft(),e.top+=this.scrollParent.scrollTop()),this._isRootNode(this.offsetParent[0])&&(e={top:0,left:0}),{top:e.top+(parseInt(this.offsetParent.css("borderTopWidth"),10)||0),left:e.left+(parseInt(this.offsetParent.css("borderLeftWidth"),10)||0)}},_getRelativeOffset:function(){if("relative"!==this.cssPosition)return{top:0,left:0};var t=this.element.position(),e=this._isRootNode(this.scrollParent[0]);return{top:t.top-(parseInt(this.helper.css("top"),10)||0)+(e?0:this.scrollParent.scrollTop()),left:t.left-(parseInt(this.helper.css("left"),10)||0)+(e?0:this.scrollParent.scrollLeft())}},_cacheMargins:function(){this.margins={left:parseInt(this.element.css("marginLeft"),10)||0,top:parseInt(this.element.css("marginTop"),10)||0,right:parseInt(this.element.css("marginRight"),10)||0,bottom:parseInt(this.element.css("marginBottom"),10)||0}},_cacheHelperProportions:function(){this.helperProportions={width:this.helper.outerWidth(),height:this.helper.outerHeight()}},_setContainment:function(){var e,i,n,s=this.options,o=this.document[0];return this.relativeContainer=null,s.containment?"window"===s.containment?void(this.containment=[t(window).scrollLeft()-this.offset.relative.left-this.offset.parent.left,t(window).scrollTop()-this.offset.relative.top-this.offset.parent.top,t(window).scrollLeft()+t(window).width()-this.helperProportions.width-this.margins.left,t(window).scrollTop()+(t(window).height()||o.body.parentNode.scrollHeight)-this.helperProportions.height-this.margins.top]):"document"===s.containment?void(this.containment=[0,0,t(o).width()-this.helperProportions.width-this.margins.left,(t(o).height()||o.body.parentNode.scrollHeight)-this.helperProportions.height-this.margins.top]):s.containment.constructor===Array?void(this.containment=s.containment):("parent"===s.containment&&(s.containment=this.helper[0].parentNode),i=t(s.containment),void((n=i[0])&&(e=/(scroll|auto)/.test(i.css("overflow")),this.containment=[(parseInt(i.css("borderLeftWidth"),10)||0)+(parseInt(i.css("paddingLeft"),10)||0),(parseInt(i.css("borderTopWidth"),10)||0)+(parseInt(i.css("paddingTop"),10)||0),(e?Math.max(n.scrollWidth,n.offsetWidth):n.offsetWidth)-(parseInt(i.css("borderRightWidth"),10)||0)-(parseInt(i.css("paddingRight"),10)||0)-this.helperProportions.width-this.margins.left-this.margins.right,(e?Math.max(n.scrollHeight,n.offsetHeight):n.offsetHeight)-(parseInt(i.css("borderBottomWidth"),10)||0)-(parseInt(i.css("paddingBottom"),10)||0)-this.helperProportions.height-this.margins.top-this.margins.bottom],this.relativeContainer=i))):void(this.containment=null)},_convertPositionTo:function(t,e){e||(e=this.position);var i="absolute"===t?1:-1,n=this._isRootNode(this.scrollParent[0]);return{top:e.top+this.offset.relative.top*i+this.offset.parent.top*i-("fixed"===this.cssPosition?-this.offset.scroll.top:n?0:this.offset.scroll.top)*i,left:e.left+this.offset.relative.left*i+this.offset.parent.left*i-("fixed"===this.cssPosition?-this.offset.scroll.left:n?0:this.offset.scroll.left)*i}},_generatePosition:function(t,e){var i,n,s,o,r=this.options,a=this._isRootNode(this.scrollParent[0]),l=t.pageX,h=t.pageY;return a&&this.offset.scroll||(this.offset.scroll={top:this.scrollParent.scrollTop(),left:this.scrollParent.scrollLeft()}),e&&(this.containment&&(this.relativeContainer?(n=this.relativeContainer.offset(),i=[this.containment[0]+n.left,this.containment[1]+n.top,this.containment[2]+n.left,this.containment[3]+n.top]):i=this.containment,t.pageX-this.offset.click.left<i[0]&&(l=i[0]+this.offset.click.left),t.pageY-this.offset.click.top<i[1]&&(h=i[1]+this.offset.click.top),t.pageX-this.offset.click.left>i[2]&&(l=i[2]+this.offset.click.left),t.pageY-this.offset.click.top>i[3]&&(h=i[3]+this.offset.click.top)),r.grid&&(s=r.grid[1]?this.originalPageY+Math.round((h-this.originalPageY)/r.grid[1])*r.grid[1]:this.originalPageY,h=i?s-this.offset.click.top>=i[1]||s-this.offset.click.top>i[3]?s:s-this.offset.click.top>=i[1]?s-r.grid[1]:s+r.grid[1]:s,o=r.grid[0]?this.originalPageX+Math.round((l-this.originalPageX)/r.grid[0])*r.grid[0]:this.originalPageX,l=i?o-this.offset.click.left>=i[0]||o-this.offset.click.left>i[2]?o:o-this.offset.click.left>=i[0]?o-r.grid[0]:o+r.grid[0]:o),"y"===r.axis&&(l=this.originalPageX),"x"===r.axis&&(h=this.originalPageY)),{top:h-this.offset.click.top-this.offset.relative.top-this.offset.parent.top+("fixed"===this.cssPosition?-this.offset.scroll.top:a?0:this.offset.scroll.top),left:l-this.offset.click.left-this.offset.relative.left-this.offset.parent.left+("fixed"===this.cssPosition?-this.offset.scroll.left:a?0:this.offset.scroll.left)}},_clear:function(){this._removeClass(this.helper,"ui-draggable-dragging"),this.helper[0]===this.element[0]||this.cancelHelperRemoval||this.helper.remove(),this.helper=null,this.cancelHelperRemoval=!1,this.destroyOnClear&&this.destroy()},_trigger:function(e,i,n){return n=n||this._uiHash(),t.ui.plugin.call(this,e,[i,n,this],!0),/^(drag|start|stop)/.test(e)&&(this.positionAbs=this._convertPositionTo("absolute"),n.offset=this.positionAbs),t.Widget.prototype._trigger.call(this,e,i,n)},plugins:{},_uiHash:function(){return{helper:this.helper,position:this.position,originalPosition:this.originalPosition,offset:this.positionAbs}}}),t.ui.plugin.add("draggable","connectToSortable",{start:function(e,i,n){var s=t.extend({},i,{item:n.element});n.sortables=[],t(n.options.connectToSortable).each(function(){var i=t(this).sortable("instance");i&&!i.options.disabled&&(n.sortables.push(i),i.refreshPositions(),i._trigger("activate",e,s))})},stop:function(e,i,n){var s=t.extend({},i,{item:n.element});n.cancelHelperRemoval=!1,t.each(n.sortables,function(){var t=this;t.isOver?(t.isOver=0,n.cancelHelperRemoval=!0,t.cancelHelperRemoval=!1,t._storedCSS={position:t.placeholder.css("position"),top:t.placeholder.css("top"),left:t.placeholder.css("left")},t._mouseStop(e),t.options.helper=t.options._helper):(t.cancelHelperRemoval=!0,t._trigger("deactivate",e,s))})},drag:function(e,i,n){t.each(n.sortables,function(){var s=!1,o=this;o.positionAbs=n.positionAbs,o.helperProportions=n.helperProportions,o.offset.click=n.offset.click,o._intersectsWith(o.containerCache)&&(s=!0,t.each(n.sortables,function(){return this.positionAbs=n.positionAbs,this.helperProportions=n.helperProportions,this.offset.click=n.offset.click,this!==o&&this._intersectsWith(this.containerCache)&&t.contains(o.element[0],this.element[0])&&(s=!1),s})),s?(o.isOver||(o.isOver=1,n._parent=i.helper.parent(),o.currentItem=i.helper.appendTo(o.element).data("ui-sortable-item",!0),o.options._helper=o.options.helper,o.options.helper=function(){return i.helper[0]},e.target=o.currentItem[0],o._mouseCapture(e,!0),o._mouseStart(e,!0,!0),o.offset.click.top=n.offset.click.top,o.offset.click.left=n.offset.click.left,o.offset.parent.left-=n.offset.parent.left-o.offset.parent.left,o.offset.parent.top-=n.offset.parent.top-o.offset.parent.top,n._trigger("toSortable",e),n.dropped=o.element,t.each(n.sortables,function(){this.refreshPositions()}),n.currentItem=n.element,o.fromOutside=n),o.currentItem&&(o._mouseDrag(e),i.position=o.position)):o.isOver&&(o.isOver=0,o.cancelHelperRemoval=!0,o.options._revert=o.options.revert,o.options.revert=!1,
o._trigger("out",e,o._uiHash(o)),o._mouseStop(e,!0),o.options.revert=o.options._revert,o.options.helper=o.options._helper,o.placeholder&&o.placeholder.remove(),i.helper.appendTo(n._parent),n._refreshOffsets(e),i.position=n._generatePosition(e,!0),n._trigger("fromSortable",e),n.dropped=!1,t.each(n.sortables,function(){this.refreshPositions()}))})}}),t.ui.plugin.add("draggable","cursor",{start:function(e,i,n){var s=t("body"),o=n.options;s.css("cursor")&&(o._cursor=s.css("cursor")),s.css("cursor",o.cursor)},stop:function(e,i,n){var s=n.options;s._cursor&&t("body").css("cursor",s._cursor)}}),t.ui.plugin.add("draggable","opacity",{start:function(e,i,n){var s=t(i.helper),o=n.options;s.css("opacity")&&(o._opacity=s.css("opacity")),s.css("opacity",o.opacity)},stop:function(e,i,n){var s=n.options;s._opacity&&t(i.helper).css("opacity",s._opacity)}}),t.ui.plugin.add("draggable","scroll",{start:function(t,e,i){i.scrollParentNotHidden||(i.scrollParentNotHidden=i.helper.scrollParent(!1)),i.scrollParentNotHidden[0]!==i.document[0]&&"HTML"!==i.scrollParentNotHidden[0].tagName&&(i.overflowOffset=i.scrollParentNotHidden.offset())},drag:function(e,i,n){var s=n.options,o=!1,r=n.scrollParentNotHidden[0],a=n.document[0];r!==a&&"HTML"!==r.tagName?(s.axis&&"x"===s.axis||(n.overflowOffset.top+r.offsetHeight-e.pageY<s.scrollSensitivity?r.scrollTop=o=r.scrollTop+s.scrollSpeed:e.pageY-n.overflowOffset.top<s.scrollSensitivity&&(r.scrollTop=o=r.scrollTop-s.scrollSpeed)),s.axis&&"y"===s.axis||(n.overflowOffset.left+r.offsetWidth-e.pageX<s.scrollSensitivity?r.scrollLeft=o=r.scrollLeft+s.scrollSpeed:e.pageX-n.overflowOffset.left<s.scrollSensitivity&&(r.scrollLeft=o=r.scrollLeft-s.scrollSpeed))):(s.axis&&"x"===s.axis||(e.pageY-t(a).scrollTop()<s.scrollSensitivity?o=t(a).scrollTop(t(a).scrollTop()-s.scrollSpeed):t(window).height()-(e.pageY-t(a).scrollTop())<s.scrollSensitivity&&(o=t(a).scrollTop(t(a).scrollTop()+s.scrollSpeed))),s.axis&&"y"===s.axis||(e.pageX-t(a).scrollLeft()<s.scrollSensitivity?o=t(a).scrollLeft(t(a).scrollLeft()-s.scrollSpeed):t(window).width()-(e.pageX-t(a).scrollLeft())<s.scrollSensitivity&&(o=t(a).scrollLeft(t(a).scrollLeft()+s.scrollSpeed)))),!1!==o&&t.ui.ddmanager&&!s.dropBehaviour&&t.ui.ddmanager.prepareOffsets(n,e)}}),t.ui.plugin.add("draggable","snap",{start:function(e,i,n){var s=n.options;n.snapElements=[],t(s.snap.constructor!==String?s.snap.items||":data(ui-draggable)":s.snap).each(function(){var e=t(this),i=e.offset();this!==n.element[0]&&n.snapElements.push({item:this,width:e.outerWidth(),height:e.outerHeight(),top:i.top,left:i.left})})},drag:function(e,i,n){var s,o,r,a,l,h,c,d,u,p,f=n.options,m=f.snapTolerance,g=i.offset.left,v=g+n.helperProportions.width,b=i.offset.top,_=b+n.helperProportions.height;for(u=n.snapElements.length-1;u>=0;u--)l=n.snapElements[u].left-n.margins.left,h=l+n.snapElements[u].width,c=n.snapElements[u].top-n.margins.top,d=c+n.snapElements[u].height,v<l-m||g>h+m||_<c-m||b>d+m||!t.contains(n.snapElements[u].item.ownerDocument,n.snapElements[u].item)?(n.snapElements[u].snapping&&n.options.snap.release&&n.options.snap.release.call(n.element,e,t.extend(n._uiHash(),{snapItem:n.snapElements[u].item})),n.snapElements[u].snapping=!1):("inner"!==f.snapMode&&(s=Math.abs(c-_)<=m,o=Math.abs(d-b)<=m,r=Math.abs(l-v)<=m,a=Math.abs(h-g)<=m,s&&(i.position.top=n._convertPositionTo("relative",{top:c-n.helperProportions.height,left:0}).top),o&&(i.position.top=n._convertPositionTo("relative",{top:d,left:0}).top),r&&(i.position.left=n._convertPositionTo("relative",{top:0,left:l-n.helperProportions.width}).left),a&&(i.position.left=n._convertPositionTo("relative",{top:0,left:h}).left)),p=s||o||r||a,"outer"!==f.snapMode&&(s=Math.abs(c-b)<=m,o=Math.abs(d-_)<=m,r=Math.abs(l-g)<=m,a=Math.abs(h-v)<=m,s&&(i.position.top=n._convertPositionTo("relative",{top:c,left:0}).top),o&&(i.position.top=n._convertPositionTo("relative",{top:d-n.helperProportions.height,left:0}).top),r&&(i.position.left=n._convertPositionTo("relative",{top:0,left:l}).left),a&&(i.position.left=n._convertPositionTo("relative",{top:0,left:h-n.helperProportions.width}).left)),!n.snapElements[u].snapping&&(s||o||r||a||p)&&n.options.snap.snap&&n.options.snap.snap.call(n.element,e,t.extend(n._uiHash(),{snapItem:n.snapElements[u].item})),n.snapElements[u].snapping=s||o||r||a||p)}}),t.ui.plugin.add("draggable","stack",{start:function(e,i,n){var s,o=n.options,r=t.makeArray(t(o.stack)).sort(function(e,i){return(parseInt(t(e).css("zIndex"),10)||0)-(parseInt(t(i).css("zIndex"),10)||0)});r.length&&(s=parseInt(t(r[0]).css("zIndex"),10)||0,t(r).each(function(e){t(this).css("zIndex",s+e)}),this.css("zIndex",s+r.length))}}),t.ui.plugin.add("draggable","zIndex",{start:function(e,i,n){var s=t(i.helper),o=n.options;s.css("zIndex")&&(o._zIndex=s.css("zIndex")),s.css("zIndex",o.zIndex)},stop:function(e,i,n){var s=n.options;s._zIndex&&t(i.helper).css("zIndex",s._zIndex)}}),t.ui.draggable}),define("common/component/dialog/Dialog",["require","underscore","jquery","common/component/base/Dimmer","common/component/panel/Panel","common/component/base/OptionContainer","common/component/panel/trait/resizablePanelTrait","text!./template/dialogTemplate.htm","text!./template/dialogButtonTemplate.htm","jquery-ui/widgets/draggable"],function(t){"use strict";var e=t("underscore"),i=t("jquery"),n=t("common/component/base/Dimmer"),s=t("common/component/panel/Panel"),o=t("common/component/base/OptionContainer"),r=t("common/component/panel/trait/resizablePanelTrait"),a=t("text!./template/dialogTemplate.htm"),l=t("text!./template/dialogButtonTemplate.htm");t("jquery-ui/widgets/draggable");var h=s.extend({defaultTemplate:a,events:{mousedown:"_focus",touchstart:"_focus",keydown:"_onKeyDown",keyup:"_onKeyboardEvent",keypress:"_onKeyboardEvent",resize:"_onDialogResize"},constructor:function(t){t||(t={}),t.traits||(t.traits=[]),this.resizable=t.resizable||!1,this.modal=t.modal||!1,this.additionalBodyCssClasses=t.additionalBodyCssClasses||"",this.resizable&&-1===e.indexOf(t.traits,r)&&t.traits.push(r),s.call(this,t)},initialize:function(t){this.dialogOptions=e.extend({},t),this.collapsed=!this.collapsed,this.resetSizeOnOpen=!!e.isUndefined(t.resetSizeOnOpen)||t.resetSizeOnOpen,e.isEmpty(t.buttons)||(this.buttons=new o({options:t.buttons,el:this.$(".jr-mDialog-footer")[0]||this.$(".footer")[0],contextName:"button",optionTemplate:t.dialogButtonTemplate||l})),s.prototype.initialize.apply(this,arguments),this.buttons&&this.listenTo(this.buttons,e.map(t.buttons,function(t){return"button:"+t.action}).join(" "),e.bind(function(t,e){this.trigger("button:"+e.get("action"),t,e)},this)),this.render()},getTemplateArguments:function(){var t=s.prototype.getTemplateArguments.apply(this,arguments);return e.extend(t,{additionalBodyCssClasses:this.additionalBodyCssClasses})},setElement:function(t){var e=s.prototype.setElement.apply(this,arguments);return this.buttons&&this.buttons.setElement(this.$(".jr-mDialog-footer")[0]||this.$(".footer")[0]),e},setTitle:function(t){this.$(".jr-mDialog-header > .jr-mDialog-header-title").text(t)},render:function(){return this.$el.hide(),this.modal&&(this.dimmer=new n({zIndex:900})),i("body").append(this.$el),this.$el.draggable({handle:".mover",addClasses:!1,containment:"document"}),this},open:function(t){return this.isVisible()?this:(this.resetSizeOnOpen&&(this.$el.css({height:"",width:""}),this.$el.find("textarea").css({height:"",width:""})),s.prototype.open.apply(this,arguments),this.modal&&this.dimmer.css({zIndex:++h.highestIndex}).show(),this._setMinSize(),this._position(t),this._increaseZIndex(),this.buttons&&this.buttons.$(".over").removeClass("over"),this.$el.show(),this.$el.find("input").first().focus(),this._onDialogResize(),this.trigger("dialog:visible"),this)},close:function(){if(this.isVisible())return this.$el.css({zIndex:--h.highestIndex}),this.modal&&this.dimmer.css({zIndex:--h.highestIndex}).hide(),this.$el.hide(),s.prototype.close.apply(this,arguments),this},addCssClasses:function(t){this.$el.addClass(t)},toggleCollapsedState:function(){return this},enableButton:function(t){this.buttons.enable(t)},disableButton:function(t){this.buttons.disable(t)},isVisible:function(){return this.$el.is(":visible")},_setMinSize:function(){this.dialogOptions.minWidth&&this.$el.css({minWidth:this.dialogOptions.minWidth}),this.dialogOptions.minHeight&&this.$el.css({minHeight:this.dialogOptions.minHeight}),this.dialogOptions.setMinSizeAsSize&&this.$el.css({width:this.dialogOptions.minWidth,height:this.dialogOptions.minHeight})},_position:function(t){var e,n,s=i("body"),o=this.$el.height(),r=this.$el.width();if(t&&void 0!==t.top&&void 0!==t.left){e=t.top,n=t.left;var a=s.height(),l=s.width(),h=a-t.top,c=l-t.left;h<o&&(e=t.top-o,e=e<0?a/2-o/2:e),c<r&&(n=t.left-r,n=n<0?l/2-r/2:n)}else e=i(window).height()/2-o/2,n=i(window).width()/2-r/2;return this.$el.css({top:Math.max(0,e),left:Math.max(0,n),position:"absolute"}),this},_focus:function(){!this.modal&&this._increaseZIndex()},_increaseZIndex:function(){this.$el.css({zIndex:++h.highestIndex})},_onKeyDown:function(t){this.buttons._onKeyDown(t),t.stopPropagation()},_onKeyboardEvent:function(t){t.stopPropagation()},_onDialogResize:function(){},remove:function(){this.buttons&&this.buttons.remove(),this.dimmer&&this.dimmer.remove();try{this.$el.draggable("destroy")}catch(t){}s.prototype.remove.call(this)}},{highestIndex:5e3,resetHighestIndex:function(t){h.highestIndex=t||5e3}});return h}),define("text!common/component/dialog/template/alertDialogTemplate.htm",[],function(){return"<p class='alertText'>\n\n    <js-templateNonce></js-templateNonce>\n    {{- message }}\n</p>"}),define("common/component/dialog/AlertDialog",["require","underscore","./Dialog","common/util/xssUtil","text!./template/alertDialogTemplate.htm","bundle!js-sdk/CommonBundle"],function(t){"use strict";var e=t("underscore"),i=t("./Dialog"),n=t("common/util/xssUtil"),s=t("text!./template/alertDialogTemplate.htm"),o=t("bundle!js-sdk/CommonBundle");return i.extend({contentTemplate:e.template(s),constructor:function(t){t||(t={}),i.prototype.constructor.call(this,{modal:!1!==t.modal,message:t.message,additionalCssClasses:"alertDialog "+(t.additionalCssClasses||""),title:t.title||o["dialog.exception.title"],buttons:[{label:o["button.close"],action:"close",primary:!0}]},t)},initialize:function(t){i.prototype.initialize.apply(this,arguments),this.on("button:close",this.close),this.setMessage(t.message)},setMessage:function(t){t=n.softHtmlEscape(t,{whiteList:["br"]}),this.content=this.contentTemplate({message:t});var e=this.renderContent();this.$contentContainer.html(e)}})}),define("text!common/component/notification/template/notificationTemplate.htm",[],function(){return'<div class="notificationAlert">\n\n    <js-templateNonce></js-templateNonce>\n    <p class="notificationMessage">\n        <span>{{- message }}</span>\n        <span class="close">| <a href="#">{{- i18n[\'notification.button.close\'] }}</a></span>\n    </p>\n</div>'}),define("common/component/notification/Notification",["require","underscore","jquery","backbone","bundle!js-sdk/CommonBundle","text!./template/notificationTemplate.htm","css!notifications"],function(t){"use strict";var e,i,n=t("underscore"),s=t("jquery"),o=t("backbone"),r=t("bundle!js-sdk/CommonBundle"),a=t("text!./template/notificationTemplate.htm");t("css!notifications");var l={SUCCESS:"success",WARNING:"warning"},h={};return h[l.WARNING]=l.WARNING,i=o.View.extend({template:n.template(a),events:{"click .close a":"hide"},el:function(){return this.template({message:this.message,i18n:r})},initialize:function(){this.render()},render:function(){return s("body").append(this.$el),this.$el.hide(),this.$messageContainer=this.$(".notificationMessage > span:first-child"),this},show:function(t){return t=n.extend({type:l.WARNING,delay:2e3},t),this.$messageContainer.text(t.message),this.$messageContainer.removeClass().attr({class:h[t.type]}),this.$el.slideDown(),t.delay&&n.delay(n.bind(this.hide,this),t.delay),this},hide:function(){return arguments.length&&arguments[0].preventDefault&&arguments[0].preventDefault(),this.$el.slideUp(),this},remove:function(){o.View.prototype.remove.apply(this,arguments)}},{show:function(){return e||(e=new i),e.show.apply(e,arguments)},hide:function(){return e||(e=new i),e.hide.apply(e,arguments)}})}),define("text!common/component/dialog/template/confirmDialogTemplate.htm",[],function(){return"<p class='confirmationText'>\n\n    <js-templateNonce></js-templateNonce>\n    {{ print(_.xssSoftEscape(text)) }}\n</p>"}),define("common/component/dialog/ConfirmationDialog",["require","underscore","./Dialog","text!./template/confirmDialogTemplate.htm","bundle!js-sdk/CommonBundle"],function(t){"use strict";var e=t("underscore"),i=t("./Dialog"),n=t("text!./template/confirmDialogTemplate.htm"),s=t("bundle!js-sdk/CommonBundle");return i.extend({constructor:function(t){t||(t={}),this.confirmDialogTemplate=e.template(n),i.prototype.constructor.call(this,{modal:!0,additionalCssClasses:t.additionalCssClasses||"confirmationDialog",title:t.title||s["dialog.confirm.title"],content:this.confirmDialogTemplate({text:t.text}),buttons:[{label:t.yesLabel||s["button.yes"],action:"yes",primary:!0},{label:t.noLabel||s["button.no"],action:"no",primary:!1}]})},initialize:function(){i.prototype.initialize.apply(this,arguments),this.on("button:yes",this.close),this.on("button:no",this.close)},setContent:function(t){i.prototype.setContent.call(this,this.confirmDialogTemplate({text:t}))}})}),define("administer/resetSettings/factory/confirmationDialogFactory",["require","bundle!EditSettingsBundle","serverSettingsCommon/enum/confirmDialogTypesEnum","common/component/dialog/ConfirmationDialog"],function(t){var e=t("bundle!EditSettingsBundle"),i=t("serverSettingsCommon/enum/confirmDialogTypesEnum"),n=t("common/component/dialog/ConfirmationDialog"),s={},o={title:e["editSettings.confirm.dialog.title"]};return s[i.DELETE_CONFIRM]=o,s[i.CANCEL_CONFIRM]={title:e["editSettings.confirm.dialog.title"],text:e["editSettings.confirm.cancel.dialog.text.custom"]},function(t){return s[t]&&new n(s[t])}}),define("administer/resetSettings/view/ResetSettingsCollectionView",["require","jquery","underscore","backbone","bundle!EditSettingsBundle","common/component/baseTable/BaseTable","text!../templates/collectionViewTemplate.htm","common/component/base/OptionContainer","common/component/dialog/AlertDialog","common/component/notification/Notification","serverSettingsCommon/enum/confirmDialogTypesEnum","administer/resetSettings/factory/confirmationDialogFactory","css!attributes.css"],function(t){var e=t("jquery"),i=t("underscore"),n=t("backbone"),s=t("bundle!EditSettingsBundle"),o=t("common/component/baseTable/BaseTable"),r=t("text!../templates/collectionViewTemplate.htm"),a=(t("common/component/base/OptionContainer"),t("common/component/dialog/AlertDialog")),l=t("common/component/notification/Notification"),h=t("serverSettingsCommon/enum/confirmDialogTypesEnum"),c=t("administer/resetSettings/factory/confirmationDialogFactory");return t("css!attributes.css"),o.extend({template:i.template(r),templateHelpers:function(){return{i18n:s}},childEvents:{"open:confirm":"_openConfirm"},initialize:function(t){o.prototype.initialize.apply(this,arguments),this.notification=new l,this.alertDialog=new a,this.model=new n.Model,this.changedViews=[],!i.isEmpty(t.buttons)&&t.buttonsContainer&&this._initButtons(t),this._initConfirmationDialogs(),this.tooltip&&this._initTooltipEvents(),this._initEvents()},fetchData:function(){return this.collection.fetch({reset:!0,headers:{Accept:"application/attributes.collection.hal+json"}})},saveChildren:function(){var t=this,e=[];i.each(t.changedViews,function(t){e.push(t.model)},t),e.length&&t.collection.save(e).done(i.bind(t._successAjaxCallback,t)).fail(i.bind(t._errorAjaxCallback,t))},revertChanges:function(){for(var t=this.changedViews.length,e=t-1;e>=0;e--)this._revertViewRemoval(this.changedViews[e]);this._resetChangedList()},containsUnsavedItems:function(){return!!this.changedViews.length},remove:function(){e(window).off("beforeunload",this._onPageLeave),this.confirmationDialog&&this.confirmationDialog.remove(),this.notification&&this.notification.remove(),this.alertDialog&&this.alertDialog.remove(),o.prototype.remove.apply(this,arguments)},_initEvents:function(){e(window).on("beforeunload",i.bind(this._onPageLeave,this))},_initTooltipEvents:function(){this.listenTo(this,"childview:mouseover",this._onChildViewMouseOver),this.listenTo(this,"childview:mouseout",this._onChildViewMouseOut)},_initConfirmationDialogs:function(){this.confirmationDialogs={},i.each(h,function(t){this.confirmationDialogs[t]=c(t)},this),this.listenTo(this.confirmationDialogs[h.DELETE_CONFIRM],"button:yes",this._onDeleteConfirm),this.listenTo(this.confirmationDialogs[h.CANCEL_CONFIRM],"button:yes",this.revertChanges),this._initPermissionConfirmEvents&&this._initPermissionConfirmEvents()},_successAjaxCallback:function(t){this.notification.show({message:s["editSettings.notification.message.saved"],type:"success"}),this._resetChangedList()},_errorAjaxCallback:function(t){var e;switch(t.status){case 401:e=s["editSettings.error.message.not.authenticated"];break;default:e=s["editSettings.error.message.unknown.error"]}this.alertDialog.setMessage(e),this.alertDialog.open()},_findChildrenByModel:function(t){return(t=i.isString(t)?this._findModelsWhere({name:t}):t)&&this.children.findByModel(t)},_resetChangedList:function(){this.changedViews.length=0,this.toggleButtons()},_revertViewRemoval:function(t){this._deleteViewFromChangedList(t),this.collection.add(t.model,{at:t.indexAt})},_openConfirm:function(t,e){this.model.set("changedChildView",t);var n=this.confirmationDialogs[e],o=e!==h.CANCEL_CONFIRM||this.containsUnsavedItems();e===h.DELETE_CONFIRM&&n.setContent(i.template(s["editSettings.confirm.delete.dialog.text"],{name:t.model.get("name")})),o&&n.open()},_saveChildViewToChangedList:function(t,e){var n=i.indexOf(this.changedViews,t);-1!==n?!e&&this._deleteViewFromChangedList(t,n):e&&this.changedViews.push(t),this.toggleButtons()},_deleteViewFromChangedList:function(t,e){-1!==(e=e||i.indexOf(this.changedViews,t))&&this.changedViews.splice(e,1)},_removeModel:function(t){this.collection.remove(t)},_onPageLeave:function(t){if(this.containsUnsavedItems())return(t||window.event).returnValue=s["editSettings.dialog.unsaved.changes"],s["editSettings.dialog.unsaved.changes"]},_onDeleteConfirm:function(){var t=this.model.get("changedChildView"),e=t.model;t.indexAt=this.collection.indexOf(e),this._saveChildViewToChangedList(t,!0),this._removeModel(e)},_onChildViewMouseOver:function(t,n,s){var o,r=e(s.target).closest(".table-column");r.hasClass("name")&&(o="name"),r.hasClass("value")&&(o="value"),this.tooltip.show(i.pick(n.toJSON(),o))},_onChildViewMouseOut:function(t,e,i){this.tooltip.hide()}})}),define("common/view/mixin/epoxyCustomBindingHandlers",["require"],function(t){return{}}),define("common/view/mixin/epoxyCustomBindingFilters",["require"],function(t){return{}}),define("common/view/mixin/epoxyViewMixin",["require","backbone.epoxy","underscore","./epoxyCustomBindingHandlers","./epoxyCustomBindingFilters"],function(t){var e=t("backbone.epoxy"),i=t("underscore"),n=t("./epoxyCustomBindingHandlers"),s=t("./epoxyCustomBindingFilters");return{epoxifyView:function(){var t=this.remove;e.View.mixin(this),t&&(this.remove=t),this.bindingFilters&&(this.bindingFilters=i.extend({},s,this.bindingFilters)),this.bindingHandlers&&(this.bindingHandlers=i.extend({},n,this.bindingHandlers))},applyEpoxyBindings:function(){this.applyBindings&&this.applyBindings()},removeEpoxyBindings:function(){this.removeBindings&&this.removeBindings()}}}),define("common/component/baseTable/behaviors/TooltipRowBehavior",["require","backbone.marionette"],function(t){return t("backbone.marionette").Behavior.extend({events:{mouseover:"_onMouseOver",mouseout:"_onMouseOut"},_onMouseOver:function(t){this.view.trigger("mouseover",this.view.model,t)},_onMouseOut:function(t){this.view.trigger("mouseout",this.view.model,t)}})}),define("common/component/baseTable/childView/BaseRow",["require","underscore","backbone.marionette","common/view/mixin/epoxyViewMixin","common/component/baseTable/behaviors/TooltipRowBehavior"],function(t){var e=t("underscore"),i=t("backbone.marionette"),n=t("common/view/mixin/epoxyViewMixin"),s=t("common/component/baseTable/behaviors/TooltipRowBehavior"),o=i.ItemView.extend({behaviors:{Tooltip:{behaviorClass:s}},initialize:function(){this.epoxifyView()},render:function(){return i.ItemView.prototype.render.apply(this,arguments),this.applyEpoxyBindings(),this},remove:function(){this.removeEpoxyBindings(),i.ItemView.prototype.remove.apply(this,arguments)}});return e.extend(o.prototype,n),o}),define("text!administer/resetSettings/templates/itemViewTemplate.htm",[],function(){return'<div class="name table-column" data-tooltip="" data-tooltip-attrs="name, description">\n\n    <js-templateNonce></js-templateNonce>\n    <div class="item"><p data-bind="text:name"></p></div>\n</div>\n<div class="value table-column"\n     data-tooltip="" data-tooltip-attrs="value">\n    <div class="item">\n        <p data-bind="text:value"></p>\n    </div>\n</div>\n<div class="actions table-column">\n    <div class="item">\n        <div class="actionButtons">\n            <span>\n                <button name="deleteButton" class="button action simple delete"></button>\n            </span>\n        </div>\n    </div>\n</div>\n\n'}),define("serverSettingsCommon/behaviors/DeleteConfirmBehavior",["require","backbone.marionette","serverSettingsCommon/enum/confirmDialogTypesEnum"],function(t){var e=t("backbone.marionette"),i=t("serverSettingsCommon/enum/confirmDialogTypesEnum");return e.Behavior.extend({events:{"click .delete":"_onDeleteClick"},_onDeleteClick:function(t){this.view.trigger("open:confirm",i.DELETE_CONFIRM,this.view,this.view.model)}})}),define("administer/resetSettings/view/ResetSettingsItemView",["require","underscore","common/component/baseTable/childView/BaseRow","serverSettingsCommon/enum/confirmDialogTypesEnum","text!../templates/itemViewTemplate.htm","serverSettingsCommon/behaviors/DeleteConfirmBehavior"],function(t){var e=t("underscore"),i=t("common/component/baseTable/childView/BaseRow"),n=(t("serverSettingsCommon/enum/confirmDialogTypesEnum"),t("text!../templates/itemViewTemplate.htm")),s=t("serverSettingsCommon/behaviors/DeleteConfirmBehavior");return i.extend({tagName:"div",className:"table-row",template:e.template(n),behaviors:e.extend(i.prototype.behaviors,{DeleteConfirm:{behaviorClass:s}})})}),define("text!administer/resetSettings/templates/emptyCollectionViewTemplate.htm",[],function(){return'<div class="table-column name">\n\n    <js-templateNonce></js-templateNonce>\n</div>\n<div class="table-column value"></div>\n<div class="table-column actions"></div>\n'}),define("administer/resetSettings/view/ResetSettingsEmptyView",["require","underscore","backbone.marionette","text!../templates/emptyCollectionViewTemplate.htm"],function(t){var e=t("underscore"),i=t("backbone.marionette"),n=t("text!../templates/emptyCollectionViewTemplate.htm");return i.ItemView.extend({className:"table-row",template:e.template(n)})}),define("administer/resetSettings/collection/ResetSettingsCollection",["require","underscore","backbone","request","serverSettingsCommon/enum/serverSettingGroupsEnum"],function(t){var e=t("underscore"),i=t("backbone"),n=t("request"),s=t("serverSettingsCommon/enum/serverSettingGroupsEnum");return i.Collection.extend({initialize:function(t,e){this.urlPUTTemplate="rest_v2/attributes?_embedded=permission",this.urlGETTemplate=this.urlPUTTemplate+"&group="+s.CUSTOM_SERVER_SETTINGS},parse:function(t){return t&&t.attribute?t.attribute:[]},url:function(t){return"PUT"===t?this.urlPUTTemplate:this.urlGETTemplate},escapeLevelId:function(t){return encodeURIComponent(t).replace("'","%27")},save:function(t,e){var i=this._modelsToJSON(e);return n({url:this.url("PUT")+this._concatNames(t),type:"PUT",contentType:"application/hal+json",headers:{Accept:"application/hal+json"},data:JSON.stringify({attribute:i})})},_modelsToJSON:function(t){return e.map(t,function(t){return t.toJSON()})},_concatNames:function(t){t=e.isArray(t)?t:[t];var i="";return e.each(t,function(t){i+="&name="+this.escapeLevelId(t.get("name"))},this),i}})}),define("administer/resetSettings/model/ResetSettingsModel",["require","backbone.epoxy"],function(t){return t("backbone.epoxy").Model.extend({defaults:{id:void 0,name:void 0,value:"",description:""},initialize:function(){this.get("id")||this.setId()},url:function(){var t=encodeURIComponent(this.id).replace("'","%27");return t=t.replace("'","%27"),this.collection.url(this.isNew()?"":t)},setId:function(){var t=this.get("name");t!==this.get("id")&&this.set("id",t)}})}),define("text!administer/resetSettings/templates/tooltipTemplate.htm",[],function(){return"{{ if( !_.isUndefined(model.value) ) { }}\n    <p class='message label'>{{- i18n['editSettings.value'] + ':'}}</p>\n    <p class='message'>{{- model.value }}</p>\n{{ } else { }}\n    <p class='message label'>{{- i18n['editSettings.name'] + ':'}}</p>\n    <p class='message'>{{- model.name }}</p>\n{{ } }}\n\n    <js-templateNonce></js-templateNonce>"}),define("administer/resetSettings/resetSettingsMain",["require","!domReady","jquery","bundle!CommonBundle","bundle!EditSettingsBundle","administer.logging","administer.base","jrs.configs","serverSettingsCommon/view/traits/buttonsTrait","./view/ResetSettingsCollectionView","./view/ResetSettingsItemView","./view/ResetSettingsEmptyView","./collection/ResetSettingsCollection","./model/ResetSettingsModel","text!./templates/tooltipTemplate.htm"],function(t){"use strict";var e=t("!domReady"),i=t("jquery"),n=t("bundle!CommonBundle"),s=t("bundle!EditSettingsBundle"),o=t("administer.logging"),r=t("administer.base"),a=t("jrs.configs"),l=t("serverSettingsCommon/view/traits/buttonsTrait"),h=t("./view/ResetSettingsCollectionView").extend(l),c=t("./view/ResetSettingsItemView"),d=t("./view/ResetSettingsEmptyView"),u=t("./collection/ResetSettingsCollection"),p=t("./model/ResetSettingsModel"),f=t("text!./templates/tooltipTemplate.htm");e(function(){r.urlContext=a.urlContext,o.initialize();var t=new u([],{model:p}),e=new h({el:i(".resetSettings"),tooltip:{template:f,i18n:s},collection:t,childViewContainer:".tbody",childView:c,emptyView:d,buttons:[{label:n["button.save"],action:"save",primary:!0},{label:n["button.cancel"],action:"cancel",primary:!1}],buttonsContainer:".buttonsContainer"});e.fetchData().done(e.render)})});