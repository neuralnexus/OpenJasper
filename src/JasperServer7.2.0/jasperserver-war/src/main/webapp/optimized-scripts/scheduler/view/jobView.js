define(["require","underscore","backbone","components.dialogs","text!scheduler/template/list/oneJob.htm","text!scheduler/template/list/oneMasterJob.htm","bundle!all","jrs.configs","localizedMoment","common/util/xssUtil","common/component/dialog/ConfirmationDialog"],function(e){"use strict";var t=e("underscore"),o=e("backbone"),i=(e("components.dialogs"),e("text!scheduler/template/list/oneJob.htm")),n=e("text!scheduler/template/list/oneMasterJob.htm"),l=e("bundle!all"),s=e("jrs.configs"),a=(e("localizedMoment"),e("common/util/xssUtil")),r=e("common/component/dialog/ConfirmationDialog");return o.View.extend({tagName:"li",className:"jobs first leaf",events:{"click [name=editJob]":"edit","click [name=deleteJob]":"remove","change [name=enableJob]":"enable"},initialize:function(e){this.options=t.extend({},e);var o=this.options.masterViewMode?n:i;this.template=t.template(o),this.model.on("change",this.render,this)},render:function(){return this.$el.html(this.template({model:this.model.toJSON(),i18n:l,timeZoneOffsetFunction:function(e){return 60*getTZOffset(s.usersTimeZone,e)}})),this},edit:function(){this.trigger("editJobPressed",this.model.get("id"))},remove:function(){var e=this,t=l["report.scheduling.editing.job.confirm.delete"].replace("{name}",a.hardEscape(this.model.get("label"))).replace("{newline}","<br><br>"),o=new r({title:l["report.scheduling.editing.job.confirm.title"],text:t,additionalCssClasses:"schedulerJobRemoveDialog"});this.listenTo(o,"button:yes",function(){e.model.destroy()}),o.open()},enable:function(e){this.model.state(e.target.checked)}})});