define(["require","underscore"],function(t){"use strict";var r=t("underscore"),e=function(t){function r(t){return"."===t?t="\\.":" "===t&&(t="\\s"),t}this.DECIMAL_SEPARATOR=t?t.decimalSeparator||".":".",this.GROUPING_SEPARATOR=t?t.groupingSeparator||",":",",this.decimalSeparator=r(this.DECIMAL_SEPARATOR),this.groupingSeparator=r(this.GROUPING_SEPARATOR),this.DECIMAL_NUMBER_PATTERN=new RegExp("^-?([1-9]{1}[0-9]{0,2}("+this.groupingSeparator+"[0-9]{3})*("+this.decimalSeparator+"[0-9]+)?|[1-9]{1}[0-9]{0,}("+this.decimalSeparator+"[0-9]+)?|0("+this.decimalSeparator+"[0-9]+)?)$"),this.INTEGER_NUMBER_PATTERN=new RegExp("^-?([1-9]{1}[0-9]{0,2}("+this.groupingSeparator+"[0-9]{3})*|[1-9]{1}[0-9]{0,}|0)$")};return e.prototype.number_format=function(t,r,e,i){t=(t+"").replace(/[^0-9+\-Ee.]/g,"");var n=isFinite(+t)?+t:0,o=isFinite(+r)?Math.abs(r):0,s=void 0===i?",":i,a=void 0===e?".":e,u="";return u=(o?function(t,r){var e=Math.pow(10,r);return""+(Math.round(t*e)/e).toFixed(r)}(n,o):""+Math.round(n)).split("."),u[0].length>3&&(u[0]=u[0].replace(/\B(?=(?:\d{3})+(?!\d))/g,s)),(u[1]||"").length<o&&(u[1]=u[1]||"",u[1]+=new Array(o-u[1].length+1).join("0")),u.join(a)},e.prototype.isInt=function(t){return this.isNumberInt(t)||this.isStringInt(t)},e.prototype.isNumberInt=function(t){return r.isNumber(t)&&!isNaN(t)&&t!==Number.POSITIVE_INFINITY&&t!==Number.NEGATIVE_INFINITY&&(t===+t&&t===(0|t)||t%1==0)},e.prototype.isStringInt=function(t){return r.isString(t)&&this.INTEGER_NUMBER_PATTERN.test(t)},e.prototype.isInt32=function(t){return this.isInt(t)&&this.parseNumber(t)>=-2147483648&&this.parseNumber(t)<=2147483647},e.prototype.isDecimal=function(t){return r.isNumber(t)&&!isNaN(t)&&t!==Number.POSITIVE_INFINITY&&t!==Number.NEGATIVE_INFINITY||r.isString(t)&&this.DECIMAL_NUMBER_PATTERN.test(t)},e.prototype.parseNumber=function(t){if(r.isNumber(t))return t;if(r.isString(t)&&this.DECIMAL_NUMBER_PATTERN.test(t)){t=t.replace(new RegExp(this.groupingSeparator,"g"),"").replace(new RegExp(this.decimalSeparator,"g"),".");var e=1*t;return e>9007199254740992||e<-9007199254740992?(window.console&&window.console.warn(t+" is out of the ["+-9007199254740992+", 9007199254740992] bounds. Parsing results may be corrupted. Use string representation instead. For more details see https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Number."),!1):e}},e.prototype.formatNumber=function(t){var r=t.toString().split(".")[1];try{return this.number_format(t,r?r.length:0,this.DECIMAL_SEPARATOR,this.GROUPING_SEPARATOR)}catch(r){return t.toString()}},e});