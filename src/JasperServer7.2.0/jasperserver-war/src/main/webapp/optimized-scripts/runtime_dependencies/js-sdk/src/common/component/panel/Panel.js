define(["require","css!panel","underscore","backbone","text!./template/panelTemplate.htm"],function(t){"use strict";t("css!panel");var e=t("underscore"),s=t("backbone"),i=t("text!./template/panelTemplate.htm");return s.View.extend({defaultTemplate:i,el:function(){var t=this.getTemplateArguments();return this.template(t)},getTemplateArguments:function(){return{title:this.title,additionalCssClasses:this.additionalCssClasses}},constructor:function(t){t||(t={}),this.template=e.template(t.template||this.defaultTemplate),this.title=t.title||"",this.additionalCssClasses=t.additionalCssClasses||"",this.content=t.content||"",this.collapsed=!t.collapsed,this.openClass=t.openClass||"open",this.closedClass=t.closedClass||"closed",this.loadingClass=t.loadingClass||"loading",this.fixedHeight=t.fixedHeight||!1,this.contentContainer=t.contentContainer||".subcontainer",this.overflow=t.overflow||"auto",this.traits=t.traits||[],e.each(this.traits,e.bind(function(t){t.extension&&e.extend(this,t.extension)},this)),this.invokeTraits("onConstructor",t),s.View.apply(this,arguments)},invokeTraits:function(t){var s=Array.prototype.slice.call(arguments,1),i=this;e.each(this.traits,function(e){e[t]&&e[t].apply(i,s)})},initialize:function(t){this.invokeTraits("beforeInitialize",t),this.content&&this.setContent(this.content),this.toggleCollapsedState(),this.invokeTraits("afterInitialize",t)},setElement:function(t){this.invokeTraits("beforeSetElement",t);var e=s.View.prototype.setElement.apply(this,arguments);return this.$contentContainer=this.$(this.contentContainer),this.$contentContainer[this.collapsed?"hide":"show"](),this.invokeTraits("afterSetElement",t),e},open:function(t){return this.invokeTraits("beforeOpen",t),this.$contentContainer.show(),this.$el.removeClass(this.closedClass).addClass(this.openClass),this.collapsed=!1,t&&t.renderContent&&this.renderContent(),this.invokeTraits("afterOpen",t),t&&t.silent||this.trigger("open",this),this},close:function(t){return this.invokeTraits("beforeClose",t),this.$contentContainer.hide(),this.$el.removeClass(this.openClass).addClass(this.closedClass),this.collapsed=!0,this.invokeTraits("afterClose",t),t&&t.silent||this.trigger("close",this),this},setContent:function(t,e){this.content=t;var s=this.renderContent();this.$contentContainer[!0===e?"append":"html"](s)},renderContent:function(){return this.content instanceof s.View?this.content.render().$el:this.content},setHeight:function(t){var s=this.$("> .header").outerHeight();this.$contentContainer.css({height:e.isNumber(t)?t-s+"px":"auto",overflow:this.overflow})},toggleCollapsedState:function(){return this.collapsed?this.open():this.close(),this},remove:function(){this.invokeTraits("onRemove"),this.content&&this.content.remove&&this.content.remove(),s.View.prototype.remove.call(this)}})});