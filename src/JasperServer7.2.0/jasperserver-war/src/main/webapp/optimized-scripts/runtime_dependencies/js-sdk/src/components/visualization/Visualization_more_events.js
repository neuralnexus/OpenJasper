define(["require","jquery","backbone","underscore","text!./template/visualizationTemplate.htm"],function(t){"use strict";function e(t,e,i){var s=t[e],a=s,r=function(){return a},n=function(t){return s=a,a=i.call(this,t,s,e)};delete t[e]&&(Object.defineProperty?Object.defineProperty(t,e,{get:r,set:n}):Object.prototype.__defineGetter__&&Object.prototype.__defineSetter__&&(Object.prototype.__defineGetter__.call(t,e,r),Object.prototype.__defineSetter__.call(t,e,n)))}var i=t("jquery"),s=t("backbone"),a=t("underscore"),r=t("text!./template/visualizationTemplate.htm");return s.View.extend({template:a.template(r),events:{"click .jr-mVisualization-switcher":"_switcherActivated"},initialize:function(t){t&&t.props?this.props=t.props:this.props={title:!1},e(this.props,"title",this._onTitleChange.bind(this)),this.listenTo(this,"canvas:switch",this.switchCanvasTo.bind(this)),this.listenTo(this,"canvas:ready",t.evts["canvas:ready"]),this.render()},render:function(){return this.$el=i(this.template({props:this.props})),this.$canvas=this.$(".jr-mVisualization-canvas"),this.trigger("canvas:ready",this.$canvas),this.$switcher=this.$(".jr-mVisualization-switcher"),this.$title=this.$(".jr-mVisualization-title"),this},switchCanvasTo:function(t){this.$canvas.children().detach(),t&&this.$canvas.append(t)},remove:function(){this.switchCanvasTo(null),s.View.prototype.remove.call(this)},_onTitleChange:function(t){var e=this.$switcher.find(".jr-mIcon");t?(this.$title.find(".jr-mVisualization-title-text").text(t),this.$title.removeClass("jr-isHidden"),this.$switcher.removeClass("jr-isMinimized"),e.hasClass("jr-meatball")&&e.removeClass("jr-meatball'").addClass("jr-chartColumn'")):(this.$title.addClass("jr-isHidden"),this.$switcher.addClass("jr-isMinimized"),e.hasClass("jr-chartColumn")&&e.removeClass("jr-chartColumn").addClass("jr-meatball"))},_switcherActivated:function(){this.trigger("switcher:activated")}})});