define(["require","localizedMoment","settings/localeSettings","underscore","common/util/datetime/RelativeDate","common/util/datetime/RelativeTimestamp","jrs.configs","momentTimezone"],function(e){"use strict";function t(e){var t=e;return t=e.indexOf("yy")>-1?t.replace("yy","YYYY"):t.replace("y","YY"),e.indexOf("mm")>-1?t=t.replace("mm","MM"):e.indexOf("MM")>-1?t=t.replace("MM","MMMM"):e.indexOf("m")>-1?t=t.replace("m","M"):e.indexOf("M")>-1&&(t=t.replace("M","MMM")),e.indexOf("dd")>-1?t=t.replace("dd","DD"):e.indexOf("DD")>-1?t=t.replace("DD","dddd"):e.indexOf("d")>-1?t=t.replace("d","D"):e.indexOf("D")>-1&&(t=t.replace("D","ddd")),t}function i(e){return e.toLowerCase().replace("hh","HH")}function a(e,a,o){var n=t(e),r=i(a);return n+(null!=o?o:" ")+r}function o(e,a){a=a||" ";var o=e.split(a),n=o[0],r=o.length>1?o[1]:null;(n.indexOf("h")>0||n.indexOf("s")>0)&&(r=n,n=null);var m="";return n&&(m+=t(n)),r&&(m&&(m+=a),m+=i(r)),m}function n(e){return R(e,t(j.dateFormat),!0)}function r(e){return R(e,a(j.dateFormat,j.timeFormat,j.timestampSeparator),!0)}function m(e){return q.isValid(e)}function s(e){return w.isValid(e)}function u(e){return b.isDate(e)&&R(e).isValid()||b.isString(e)&&""!==e&&n(e).isValid()}function c(e){return b.isDate(e)&&R(e).isValid()||b.isString(e)&&""!==e&&r(e).isValid()}function d(e){return R(e,P,!0).isValid()}function l(e,t){if(u(e)&&u(t)){return T(b.isDate(e)?R(e):n(e),b.isDate(t)?R(t):n(t))}}function f(e,t){if(c(e)&&c(t)){return T(b.isDate(e)?R(e):r(e),b.isDate(t)?R(t):r(t))}}function T(e,t){return e.isBefore(t)?-1:e.isAfter(t)?1:0}function p(e){var t=R(e);if(b.isDate(e)&&t.isValid())return t.format(P)}function D(e){var t=R(e,P,!0);if(t.isValid())return t.toDate()}function z(e){return x(e,a(j.dateFormat,j.timeFormat,j.timestampSeparator),P)}function M(e){return x(e,P,a(j.dateFormat,j.timeFormat,j.timestampSeparator))}function v(e){return x(e,t(j.dateFormat),k)}function F(e){return x(e,k,t(j.dateFormat))}function O(e){return x(e,i(j.timeFormat),E)}function Y(e){return x(e,E,i(j.timeFormat))}function x(e,t,i){if(q.isValid(e))return e;var a=R(e,t,!0);return a.isValid()?a.format(i):e}function y(e){return R(e,k,!0)}function V(e){return e.format(k)}function g(e){return e.format(t(j.dateFormat))}function I(e,i){var a;return a=i?R.tz(e,i).tz(C):R.utc(e).tz(C),a.format(t(j.dateFormat))}function S(e,t){var a=R.duration(e),o=R.utc();return t&&o.tz(t),o.hours(a.hours()),o.minutes(a.minutes()),o.seconds(a.seconds()),o.tz(C).format(i(j.timeFormat))}function h(e,t){var i;return i=t?R.tz(e,t).tz(C):R.utc(e).tz(C),i.format(a(j.dateFormat,j.timeFormat,j.timestampSeparator))}function L(e,t){e=v(e);var i=R.tz(e,C);return i=t?i.tz(t):i.utc(),i.format(k)}function B(e,t){var i=R.duration(e),a=R.utc(),o=a.tz(C);o.hours(i.hours()),o.minutes(i.minutes()),o.seconds(i.seconds());var n;return n=t?o.tz(t):o.utc(),n.format(E)}function H(e,t){e=z(e);var i=R.tz(e,C);return i=t?i.tz(t):i.utc(),i.format(P)}var R=e("localizedMoment"),j=e("settings/localeSettings").localeSettings,b=e("underscore"),q=e("common/util/datetime/RelativeDate"),w=e("common/util/datetime/RelativeTimestamp"),A=e("jrs.configs");e("momentTimezone");var C=A.userTimezone,P="YYYY-MM-DD[T]HH:mm:ss",k="YYYY-MM-DD",E="HH:mm:ss";return{isRelativeDate:m,isRelativeTimestamp:s,isDate:u,isTimestamp:c,isIso8601Timestamp:d,compareDates:l,compareTimestamps:f,iso8601DateToMoment:y,momentToIso8601Date:V,momentToLocalizedDate:g,dateObjectToIso8601Timestamp:p,iso8601TimestampToDateObject:D,localizedTimestampToIsoTimestamp:z,isoTimestampToLocalizedTimestamp:M,localizedDateToIsoDate:v,isoDateToLocalizedDate:F,localizedTimeToIsoTime:O,isoTimeToLocalizedTime:Y,toMomentDateOrTimeOrTimestampPattern:o,isoDateToLocalizedDateByTimezone:I,localizedDateToIsoDateByTimezone:L,isoTimeToLocalizedTimeByTimezone:S,localizedTimeToIsoTimeByTimezone:B,isoTimestampToLocalizedTimestampByTimezone:h,localizedTimestampToIsoTimestampByTimezone:H}});