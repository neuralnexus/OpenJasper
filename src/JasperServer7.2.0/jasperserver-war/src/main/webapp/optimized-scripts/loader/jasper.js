!function(e){"use strict";function r(e,r){var s,l,a,c,u,h,f,g;if(e&&("object"==typeof e?(l=e.url,c=e.logEnabled,u=e.logLevel,h=e.scripts,require.config({config:{logger:{enabled:e.logEnabled,level:e.logLevel,appenders:["console"]},theme:e.theme}})):"string"==typeof e&&(l=e)),l||(s=new Error(t.BASE_URL_NOT_FOUND)),r&&"function"!=typeof r&&(s=new Error(t.ILLEGAL_CALLBACK),r=null),r||(r=n),s)r.apply(this,[s]),g=function(e){throw new Error("Can't load "+e)};else{var p;try{p=i(window.location.href)===i(l)}catch(e){p=!1}f=new o(r,s),require(["loader/core/Root","logger","xdm"],function(e,r,t){p&&(window.easyXDM=t),a=new e(l,c,u,h);var n=r.register("Jasper");a.settings().done(function(e){n.debug("Server settings: ",e),f.resolveSettings(e)}),a.requirejs().done(function(e){var r=requirejs.config(e);f.resolveConfig(r)})},r),g=function(e,t){f.then(function(n){n.apply(this,[e,t,r])})}}return g}var t={BASE_URL_NOT_FOUND:"Illegal 'conf' argument, it should be url to server or contains 'url' property",ILLEGAL_CALLBACK:"Illegal 'callback' argument, it should be function or undefined"},n=function(e){if(e)throw e},i=function(e){var r=document.createElement("a");return r.href=e,r.origin||r.protocol+"//"+r.host},o=function(e,r){function t(){e&&e.call(this,r,this.require);for(var t=0;t<this._callbacks.length;t++)this._callbacks[t](this.require)}this._callbacks=[],this.then=function(e){this.require?e(this.require):this._callbacks.push(e)},this.resolveSettings=function(e){this.settings=e,this.require&&t.call(this)},this.resolveConfig=function(e){this.require=e,this.settings&&t.call(this)}},s=e.jasper,l=e.jasperjs;r.noConflict=function(t){return e.jasper===r&&(e.jasper=s),t&&e.jasperjs===jasperjs&&(e.jasperjs=l),r},e.jasper=r,e.jasperjs=r,r._errors_=t,r.version="0.0.1a"}(this);