(self.webpackChunkjrs_ui=self.webpackChunkjrs_ui||[]).push([[3422],{35826:(t,e,i)=>{"use strict";i.d(e,{Z:()=>s});const s={RESOURCE_LOOKUP:"resourceLookup",DASHBOARD:"dashboard",LEGACY_DASHBOARD:"legacyDashboard",REPORT_UNIT:"reportUnit",TOPIC:"topic",ADHOC_DATA_VIEW:"adhocDataView",FILE:"file",BUNDLE_FILE:"bundleFile",SECURITY_FILE:"securityFile",FOLDER:"folder",SECURE_FILE:"secureFile",PROP:"prop",ACCESS_GRANT_SCHEMA:"accessGrantSchema",DATA_TYPE:"dataType",JDBC_DATA_SOURCE:"jdbcDataSource",AWS_DATA_SOURCE:"awsDataSource",AZURE_SQL_DATA_SOURCE:"azureSqlDataSource",JNDI_DATA_SOURCE:"jndiJdbcDataSource",VIRTUAL_DATA_SOURCE:"virtualDataSource",CUSTOM_DATA_SOURCE:"customDataSource",BEAN_DATA_SOURCE:"beanDataSource",XMLA_CONNECTION:"xmlaConnection",LIST_OF_VALUES:"listOfValues",REPORT_OPTIONS:"reportOptions",QUERY:"query",OLAP_UNIT:"olapUnit",DOMAIN_TOPIC:"domainTopic",DOMAIN:"domain",SEMANTIC_LAYER_DATA_SOURCE:"semanticLayerDataSource",SECURE_MONDRIAN_CONNECTION:"secureMondrianConnection",MONDRIAN_XMLA_DEFINITION:"mondrianXmlaDefinition",MONDRIAN_CONNECTION:"mondrianConnection",INPUT_CONTROL:"inputControl",ORGANIZATION:"organization",OLAP_CUBE:"olapCube"}},86937:(t,e,i)=>{"use strict";i.d(e,{Z:()=>D});var s=i(97572),n=(i(72157),i(97836)),o=i.n(n),l=i(18580),r=i(15495),a=i(71914),h=i(35826);const c=[h.Z.MONDRIAN_CONNECTION,h.Z.SECURE_MONDRIAN_CONNECTION,h.Z.XMLA_CONNECTION];var d={folderTreeProcessor:{processItem:function(t){return t._readonly=!(1==t.value.permissionMask||4&t.value.permissionMask),t}},treeNodeProcessor:{processItem:function(t){return t._node=o().contains(o().union([h.Z.FOLDER],c),t.value.resourceType),t}},i18nItemProcessor:{processItem:function(t){return t.i18n=l.Z,t}},filterPublicFolderProcessor:{processItem:function(t){if(t.value.uri!=="/root"+a.Z.publicFolderUri&&t.value.uri!=="/root"+a.Z.tempFolderUri)return t}},filterEmptyFoldersProcessor:{processItem:function(t){if("folder"!==t.value.resourceType||""!==t.value._links.content)return t}},cssClassItemProcessor:{processItem:function(t){switch(t.value.resourceType){case h.Z.REPORT_UNIT:t.cssClass="report";break;case h.Z.DOMAIN_TOPIC:t.cssClass="domain topic";break;case h.Z.SEMANTIC_LAYER_DATA_SOURCE:t.cssClass="domain";break;case h.Z.OLAP_CUBE:t.cssClass="olap"}return t}},fakeUriProcessor:{processItem:function(t){return t.value.uri&&t.value.uri.match(/^\/root/)&&(t.value.uri=t.value.uri.replace("/root","")),t}}};const u=function(t){return d[t]};var p=i(27661),f=i(13644),m=i(93764);const g='<ul class="list collapsible" style="top: {{- top}}px; position: relative;">\n\n    <js-templateNonce></js-templateNonce>\n\t{{ _.each(items, function(item){ }}\n\t<li class="{{- item._node ? \'node closed\' : \'leaf\'}} {{- item.selected ? \'selected\' : \'\'}} {{- item._readonly ? \'readonly\' : \'\'}}" data-index="{{- item.index }}" tabindex="-1">\n\t\t<p class="wrap button draggable" data-tooltip=\'true\'><b class="icon"></b> {{- item.value.label }} </p>\n\t\t<div class="subcontainer" ></div>\n\t</li>\n\t{{ }) }}\n</ul>\n';var v=function(t){if(!(t=t||{}).types)throw"Resources types required";return t.listView?function(t){var e=new r.Z({requestType:"POST",dataUriTemplate:a.Z.contextPath+"/rest_v2/connections",processors:[u("i18nItemProcessor"),u("cssClassItemProcessor")],levelDataId:"uri",getDataArray:function(t){return t&&t[h.Z.RESOURCE_LOOKUP]?t[h.Z.RESOURCE_LOOKUP]:[]}}),i=t.processors;return b(t).instance({itemsTemplate:t.treeItemsTemplate||g,listItemHeight:22,selection:{allowed:!0,multiple:!1},rootless:!0,collapsed:!0,lazyLoad:!0,getDataUri:(0,f.Z)({getFolderUri:_,contextPath:a.Z.contextPath,recursive:!0,type:t.types,containerType:t.containerType,forceTotalCount:!0,forceFullPage:!0}),levelDataId:"uri",cache:{searchKey:"searchString",pageSize:100},processors:i,customDataLayers:{olapDataLayer:e},getDataLayer:C,getDataArray:function(t){return t&&t[h.Z.RESOURCE_LOOKUP]?t[h.Z.RESOURCE_LOOKUP]:[]},getDataSize:function(t,e,i){return+i.getResponseHeader("Total-Count")}})}(t):function(t){var e=(t=t||{}).processors=o().map(t.processors,(function(t){return u(t)}));return b(t).instance({listItemHeight:22,bufferSize:t.treeBufferSize||5e3,additionalCssClasses:"folders",collapserSelector:t.collapserSelector,openClass:t.openClass,closedClass:t.closedClass,levelDataId:"uri",itemsTemplate:t.treeItemsTemplate||g,collapsed:!0,lazyLoad:!0,rootless:!0,getDataUri:(0,f.Z)({getFolderUri:_,contextPath:a.Z.contextPath,recursive:!1,type:t.types,containerType:t.containerType,forceTotalCount:!0,forceFullPage:!0}),selection:{allowed:!0,multiple:!1},customDataLayers:{"/":y(t)},processors:e,getDataArray:function(t){if(t&&t[h.Z.RESOURCE_LOOKUP]){t=t[h.Z.RESOURCE_LOOKUP];var e=this.levelDataId;return o().first(t)[e].match(/^\/public/)||(t=o().map(t,(function(t){return t.uri="/root"+t[e],t}))),t}return[]},getDataSize:function(t,e,i){return+i.getResponseHeader("Total-Count")},getDataLayer:C})}(t)};function b(t){var e=o().extend({},{i18n:l.Z,contentTemplate:'<p class="message label">\n\n    <js-templateNonce></js-templateNonce>\n    {{- model.i18n[\'tooltip.name\'] }}</p>\n<p class="message">{{- model.value.label }}</p>\n<p class="message label">{{- model.i18n[\'tooltip.path\'] }}</p>\n<p class="message">{{- model.value.uri }}</p>'},t.tooltipOptions);return t.constr||s.Z.use(p.Z,e).create()}function y(t){var e=function(t){var e=[],i=u("filterPublicFolderProcessor");return o().each(t,(function(t){t!==i&&e.push(t)})),e}(t.processors);return o().extend(new r.Z({dataUriTemplate:t.contextPath+"/flow.html?_flowId=searchFlow&method=getNode&provider=repositoryExplorerTreeFoldersProvider&uri=/&depth=1",processors:e,getDataArray:function(t){t=(0,m.Z)(t);var e=o().find(t.children,(function(t){return"/public"===t.uri})),i=[{id:"/root",label:t.label,uri:"/",resourceType:"folder",permissionMask:T(t.extra),_links:{content:"@fakeContentLink"}}];return e&&i.push({id:"/public",label:e.label,uri:"/public",resourceType:"folder",permissionMask:T(e.extra),_links:{content:"@fakeContentLink"}}),i}}),{accept:"text/html",dataType:"text"})}function C(t){var e;if(t=t.item?t:this.getLevel(t.id)){if(e=t.item.value.resourceType,o().contains(c,e)){var i=o().clone(this.customDataLayers.olapDataLayer);return o().extend(i,{accept:"application/repository."+e+".metadata+json",contentType:"application/repository."+e+"+json",data:JSON.stringify(e)}),i}return this.customDataLayers&&this.customDataLayers[t.id]?this.customDataLayers[t.id]:this.defaultDataLayer}}function _(t){return t.match(/^\/root/)?t.replace("/root",""):t}function T(t){var e=2;return t.isWritable&&(e|=4),t.isRemovable&&(e|=16),t.isAdministrable&&(e=1),e}v.settings=a.Z;const D=v},93764:(t,e,i)=>{"use strict";i.d(e,{Z:()=>s});const s=function(t){var e=t.trim();if(e.length<=29)return{};var i=e.substring(23,e.length-6);return JSON.parse(i)}},13644:(t,e,i)=>{"use strict";i.d(e,{Z:()=>o});var s=i(97836),n=i.n(s);function o(t){return function(e){var i="";if(i+=t.contextPath+"/rest_v2/api/resources?",t.getFolderUri){var s=t.getFolderUri(e.id);s&&(i+="folderUri="+encodeURIComponent(s))}else i+="folderUri="+encodeURIComponent(e.id);return t.recursive?i+="&recursive=true":i+="&recursive=false",t.type&&(i+=t.type.reduce((function(t,e){return t+="&type="+e}),"")),t.containerType&&(i+="&containerType="+t.containerType),t.exclude&&(i+="&excludeFolder="+t.exclude),i+="&offset={{= offset }}&limit={{= limit }}",t.forceTotalCount&&(i+="&forceTotalCount=true"),t.forceFullPage&&(i+="&forceFullPage=true"),n().template(i,e)}}},24777:(t,e,i)=>{"use strict";i.d(e,{Z:()=>s});const s={}},76802:(t,e,i)=>{"use strict";i.d(e,{Z:()=>h});var s=i(97836),n=i.n(s),o=i(89560),l=i(84612),r=i(52913),a=i(18580);const h=o.Z.extend({contentTemplate:n().template(r.Z),constructor:function(t){t||(t={}),o.Z.prototype.constructor.call(this,{modal:!1!==t.modal,message:t.message,additionalCssClasses:"alertDialog "+(t.additionalCssClasses||""),title:t.title||a.Z["dialog.exception.title"],id:t.id,titleContainerId:t.titleContainerId,bodyContainerId:t.bodyContainerId,buttons:[{label:a.Z["button.close"],action:"close",primary:!0}]},t)},initialize:function(t){o.Z.prototype.initialize.apply(this,arguments),this.on("button:close",this.close),this.setMessage(t.message)},setMessage:function(t){t=l.Z.softHtmlEscape(t,{whiteList:["br"]}),this.content=this.contentTemplate({message:t});var e=this.renderContent();this.$contentContainer.html(e)}})},89560:(t,e,i)=>{"use strict";i.d(e,{Z:()=>m});var s=i(97836),n=i.n(s),o=i(72157),l=i.n(o),r=i(42994),a=i(10709),h=i(59661),c=i(43891),d=i(35499),u=i(37567),p=(i(68851),i(44768)),f=a.Z.extend({defaultTemplate:d.Z,events:{mousedown:"_focus",touchstart:"_focus",keydown:"_onKeyDown",keyup:"_onKeyboardEvent",keypress:"_onKeyboardEvent",resize:"_onDialogResize"},constructor:function(t){t||(t={}),t.traits||(t.traits=[]),this.resizable=t.resizable||!1,this.modal=t.modal||!1,this.id=t.id,this.titleContainerId=t.titleContainerId,this.bodyContainerId=t.bodyContainerId,this.additionalBodyCssClasses=t.additionalBodyCssClasses||"",this.returnFocusTo=t.returnFocusTo||!1,this.resizable&&-1===n().indexOf(t.traits,c.Z)&&t.traits.push(c.Z),a.Z.call(this,t)},initialize:function(t){this.dialogOptions=n().extend({},t),this.collapsed=!this.collapsed,this.resetSizeOnOpen=!!n().isUndefined(t.resetSizeOnOpen)||t.resetSizeOnOpen,n().isEmpty(t.buttons)||(this.buttons=new h.Z({options:t.buttons,el:this.$(".jr-mDialog-footer")[0]||this.$(".footer")[0],contextName:"button",optionTemplate:t.dialogButtonTemplate||u.Z})),a.Z.prototype.initialize.apply(this,arguments),this.buttons&&this.listenTo(this.buttons,n().map(t.buttons,(function(t){return"button:"+t.action})).join(" "),n().bind((function(t,e){this.trigger("button:"+e.get("action"),t,e)}),this)),this.render()},getTemplateArguments:function(){var t=a.Z.prototype.getTemplateArguments.apply(this,arguments);return n().extend(t,{id:this.id,titleContainerId:this.titleContainerId,bodyContainerId:this.bodyContainerId,additionalBodyCssClasses:this.additionalBodyCssClasses})},setElement:function(t){var e=a.Z.prototype.setElement.apply(this,arguments);return this.buttons&&this.buttons.setElement(this.$(".jr-mDialog-footer")[0]||this.$(".footer")[0]),e},setTitle:function(t){this.$(".jr-mDialog-header > .jr-mDialog-header-title").text(t),this.$el.attr("aria-label",t)},setReturnFocus:function(t){this.returnFocusTo=t},render:function(){return this.$el.hide(),this.modal&&(this.dimmer=new r.Z({zIndex:900})),l()("body").append(this.$el),this.$el.draggable({handle:".mover",addClasses:!1,containment:"document"}),this},open:function(t){if(this.isVisible())return this;this.resetSizeOnOpen&&(this.$el.css({height:"",width:""}),this.$el.find("textarea").css({height:"",width:""})),a.Z.prototype.open.apply(this,arguments),this.modal&&this.dimmer.css({zIndex:++f.highestIndex}).show(),this._setMinSize();var e=this._position(t);this.$el.css({top:e.top,left:e.left,position:"absolute"}),this._increaseZIndex(),this.buttons&&this.buttons.$(".over").removeClass("over"),this.$el.show(),this.lastFocusedElement=this.returnFocusTo||document.activeElement;var i=p.Z.getFirstFocusableElement(this.$el[0]);return i&&n().defer((function(){return i.focus()})),this._onDialogResize(),this.trigger("dialog:visible"),p.Z.beginModalFocus(this.$el[0]),this},close:function(){if(this.isVisible())return p.Z.endModalFocus(this.$el[0]),this.$el.css({zIndex:--f.highestIndex}),this.modal&&this.dimmer.css({zIndex:--f.highestIndex}).hide(),this.$el.hide(),this.lastFocusedElement&&this.lastFocusedElement.focus(),a.Z.prototype.close.apply(this,arguments),this},addCssClasses:function(t){this.$el.addClass(t)},toggleCollapsedState:function(){return this},enableButton:function(t){this.buttons.enable(t)},disableButton:function(t){this.buttons.disable(t)},isVisible:function(){return this.$el.is(":visible")},_setMinSize:function(){this.dialogOptions.minWidth&&this.$el.css({minWidth:this.dialogOptions.minWidth}),this.dialogOptions.minHeight&&this.$el.css({minHeight:this.dialogOptions.minHeight}),this.dialogOptions.setMinSizeAsSize&&this.$el.css({width:this.dialogOptions.minWidth,height:this.dialogOptions.minHeight})},_position:function(t){var e,i,s=l()("body"),n=this.$el.height(),o=this.$el.width();if(t&&void 0!==t.top&&void 0!==t.left){e=t.top,i=t.left;var r=s.height(),a=s.width(),h=r-t.top,c=a-t.left;h<n&&(e=(e=t.top-n)<0?r/2-n/2:e),c<o&&(i=(i=t.left-o)<0?a/2-o/2:i)}else e=l()(window).height()/2-n/2,i=l()(window).width()/2-o/2;return{top:Math.max(0,e),left:Math.max(0,i)}},_focus:function(){!this.modal&&this._increaseZIndex()},_increaseZIndex:function(){this.$el.css({zIndex:++f.highestIndex})},_onKeyDown:function(t){("Escape"===t.key||27===t.keyCode)&&this.buttons&&this.dialogOptions.buttons.length>0&&this.close(),this.buttons&&this.buttons._onKeyDown(t),t.stopPropagation()},_onKeyboardEvent:function(t){t.stopPropagation()},_onDialogResize:function(){},remove:function(){this.buttons&&this.buttons.remove(),this.dimmer&&this.dimmer.remove();try{this.$el.draggable("destroy")}catch(t){}a.Z.prototype.remove.call(this)}},{highestIndex:5e3,resetHighestIndex:function(t){f.highestIndex=t||5e3}});const m=f},26065:(t,e,i)=>{"use strict";i.d(e,{Z:()=>c});var s=i(72157),n=i.n(s),o=i(97836),l=i.n(o),r=i(15892),a=i.n(r),h=i(87305);const c=a().View.extend({template:l().template(h.Z),delay:500,offset:{x:10,y:10},attribute:"data-tooltip",cssClasses:"panel info tooltip",contentSelector:".body",triggerEvents:!1,el:function(){return this.template({cssClasses:this.cssClasses})},constructor:function(t){if(t||(t={}),!t.attachTo||0===n()(t.attachTo).length)throw new Error("Tooltip should be attached to an element");if(!t.contentTemplate)throw new Error("Tooltip should have contentTemplate");this._shown=!1,this.$attachTo=n()(t.attachTo),this.$attachTo[0].tooltip=this,t.delay&&(this.delay=t.delay),t.offset&&(this.offset=t.offset),t.attribute&&(this.attribute=t.attribute),t.cssClasses&&(this.cssClasses=t.cssClasses),this.contentTemplate=t.contentTemplate,this.i18n=t.i18n||{},!l().isUndefined(t.triggerEvents)&&(this.triggerEvents=t.triggerEvents),this.selector="["+this.attribute+"]",l().bindAll(this,"show","_onMouseMove","_onMouseLeave"),this.$attachTo.on("mousemove touchmove",this.selector,this._onMouseMove),this.$attachTo.on("mouseleave touchend",this.selector,this._onMouseLeave),a().View.prototype.constructor.apply(this,arguments)},_render:function(t,e,i){if(this._event){t=t instanceof a().Model?t.toJSON():t;var s=l().template(this.contentTemplate)({model:t,i18n:this.i18n,options:e||{}});this.$el.find(".body").empty().append(s),this._showTooltip()}i.resolve()},show:function(t,e){var i=new(n().Deferred);return this._timer=setTimeout(l().bind(this._render,this,t,e,i),this.delay),i},_showTooltip:function(){n()("body").append(this.$el),this._updatePosition(),this._shown=!0,this.triggerEvents&&this.trigger("show",this)},hide:function(){this.contentTemplate&&this._timer&&clearTimeout(this._timer),this.$el.detach(),this._shown=!1,this.triggerEvents&&this.trigger("hide",this)},_updatePosition:function(){var t=this.$el.innerHeight(),e=this.$el.innerWidth(),i=n()(window).height(),s=n()(window).width(),o=this.offset.y,l=this.offset.x;t+this._event.pageY+this.offset.y+3>=i&&(o=-this.offset.y-t),e+this._event.pageX+this.offset.x+3>=s&&(l=-this.offset.x-e),this.$el.css({top:this._event.pageY+o,left:this._event.pageX+l})},_onMouseMove:function(t){this._event=t},_onMouseLeave:function(){this._shown&&this.hide(),this._timer&&clearTimeout(this._timer),this._event=null},remove:function(){this._shown&&this.hide(),this._timer&&clearTimeout(this._timer),this.$attachTo.off("mousemove touchmove",this.selector,this._onMouseMove),this.$attachTo.off("mouseleave touchend",this.selector,this._onMouseLeave),a().View.prototype.remove.apply(this,arguments)}},{attachTo:function(t,e){return e||(e={}),e.attachTo=t||"body",new this(e)},detachFrom:function(t){(t=n()(t)[0]).tooltip&&t.tooltip.remove()}})},97572:(t,e,i)=>{"use strict";i.d(e,{Z:()=>R});var s=i(72157),n=i.n(s),o=i(97836),l=i.n(o),r=i(15892),a=i.n(r),h=i(10709),c=i(70618);function d(t,e){!e&&t.stopPropagation(),this.onCollapseControlPressed?this.onCollapseControlPressed(t):this.toggleCollapsedState()}function u(){this.$collapser&&this.$collapser.off("mousedown"),this.$el&&this.$el.find(this.expandOnDblClickSelector).off("dblclick")}const p=l().extend({},c.Z,{onConstructor:function(t){this.collapserClass=t.collapserClass||"buttonIconToggle",this.collapserSelector=t.collapserSelector||".buttonIconToggle",this.collapsiblePanelClass=t.collapsiblePanelClass||"collapsiblePanel",this.expandOnDblClickSelector=t.expandOnDblClickSelector||"> p:first",this.allowEventPropagation=!!t.allowMouseDownEventPropagation,this.onCollapseControlPressed=t.onCollapseControlPressed},beforeSetElement:function(){u.call(this)},afterSetElement:function(){this.$el.addClass(this.collapsiblePanelClass),this.$collapser=this.$(this.collapserSelector),this.$collapser.length||(this.$collapser=n()("<button></button>").addClass(this.collapserClass),this.$("> .header").prepend(this.$collapser)),this.$collapser.on("mousedown",l().bind(d,this,this.allowEventPropagation)),this.$el.find(this.expandOnDblClickSelector).on("dblclick",l().bind(d,this))},onRemove:function(){u.call(this)}});var f=i(58523),m=i(75042);const g=a().View.extend({ListModel:m.Z,listItemSelector:"li",events:{scroll:"onScroll",touchmove:"onScroll"},attributes:{style:"overflow-y: auto; height: 100px"},initialize:function(t){return l().bindAll(this,"_fetchVisibleData"),this.model=t.model||new this.ListModel(t),this.chunksTemplate=l().template(t.chunksTemplate||'{{_.each(chunks, function(chunk) { }}\n<div class="j-view-port-chunk" style="height: {{- chunk.height}}px">\n\n    <js-templateNonce></js-templateNonce>\n</div>\n{{ }); }}\n'),this.itemsTemplate=l().template(t.itemsTemplate||'<ul class="jr-mSelectlist jr" style="top: {{- top}}px; position: relative;">\n\n    <js-templateNonce></js-templateNonce>\n    {{_.each(items, function(item) { }}\n    <li class="jr-mSelectlist-item {{ if (item.selected) print(\'jr-isSelected\'); }} jr" title="{{ print(item.label && item.label.trim() ? _.xssHardEscape(item.label) : \'&nbsp;\')}}" data-index="{{- item.index}}">\n        <div class="jr-mSelectlist-item-wrapper jr">\n            <a class="jr-mSelectlist-item-text jr">{{ print(item.label && item.label.trim() ? _.xssHardEscape(item.label) : \'&nbsp;\')}}</a>\n        </div>\n    </li>\n    {{ }); }}\n</ul>'),this.defaultChunkHeight=this.chunkHeight=t.chunkHeight||1e6,this.scrollTimeout=void 0!==t.scrollTimeout?t.scrollTimeout:50,this.manualScrollInterval=t.manualScrollInterval||50,this.lazy=t.lazy,this.defaultItemHeight=t.listItemHeight||21,this.listItemSelector=t.listItemSelector||this.listItemSelector,this.render(),this.initListeners(),this.lazy||this.model.fetch(),this},initListeners:function(){this.listenTo(this.model,"change",this.onModelChange,this),this.listenTo(this.model,"fetchFailed",this.onFetchFailed,this)},render:function(){return this},onScroll:function(t){this.scrollTimeout>0?(clearTimeout(this.scrollTimer),this.scrollTimer=setTimeout(this._fetchVisibleData,this.scrollTimeout)):this._fetchVisibleData()},onModelChange:function(){this.renderData()},onFetchFailed:function(t,e){this.trigger("listRenderError",t,e)},postProcessChunkModelItem:function(t,e){t.index=this.model.get("bufferStartIndex")+e,void 0===t.label&&(t.label=t.value),t.label=n().trim(t.label)},_renderItems:function(){var t=this.model.get("bufferStartIndex"),e=this.model.get("bufferEndIndex"),i=this.itemsPerChunk?Math.ceil((t+1)/this.itemsPerChunk):1,s=this.itemsPerChunk?Math.ceil((e+1)/this.itemsPerChunk):1,o=this;this.$el.find(".j-view-port-chunk").each((function(l,r){var a=o._getChunkModel({index:l+1,firstChunkWithData:i,lastChunkWithData:s,bufferStart:t,bufferEnd:e,total:o.totalItems,itemsPerChunk:o.itemsPerChunk,itemHeight:o.itemHeight,chunkHeight:o.chunkHeight,model:o.model}),h=a?o.itemsTemplate(a):"";n()(r).html(h)}))},_renderViewChunks:function(t){(this.totalItems!==this.model.get("total")||t)&&(this.totalItems=this.model.get("total"),this.$el.html(this.chunksTemplate({_:l(),chunks:this._getViewChunksModel()})),this.$firstViewChunk=this.$el.find(".j-view-port-chunk:first"))},_getViewChunksModel:function(){for(var t=this.itemsPerChunk?Math.ceil(this.totalItems/this.itemsPerChunk):1,e=t>0?this.itemHeight?this.totalItems*this.itemHeight-(t-1)*this.chunkHeight:this.chunkHeight:1,i=[],s=1;s<t;s++)i.push({height:this.chunkHeight});return i.push({height:e}),i},_calcViewPortConstants:function(t){t=t||{},this.viewPortConstantsInitialized||(this.itemHeight=this.defaultItemHeight,this.$firstViewChunk&&(this.itemHeight=this.$el.find(this.listItemSelector+":first").outerHeight(!0),!this.itemHeight||this.itemHeight<=2?(this.itemHeight=this.defaultItemHeight,this.viewPortConstantsInitialized=!1):this.viewPortConstantsInitialized=!0),this._calcViewPortHeight(),this.itemsPerChunk=Math.floor(this.defaultChunkHeight/this.itemHeight),this.chunkHeight=this.itemsPerChunk*this.itemHeight,this._renderViewChunks(!0),this._renderItems())},_calcViewPortHeight:function(){this.viewPortHeight=this.$el.height(),this.itemsPerView=Math.floor(this.viewPortHeight/this.itemHeight)-1},_getItemsPerView:function(){return this._renderData(),this.itemsPerView},_getChunkModel:function(t){var e=t.index;if(e<t.firstChunkWithData||e>t.lastChunkWithData)return null;var i=t.itemsPerChunk?Math.max(t.bufferStart,t.itemsPerChunk*(e-1)):t.bufferStart,s=t.itemsPerChunk?Math.min(t.bufferEnd,t.itemsPerChunk*e-1):t.bufferEnd,n=t.itemHeight?i*t.itemHeight-(e-1)*t.chunkHeight:0,o=Array.prototype.slice.call(t.model.get("items"),i-t.bufferStart,s-t.bufferStart+1);return l().each(o,(function(e,s){this.postProcessChunkModelItem(e,s+(i-t.bufferStart))}),this),{top:n,items:o}},_fetchVisibleData:function(){var t=this._getVisibleItems();this.model.fetch({top:t.top,bottom:t.bottom})},_getVisibleItems:function(){var t=this._getScrollPos(),e=this.model.get("total"),i=Math.min(e-this.itemsPerView,Math.floor(t/this.itemHeight));return{top:i,bottom:Math.min(e-1,i+this.itemsPerView+1)}},_getScrollPos:function(){this._renderData();var t=0;if(this.$firstViewChunk){var e=this.$el.offset(),i=this.$firstViewChunk.offset();e&&i&&(t=e.top-i.top)}return t},renderData:function(){return!this.lazy&&this.model.has("bufferStartIndex")&&this.model.has("bufferEndIndex")?this._renderData():(this.lazy=null,this.model.fetch()),this},_renderData:function(){this.trigger("before:render:data"),this._renderViewChunks(),this._renderItems(),this._calcViewPortConstants(),this.trigger("render:data")},resize:function(){if(this.$el.is(":visible")){var t=this.$el.outerHeight();t!==this._componentHeight&&(this._componentHeight=t,this.viewPortConstantsInitialized=!1,this._renderData())}},fetch:function(t,e){var i;this.lazy=!1,(e=e||{}).keepPosition?i=this.$el.get(0).scrollTop:this.reset({silent:!0,lazy:!1}),this.model.once("change",(function(){e.keepPosition&&this.$el.scrollTop(i),t&&t.apply(this,arguments)}),this).fetch({force:!0})},reset:function(t){t=l().defaults(t||{},{lazy:!0}),this.$el.scrollTop(0),this.lazy=t.lazy,this.model.reset(t)},scrollTo:function(t){if("number"==typeof t){var e=this._getScrollPos();if(this.viewPortConstantsInitialized){this._calcViewPortHeight();var i=null,s=t*this.itemHeight;s<e?i=s:s+this.itemHeight>e+this.viewPortHeight&&(i=s+this.itemHeight-this.viewPortHeight),null!==i&&this.$el.scrollTop(i)}}}});var v={LEFT:"left",RIGHT:"right"};const b=g.extend({ListModel:f.Z,globalEvents:!0,initialize:function(t){return l().bindAll(this,"onGlobalMouseup","onGlobalMousemove","_autoScroll","fetch"),this.eventListenerPattern=t.eventListenerPattern||"li",this.markerClass=t.markerClass?t.markerClass:"",this.selectedClass=t.selectedClass?t.selectedClass:"selected",this._initSelection(t.selection),g.prototype.initialize.call(this,t)},delegateEvents:function(){var t=g.prototype.delegateEvents.apply(this,arguments);return this.$el.on("mousedown",this.eventListenerPattern,l().bind(this.onMousedown,this)).on("mousemove",this.eventListenerPattern,l().bind(this.onMousemove,this)).on("dblclick",this.eventListenerPattern,l().bind(this.onMousedblclick,this)).on("contextmenu",this.eventListenerPattern,l().bind(this.onItemEvent,this,this.$el)).on("mouseout",this.eventListenerPattern,l().bind(this.onItemEvent,this,this.$el)).on("mouseover",this.eventListenerPattern,l().bind(this.onItemEvent,this,this.$el)),!this.globalEvents&&this.$el.on("mouseup",this.eventListenerPattern,this.onGlobalMouseup),t},undelegateEvents:function(){var t=g.prototype.undelegateEvents.apply(this,arguments);return this.$el.off("mouseup").off("mousedown").off("mousemove").off("dblclick").off("contextmenu").off("mouseout").off("mouseover"),t},_initSelection:function(t){var e,i=null!==(e=(t=l().extend({allowed:{}},t)).allowed)&&void 0!==e?e:{},s=l().isObject(i)?i.left:i;this.selection={allowed:{left:void 0===s||s,right:void 0!==i.right&&i.right},multiple:void 0===t.multiple||t.multiple}},initListeners:function(){g.prototype.initListeners.call(this),this.listenTo(this.model,"selection:clear",this.clearSelection,this),this.listenTo(this.model,"selection:add",this.selectValue,this),this.listenTo(this.model,"selection:addRange",this.selectRange,this),this.listenTo(this.model,"selection:remove",this.deselectValue,this),this.globalEvents&&n()("body").on("mouseup",this.onGlobalMouseup).on("mousemove",this.onGlobalMousemove)},postProcessChunkModelItem:function(t,e){g.prototype.postProcessChunkModelItem.call(this,t,e),t.selected=this.model.selectionContains&&this.model.selectionContains(t.value,t.index)},onMousedblclick:function(t){if(!this.selection.multiple&&(this.selection.allowed.left||this.selection.allowed.right)&&!this.getDisabled()){var e=this._getDomItemData(t.currentTarget);this._singleSelect(t,e.value,e.index),this.selectionChanged&&(this._triggerSelectionChanged(),this._triggerDblclicked(),this.selectionChanged=!1)}},getItemByEvent:function(t){return this._getDomItemData(t.currentTarget).item},onItemEvent:function(t,e){var i=e.type,s=this.getItemByEvent(e);this.trigger("list:item:"+i,s,e)},onMousedown:function(t){if(!this.getDisabled()&&(this.selection.allowed.left&&1===t.which||this.selection.allowed.right&&3===t.which)){var e=1===t.which?v.LEFT:v.RIGHT;this.selection.multiple&&(this[e+"MouseButtonPressed"]=!0,this.mouseDownPos=this._getMousePos(t));var i=this._getDomItemData(t.currentTarget);this.selection.multiple?this._multiSelect(t,i.value,i.index):this._singleSelect(t,i.value,i.index)}},onMousemove:function(t){if(this._allowMouseMoveSelection()&&(this._stopAutoScroll(),this._mouseMoved(t,this.mouseDownPos))){this.mouseDownPos=this._getMousePos(t);var e=this._getDomItemData(t.currentTarget);this.model.selectionContains(e.value,e.index)||this.model.addRangeToSelection(e.value,e.index)}},onGlobalMouseup:function(t){var e=this;(this.leftMouseButtonPressed||this.rightMouseButtonPressed)&&(l().each(v,(function(t){e[t+"MouseButtonPressed"]=!1})),delete this.mouseDownPos,this._stopAutoScroll(),this.selectionChanged&&(this._triggerSelectionChanged(),this.selectionChanged=!1))},onGlobalMousemove:function(t){this._allowMouseMoveSelection()&&(this.mousePosY=t.clientY,this.scrollInterval||(this.scrollInterval=setInterval(this._autoScroll,this.manualScrollInterval)))},clearSelection:function(){this.$el.find("li."+this.selectedClass+this.markerClass).removeClass(this.selectedClass),this.selectionChanged=!0},selectValue:function(t){this.$el.find("li"+this.markerClass+"[data-index='"+t.index+"']:not(."+this.selectedClass+")").addClass(this.selectedClass),this.selection.multiple?this.selectionChanged=!0:this._triggerSelectionChanged()},selectRange:function(t){var e=this,i=Math.max(this.model.get("bufferStartIndex"),t.start),s=Math.min(this.model.get("bufferEndIndex"),t.end);this.$el.find("li"+this.markerClass+":not(."+this.selectedClass+")").each((function(){var t=n()(this),o=parseInt(t.attr("data-index"),10);if(o>=i&&o<=s){var l=e.model.get("items")[o-e.model.get("bufferStartIndex")];e.model.selectionContains(l.value,o)&&t.addClass(e.selectedClass)}})),this.selectionChanged=!0},deselectValue:function(t){this.$el.find("li[data-index='"+t.index+"']."+this.selectedClass+this.markerClass).removeClass(this.selectedClass),this.selection.multiple?this.selectionChanged=!0:this._triggerSelectionChanged()},_autoScroll:function(){var t,e=this.$el.offset().top,i=this.$el.scrollTop(),s=void 0!==this.scrollTop?this.scrollTop:i,n=!1;this.mousePosY<e?n=(t=s-3*this.itemHeight)<i:this.mousePosY>e+this.viewPortHeight&&(n=(t=s+3*this.itemHeight)>i),n&&(this.$el.scrollTop(t),this.scrollTop=this.$el.scrollTop(),this._fetchVisibleData()),this._selectRangeOnAutoScroll(s,t)},_selectRangeOnAutoScroll:function(t,e){var i;if(t<e?i=this._getVisibleItems().bottom:t>e&&(i=this._getVisibleItems().top),i){var s=this.model.get("items")[i-this.model.get("bufferStartIndex")];s&&(this.model.selectionContains(s.value,i)||this.model.addRangeToSelection(s.value,i))}},_stopAutoScroll:function(){this.scrollInterval&&(clearInterval(this.scrollInterval),this.scrollInterval=void 0,this.scrollTop=void 0)},_multiSelect:function(t,e,i){t.shiftKey?this.model.addRangeToSelection(e,i):t.ctrlKey||t.metaKey?this._singleSelect(t,e,i):this.model.toggleSelection(e,i)},_singleSelect:function(t,e,i){this.model.clearSelection().addValueToSelection(e,i)},_triggerSelectionChanged:function(){this.trigger("selection:change",this.getValue())},_triggerDblclicked:function(){this.trigger("item:dblclick",this.getValue())},_getDomItemData:function(t){for(var e=n()(t),i=e.attr("data-index");void 0===i;)i=(e=e.parent()).attr("data-index");i=parseInt(i,10);var s=this.model.get("items")[i-this.model.get("bufferStartIndex")];return{item:s,value:s.value,index:i}},_mouseMoved:function(t,e){return Math.abs(e.x-t.clientX)+Math.abs(e.y-t.clientY)>=1},_getMousePos:function(t){return{x:t.clientX,y:t.clientY}},_allowMouseMoveSelection:function(){return(this.selection.allowed.left&&this.leftMouseButtonPressed||this.selection.allowed.right&&this.rightMouseButtonPressed)&&this.selection.multiple&&!this.getDisabled()},getValue:function(){return this.model.getSelection()},setValue:function(t,e){return(e=e||{}).silent||e.modelOptions&&e.modelOptions.silent||this.model.once("selection:change",this._triggerSelectionChanged,this),e=e.modelOptions,this.model.select(t,e),this},selectAll:function(t){return t&&t.silent||this.model.once("selection:change",this._triggerSelectionChanged,this),this.model.selectAll(),this},selectNone:function(t){return this.setValue({},t)},invertSelection:function(t){return t&&t.silent||this.model.once("selection:change",this._triggerSelectionChanged,this),this.model.invertSelection(),this},setDisabled:function(t){return this.disabled=t,this.disabled?this.$el.addClass("disabled"):this.$el.removeClass("disabled"),this},getDisabled:function(){return this.disabled},remove:function(){return n()("body").off("mouseup",this.onGlobalMouseup).off("mousemove",this.onGlobalMousemove),g.prototype.remove.call(this)}});function y(t,e,i){var s=this.get("bufferStartIndex")+e;this.selectionContains&&(i?(t.selected=!0,!this.selectionContains(t.value,s)&&this.addValueToSelection(t.value,s)):(t.selected=!1,this.selectionContains(t.value,s)&&this.removeValueFromSelection(t.value,s))),delete t.addToSelection}const C={afterFetchComplete:function(t){l().each(t,(function(t,e){t&&(t.addToSelection?y.call(this,t,e,!0):l().isUndefined(t.addToSelection)||y.call(this,t,e))}),this)}};var _=i(72012);function T(t){return(T="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}var D=f.Z.extend(C);const I=h.Z.extend({constructor:function(t){t||(t={}),l().extend(t,{traits:[p]}),h.Z.prototype.constructor.call(this,t)},initialize:function(t){t||(t={}),this._isReady=!1,this.item=t.item||{},this.id=this.item.id,this.owner=t.owner,this.parent=t.parent,this.itemsTemplate=t.itemsTemplate,this.listItemHeight=t.listItemHeight,this.levelHeight=t.levelHeight,this.lazyLoad=!!t.lazyLoad,this.selection=t.selection||{allowed:!1,multiple:!1},this.resource=this.item.value,this.bufferSize=t.bufferSize,this.cache=void 0!==t.cache&&t.cache,this.allowMouseDownEventPropagation=t.allowMouseDownEventPropagation,this.items={},this.plugins=[];for(var e={el:this.el,model:this.model},i=0,s=t.plugins.length;i<s;i++){var n=t.plugins[i].constr;this.plugins.push(new n(l().extend({},e,t.plugins[i].options)))}this.dataLayer=this.owner.getDataLayer(this),l().invoke(this.plugins,"dataLayerObtained",this.dataLayer),h.Z.prototype.initialize.apply(this,arguments)},render:function(){var t=new D({bufferSize:this.bufferSize,getData:this._getDataProvider(this.cache)});return this.list=new b({markerClass:"."+this.cid,eventListenerPattern:"."+this.cid+":not(.readonly) > p",el:this.$contentContainer,itemsTemplate:this.itemsTemplate,listItemHeight:this.listItemHeight,lazy:!0,selection:this.selection,allowMouseDownEventPropagation:this.allowMouseDownEventPropagation,model:t}),this.list.on("render:data",l().bind(S,this)),this.list.on("listRenderError",l().bind(w,this)),this.list.on("selection:change",l().bind(x,this)),this.list.on("item:dblclick",l().bind(L,this)),this.lazyLoad?this.on("open",this._onOpen,this):this.list.renderData(),this},_getDataProvider:function(t){var e=this,i=l().bind((function(t){return this.obtainData(t,e)}),this.dataLayer),s={};return t&&("object"===T(t)&&(s=l().extend(s,t)),s.request=s.request||i,this.dataProvider=new _.Z(s),i=this.dataProvider.getData),function(t){return t||(t={offset:0,limit:100}),t.id=e.id,i(l().extend({},e.owner.context,t),e)}},_onOpen:function(){this.$el.removeClass(this.openClass).addClass(this.loadingClass),this.list.renderData()},setElement:function(t){var e=h.Z.prototype.setElement.apply(this,arguments);return this.list&&(this.list.setElement(this.$contentContainer),this.list.totalItems=-1),l().each(this.plugins,(function(e){e.setElement(t)})),this.lazyLoad||this.list&&this.list.renderData(),this.collapsed||(this.open({silent:!0,depth:0}),this.lazyLoad&&this.list.renderData()),e},open:function(t){E(this,h.Z.prototype.open,t,t?t.depth:0),h.Z.prototype.open.call(this,t)},close:function(t){h.Z.prototype.close.call(this,t),E(this,h.Z.prototype.close,t,t?t.depth:void 0),k(this)},getLevel:function(t){return l()(this.items).reduce((function(e,i){return e||(i.id===t?i:i.getLevel(t))}),!1)},refresh:function(t){this.listRenderError||(this.lazyLoad&&!this.collapsed||!this.lazyLoad?(this.once("ready",l().bind(E,this,this,this.refresh,t,1)),this.list.model.fetch({top:0,bottom:this.list.model.bufferSize,force:!0}),this.list.scrollTo(0)):(this.list.model.set("bufferStartIndex",void 0,{silent:!0}),this.list.model.set("bufferEndIndex",void 0,{silent:!0}),this.list.model.set("total",void 0,{silent:!0}),E(this,this.refresh,t)))},fetch:function(t,e){this.list.fetch(e,t)},recalcConstraints:function(){this.list.resize()},fetchVisibleData:function(){this.list._fetchVisibleData()},resetSelection:function(t){k(this,t),t&&t.silent||this.trigger("selection:change",[])},hasItems:function(){return!!this.$("> .subcontainer > .j-view-port-chunk > ul > li").length},clearCache:function(){l().each(this.items,(function(t){t.clearCache()})),this.dataProvider&&this.dataProvider.clear()},remove:function(){var t=this,e=-1;if(l().forEach(l().keys(this.items),(function(e){t.items[e].remove()})),this.dataProvider&&this.dataProvider.clear(),this.list.remove(),this.parent){var i=this.parent.id,s=this.owner.getDataLayer(i);if(s&&s.predefinedData&&s.predefinedData[i]&&l().isArray(s.predefinedData[i])){for(var n=0;n<s.predefinedData[i].length;n++)if(s.predefinedData[i][n].id===this.id){e=n;break}e>-1&&(s.predefinedData[i].splice(e,1),delete s.predefinedData[this.id])}delete this.parent.items[this.id]}h.Z.prototype.remove.apply(this,arguments)},isReady:function(){return this._isReady}});function S(){this.$el.removeClass(this.loadingClass).addClass(this.openClass),l().invoke(this.plugins,"itemsRendered",this.list.model,this.list);var t=this.list.$("> .j-view-port-chunk > ul > li").addClass(this.cid).length,e=l().isFunction(this.levelHeight)?this.levelHeight():this.levelHeight;e&&t*this.listItemHeight>e?this.list.$el.css({height:e+"px","overflow-y":"auto"}):this.list.$el.css({height:"auto",overflow:"auto"}),this.list._calcViewPortHeight(),this._isReady=!0,this.trigger("ready",this)}function w(t,e){this.listRenderError=!0,this.trigger("listRenderError",t,e,this)}function x(t){var e=[];l().chain(t).keys(t).each((function(i){e.push(t[i])})),this.selection.multiple||k(this),this.trigger("selection:change",e,this,[])}function L(t){var e=[];l().chain(t).keys(t).each((function(i){e.push(t[i])})),this.selection.multiple||k(this),this.trigger("item:dblclick",e)}function P(t,e){for(var i=0;i<e.length;i++)if(e[i]===t)return!0}function E(t,e,i,s){i&&i.exclude&&l().isArray(i.exclude)&&P(t,i.exclude)||(void 0===s||s>0)&&l().chain(t.items).keys().each((function(n){i&&i.exclude&&l().isArray(i.exclude)&&P(t.items[n],i.exclude)||e.call(t.items[n],i),E(t.items[n],e,i,void 0===s?s:--s)}))}function k(t,e){E(t,(function(t){this.list.clearSelection(),this.list.model.selection=[]}),e=e&&{exclude:e.exclude})}var O=i(15495);const M='<ul class="list collapsible folders" style="top: {{- top}}px; position: relative;">\n\n    <js-templateNonce></js-templateNonce>\n    {{ _.each(items, function(item){ }}\n    <li class="{{- item._node ? \'node closed\' : \'leaf\'}} {{- item.selected ? \'selected\' : \'\'}}" data-index="{{- item.index }}" tabindex="-1">\n        <p class="wrap button draggable" data-tooltip="{{- item.value.label }}"><b class="icon"></b> {{- item.value.label }} </p>\n        <div class="subcontainer" ></div>\n    </li>\n    {{ }) }}\n</ul>\n';var $="add",Z=a().View.extend({template:l().template('<div>\n\n    <js-templateNonce></js-templateNonce>\n    <ul class="list collapsible folders">\n        <li class="node">\n            <p class="wrap button">\n                <b class="icon" id="handler2" title=""></b>root\n            </p>\n            <div class="subcontainer"></div>\n        </li>\n    </ul>\n</div>'),_plugins:[],el:function(){return this.template()},constructor:function(t){t||(t={}),this.defaultDataLayer=new O.Z(t),this.customDataLayers=t.customDataLayers,t.type?(this._type=t.type,t.type=void 0):this._type="tree",t.collapserSelector||(t.collapserSelector="b.icon:eq(0)"),t.predefinedData?(this.defaultDataLayer.predefinedData=t.predefinedData,t.predefinedData=void 0):this.defaultDataLayer.predefinedData={},t.rootless&&(this.rootless=t.rootless,t.rootless=void 0),t.additionalCssClasses&&(this.additionalCssClasses=t.additionalCssClasses,t.additionalCssClasses=void 0),t.getDataLayer&&(this.getDataLayer=t.getDataLayer,t.getDataLayer=void 0),this._options=l().extend({itemsTemplate:M,plugins:this._plugins,owner:this},t),this.context=t.context||{};for(var e=0,i=this._plugins.length;e<i;e++)this._plugins[e].processors&&(this.processors=this.processors.concat(this._plugins[e].processors));a().View.apply(this,arguments)},initialize:function(t){this.rootLevel=new I(l().extend({},this._options,{levelHeight:t.rootLevelHeight},{el:this.$("li")[0]},{item:{id:"/",value:{id:"/",resourceType:"folder"}}})),this.rootless&&this.$el.find("ul:first").addClass("hideRoot"),this.additionalCssClasses&&this.$el.find("ul:first").addClass(this.additionalCssClasses),this.listenTo(this.rootLevel,"ready",l().bind(A,this)),this.listenTo(this.rootLevel,"selection:change",l().bind((function(t,e,i){e&&i&&l().isArray(i)&&(this.rootLevel.selection.multiple||this.rootLevel.resetSelection({silent:!0,exclude:[i[0]]})),this.trigger("selection:change",t)}),this)),this.listenTo(this.rootLevel,"item:dblclick",l().bind((function(t){this.trigger("item:dblclick",t)}),this));for(var e=0,i=this._plugins.length;e<i;e++)this._plugins[e].constr.treeInitialized.call(this,this._plugins[e].options);this.rootLevel.render(),t.collapsed&&t.lazyLoad&&this.rootless&&this.expand("/")},remove:function(){for(var t=0,e=this._plugins.length;t<e;t++)this._plugins[t].constr.treeRemoved.call(this);this.rootLevel.remove(),a().View.prototype.remove.apply(this,arguments)},expand:function(t,e){var i=this.getLevel(t);return i&&i.open(e),this},collapse:function(t,e){var i=this.getLevel(t);return i&&i.close(e),this},_getNodeByLevelId:function(t){var e,i,s=this.getLevel(t);if(s)return s.parent?(e=s.parent.list,{node:s.item,nodeElement:s.$el,itsList:e}):null;var n=!1;if("list"===this._type)n=this.rootLevel;else if("tree"===this._type){var o=t.split("/");if(""===(o=o.slice(0,o.length-1).join("/"))&&(o="/"),!(n=this.getLevel(o)))return null}return n?(e=n.list,(i=l().find(e.model.get("items"),(function(e){return e.id===t})))?{node:i,nodeElement:e.$el.find("li.leaf.selected"),itsList:e}:null):null},select:function(t){var e=this._getNodeByLevelId(t);e&&(e.itsList.model.clearSelection().addValueToSelection(e.node.value,e.node.index),this.trigger("selection:change",e.itsList.getValue()))},deselect:function(t){},addItem:function(t,e){var i=this.getLevel(t),s=$;return i&&this._getNodeItems(t,i,e,s),this},updateItem:function(t,e){var i=e?this.getLevel(e):this.rootLevel;return i&&this._getNodeItems(i.id,i,t),this},resetSelection:function(t){return this.rootLevel.list.clearSelection(),this.rootLevel.list.model.selection=[],this.rootLevel.resetSelection(t),this},refresh:function(t){t&&(this.context=t),this.rootLevel.refresh()},recalcConstraints:function(){this.rootLevel.recalcConstraints()},fetchVisibleData:function(){this.rootLevel.fetchVisibleData()},clearCache:function(){this.rootLevel.clearCache()},getLevel:function(t){return this.rootLevel.id===t?this.rootLevel:this.rootLevel.getLevel(t)},getDataLayer:function(t){return this.customDataLayers&&this.customDataLayers[t.id]?this.customDataLayers[t.id]:this.defaultDataLayer},_addItem:function(t,e,i){return!l().findWhere(t,{id:i.id})&&t.push(i),t},_updateItem:function(t,e){return l().each(t,(function(t){t.id===e.id&&l().extend(t,e)}),this),t},_getNodeItems:function(t,e,i,s){var n,o=this.getDataLayer(e),r=e.list.model.get("items")?e.list.model.get("items"):[];o.predefinedData=o.predefinedData||{},n=s===$?this._addItem(r,t,i):this._updateItem(r,i),o.predefinedData[t]=l().sortBy(n,"label"),e.fetch({force:!0,keepPosition:!0})},_selectTreeNode:function(t,e){if(l().isString(t)&&""!==t){var i=l().bind((function(){var s=l().bind((function(){var s=t,n=this.getLevelId(s);if(this.expand(n),this.select(n),"list"===this._type)this.rootLevel.on("ready",i);else if("tree"===this._type&&e&&e.length){var o=this.$el,l=this._getNodeByLevelId(n);if(!l)return;var r=l.nodeElement;if(!r)return;var a=r.offset().top-o.offset().top-e.height()/2+r.height()/2;e.scrollTop(a)}}),this);if("/"===t||"/public"===t||"list"===this._type)s();else{var o=t.replace(/\/$/,""),r=o.substr(0,o.lastIndexOf("/"));r=r||"/";var a=new(n().Deferred);this._openPath(r,a,0),a.done(s)}}),this);this.rootLevel.isReady()?i():this.rootLevel.on("ready",i)}},_openPath:function(t,e,i){if(!t)return e.resolve();var s,n,o,r,a=this;if("/"===t?n=["/"]:(n=t.split("/"))[0]="/","/"===n[0]&&"public"===n[1]&&(n=l().union(["/public"],l().rest(n,2))),(i=i||0)===n.length)return e.resolve();s=(s=l().first(n,i+1).join("/")).replace(/\/\//g,"/"),r=this.getLevelId(s),(o=this.getLevel(r))&&(o.collapsed?(o.once("ready",(function(){a._openPath(t,e,i+1)})),o.open()):this._openPath(t,e,i+1))},getLevelId:function(t){var e="",i=["/public"];if("/"===t||"/root"===t)e="/root";else{for(var s=!1,n=0;n<i.length;n++)if(0===t.indexOf(i[n])){s=!0;break}e=s?t:"/root/"+t.substr(1)}return e}},{instance:function(t){return new this(t)}});const R={use:function(t,e){return i=Z.extend({_plugins:[{constr:t,options:e}]}),{use:function(t,e){return i.prototype._plugins.push({constr:t,options:e}),this},create:function(){return i}};var i},create:function(){return Z}};function A(t){var e=t.list.model.get("items"),i=this;e=l().where(e,{_node:!0}),t.$(".node").each((function(s,n){var o=e[s].id;t.items[o]?t.items[o].setElement(n):(t.items[o]=new I(l().extend({},i._options,{el:n,item:e[s],parent:t})),i.listenTo(t.items[o],"listRenderError",l().bind((function(t,e,i){this.trigger("levelRenderError",t,e,i)}),i)),t.listenTo(t.items[o],"ready",l().bind(A,i)),t.listenTo(t.items[o],"selection:change",(function(e,i,s){i&&s.push(i),t.list.model.clearSelection(),t.trigger("selection:change",e,t,s)})),t.listenTo(t.items[o],"item:dblclick",(function(e){t.list.model.clearSelection(),t.trigger("item:dblclick",e)})),t.items[o].render())})).length&&t.$(".j-view-port-chunk").css({height:"auto"})}},15495:(t,e,i)=>{"use strict";i.d(e,{Z:()=>h});var s=i(97836),n=i.n(s),o=i(72157),l=i.n(o),r=i(95992),a=i(12473);const h=r.Z.extend({constructor:function(t){this.requestType=t.requestType?t.requestType:"GET",t.getDataUri&&(this.getDataUri=t.getDataUri),this.getDataUri||(this.getDataUri=n().template(t.dataUriTemplate)),t.getDataArray&&(this.getDataArray=t.getDataArray),t.getDataSize&&(this.getDataSize=t.getDataSize),t.extractId&&(this.extractId=t.extractId),this.levelDataId=t.levelDataId?t.levelDataId:"id",this.processors=t.processors||[],this.initialize(t)},initialize:function(t){},extractId:function(t){return t[this.levelDataId]},getDataSize:function(t,e,i){return this.getDataArray(t,e,i).length},getDataArray:function(t,e,i){return t},obtainData:function(t,e){var i=new(l().Deferred),s=this;return this.predefinedData&&this.predefinedData[t.id]?i.resolve({total:this.predefinedData[t.id].length,data:this.predefinedData[t.id]}):(0,a.Z)({type:this.requestType,dataType:this.dataType||"json",headers:{Accept:this.accept||"application/json","Content-Type":this.contentType||void 0},cache:!1,data:this.data||void 0,url:this.getDataUri(t)}).done((function(){var e=arguments[0];s.dataSize=s.getDataSize.call(s,e,t,arguments[2]),i.resolve({total:s.dataSize,data:c.call(s,s.getDataArray.call(s,e,t,arguments[2]),t)})})).fail((function(t){i.reject(t.status,t.responseText)})),i},_process:c});function c(t,e){return u.call(this,d.call(this,t),e)}function d(t){for(var e=0,i=t.length;e<i;e++)t[e]={id:this.extractId(t[e]),value:t[e]};return t}function u(t,e){var i,s;if(this.processors&&this.processors.length)for(var n=0,o=this.processors.length;n<o;n++){i=[];for(var l=0,r=t.length;l<r;l++)(s=this.processors[n].processItem(t[l],e,this))&&i.push(s);t=i}return t}},27661:(t,e,i)=>{"use strict";i.d(e,{Z:()=>r});var s=i(71887),n=i(97836),o=i.n(n),l=i(26065);const r=s.Z.extend({initialize:function(t){this.tooltip=l.Z.attachTo(t.attachTo,o().omit(t,"el")),this.listensToList=!1,s.Z.prototype.initialize.apply(this,arguments)},itemsRendered:function(t,e){var i=this;this.listensToList||(this.listensToList=!0,this.listenTo(e,"list:item:mouseover",(function(t,e){i.tooltip.show(t)})),this.listenTo(e,"list:item:mouseout",(function(){i.tooltip.hide()})))},remove:function(){l.Z.detachFrom(this.$el),this.tooltip.remove(),s.Z.prototype.remove.apply(this,arguments)}})},71887:(t,e,i)=>{"use strict";i.d(e,{Z:()=>n});var s=i(15892);const n=i.n(s)().View.extend({dataLayerObtained:function(){},itemsRendered:function(){}},{processors:null,treeInitialized:function(){},treeRemoved:function(){}})},59772:(t,e,i)=>{"use strict";i.d(e,{Z:()=>h});var s=i(5887),n=i.n(s),o=i(97836),l=i.n(o),r=new(i(92772).Z),a=n().mixin.validate;n().mixin.validate=function(t,e){e||(e={});var i=this;return a.call(this,t,l().extend({valid:function(t,e){i.trigger("validate:"+e,i,e)},invalid:function(t,e,s){i.trigger("validate:"+e,i,e,s)}},e))},l().extend(n().validators,{doesNotContainSymbols:function(t,e,i){if(new RegExp("["+i+"]","g").test(t))return"Attribute '"+e+"' contains forbidden symbols"},integerNumber:function(t){if(!r.isNumberInt(t))return"Value is not a valid integer number"},type:function(t,e,i){if(l().isArray(i)||(i=[i]),!i.some((function(e){return function(t){var e;return"string"==t?e=l().isString:"number"===t?e=l().isNumber:"object"===t?e=l().isObject:"boolean"===t?e=l().isBoolean:"null"===t?e=l().isNull:"undefined"===t&&(e=l().isUndefined),e}(e)(t)})))return"'{attr}' is not {type}".replace("{attr}",e).replace("'{type}'",i.join(" "))},url:function(t){if(!/(http|https):\/\/.*\..*./.test(t))return"Value is not a valid url"},hexColor:function(t){if(!/^#[0-9a-f]{3,6}$/i.test(t))return"Value is not a valid hex color"},xRegExpPattern:function(t,e,i,s){if(!i.test(t))return"Value does not match pattern"},startsWithLetter:function(t,e,i,s){if(!t.substr(0,1).match(/[A-Za-z]/))return"Value should start with letter"},containsOnlyWordCharacters:function(t,e,i,s){if(t.search(/\W/)>=0)return"Value should contain only word characters (letters, digits and underscore)"},arrayMinLength:function(t,e,i,s){if(l().isArray(t)&&t.length<i)return"Array length is less than "+i}});const h=n()},52913:(t,e,i)=>{"use strict";i.d(e,{Z:()=>s});const s="<p class='alertText'>\n\n    <js-templateNonce></js-templateNonce>\n    {{- message }}\n</p>"},87305:(t,e,i)=>{"use strict";i.d(e,{Z:()=>s});const s='<div class="{{- cssClasses }}" style="position: absolute; z-index: 100000;">\n\n    <js-templateNonce></js-templateNonce>\n    <div class="content">\n        <div class="body"></div>\n    </div>\n</div>\n'},92111:(t,e,i)=>{"use strict";i.d(e,{Z:()=>n});var s=i(24777);s.Z.treeComponent=s.Z.treeComponent||{};const n=s.Z.treeComponent}}]);
//# sourceMappingURL=chunk.3422.js.map