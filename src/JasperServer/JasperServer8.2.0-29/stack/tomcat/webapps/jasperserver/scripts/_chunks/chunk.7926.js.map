{"version":3,"sources":["webpack://jrs-ui/./src/resource/resource.base.js","webpack://jrs-ui/./src/resource/resource.dataType.js","webpack://jrs-ui/./src/components/components.calendarInput.js","webpack://jrs-ui/./src/addResource/dataType/addDataType.common.js","webpack://jrs-ui/./src/components/components.tooltip.js","webpack://jrs-ui/./src/config/dateAndTimeSettings.js","webpack://jrs-ui/./src/settings/settingsStore.js","webpack://jrs-ui/../js-sdk/src/common/extension/jQueryDatepickerExtension.js","webpack://jrs-ui/../js-sdk/src/common/extension/jQueryTimepickerExtension.js","webpack://jrs-ui/../js-sdk/src/components/dateAndTime/DateAndTimePicker.js","webpack://jrs-ui/../js-sdk/src/components/dateAndTime/template/dateTimePopupContainer.htm","webpack://jrs-ui/./runtime_dependencies/dragdropextra/dragdropextra.js","webpack://jrs-ui/./src/settings/dateTimeSettings.settings.js"],"names":["resource","messages","resourceLabelMaxLength","resourceIdMaxLength","resourceDescriptionMaxLength","PROPAGATE_EVENT","STEP_DISPLAY_ID","FLOW_CONTROLS_ID","initSwipeScroll","display","jQuery","TouchController","parent","parents","eq","submitForm","formId","params","fillForm","url","buildActionUrl","attr","submit","registerClickHandlers","handlers","observeElementSelector","addAtBeginning","_bodyClickEventHandlers","Array","prototype","unshift","push","apply","selector","on","event","each","clickEventHandler","result","Event","stop","$break","TreeWrapper","options","that","this","_treeId","treeId","_resourceUriInput","resourceUriInput","_uri","getValue","uri","providerId","interpolate","id","treeOptions","inject","treeOption","key","_tree","dynamicTree","observe","openAndSelectNode","memo","node","param","setValue","getTreeId","getTree","selectFolder","folderUri","getSelectedFolderUri","switchButtonState","button","state","buttonManager","call","switchDisableState","element","disable","generateResourceId","name","window","localContext","initOptions","resourceIdNotSupportedSymbols","replace","RegExp","testResourceId","resourceId","test","labelValidator","value","isValid","errorMessage","blank","length","getLabelValidationEntry","validators","method","mandatory","tooLong","maxLength","getIdValidationEntry","resourceIdValidator","_isEditMode","getDescriptionValidationEntry","descriptionValidator","dataSourceValidator","trim","queryValidator","getValidationEntries","elementsToValidate","collect","validationEntry","validator","PAGE_ID","DATA_TYPE_ID","LABEL_ID","RESOURCE_ID_ID","DESCRIPTION_ID","SAVE_BUTTON_ID","CHANGE_TYPE_BUTTON_ID","_canGenerateId","initialize","_form","layoutModule","find","_dataType","_label","_resourceId","_description","_saveButton","_changeTypeButton","isEditMode","_initEvents","click","bindAsEventListener","e","_isDataValid","stopPropagation","target","include","ValidationModule","bind","CalendarInputComponent","container","jquery","onChange","onchange","isReadOnly","readOnly","hasDate","date","hasTime","time","pickerOptions","_","defaultPickerOptions","dateTimeSettings","picker","field","showOn","buttonText","changeYear","changeMonth","showButtonPanel","onChangeMonthYear","beforeShow","create","inputField","cancelEventBubbling","append","pickerType","next","addClass","val","jrsConfigs","minPicker","$","maxPicker","resourceDataType","isIPad","JSTooltip","srcElement","label","text","offsets","showBelow","templateId","loadTextCallback","loadTextExecuted","disabled","removed","_toAttribute","TOOLTIP_TEMPLATE","_fromAttribute","TOOLTIP_TEMPLATE_ID","TOOLTIP_LABEL","TOOLTIP_TEXT","_escapeText","jsTooltip","tooltipModule","tooltips","addVar","addMethod","attrName","xssUtil","writeAttribute","isArray","join","SEPARATOR","hasAttribute","readAttribute","split","elements","values","index","update","getElementZIndex","elem","parseInt","css","initialZIndex","toArray","zIndex","Math","max","txt","tooltipOffsets","_element","getBoxOffsets","clientHeight","getScrollLeft","getScrollTop","setStyle","position","left","top","_calculateZIndex","labelElements","select","LABEL_PATTERN","textElements","TEXT_PATTERN","_setValues","removeClass","clientWidth","width","leftOffset","height","topOffset","hideJSTooltip","showJSTooltip","indexOf","splice","TOOLTIP_PATTERN","ELEMENT_WITH_TOOLTIP_PATTERN","actualX","actualY","cleanUp","appearDelay","timer","clearTimeout","setTimeout","show","evt","clientX","clientY","enableTooltips","forEach","tooltip","enable","disableTooltips","hide","off","testId","document","getElementById","setAttribute","removeAttribute","reject","t","userLocale","availableLocales","postfix","locale","substring","DateAndTimePicker","_jasperPrefix","_mainDivId","_jasperPopupClass","originalNewInst","arguments","dpDiv","originalGoToToday","_selectDate","$input","opts","year","month","datepicker","timepicker","currentYear","selectedYear","currentMonth","selectedMonth","currentDay","selectedDay","_updateDateTime","instance","originalOnTimeChange","_onTimeChange","$timeObj","setSelectionRange","DATE_TIME_DEFAULTS","stepHour","stepMinute","stepSecond","showSecond","constrainInput","TIME_DEFAULTS","log","logger","err","warn","Backbone","constructor","hasOwnProperty","dateFormat","timeFormat","inline","el","skipMoving","discoverPickerType","provideDefaultPickerOptions","fixPopupPositionAndStyling","self","$el","_callPickerAction","getDate","getTime","setDate","debug","remove","empty","stopListening","setDefaults","configs","Helpers","movePickerRelativelyToTriggerIcon","stylePopupContainer","type","originalBeforeShowFn","afterInject","inst","input","offset","parseFloat","move","offsetWidth","marginLeft","$dpDiv","$popupContainer","$parent","is","detach","Draggable","startDrag","isDragging","dragging","delta","currentDelta","zindex","originalZ","Element","getStyle","style","ghosting","_clone","cloneNode","_originallyAbsolute","Position","absolutize","parentNode","insertBefore","tagName","body","appendChild","superghosting","prepare","pointer","pointerX","pointerY","getElementsByTagName","me","Prototype","Browser","IE","clearAttributes","mergeAttributes","removeChild","getWidth","getHeight","originalScrollTop","draw","scroll","where","_getWindowScroll","originalScrollLeft","scrollLeft","scrollTop","Draggables","notify","starteffect","point","pos","cumulativeOffset","r","realOffset","deltaX","deltaY","d","_isScrollChild","p","map","i","mouseOffset","snap","Object","isFunction","v","round","constraint","visibility","initDrag","isUndefined","_dragging","touches","isLeftClick","tag_name","toUpperCase","activate","countdown","DEFAULT_TOLERANCE","fire","targetEvent","Droppables","isAffected","drop","jo","w","h","p0","p1","positioned_within","_containers","isContained","accept","classNames","detect","finishDrag","success","isIE","onmousemove","quiet","relativize","dropped","onDropped","revert","reverteffect","endeffect","deactivate","reset","Sortable","defaultOnHover","onHover","dropon","overlap","hasClassName","defaultOnEmptyHover","onEmptyHover","SortableObserver","Class","observer","lastValue","serialize","onStart","onEnd","eventName","draggable","unmark","getSortableObserverConstructor","drops","affected","findDeepestChild","last_active","within","set"],"mappings":"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","file":"_chunks/chunk.7926.js","sourcesContent":["/*\n * Copyright (C) 2005 - 2022 TIBCO Software Inc. All rights reserved.\n * http://www.jaspersoft.com.\n *\n * Unless you have purchased a commercial license agreement from Jaspersoft,\n * the following license terms apply:\n *\n * This program is free software: you can redistribute it and/or modify\n * it under the terms of the GNU Affero General Public License as\n * published by the Free Software Foundation, either version 3 of the\n * License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the\n * GNU Affero General Public License for more details.\n *\n * You should have received a copy of the GNU Affero General Public License\n * along with this program. If not, see <http://www.gnu.org/licenses/>.\n */\n/**\n * @version: $Id$\n */\nimport {$break} from 'prototype';\nimport TouchController from '../util/touch.controller';\nimport {buildActionUrl} from \"../util/utils.common\";\nimport buttonManager from '../core/core.events.bis';\nimport dynamicTree from '../dynamicTree/dynamicTree.utils';\nimport jQuery from 'jquery';\n\nvar resource = {\n    messages: {},\n    resourceLabelMaxLength: 100,\n    resourceIdMaxLength: 100,\n    resourceDescriptionMaxLength: 250,\n    PROPAGATE_EVENT: 'propagateEvent',\n    STEP_DISPLAY_ID: 'stepDisplay',\n    FLOW_CONTROLS_ID: 'flowControls',\n    initSwipeScroll: function () {\n        var display = jQuery('#' + resource.STEP_DISPLAY_ID)[0];    //        var hasControls = $(resource.FLOW_CONTROLS_ID).childElements().length > 0;\n        //\n        //        var scrollElement = hasControls ? display.up() : display;\n        //        var hasControls = $(resource.FLOW_CONTROLS_ID).childElements().length > 0;\n        //\n        //        var scrollElement = hasControls ? display.up() : display;\n        display && new TouchController(display.parent(), display.parents().eq(2), {}    //            debug: true\n        );\n    },\n    submitForm: function (formId, params, fillForm) {\n        if (!params) {\n            return;\n        }    // prepare action url\n        // prepare action url\n        var url = buildActionUrl(params);\n        fillForm && fillForm();    // write form attributes and submit it\n        // write form attributes and submit it\n        jQuery('#' + formId).attr('method', 'post').attr('action', url);\n        jQuery('#' + formId)[0].submit();\n    },\n    // Setup main event handler for click events on Add Resource pages.\n    registerClickHandlers: function (handlers, observeElementSelector, addAtBeginning) {\n        if (resource._bodyClickEventHandlers) {\n            //If we want some handlers to fire before others we should pass addAtBeginning = true\n            (addAtBeginning ? Array.prototype.unshift : Array.prototype.push).apply(resource._bodyClickEventHandlers, handlers);\n            return;\n        }\n        resource._bodyClickEventHandlers = handlers;\n        var selector = observeElementSelector || 'body';\n        jQuery(selector).on('click', function (event) {\n            resource._bodyClickEventHandlers && resource._bodyClickEventHandlers.each(function (clickEventHandler) {\n                var result = clickEventHandler(event);    //if handler returns some result\n                //this means that we have found necessary handler so\n                //do not need to process other\n                //if handler returns some result\n                //this means that we have found necessary handler so\n                //do not need to process other\n                if (result) {\n                    if (result !== resource.PROPAGATE_EVENT) {\n                        Event.stop(event);\n                    }\n                    throw $break;\n                }\n            });\n        });\n    },\n    TreeWrapper: function (options) {\n        var that = this;\n        this._treeId = options.treeId;\n        this._resourceUriInput = jQuery('#' + options.resourceUriInput || '#resourceUri')[0];\n        this._uri = this._resourceUriInput && this._resourceUriInput.getValue() || options.uri || '/';\n        if (!options.providerId)\n            throw 'There is no tree provider set for tree #{id}'.interpolate({ id: this._treeId });    // Setup folders tree\n        // Setup folders tree\n        var treeOptions = [\n            'providerId',\n            'rootUri',\n            'organizationId',\n            'publicFolderUri',\n            'urlGetNode',\n            'urlGetChildren'\n        ].inject({}, function (treeOption, key) {\n            options[key] !== null && (treeOption[key] = options[key]);\n            return treeOption;\n        });\n        this._tree = new dynamicTree.createRepositoryTree(this._treeId, treeOptions);\n        this._tree.observe('tree:loaded', function () {\n            that._tree.openAndSelectNode(jQuery('#' + that._resourceUriInput)[0].getValue());\n        });\n        this._tree.observe('leaf:selected', function (event) {\n            that._uri = event.memo.node.param.uri;\n            that._resourceUriInput.setValue(that._uri);\n        });\n        this._tree.observe('node:selected', function () {\n            that._resourceUriInput.setValue(that._uri = '');\n        });\n        return {\n            getTreeId: function () {\n                return that._treeId;\n            },\n            getTree: function () {\n                return that._tree;\n            },\n            selectFolder: function (folderUri) {\n                that._tree.openAndSelectNode(folderUri);\n            },\n            getSelectedFolderUri: function () {\n                return that._uri;\n            }\n        };\n    },\n    ////////////////////////////////\n    // Utility Methods\n    ////////////////////////////////\n    switchButtonState: function (button, state) {\n        buttonManager[state ? 'enable' : 'disable'].call(buttonManager, button);\n    },\n    switchDisableState: function (element, disable) {\n        (element = jQuery(element)[0]) && element[disable ? 'disable' : 'enable'].call(element);\n    },\n    generateResourceId: function (name) {\n        if (window.localContext && window.localContext.initOptions && window.localContext.initOptions.resourceIdNotSupportedSymbols) {\n            return name.replace(new RegExp(window.localContext.initOptions.resourceIdNotSupportedSymbols, 'g'), '_');\n        } else {\n            throw 'There is no resourceIdNotSupportedSymbols property in init options.';\n        }\n    },\n    testResourceId: function (resourceId) {\n        if (window.localContext && window.localContext.initOptions && window.localContext.initOptions.resourceIdNotSupportedSymbols) {\n            return new RegExp(window.localContext.initOptions.resourceIdNotSupportedSymbols, 'g').test(resourceId);\n        } else {\n            throw 'There is no resourceIdNotSupportedSymbols property in init options.';\n        }\n    },\n    labelValidator: function (value) {\n        var isValid = true;\n        var errorMessage = '';\n        if (value.blank()) {\n            errorMessage = resource.messages['labelIsEmpty'];\n            isValid = false;\n        } else if (value.length > resource.resourceLabelMaxLength) {\n            errorMessage = resource.messages['labelToLong'];\n            isValid = false;\n        }\n        return {\n            isValid: isValid,\n            errorMessage: errorMessage\n        };\n    },\n    getLabelValidationEntry: function (element) {\n        return {\n            element: element,\n            validators: [\n                {\n                    method: 'mandatory',\n                    messages: { mandatory: resource.messages['labelIsEmpty'] }\n                },\n                {\n                    method: 'minMaxLength',\n                    messages: { tooLong: resource.messages['labelToLong'] },\n                    options: { maxLength: resource.resourceLabelMaxLength }\n                }\n            ]\n        };\n    },\n    getIdValidationEntry: function (element) {\n        return {\n            element: element,\n            validators: [\n                {\n                    method: 'resourceIdChars',\n                    messages: resource.messages\n                },\n                {\n                    method: 'mandatory',\n                    messages: { mandatory: resource.messages['resourceIdIsEmpty'] }\n                },\n                {\n                    method: 'minMaxLength',\n                    messages: { tooLong: resource.messages['resourceIdToLong'] },\n                    options: { maxLength: resource.resourceIdMaxLength }\n                }\n            ]\n        };\n    },\n    /**\n     * The context of this method should contain _isEditMode property. Id it is true then validator will not validate\n     * the value but will return isValid=true.\n     */\n    resourceIdValidator: function (value) {\n        var isValid = true;\n        var errorMessage = '';\n        if (!this._isEditMode) {\n            if (value.blank()) {\n                errorMessage = resource.messages['resourceIdIsEmpty'];\n                isValid = false;\n            } else if (value.length > resource.resourceIdMaxLength) {\n                errorMessage = resource.messages['resourceIdToLong'];\n                isValid = false;\n            } else if (resource.testResourceId(value)) {\n                errorMessage = resource.messages['resourceIdInvalidChars'];\n                isValid = false;\n            }\n        }\n        return {\n            isValid: isValid,\n            errorMessage: errorMessage\n        };\n    },\n    getDescriptionValidationEntry: function (element) {\n        return {\n            element: element,\n            validators: [{\n                method: 'minMaxLength',\n                messages: { tooLong: resource.messages['descriptionToLong'] },\n                options: { maxLength: resource.resourceDescriptionMaxLength }\n            }]\n        };\n    },\n    descriptionValidator: function (value) {\n        var isValid = true;\n        var errorMessage = '';\n        if (value.length > resource.resourceDescriptionMaxLength) {\n            errorMessage = resource.messages['descriptionToLong'];\n            isValid = false;\n        }\n        return {\n            isValid: isValid,\n            errorMessage: errorMessage\n        };\n    },\n    dataSourceValidator: function (value) {\n        var isValid = true;\n        var errorMessage = '';\n        if (value.trim() === '') {\n            errorMessage = resource.messages['dataSourceInvalid'];\n            isValid = false;\n        }\n        return {\n            isValid: isValid,\n            errorMessage: errorMessage\n        };\n    },\n    queryValidator: function (value) {\n        var isValid = true;\n        var errorMessage = '';\n        if (value.trim() === '') {\n            errorMessage = resource.messages['queryInvalid'];\n            isValid = false;\n        }\n        return {\n            isValid: isValid,\n            errorMessage: errorMessage\n        };\n    },\n    getValidationEntries: function (elementsToValidate) {\n        // To use this method all elements should have validator or validationEntry property set.\n        return elementsToValidate.collect(function (element) {\n            if (element.validationEntry) {\n                return element.validationEntry;\n            } else {\n                return {\n                    validator: element.validator,\n                    element: element\n                };\n            }\n        });\n    }\n};\n\nexport default resource;","/*\n * Copyright (C) 2005 - 2022 TIBCO Software Inc. All rights reserved.\n * http://www.jaspersoft.com.\n *\n * Unless you have purchased a commercial license agreement from Jaspersoft,\n * the following license terms apply:\n *\n * This program is free software: you can redistribute it and/or modify\n * it under the terms of the GNU Affero General Public License as\n * published by the Free Software Foundation, either version 3 of the\n * License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the\n * GNU Affero General Public License for more details.\n *\n * You should have received a copy of the GNU Affero General Public License\n * along with this program. If not, see <http://www.gnu.org/licenses/>.\n */\n/**\n * @version: $Id$\n */\nimport jQuery from 'jquery';\nimport layoutModule from '../core/core.layout';\nimport resource from './resource.base';\nimport {ValidationModule} from \"../util/utils.common\";\n\nvar resourceDataType = {\n    PAGE_ID: 'addResource_dataType',\n    DATA_TYPE_ID: 'dataType\\\\.dataTypeType',\n    LABEL_ID: 'dataType\\\\.label',\n    RESOURCE_ID_ID: 'dataType\\\\.name',\n    DESCRIPTION_ID: 'dataType\\\\.description',\n    SAVE_BUTTON_ID: 'done',\n    CHANGE_TYPE_BUTTON_ID: 'changeCombo',\n    _canGenerateId: true,\n    initialize: function (options) {\n        this._form = jQuery('#' + layoutModule.PAGE_BODY_ID).find('form')[0];\n        this._dataType = jQuery('#' +this.DATA_TYPE_ID)[0];\n        this._label = jQuery('#' +this.LABEL_ID)[0];\n        this._resourceId = jQuery('#' +this.RESOURCE_ID_ID)[0];\n        this._description = jQuery('#' +this.DESCRIPTION_ID)[0];\n        this._saveButton = jQuery('#' +this.SAVE_BUTTON_ID);\n        this._changeTypeButton = jQuery('#' +this.CHANGE_TYPE_BUTTON_ID)[0];\n        this._isEditMode = options.isEditMode;\n        this._label.validator = resource.labelValidator.bind(this);\n        this._resourceId.validator = resource.resourceIdValidator.bind(this);\n        this._description.validator = resource.descriptionValidator.bind(this);\n        this._initEvents();\n    },\n    _initEvents: function () {\n        this._dataType.observe('change', function () {\n            this._changeTypeButton.click();\n        }.bindAsEventListener(this));\n        this._saveButton.on('click', function (e) {\n            if (!this._isDataValid()) {\n                e.stopPropagation();\n            }\n        }.bindAsEventListener(this));\n        jQuery(this._form).on('keyup', function (e) {\n            var element = e.target;\n            var targetElements = [\n                this._label,\n                this._resourceId,\n                this._description\n            ];\n            if (targetElements.include(element)) {\n                ValidationModule.validate(resource.getValidationEntries([element]));\n                if (element == this._resourceId && this._resourceId.getValue() != resource.generateResourceId(this._label.getValue())) {\n                    this._canGenerateId = false;\n                }\n                if (element == this._label && !this._isEditMode && this._canGenerateId) {\n                    this._resourceId.setValue(resource.generateResourceId(this._label.getValue()));\n                    ValidationModule.validate(resource.getValidationEntries([this._resourceId]));\n                }\n            }\n        }.bind(this));\n    },\n    _isDataValid: function () {\n        var elementsToValidate = [\n            this._label,\n            this._resourceId,\n            this._description\n        ];\n        return ValidationModule.validate(resource.getValidationEntries(elementsToValidate));\n    }\n};\n\nexport default resourceDataType;","/*\n * Copyright (C) 2005 - 2022 TIBCO Software Inc. All rights reserved.\n * http://www.jaspersoft.com.\n *\n * Unless you have purchased a commercial license agreement from Jaspersoft,\n * the following license terms apply:\n *\n * This program is free software: you can redistribute it and/or modify\n * it under the terms of the GNU Affero General Public License as\n * published by the Free Software Foundation, either version 3 of the\n * License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the\n * GNU Affero General Public License for more details.\n *\n * You should have received a copy of the GNU Affero General Public License\n * along with this program. If not, see <http://www.gnu.org/licenses/>.\n */\n\nimport jQuery from 'jquery';\nimport _ from 'underscore';\nimport dateTimeSettings from '../settings/dateTimeSettings.settings';\nimport {cancelEventBubbling} from '../util/utils.common';\nimport '../config/dateAndTimeSettings';\n\nvar CalendarInputComponent = function (options) {\n    this.container = null;\n    if (typeof options.container !== 'undefined') {\n        this.container = typeof options.container.jquery === 'undefined' ? jQuery(options.container) : options.container;\n    }\n    this.name = options.name;\n    this.id = options.name.replace('.', '_');\n    this.value = options.value;\n    this.onChange = options.onchange || null;\n    this.isReadOnly = typeof options.readOnly === 'undefined' ? false : options.readOnly;\n    this.hasDate = typeof options.date !== 'undefined' && options.date !== '' && options.date === 'true';\n    this.hasTime = typeof options.time !== 'undefined' && options.time !== '' && options.time === 'true';\n    this.pickerOptions = _.extend({}, this.defaultPickerOptions);\n    this.hasDate && _.extend(this.pickerOptions, dateTimeSettings.datepicker);\n    this.hasTime && _.extend(this.pickerOptions, dateTimeSettings.timepicker);\n    if (typeof options.picker !== 'undefined' && _.isObject(options.picker)) {\n        _.extend(this.pickerOptions, options.picker);\n    }\n    this.field = null;\n};\nCalendarInputComponent.prototype.defaultPickerOptions = {\n    showOn: 'button',\n    buttonText: '',\n    changeYear: true,\n    changeMonth: true,\n    showButtonPanel: true,\n    onChangeMonthYear: null,\n    beforeShow: jQuery.datepicker.movePickerRelativelyToTriggerIcon\n};\nCalendarInputComponent.prototype.create = function () {\n    var inputField = jQuery('<input type=\\'text\\'/>').attr({\n        name: this.name,\n        id: this.id,\n        value: this.value\n    });\n    inputField.on('mousedown', cancelEventBubbling);\n    if (this.onChange) {\n        inputField.on('change', this.onChange);\n    }\n    if (this.isReadOnly) {\n        inputField.attr('disabled', 'disabled');\n    }\n    this.field = inputField;\n    this.container.append(this.field);\n    if (!this.isReadOnly) {\n        var pickerType = this.hasDate ? 'date' : '';\n        pickerType += this.hasTime ? 'time' : '';\n        pickerType += 'picker';\n        jQuery.fn[pickerType].call(inputField, this.pickerOptions).next().addClass('button').addClass('picker');    // Prototype.js compatibility\n        // Prototype.js compatibility\n        inputField[0].getValue = function () {\n            return jQuery(this).val();\n        };\n    }\n};\nexport default CalendarInputComponent;","/*\n * Copyright (C) 2005 - 2019 TIBCO Software Inc. All rights reserved.\n * http://www.jaspersoft.com.\n *\n * Unless you have purchased a commercial license agreement from Jaspersoft,\n * the following license terms apply:\n *\n * This program is free software: you can redistribute it and/or modify\n * it under the terms of the GNU Affero General Public License as\n * published by the Free Software Foundation, either version 3 of the\n * License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the\n * GNU Affero General Public License for more details.\n *\n * You should have received a copy of the GNU Affero General Public License\n * along with this program. If not, see <http://www.gnu.org/licenses/>.\n */\n\nimport resourceDataType from '../../resource/resource.dataType';\nimport _ from 'underscore';\nimport $ from 'jquery';\nimport CalendarInputComponent from '../../components/components.calendarInput';\nimport jrsConfigs from 'js-sdk/src/jrs.configs';\nimport resource from '../../resource/resource.base';\nimport {isIPad} from \"../../util/utils.common\";\n\nvar options = jrsConfigs.addDataType.localContext.initOptions;\n_.extend(window.localContext, jrsConfigs.addDataType.localContext);\n_.extend(resource.messages, jrsConfigs.addDataType.resource.messages);\nif (hasDateOrTimePickers()) {\n    var minPicker = new CalendarInputComponent(jrsConfigs.addDataType.minValueText);\n    minPicker.container = $('label.minPicker');\n    minPicker.create();\n    var maxPicker = new CalendarInputComponent(jrsConfigs.addDataType.maxValueText);\n    maxPicker.container = $('label.maxPicker');\n    maxPicker.create();\n}\nresourceDataType.initialize(options);\nisIPad() && resource.initSwipeScroll();    //workraround to make jquery-ui work properly with 'jr' prefix\n//workraround to make jquery-ui work properly with 'jr' prefix\n$('body').addClass('jr');\n\nfunction hasDateOrTimePickers() {\n    return _.indexOf([\n        3,\n        4,\n        5\n    ], jrsConfigs.addDataType.type) > -1;\n}","/*\n * Copyright (C) 2005 - 2022 TIBCO Software Inc. All rights reserved.\n * http://www.jaspersoft.com.\n *\n * Unless you have purchased a commercial license agreement from Jaspersoft,\n * the following license terms apply:\n *\n * This program is free software: you can redistribute it and/or modify\n * it under the terms of the GNU Affero General Public License as\n * published by the Free Software Foundation, either version 3 of the\n * License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the\n * GNU Affero General Public License for more details.\n *\n * You should have received a copy of the GNU Affero General Public License\n * along with this program. If not, see <http://www.gnu.org/licenses/>.\n */\n\n\n/**\n * @version: $Id$\n */\n\nimport _ from 'underscore';\nimport {\n    isArray,\n    getBoxOffsets,\n    getScrollLeft,\n    getScrollTop\n} from '../util/utils.common';\nimport jQuery from 'jquery';\n\nimport xssUtil from 'js-sdk/src/common/util/xssUtil';\n\nimport layoutModule from '../core/core.layout';\n\n/**\n * Usage:\n *      Within HTML markup. (Not working with button element)\n *\n *      <code>\n *      &lt;li tooltiptext=\"Hello\"&gt;Item 1&lt;/li&gt;\n *      &lt;li tooltiptext=\"Hello\" tooltiplabel=\"URA!\"&gt;Item 1&lt;/li&gt;\n *      &lt;li tooltiptext=\"Hello\" tooltiplabel=\"URA!\" tooltiptemplate=\"tID\"&gt;Item 1&lt;/li&gt;\n *      </code>\n *\n *      Within JavaScript\n *      <code>\n *      new JSTooltip(element, { text: \"tooltipText\" }).show();\n *      new JSTooltip(element, { text: \"tooltipText\", offsets: [100, 50] }).show();\n *      new JSTooltip(element, { text: \"tooltipText\" }).show([100, 50]);\n *     new JSTooltip(element, { label: \"tooltipLabel\", text: \"tooltipText\", templateId: \"templateId\" });\n *      new JSTooltip(element, { label: [\"tooltipLabel1\", \"tooltipLabel2\"], text: [\"tooltipText1\", \"tooltipText2\", \"tooltipText3\"], templateId: \"templateId\" });\n *\n *      tooltipModule.showJSTooltip(element, [100, 50]);\n *      tooltipModule.hideJSTooltip(element);\n *      </code>\n * @param element\n * @param options {Object}\n * <ul>\n *      <li>label {String} - Label for the tooltip</li>\n *      <li>label {Array} - List of labels for complex tooltip</li>\n *      <li>text {String} - Text for the tooltip</li>\n *      <li>text {Array} - List of messages for complex tooltip</li>\n *      <li>templateId {String} - DOM ID of template for the tooltip </li>\n *      <li>offsets {Array} - Used to show the tooltip in position. First item in array is the X point adn second is the Y point </li>\n *      <li>showBelow {Boolean} - Show bellow element</li>\n * </ul>\n *\n */\nfunction JSTooltip(element, options) {\n    if (element) {\n        this.srcElement = element;\n\n        if (options) {\n            this.label = options.label;\n            this.text = options.text;\n            this.offsets = options.offsets;\n            this.showBelow = !! options.showBelow;\n            this.templateId = options.templateId;\n            this.loadTextCallback = options.loadTextCallback;\n            this.loadTextExecuted = false;\n        }\n\n        this.disabled = false;\n        this.removed = false;\n\n        if (this.templateId) {\n            this._toAttribute(this.TOOLTIP_TEMPLATE, this.templateId);\n        } else {\n            var id = this._fromAttribute(this.TOOLTIP_TEMPLATE);\n            this.templateId = (id && id.length > 0) ? id : this.TOOLTIP_TEMPLATE_ID;\n        }\n        if (this.label) {\n            this._toAttribute(this.TOOLTIP_LABEL, this.label);\n        } else {\n            this.label = this._fromAttribute(this.TOOLTIP_LABEL);\n        }\n        if (this.text) {\n            this._toAttribute(this.TOOLTIP_TEXT, this.text);\n        } else {\n            this.text = this._fromAttribute(this.TOOLTIP_TEXT);\n        }\n\n        // escape against XSS\n        if (this.label)\n            this.label = this._escapeText(this.label);\n        if (this.text)\n            this.text = this._escapeText(this.text);\n\n        this.srcElement.jsTooltip = this;\n\n        tooltipModule.tooltips.push(this);\n    }\n}\n\nJSTooltip.addVar(\"SEPARATOR\", \"@@\");\nJSTooltip.addVar(\"TOOLTIP_LABEL\", \"tooltiplabel\");\nJSTooltip.addVar(\"TOOLTIP_TEXT\", \"tooltiptext\");\nJSTooltip.addVar(\"TOOLTIP_TEMPLATE\", \"tooltiptemplate\");\nJSTooltip.addVar(\"TOOLTIP_TEMPLATE_ID\", \"jsTooltip\");\nJSTooltip.addVar(\"LABEL_PATTERN\", \".message.label\");\nJSTooltip.addVar(\"TEXT_PATTERN\", \".message:not(.label)\");\n\nJSTooltip.addMethod(\"_toAttribute\", function(attrName, value) {\n    if(this.srcElement) {\n        value = xssUtil.hardEscape(value);\n        this.srcElement.writeAttribute(attrName, isArray(value) ? value.join(this.SEPARATOR) : value);\n    }\n});\n\nJSTooltip.addMethod(\"_fromAttribute\", function(attrName) {\n    if(this.srcElement && this.srcElement.hasAttribute(attrName)) {\n        var value = this.srcElement.readAttribute(attrName);\n        return value.include(this.SEPARATOR) ? value.split(this.SEPARATOR) : value;\n    }\n\n    return null;\n});\n\nJSTooltip.addMethod(\"_setValues\", function(elements, values) {\n    elements.each(function (element, index) {\n        if (_.isString(values[index]) || _.isNumber(values[index])) {\n            element.update(xssUtil.hardEscape(values[index]));\n        }\n    });\n});\n\nJSTooltip.addMethod(\"_calculateZIndex\", function(element) {\n    function getElementZIndex(elem) {\n        return parseInt(jQuery(elem).css(\"z-index\"));\n    }\n\n    // Get tooltip element zIndex.\n    var initialZIndex = getElementZIndex(element);\n    if (!_.isNumber(initialZIndex) || _.isNaN(initialZIndex)) {\n        initialZIndex = 1000;\n    }\n\n    var parents = _.flatten([this.srcElement, jQuery(this.srcElement).parents().toArray()]);\n\n    // Calculates max z-index between tooltip element and parent elements.\n    var maxZIndex = _.reduce(parents, function(memo, parent) {\n        var zIndex = getElementZIndex(parent);\n\n        if (_.isNumber(zIndex) && !_.isNaN(zIndex)) {\n            memo = Math.max(memo, zIndex);\n        }\n\n        return memo;\n    }, initialZIndex);\n\n    return maxZIndex + 1;\n});\n\nJSTooltip.addMethod(\"_escapeText\", function(text) {\n    return _.isArray(text)\n        ? _.map(text, function (txt) { return xssUtil.hardEscape(txt)})\n        : xssUtil.hardEscape(text);\n});\n\nJSTooltip.addMethod(\"show\", function(tooltipOffsets) {\n    if(tooltipOffsets) {\n        this.offsets = tooltipOffsets;\n    }\n\n    this._element = jQuery('#' + this.templateId)[0];\n\n    var offsets;\n    if (this.showBelow) {\n        offsets = getBoxOffsets(this.srcElement);\n        offsets[1] += this.srcElement.clientHeight + 5;\n    } else {\n        offsets = [getScrollLeft() + 5, getScrollTop() + 5];\n    }\n\n    if (this.offsets) {\n        offsets[0] += this.offsets[0];\n        offsets[1] += this.offsets[1];\n    }\n\n    this._element.setStyle({\n        position: \"absolute\",\n        left: offsets[0] + 'px',\n        top: offsets[1] + 'px',\n        zIndex: this._calculateZIndex(this._element)\n    });\n\n    var labelElements = this._element.select(this.LABEL_PATTERN);\n    var textElements = this._element.select(this.TEXT_PATTERN);\n\n    if(this.label) {\n        this._setValues(labelElements, isArray(this.label) ? this.label : [this.label]);\n    }\n    if(this.text) {\n        this._setValues(textElements, isArray(this.text) ? this.text : [this.text]);\n    }\n\n    jQuery(this._element).removeClass(layoutModule.HIDDEN_CLASS);\n\n    if (offsets[0] + this._element.clientWidth > jQuery(window).width()) {\n        var leftOffset = offsets[0] - this._element.clientWidth > 0 ? offsets[0] - this._element.clientWidth : 15;\n\n        this._element.setStyle({ left: leftOffset + \"px\"});\n    }\n    if (offsets[1] + this._element.clientHeight > jQuery(window).height()) {\n        var topOffset = offsets[1] - this._element.clientHeight - 10;\n        this._element.setStyle({ top: topOffset + \"px\"});\n    }\n\n    if (this.loadTextCallback && !this.loadTextExecuted) {\n        this.loadTextExecuted = true;\n\n        this.loadTextCallback(this);\n    }\n\n    return this;\n});\n\nJSTooltip.addMethod(\"updateText\", function(text) {\n    this.text = this._escapeText(text);\n\n    if (this._element) {\n        var textElements = this._element.select(this.TEXT_PATTERN);\n\n        this._setValues(textElements, isArray(this.text) ? this.text : [this.text]);\n    }\n});\n\nJSTooltip.addMethod(\"hide\", function() {\n    if (this._element) {\n        jQuery(this._element).addClass(layoutModule.HIDDEN_CLASS);\n    }\n});\n\nJSTooltip.addMethod(\"disable\", function() {\n    tooltipModule.hideJSTooltip(this.srcElement);\n    this.disabled = true;\n});\n\nJSTooltip.addMethod(\"enable\", function() {\n    this.disabled = false;\n    tooltipModule.showJSTooltip(this.srcElement, this.offsets);\n});\n\nJSTooltip.addMethod(\"remove\", function() {\n    var index = tooltipModule.tooltips.indexOf(this.srcElement.jsTooltip);\n    if (index !== -1) {\n        tooltipModule.hideJSTooltip(this.srcElement);\n        tooltipModule.tooltips.splice(index, 1);\n    }\n    this.removed = true;\n});\n\nJSTooltip.addMethod(\"isRemoved\", function() {\n    return this.removed;\n});\n\nvar tooltipModule = {\n    TOOLTIP_PATTERN: \"*[tooltiptext] > *\",\n    ELEMENT_WITH_TOOLTIP_PATTERN: \"*[tooltiptext]\",\n\n    tooltips: [],\n\n    showJSTooltip: function(element, offsets) {\n        if (!element.jsTooltip) {\n            element.jsTooltip = new JSTooltip(element, {});\n        } else if (!element.jsTooltip.disabled && offsets) {\n            var actualX = offsets[0];\n            var actualY = offsets[1];\n\n            this.cleanUp();\n\n            var appearDelay = jQuery(element).attr(\"tooltipappeardelay\");\n            appearDelay = appearDelay ? parseInt(appearDelay) : 1000;\n\n            element.jsTooltip.timer && clearTimeout(element.jsTooltip.timer);\n            element.jsTooltip.timer = setTimeout(function() {\n                element.jsTooltip.show([actualX, actualY]);\n            }, appearDelay);\n\n            jQuery(element).on(\"mousemove\", function(evt){\n                actualX = evt.clientX;\n                actualY = evt.clientY;\n            });\n        }\n    },\n\n    enableTooltips: function() {\n        var tooltips = this.tooltips || [];\n\n        tooltips.forEach(function(tooltip) {\n            tooltip.enable();\n        });\n    },\n\n    disableTooltips: function() {\n        var tooltips = this.tooltips || [];\n\n        tooltips.forEach(function(tooltip) {\n            tooltip.disable();\n        });\n    },\n\n    hideJSTooltip: function(element) {\n        if (element && element.jsTooltip) {\n            element.jsTooltip.timer && clearTimeout(element.jsTooltip.timer);\n\n            element.jsTooltip.hide();\n\n            jQuery(element).off(\"mousemove\");\n        }\n    },\n\n    cleanUp: function() {\n        if (this.tooltips && this.tooltips.length > 0) {\n            var removed = [];\n            var testId = \"fuigasuifdughaiadbvguaidbapvuwbev\";\n            this.tooltips.each(function(tooltip) {\n                if (!(tooltip.srcElement.id && document.getElementById(tooltip.srcElement.id))){\n                    tooltip.srcElement.setAttribute(\"id\",testId);\n                    if (!document.getElementById(testId)){\n                        tooltip.hide();\n                        removed.push(tooltip);\n                    }\n                    tooltip.srcElement.removeAttribute(\"id\");\n                }\n            });\n\n            if (removed.length > 0) {\n                this.tooltips = this.tooltips.reject(function(t) {\n                    return removed.include(t);\n                });\n            }\n        }\n    }\n};\n\nexport {JSTooltip, tooltipModule};\n","/*\n * Copyright (C) 2005 - 2022 TIBCO Software Inc. All rights reserved.\n * http://www.jaspersoft.com.\n *\n * Unless you have purchased a commercial license agreement from Jaspersoft,\n * the following license terms apply:\n *\n * This program is free software: you can redistribute it and/or modify\n * it under the terms of the GNU Affero General Public License as\n * published by the Free Software Foundation, either version 3 of the\n * License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the\n * GNU Affero General Public License for more details.\n *\n * You should have received a copy of the GNU Affero General Public License\n * along with this program. If not, see <http://www.gnu.org/licenses/>.\n */\n\nimport jrsConfigs from 'js-sdk/src/jrs.configs';\nimport $ from 'jquery';\nimport _ from 'underscore';\n\nimport dateTimeSettings from '../settings/dateTimeSettings.settings';\nimport DateAndTimePicker from 'js-sdk/src/components/dateAndTime/DateAndTimePicker';\n\nfunction getLocale(userLocale, availableLocales) {\n    var postfix = 'en';\n    if (userLocale) {\n        if (_.contains(availableLocales, userLocale)) {\n            postfix = userLocale;\n        } else if (_.contains(availableLocales, userLocale.substring(0, 2))) {\n            postfix = userLocale.substring(0, 2);\n        }\n    }\n    return postfix.replace('_', '-');\n}\nvar locale = getLocale(jrsConfigs.userLocale, jrsConfigs.availableLocales);\nDateAndTimePicker.setDefaults({\n    locale: locale,\n    date: dateTimeSettings.datepicker,\n    time: dateTimeSettings.timepicker\n});\nexport default $;","/*\n * Copyright (C) 2005 - 2022 TIBCO Software Inc. All rights reserved.\n * http://www.jaspersoft.com.\n *\n * Unless you have purchased a commercial license agreement from Jaspersoft,\n * the following license terms apply:\n *\n * This program is free software: you can redistribute it and/or modify\n * it under the terms of the GNU Affero General Public License as\n * published by the Free Software Foundation, either version 3 of the\n * License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the\n * GNU Affero General Public License for more details.\n *\n * You should have received a copy of the GNU Affero General Public License\n * along with this program. If not, see <http://www.gnu.org/licenses/>.\n */\n\n// This settings store will be filled with the actual settings loaded from the server\n\nexport default {};","/*\n * Copyright (C) 2005 - 2022 TIBCO Software Inc. All rights reserved.\n * http://www.jaspersoft.com.\n *\n * Unless you have purchased a commercial license agreement from Jaspersoft,\n * the following license terms apply:\n *\n * This program is free software: you can redistribute it and/or modify\n * it under the terms of the GNU Affero General Public License as\n * published by the Free Software Foundation, either version 3 of the\n * License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the\n * GNU Affero General Public License for more details.\n *\n * You should have received a copy of the GNU Affero General Public License\n * along with this program. If not, see <http://www.gnu.org/licenses/>.\n */\n\nimport $ from 'jquery';\n\nimport 'jquery-ui/ui/widgets/datepicker';\n\nvar _jasperPrefix = \"jr\";\nvar _jasperPopupClass = \"jr-jDatepickerPopupContainer\";\n\nvar datepickerId = $.datepicker.dpDiv.attr(\"id\"),\n    _mainDivId = _jasperPrefix + \"-\" + datepickerId;\n\n$.datepicker._mainDivId = _mainDivId;\n\n$.datepicker.dpDiv.attr(\"id\", _mainDivId);\n\n$.datepicker.dpDiv.removeClass();\n\nvar dpDivClass = _jasperPopupClass\n    + ' ui-datepicker ui-widget ui-widget-content ui-helper-clearfix ui-corner-all '\n    + _jasperPrefix;\n\n$.datepicker.dpDiv.addClass(dpDivClass);\n\nvar originalNewInst = $.datepicker._newInst;\n\n$.datepicker._newInst = function() {\n    var result = originalNewInst.apply($.datepicker, arguments);\n\n    result.dpDiv.removeClass(_jasperPrefix);\n    result.dpDiv.addClass(_jasperPrefix);\n\n    return result;\n};\n\nvar originalGoToToday = $.datepicker._gotoToday;\n\n$.datepicker._gotoToday = function(id) {\n    originalGoToToday.call(this, id);\n    this._selectDate(id);\n};\n\nexport default $;","/*\n * Copyright (C) 2005 - 2022 TIBCO Software Inc. All rights reserved.\n * http://www.jaspersoft.com.\n *\n * Unless you have purchased a commercial license agreement from Jaspersoft,\n * the following license terms apply:\n *\n * This program is free software: you can redistribute it and/or modify\n * it under the terms of the GNU Affero General Public License as\n * published by the Free Software Foundation, either version 3 of the\n * License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the\n * GNU Affero General Public License for more details.\n *\n * You should have received a copy of the GNU Affero General Public License\n * along with this program. If not, see <http://www.gnu.org/licenses/>.\n */\n\nimport $ from 'jquery';\n\nimport './jQueryDatepickerExtension';\nimport './jQueryUiSliderAccessExtension';\nimport 'jqueryui-timepicker-addon/dist/jquery-ui-timepicker-addon';\n\nvar originalNewInst = $.timepicker._newInst;\n\n$.timepicker._newInst = function($input, opts) {\n    if (!opts.onChangeMonthYear) {\n        opts.onChangeMonthYear = function(year, month, datepicker, timepicker) {\n            datepicker.currentYear = datepicker.selectedYear;\n            datepicker.currentMonth = datepicker.selectedMonth;\n            datepicker.currentDay = datepicker.selectedDay;\n\n            timepicker._updateDateTime(datepicker);\n        };\n    }\n\n    var instance = originalNewInst.call($.timepicker, $input, opts);\n\n    var originalOnTimeChange = instance._onTimeChange;\n\n    instance._onTimeChange = function() {\n        this.$timeObj[0].setSelectionRange = null;\n\n        return originalOnTimeChange.apply(this, arguments);\n    };\n\n    return instance;\n};\n\nexport default $;","/*\n * Copyright (C) 2005 - 2022 TIBCO Software Inc. All rights reserved.\n * http://www.jaspersoft.com.\n *\n * Unless you have purchased a commercial license agreement from Jaspersoft,\n * the following license terms apply:\n *\n * This program is free software: you can redistribute it and/or modify\n * it under the terms of the GNU Affero General Public License as\n * published by the Free Software Foundation, either version 3 of the\n * License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the\n * GNU Affero General Public License for more details.\n *\n * You should have received a copy of the GNU Affero General Public License\n * along with this program. If not, see <http://www.gnu.org/licenses/>.\n */\n\n\n/**\n* @author: Igor Nesterenko\n* @version: $Id$\n*/\n\nimport Backbone from 'backbone';\nimport $ from 'jquery';\nimport _ from 'underscore';\nimport popupContainerTemplate from './template/dateTimePopupContainer.htm';\n\nimport logger from \"../../common/logging/logger\";\n\nimport \"../../common/extension/jQueryTimepickerExtension\";\n\nvar DATE_TIME_DEFAULTS = {\n        stepHour: 1,\n        stepMinute: 1,\n        stepSecond: 1,\n        showSecond: true,\n        changeMonth: true,\n        changeYear: true,\n        showButtonPanel: true,\n        onChangeMonthYear: null,\n        constrainInput: false\n    },\n    TIME_DEFAULTS = {\n        showSecond:true,\n        constrainInput:false\n    };\n\nlet log = logger.register(\"DateAndTimePicker\");\n\n$.timepicker.log = function (err) {\n    //redirect error messages to our logger\n    log.warn(err);\n};\n\nexport default Backbone.View.extend({\n\n    /**\n     * @constructor DateAndTimePicker\n     * @class DateAndTimePicker\n     * @classdesc DateAndTimePicker decorator over jQuery datetime pickers\n     * @extends Backbone.View\n     * @param {object} options - mixin on Backbone standard properties and jQuery datetime pickers\n     * @description - You have to pass 'el' property to point to element in DOM. We have next behaviour\n     *  - by default it renders with  datetimepicker\n     *  - if only `dateFormat` it renders with datepicker\n     *  - if only `timeFormat` it renders with  timepicker\n     *  - if `dateFormat` and `timeFormat` specified it renders with datetimepicker\n     */\n\n    constructor: function (options) {\n        this.pickerOptions = _.clone(options);\n\n        if (this.pickerOptions.hasOwnProperty(\"dateFormat\") && !_.isString(this.pickerOptions.dateFormat)) {\n            delete this.pickerOptions.dateFormat;\n        }\n        if (this.pickerOptions.hasOwnProperty(\"timeFormat\") && !_.isString(this.pickerOptions.timeFormat)) {\n            delete this.pickerOptions.timeFormat;\n        }\n\n        this.inline = !!this.pickerOptions.el || false;\n        this.skipMoving = this.pickerOptions.skipMoving || false;\n        //clean up from backbone props\n        delete this.pickerOptions.el;\n        delete this.pickerOptions.skipMoving;\n\n        this.pickerType = discoverPickerType(this.pickerOptions);\n\n        this.pickerOptions = provideDefaultPickerOptions(this.pickerOptions, this.pickerType);\n\n        this.pickerOptions = fixPopupPositionAndStyling(this.pickerOptions, this.skipMoving);\n\n        this.log = options.log ? options.log : log;\n\n        Backbone.View.apply(this, arguments);\n    },\n\n    initialize: function () {\n        var self = this;\n\n        //initialize picker\n        this.$el[this.pickerType](this.pickerOptions);\n\n        this._callPickerAction = function (options) {\n            self.$el[self.pickerType](options);\n        }\n    },\n\n    /**\n     * @return {Date} - standart date object\n     * @description Return Date if components has it\n     */\n\n    getDate: function(){\n        var date;\n\n        if (this.pickerType !== \"timepicker\"){\n            date = this.$el[this.pickerType].getDate();\n        }else{\n            date = this.$el[this.pickerType].getTime();\n        }\n        return date;\n    },\n\n    /**\n     * @params {Date|String} date\n     * @return this\n     */\n\n    setDate: function(date){\n\n        if (!date) return this;\n\n        try{\n            //try to convert string to date object\n            // we don't need to convert time because setTime method accepts string time format\n            if (_.isString(date)){\n                if (this.pickerType === \"datetimepicker\") {\n                    date = $.datepicker.parseDateTime(this.pickerOptions.dateFormat, this.pickerOptions.timeFormat,  date);\n                } else if (this.pickerType === \"datepicker\") {\n                    date = $.datepicker.parseDate(this.pickerOptions.dateFormat, date);\n                }\n            }\n\n            if (this.pickerType === \"datepicker\"){\n                this.$el[this.pickerType](\"setDate\", date);\n            }else if (this.pickerType === \"timepicker\") {\n                this.$el[this.pickerType](\"setTime\", date);\n            }else if (this.pickerType === \"datetimepicker\"){\n                this.$el[this.pickerType](\"setTime\", date);\n                this.$el[this.pickerType](\"setDate\", date);\n            }\n\n        }catch(err){\n            this.log.debug(err);\n        }\n        return this;\n    },\n\n    /**\n     * @description Show picker\n     */\n\n    show: function () {\n        this._callPickerAction(\"show\");\n        return this;\n    },\n\n    /**\n     * @description Hide picker\n     */\n\n    hide: function () {\n        this._callPickerAction(\"hide\");\n        return this;\n    },\n\n    remove: function () {\n        this._callPickerAction(\"destroy\");\n        if (this.inline) {\n            this.$el.empty().off();\n            this.stopListening();\n        } else {\n            Backbone.View.prototype.remove.apply(this, arguments);\n        }\n\n    }\n\n}, {\n\n    /**\n     * @param {object} configs - which should contains 'locale', configs for 'date' amd configs for 'time'\n     * @description Provide defaults for locale specific configuration\n     */\n\n    setDefaults : function(configs){\n        $.datepicker.regional[configs.locale] = configs.date;\n        $.datepicker.setDefaults(configs.date);\n        $.timepicker.setDefaults(configs.time);\n    },\n\n    Helpers : {\n\n        fixPopupPositionAndStyling: fixPopupPositionAndStyling,\n\n        movePickerRelativelyToTriggerIcon: movePickerRelativelyToTriggerIcon,\n\n        stylePopupContainer: stylePopupContainer,\n\n        discoverPickerType: discoverPickerType,\n\n        provideDefaultPickerOptions: provideDefaultPickerOptions\n    }\n});\n\nfunction discoverPickerType(options) {\n    var result = \"datetimepicker\";\n    if (options.dateFormat && options.timeFormat) {\n        return result;\n    } else if (options.dateFormat) {\n        result = \"datepicker\"\n    } else if (options.timeFormat) {\n        result = \"timepicker\"\n    }\n    return result;\n}\n\nfunction provideDefaultPickerOptions(options, type){\n\n    var result = options;\n\n    if (\"datetimepicker\" == type || \"datepicker\" == type){\n        result = _.defaults(options, DATE_TIME_DEFAULTS);\n    }else if(\"timepicker\" == type){\n        result = _.defaults(options, TIME_DEFAULTS)\n    }\n\n    return result;\n}\n\nfunction fixPopupPositionAndStyling(options, skipMoving) {\n\n    var originalBeforeShowFn = options.beforeShow;\n\n    options.beforeShow = function () {\n        stylePopupContainer.apply(this, arguments);\n        skipMoving || movePickerRelativelyToTriggerIcon.apply(this, arguments);\n        originalBeforeShowFn && originalBeforeShowFn.apply(this, arguments);\n    };\n\n    options.afterInject = function() {\n        stylePopupContainer.apply(this, [this.$input[0], this.inst]);\n    };\n\n    return options;\n}\n\nfunction movePickerRelativelyToTriggerIcon(input, inst) {\n    var offset = $(input).offset().left;\n    var width = parseFloat(inst.dpDiv.css(\"width\").replace(\"px\", \"\"));\n    var move = offset + input.offsetWidth + width < $(window).width();\n    inst.dpDiv.css({\n        marginLeft: move ? input.offsetWidth + \"px\" : 0\n    });\n}\n\nfunction stylePopupContainer(input, inst) {\n    var $popupContainer = inst.dpDiv,\n        $parent = $popupContainer.parent(),\n        $dpDiv;\n\n    if ($parent && $parent.is('body')) {\n        $dpDiv = $popupContainer.detach();\n        $popupContainer = $(popupContainerTemplate);\n        $popupContainer.append($dpDiv);\n        $('body').append($popupContainer);\n    }\n}\n","export default \"<div class=\\\"jr-jDatepickerPopupContainer jr\\\">\\n\\n    <js-templateNonce></js-templateNonce>\\n</div>\\n\";","//  DragDropExtra Scriptaculous Enhancement, version 0.5\n//  (c) 2007-2008 Christopher Williams, Iterative Designs\n//\n// v0.5 release\n//      - Fixed bug where 2nd drag on an element in IE would result in funny placement of the\n//        element. [shammond42]\n// v0.4 release\n//\t\t- Fixed issue with dragging and dropping in IE7 due to an exception being thrown and not properly reseting in FinishDrag.\n// v0.3 release\n//    - Fixed bug found by Phillip Sauerbeck psauerbeck@gmail. Tests added based on Phillip's efforts.\n// v0.2 release\n//      - Minor bug fix for the releasing of objects after they have been dropped, prevents memory leak.\n// v0.1 release\n//      - initial release for the super ghosting capability\n//      - Drags from one scrolling list to the other (overflow:auto)\n//      - Retains the original object so that it can remain present despite being dragged\n//\n// dragdropextra.js is freely distributable under the terms of an MIT-style license.\n// For details, see the Iterative Designs web site: http://www.iterativedesigns.com/\n// Parts of this code have been taken from the original dragdrop.js library which is\n// copyrighted by (c) 2005-2007 Thomas Fuchs (http://script.aculo.us,\n// http://mir.aculo.us) and (c) 2005-2007 Sammi Williams\n// (http://www.oriontransfer.co.nz, sammi@oriontransfer.co.nz) and available under\n// a MIT-style license.\n\n//////////////////////////////////////////////////////////////////////////////////////////////\n//Jaspersoft Updates (look for comment: JASPERSOFT #x)\n//////////////////////////////////////////////////////////////////////////////////////////////\n// #1 3/27/10 if options.mouseOffset is true then dragging thing positioned with mousepointer\n// \t\t   see Draggable.prototype.draw\n// #2 9/27/10 restore zIndex of coloned element after dragging\n// #1 11/30/100 updated #1 to allow for parent element offsets\n// #3 11/26/20 JS-60321: Added ability to override SortableObserver\n//////////////////////////////////////////////////////////////////////////////////////////////\n\nDraggable.prototype.startDrag = function(event) {\n\tDraggable.isDragging = true;\n    this.dragging = true;\n    if (!this.delta)\n        this.delta = this.currentDelta();\n\n    if (this.options.zindex) {\n        this.originalZ = parseInt(Element.getStyle(this.element, 'z-index') || 0);\n        this.element.style.zIndex = this.options.zindex;\n    }\n    if (this.options.ghosting) {\n        this._clone = this.element.cloneNode(true);\n        this._originallyAbsolute = (this.element.getStyle('position') == 'absolute');\n        if (!this._originallyAbsolute) {\n            Position.absolutize(this.element);\n        }\n        this.element.parentNode.insertBefore(this._clone, this.element);\n        if (this.element.parentNode.tagName === \"TR\") {\n            document.body.appendChild(this.element);\n        }\n    }\n\n    if (this.options.superghosting) {\n        Position.prepare();\n        var pointer = [Event.pointerX(event), Event.pointerY(event)];\n        var body = document.getElementsByTagName(\"body\")[0];\n        var me = this.element;\n        this._clone = me.cloneNode(true);\n        if (Prototype.Browser.IE) {\n            // Clear event handing from the clone\n            // Solves the second drag issue in IE\n            this._clone.clearAttributes();\n            this._clone.mergeAttributes(me.cloneNode(false));\n        }\n        me.parentNode.insertBefore(this._clone, me);\n        me.id = \"clone_\" + me.id;\n        me.hide();\n\n        Position.absolutize(me);\n        me.parentNode.removeChild(me);\n        body.appendChild(me);\n        //Retain height and width of object only if it has been nulled out.  -v0.3 Fix\n        if (me.style.width == \"0px\" || me.style.height == \"0px\") {\n            me.style.width = Element.getWidth(this._clone) + \"px\";\n            me.style.height = Element.getHeight(this._clone) + \"px\";\n        }\n\n        //overloading in order to reduce repeated code weight.\n        this.originalScrollTop = (Element.getHeight(this._clone) / 2);\n\n        this.draw(pointer);\n\n        me.show();\n    }\n\n    if (this.options.scroll) {\n        if (this.options.scroll == window) {\n            var where = this._getWindowScroll(this.options.scroll);\n            this.originalScrollLeft = where.left;\n            this.originalScrollTop = where.top;\n        } else {\n            this.originalScrollLeft = this.options.scroll.scrollLeft;\n            this.originalScrollTop = this.options.scroll.scrollTop;\n        }\n    }\n\n    Draggables.notify('onStart', this, event);\n\n    if (this.options.starteffect) this.options.starteffect(this.element);\n};\n\n\nDraggable.prototype.draw = function(point) {\n    var pos = Position.cumulativeOffset(this.element);\n\n    if (this.options.ghosting) {\n        var r = Position.realOffset(this.element);\n        pos[0] += r[0] - Position.deltaX;\n        pos[1] += r[1] - Position.deltaY;\n    }\n\n    var d = this.currentDelta();\n    pos[0] -= d[0];\n    pos[1] -= d[1];\n\n    if(this.options.scroll) {\n        pos[0] -= this.options.scroll.scrollLeft;\n        pos[1] -= this.options.scroll.scrollTop;\n    }\n\n    if (this.options.scroll && (this.options.scroll != window && this._isScrollChild)) {\n        pos[0] -= this.options.scroll.scrollLeft - this.originalScrollLeft;\n        pos[1] -= this.options.scroll.scrollTop - this.originalScrollTop;\n    }\n\n    var p = [0,1].map(function(i) {\n        /*\n         * JASPERSOFT #1 - see comment block top of page for more info\n         */\n        return (point[i] - pos[i] - (this.options.mouseOffset ? (-2) : this.offset[i]));\n    }.bind(this));\n\n    if (this.options.snap) {\n        if (Object.isFunction(this.options.snap)) {\n            p = this.options.snap(p[0], p[1], this);\n        } else {\n            if (Object.isArray(this.options.snap)) {\n                p = p.map(function(v, i) {\n                    return (v / this.options.snap[i]).round() * this.options.snap[i]\n                }.bind(this))\n            } else {\n                p = p.map(function(v) {\n                    return (v / this.options.snap).round() * this.options.snap\n                }.bind(this))\n            }\n        }\n    }\n\n    if (this.options.superghosting) {\n        if (this.element.getStyle('position') == 'absolute') {\n            p[1] = point[1] - this.originalScrollTop;\n        } else {\n            p[1] -= this.originalScrollTop || 10;\n        }\n    }\n\n    var style = this.element.style;\n    //JASPERSOFT #1 - see comment block top of page for more info\n    if ((!this.options.constraint) || (this.options.constraint == 'horizontal'))\n        style.left = p[0] + \"px\";\n    if ((!this.options.constraint) || (this.options.constraint == 'vertical'))\n        style.top = p[1] + \"px\";\n    //END JASPERSOFT #2\n\n    if (style.visibility == \"hidden\") style.visibility = \"\"; // fix gecko rendering\n};\n\nDraggable.prototype.initDrag = function(event) {\n    if (!Object.isUndefined(Draggable._dragging[this.element]) &&\n            Draggable._dragging[this.element]) return;\n\n    if ((event.touches && event.touches.length == 1) || Event.isLeftClick(event)) {\n        // abort on form elements, fixes a Firefox issue\n        var src = Event.element(event);\n        var tag_name = src.tagName.toUpperCase();\n        if (tag_name == 'INPUT' ||\n            tag_name == 'SELECT' ||\n            tag_name == 'OPTION' ||\n            tag_name == 'BUTTON' ||\n            tag_name == 'TEXTAREA') return;\n\n        if(jQuery(this.element).parents('#sortDialog').length > 0 && tag_name == 'B') {\n            return;\n        }\n\n        var pointer = [Event.pointerX(event), Event.pointerY(event)];\n        var pos = Position.cumulativeOffset(this.element);\n        this.offset = [0,1].map(function(i) {\n            return (pointer[i] - pos[i])\n        });\n\n        Draggables.activate(this);\n        this.countdown = Draggables.DEFAULT_TOLERANCE;\n        Event.stop(event);\n        this.element.fire('drag:mousedown', {targetEvent: event});\n    }\n};\n\nDroppables.isAffected = function(point, element, drop) {\n    //Position.prepare();\n    //var positioned_within = Position.withinIncludingScrolloffsets(drop.element, point[0], point[1]);\n    var jo = jQuery(drop.element);\n    var w = jo.width();\n    var h = jo.height();\n    var p0 = jo.offset();\n    var p1 = {\n    \tleft: p0.left + w,\n    \ttop: p0.top + h\n    };\n    var positioned_within = point[0] > p0.left && point[0] < p1.left && point[1] > p0.top && point[1] < p1.top;\n\n    return ((drop.element != element) &&\n           ((element.parentNode === $(document.body)) || (!drop._containers) || this.isContained(element, drop)) &&\n           ((!drop.accept) || (Element.classNames(element).detect(function(v) { return drop.accept.include(v) } ))) &&\n           positioned_within );\n};\n\nDraggable.prototype.finishDrag = function(event, success) {\n\tDraggable.isDragging = false;\n    this.dragging = false;\n\n    if (isIE()) document.body.onmousemove = function(){};  // fix for bug 25666\n\n    if (this.options.quiet) {\n        Position.prepare();\n        var pointer = [Event.pointerX(event), Event.pointerY(event)];\n        Droppables.show(pointer, this.element);\n    }\n\n    if (this.options.ghosting) {\n        if (!this._originallyAbsolute) {\n            Position.relativize(this.element);\n            if (this._clone.parentNode.tagName === \"TR\") {\n                this._clone.parentNode.insertBefore(this.element, this._clone);\n            }\n        }\n        delete this._originallyAbsolute;\n        Element.remove(this._clone);\n        this._clone = null;\n    }\n\n    var dropped = false;\n\n    if (success) {\n        dropped = Droppables.fire(event, this.element);\n        if (!dropped) dropped = false;\n    }\n    if (dropped && this.options.onDropped) this.options.onDropped(this.element);\n    Draggables.notify('onEnd', this, event);\n\n    var revert = this.options.revert;\n    if (revert && Object.isFunction(revert)) revert = revert(this.element);\n\n    var d = this.currentDelta();\n    if (revert && this.options.reverteffect) {\n        if (dropped == 0 || revert != 'failure')\n            this.options.reverteffect(this.element,\n                    d[1] - this.delta[1], d[0] - this.delta[0]);\n    } else {\n        this.delta = d;\n    }\n\n    if (this.options.zindex) {\n        this.element.style.zIndex = this.originalZ;\n        /*\n         * JASPERSOFT #2 - see comment block top of page for more info\n         */\n        this._clone && (this._clone.style.zIndex = this.originalZ);\n    }\n\n    this.options.endeffect && this.options.endeffect(this.element);\n\n    if (this.options.superghosting) {\n        // If detached drag element from DOM, we should attach it again!\n        if (this.element.parentNode == null) {\n            Element.hide(this.element);\n            $(document.body).appendChild(this.element);\n        }\n        Element.remove(this.element);\n        new Draggable(this._clone, this.options);\n    }\n\n    Draggables.deactivate(this);\n    Droppables.reset();\n};\n\nSortable.defaultOnHover = Sortable.onHover;\nSortable.onHover = function(element, dropon, overlap) {\n    if (!element.hasClassName(\"dialog\")) {\n        Sortable.defaultOnHover(element, dropon, overlap);\n    }\n};\n\nSortable.defaultOnEmptyHover = Sortable.onEmptyHover;\nSortable.onEmptyHover = function(element, dropon, overlap) {\n    if (!element.hasClassName(\"dialog\")) {\n        Sortable.defaultOnEmptyHover(element, dropon, overlap);\n    }\n};\n\nvar SortableObserver = Class.create({\n    initialize: function(element, observer) {\n        this.element = $(element);\n        this.observer = observer;\n        this.lastValue = Sortable.serialize(this.element);\n    },\n    onStart: function() {\n        this.lastValue = Sortable.serialize(this.element);\n    },\n    onEnd: function(eventName, draggable) {\n        Sortable.unmark();\n        if(this.lastValue != Sortable.serialize(this.element)) {\n            this.observer(this.element, draggable);\n        }\n    }\n});\n\n//JASPERSOFT #3 - see comment block top of page for more info\nSortable.getSortableObserverConstructor = function () {\n    return SortableObserver;\n}\n//END JASPERSOFT #3\n\nDroppables.show = function(point, element) {\n    if (!this.drops.length) return;\n    var drop, affected = [];\n\n    this.drops.each(function(drop) {\n        if(Droppables.isAffected(point, element, drop)) {\n            if(element.hasClassName('sortDialogAvailable') || element.hasClassName('sortDialogSortFields')) {\n                if(drop.element.id == 'sortDialogAvailable' || drop.element.id == 'sortDialogSortFields') {\n                    affected.push(drop);\n                }\n            } else {\n                affected.push(drop);\n            }\n        }\n    });\n\n    if (affected.length > 0)\n        drop = Droppables.findDeepestChild(affected);\n\n    if (this.last_active && this.last_active != drop) {\n    \tthis.deactivate(this.last_active);\n    }\n    if (drop) {\n        Position.within(drop.element, point[0], point[1]);\n        if (drop.onHover) {\n            // Hack to dynamically change level/measure appearing when dragging from tree to some drop container\n            if (element.classNames().include(\"wrap\")) {\n                element.relativize();\n                element.classNames().include(\"measure\") ?\n                        element.classNames().set(\"draggable dragging measure\" + (element.classNames().include(\"supportsFilter\") ? \" supportsFilter\"  : \"\")) :\n                        element.classNames().set(\"draggable dragging dimension\" + (element.classNames().include(\"supportsFilter\") ? \" supportsFilter\"  : \"\"));\n                element.style.position = 'relative';\n                element.style.display = 'inline-block';\n                element.style.width = '';\n                element.style.height = '';\n            }\n\n            drop.onHover(element, drop.element, Position.overlap(drop.overlap, drop.element));\n        }\n\n        if (drop != this.last_active) {\n        \tDroppables.activate(drop);\n        }\n    }\n};\n\n","\n        import settingsStore from 'settingsStore';\n        settingsStore['dateTimeSettings'] = settingsStore['dateTimeSettings'] || {};\n        export default settingsStore['dateTimeSettings'];\n    "],"sourceRoot":""}