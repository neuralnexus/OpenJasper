{"version":3,"sources":["webpack://jrs-ui/./src/resource/resource.locate.js","webpack://jrs-ui/./src/resource/resource.add.files.js","webpack://jrs-ui/./src/addResource/fileResource/addFileResource.common.js","webpack://jrs-ui/./src/components/components.tooltip.js","webpack://jrs-ui/./runtime_dependencies/dragdropextra/dragdropextra.js"],"names":["resourceLocator","CONTENT_REPOSITORY","LOCAL","NONE","FILE_SYSTEM","LOCATE_EVENT","ALLOWED_FILE_RESOURCE_EXTENSIONS","initialize","options","get","element","_","jQuery","this","resourceUri","resourceInput","browseButton","filePath","fileUploadInput","fakeFilePath","fakeFileUploadInput","fakeFileInput","fakeFileUploadInputText","newResourceLink","_initFileSelector","e","_initEvents","document","on","_clickHandler","providerId","_nextClickHandler","_uploadChangeHandler","event","hasClass","preventDefault","removeClass","validFileName","value","match","extension","message","resource","join","addClass","find","html","_updateResourceSelectorState","target","id","classes","_switchElementClasses","fileSelector","picker","uriTextboxId","browseButtonId","title","dialogTitle","remove","PAGE_ID","TYPE_ID","PATH_ID","LABEL_ID","RESOURCE_ID_ID","DESCRIPTION_ID","FOLDER_URI_ID","SAVE_BUTTON_ID","typeToExtMap","_canGenerateId","_form","layoutModule","_type","_path","_label","_resourceId","_description","_folderUri","_saveButton","_isEditMode","isEditMode","validationEntry","validator","_typeValidator","bind","onValid","_manual","fileName","_getFileNameFromPath","getValue","readOnly","_pathValidator","treeId","_isDataValid","bindAsEventListener","_validateTypeAndPath","Form","blank","buttonManager","include","ValidationModule","setValue","matchAny","keyCode","focus","elementsToValidate","result","isValid","errorMessage","_getExtension","_getTypesForExtension","types","type","toLowerCase","push","filename","dotPosition","lastIndexOf","substr","path","startPos","substring","length","jrsConfigs","window","localContext","addFileResource","isIPad","JSTooltip","srcElement","label","text","offsets","showBelow","templateId","loadTextCallback","loadTextExecuted","disabled","removed","_toAttribute","TOOLTIP_TEMPLATE","_fromAttribute","TOOLTIP_TEMPLATE_ID","TOOLTIP_LABEL","TOOLTIP_TEXT","_escapeText","jsTooltip","tooltipModule","tooltips","addVar","addMethod","attrName","xssUtil","writeAttribute","isArray","SEPARATOR","hasAttribute","readAttribute","split","elements","values","each","index","update","getElementZIndex","elem","parseInt","css","initialZIndex","parents","toArray","memo","parent","zIndex","Math","max","txt","tooltipOffsets","_element","getBoxOffsets","clientHeight","getScrollLeft","getScrollTop","setStyle","position","left","top","_calculateZIndex","labelElements","select","LABEL_PATTERN","textElements","TEXT_PATTERN","_setValues","clientWidth","width","leftOffset","height","topOffset","hideJSTooltip","showJSTooltip","indexOf","splice","TOOLTIP_PATTERN","ELEMENT_WITH_TOOLTIP_PATTERN","actualX","actualY","cleanUp","appearDelay","attr","timer","clearTimeout","setTimeout","show","evt","clientX","clientY","enableTooltips","forEach","tooltip","enable","disableTooltips","disable","hide","off","testId","getElementById","setAttribute","removeAttribute","reject","t","Draggable","prototype","startDrag","isDragging","dragging","delta","currentDelta","zindex","originalZ","Element","getStyle","style","ghosting","_clone","cloneNode","_originallyAbsolute","Position","absolutize","parentNode","insertBefore","tagName","body","appendChild","superghosting","prepare","pointer","Event","pointerX","pointerY","getElementsByTagName","me","Prototype","Browser","IE","clearAttributes","mergeAttributes","removeChild","getWidth","getHeight","originalScrollTop","draw","scroll","where","_getWindowScroll","originalScrollLeft","scrollLeft","scrollTop","Draggables","notify","starteffect","point","pos","cumulativeOffset","r","realOffset","deltaX","deltaY","d","_isScrollChild","p","map","i","mouseOffset","offset","snap","Object","isFunction","v","round","constraint","visibility","initDrag","isUndefined","_dragging","touches","isLeftClick","tag_name","toUpperCase","activate","countdown","DEFAULT_TOLERANCE","stop","fire","targetEvent","Droppables","isAffected","drop","jo","w","h","p0","p1","positioned_within","$","_containers","isContained","accept","classNames","detect","finishDrag","success","isIE","onmousemove","quiet","relativize","dropped","onDropped","revert","reverteffect","endeffect","deactivate","reset","Sortable","defaultOnHover","onHover","dropon","overlap","hasClassName","defaultOnEmptyHover","onEmptyHover","SortableObserver","Class","create","observer","lastValue","serialize","onStart","onEnd","eventName","draggable","unmark","getSortableObserverConstructor","drops","affected","findDeepestChild","last_active","within","set","display"],"mappings":"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","file":"_chunks/chunk.927.js","sourcesContent":["/*\r\n * Copyright (C) 2005 - 2022 TIBCO Software Inc. All rights reserved.\r\n * http://www.jaspersoft.com.\r\n *\r\n * Unless you have purchased a commercial license agreement from Jaspersoft,\r\n * the following license terms apply:\r\n *\r\n * This program is free software: you can redistribute it and/or modify\r\n * it under the terms of the GNU Affero General Public License as\r\n * published by the Free Software Foundation, either version 3 of the\r\n * License, or (at your option) any later version.\r\n *\r\n * This program is distributed in the hope that it will be useful,\r\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\r\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the\r\n * GNU Affero General Public License for more details.\r\n *\r\n * You should have received a copy of the GNU Affero General Public License\r\n * along with this program. If not, see <http://www.gnu.org/licenses/>.\r\n */\r\n\r\n\r\n/**\r\n * @version: $Id$\r\n */\r\n\r\nimport jQuery from 'jquery';\r\nimport _ from 'underscore';\r\nimport resource from './resource.base';\r\nimport picker from '../components/components.pickers';\r\n\r\nvar resourceLocator = {\r\n    CONTENT_REPOSITORY : 'CONTENT_REPOSITORY',\r\n    LOCAL : 'LOCAL',\r\n    NONE : 'NONE',\r\n    FILE_SYSTEM : 'FILE_SYSTEM',\r\n    LOCATE_EVENT : 'resource:locate',\r\n    ALLOWED_FILE_RESOURCE_EXTENSIONS: [\r\n        \"css\", //css\r\n        \"ttf\", //font\r\n        \"jpg\", \"jpeg\", \"gif\", \"bmp\", \"png\", //img\r\n        \"jar\", //jar\r\n        \"jrxml\", //jrxml\r\n        \"properties\", //properties\r\n        \"jrtx\", //jrtx\r\n        \"xml\", \"agxml\", //xml\r\n        \"docx\", \"doc\", \"ppt\", \"pptx\", \"xls\", \"xlsx\", \"ods\", \"odt\", \"odp\", \"pdf\", \"rtf\", \"html\" //contentResource\r\n    ],\r\n\r\n    /*\r\n     * Initializes Resource Locator common logic.\r\n     * @param options Object with following properties:\r\n     *     options = {\r\n     *          fileUploadInput : 'filePath',\r\n     *          resourceInput : 'resourceUri',\r\n     *          browseButton : 'browser_button',\r\n     *          newResourceLink : 'link_id',\r\n     *          treeId : 'resourceBrowserTreeId',\r\n     *          providerId : 'treeProviderId',\r\n     *          dialogTitle : 'Select Resource From Repository'\r\n     *      }\r\n     *\r\n     */\r\n    initialize: function(options) {\r\n        var get = function(element) {\r\n            return _.isObject(element) ? element : jQuery('#' + element)[0];\r\n        };\r\n\r\n        this.resourceUri = get(options.resourceInput);\r\n        this.browseButton = get(options.browseButton);\r\n        this.filePath = get(options.fileUploadInput);\r\n        this.fakeFilePath = get(options.fakeFileUploadInput);\r\n        this.fakeFileInput = get(options.fakeFileUploadInputText);\r\n        this.newResourceLink = get(options.newResourceLink);\r\n\r\n        try {\r\n            this._initFileSelector(options);\r\n        } catch(e) {\r\n            /* bypass logging to console */\r\n        } finally {\r\n            this._initEvents(options);\r\n        }\r\n\r\n        return this;\r\n    },\r\n\r\n    _initEvents: function(options) {\r\n        jQuery(document).on(\"click\", \"#CONTENT_REPOSITORY, #FILE_SYSTEM, #NONE, #LOCAL\", this._clickHandler);\r\n        if (options.providerId === \"fileResourceTreeDataProvider\") {\r\n            jQuery(\"#next\").on(\"click\", resourceLocator._nextClickHandler);\r\n            jQuery(\"#filePath\").on(\"change\", resourceLocator._uploadChangeHandler);\r\n        }\r\n    },\r\n\r\n    _nextClickHandler: function(event) {\r\n        if (jQuery(\"#fileUpload\").hasClass(\"error\")) {\r\n            event.preventDefault();\r\n        }\r\n    },\r\n\r\n    _uploadChangeHandler: function(event) {\r\n        jQuery(\"#fileUpload\").removeClass(\"error\");\r\n\r\n        var validFileName = true;\r\n\r\n        var fileName = jQuery(\"#filePath\")[0].value;\r\n        if (fileName) {\r\n            var match = jQuery(\"#filePath\")[0].value.match(/.*\\.([^\\.]+)$/);\r\n            if (match) {\r\n                var extension = match[1];\r\n                if (_.indexOf(resourceLocator.ALLOWED_FILE_RESOURCE_EXTENSIONS, extension) < 0) {\r\n                    validFileName = false;\r\n                }\r\n            } else {\r\n                validFileName = false;\r\n            }\r\n        } else {\r\n            validFileName = false;\r\n        }\r\n\r\n        if (!validFileName) {\r\n            var message =\r\n                resource.messages['resource.report.unsupportedFileType.error'] +\r\n                    \" \" +resourceLocator.ALLOWED_FILE_RESOURCE_EXTENSIONS.join(\", \");\r\n\r\n            jQuery(\"#fileUpload\").addClass(\"error\").find(\"span.warning\")\r\n                .html(message);\r\n        }\r\n    },\r\n\r\n    _clickHandler : function(event) {\r\n        resourceLocator._updateResourceSelectorState(event.target.id);\r\n    },\r\n\r\n    _updateResourceSelectorState : function(id) {\r\n        // Update File upload component state.\r\n        resource.switchButtonState(this.filePath, id === this.FILE_SYSTEM);\r\n        resource.switchButtonState(this.fakeFilePath, id === this.FILE_SYSTEM);\r\n        resource.switchButtonState(this.fakeFileInput, id === this.FILE_SYSTEM);\r\n        // Update Resource selector component state: button + text input.\r\n        resource.switchButtonState(this.browseButton, id === this.CONTENT_REPOSITORY);\r\n        resource.switchDisableState(this.resourceUri, id !== this.CONTENT_REPOSITORY);\r\n        // Update Create new resource link state.\r\n        var classes = id === this.LOCAL ? ['disabled', 'launcher'] : [];\r\n        this._switchElementClasses(this.newResourceLink, classes);\r\n    },\r\n\r\n    _initFileSelector : function(options) {\r\n        this.fileSelector = new picker.FileSelector(_.extend({}, options, {\r\n            uriTextboxId: this.resourceUri,\r\n            browseButtonId: this.browseButton,\r\n            title: options.dialogTitle\r\n        }));\r\n    },\r\n\r\n    remove : function(options) {\r\n        this.fileSelector.remove();\r\n    },\r\n\r\n    ///////////////////////////\r\n    // Utility methods.\r\n    ///////////////////////////\r\n    _switchElementClasses : function(element, classes) {\r\n        element && classes && jQuery(element).removeClass(classes[0]).addClass(classes[1]);\r\n    }\r\n};\r\n\r\nexport default resourceLocator;\r\n","/*\n * Copyright (C) 2005 - 2022 TIBCO Software Inc. All rights reserved.\n * http://www.jaspersoft.com.\n *\n * Unless you have purchased a commercial license agreement from Jaspersoft,\n * the following license terms apply:\n *\n * This program is free software: you can redistribute it and/or modify\n * it under the terms of the GNU Affero General Public License as\n * published by the Free Software Foundation, either version 3 of the\n * License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the\n * GNU Affero General Public License for more details.\n *\n * You should have received a copy of the GNU Affero General Public License\n * along with this program. If not, see <http://www.gnu.org/licenses/>.\n */\n/**\n * @version: $Id$\n */\nimport {Form} from 'prototype';\nimport jQuery from 'jquery';\nimport resource from './resource.base';\nimport {ValidationModule, matchAny} from \"../util/utils.common\";\nimport buttonManager from '../core/core.events.bis';\nimport resourceLocator from './resource.locate';\nimport layoutModule from \"../core/core.layout\";\n\nvar addFileResource = {\n    PAGE_ID: 'addResourceFile',\n    TYPE_ID: 'fileType',\n    PATH_ID: 'filePath',\n    LABEL_ID: 'addFileInputResourceLabelID',\n    RESOURCE_ID_ID: 'addFileInputResourceID',\n    DESCRIPTION_ID: 'addFileInputDescription',\n    FOLDER_URI_ID: 'folderUri',\n    SAVE_BUTTON_ID: 'save',\n    typeToExtMap: {\n        'accessGrantSchema': ['xml'],\n        'css': ['css'],\n        'font': ['ttf'],\n        'img': [\n            'jpg',\n            'jpeg',\n            'gif',\n            'bmp',\n            'png'\n        ],\n        'jar': ['jar'],\n        'jrxml': ['jrxml'],\n        'olapMondrianSchema': ['xml'],\n        'prop': ['properties'],\n        'jrtx': ['jrtx'],\n        'xml': [\n            'xml',\n            'agxml'\n        ],\n        'config': ['config'],\n        'cer': [\n            'p12',\n            'pfx'\n        ],\n        'contentResource': [\n            'docx',\n            'doc',\n            'ppt',\n            'pptx',\n            'xls',\n            'xlsx',\n            'ods',\n            'odt',\n            'odp',\n            'pdf',\n            'rtf',\n            'html',\n            'txt',\n            'csv',\n            'json'\n        ],\n        'secureFile': ['*'],\n        'mongoDbSchema': ['*'],\n        'key': ['key'],\n        'pub': ['pub'],\n        'ppk': ['ppk']\n    },\n    _canGenerateId: true,\n    initialize: function (options) {\n        this._form = jQuery('#' + layoutModule.PAGE_BODY_ID).find('form')[0];\n        this._type = jQuery('#' + this.TYPE_ID)[0];\n        this._path = jQuery('#' + this.PATH_ID)[0];\n        this._label = jQuery('#' + this.LABEL_ID)[0];\n        this._resourceId = jQuery('#' + this.RESOURCE_ID_ID)[0];\n        this._description = jQuery('#' + this.DESCRIPTION_ID)[0];\n        this._folderUri = jQuery('#' + this.FOLDER_URI_ID)[0];\n        this._saveButton = jQuery('#' + this.SAVE_BUTTON_ID)[0];\n        this._isEditMode = options.isEditMode;\n        this._type.validationEntry = {\n            validator: this._typeValidator.bind(this),\n            element: this._type,\n            onValid: function () {\n                if (!this._manual) {\n                    var fileName = this._getFileNameFromPath(this._path.getValue());\n                    this._label.value = fileName;\n                    if (!this._resourceId.readOnly) {\n                        this._resourceId.value = resource.generateResourceId(this._label.getValue());\n                    }\n                }\n            }.bind(this)\n        };\n        this._path.validator = this._pathValidator.bind(this);\n        this._label.validator = resource.labelValidator.bind(this);\n        this._resourceId.validator = resource.resourceIdValidator.bind(this);\n        this._description.validator = resource.descriptionValidator.bind(this);\n        resourceLocator.initialize({\n            resourceInput: 'folderUri',\n            browseButton: 'browser_button',\n            treeId: 'addFileTreeRepoLocation',\n            providerId: 'repositoryExplorerTreeFoldersProvider',\n            dialogTitle: resource.messages['resource.Add.Files.Title']\n        });\n        this._initEvents();\n    },\n    _initEvents: function () {\n        jQuery(this._saveButton).on('click', function (e) {\n            if (!this._isDataValid()) {\n                e.preventDefault();\n            }\n        }.bindAsEventListener(this));\n        jQuery(this._type).on('change', function (e) {\n            this._validateTypeAndPath();\n        }.bind(this));\n        jQuery(this._path).on('change', function (e) {\n            this._validateTypeAndPath();\n        }.bind(this));\n        this._form && new Form.Observer(this._form, 0.3, function () {\n            if (this._folderUri.getValue().blank()) {\n                buttonManager.disable('#save');\n            } else {\n                buttonManager.enable('#save');\n            }\n        }.bindAsEventListener(this));\n        jQuery(this._form).on('keyup', function (e) {\n            var element = e.target;\n            var targetElements = [\n                this._label,\n                this._resourceId,\n                this._description\n            ];\n            if (targetElements.include(element)) {\n                ValidationModule.validate(resource.getValidationEntries([element]));\n                if (element == this._resourceId && this._resourceId.getValue() != resource.generateResourceId(this._label.getValue())) {\n                    this._canGenerateId = false;\n                }\n                if (element == this._label && !this._isEditMode && this._canGenerateId) {\n                    this._resourceId.setValue(resource.generateResourceId(this._label.getValue()));\n                    ValidationModule.validate(resource.getValidationEntries([this._resourceId]));\n                }\n            }\n            this._manual = true;\n        }.bindAsEventListener(this));\n        jQuery(this._form).on('keydown', function (e) {\n            var targetElement = matchAny(e.target, ['#' + this.DESCRIPTION_ID], true);\n            if (!targetElement) {\n                if (e.keyCode == 13) {\n                    this._saveButton.focus();\n                }\n            }\n        }.bind(this));\n    },\n    _isDataValid: function () {\n        var elementsToValidate = [\n            this._label,\n            this._resourceId,\n            this._description,\n            this._path,\n            this._type\n        ];\n        return ValidationModule.validate(resource.getValidationEntries(elementsToValidate));\n    },\n    _validateTypeAndPath: function () {\n        var elementsToValidate = [\n            this._type,\n            this._path\n        ];\n        ValidationModule.validate(resource.getValidationEntries(elementsToValidate));\n    },\n    _typeValidator: function (value) {\n        var isValid = true;\n        var errorMessage = '';\n        var result = {\n            isValid: isValid,\n            errorMessage: errorMessage\n        };\n        var extension = this._getExtension();\n        if (extension.blank()) {\n            return result;\n        }\n        if (this.typeToExtMap[value] && this.typeToExtMap[value].include('*')) {\n            return result;\n        }\n        var types = this._getTypesForExtension(extension);\n        if (!types.include(value)) {\n            result.errorMessage = resource.messages['typeIsNotValid'];\n            result.isValid = false;\n        }\n        return result;\n    },\n    _pathValidator: function (value) {\n        var isValid = true;\n        var errorMessage = '';\n        if (!this._isEditMode && value.blank()) {\n            errorMessage = resource.messages['pathIsEmpty'];\n            isValid = false;\n        }\n        return {\n            isValid: isValid,\n            errorMessage: errorMessage\n        };\n    },\n    _getTypesForExtension: function (extension) {\n        var types = [];\n        for (var type in this.typeToExtMap) {\n            if (this.typeToExtMap[type] && this.typeToExtMap[type].include(extension.toLowerCase())) {\n                types.push(type);\n            }\n        }\n        return types;\n    },\n    _getExtension: function () {\n        var filename = this._path.getValue();\n        if (filename.blank()) {\n            return '';\n        }\n        var dotPosition = filename.lastIndexOf('.');\n        if (dotPosition == -1) {\n            return '';\n        }\n        return filename.substr(dotPosition + 1);\n    },\n    _getFileNameFromPath: function (path) {\n        var startPos = path.lastIndexOf('\\\\') > 0 ? path.lastIndexOf('\\\\') + 1 : 0;\n        return path.substring(startPos, path.length);\n    }\n};\n\nexport default addFileResource;","/*\n * Copyright (C) 2005 - 2019 TIBCO Software Inc. All rights reserved.\n * http://www.jaspersoft.com.\n *\n * Unless you have purchased a commercial license agreement from Jaspersoft,\n * the following license terms apply:\n *\n * This program is free software: you can redistribute it and/or modify\n * it under the terms of the GNU Affero General Public License as\n * published by the Free Software Foundation, either version 3 of the\n * License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the\n * GNU Affero General Public License for more details.\n *\n * You should have received a copy of the GNU Affero General Public License\n * along with this program. If not, see <http://www.gnu.org/licenses/>.\n */\n\nimport addFileResource from '../../resource/resource.add.files';\nimport _ from 'underscore';\nimport jrsConfigs from 'js-sdk/src/jrs.configs';\nimport resource from '../../resource/resource.base';\nimport {isIPad} from \"../../util/utils.common\";\n\nvar options = jrsConfigs.addFileResource.localContext.initOptions;\n_.extend(window.localContext, jrsConfigs.addFileResource.localContext);\n_.extend(resource.messages, jrsConfigs.addFileResource.resource.messages);\naddFileResource.initialize(options);\nisIPad() && resource.initSwipeScroll();\n","/*\n * Copyright (C) 2005 - 2022 TIBCO Software Inc. All rights reserved.\n * http://www.jaspersoft.com.\n *\n * Unless you have purchased a commercial license agreement from Jaspersoft,\n * the following license terms apply:\n *\n * This program is free software: you can redistribute it and/or modify\n * it under the terms of the GNU Affero General Public License as\n * published by the Free Software Foundation, either version 3 of the\n * License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the\n * GNU Affero General Public License for more details.\n *\n * You should have received a copy of the GNU Affero General Public License\n * along with this program. If not, see <http://www.gnu.org/licenses/>.\n */\n\n\n/**\n * @version: $Id$\n */\n\nimport _ from 'underscore';\nimport {\n    isArray,\n    getBoxOffsets,\n    getScrollLeft,\n    getScrollTop\n} from '../util/utils.common';\nimport jQuery from 'jquery';\n\nimport xssUtil from 'js-sdk/src/common/util/xssUtil';\n\nimport layoutModule from '../core/core.layout';\n\n/**\n * Usage:\n *      Within HTML markup. (Not working with button element)\n *\n *      <code>\n *      &lt;li tooltiptext=\"Hello\"&gt;Item 1&lt;/li&gt;\n *      &lt;li tooltiptext=\"Hello\" tooltiplabel=\"URA!\"&gt;Item 1&lt;/li&gt;\n *      &lt;li tooltiptext=\"Hello\" tooltiplabel=\"URA!\" tooltiptemplate=\"tID\"&gt;Item 1&lt;/li&gt;\n *      </code>\n *\n *      Within JavaScript\n *      <code>\n *      new JSTooltip(element, { text: \"tooltipText\" }).show();\n *      new JSTooltip(element, { text: \"tooltipText\", offsets: [100, 50] }).show();\n *      new JSTooltip(element, { text: \"tooltipText\" }).show([100, 50]);\n *     new JSTooltip(element, { label: \"tooltipLabel\", text: \"tooltipText\", templateId: \"templateId\" });\n *      new JSTooltip(element, { label: [\"tooltipLabel1\", \"tooltipLabel2\"], text: [\"tooltipText1\", \"tooltipText2\", \"tooltipText3\"], templateId: \"templateId\" });\n *\n *      tooltipModule.showJSTooltip(element, [100, 50]);\n *      tooltipModule.hideJSTooltip(element);\n *      </code>\n * @param element\n * @param options {Object}\n * <ul>\n *      <li>label {String} - Label for the tooltip</li>\n *      <li>label {Array} - List of labels for complex tooltip</li>\n *      <li>text {String} - Text for the tooltip</li>\n *      <li>text {Array} - List of messages for complex tooltip</li>\n *      <li>templateId {String} - DOM ID of template for the tooltip </li>\n *      <li>offsets {Array} - Used to show the tooltip in position. First item in array is the X point adn second is the Y point </li>\n *      <li>showBelow {Boolean} - Show bellow element</li>\n * </ul>\n *\n */\nfunction JSTooltip(element, options) {\n    if (element) {\n        this.srcElement = element;\n\n        if (options) {\n            this.label = options.label;\n            this.text = options.text;\n            this.offsets = options.offsets;\n            this.showBelow = !! options.showBelow;\n            this.templateId = options.templateId;\n            this.loadTextCallback = options.loadTextCallback;\n            this.loadTextExecuted = false;\n        }\n\n        this.disabled = false;\n        this.removed = false;\n\n        if (this.templateId) {\n            this._toAttribute(this.TOOLTIP_TEMPLATE, this.templateId);\n        } else {\n            var id = this._fromAttribute(this.TOOLTIP_TEMPLATE);\n            this.templateId = (id && id.length > 0) ? id : this.TOOLTIP_TEMPLATE_ID;\n        }\n        if (this.label) {\n            this._toAttribute(this.TOOLTIP_LABEL, this.label);\n        } else {\n            this.label = this._fromAttribute(this.TOOLTIP_LABEL);\n        }\n        if (this.text) {\n            this._toAttribute(this.TOOLTIP_TEXT, this.text);\n        } else {\n            this.text = this._fromAttribute(this.TOOLTIP_TEXT);\n        }\n\n        // escape against XSS\n        if (this.label)\n            this.label = this._escapeText(this.label);\n        if (this.text)\n            this.text = this._escapeText(this.text);\n\n        this.srcElement.jsTooltip = this;\n\n        tooltipModule.tooltips.push(this);\n    }\n}\n\nJSTooltip.addVar(\"SEPARATOR\", \"@@\");\nJSTooltip.addVar(\"TOOLTIP_LABEL\", \"tooltiplabel\");\nJSTooltip.addVar(\"TOOLTIP_TEXT\", \"tooltiptext\");\nJSTooltip.addVar(\"TOOLTIP_TEMPLATE\", \"tooltiptemplate\");\nJSTooltip.addVar(\"TOOLTIP_TEMPLATE_ID\", \"jsTooltip\");\nJSTooltip.addVar(\"LABEL_PATTERN\", \".message.label\");\nJSTooltip.addVar(\"TEXT_PATTERN\", \".message:not(.label)\");\n\nJSTooltip.addMethod(\"_toAttribute\", function(attrName, value) {\n    if(this.srcElement) {\n        value = xssUtil.hardEscape(value);\n        this.srcElement.writeAttribute(attrName, isArray(value) ? value.join(this.SEPARATOR) : value);\n    }\n});\n\nJSTooltip.addMethod(\"_fromAttribute\", function(attrName) {\n    if(this.srcElement && this.srcElement.hasAttribute(attrName)) {\n        var value = this.srcElement.readAttribute(attrName);\n        return value.include(this.SEPARATOR) ? value.split(this.SEPARATOR) : value;\n    }\n\n    return null;\n});\n\nJSTooltip.addMethod(\"_setValues\", function(elements, values) {\n    elements.each(function (element, index) {\n        if (_.isString(values[index]) || _.isNumber(values[index])) {\n            element.update(xssUtil.hardEscape(values[index]));\n        }\n    });\n});\n\nJSTooltip.addMethod(\"_calculateZIndex\", function(element) {\n    function getElementZIndex(elem) {\n        return parseInt(jQuery(elem).css(\"z-index\"));\n    }\n\n    // Get tooltip element zIndex.\n    var initialZIndex = getElementZIndex(element);\n    if (!_.isNumber(initialZIndex) || _.isNaN(initialZIndex)) {\n        initialZIndex = 1000;\n    }\n\n    var parents = _.flatten([this.srcElement, jQuery(this.srcElement).parents().toArray()]);\n\n    // Calculates max z-index between tooltip element and parent elements.\n    var maxZIndex = _.reduce(parents, function(memo, parent) {\n        var zIndex = getElementZIndex(parent);\n\n        if (_.isNumber(zIndex) && !_.isNaN(zIndex)) {\n            memo = Math.max(memo, zIndex);\n        }\n\n        return memo;\n    }, initialZIndex);\n\n    return maxZIndex + 1;\n});\n\nJSTooltip.addMethod(\"_escapeText\", function(text) {\n    return _.isArray(text)\n        ? _.map(text, function (txt) { return xssUtil.hardEscape(txt)})\n        : xssUtil.hardEscape(text);\n});\n\nJSTooltip.addMethod(\"show\", function(tooltipOffsets) {\n    if(tooltipOffsets) {\n        this.offsets = tooltipOffsets;\n    }\n\n    this._element = jQuery('#' + this.templateId)[0];\n\n    var offsets;\n    if (this.showBelow) {\n        offsets = getBoxOffsets(this.srcElement);\n        offsets[1] += this.srcElement.clientHeight + 5;\n    } else {\n        offsets = [getScrollLeft() + 5, getScrollTop() + 5];\n    }\n\n    if (this.offsets) {\n        offsets[0] += this.offsets[0];\n        offsets[1] += this.offsets[1];\n    }\n\n    this._element.setStyle({\n        position: \"absolute\",\n        left: offsets[0] + 'px',\n        top: offsets[1] + 'px',\n        zIndex: this._calculateZIndex(this._element)\n    });\n\n    var labelElements = this._element.select(this.LABEL_PATTERN);\n    var textElements = this._element.select(this.TEXT_PATTERN);\n\n    if(this.label) {\n        this._setValues(labelElements, isArray(this.label) ? this.label : [this.label]);\n    }\n    if(this.text) {\n        this._setValues(textElements, isArray(this.text) ? this.text : [this.text]);\n    }\n\n    jQuery(this._element).removeClass(layoutModule.HIDDEN_CLASS);\n\n    if (offsets[0] + this._element.clientWidth > jQuery(window).width()) {\n        var leftOffset = offsets[0] - this._element.clientWidth > 0 ? offsets[0] - this._element.clientWidth : 15;\n\n        this._element.setStyle({ left: leftOffset + \"px\"});\n    }\n    if (offsets[1] + this._element.clientHeight > jQuery(window).height()) {\n        var topOffset = offsets[1] - this._element.clientHeight - 10;\n        this._element.setStyle({ top: topOffset + \"px\"});\n    }\n\n    if (this.loadTextCallback && !this.loadTextExecuted) {\n        this.loadTextExecuted = true;\n\n        this.loadTextCallback(this);\n    }\n\n    return this;\n});\n\nJSTooltip.addMethod(\"updateText\", function(text) {\n    this.text = this._escapeText(text);\n\n    if (this._element) {\n        var textElements = this._element.select(this.TEXT_PATTERN);\n\n        this._setValues(textElements, isArray(this.text) ? this.text : [this.text]);\n    }\n});\n\nJSTooltip.addMethod(\"hide\", function() {\n    if (this._element) {\n        jQuery(this._element).addClass(layoutModule.HIDDEN_CLASS);\n    }\n});\n\nJSTooltip.addMethod(\"disable\", function() {\n    tooltipModule.hideJSTooltip(this.srcElement);\n    this.disabled = true;\n});\n\nJSTooltip.addMethod(\"enable\", function() {\n    this.disabled = false;\n    tooltipModule.showJSTooltip(this.srcElement, this.offsets);\n});\n\nJSTooltip.addMethod(\"remove\", function() {\n    var index = tooltipModule.tooltips.indexOf(this.srcElement.jsTooltip);\n    if (index !== -1) {\n        tooltipModule.hideJSTooltip(this.srcElement);\n        tooltipModule.tooltips.splice(index, 1);\n    }\n    this.removed = true;\n});\n\nJSTooltip.addMethod(\"isRemoved\", function() {\n    return this.removed;\n});\n\nvar tooltipModule = {\n    TOOLTIP_PATTERN: \"*[tooltiptext] > *\",\n    ELEMENT_WITH_TOOLTIP_PATTERN: \"*[tooltiptext]\",\n\n    tooltips: [],\n\n    showJSTooltip: function(element, offsets) {\n        if (!element.jsTooltip) {\n            element.jsTooltip = new JSTooltip(element, {});\n        } else if (!element.jsTooltip.disabled && offsets) {\n            var actualX = offsets[0];\n            var actualY = offsets[1];\n\n            this.cleanUp();\n\n            var appearDelay = jQuery(element).attr(\"tooltipappeardelay\");\n            appearDelay = appearDelay ? parseInt(appearDelay) : 1000;\n\n            element.jsTooltip.timer && clearTimeout(element.jsTooltip.timer);\n            element.jsTooltip.timer = setTimeout(function() {\n                element.jsTooltip.show([actualX, actualY]);\n            }, appearDelay);\n\n            jQuery(element).on(\"mousemove\", function(evt){\n                actualX = evt.clientX;\n                actualY = evt.clientY;\n            });\n        }\n    },\n\n    enableTooltips: function() {\n        var tooltips = this.tooltips || [];\n\n        tooltips.forEach(function(tooltip) {\n            tooltip.enable();\n        });\n    },\n\n    disableTooltips: function() {\n        var tooltips = this.tooltips || [];\n\n        tooltips.forEach(function(tooltip) {\n            tooltip.disable();\n        });\n    },\n\n    hideJSTooltip: function(element) {\n        if (element && element.jsTooltip) {\n            element.jsTooltip.timer && clearTimeout(element.jsTooltip.timer);\n\n            element.jsTooltip.hide();\n\n            jQuery(element).off(\"mousemove\");\n        }\n    },\n\n    cleanUp: function() {\n        if (this.tooltips && this.tooltips.length > 0) {\n            var removed = [];\n            var testId = \"fuigasuifdughaiadbvguaidbapvuwbev\";\n            this.tooltips.each(function(tooltip) {\n                if (!(tooltip.srcElement.id && document.getElementById(tooltip.srcElement.id))){\n                    tooltip.srcElement.setAttribute(\"id\",testId);\n                    if (!document.getElementById(testId)){\n                        tooltip.hide();\n                        removed.push(tooltip);\n                    }\n                    tooltip.srcElement.removeAttribute(\"id\");\n                }\n            });\n\n            if (removed.length > 0) {\n                this.tooltips = this.tooltips.reject(function(t) {\n                    return removed.include(t);\n                });\n            }\n        }\n    }\n};\n\nexport {JSTooltip, tooltipModule};\n","//  DragDropExtra Scriptaculous Enhancement, version 0.5\n//  (c) 2007-2008 Christopher Williams, Iterative Designs\n//\n// v0.5 release\n//      - Fixed bug where 2nd drag on an element in IE would result in funny placement of the\n//        element. [shammond42]\n// v0.4 release\n//\t\t- Fixed issue with dragging and dropping in IE7 due to an exception being thrown and not properly reseting in FinishDrag.\n// v0.3 release\n//    - Fixed bug found by Phillip Sauerbeck psauerbeck@gmail. Tests added based on Phillip's efforts.\n// v0.2 release\n//      - Minor bug fix for the releasing of objects after they have been dropped, prevents memory leak.\n// v0.1 release\n//      - initial release for the super ghosting capability\n//      - Drags from one scrolling list to the other (overflow:auto)\n//      - Retains the original object so that it can remain present despite being dragged\n//\n// dragdropextra.js is freely distributable under the terms of an MIT-style license.\n// For details, see the Iterative Designs web site: http://www.iterativedesigns.com/\n// Parts of this code have been taken from the original dragdrop.js library which is\n// copyrighted by (c) 2005-2007 Thomas Fuchs (http://script.aculo.us,\n// http://mir.aculo.us) and (c) 2005-2007 Sammi Williams\n// (http://www.oriontransfer.co.nz, sammi@oriontransfer.co.nz) and available under\n// a MIT-style license.\n\n//////////////////////////////////////////////////////////////////////////////////////////////\n//Jaspersoft Updates (look for comment: JASPERSOFT #x)\n//////////////////////////////////////////////////////////////////////////////////////////////\n// #1 3/27/10 if options.mouseOffset is true then dragging thing positioned with mousepointer\n// \t\t   see Draggable.prototype.draw\n// #2 9/27/10 restore zIndex of coloned element after dragging\n// #1 11/30/100 updated #1 to allow for parent element offsets\n// #3 11/26/20 JS-60321: Added ability to override SortableObserver\n//////////////////////////////////////////////////////////////////////////////////////////////\n\nDraggable.prototype.startDrag = function(event) {\n\tDraggable.isDragging = true;\n    this.dragging = true;\n    if (!this.delta)\n        this.delta = this.currentDelta();\n\n    if (this.options.zindex) {\n        this.originalZ = parseInt(Element.getStyle(this.element, 'z-index') || 0);\n        this.element.style.zIndex = this.options.zindex;\n    }\n    if (this.options.ghosting) {\n        this._clone = this.element.cloneNode(true);\n        this._originallyAbsolute = (this.element.getStyle('position') == 'absolute');\n        if (!this._originallyAbsolute) {\n            Position.absolutize(this.element);\n        }\n        this.element.parentNode.insertBefore(this._clone, this.element);\n        if (this.element.parentNode.tagName === \"TR\") {\n            document.body.appendChild(this.element);\n        }\n    }\n\n    if (this.options.superghosting) {\n        Position.prepare();\n        var pointer = [Event.pointerX(event), Event.pointerY(event)];\n        var body = document.getElementsByTagName(\"body\")[0];\n        var me = this.element;\n        this._clone = me.cloneNode(true);\n        if (Prototype.Browser.IE) {\n            // Clear event handing from the clone\n            // Solves the second drag issue in IE\n            this._clone.clearAttributes();\n            this._clone.mergeAttributes(me.cloneNode(false));\n        }\n        me.parentNode.insertBefore(this._clone, me);\n        me.id = \"clone_\" + me.id;\n        me.hide();\n\n        Position.absolutize(me);\n        me.parentNode.removeChild(me);\n        body.appendChild(me);\n        //Retain height and width of object only if it has been nulled out.  -v0.3 Fix\n        if (me.style.width == \"0px\" || me.style.height == \"0px\") {\n            me.style.width = Element.getWidth(this._clone) + \"px\";\n            me.style.height = Element.getHeight(this._clone) + \"px\";\n        }\n\n        //overloading in order to reduce repeated code weight.\n        this.originalScrollTop = (Element.getHeight(this._clone) / 2);\n\n        this.draw(pointer);\n\n        me.show();\n    }\n\n    if (this.options.scroll) {\n        if (this.options.scroll == window) {\n            var where = this._getWindowScroll(this.options.scroll);\n            this.originalScrollLeft = where.left;\n            this.originalScrollTop = where.top;\n        } else {\n            this.originalScrollLeft = this.options.scroll.scrollLeft;\n            this.originalScrollTop = this.options.scroll.scrollTop;\n        }\n    }\n\n    Draggables.notify('onStart', this, event);\n\n    if (this.options.starteffect) this.options.starteffect(this.element);\n};\n\n\nDraggable.prototype.draw = function(point) {\n    var pos = Position.cumulativeOffset(this.element);\n\n    if (this.options.ghosting) {\n        var r = Position.realOffset(this.element);\n        pos[0] += r[0] - Position.deltaX;\n        pos[1] += r[1] - Position.deltaY;\n    }\n\n    var d = this.currentDelta();\n    pos[0] -= d[0];\n    pos[1] -= d[1];\n\n    if(this.options.scroll) {\n        pos[0] -= this.options.scroll.scrollLeft;\n        pos[1] -= this.options.scroll.scrollTop;\n    }\n\n    if (this.options.scroll && (this.options.scroll != window && this._isScrollChild)) {\n        pos[0] -= this.options.scroll.scrollLeft - this.originalScrollLeft;\n        pos[1] -= this.options.scroll.scrollTop - this.originalScrollTop;\n    }\n\n    var p = [0,1].map(function(i) {\n        /*\n         * JASPERSOFT #1 - see comment block top of page for more info\n         */\n        return (point[i] - pos[i] - (this.options.mouseOffset ? (-2) : this.offset[i]));\n    }.bind(this));\n\n    if (this.options.snap) {\n        if (Object.isFunction(this.options.snap)) {\n            p = this.options.snap(p[0], p[1], this);\n        } else {\n            if (Object.isArray(this.options.snap)) {\n                p = p.map(function(v, i) {\n                    return (v / this.options.snap[i]).round() * this.options.snap[i]\n                }.bind(this))\n            } else {\n                p = p.map(function(v) {\n                    return (v / this.options.snap).round() * this.options.snap\n                }.bind(this))\n            }\n        }\n    }\n\n    if (this.options.superghosting) {\n        if (this.element.getStyle('position') == 'absolute') {\n            p[1] = point[1] - this.originalScrollTop;\n        } else {\n            p[1] -= this.originalScrollTop || 10;\n        }\n    }\n\n    var style = this.element.style;\n    //JASPERSOFT #1 - see comment block top of page for more info\n    if ((!this.options.constraint) || (this.options.constraint == 'horizontal'))\n        style.left = p[0] + \"px\";\n    if ((!this.options.constraint) || (this.options.constraint == 'vertical'))\n        style.top = p[1] + \"px\";\n    //END JASPERSOFT #2\n\n    if (style.visibility == \"hidden\") style.visibility = \"\"; // fix gecko rendering\n};\n\nDraggable.prototype.initDrag = function(event) {\n    if (!Object.isUndefined(Draggable._dragging[this.element]) &&\n            Draggable._dragging[this.element]) return;\n\n    if ((event.touches && event.touches.length == 1) || Event.isLeftClick(event)) {\n        // abort on form elements, fixes a Firefox issue\n        var src = Event.element(event);\n        var tag_name = src.tagName.toUpperCase();\n        if (tag_name == 'INPUT' ||\n            tag_name == 'SELECT' ||\n            tag_name == 'OPTION' ||\n            tag_name == 'BUTTON' ||\n            tag_name == 'TEXTAREA') return;\n\n        if(jQuery(this.element).parents('#sortDialog').length > 0 && tag_name == 'B') {\n            return;\n        }\n\n        var pointer = [Event.pointerX(event), Event.pointerY(event)];\n        var pos = Position.cumulativeOffset(this.element);\n        this.offset = [0,1].map(function(i) {\n            return (pointer[i] - pos[i])\n        });\n\n        Draggables.activate(this);\n        this.countdown = Draggables.DEFAULT_TOLERANCE;\n        Event.stop(event);\n        this.element.fire('drag:mousedown', {targetEvent: event});\n    }\n};\n\nDroppables.isAffected = function(point, element, drop) {\n    //Position.prepare();\n    //var positioned_within = Position.withinIncludingScrolloffsets(drop.element, point[0], point[1]);\n    var jo = jQuery(drop.element);\n    var w = jo.width();\n    var h = jo.height();\n    var p0 = jo.offset();\n    var p1 = {\n    \tleft: p0.left + w,\n    \ttop: p0.top + h\n    };\n    var positioned_within = point[0] > p0.left && point[0] < p1.left && point[1] > p0.top && point[1] < p1.top;\n\n    return ((drop.element != element) &&\n           ((element.parentNode === $(document.body)) || (!drop._containers) || this.isContained(element, drop)) &&\n           ((!drop.accept) || (Element.classNames(element).detect(function(v) { return drop.accept.include(v) } ))) &&\n           positioned_within );\n};\n\nDraggable.prototype.finishDrag = function(event, success) {\n\tDraggable.isDragging = false;\n    this.dragging = false;\n\n    if (isIE()) document.body.onmousemove = function(){};  // fix for bug 25666\n\n    if (this.options.quiet) {\n        Position.prepare();\n        var pointer = [Event.pointerX(event), Event.pointerY(event)];\n        Droppables.show(pointer, this.element);\n    }\n\n    if (this.options.ghosting) {\n        if (!this._originallyAbsolute) {\n            Position.relativize(this.element);\n            if (this._clone.parentNode.tagName === \"TR\") {\n                this._clone.parentNode.insertBefore(this.element, this._clone);\n            }\n        }\n        delete this._originallyAbsolute;\n        Element.remove(this._clone);\n        this._clone = null;\n    }\n\n    var dropped = false;\n\n    if (success) {\n        dropped = Droppables.fire(event, this.element);\n        if (!dropped) dropped = false;\n    }\n    if (dropped && this.options.onDropped) this.options.onDropped(this.element);\n    Draggables.notify('onEnd', this, event);\n\n    var revert = this.options.revert;\n    if (revert && Object.isFunction(revert)) revert = revert(this.element);\n\n    var d = this.currentDelta();\n    if (revert && this.options.reverteffect) {\n        if (dropped == 0 || revert != 'failure')\n            this.options.reverteffect(this.element,\n                    d[1] - this.delta[1], d[0] - this.delta[0]);\n    } else {\n        this.delta = d;\n    }\n\n    if (this.options.zindex) {\n        this.element.style.zIndex = this.originalZ;\n        /*\n         * JASPERSOFT #2 - see comment block top of page for more info\n         */\n        this._clone && (this._clone.style.zIndex = this.originalZ);\n    }\n\n    this.options.endeffect && this.options.endeffect(this.element);\n\n    if (this.options.superghosting) {\n        // If detached drag element from DOM, we should attach it again!\n        if (this.element.parentNode == null) {\n            Element.hide(this.element);\n            $(document.body).appendChild(this.element);\n        }\n        Element.remove(this.element);\n        new Draggable(this._clone, this.options);\n    }\n\n    Draggables.deactivate(this);\n    Droppables.reset();\n};\n\nSortable.defaultOnHover = Sortable.onHover;\nSortable.onHover = function(element, dropon, overlap) {\n    if (!element.hasClassName(\"dialog\")) {\n        Sortable.defaultOnHover(element, dropon, overlap);\n    }\n};\n\nSortable.defaultOnEmptyHover = Sortable.onEmptyHover;\nSortable.onEmptyHover = function(element, dropon, overlap) {\n    if (!element.hasClassName(\"dialog\")) {\n        Sortable.defaultOnEmptyHover(element, dropon, overlap);\n    }\n};\n\nvar SortableObserver = Class.create({\n    initialize: function(element, observer) {\n        this.element = $(element);\n        this.observer = observer;\n        this.lastValue = Sortable.serialize(this.element);\n    },\n    onStart: function() {\n        this.lastValue = Sortable.serialize(this.element);\n    },\n    onEnd: function(eventName, draggable) {\n        Sortable.unmark();\n        if(this.lastValue != Sortable.serialize(this.element)) {\n            this.observer(this.element, draggable);\n        }\n    }\n});\n\n//JASPERSOFT #3 - see comment block top of page for more info\nSortable.getSortableObserverConstructor = function () {\n    return SortableObserver;\n}\n//END JASPERSOFT #3\n\nDroppables.show = function(point, element) {\n    if (!this.drops.length) return;\n    var drop, affected = [];\n\n    this.drops.each(function(drop) {\n        if(Droppables.isAffected(point, element, drop)) {\n            if(element.hasClassName('sortDialogAvailable') || element.hasClassName('sortDialogSortFields')) {\n                if(drop.element.id == 'sortDialogAvailable' || drop.element.id == 'sortDialogSortFields') {\n                    affected.push(drop);\n                }\n            } else {\n                affected.push(drop);\n            }\n        }\n    });\n\n    if (affected.length > 0)\n        drop = Droppables.findDeepestChild(affected);\n\n    if (this.last_active && this.last_active != drop) {\n    \tthis.deactivate(this.last_active);\n    }\n    if (drop) {\n        Position.within(drop.element, point[0], point[1]);\n        if (drop.onHover) {\n            // Hack to dynamically change level/measure appearing when dragging from tree to some drop container\n            if (element.classNames().include(\"wrap\")) {\n                element.relativize();\n                element.classNames().include(\"measure\") ?\n                        element.classNames().set(\"draggable dragging measure\" + (element.classNames().include(\"supportsFilter\") ? \" supportsFilter\"  : \"\")) :\n                        element.classNames().set(\"draggable dragging dimension\" + (element.classNames().include(\"supportsFilter\") ? \" supportsFilter\"  : \"\"));\n                element.style.position = 'relative';\n                element.style.display = 'inline-block';\n                element.style.width = '';\n                element.style.height = '';\n            }\n\n            drop.onHover(element, drop.element, Position.overlap(drop.overlap, drop.element));\n        }\n\n        if (drop != this.last_active) {\n        \tDroppables.activate(drop);\n        }\n    }\n};\n\n"],"sourceRoot":""}