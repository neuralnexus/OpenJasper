{"version":3,"sources":["webpack://jrs-ui/./src/components/components.tooltip.js","webpack://jrs-ui/./src/controls/controls.base.js","webpack://jrs-ui/./src/controls/controls.core.js","webpack://jrs-ui/./src/settings/globalConfiguration.settings.js","webpack://jrs-ui/./src/scheduler/enum/jobStateEnum.js","webpack://jrs-ui/./src/scheduler/model/JobModel.js","webpack://jrs-ui/./src/util/tools.infiniteScroll.js","webpack://jrs-ui/./src/scheduler/view/JobView.js","webpack://jrs-ui/./src/scheduler/template/list/oneMasterJob.htm","webpack://jrs-ui/./src/scheduler/template/list/oneJob.htm","webpack://jrs-ui/./src/scheduler/collection/JobsCollection.js","webpack://jrs-ui/./src/scheduler/view/JobsView.js","webpack://jrs-ui/./src/scheduler/template/masterViewTemplate.htm","webpack://jrs-ui/./src/scheduler/template/jobsViewTemplate.htm","webpack://jrs-ui/./src/scheduler/template/list/listOfJobsTemplate.htm","webpack://jrs-ui/./src/scheduler/template/list/nothingToDisplayTemplate.htm","webpack://jrs-ui/./src/scheduler/saveDialog/SaveDialogView.js","webpack://jrs-ui/./src/scheduler/saveDialog/template/saveDialogTemplate.htm","webpack://jrs-ui/./src/scheduler/template/editor/holidayCalendarTemplate.htm","webpack://jrs-ui/./src/scheduler/view/editor/HolidayCalView.js","webpack://jrs-ui/./src/scheduler/model/HolidayCal.js","webpack://jrs-ui/./src/scheduler/collection/HolidayCalsCollection.js","webpack://jrs-ui/./src/scheduler/view/editor/ScheduleTabView.js","webpack://jrs-ui/./src/scheduler/template/editor/scheduleTabTemplate.htm","webpack://jrs-ui/./src/scheduler/view/editor/ParametersTabView.js","webpack://jrs-ui/./src/scheduler/template/editor/parametersTabTemplate.htm","webpack://jrs-ui/./src/scheduler/view/editor/OutputTabView.js","webpack://jrs-ui/./src/scheduler/template/editor/outputTabTemplate.htm","webpack://jrs-ui/./src/scheduler/view/editor/NotificationsTabView.js","webpack://jrs-ui/./src/scheduler/template/editor/notificationsTabTemplate.htm","webpack://jrs-ui/./src/scheduler/view/JobEditorView.js","webpack://jrs-ui/./src/scheduler/template/jobEditorViewDrawerTemplate.htm","webpack://jrs-ui/./src/scheduler/template/jobEditorViewTemplate.htm","webpack://jrs-ui/./src/scheduler/view/SchedulerApp.js","webpack://jrs-ui/./src/scheduler/scheduler.common.js"],"names":["JSTooltip","element","options","this","srcElement","label","text","offsets","showBelow","templateId","loadTextCallback","loadTextExecuted","disabled","removed","_toAttribute","TOOLTIP_TEMPLATE","id","_fromAttribute","length","TOOLTIP_TEMPLATE_ID","TOOLTIP_LABEL","TOOLTIP_TEXT","_escapeText","jsTooltip","tooltipModule","tooltips","push","addVar","addMethod","attrName","value","xssUtil","writeAttribute","isArray","join","SEPARATOR","hasAttribute","readAttribute","include","split","elements","values","each","index","_","update","getElementZIndex","elem","parseInt","jQuery","css","initialZIndex","parents","toArray","memo","parent","zIndex","Math","max","txt","tooltipOffsets","_element","getBoxOffsets","clientHeight","getScrollLeft","getScrollTop","setStyle","position","left","top","_calculateZIndex","labelElements","select","LABEL_PATTERN","textElements","TEXT_PATTERN","_setValues","removeClass","layoutModule","clientWidth","window","width","leftOffset","height","topOffset","addClass","hideJSTooltip","showJSTooltip","indexOf","splice","TOOLTIP_PATTERN","ELEMENT_WITH_TOOLTIP_PATTERN","actualX","actualY","cleanUp","appearDelay","attr","timer","clearTimeout","setTimeout","show","on","evt","clientX","clientY","enableTooltips","forEach","tooltip","enable","disableTooltips","disable","hide","off","testId","document","getElementById","setAttribute","removeAttribute","reject","t","ControlsBase","INPUT_CONTROLS_FORM","INPUT_CONTROLS_CONTAINER","INPUT_CONTROLS_DIALOG","SAVE_REPORT_OPTIONS_DIALOG","REPORT_OPTIONS_SELECTOR","TOOLBAR_CONTROLS_BUTTON","DEFAULT_OPTION_TEXT","KEY_DOWN_TIMEOUT","NULL_SUBSTITUTION_VALUE","NULL_SUBSTITUTION_LABEL","NOTHING_SUBSTITUTION_VALUE","_BUTTON_OK","_BUTTON_SAVE","_BUTTON_REMOVE","_BUTTON_APPLY","_BUTTON_CANCEL","TEMP_REPORT_CONTAINER","WRAPPER_ERROR_FLAG_PREFIX_SELECTOR","WRAPPERS_ERRORS_DIV","EVAL_SCRIPT_ELEMENT_NAME","CONTROL_OPTIONS_TEXT","CALENDAR_ICON_SPAN","_messages","getMessage","messageId","object","message","Template","evaluate","setControlError","errorDiv","error","nextSiblings","setControlsErrors","errors","errorDivs","offset","div","pair","i","scrollTop","$break","buildParams","params","paramsString","and","uri","paramValue","paramName","encodeURIComponent","buildSelectedDataUri","selectedData","extraParams","ControlDialog","buttonActions","it","_dom","empty","action","e","pattern","matchAny","preventDefault","stopPropagation","dialogs","OptionsDialog","input","find","overwrite","_dialogClickHandler","bindAsEventListener","observe","stopObserving","setValue","hideWarning","warning","JRS","isIE","navigator","userAgent","toLowerCase","createTemplateFunction","template","data","defaults","undefined","uuid","description","Base","extend","protoProps","staticProps","child","has","constructor","apply","arguments","Surrogate","prototype","__super__","TemplateEngine","render","templateText","model","type","STD_PLACEHOLDERS","result","String","val","regExp","RegExp","replace","renderUrl","encoded","url","encodeURI","getTemplateText","html","createTemplate","createTemplateSection","section","concreteSectionRegexpPattern","regexp","match","Utils","LOADING_DIALOG_DELAY","INPUT_CONTROLS_COMPONENT_ID","isElementInDom","nextSibling","parentNode","nodeType","setInnerHtml","el","display","style","removeChild","tagName","fragment","createDocumentFragment","option","createElement","isUndefined","selected","appendChild","insertBefore","styleContent","getAttribute","wait","delay","Deferred","dfr","resolve","showLoadingDialogOn","deferred","modal","then","bind","state","popup","showShared","ajax","focus","owner","when","always","ownerId","viewer","loading","loaded","hideShared","createTimer","done","startTime","diff","Date","getTime","console","log","start","stop","listen","listeners","context","eventHandler","eventName","ignore","handler","Controls","settingsStore","EMAIL_SEPARATOR","SERVICE_DATE_PATTERN_MOMENTJS_FORMAT","ftpIsProcessings","validatedFolderURIsCache","validatedSshKeysCache","MOMENTJS_PARSE_UI_DATE_PATTERN","format","conversion","key","convertFormatFromDateTimePickerToMomentJs","config","Backbone","ftpPortDefaults","ftp","ftps","sftp","urlRoot","validateAll","editMode","self","$","runServerValidationRequests","isValid","errorCode","trigger","switchToErrors","validate","attributes","tmp","results","startType","startDate","moment","ifPastDate","timezone","field","isNumeric","recurrenceInterval","minValue","maxValue","radioEndDate","occurrenceCount","endDate","radioWhichMonth","months","month","radioWhichDay","weekDays","day","parseIntervals","monthDays","hours","minutes","output","repositoryDestination","outputDescription","sequentialFilenames","timestampPattern","baseOutputFilename","isValidFileName","outputFormats","outputFormat","saveToRepository","folderURI","isValidUri","outputLocalFolder","outputFTPInfo","enabled","serverName","isHostName","port","sshKeyEnabled","sshKey","mailNotification","toAddressNotification","toAddresses","address","ccAddress","ccAddresses","bccAddress","bccAddresses","subjectNotification","subject","messageText","validateEmails","alert","toAddressAlert","subjectAlert","jobState","get","hasOwnProperty","set","name","o","l","sync","method","contentType","beforeSend","request","setRequestHeader","cache","parse","formatDate","calendarName","recurrenceIntervalUnit","toString","daysType","formats","overwriteFiles","propertiesMap","implicit","pbsz","userName","password","sshPassphrase","defaultResultSendTypeValue","resultSendType","messageTextWhenJobFails","rs","keys","includingReportJobInfo","includingStackTrace","toJSON","toUpperCase","folderPath","jobId","jobStateEnum","loadParameters","reportUnitURI","inputControl","parameters","controls","parameterValues","fail","checkSaveValidation","testsPassed","onTestPassing","onTestFailure","testDates","validateParametersIC","testOutputHostFileSystemFolder","testFTPConnection","callback","ftpInfo","host","protocol","prot","holder","headers","success","successData","xhr","err","controlsController","areControlsValid","testOutputRepositoryFolder","testSshKey","resource","errorArguments","folder","checkPermissionOnFolder","permission","path","permissionMask","JSON","responseText","parseUri","full","file","createFromUri","clear","silent","createNewData","jrsConfigDefaults","source","outputTimeZone","timestamp","str","k","strs","numbers","control","MIN","MAX","allowZero","date","date_tz","target_tz","getTZOffset","tz_diff","utcOffset","currentTime","add","hostname","test","isEmail","email","XRegExp","globalConfig","fileName","emails","cfg","allowNegative","InfiniteScroll","_id","_contentId","contentId","_scroll","scroll","_loadFactor","loadFactor","_lastContentHeight","_loading","_control","_content","content","childElements","_eventType","isSupportsTouch","_onScrollHandler","_handler","controlScrollTop","y","contentHeight","getHeight","controlHeight","allowLoad","isBottom","isIPad","onLoad","doNothing","reset","_waitIndicator","Element","dimensions","getDimensions","positionedOffset","insert","after","getLastRanDate","previousFireTime","getNextRunDate","i18n","nextFireTime","isJobEnabled","className","events","initialize","masterViewMode","$el","lastRanDate","nextRunDate","collection","addToolTipToListElement","desc","reportLabel","edit","remove","dialog","ConfirmationDialog","title","additionalCssClasses","listenTo","destroy","open","event","target","checked","JobModel","initialAmountOfJobsToLoad","amountOfJobsToLoad","amountOfLoadedJobs","setSearchingTerm","term","searchingTerm","getSearchingTerm","getReportUri","parentReportURI","reportUri","fetch","urlsOfReportsToFetchJobs","getJobsWithPagination","_secondFetchPart","getJobsOfAllReportsWeHave","getReportOptions","reportOptionsSummary","jobModels","fetchedAmount","getJobOfReport","concat","getJobsFromBackend","startIndex","amountOfJobs","requestParams","models","loadMoreJobs","response","jobsummary","_getJobsCollection","JobsCollection","jobsViewCollection","createAndAddJobView","renderCollection","refresh","searchJobs","searchTerm","clearJobSearch","templateData","setElement","jobsContainer","append","initInfiniteScroll","adjustTableHeaderWidth","nothingToDisplayMessage","isDashboard","resultList","resultsContainer","_touchController","TouchController","forceLayout","_infiniteScroll","stopWaiting","header","table","hasScroll","domUtil","jobSearchInputKeyDown","keyCode","jobSearchIconClick","item","view","JobView","editJobPressed","backButtonClick","createButtonClick","runButtonClick","refreshButtonClick","_savedOptions","DialogWithModelInputValidation","theDialogIsOpen","saveDialogTemplate","extendModel","saveButtonLabel","_getLabelForSaveButton","skipLocation","resizable","isEmbedded","isEditMode","buttons","primary","_onSaveDialogSaveButtonClick","_onSaveDialogCancelButtonClick","restoreModel","originalModelValidation","validation","ResourceModel","parentFolderUri","required","msg","maxLength","startSaveDialog","_openDialog","closeDialog","_closeDialog","_closeSchedulerOverlay","getElementsByClassName","bindValidation","$contentContainer","unbindValidation","clearValidationErrors","_onDialogResize","otherElementsHeight","descriptionArea","dialogBody","closest","children","not","outerHeight","viewModel","performSave","save","_saveSuccessCallback","_saveErrorCallback","onSaveDone","schedulerAccelator","errorHandled","invalidField","onSaveFail","$calendarView","$option","calendarBlock","calendarSelect","size","calendar","HolidayCalModel","jqueryDateFormat","jqueryTimeFormat","calCollection","HolidayCalsCollection","calView","HolydayCalView","calendarType","triggerChanged","calendarChanged","timeZones","setupDatepickersOn","$calendar","DateAndTimePicker","constrainInput","dateFormat","timeFormat","showOn","buttonText","next","appTimeZone","settings","timepicker","getValue","filter","prop","setStartType","setStartDate","setTimeZone","setRecurrenceType","setRecurrenceInterval","setRecurrenceIntervalUnit","setEnDat","setOccurrenceCount","setEndDate","monthRadioSelector","setMonthSelector","dayRadioSelector","setDaySelector","setDatesInMonth","setHours","setMinutes","setCalendar","sourceChange","viewModelValuesChange","saveAsDialogButtonSaveClick","optionName","reportOptionsDialog","getViewModel","optionNameToOverwrite","reportOptions","optionsUrl","container","getElem","prepend","showWarning","preSelectedParameterValues","reportOptionUri","preSelectedData","fetchAndSetInputControlsState","binding","depends","getter","setter","map","availableFormats","rp","isFormatAvailable","formatName","getFolderChooserDialog","folderChooserDialog","Dialog","RepositoryChooserDialogFactory","treeBufferSize","setMinSizeAsSize","resourceUri","selectedResource","setDefaultSelectedItem","outputRepositoryButtonClick","getSshKeyChooserDialog","sshKeyChooserDialog","disableListTab","resourcesTypeToSelect","repositoryResourceTypes","sshKeyPath","sshKeyPathButtonClick","fixUriInput","currentTarget","substring","_renderTemplate","_initializeBinding","locales","localesName","a","invert","substr","change","call","isDisabled","is","mn","message_suc_DisabledEnabled","chBoxValue","radioValue","asRepoLinks_DisabledEnabled","includeHtmlReport_DisabledEnabled","skipEmptyReports","c","changeTo","rd","of","to_suc_Change","cc_suc_Change","bcc_suc_Change","subject_suc_Change","message_suc_Change","setResultSendType","newVal","dont_send_empty_report_Change","job_status_to_Change","job_status_subject_Change","twoCheckboxes_Change","v1","v2","enumValue","job_status_success_message_Change","job_status_failed_message_Change","include_report_Change","include_stack_trace_Change","runNowMode","tabs","validModelListener","invalidModelListener","clearAllValidationErrors","sourceKeyInModelChanged","InputControlsNotLoaded","_initializeTabs","parametersTab","InputControlsLoaded","tabParams","scheduleTab","EditorScheduleTabView","EditorParametersTabView","outputTab","EditorOutputTabView","notificationsTab","EditorNotificationsTabView","tabChangeClickEvent","tabElement","tabName","hasClass","currentActiveTabName","changeActiveTab","openSaveDialogClick","startSavingProcess","cancelJobCreationClick","renderCreateNewJobInterface","_render","runInBackgroundMode","prepareSaveOrSubmitButton","prepareModelForCreatingNewJob","unset","dontReactOnModelChange","editExistingJob","_fetched","setTitle","openSaveDialogButton","cancelButton","saveButtonReady","toggleEnableTab","setRunNowMode","shedulerAccelator","first","toggleClass","nextAll","REPORT_TIME_ZONE","doShowParametersTab","_prepareSaveDialog","saveDialog","SaveDialogView","_onSaveDone","_onSaveFail","justExit","alertDialog","AlertDialog","setMessage","showValidationMessage","messages","jrsConfigs","schedulerApp","jobsView","_createJobModel","_createJobsView","JobsView","_createJobEditorView","JobEditorView","_getChildViewInitParams","schedulerStartupParams","location","hash","schedulerUtils","childViewInitParams","exception","status","reload","runNowRequest","isJobEditFromServerMonitoring","openEditJobInterface","openJobsListInterface","_openNewJobInterface","prepareJobsView","createNewJobRequest","backButtonPressed","prepareJobEditorView","jobEditorView","errorEditingJob","cancelJobCreation","jobHasBeenCreated","editJob","runMode","jobEditFromMonitoring","slideDown","schedulerIframe","contents"],"mappings":"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","file":"_chunks/chunk.8654.js","sourcesContent":["/*\n * Copyright (C) 2005 - 2022 TIBCO Software Inc. All rights reserved.\n * http://www.jaspersoft.com.\n *\n * Unless you have purchased a commercial license agreement from Jaspersoft,\n * the following license terms apply:\n *\n * This program is free software: you can redistribute it and/or modify\n * it under the terms of the GNU Affero General Public License as\n * published by the Free Software Foundation, either version 3 of the\n * License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the\n * GNU Affero General Public License for more details.\n *\n * You should have received a copy of the GNU Affero General Public License\n * along with this program. If not, see <http://www.gnu.org/licenses/>.\n */\n\n\n/**\n * @version: $Id$\n */\n\nimport _ from 'underscore';\nimport {\n    isArray,\n    getBoxOffsets,\n    getScrollLeft,\n    getScrollTop\n} from '../util/utils.common';\nimport jQuery from 'jquery';\n\nimport xssUtil from 'js-sdk/src/common/util/xssUtil';\n\nimport layoutModule from '../core/core.layout';\n\n/**\n * Usage:\n *      Within HTML markup. (Not working with button element)\n *\n *      <code>\n *      &lt;li tooltiptext=\"Hello\"&gt;Item 1&lt;/li&gt;\n *      &lt;li tooltiptext=\"Hello\" tooltiplabel=\"URA!\"&gt;Item 1&lt;/li&gt;\n *      &lt;li tooltiptext=\"Hello\" tooltiplabel=\"URA!\" tooltiptemplate=\"tID\"&gt;Item 1&lt;/li&gt;\n *      </code>\n *\n *      Within JavaScript\n *      <code>\n *      new JSTooltip(element, { text: \"tooltipText\" }).show();\n *      new JSTooltip(element, { text: \"tooltipText\", offsets: [100, 50] }).show();\n *      new JSTooltip(element, { text: \"tooltipText\" }).show([100, 50]);\n *     new JSTooltip(element, { label: \"tooltipLabel\", text: \"tooltipText\", templateId: \"templateId\" });\n *      new JSTooltip(element, { label: [\"tooltipLabel1\", \"tooltipLabel2\"], text: [\"tooltipText1\", \"tooltipText2\", \"tooltipText3\"], templateId: \"templateId\" });\n *\n *      tooltipModule.showJSTooltip(element, [100, 50]);\n *      tooltipModule.hideJSTooltip(element);\n *      </code>\n * @param element\n * @param options {Object}\n * <ul>\n *      <li>label {String} - Label for the tooltip</li>\n *      <li>label {Array} - List of labels for complex tooltip</li>\n *      <li>text {String} - Text for the tooltip</li>\n *      <li>text {Array} - List of messages for complex tooltip</li>\n *      <li>templateId {String} - DOM ID of template for the tooltip </li>\n *      <li>offsets {Array} - Used to show the tooltip in position. First item in array is the X point adn second is the Y point </li>\n *      <li>showBelow {Boolean} - Show bellow element</li>\n * </ul>\n *\n */\nfunction JSTooltip(element, options) {\n    if (element) {\n        this.srcElement = element;\n\n        if (options) {\n            this.label = options.label;\n            this.text = options.text;\n            this.offsets = options.offsets;\n            this.showBelow = !! options.showBelow;\n            this.templateId = options.templateId;\n            this.loadTextCallback = options.loadTextCallback;\n            this.loadTextExecuted = false;\n        }\n\n        this.disabled = false;\n        this.removed = false;\n\n        if (this.templateId) {\n            this._toAttribute(this.TOOLTIP_TEMPLATE, this.templateId);\n        } else {\n            var id = this._fromAttribute(this.TOOLTIP_TEMPLATE);\n            this.templateId = (id && id.length > 0) ? id : this.TOOLTIP_TEMPLATE_ID;\n        }\n        if (this.label) {\n            this._toAttribute(this.TOOLTIP_LABEL, this.label);\n        } else {\n            this.label = this._fromAttribute(this.TOOLTIP_LABEL);\n        }\n        if (this.text) {\n            this._toAttribute(this.TOOLTIP_TEXT, this.text);\n        } else {\n            this.text = this._fromAttribute(this.TOOLTIP_TEXT);\n        }\n\n        // escape against XSS\n        if (this.label)\n            this.label = this._escapeText(this.label);\n        if (this.text)\n            this.text = this._escapeText(this.text);\n\n        this.srcElement.jsTooltip = this;\n\n        tooltipModule.tooltips.push(this);\n    }\n}\n\nJSTooltip.addVar(\"SEPARATOR\", \"@@\");\nJSTooltip.addVar(\"TOOLTIP_LABEL\", \"tooltiplabel\");\nJSTooltip.addVar(\"TOOLTIP_TEXT\", \"tooltiptext\");\nJSTooltip.addVar(\"TOOLTIP_TEMPLATE\", \"tooltiptemplate\");\nJSTooltip.addVar(\"TOOLTIP_TEMPLATE_ID\", \"jsTooltip\");\nJSTooltip.addVar(\"LABEL_PATTERN\", \".message.label\");\nJSTooltip.addVar(\"TEXT_PATTERN\", \".message:not(.label)\");\n\nJSTooltip.addMethod(\"_toAttribute\", function(attrName, value) {\n    if(this.srcElement) {\n        value = xssUtil.hardEscape(value);\n        this.srcElement.writeAttribute(attrName, isArray(value) ? value.join(this.SEPARATOR) : value);\n    }\n});\n\nJSTooltip.addMethod(\"_fromAttribute\", function(attrName) {\n    if(this.srcElement && this.srcElement.hasAttribute(attrName)) {\n        var value = this.srcElement.readAttribute(attrName);\n        return value.include(this.SEPARATOR) ? value.split(this.SEPARATOR) : value;\n    }\n\n    return null;\n});\n\nJSTooltip.addMethod(\"_setValues\", function(elements, values) {\n    elements.each(function (element, index) {\n        if (_.isString(values[index]) || _.isNumber(values[index])) {\n            element.update(xssUtil.hardEscape(values[index]));\n        }\n    });\n});\n\nJSTooltip.addMethod(\"_calculateZIndex\", function(element) {\n    function getElementZIndex(elem) {\n        return parseInt(jQuery(elem).css(\"z-index\"));\n    }\n\n    // Get tooltip element zIndex.\n    var initialZIndex = getElementZIndex(element);\n    if (!_.isNumber(initialZIndex) || _.isNaN(initialZIndex)) {\n        initialZIndex = 1000;\n    }\n\n    var parents = _.flatten([this.srcElement, jQuery(this.srcElement).parents().toArray()]);\n\n    // Calculates max z-index between tooltip element and parent elements.\n    var maxZIndex = _.reduce(parents, function(memo, parent) {\n        var zIndex = getElementZIndex(parent);\n\n        if (_.isNumber(zIndex) && !_.isNaN(zIndex)) {\n            memo = Math.max(memo, zIndex);\n        }\n\n        return memo;\n    }, initialZIndex);\n\n    return maxZIndex + 1;\n});\n\nJSTooltip.addMethod(\"_escapeText\", function(text) {\n    return _.isArray(text)\n        ? _.map(text, function (txt) { return xssUtil.hardEscape(txt)})\n        : xssUtil.hardEscape(text);\n});\n\nJSTooltip.addMethod(\"show\", function(tooltipOffsets) {\n    if(tooltipOffsets) {\n        this.offsets = tooltipOffsets;\n    }\n\n    this._element = jQuery('#' + this.templateId)[0];\n\n    var offsets;\n    if (this.showBelow) {\n        offsets = getBoxOffsets(this.srcElement);\n        offsets[1] += this.srcElement.clientHeight + 5;\n    } else {\n        offsets = [getScrollLeft() + 5, getScrollTop() + 5];\n    }\n\n    if (this.offsets) {\n        offsets[0] += this.offsets[0];\n        offsets[1] += this.offsets[1];\n    }\n\n    this._element.setStyle({\n        position: \"absolute\",\n        left: offsets[0] + 'px',\n        top: offsets[1] + 'px',\n        zIndex: this._calculateZIndex(this._element)\n    });\n\n    var labelElements = this._element.select(this.LABEL_PATTERN);\n    var textElements = this._element.select(this.TEXT_PATTERN);\n\n    if(this.label) {\n        this._setValues(labelElements, isArray(this.label) ? this.label : [this.label]);\n    }\n    if(this.text) {\n        this._setValues(textElements, isArray(this.text) ? this.text : [this.text]);\n    }\n\n    jQuery(this._element).removeClass(layoutModule.HIDDEN_CLASS);\n\n    if (offsets[0] + this._element.clientWidth > jQuery(window).width()) {\n        var leftOffset = offsets[0] - this._element.clientWidth > 0 ? offsets[0] - this._element.clientWidth : 15;\n\n        this._element.setStyle({ left: leftOffset + \"px\"});\n    }\n    if (offsets[1] + this._element.clientHeight > jQuery(window).height()) {\n        var topOffset = offsets[1] - this._element.clientHeight - 10;\n        this._element.setStyle({ top: topOffset + \"px\"});\n    }\n\n    if (this.loadTextCallback && !this.loadTextExecuted) {\n        this.loadTextExecuted = true;\n\n        this.loadTextCallback(this);\n    }\n\n    return this;\n});\n\nJSTooltip.addMethod(\"updateText\", function(text) {\n    this.text = this._escapeText(text);\n\n    if (this._element) {\n        var textElements = this._element.select(this.TEXT_PATTERN);\n\n        this._setValues(textElements, isArray(this.text) ? this.text : [this.text]);\n    }\n});\n\nJSTooltip.addMethod(\"hide\", function() {\n    if (this._element) {\n        jQuery(this._element).addClass(layoutModule.HIDDEN_CLASS);\n    }\n});\n\nJSTooltip.addMethod(\"disable\", function() {\n    tooltipModule.hideJSTooltip(this.srcElement);\n    this.disabled = true;\n});\n\nJSTooltip.addMethod(\"enable\", function() {\n    this.disabled = false;\n    tooltipModule.showJSTooltip(this.srcElement, this.offsets);\n});\n\nJSTooltip.addMethod(\"remove\", function() {\n    var index = tooltipModule.tooltips.indexOf(this.srcElement.jsTooltip);\n    if (index !== -1) {\n        tooltipModule.hideJSTooltip(this.srcElement);\n        tooltipModule.tooltips.splice(index, 1);\n    }\n    this.removed = true;\n});\n\nJSTooltip.addMethod(\"isRemoved\", function() {\n    return this.removed;\n});\n\nvar tooltipModule = {\n    TOOLTIP_PATTERN: \"*[tooltiptext] > *\",\n    ELEMENT_WITH_TOOLTIP_PATTERN: \"*[tooltiptext]\",\n\n    tooltips: [],\n\n    showJSTooltip: function(element, offsets) {\n        if (!element.jsTooltip) {\n            element.jsTooltip = new JSTooltip(element, {});\n        } else if (!element.jsTooltip.disabled && offsets) {\n            var actualX = offsets[0];\n            var actualY = offsets[1];\n\n            this.cleanUp();\n\n            var appearDelay = jQuery(element).attr(\"tooltipappeardelay\");\n            appearDelay = appearDelay ? parseInt(appearDelay) : 1000;\n\n            element.jsTooltip.timer && clearTimeout(element.jsTooltip.timer);\n            element.jsTooltip.timer = setTimeout(function() {\n                element.jsTooltip.show([actualX, actualY]);\n            }, appearDelay);\n\n            jQuery(element).on(\"mousemove\", function(evt){\n                actualX = evt.clientX;\n                actualY = evt.clientY;\n            });\n        }\n    },\n\n    enableTooltips: function() {\n        var tooltips = this.tooltips || [];\n\n        tooltips.forEach(function(tooltip) {\n            tooltip.enable();\n        });\n    },\n\n    disableTooltips: function() {\n        var tooltips = this.tooltips || [];\n\n        tooltips.forEach(function(tooltip) {\n            tooltip.disable();\n        });\n    },\n\n    hideJSTooltip: function(element) {\n        if (element && element.jsTooltip) {\n            element.jsTooltip.timer && clearTimeout(element.jsTooltip.timer);\n\n            element.jsTooltip.hide();\n\n            jQuery(element).off(\"mousemove\");\n        }\n    },\n\n    cleanUp: function() {\n        if (this.tooltips && this.tooltips.length > 0) {\n            var removed = [];\n            var testId = \"fuigasuifdughaiadbvguaidbapvuwbev\";\n            this.tooltips.each(function(tooltip) {\n                if (!(tooltip.srcElement.id && document.getElementById(tooltip.srcElement.id))){\n                    tooltip.srcElement.setAttribute(\"id\",testId);\n                    if (!document.getElementById(testId)){\n                        tooltip.hide();\n                        removed.push(tooltip);\n                    }\n                    tooltip.srcElement.removeAttribute(\"id\");\n                }\n            });\n\n            if (removed.length > 0) {\n                this.tooltips = this.tooltips.reject(function(t) {\n                    return removed.include(t);\n                });\n            }\n        }\n    }\n};\n\nexport {JSTooltip, tooltipModule};\n","/*\n * Copyright (C) 2005 - 2022 TIBCO Software Inc. All rights reserved.\n * http://www.jaspersoft.com.\n *\n * Unless you have purchased a commercial license agreement from Jaspersoft,\n * the following license terms apply:\n *\n * This program is free software: you can redistribute it and/or modify\n * it under the terms of the GNU Affero General Public License as\n * published by the Free Software Foundation, either version 3 of the\n * License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the\n * GNU Affero General Public License for more details.\n *\n * You should have received a copy of the GNU Affero General Public License\n * along with this program. If not, see <http://www.gnu.org/licenses/>.\n */\n/**\n * @version: $Id$\n */\nimport {Template, $break} from 'prototype';\nimport layoutModule from '../core/core.layout';\nimport {matchAny} from \"../util/utils.common\";\nimport dialogs from '../components/components.dialogs';\nimport jQuery from 'jquery';\nimport _ from 'underscore';\n\nvar ControlsBase = {\n    INPUT_CONTROLS_FORM: 'inputControlsForm',\n    INPUT_CONTROLS_CONTAINER: 'inputControlsContainer',\n    INPUT_CONTROLS_DIALOG: 'inputControls',\n    SAVE_REPORT_OPTIONS_DIALOG: 'saveValues',\n    REPORT_OPTIONS_SELECTOR: 'savedValues',\n    TOOLBAR_CONTROLS_BUTTON: 'ICDialog',\n    DEFAULT_OPTION_TEXT: 'Options',\n    KEY_DOWN_TIMEOUT: 800,\n    // These constants are set from server\n    NULL_SUBSTITUTION_VALUE: null,\n    NULL_SUBSTITUTION_LABEL: null,\n    NOTHING_SUBSTITUTION_VALUE: null,\n    _BUTTON_OK: 'ok',\n    _BUTTON_SAVE: 'save',\n    _BUTTON_REMOVE: 'remove',\n    _BUTTON_APPLY: 'apply',\n    _BUTTON_CANCEL: 'cancel',\n    TEMP_REPORT_CONTAINER: 'tempReportContainer',\n    WRAPPER_ERROR_FLAG_PREFIX_SELECTOR: 'div[id^=error_]',\n    WRAPPERS_ERRORS_DIV: 'wrappersErrors',\n    EVAL_SCRIPT_ELEMENT_NAME: '_evalScript',\n    CONTROL_OPTIONS_TEXT:\"Saved Values:\",\n    // Used to properly position icon cross-browser\n    CALENDAR_ICON_SPAN: '<span class=\"button picker calTriggerWrapper\" ></span>',\n    _messages: {},\n    getMessage: function (messageId, object) {\n        var message = this._messages[messageId];\n        return message ? new Template(message).evaluate(object ? object : {}) : '';\n    },\n    setControlError: function (errorDiv, error) {\n        if (!errorDiv)\n            return;\n        errorDiv = jQuery('#' + errorDiv);\n        if (error[0]) {\n            errorDiv.parent().addClass(layoutModule.ERROR_CLASS);\n            errorDiv.nextSiblings()[0].update(error);\n        } else {\n            errorDiv.parent().removeClass(layoutModule.ERROR_CLASS);\n            errorDiv.nextSiblings()[0].update('');\n        }\n    },\n    setControlsErrors: function (errors) {\n        var errorDivs = jQuery(ControlsBase.WRAPPER_ERROR_FLAG_PREFIX_SELECTOR);\n        var index = 0;\n        var offset = -1;\n        errorDivs.each(function (div) {\n            var error = false;\n            errors && errors.each(function (pair) {\n                if (div.id.indexOf(pair[0]) > -1) {\n                    ControlsBase.setControlError(div, pair[1]);\n                    if (offset < 0) {\n                        jQuery('#inputControlsForm .leaf').each(function (i, element) {\n                            if (i < index)\n                                offset += element.clientHeight;\n                        });\n                        jQuery('.groupBox .content .body')[0].scrollTop = offset;\n                    }\n                    error = true;\n                    throw $break;\n                } else\n                    index++;\n            });\n            if (!error) {\n                ControlsBase.setControlError(div, '');\n            }\n        });\n    },\n    /*\n        TODO: remove after Emerald2 release.\n     */\n    /*\n    evalScripts: function() {\n        var elements = document.getElementsByName(ControlsBase.EVAL_SCRIPT_ELEMENT_NAME);\n        for (var i = 0; i < elements.length; i++) {\n            window.eval(elements[i].value);\n        }\n\n        ControlsBase.removeEvalScripts(elements);\n    },\n\n    removeEvalScripts: function(scriptElements) {\n        var elements = scriptElements ? scriptElements : document.getElementsByName(ControlsBase.EVAL_SCRIPT_ELEMENT_NAME);\n\n        // Remove evaluated elements so they newer will be evaluated twice.\n        $A(elements).clone().each(function(elem) {\n            $(elem).remove();\n        })\n    },\n    */\n    // params <string, string || array<string>>\n    buildParams: function (params) {\n        var paramsString = '';\n        if (_.isObject(params) && !_.isEmpty(params)) {\n            var and = function (uri) {\n                if (uri.length > 0 && uri[uri.length - 1] != '&') {\n                    uri += '&';\n                }\n                return uri;\n            };\n            _.each(params, function (paramValue, paramName) {\n                paramsString = and(paramsString);\n                if (_.isArray(paramValue)) {\n                    _.each(paramValue, function (value) {\n                        paramsString = and(paramsString);\n                        paramsString += paramName + '=' + encodeURIComponent(value);\n                    });\n                } else {\n                    paramsString += paramName + '=' + encodeURIComponent(paramValue);\n                }\n            });\n        }\n        return paramsString;\n    },\n    /**\n     * Used for creating post data to replace old form functionality\n     * @param selectedData Selected values of input controls,\n     * if null or undefined, empty string will be returned.\n     * @param extraParams Extra params in the same format as selectedData,\n     * this parameter is optional.\n     */\n    buildSelectedDataUri: function (selectedData, extraParams) {\n        var params = ControlsBase.buildParams(selectedData);\n        if (_.isObject(extraParams) && !_.isEmpty(extraParams)) {\n            var extraParamsString = ControlsBase.buildParams(extraParams);\n            return params + '&' + extraParamsString;\n        } else {\n            return params;\n        }\n    }\n};    //////////////////////////\n//  Input Controls dialog\n//////////////////////////\n//////////////////////////\n//  Input Controls dialog\n//////////////////////////\nvar ControlDialog = function (buttonActions) {\n    var it = this;\n    this._dom = jQuery('#' + ControlsBase.INPUT_CONTROLS_DIALOG)[0];\n    this.buttonActions = buttonActions;    //    if (isIPad()) {\n    //         var el = document.getElementById(ControlsBase.INPUT_CONTROLS_CONTAINER).parentNode;\n    //         new TouchController(el, el.parentNode);\n    //    }\n    //    if (isIPad()) {\n    //         var el = document.getElementById(ControlsBase.INPUT_CONTROLS_CONTAINER).parentNode;\n    //         new TouchController(el, el.parentNode);\n    //    }\n    jQuery('#' + ControlsBase.INPUT_CONTROLS_DIALOG).on('mouseup touchend', 'button', function (evt) {\n        if (this.id && !this.id.empty() && !this.disabled) {\n            var action = it.buttonActions['button#' + this.id];\n            action && action();\n        }\n    });\n};    // observe buttons\n// observe buttons\nControlDialog.addMethod('_dialogClickHandler', function (e) {\n    var element = e.element();    // observe buttons\n    // observe buttons\n    for (var pattern in this.buttonActions) {\n        if (matchAny(element, [pattern], true)) {\n            this.buttonActions[pattern]();\n            e.preventDefault();\n            e.stopPropagation();\n            return;\n        }\n    }\n});\nControlDialog.addMethod('show', function () {\n    dialogs.popup.show(this._dom);\n});\nControlDialog.addMethod('hide', function () {\n    dialogs.popup.hide(this._dom);\n});    ///////////////////////////////\n//  Save Report Options dialog\n///////////////////////////////\n///////////////////////////////\n//  Save Report Options dialog\n///////////////////////////////\nvar OptionsDialog = function (buttonActions) {\n    this._dom = jQuery('#' + ControlsBase.SAVE_REPORT_OPTIONS_DIALOG)[0];\n    this.input = jQuery(this._dom).find('input#savedValuesName')[0];\n    this.overwrite = false;\n    this.buttonActions = buttonActions;\n    this._dialogClickHandler = this._dialogClickHandler.bindAsEventListener(this);\n    this._dom.observe('click', this._dialogClickHandler);\n};\nOptionsDialog.addMethod('remove', function () {\n    this._dom.stopObserving('click', this._dialogClickHandler);\n});    // observe buttons\n// observe buttons\nOptionsDialog.addMethod('_dialogClickHandler', function (e) {\n    var element = e.element();    // observe buttons\n    // observe buttons\n    for (var pattern in this.buttonActions) {\n        if (matchAny(element, [pattern], true)) {\n            this.buttonActions[pattern]();\n            e.preventDefault();\n            e.stopPropagation();\n            return;\n        }\n    }\n});\nOptionsDialog.addMethod('show', function () {\n    this.input.setValue(ControlsBase.DEFAULT_OPTION_TEXT);\n    dialogs.popup.show(this._dom);\n});\nOptionsDialog.addMethod('hide', function () {\n    dialogs.popup.hide(this._dom);\n    this.hideWarning();\n});\nOptionsDialog.addMethod('showWarning', function (text) {\n    var warning = jQuery('#' + ControlsBase.SAVE_REPORT_OPTIONS_DIALOG).find('.warning');\n    if (text) {\n        warning.text(text);\n    }\n    warning.show();\n});\nOptionsDialog.addMethod('hideWarning', function () {\n    var warning = jQuery('#' + ControlsBase.SAVE_REPORT_OPTIONS_DIALOG).find('.warning');\n    warning.text('');\n    warning.hide();\n});\n\nexport {ControlsBase, OptionsDialog, ControlDialog};\n","/*\n * Copyright (C) 2005 - 2022 TIBCO Software Inc. All rights reserved.\n * http://www.jaspersoft.com.\n *\n * Unless you have purchased a commercial license agreement from Jaspersoft,\n * the following license terms apply:\n *\n * This program is free software: you can redistribute it and/or modify\n * it under the terms of the GNU Affero General Public License as\n * published by the Free Software Foundation, either version 3 of the\n * License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the\n * GNU Affero General Public License for more details.\n *\n * You should have received a copy of the GNU Affero General Public License\n * along with this program. If not, see <http://www.gnu.org/licenses/>.\n */\n/**\n * @author: afomin, inesterenko\n * @version: $Id$\n */\n\nimport {JRS} from \"../namespace/namespace\";\nimport {ajax} from \"../core/core.ajax\";\nimport _ from 'underscore';\nimport dialogs from '../components/components.dialogs';\nimport jQuery from 'jquery';\n\nimport './controls.logging';\n\nJRS.Controls = (function(jQuery, _, dialogs){\n\n    //module:\n    //\n    //  controls.core\n    //\n    //summary:\n    //\n    //  Define base objects types to work with input controls\n    //\n    //main types:\n    //\n    // Base             - provide inheritance,\n    // TemplateEngine   - load templates, can get template's sections\n    // Utils            - provide common functions\n    //\n    //dependencies:\n    //\n    //  jQuery          - v1.7.1\n    //  _,              - underscore.js 1.3.1\n    //  Mustache       - template engine\n    //  dialogs        - components.dialogs module\n    var isIE = navigator.userAgent.toLowerCase().indexOf(\"msie\") > -1;\n\n\n    function createTemplateFunction(template){\n        return function (data) {\n            return _.template(template)(_.defaults({\n                data: undefined,\n                uuid: undefined,\n                message: undefined,\n                description: undefined\n            }, data))\n        }\n    }\n\n    return {\n        Base: _.extend(function () {\n        }, {\n            // Helper function to correctly set up the prototype chain, for subclasses.\n            // Similar to `goog.inherits`, but uses a hash of prototype properties and\n            // class properties to be extended.\n            extend: function (protoProps, staticProps) {\n                var parent = this;\n                var child;\n\n                // The constructor function for the new subclass is either defined by you\n                // (the \"constructor\" property in your `extend` definition), or defaulted\n                // by us to simply call the parent's constructor.\n                if (protoProps && _.has(protoProps, 'constructor')) {\n                    child = protoProps.constructor;\n                } else {\n                    child = function () {\n                        return parent.apply(this, arguments);\n                    };\n                }    // Add static properties to the constructor function, if supplied.\n                // Add static properties to the constructor function, if supplied.\n                _.extend(child, parent, staticProps);    // Set the prototype chain to inherit from `parent`, without calling\n                // `parent`'s constructor function.\n                // Set the prototype chain to inherit from `parent`, without calling\n                // `parent`'s constructor function.\n                var Surrogate = function () {\n                    this.constructor = child;\n                };\n                Surrogate.prototype = parent.prototype;\n                child.prototype = new Surrogate();    // Add prototype properties (instance properties) to the subclass,\n                // if supplied.\n                // Add prototype properties (instance properties) to the subclass,\n                // if supplied.\n                if (protoProps)\n                    _.extend(child.prototype, protoProps);    // Set a convenience property in case the parent's prototype is needed\n                // later.\n                // Set a convenience property in case the parent's prototype is needed\n                // later.\n                child.__super__ = parent.prototype;\n                return child;\n            }\n        }),\n        // Provide functionality to get templates\n        TemplateEngine: {\n            // Populate template with data\n            render: function (templateText, model, type) {\n                if (!type) {\n                    //Mustache by default\n                    return createTemplateFunction(templateText)(model);\n                }else if(type == this.STD_PLACEHOLDERS){\n                    var result = String(templateText);\n                    _.each(model, function (val, index) {\n                        var regExp = new RegExp('\\\\{' + index + '\\\\}');\n                        result = result.replace(regExp, val);\n                    });\n                    return result;\n                }\n            },\n            renderUrl:function(templateText, model, encoded){\n                var url = _.template(templateText)(model);\n                if(isIE && !encoded){\n                    url = encodeURI(url);\n                }\n                return url;\n            },\n            // Return template's text\n            getTemplateText: function (templateId) {\n                var scriptTag = jQuery('#' + templateId);\n                return scriptTag.html();\n            },\n            // Return template's function for given id\n            createTemplate: function (templateId) {\n                var scriptTag = jQuery('#' + templateId);\n                var templateText = scriptTag.html();\n                if (templateText && templateText.length > 0) {\n                    return createTemplateFunction(templateText)\n                }\n            },\n            // Cut template's text chunk and wrap with a function\n            createTemplateSection:function (section, templateId) {\n                var regexpTemplate = '<!--#val-->(\\\\s|\\\\S)*<!--/val-->';\n                var concreteSectionRegexpPattern = regexpTemplate.replace(/val/g, section);\n                var regexp = new RegExp(concreteSectionRegexpPattern, \"g\");\n                var templateText = this.getTemplateText(templateId);\n                var templateSectionText = templateText.match(regexp)[0];\n                return createTemplateFunction(templateSectionText);\n            },\n            STD_PLACEHOLDERS: 'std_placeholder'\n        },\n        Utils: {\n            LOADING_DIALOG_DELAY: 800,\n            INPUT_CONTROLS_COMPONENT_ID: 'input-controls',\n            //check presents of element in DOM\n            isElementInDom: function (elem) {\n                var nextSibling = elem.nextSibling;\n                var parent = elem.parentNode && elem.parentNode.nodeType !== 11;\n                return nextSibling || parent;\n            },\n            // Optimized inserting of big content to DOM\n            setInnerHtml: function (el, template, data) {\n                var nextSibling, parent, display;\n                if (this.isElementInDom(el)) {\n                    nextSibling = el.nextSibling;\n                    parent = el.parentNode;\n                    display = el.style.display;    //turn off css reflows on it element during update\n                    //turn off css reflows on it element during update\n                    el.style.display = 'none';    //remove from the dom, it also reduce reflows on this element\n                    //remove from the dom, it also reduce reflows on this element\n                    parent.removeChild(el);\n                }\n                jQuery(el).html('');\n                if (isIE && el.tagName == 'SELECT') {\n                    //workaround for bug in IE, select element and innerHTML functionality\n                    //TODO: rewrite it, because it hardcoded for one special case it doesn't use template\n                    var fragment = document.createDocumentFragment();\n                    _.each(data.data, function (data) {\n                        var option = document.createElement('OPTION');    //hardcoded workaround for report options\n                        //hardcoded workaround for report options\n                        option.value = !_.isUndefined(data.value) ? data.value : data.id;\n                        jQuery(option).html(data.label);\n                        if (data.selected) {\n                            option.setAttribute('selected', 'selected');\n                        }\n                        fragment.appendChild(option);\n                    });\n                    el.appendChild(fragment);\n                } else {\n                    jQuery(el).html(template(data));\n                }\n                if (nextSibling) {\n                    parent.insertBefore(el, nextSibling);\n                } else {\n                    parent && parent.appendChild(el);\n                }\n                el.style.display = display;\n                if (isIE && el.tagName == 'SELECT') {\n                    //workaround for IE8,9, where width of 'select' not updates, before user click on.\n                    //reset style to force browser's reflows for 'select' element\n                    var styleContent = el.getAttribute('style');\n                    el.removeAttribute('style');\n                    el.setAttribute('style', styleContent);\n                }\n            },\n            wait: function (delay) {\n                return jQuery.Deferred(function (dfr) {\n                    setTimeout(dfr.resolve, delay);\n                });\n            },\n            showLoadingDialogOn: function (deferred, delay, modal) {\n                this.wait(delay ? delay : this.LOADING_DIALOG_DELAY).then(_.bind(function () {\n                    if (deferred.state() == 'pending') {\n                        //Do not focus on loading dialog\n                        dialogs.popup.showShared(jQuery('#' + ajax.LOADING_ID)[0], modal, {\n                            focus: false,\n                            owner: this.INPUT_CONTROLS_COMPONENT_ID\n                        });\n                        jQuery.when(deferred).always(_.bind(function () {\n                            var ownerId = this.INPUT_CONTROLS_COMPONENT_ID;    //don't close loading dialog very fast it irritates user\n                            //don't close loading dialog very fast it irritates user\n                            this.wait(500).then(function () {\n                                if (window.viewer && window.viewer.loading) {\n                                    // wait until componentsRegistered event in viewer.js\n                                    window.viewer.loaded && dialogs.popup.hideShared(jQuery('#' + ajax.LOADING_ID)[0], ownerId);\n                                } else {\n                                    dialogs.popup.hideShared(jQuery('#' + ajax.LOADING_ID)[0], ownerId);\n                                }\n                            });\n                        }, this));\n                    }\n                }, this));\n            },\n            createTimer: function (message) {\n                var timer = new jQuery.Deferred();\n                timer.done(function (startTime) {\n                    var endTime = new Date().getTime();\n                    var diff = endTime - startTime;\n                    /*eslint-disable-next-line no-console*/\n                    console.log(message + ' took time: ' + diff + ' msec.');\n                });\n                return {\n                    start: function () {\n                        this.startTime = new Date().getTime();\n                        return this;\n                    },\n                    stop: function () {\n                        timer.resolve(this.startTime);\n                        return this;\n                    }\n                };\n            }\n        },\n        listen: function (listeners, context) {\n            _.each(listeners, function (eventHandler, eventName) {\n                jQuery(document).on(eventName, _.bind(eventHandler, this));\n            }, !context ? this : context);\n        },\n\n        ignore:function(eventName, handler){\n            jQuery(document).off(eventName, handler);\n        }\n    };\n\n})(\n    jQuery,\n    _,\n    dialogs\n);\n\nwindow.Controls = JRS.Controls;\n\nexport default JRS.Controls;\n","\n        import settingsStore from 'settingsStore';\n        settingsStore['globalConfiguration'] = settingsStore['globalConfiguration'] || {};\n        export default settingsStore['globalConfiguration'];\n    ","/*\n * Copyright (C) 2005 - 2022 TIBCO Software Inc. All rights reserved.\n * http://www.jaspersoft.com.\n *\n * Unless you have purchased a commercial license agreement from Jaspersoft,\n * the following license terms apply:\n *\n * This program is free software: you can redistribute it and/or modify\n * it under the terms of the GNU Affero General Public License as\n * published by the Free Software Foundation, either version 3 of the\n * License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the\n * GNU Affero General Public License for more details.\n *\n * You should have received a copy of the GNU Affero General Public License\n * along with this program. If not, see <http://www.gnu.org/licenses/>.\n */\n\nexport default {\n    NORMAL: \"NORMAL\",\n    PAUSED: \"PAUSED\",\n    EXECUTING: \"EXECUTING\"\n}\n","/*\n * Copyright (C) 2005 - 2022 TIBCO Software Inc. All rights reserved.\n * http://www.jaspersoft.com.\n *\n * Unless you have purchased a commercial license agreement from Jaspersoft,\n * the following license terms apply:\n *\n * This program is free software: you can redistribute it and/or modify\n * it under the terms of the GNU Affero General Public License as\n * published by the Free Software Foundation, either version 3 of the\n * License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the\n * GNU Affero General Public License for more details.\n *\n * You should have received a copy of the GNU Affero General Public License\n * along with this program. If not, see <http://www.gnu.org/licenses/>.\n */\n\nimport $ from 'jquery';\nimport _ from 'underscore';\nimport Backbone from 'backbone';\nimport config from 'js-sdk/src/jrs.configs';\nimport globalConfig from '../../settings/globalConfiguration.settings';\nimport XRegExp from 'xregexp';\nimport jobStateEnum from '../enum/jobStateEnum';\nimport moment from 'moment';\nimport {getTZOffset} from \"../../util/utils.common\";\n\nvar EMAIL_SEPARATOR = \",\";\nvar SERVICE_DATE_PATTERN_MOMENTJS_FORMAT = \"YYYY-MM-DD HH:mm\";\nvar ftpIsProcessings = false;\n\n// This allows us to simply check the failed folder URI on sequent validation calls and avoid the extra requests to server.\nvar validatedFolderURIsCache = {};\nvar validatedSshKeysCache = {};\n\n/*\n Prepare a pattern for momentjs library for date validation based on our i18n settings.\n For the base we take 'calendar.timepicker.dateFormat' variable which is referencing\n 'calendar.date.format' from jasperserver_config.properties file.\n\n MomentJS docs: http://momentjs.com/docs/#/displaying/format/\n DateTimePicker docs: http://api.jqueryui.com/datepicker/#utility-formatDate\n\n #   JQUERY DATE-TIME-PICKER                  MOMENTJS\n # ==========================================================\n # d  - day of month (no leading zero)  ---> D\n # dd - day of month (two digit)        ---> DD\n # o  - day of year (no leading zeros)  ---> DDD\n # oo - day of year (three digit)       ---> DDDD\n # D  - day name short                  ---> ddd\n # DD - day name long                   ---> dddd\n # m  - month of year (no leading zero) ---> M\n # mm - month of year (two digit)       ---> MM\n # M  - month name short                ---> MMM\n # MM - month name long                 ---> MMMM\n # y  - year (two digit)                ---> YY\n # yy - year (four digit)               ---> YYYY\n */\n\nvar convertFormatFromDateTimePickerToMomentJs = function (format) {\n\n    var i, conversion = [\n        {id: 0, value: \"dd\", key: \"day-of-month-2\", result: \"DD\"},\n        {id: 1, value: \"DD\", key: \"day-of-week\", result: \"dddd\"},\n        {id: 2, value: \"mm\", key: \"month-2\", result: \"MM\"},\n        {id: 3, value: \"MM\", key: \"month-name\", result: \"MMMM\"},\n        {id: 4, value: \"yy\", key: \"year-4\", result: \"YYYY\"},\n        {id: 5, value: \"d\", key: \"day-of-month-1\", result: \"D\"},\n        {id: 6, value: \"D\", key: \"day-of-week-abbr\", result: \"ddd\"},\n        {id: 7, value: \"m\", key: \"month-1\", result: \"M\"},\n        {id: 8, value: \"M\", key: \"month-name-abbr\", result: \"MMM\"},\n        {id: 9, value: \"y\", key: \"year-2\", result: \"YY\"},\n        {id: 10, value: \"oo\", key: \"day-of-year-2\", result: \"DDDD\"},\n        {id: 11, value: \"o\", key: \"day-of-year-1\", result: \"DDD\"}\n    ];\n\n    for (i = 0; i < conversion.length; i++) {\n        format = format.replace(\n            new RegExp(conversion[i].value, \"g\"),\n            \"{\" + conversion[i].id + \"}\");\n    }\n\n    for (i = 0; i < conversion.length; i++) {\n        format = format.replace(\n            new RegExp(\"\\\\{\" + conversion[i].id + \"\\\\}\", \"g\"),\n            conversion[i].result);\n    }\n\n    return format;\n};\n\nvar momentDateFormat = convertFormatFromDateTimePickerToMomentJs(config.calendar.timepicker.dateFormat);\n\n// time format is the same for momentjs which we use for DateTimePicker\n// 'calendar.timepicker.timeFormat' is referencing 'calendar.time.format' from jasperserver_config.properties file\nvar momentTimeFormat = config.calendar.timepicker.timeFormat\n    .replace(\":ss\", \"\"); // in Scheduler we don't use \"seconds\", so momentjs should not take seconds into account\n// now, compose date and time into one pattern\nvar MOMENTJS_PARSE_UI_DATE_PATTERN = momentDateFormat + \" \" + momentTimeFormat;\n\n\nexport default Backbone.Model.extend({\n    ftpPortDefaults: {\n        ftp: \"21\",\n        ftps: \"990\",\n        sftp: \"22\"\n    },\n\n    // url for fetching collection\n    urlRoot: config.contextPath + '/rest_v2/jobs',\n\n\n    // Complex validation method - allows to collect the errors of both UI and server validators.\n    // It runs the server validation requests first. When got the response - proceeds with standard model validation.\n    validateAll: function (editMode) {\n        var self = this,\n            dfr = $.Deferred();\n\n        // 1) run server requests validators first\n        this.runServerValidationRequests().always(function (result) {\n\n            // 2) run standard validation\n            var isValid = self.isValid(editMode);\n\n            // trigger error event after self.isValid() because standard model validation clears all errors.\n            if (result && result.errorCode) {\n                isValid = false;\n                self.trigger('invalid', [result], {switchToErrors: false});\n            }\n\n            if (isValid) {\n                dfr.resolve();\n            } else {\n                dfr.reject();\n            }\n\n        });\n\n        return dfr;\n    },\n\n    isValid: function (editMode) {\n        return !this.validate(this.attributes, {validate: true, editMode: editMode}).length;\n    },\n\n    validate: function (model, options) {\n        options = options || {};\n\n        if (options.validate !== true) return;\n\n        var results = [], tmp;\n\n        // tab #1\n        if (model.trigger) {\n\n            if (model.trigger.startType == 2) {\n                if (!model.trigger.startDate) {\n                    results.push({\n                        field: 'startDate',\n                        errorCode: 'report.scheduling.job.edit.specify.startdate'\n                    });\n                } else {\n                    // check if the date is valid\n                    if (!(moment(model.trigger.startDate, MOMENTJS_PARSE_UI_DATE_PATTERN, true).isValid())) {\n                        results.push({\n                            field: 'startDate',\n                            errorCode: 'error.invalid.date'\n                        });\n                        // check if date is in the past\n                    } else if (!options.editMode && this.ifPastDate(model.trigger.startDate, model.trigger.timezone)) {\n                        results.push({\n                            field: 'startDate',\n                            errorCode: 'error.before.current.date.trigger.startDate'\n                        });\n                    }\n                }\n            }\n\n\n            if (model.trigger.type === \"simple\") {\n                if (!this.isNumeric(model.trigger.recurrenceInterval)) {\n                    results.push({\n                        field: 'recurrenceInterval',\n                        errorCode: 'report.scheduling.job.edit.specify.recurrenceinterval'\n                    });\n                } else {\n                    // now, check this value against max and min values\n                    if (!this.isNumeric(model.trigger.recurrenceInterval, {minValue: -2147483648, maxValue: 2147483647})) {\n                        results.push({\n                            field: 'recurrenceInterval',\n                            errorCode: 'typeMismatch.java.lang.Integer'\n                        });\n                    }\n                }\n\n                if (model.trigger.radioEndDate === \"numberOfTimes\") {\n                    if (!this.isNumeric(model.trigger.occurrenceCount)) {\n                        results.push({\n                            field: 'occurrenceCount',\n                            errorCode: 'report.scheduling.job.edit.specify.numberoftimestorunreport'\n                        });\n                    } else {\n                        // now, check this value against max and min values\n                        if (!this.isNumeric(model.trigger.occurrenceCount, {minValue: -2147483648, maxValue: 2147483647})) {\n                            results.push({\n                                field: 'occurrenceCount',\n                                errorCode: 'typeMismatch.java.lang.Integer'\n                            });\n                        }\n                    }\n                }\n\n                if (model.trigger.radioEndDate === \"specificDate\") {\n                    if (!model.trigger.endDate) {\n                        results.push({\n                            field: 'simpleEndDate',\n                            errorCode: 'report.scheduling.job.edit.specify.enddate'\n                        });\n                    } else {\n                        // check if the date is valid\n                        if (!(moment(model.trigger.endDate, MOMENTJS_PARSE_UI_DATE_PATTERN, true).isValid())) {\n                            results.push({\n                                field: 'simpleEndDate',\n                                errorCode: 'error.invalid.date'\n                            });\n                        }\n                        else {\n                            // check if date is in the past\n                            if (this.ifPastDate(model.trigger.endDate, model.trigger.timezone)) {\n                                results.push({\n                                    field: 'simpleEndDate',\n                                    errorCode: 'error.before.current.date.trigger.endDate'\n                                });\n                            }\n\n                            // check if start date is before the end date\n                            if (model.trigger.startType == 2 && model.trigger.startDate) {\n                                if ((+new Date(model.trigger.startDate)) >= (+new Date(model.trigger.endDate))) {\n                                    results.push({\n                                        field: 'simpleEndDate',\n                                        errorCode: 'error.before.start.date.trigger.endDate'\n                                    });\n                                }\n                            }\n                        }\n                    }\n                }\n            }\n\n            else if (model.trigger.type === \"calendar\") {\n\n                if (model.trigger.radioWhichMonth === \"selectedMonths\") {\n                    if (model.trigger.months.month.length === 0) {\n                        results.push({\n                            field: 'monthSelector',\n                            errorCode: 'report.scheduling.job.edit.specify.monthswhenjobshouldrun'\n                        });\n                    }\n                }\n\n                if (model.trigger.endDate) {\n                    if (!(moment(model.trigger.endDate, MOMENTJS_PARSE_UI_DATE_PATTERN, true).isValid())) {\n                        results.push({\n                            field: 'calendarEndDate',\n                            errorCode: 'error.invalid.date'\n                        });\n                    } else {\n                        // check if date is in the past\n                        if (this.ifPastDate(model.trigger.endDate, model.trigger.timezone)) {\n                            results.push({\n                                field: 'calendarEndDate',\n                                errorCode: 'error.before.current.date.trigger.endDate'\n                            });\n                        }\n\n                        // check if start date is before the end date\n                        if (model.trigger.startType == 2 && model.trigger.startDate) {\n                            if ((+new Date(model.trigger.startDate)) >= (+new Date(model.trigger.endDate))) {\n                                results.push({\n                                    field: 'calendarEndDate',\n                                    errorCode: 'error.before.start.date.trigger.endDate'\n                                });\n                            }\n                        }\n                    }\n                }\n\n                if (model.trigger.radioWhichDay === \"selectedDays\") {\n                    if (model.trigger.weekDays.day.length === 0) {\n                        results.push({\n                            field: 'daySelector',\n                            errorCode: 'report.scheduling.job.edit.specify.dayswhenjobshouldrun'\n                        });\n                    }\n                }\n\n                if (model.trigger.radioWhichDay === \"datesInMonth\") {\n                    tmp = this.parseIntervals(model.trigger.monthDays, \"daysInMonth\");\n                    if (!tmp) {\n                        results.push({\n                            field: 'datesInMonth',\n                            errorCode: 'report.scheduling.job.edit.specify.whenjobshouldrun'\n                        });\n                    }\n                }\n\n\n                if (!this.parseIntervals(model.trigger.hours, \"hours\")) {\n                    results.push({\n                        field: 'hours',\n                        errorCode: 'error.not.empty.trigger.hours'\n                    });\n                }\n\n                if (!this.parseIntervals(model.trigger.minutes, \"minutes\")) {\n                    results.push({\n                        field: 'minutes',\n                        errorCode: 'error.not.empty.trigger.minutesshould'\n                    });\n                }\n            }\n        }\n\n        // tab #2\n        // no validation required here !\n\n        // tab #3\n        var output = model.repositoryDestination;\n\n        if (output.outputDescription && output.outputDescription.length > 250) {\n            results.push({\n                field: 'outputDescription',\n                errorCode: 'report.scheduling.job.output.long.description'\n            });\n        }\n\n        if (output.sequentialFilenames && !output.timestampPattern) {\n            results.push({\n                field: 'timestampPattern',\n                errorCode: 'report.scheduling.job.output.timestamppattern'\n            });\n        }\n\n        if (!model.baseOutputFilename) {\n            results.push({\n                field: 'baseOutputFilename',\n                errorCode: 'error.not.empty.baseOutputFilename'\n            });\n        }\n\n        if (model.baseOutputFilename && !this.isValidFileName(model.baseOutputFilename)) {\n            results.push({\n                field: 'baseOutputFilename',\n                errorCode: 'error.invalid.chars.baseOutputFilename'\n            });\n        }\n\n        if (!model.outputFormats.outputFormat || !model.outputFormats.outputFormat.length) {\n            results.push({\n                field: 'outputFormats',\n                errorCode: 'error.report.job.no.output.formats'\n            });\n        }\n\n        if (output.saveToRepository && !output.folderURI) {\n            results.push({\n                field: 'outputRepository',\n                errorCode: 'error.not.empty.folderURI'\n            });\n        }\n\n        if (output.saveToRepository && output.folderURI && !this.isValidUri(output.folderURI)) {\n            results.push({\n                field: 'outputRepository',\n                errorCode: 'error.report.job.invalid.chars.folderURI'\n            });\n        }\n\n        if (!_.isUndefined(output.outputLocalFolder) && output.outputLocalFolder === '') {\n            results.push({\n                field: 'outputHostFileSystem',\n                errorCode: 'error.not.empty.folder'\n            });\n        }\n\n        if (output.outputFTPInfo.enabled) {\n\n            if (!output.outputFTPInfo.serverName) {\n                results.push({\n                    field: 'ftpAddress',\n                    errorCode: 'error.report.scheduling.empty.ftp.server'\n                });\n            } else {\n                if (!this.isHostName(output.outputFTPInfo.serverName)) {\n                    results.push({\n                        field: 'ftpAddress',\n                        errorCode: 'error.report.scheduling.empty.ftp.server'\n                    });\n                }\n            }\n\n            if (!output.outputFTPInfo.port) {\n                results.push({\n                    field: 'ftpPort',\n                    errorCode: 'error.report.scheduling.empty.ftp.port'\n                });\n            } else {\n                if (!this.isNumeric(output.outputFTPInfo.port)) {\n                    results.push({\n                        field: 'ftpPort',\n                        errorCode: 'error.report.scheduling.empty.ftp.port'\n                    });\n                } else {\n                    tmp = parseInt(output.outputFTPInfo.port, 10);\n                    if (!(0 < tmp && tmp <= 65535)) {\n                        results.push({\n                            field: 'ftpPort',\n                            errorCode: 'error.report.scheduling.empty.ftp.port'\n                        });\n                    }\n                }\n            }\n\n            if (output.outputFTPInfo.type === \"sftp\" && output.outputFTPInfo.sshKeyEnabled) {\n                if (!output.outputFTPInfo.sshKey || output.outputFTPInfo.sshKey === '') {\n                    results.push({\n                        field: 'sshKey',\n                        errorCode: 'error.not.empty.sshKey'\n                    });\n                } else if (!this.isValidUri(output.outputFTPInfo.sshKey)) {\n                    results.push({\n                        field: 'sshKey',\n                        errorCode: 'error.report.job.invalid.chars.sshKey'\n                    });\n                }\n            }\n\n        }\n\n        // tab #4\n        if (model.mailNotification) {\n\n            // check the left side of the Notification tab\n\n            var toAddressNotification = (model.mailNotification.toAddresses && model.mailNotification.toAddresses.address) || \"\",\n                ccAddress = (model.mailNotification.ccAddresses && model.mailNotification.ccAddresses.address) || \"\",\n                bccAddress = (model.mailNotification.bccAddresses && model.mailNotification.bccAddresses.address) || \"\",\n                subjectNotification = model.mailNotification.subject || \"\",\n                message = model.mailNotification.messageText || \"\";\n\n            if (toAddressNotification && !this.validateEmails(toAddressNotification)) {\n                results.push({\n                    field: 'to_suc',\n                    errorCode: 'error.invalid.mailNotification.invalidEmailaddresses'\n                });\n            }\n\n            if (ccAddress && !this.validateEmails(ccAddress)) {\n                results.push({\n                    field: 'cc_suc',\n                    errorCode: 'error.invalid.mailNotification.invalidEmailaddresses'\n                });\n            }\n\n            if (bccAddress && !this.validateEmails(bccAddress)) {\n                results.push({\n                    field: 'bcc_suc',\n                    errorCode: 'error.invalid.mailNotification.invalidEmailaddresses'\n                });\n            }\n\n            // subject must be valid if TO has been specified and vice versa\n            if (toAddressNotification || subjectNotification) {\n                if (!toAddressNotification) {\n                    results.push({\n                        field: 'to_suc',\n                        errorCode: 'error.invalid.mailNotification.specify.oneaddresses'\n                    });\n                }\n                if (!subjectNotification) {\n                    results.push({\n                        field: 'subject_suc',\n                        errorCode: 'report.scheduling.job.edit.specify.messagesubject'\n                    });\n                }\n            }\n\n            if (message) {\n                // if user has entered message, when he need to enter subject and TO\n                if (!toAddressNotification) {\n                    results.push({\n                        field: 'to_suc',\n                        errorCode: 'error.invalid.mailNotification.specify.oneaddresses'\n                    });\n                }\n                if (!subjectNotification) {\n                    results.push({\n                        field: 'subject_suc',\n                        errorCode: 'report.scheduling.job.edit.specify.messagesubject'\n                    });\n                }\n            }\n        }\n\n        // now, check the right side of the Notification tab\n\n        if (model.alert) {\n            var toAddressAlert = (model.alert.toAddresses && model.alert.toAddresses.address) || \"\",\n                subjectAlert = model.alert.subject || \"\";\n\n            if (toAddressAlert && !this.validateEmails(toAddressAlert)) {\n                results.push({\n                    field: 'job_status_to',\n                    errorCode: 'error.invalid.mailNotification.invalidEmailaddresses'\n                });\n            }\n\n            // subject must be valid if TO has been specified and vice versa\n            if (toAddressAlert || subjectAlert) {\n                if (!toAddressAlert) {\n                    results.push({\n                        field: 'job_status_to',\n                        errorCode: 'error.invalid.mailNotification.specify.oneaddresses'\n                    });\n                }\n                if (!subjectAlert) {\n                    results.push({\n                        field: 'job_status_subject',\n                        errorCode: 'report.scheduling.job.edit.specify.messagesubject'\n                    });\n                }\n            }\n\n            // if user has decided to success send message, when he need to enter subject and TO\n            if (model.alert.jobState.indexOf(\"SUCCESS_ONLY\") !== -1 || model.alert.jobState.indexOf(\"ALL\") !== -1) {\n                if (!toAddressAlert) {\n                    results.push({\n                        field: 'job_status_to',\n                        errorCode: 'error.invalid.mailNotification.specify.oneaddresses'\n                    });\n                }\n                if (!subjectAlert) {\n                    results.push({\n                        field: 'job_status_subject',\n                        errorCode: 'report.scheduling.job.edit.specify.messagesubject'\n                    });\n                }\n            }\n\n            // if user has decided to send failure message, when he need to enter subject and TO\n            if (model.alert.jobState.indexOf(\"FAIL_ONLY\") !== -1 || model.alert.jobState.indexOf(\"ALL\") !== -1) {\n                if (!toAddressAlert) {\n                    results.push({\n                        field: 'job_status_to',\n                        errorCode: 'error.invalid.mailNotification.specify.oneaddresses'\n                    });\n                }\n                if (!subjectAlert) {\n                    results.push({\n                        field: 'job_status_subject',\n                        errorCode: 'report.scheduling.job.edit.specify.messagesubject'\n                    });\n                }\n            }\n        }\n\n        // clear all errors on the form\n        this.trigger('clearAllErrors');\n\n        if (results.length)\n            this.trigger('invalid', results);\n        else\n            this.trigger('valid', []);\n\n        return results;\n    },\n\n    // update nested attribute\n    update: function (key, value) {\n        if ('object' === typeof value) {\n            value = _.extend({}, this.get(key), value);\n            for (var i in value) {\n                if (value.hasOwnProperty(i) && value[i] === undefined) delete value[i];\n            }\n        }\n\n        this.set(key, value);\n    },\n\n    // get nested value\n    value: function (name) {\n        var o = this.attributes;\n        name = name.split('/');\n        for (var i = 0, l = name.length - 1; i < l; i++){\n            if (!o) return undefined;\n            o = o[name[i]];\n        }\n\n        if (!o) return undefined;\n        return o[name[name.length - 1]]\n    },\n\n    // use custom sync logic\n    sync: function (method, model, options) {\n        // swap 'update' and 'create' methods\n        // to force backbone use POST for update\n        // and PUT for creating new job\n        if (method === 'update') method = 'create';\n        else if (method === 'create') method = 'update';\n\n        options || (options = {});\n        options.contentType = 'application/job+json';\n        options.beforeSend = function(request){\n            request.setRequestHeader('Accept', 'application/job+json');\n        };\n\n        options.cache = false;\n\n        return Backbone.sync(method, model, options);\n    },\n\n    // parse model data\n    parse: function (data) {\n\n        if (data.trigger) {\n\n            // make trigger data more flat\n            // convert trigger key to trigger value type\n            if ('simpleTrigger' in data.trigger)\n                data.trigger.type = 'simpleTrigger';\n            else if ('calendarTrigger' in data.trigger)\n                data.trigger.type = 'calendarTrigger';\n            // merge trigger sub-values\n            if (data.trigger.type) {\n                _.extend(data.trigger, data.trigger[data.trigger.type]);\n                delete data.trigger[data.trigger.type];\n            }\n\n\n            // determine the recurrence type\n            if (data.trigger.type === 'simpleTrigger' && data.trigger.recurrenceInterval === null) data.trigger.type = 'none';\n            else if (data.trigger.type === 'simpleTrigger') data.trigger.type = 'simple';\n            else if (data.trigger.type === 'calendarTrigger') data.trigger.type = 'calendar';\n            else data.trigger.type = 'none';\n\n            // adjust some fields \"by default\" if the current recurrence type is none\n            if (data.trigger.type === \"none\") {\n                data.trigger.occurrenceCount = \"\";\n            }\n\n            // check start type and start date\n            if (typeof data.trigger.startType === \"undefined\") data.trigger.startType = 1;\n            if (data.trigger.startDate) {\n                data.trigger.startDate = this.formatDate(data.trigger.startDate);\n            }\n\n\n            if (typeof data.trigger.timezone === \"undefined\" || data.trigger.timezone === null) {\n                data.trigger.timezone = config.usersTimeZone || \"America/Los_Angeles\";\n            }\n\n\n            if (data.trigger.type === 'simple' || data.trigger.type === 'calendar') {\n                if (typeof data.trigger.calendarName === \"undefined\" || data.trigger.calendarName === null) {\n                    data.trigger.calendarName = \"\";\n                }\n            }\n\n            // ========================================\n            // Simple recurrence fields\n\n            // set the default values if nothing is sent from the server\n            if (typeof data.trigger.recurrenceInterval === \"undefined\" || data.trigger.recurrenceInterval === null) {\n                data.trigger.recurrenceInterval = 1;\n            }\n            if (typeof data.trigger.recurrenceIntervalUnit === \"undefined\" || data.trigger.recurrenceIntervalUnit === null) {\n                data.trigger.recurrenceIntervalUnit = \"DAY\";\n            }\n            if (typeof data.trigger.occurrenceCount === \"undefined\" || data.trigger.occurrenceCount === null) {\n                data.trigger.occurrenceCount = \"\";\n            }\n            if (typeof data.trigger.endDate === \"undefined\" || data.trigger.endDate === null) {\n                data.trigger.endDate = \"\";\n            } else {\n                data.trigger.endDate = this.formatDate(data.trigger.endDate);\n            }\n\n            // now, detect what endDate option has been selected by user\n            if (!data.trigger.endDate) {\n                if (data.trigger.occurrenceCount == -1 || !data.trigger.occurrenceCount) {\n                    data.trigger.radioEndDate = 'indefinitely';\n                    data.trigger.occurrenceCount = \"\";\n                }\n                else {\n                    data.trigger.radioEndDate = 'numberOfTimes';\n                }\n            }\n            else if (data.trigger.endDate) {\n                data.trigger.radioEndDate = 'specificDate';\n                data.trigger.occurrenceCount = \"\";\n            }\n\n\n            // ========================================\n            // Calendar recurrence fields\n\n            // months block\n            if (!data.trigger.months) data.trigger.months = {};\n            if (!_.isArray(data.trigger.months.month)) data.trigger.months.month = [];\n            data.trigger.radioWhichMonth = \"everyMonth\"; // fake field\n            if (0 < data.trigger.months.month.length && data.trigger.months.month.length < 12) {\n                // it means we are in the editing mode and some selection across months has been made\n                data.trigger.radioWhichMonth = 'selectedMonths';\n            } else if (data.trigger.months.month.length == 12) {\n                data.trigger.radioWhichMonth = \"everyMonth\";\n                data.trigger.months.month = [];\n            }\n\n            // days block\n            if (!data.trigger.weekDays) data.trigger.weekDays = {};\n            if (!_.isArray(data.trigger.weekDays.day)) data.trigger.weekDays.day = [];\n\n            if (typeof data.trigger.monthDays === \"undefined\" || data.trigger.monthDays === null) {\n                data.trigger.monthDays = \"\";\n            } else {\n                data.trigger.monthDays = data.trigger.monthDays.toString().replace(/ /g, \"\").replace(/,/g, \", \");\n            }\n\n            // if daysType is set, whem we'll follow it's value\n            if (typeof data.trigger.daysType !== \"undefined\") {\n                if (data.trigger.daysType.toLowerCase() == \"month\") {\n                    data.trigger.radioWhichDay = \"datesInMonth\";\n                    data.trigger.weekDays.day = [];\n                } else if (data.trigger.daysType.toLowerCase() == \"week\") {\n                    data.trigger.radioWhichDay = \"selectedDays\";\n                    data.trigger.monthDays = \"\";\n                } else {\n                    data.trigger.radioWhichDay = \"everyDay\";\n                    data.trigger.weekDays.day = [];\n                    data.trigger.monthDays = \"\";\n                }\n            } else {\n                // in other case, we'll try to determine what user has chosen by variables\n                if ( 0 < data.trigger.weekDays.day.length && data.trigger.weekDays.day.length < 7) {\n                    // it means we are in the editing mode and some selection across days has been made\n                    data.trigger.radioWhichDay = 'selectedDays';\n                } else if (data.trigger.monthDays) {\n                    data.trigger.radioWhichDay = \"datesInMonth\";\n                } else {\n                    data.trigger.radioWhichDay = \"everyDay\";\n                }\n            }\n\n            // times block\n            if (typeof data.trigger.hours === \"undefined\" || data.trigger.hours === null) {\n                data.trigger.hours = \"0\";\n            } else {\n                data.trigger.hours = data.trigger.hours.toString().replace(/ /g, \"\").replace(/,/g, \", \");\n            }\n\n            if (typeof data.trigger.minutes === \"undefined\" || data.trigger.minutes === null) {\n                data.trigger.minutes = \"0\";\n            } else {\n                data.trigger.minutes = data.trigger.minutes.toString().replace(/ /g, \"\").replace(/,/g, \", \");\n            }\n\n        }\n\n        // ==============================\n        // output tab\n        if (data.outputFormats != null && data.outputFormats.outputFormat != null) {\n            var formats = data.outputFormats.outputFormat;\n            for (var i = 0; i < formats.length; i++) {\n                if (formats[i] === 'XLS') {\n                    formats[i] = 'XLSX';\n                } else if (formats[i] === 'XLS_NOPAG') {\n                    formats[i] = 'XLSX_NOPAG';\n                }\n            }\n        }\n\n        if (typeof data.repositoryDestination === \"undefined\" || data.repositoryDestination === null) {\n            data.repositoryDestination = {\n                overwriteFiles: true,\n                sequentialFilenames: false,\n                saveToRepository: true,\n                timestampPattern: \"yyyyMMddHHmm\",\n                outputFTPInfo: {\n                    propertiesMap: {},\n                    type: \"ftp\",\n                    port: \"21\",\n                    implicit: true,\n                    pbsz: 0\n                }\n            };\n        }\n        else {\n            if (typeof data.repositoryDestination.outputFTPInfo === \"undefined\" || data.repositoryDestination.outputFTPInfo === null) {\n                data.repositoryDestination.outputFTPInfo = {};\n            } else {\n                var ftp = data.repositoryDestination.outputFTPInfo;\n\n                ftp.enabled = !!ftp.serverName && !!ftp.userName;\n                ftp.sshKeyEnabled = !!ftp.sshKey;\n\n                if (ftp.enabled) {\n                    data.repositoryDestination.outputFTPInfo.password = config.VALUE_SUBSTITUTION;\n                }\n                if (ftp.sshKeyEnabled) {\n                    data.repositoryDestination.outputFTPInfo.sshPassphrase = config.VALUE_SUBSTITUTION;\n                }\n            }\n\n            if (!data.repositoryDestination.timestampPattern)\n                data.repositoryDestination.timestampPattern =  \"yyyyMMddHHmm\";\n        }\n\n        if (typeof data.repositoryDestination.outputFTPInfo.port === \"undefined\" || data.repositoryDestination.outputFTPInfo.port === null) {\n            data.repositoryDestination.outputFTPInfo.port = this.ftpPortDefaults[data.repositoryDestination.outputFTPInfo.type];\n        }\n\n        // ==============================\n        // Notification tab\n\n        var defaultResultSendTypeValue = \"SEND\";\n\n        data.mailNotification = data.mailNotification || {\n            toAddresses:{address: \"\"},\n            ccAddresses:{address: \"\"},\n            bccAddresses:{address: \"\"},\n            subject: \"\",\n            messageText: \"\",\n            resultSendType: defaultResultSendTypeValue\n        };\n        data.alert = data.alert || {\n            toAddresses:{address: \"\"},\n            subject: \"\",\n            messageText: \"\",\n            messageTextWhenJobFails: \"\",\n            jobState: \"NONE\"\n        };\n\n\n        // check if resultSendType has valid value !\n        if (typeof data.mailNotification.resultSendType === \"undefined\" || data.mailNotification.resultSendType === null) {\n            data.mailNotification.resultSendType = defaultResultSendTypeValue;\n        } else {\n\n            var rs = data.mailNotification.resultSendType; // shortcut\n            if (rs !== \"SEND\" && rs !== \"SEND_ATTACHMENT\" && rs !== \"SEND_ATTACHMENT_NOZIP\" && rs !== \"SEND_EMBED\" &&\n                rs !== \"SEND_ATTACHMENT_ZIP_ALL\" && rs !== \"SEND_EMBED_ZIP_ALL_OTHERS\" ) {\n                data.mailNotification.resultSendType = defaultResultSendTypeValue;\n            }\n        }\n\n        // convert arrays into strings\n        var keys = [\"toAddresses\", \"ccAddresses\", \"bccAddresses\"], i;\n        for (i = 0; i < keys.length; i++) {\n\n            if (typeof data.mailNotification[keys[i]] === \"undefined\" || data.mailNotification[keys[i]] === null) {\n                data.mailNotification[keys[i]] = {address: \"\"};\n            }\n            else if (typeof data.mailNotification[keys[i]].address === \"undefined\" || data.mailNotification[keys[i]].address === null) {\n                data.mailNotification[keys[i]].address = \"\";\n            }\n\n            if (_.isArray(data.mailNotification[keys[i]].address) && data.mailNotification[keys[i]].address.length > 0) {\n                data.mailNotification[keys[i]].address = data.mailNotification[keys[i]].address.join(EMAIL_SEPARATOR + \" \");\n            } else {\n                data.mailNotification[keys[i]].address = \"\";\n            }\n        }\n\n        // drop all fields to empty values, since it's not possible what they can have some states if email is not entered\n        if (!data.mailNotification.toAddresses.address) {\n            data.mailNotification = {\n                toAddresses:{address: \"\"},\n                ccAddresses:{address: \"\"},\n                bccAddresses:{address: \"\"},\n                subject: \"\",\n                messageText: \"\",\n                resultSendType: defaultResultSendTypeValue\n            };\n        }\n\n        if (typeof data.alert.toAddresses === \"undefined\" || data.alert.toAddresses === null) {\n            data.alert.toAddresses = {address: \"\"};\n        }\n        else if (typeof data.alert.toAddresses.address === \"undefined\" || data.alert.toAddresses.address === null) {\n            data.alert.toAddresses.address = \"\";\n        }\n\n        if (_.isArray(data.alert.toAddresses.address) && data.alert.toAddresses.address.length > 0) {\n            data.alert.toAddresses.address = data.alert.toAddresses.address.join(EMAIL_SEPARATOR + \" \");\n        } else {\n            // drop all fields to empty values, since it's not possible what they can have some states if email is not entered\n            data.alert = {\n                toAddresses: {address: \"\"},\n                subject: \"\",\n                messageText: \"\",\n                messageTextWhenJobFails: \"\",\n                jobState: \"NONE\",\n                includingReportJobInfo: false,\n                includingStackTrace: false\n            };\n        }\n\n\n        return data;\n    },\n\n    // stringify model\n    toJSON: function () {\n        var data = $.extend(true, {}, this.attributes),\n            trigger = {};\n\n        if (data.trigger) {\n\n            // in case of immediately start date, this field must be zero\n            data.trigger.startType = parseInt(data.trigger.startType, 10);\n            if (data.trigger.startType === 1) {\n                data.trigger.startDate = null;\n            } else {\n                data.trigger.startDate = moment(data.trigger.startDate, MOMENTJS_PARSE_UI_DATE_PATTERN, true).format(SERVICE_DATE_PATTERN_MOMENTJS_FORMAT);\n            }\n\n            // set recurrenceType\n            if (data.trigger.type === 'none') {\n\n                data.trigger.type = 'simpleTrigger';\n                data.trigger.endDate = null;\n                data.trigger.occurrenceCount = 1;\n                data.trigger.recurrenceInterval = null;\n                data.trigger.recurrenceIntervalUnit = null;\n\n                // remove fields from 'Calendar' section\n                delete data.trigger.hours;\n                delete data.trigger.minutes;\n                delete data.trigger.months;\n                delete data.trigger.daysType;\n                delete data.trigger.weekDays;\n                delete data.trigger.monthDays;\n                delete data.trigger.calendarName;\n            }\n            else if (data.trigger.type === 'simple') {\n\n                data.trigger.type = 'simpleTrigger';\n\n                // occurrence count selected\n                if (data.trigger.radioEndDate == 'numberOfTimes') {\n                    data.trigger.endDate = null;\n                }\n                // specific date selected\n                if (data.trigger.radioEndDate == 'specificDate') {\n                    data.trigger.occurrenceCount = -1;\n                    data.trigger.endDate = moment(data.trigger.endDate, MOMENTJS_PARSE_UI_DATE_PATTERN, true).format(SERVICE_DATE_PATTERN_MOMENTJS_FORMAT);\n                }\n                // indefinitely selected\n                if (data.trigger.radioEndDate == 'indefinitely') {\n                    data.trigger.occurrenceCount = -1;\n                    data.trigger.endDate = null;\n                }\n\n                data.trigger.recurrenceInterval = parseInt(data.trigger.recurrenceInterval, 10);\n                data.trigger.recurrenceIntervalUnit = data.trigger.recurrenceIntervalUnit.toUpperCase();\n\n                if (data.trigger.calendarName === \"\") {\n                    data.trigger.calendarName = null;\n                }\n\n                // remove fields from 'Calendar' section\n                delete data.trigger.hours;\n                delete data.trigger.minutes;\n                delete data.trigger.months;\n                delete data.trigger.daysType;\n                delete data.trigger.weekDays;\n                delete data.trigger.monthDays;\n            }\n            else if (data.trigger.type === 'calendar') {\n\n                data.trigger.type = 'calendarTrigger';\n\n                //months block\n                if (data.trigger.radioWhichMonth === 'everyMonth') {\n                    data.trigger.months.month = [1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12];\n                }\n\n                //days block\n                if (data.trigger.radioWhichDay === 'everyDay' || data.trigger.weekDays.day.length == 7) {\n                    data.trigger.daysType = \"ALL\"; // it means we selected all days\n                    data.trigger.weekDays.day = [];\n                    data.trigger.monthDays = \"\";\n                } else if (data.trigger.radioWhichDay === 'selectedDays') {\n                    data.trigger.daysType = \"WEEK\"; // don't ask why -- it's the server-side requirement\n                    data.trigger.monthDays = \"\";\n                } else if (data.trigger.radioWhichDay === 'datesInMonth') {\n                    data.trigger.daysType = \"MONTH\"; // don't ask why -- it's the server-side requirement\n                    data.trigger.weekDays.day = [];\n                }\n                data.trigger.monthDays = data.trigger.monthDays.replace(/ /g, \"\");\n\n\n                // remove this field if it's not specified\n                if (data.trigger.endDate === \"\") {\n                    delete data.trigger.endDate;\n                } else {\n                    data.trigger.endDate = moment(data.trigger.endDate, MOMENTJS_PARSE_UI_DATE_PATTERN, true).format(SERVICE_DATE_PATTERN_MOMENTJS_FORMAT);\n                }\n\n                data.trigger.hours = data.trigger.hours.replace(/ /g, \"\");\n                data.trigger.minutes = data.trigger.minutes.replace(/ /g, \"\");\n\n                if (data.trigger.calendarName === \"\") {\n                    data.trigger.calendarName = null;\n                }\n\n                // remove fields from 'simple' section\n                delete data.trigger.occurrenceCount;\n                delete data.trigger.recurrenceInterval;\n                delete data.trigger.recurrenceIntervalUnit;\n            }\n\n            // remove all fake fields\n            delete data.trigger.radioEndDate; // remove fake field\n            delete data.trigger.radioWhichMonth; // remove fake field\n            delete data.trigger.radioWhichDay; // remove fake field\n\n            // now, convert trigger type to sub-object\n            if (data.trigger && data.trigger.type) {\n                trigger[data.trigger.type] = data.trigger;\n                delete trigger[data.trigger.type].type;\n                data.trigger = trigger;\n            }\n        }\n\n        // output tab\n        if (data.repositoryDestination){\n            if (data.repositoryDestination.outputFTPInfo){\n                if (!data.repositoryDestination.outputFTPInfo.enabled){\n                    data.repositoryDestination.outputFTPInfo = {\n                        type: \"ftp\",\n                        port: 21,\n                        folderPath: null,\n                        password: null,\n                        propertiesMap: {},\n                        serverName: null,\n                        userName: null,\n                        sshKey: null,\n                        sshPassphrase: null\n                    }\n                }\n\n                if (data.repositoryDestination.outputFTPInfo.password === config.VALUE_SUBSTITUTION) {\n                    delete data.repositoryDestination.outputFTPInfo.password;\n                }\n\n                if (data.repositoryDestination.outputFTPInfo.type === \"sftp\" && data.repositoryDestination.outputFTPInfo.sshKeyEnabled) {\n                    if (data.repositoryDestination.outputFTPInfo.sshPassphrase === config.VALUE_SUBSTITUTION) {\n                        delete data.repositoryDestination.outputFTPInfo.sshPassphrase;\n                    }\n                } else {\n                    delete data.repositoryDestination.outputFTPInfo.sshKey;\n                    delete data.repositoryDestination.outputFTPInfo.sshPassphrase;\n                }\n\n                if ('enabled' in data.repositoryDestination.outputFTPInfo)\n                    delete data.repositoryDestination.outputFTPInfo.enabled;\n\n                if ('sshKeyEnabled' in data.repositoryDestination.outputFTPInfo)\n                    delete data.repositoryDestination.outputFTPInfo.sshKeyEnabled;\n            }\n\n            if (!data.repositoryDestination.sequentialFilenames) {\n                data.repositoryDestination.timestampPattern = null;\n            }\n        }\n\n\n        // notification tab\n\n        if (data.mailNotification) {\n            // convert strings into arrays\n            var keys = [\"toAddresses\", \"ccAddresses\", \"bccAddresses\"], i;\n            for (i = 0; i < keys.length; i++) {\n                if (data.mailNotification[keys[i]] && typeof data.mailNotification[keys[i]].address !== \"undefined\") {\n                    // if key is empty, remove it\n                    if (!data.mailNotification[keys[i]].address) {\n                        delete data.mailNotification[keys[i]];\n                        continue;\n                    }\n                    // else convert it\n                    data.mailNotification[keys[i]].address = data.mailNotification[keys[i]].address.replace(/ /g, \"\").split(EMAIL_SEPARATOR);\n                }\n            }\n\n            // if there is no TO field, remove the block completely\n            if (!data.mailNotification.toAddresses || typeof data.mailNotification.toAddresses.address === \"undefined\") {\n                delete data.mailNotification;\n            }\n        }\n\n        if (data.alert) {\n            if (data.alert.toAddresses && typeof data.alert.toAddresses.address !== \"undefined\") {\n                // if key is empty, remove it\n                if (!data.alert.toAddresses.address) {\n                    delete data.alert.toAddresses.address;\n                } else {\n                    // convert it\n                    data.alert.toAddresses.address = data.alert.toAddresses.address.replace(/ /g, \"\").split(EMAIL_SEPARATOR);\n                }\n            }\n\n            // if there is no TO field, remove the block completely\n            if (!data.alert.toAddresses || typeof data.alert.toAddresses.address === \"undefined\") {\n                delete data.alert;\n            }\n        }\n\n        return data;\n    },\n\n    // change job state\n    state: function (state) {\n        // prepare data to post\n        var data = {\n            // job ids to change state\n            jobId: [this.id],\n\n            // trick to make it work with prototype.js\n            toJSON: function () {\n                return this\n            },\n\n            // trick to make it work with backbone-1.1.0\n            trigger: function() {\n                return this\n            }\n        };\n\n        // change model attributes\n        this.get('state').value = state ? jobStateEnum.NORMAL : jobStateEnum.PAUSED;\n        this.trigger('change');\n\n        // call backbone sync method manually\n        return Backbone.sync.call(this, 'update', data, {\n            url: config.contextPath + '/rest_v2/jobs/' + (state ? 'resume' : 'pause'),\n            type: 'POST'\n        });\n    },\n\n    // get parameters for job\n    loadParameters: function (reportUnitURI) {\n\n        reportUnitURI = reportUnitURI || this.get('source').reportUnitURI;\n\n        var self = this,\n            url = config.contextPath + '/rest_v2/reports' + encodeURI(reportUnitURI) + '/inputControls/';\n\n        // call backbone sync method manually\n        return Backbone.sync.call(this, 'read', new Backbone.Model(), {\n            url: url,\n            type: 'GET'\n        }).done(function(data) {\n\n            if (data && data.inputControl) {\n                var parameters = {},\n                    controls = data.inputControl;\n\n                for (var i = 0; i < controls.length; i++) {\n                    parameters[controls[i].id] = null;\n                }\n\n                self.update('source', {parameters: {parameterValues: parameters}});\n\n            } else {\n\n                self.trigger(\"failedToGet_IC\");\n            }\n\n        }).fail(function() {\n\n            self.trigger(\"failedToGet_IC\");\n\n        });\n    },\n\n    checkSaveValidation: function(options) {\n        options = options || {};\n\n        var dfr = $.Deferred();\n\n        var testsPassed = 0;\n\n        var onTestPassing = function() {\n            testsPassed++;\n\n            if (testsPassed === 3) {\n                dfr.resolve();\n            }\n        };\n\n        var onTestFailure = function() {\n            dfr.reject();\n        };\n\n        this.testDates(options.editMode).done(onTestPassing).fail(onTestFailure);\n        this.validateParametersIC().done(onTestPassing).fail(onTestFailure);\n        this.testOutputHostFileSystemFolder().done(onTestPassing).fail(onTestFailure);\n\n        return dfr;\n    },\n\n\n    // test if start or end dates are in the past\n    testDates: function(editMode){\n        var results = [],\n            dfr = $.Deferred();\n\n        var trigger = this.attributes.trigger;\n\n        if (!editMode && trigger.startType == 2 && trigger.startDate && this.ifPastDate(trigger.startDate, trigger.timezone)) {\n            results.push({\n                field: 'startDate',\n                errorCode: 'error.before.current.date.trigger.startDate'\n            });\n        }\n\n        if (trigger.type === \"simple\" && trigger.radioEndDate === \"specificDate\" && trigger.endDate && this.ifPastDate(trigger.endDate, trigger.timezone)) {\n            results.push({\n                field: 'simpleEndDate',\n                errorCode: 'error.before.current.date.trigger.endDate'\n            });\n        } else if (trigger.type === \"calendar\" &&  trigger.endDate && this.ifPastDate(trigger.endDate, trigger.timezone)) {\n            results.push({\n                field: 'calendarEndDate',\n                errorCode: 'error.before.current.date.trigger.endDate'\n            });\n        }\n\n        if (results.length) {\n            this.trigger('invalid', results, {switchToErrors: true});\n            return dfr.reject();\n        } else {\n            return dfr.resolve();\n        }\n\n    },\n\n\n    // test model's ftp attributes\n    testFTPConnection: function(callback){\n\n        if (ftpIsProcessings) {\n            if ('function' === typeof callback)\n                callback();\n            return;\n        }\n\n        var ftpInfo = this.get('repositoryDestination');\n\n        if (!(ftpInfo && ftpInfo.outputFTPInfo && ftpInfo.outputFTPInfo.enabled)) {\n            if ('function' === typeof callback)\n                callback();\n            return;\n        }\n\n        // make life easier\n        ftpInfo = ftpInfo.outputFTPInfo;\n\n        var self = this,\n            data = {\n                host: ftpInfo.serverName,\n                userName: ftpInfo.userName,\n                folderPath: ftpInfo.folderPath,\n                type: ftpInfo.type,\n                protocol: ftpInfo.protocol,\n                port: ftpInfo.port,\n                implicit: ftpInfo.implicit,\n                prot: ftpInfo.prot,\n                pbsz: ftpInfo.pbsz,\n\n                // trick to make it work with prototype.js\n                toJSON: function(){ return this; },\n                // trick to make a fake model for backbone.js\n                trigger: function(){ return this; }\n            };\n\n        // Secure fields (password, passPhrase) are not available on UI.\n        // Server should try to restore the values from original job. Sending the job ID in 'holder' parameter:\n        if (this.get('id')) {\n            data.holder = \"job:\" + this.get('id');\n        }\n\n        if (ftpInfo.password !== config.VALUE_SUBSTITUTION) {\n            data.password = ftpInfo.password;\n        }\n        if (ftpInfo.type === \"sftp\" && ftpInfo.sshKeyEnabled) {\n            data.sshKey = ftpInfo.sshKey;\n            if (ftpInfo.sshPassphrase !== config.VALUE_SUBSTITUTION) {\n                data.sshPassphrase = ftpInfo.sshPassphrase;\n            }\n        }\n\n        ftpIsProcessings = true;\n        // disable FTP button\n        $(\"#ftpTestButton\").addClass(\"checking\");\n\n        // clear the erro while we are performing checking...\n        $(\"[data-field=ftpTest]\").text(\"\");\n\n        // call backbone sync method manually\n        return Backbone.sync.call(this, 'update', data, {\n            url: config.contextPath + '/rest_v2/connections',\n            contentType: 'application/connections.ftp+json',\n            headers:{ 'Accept': 'application/json' },\n            type: 'POST',\n            success: function (successData, xhr) {\n                ftpIsProcessings = false;\n                // enable FTP button\n                $(\"#ftpTestButton\").removeClass(\"checking\");\n                self.trigger('valid', [{\n                    field: 'ftpTest',\n                    errorCode: 'report.scheduling.connection.passed'\n                }]);\n\n                if ('function' === typeof callback)\n                    callback(undefined);\n            },\n            error: function (err) {\n                ftpIsProcessings = false;\n                // enable FTP button\n                $(\"#ftpTestButton\").removeClass(\"checking\");\n                self.trigger('invalid', [{\n                    field: 'ftpTest',\n                    errorCode: 'report.scheduling.connection.failed'\n                }]);\n\n                if ('function' === typeof callback)\n                    callback(err);\n            }\n        });\n    },\n\n    validateParametersIC: function() {\n\n        var self = this,\n            dfr = $.Deferred(),\n            parameters = this.get('source').parameters;\n\n        if (!this.get('source')) {\n            // weird, the object is absent, but, OK, skip it.\n            return dfr.resolve();\n        }\n        if (!parameters || _.isEmpty(parameters.parameterValues)) {\n            // nothing to check, parameters tab is disabled\n            return dfr.resolve();\n        }\n\n        this.controlsController.validate().then(function(areControlsValid) {\n\n            if (!areControlsValid) {\n\n                self.trigger('invalid', [{\n                    field: 'parametersErrorNotifierStub',\n                    errorCode: 'report.scheduling.list.state.5'\n                }], {\n                    switchToErrors: true\n                });\n\n                dfr.reject();\n            } else {\n                dfr.resolve();\n            }\n        });\n\n        return dfr;\n    },\n\n    runServerValidationRequests: function () {\n        var dfr = $.Deferred();\n        var testsPassed = 0;\n        var onTestPassing = function() {\n            testsPassed++;\n            if (testsPassed === 2) {\n                dfr.resolve();\n            }\n        };\n        var onTestFailure = function(result) {\n            dfr.reject(result);\n        };\n\n        this.testOutputRepositoryFolder().done(onTestPassing).fail(onTestFailure);\n        this.testSshKey().done(onTestPassing).fail(onTestFailure);\n\n        return dfr;\n    },\n\n\n    // Check SSH Key resource if it exists. Resolves the error details object if test failed.\n    testSshKey: function () {\n        var dfr = $.Deferred();\n\n        var ftpInfo = this.get('repositoryDestination') ? this.get('repositoryDestination').outputFTPInfo : null;\n\n        if (!ftpInfo || !ftpInfo.enabled || !ftpInfo.sshKeyEnabled) {\n            return dfr.resolve();\n        }\n\n        var sshKey = ftpInfo.sshKey;\n\n        // skip server requests if sshKey value is empty or incorrect\n        if (!sshKey || sshKey === \"\" || !this.isValidUri(sshKey)) {\n            return dfr.resolve();\n        }\n\n        // check the cache if the uri was already tested\n        if (_.isUndefined(validatedSshKeysCache[sshKey])) {\n            this.resource(\"file\", sshKey, function (err, data){\n                if (err) {\n                    // add the failed folder result to cache\n                    validatedSshKeysCache[sshKey] = {\n                        field: 'sshKey',\n                        errorCode: \"error.report.job.report.inexistent.sshKey\",\n                        errorArguments: [sshKey]\n                    };\n                    dfr.reject(validatedSshKeysCache[sshKey]);\n                } else {\n                    // add uri to cache as accessible\n                    validatedSshKeysCache[sshKey] = {};\n                    dfr.resolve();\n                }\n            });\n        } else {\n            // We've already checked this uri. Resolve using the cache entry\n            if (validatedSshKeysCache[sshKey].errorCode) {\n                return dfr.reject(validatedSshKeysCache[sshKey]);\n            } else {\n                return dfr.resolve();\n            }\n        }\n\n        return dfr;\n    },\n\n\n    // Check folder for empty URI, existence and write access. Resolves the error details object if test failed.\n    testOutputRepositoryFolder: function () {\n\n        var dfr = $.Deferred();\n\n        if (!this.get('repositoryDestination')) {\n            // weird, the object is absent, but, OK, skip it.\n            return dfr.resolve();\n        }\n        if (!this.get('repositoryDestination').saveToRepository) {\n            // nothing to check, this ability is disabled\n            return dfr.resolve();\n        }\n\n        var folder = this.get('repositoryDestination').folderURI;\n        if (folder.indexOf('${') >= 0) {\n            // property placeholder used, cannot check\n            return dfr.resolve();\n        }\n\n        // check for empty\n        if (!folder || folder === \"\") {\n            return dfr.reject({\n                field: 'outputRepository',\n                errorCode: 'error.not.empty.folder'\n            });\n        }\n\n        // check for invalid characters\n        if (!this.isValidUri(folder)) {\n            return dfr.reject({\n                field: 'outputRepository',\n                errorCode: 'error.report.job.invalid.chars.folderURI'\n            });\n        }\n\n        // check the cache if the folder was already tested\n        if (_.isUndefined(validatedFolderURIsCache[folder])) {\n\n            // request folder permission from the server\n            this.checkPermissionOnFolder(folder, function (err, permission) {\n\n                var errorCode = null;\n                if (err) {\n                    errorCode = \"error.report.job.report.inexistent.output\";\n                } else if (!(permission === 1 || permission === 30 || permission === 6)) {\n                    errorCode = \"error.report.job.output.folder.notwriteable\";\n                }\n\n                if (errorCode) {\n                    // add the failed folder result to cache\n                    validatedFolderURIsCache[folder] = {\n                        field: 'outputRepository',\n                        errorCode: errorCode,\n                        errorArguments: [folder]\n                    };\n                    dfr.reject(validatedFolderURIsCache[folder]);\n                } else {\n                    // add folder to cache as accessible\n                    validatedFolderURIsCache[folder] = {};\n                    dfr.resolve();\n                }\n\n            });\n\n        } else {\n            // We've already checked this folder. Resolve using the cache entry\n            if (validatedFolderURIsCache[folder].errorCode) {\n                return dfr.reject(validatedFolderURIsCache[folder]);\n            } else {\n                return dfr.resolve();\n            }\n        }\n\n        return dfr;\n    },\n\n\n    // test model's outputLocalFolder\n    testOutputHostFileSystemFolder: function() {\n\n        var self = this;\n        var dfr = $.Deferred();\n\n        if (config.enableSaveToHostFS === \"false\" || config.enableSaveToHostFS === false) {\n            // nothing to check, this ability is disabled\n            return dfr.resolve();\n        }\n        if (!this.get('repositoryDestination')) {\n            // weird, the object is absent, but, OK, skip it.\n            return dfr.resolve();\n        }\n        var outputLocalFolder = this.get('repositoryDestination').outputLocalFolder;\n        if (_.isUndefined(outputLocalFolder) || outputLocalFolder === null) {\n            // it means use has not specified 'Output To Host File System' path\n            return dfr.resolve();\n        }\n\n        // in other cases (empty string) we raise an error\n        if (!outputLocalFolder) {\n            this.trigger('invalid', [{\n                field: 'outputHostFileSystem',\n                errorCode: 'report.scheduling.output.localhostpath'\n            }], {\n                switchToErrors: true\n            });\n\n            return dfr.reject();\n        }\n\n        var data = {\n            path: this.get('repositoryDestination').outputLocalFolder,\n            toJSON: function(){ return this; },\n            trigger: function(){ return this; }\n        };\n\n        Backbone.sync.call(this, 'update', data, {\n            url: config.contextPath + '/rest_v2/connections',\n            contentType: 'application/connections.lfs+json',\n            type: 'POST',\n            headers: {'Accept': 'application/json'}\n\n        }).done(function() {\n\n            dfr.resolve();\n\n        }).fail(function() {\n\n            self.trigger('invalid', [{\n                field: 'outputHostFileSystem',\n                errorCode: 'report.scheduling.output.localhostpath'\n            }], {\n                switchToErrors: true\n            });\n\n            dfr.reject();\n        });\n\n        return dfr;\n    },\n\n    checkPermissionOnFolder: function(folder, callback) {\n        // call backbone sync method manually\n        return Backbone.sync.call(this, 'read', new Backbone.Model(), {\n            url: config.contextPath + '/rest_v2/resources' + folder,\n            headers: { 'Accept': 'application/repository.folder+json' },\n            type: 'GET',\n            success: function(data, xhr) {\n                if ('function' === typeof callback)\n                    callback(undefined, data.permissionMask);\n            },\n            error: function(err) {\n                try { err = JSON.parse(err.responseText); } catch(e) {}\n                if ('function' === typeof callback)\n                    callback(err);\n            }\n        });\n    },\n\n    //\n    resource: function(type, uri, callback){\n        // call backbone sync method manually\n        return Backbone.sync.call(this, 'read', new Backbone.Model(), {\n            url: config.contextPath + '/rest_v2/resources' + uri,\n            headers:{ 'Accept': 'application/repository.' + type + '+json' },\n            type: 'GET',\n            success: function(data, xhr){\n                if ('function' === typeof callback)\n                    callback(undefined, data);\n            },\n            error: function(err){\n                if ('function' === typeof callback)\n                    callback(err);\n            }\n        });\n    },\n\n    // parse job uri and provide parsed values\n    parseUri: function (uri) {\n        // private variables\n        var match;\n\n        // check first char of uri, make it / in any case\n        if (uri[0] !== '/') uri = '/' + uri;\n\n        // check for pattern and return parsed values if matches\n        if (uri && (match = uri.match(/^(.*)\\/([^\\/]+)$/))) {\n            if (match[1] === \"\") match[1] = \"/\";\n            return {\n                full: match[0],\n                folder: match[1],\n                file: match[2]\n            };\n        }\n\n        // not match\n        return {};\n    },\n\n    // create new model from uri\n    createFromUri: function (uri) {\n\n        // clear all errors on the form\n        this.trigger('clearAllErrors');\n\n        // clear model\n        this.clear({ silent: true });\n\n        // parse uri components\n        uri = this.parseUri(uri);\n\n        // set new model attributes\n        this.set(this.parse(this.createNewData(uri)));\n    },\n\n    createNewData: function(uri) {\n        // load defaults from jrsConfigs.jsp\n        var jrsConfigDefaults = _.extend({}, config.reportJobEditorDefaults);\n\n        return {\n            baseOutputFilename: uri.file,\n            outputFormats: { outputFormat: ['PDF'] },\n            source: {\n                reportUnitURI: uri.full\n            },\n            trigger: {\n                // send almost an empty object to indicate what it's model for editing\n                timezone: config.usersTimeZone || \"America/Los_Angeles\"\n            },\n            outputTimeZone: config.usersTimeZone || \"America/Los_Angeles\",\n            repositoryDestination: {\n                overwriteFiles: true,\n                sequentialFilenames: false,\n                folderURI: (typeof jrsConfigDefaults['scheduler.job.repositoryDestination.folderURI'] === \"undefined\") ?\n                    uri.folder : jrsConfigDefaults['scheduler.job.repositoryDestination.folderURI'],\n                saveToRepository: true,\n                timestampPattern: \"yyyyMMddHHmm\",\n                outputFTPInfo: {\n                    propertiesMap: {},\n                    type: \"ftp\",\n                    port: \"21\",\n                    implicit: true,\n                    pbsz: 0\n                }\n            }\n        };\n    },\n\n    // format date from timestamp\n    formatDate: function (timestamp) {\n        if (!timestamp) return '';\n        return moment(timestamp, SERVICE_DATE_PATTERN_MOMENTJS_FORMAT).format(MOMENTJS_PARSE_UI_DATE_PATTERN);\n    },\n\n    parseIntervals: function (str, type) {\n        str = str || false;\n        if (!str) return false;\n\n        str = str.replace(/ /g, \"\");\n\n        var strs = str.split(\",\"), i, k, numbers = [], control = {}, tmp;\n\n        if (strs.length == 1) {\n            strs = str.split(\"/\");\n        }\n\n        // be default, we are checking DatesInMonth\n        var MIN = 1;\n        var MAX = 31;\n        if (type === \"hours\") {\n            MIN = 0;\n            MAX = 23;\n        }\n        if (type === \"minutes\") {\n            MIN = 0;\n            MAX = 59;\n        }\n\n        if (strs.length < 1) return false;\n\n        for (i = 0; i < strs.length; i++) {\n            if (strs[i].indexOf(\"-\") === -1) {\n\n                if (!this.isNumeric(strs[i], {allowZero: true})) return false;\n                strs[i] = parseInt(strs[i], 10);\n\n                if (!(MIN <= strs[i] && strs[i] <= MAX)) return false;\n                if (typeof control[strs[i]] === \"undefined\") {\n                    numbers.push(strs[i]);\n                    control[strs[i]] = 1;\n                }\n                continue;\n            }\n\n            tmp = strs[i].split(\"-\");\n\n            if (!this.isNumeric(tmp[0], {allowZero: true})) return false;\n            if (!this.isNumeric(tmp[1], {allowZero: true})) return false;\n\n            tmp[0] = parseInt(tmp[0], 10);\n            tmp[1] = parseInt(tmp[1], 10);\n            if (!(MIN <= tmp[0] && tmp[0] <= MAX)) return false;\n            if (!(MIN <= tmp[1] && tmp[1] <= MAX)) return false;\n            if (tmp[0] >= tmp[1]) return false;\n            for (k = tmp[0]; k <= tmp[1]; k++) {\n                if (typeof control[k] === \"undefined\") {\n                    numbers.push(k);\n                    control[k] = 1;\n                }\n            }\n        }\n        return numbers;\n    },\n\n    ifPastDate: function(date, date_tz) {\n        if (!date || !date_tz) return false;\n\n        var target_tz, my_tz, tz_diff, currentTime, selectedTime;\n\n        target_tz = getTZOffset(date_tz);\n        my_tz = moment().utcOffset() / 60;\n        tz_diff = my_tz - target_tz;\n\n        currentTime = +moment().format(\"X\");\n        selectedTime = +moment(date, MOMENTJS_PARSE_UI_DATE_PATTERN, true).add(1, \"minute\").format(\"X\") + 3600 * (tz_diff);\n\n        return selectedTime < currentTime;\n    },\n\n    isHostName: function(hostname) {\n        if (!hostname) return false;\n        if (hostname.indexOf('${') >= 0) return true;\n        var hostnameRegex = /^(([a-zA-Z0-9]|[a-zA-Z0-9][a-zA-Z0-9\\-]*[a-zA-Z0-9])\\.)*([A-Za-z0-9]|[A-Za-z0-9][A-Za-z0-9\\-]*[A-Za-z0-9])$/;\n        return hostnameRegex.test(hostname);\n    },\n\n    isEmail: function(email) {\n        if (!email) return false;\n        if (email.indexOf('${') >= 0) return true;\n        var re = new XRegExp(globalConfig.emailRegExpPattern, \"g\");\n        return re.test(email);\n    },\n\n    isValidFileName: function(fileName) {\n        if (!fileName) return false;\n        if (fileName.indexOf('${') >= 0) return true;\n        var re = new RegExp(globalConfig.resourceIdNotSupportedSymbols, \"g\");\n        return !re.test(fileName);\n    },\n\n    isValidUri: function(uri) {\n        if (!uri) return false;\n        if (uri.indexOf('${') >= 0) return true;\n        var re = new RegExp(globalConfig.resourceIdNotSupportedSymbols, \"g\");\n        return !re.test(uri.replace(/\\//g,\"\")); // exclude / from testing value\n    },\n\n    validateEmails: function(emails) {\n        if (!emails) return false;\n        emails = emails.split(new RegExp(\" *\" + EMAIL_SEPARATOR + \" *\"));\n        for (var i = 0; i < emails.length; i++) {\n            if (!this.isEmail(emails[i]))\n                return false;\n        }\n        return true;\n    },\n\n    isNumeric: function(val, cfg) {\n        var i;\n        if (!val) return false;\n\n        cfg = cfg || {};\n        cfg.allowNegative = cfg.allowNegative || false;\n        cfg.allowZero = cfg.allowZero || false;\n        cfg.maxValue = cfg.maxValue || false;\n        cfg.minValue = cfg.minValue || false;\n\n        if (typeof val === \"string\") {\n\n            // check for any characters expect digits\n            if (val.match(/\\D/)) return false;\n\n            i = parseInt(val, 10);\n            if (_.isNaN(i)) return false;\n        }\n\n\n        if (cfg.allowNegative === false && i < 0) return false;\n        if (cfg.allowZero === false && i === 0) return false;\n        if (cfg.maxValue && cfg.maxValue < i) return false;\n        if (cfg.minValue && i < cfg.minValue) return false;\n\n        return true;\n    }\n\n});\n","/*\n * Copyright (C) 2005 - 2022 TIBCO Software Inc. All rights reserved.\n * http://www.jaspersoft.com.\n *\n * Unless you have purchased a commercial license agreement from Jaspersoft,\n * the following license terms apply:\n *\n * This program is free software: you can redistribute it and/or modify\n * it under the terms of the GNU Affero General Public License as\n * published by the Free Software Foundation, either version 3 of the\n * License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the\n * GNU Affero General Public License for more details.\n *\n * You should have received a copy of the GNU Affero General Public License\n * along with this program. If not, see <http://www.gnu.org/licenses/>.\n */\n\nimport {doNothing, isSupportsTouch, isIPad} from \"./utils.common\";\nimport jQuery from 'jquery';\n\nvar InfiniteScroll = function (options) {\n    this._id = options.id;\n    this._contentId = options.contentId ? options.contentId : undefined;\n    this._scroll = options.scroll;\n    this._loadFactor = options.loadFactor ? options.loadFactor : 0.95;\n    this._lastContentHeight = 0;\n    this._loading = false;    // getting control from 'id' of jquery object or from DOM element\n    // getting control from 'id' of jquery object or from DOM element\n    if (options.control) {\n        if (options.control.length !== undefined && options.control.length > 1) {\n            this._control = jQuery(options.control[0]);\n        } else {\n            this._control = jQuery(options.control)[0];\n        }\n    } else {\n        this._control = this._scroll ? this._scroll.parent : jQuery('#' + this._id)[0];\n    }\n    if (this._scroll) {\n        this._content = this._scroll.element;\n    } else {\n        // getting content from 'id' of jquery object or from DOM element\n        if (options.content) {\n            if (options.content.length !== undefined && options.content.length > 1) {\n                this._content = jQuery(options.content[0]);\n            } else {\n                this._content = jQuery(options.content)[0];\n            }\n        } else {\n            this._content = this._contentId ? jQuery('#' + this._contentId)[0] : this._control.childElements()[0];\n        }\n    }\n    this._eventType = isSupportsTouch() ? 'touchmove' : 'scroll';\n    this._control.observe(this._eventType, this._onScrollHandler.bind(this));\n};\n/**\n\t * Destroys the infinite scroll.\n\t */\nInfiniteScroll.addMethod('destroy', function () {\n    if (this._control) {\n        this._control.stopObserving(this._eventType, this._handler);\n    }\n});    /**\n\t * Handler for scroll event on the control element.\n\t */\n/**\n\t * Handler for scroll event on the control element.\n\t */\nInfiniteScroll.addMethod('_onScrollHandler', function (e) {\n    var controlScrollTop = this._scroll ? this._scroll.y * -1 : this._control.scrollTop;\n    var contentHeight = this._content.getHeight();\n    var controlHeight = this._control.getHeight();\n    if (contentHeight != this._lastContentHeight) {\n        this._loading = false;\n    }\n    var allowLoad = !this._loading && contentHeight != 0;\n    if (this._scroll) {\n        allowLoad = allowLoad && this._scroll.isBottom();\n    } else {\n        allowLoad = allowLoad && (controlHeight + controlScrollTop) / contentHeight > this._loadFactor;\n    }\n    if (allowLoad) {\n        this._loading = true;\n        this._lastContentHeight = contentHeight;\n        isIPad() && this.wait();\n        this.onLoad();\n    }\n});    /**\n\t * This method is invoked when new data should be loaded. Actually it should load new data. The method should be\n\t * replaced in the instance of InfiniteScroll class. Next invocation of onLoad method will not occur till the content\n\t * element height changed.\n\t */\n/**\n\t * This method is invoked when new data should be loaded. Actually it should load new data. The method should be\n\t * replaced in the instance of InfiniteScroll class. Next invocation of onLoad method will not occur till the content\n\t * element height changed.\n\t */\nInfiniteScroll.addMethod('onLoad', doNothing);    /**\n\t * Resets the infinite scroll for totally new content. This method should be invoked in case the old data is cleaned\n\t * and the new data is set to the content element. Do not invoke this method in case new data is added in onLoad\n\t * method - this case is processed automatically.\n\t *\n\t * The method also moves the slider of the scroll in control element to top position.\n\t */\n/**\n\t * Resets the infinite scroll for totally new content. This method should be invoked in case the old data is cleaned\n\t * and the new data is set to the content element. Do not invoke this method in case new data is added in onLoad\n\t * method - this case is processed automatically.\n\t *\n\t * The method also moves the slider of the scroll in control element to top position.\n\t */\nInfiniteScroll.addMethod('reset', function () {\n    isIPad() ? this._scroll.reset() : this._control.scrollTop = 0;\n    this._loading = false;\n});\nInfiniteScroll.addMethod('wait', function () {\n    if (!this._waitIndicator) {\n        this._waitIndicator = new Element('div', { 'class': 'dimmer resultsOverlay' });\n        var dimensions = this._control.getDimensions();\n        var offsets = this._control.positionedOffset();\n        this._waitIndicator.setStyle({\n            zIndex: '4000',\n            top: offsets.top + 'px',\n            left: offsets.left + 'px',\n            height: dimensions.height + 'px',\n            width: dimensions.width + 'px'\n        });\n        this._control.insert({ after: this._waitIndicator });\n    }\n    this._waitIndicator.show();\n});\nInfiniteScroll.addMethod('stopWaiting', function () {\n    this._waitIndicator && this._waitIndicator.hide();\n});    // TODO: remove it when we move Repository Search into AMD style\n// Make it global due to RepositorySearch modules\n// TODO: remove it when we move Repository Search into AMD style\n// Make it global due to RepositorySearch modules\nwindow.InfiniteScroll = InfiniteScroll;\nexport default InfiniteScroll;","/*\n * Copyright (C) 2005 - 2022 TIBCO Software Inc. All rights reserved.\n * http://www.jaspersoft.com.\n *\n * Unless you have purchased a commercial license agreement from Jaspersoft,\n * the following license terms apply:\n *\n * This program is free software: you can redistribute it and/or modify\n * it under the terms of the GNU Affero General Public License as\n * published by the Free Software Foundation, either version 3 of the\n * License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the\n * GNU Affero General Public License for more details.\n *\n * You should have received a copy of the GNU Affero General Public License\n * along with this program. If not, see <http://www.gnu.org/licenses/>.\n */\n\nimport _ from 'underscore';\nimport Backbone from 'backbone';\nimport templateJob from '../template/list/oneJob.htm';\nimport templateMasterJob from '../template/list/oneMasterJob.htm';\nimport i18n from '../../i18n/all.properties';\nimport xssUtil from 'js-sdk/src/common/util/xssUtil';\nimport ConfirmationDialog from 'js-sdk/src/common/component/dialog/ConfirmationDialog';\nimport jobStateEnum from '../enum/jobStateEnum';\nimport date from 'js-sdk/src/common/util/parse/date';\nimport {JSTooltip} from '../../components/components.tooltip';\n\nvar getLastRanDate = function(model) {\n    if (model.state.previousFireTime) {\n        return date.isoTimestampToLocalizedTimestampByTimezone(model.state.previousFireTime);\n    } else {\n        return \"\";\n    }\n};\n\nvar getNextRunDate = function(model) {\n    var jobState = model.state.value;\n\n    if (jobState !== jobStateEnum.NORMAL && jobState !== jobStateEnum.EXECUTING) {\n        return i18n['report.scheduling.list.label.disabled'];\n    } else if (model.state.nextFireTime) {\n        return date.isoTimestampToLocalizedTimestampByTimezone(model.state.nextFireTime);\n    } else {\n        return \"\";\n    }\n};\n\nvar isJobEnabled = function(model) {\n    var jobState = model.state.value;\n\n    return jobState === jobStateEnum.NORMAL || jobState === jobStateEnum.EXECUTING;\n};\n\nexport default Backbone.View.extend({\n    // view element tagName\n    tagName: 'li',\n    className: 'jobs first leaf',\n    // bind events for view\n    events: {\n        'click [name=editJob]': 'edit',\n        'click [name=deleteJob]': 'remove',\n        'change [name=enableJob]': 'enable'\n    },\n    // initialize view\n    initialize: function (options) {\n        this.options = _.extend({}, options);\n        var template = this.options.masterViewMode ? templateMasterJob : templateJob;    // create template\n        // create template\n        this.template = _.template(template);    // handle model changes\n        // handle model changes\n        this.model.on('change', this.render, this);\n    },\n    // render view\n    render: function () {\n        var model = this.model.toJSON();\n\n        this.$el.html(this.template({\n            model: model,\n            i18n: i18n,\n            lastRanDate: getLastRanDate(model),\n            nextRunDate: getNextRunDate(model),\n            isJobEnabled: isJobEnabled(model)\n        }));\n        if(this.model.collection && this.model.collection.options.masterViewMode) {\n            this.addToolTipToListElement(this.$el);\n        }\n        return this;\n    },\n    //adding tooltip\n    addToolTipToListElement: function(element){\n        var name = element.find(\".jobResource\")[0];\n        var desc = element.find('.jobResourcePath')[0];\n        name.update(xssUtil.hardEscape(this.model.attributes.reportLabel));\n        desc.update(xssUtil.hardEscape(this.model.attributes.reportUnitURI));\n        new JSTooltip(name, {\n            text: xssUtil.hardEscape(this.model.attributes.reportLabel)\n        });\n        new JSTooltip(desc, {\n            text: xssUtil.hardEscape(this.model.attributes.reportUnitURI)\n        });\n    },\n    // edit job\n    edit: function () {\n        this.trigger('editJobPressed', this.model.get('id'));\n    },\n    // remove job\n    remove: function () {\n        var self = this;\n\n        var text = i18n['report.scheduling.editing.job.confirm.delete'].\n            replace('{name}', xssUtil.hardEscape(this.model.get('label'))).\n            replace('{newline}', '<br><br>');\n\n        var dialog = new ConfirmationDialog({\n            title: i18n['report.scheduling.editing.job.confirm.title'],\n            text: text,\n            additionalCssClasses: 'schedulerJobRemoveDialog'\n        });\n        this.listenTo(dialog, 'button:yes', function () {\n            self.model.destroy();\n        });\n        dialog.open();\n    },\n    // enable/disable job\n    enable: function (event) {\n        this.model.state(event.target.checked);\n    }\n});\n","export default \"<div class=\\\"wrap draggable\\\">\\n\\n    <js-templateNonce></js-templateNonce>\\n    <div class=\\\"column one\\\">\\n        <p class=\\\"jobResource\\\" >{{- model.reportLabel }} </p>\\n        <p class=\\\"jobResourcePath\\\">{{- model.reportUnitURI }}</p>\\n    </div>\\n    <div class=\\\"column two\\\">\\n        <p class=\\\"jobName\\\">{{- model.label }}</p>\\n        <p class=\\\"jobDescription\\\" title=\\\"{{- model.description }}\\\">{{- model.description }}</p>\\n    </div>\\n    <div class=\\\"column three\\\">\\n        <p class=\\\"jobID\\\">{{- model.id }}</p>\\n        <p class=\\\"jobOwner\\\">{{- model.owner }}</p>\\n        <p class=\\\"jobState\\\">{{- model.state.value }}</p>\\n    </div>\\n    <div class=\\\"column four\\\">\\n        <p class=\\\"lastRanDate\\\">\\n            {{- lastRanDate }}\\n        </p>\\n        <p class=\\\"nextRunDate\\\">\\n            {{- nextRunDate }}\\n        </p>\\n    </div>\\n    <div class=\\\"column five\\\">\\n\\t    <div class=\\\"jobDelete\\\">\\n\\t\\t    <button name=\\\"deleteJob\\\" class=\\\"button action simple delete up\\\"></button>\\n\\t    </div>\\n\\t    <div class=\\\"jobEdit\\\">\\n\\t\\t    <button name=\\\"editJob\\\" class=\\\"button action simple edit up\\\"></button>\\n\\t    </div>\\n\\t    <div class=\\\"jobEnabled\\\">\\n\\t\\t    <input name=\\\"enableJob\\\" type=\\\"checkbox\\\" {{ if (isJobEnabled) { }} checked=\\\"checked\\\" {{ } }}></input>\\n\\t    </div>\\n    </div>\\n</div>\\n\\n\";","export default \"<div class=\\\"wrap draggable\\\">\\n\\n    <js-templateNonce></js-templateNonce>\\n    <div class=\\\"column one\\\">\\n        <p class=\\\"jobID\\\">{{- model.id }}</p>\\n    </div>\\n    <div class=\\\"column two\\\">\\n        <p class=\\\"jobName\\\">{{- model.label }}</p>\\n        <p class=\\\"jobOwner\\\">{{- model.owner }}</p>\\n    </div>\\n    <div class=\\\"column three\\\">\\n        <p class=\\\"jobState\\\">{{- model.state.value }}</p>\\n    </div>\\n    <div class=\\\"column four\\\">\\n        <p class=\\\"lastRanDate\\\">\\n            {{- lastRanDate }}\\n        </p>\\n        <p class=\\\"nextRunDate\\\">\\n            {{- nextRunDate }}\\n        </p>\\n    </div>\\n    <div class=\\\"column five\\\">\\n\\t    <div class=\\\"jobDelete\\\">\\n\\t\\t    <button name=\\\"deleteJob\\\" class=\\\"button action simple delete up\\\"></button>\\n\\t    </div>\\n\\t    <div class=\\\"jobEdit\\\">\\n\\t\\t    <button name=\\\"editJob\\\" class=\\\"button action simple edit up\\\"></button>\\n\\t    </div>\\n\\t    <p class=\\\"jobEnabled\\\">\\n\\t\\t    <input name=\\\"enableJob\\\" type=\\\"checkbox\\\" {{ if (isJobEnabled) { }} checked=\\\"checked\\\" {{ } }} ></input>\\n\\t    </p>\\n    </div>\\n</div>\\n\\n\";","/*\n * Copyright (C) 2005 - 2022 TIBCO Software Inc. All rights reserved.\n * http://www.jaspersoft.com.\n *\n * Unless you have purchased a commercial license agreement from Jaspersoft,\n * the following license terms apply:\n *\n * This program is free software: you can redistribute it and/or modify\n * it under the terms of the GNU Affero General Public License as\n * published by the Free Software Foundation, either version 3 of the\n * License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the\n * GNU Affero General Public License for more details.\n *\n * You should have received a copy of the GNU Affero General Public License\n * along with this program. If not, see <http://www.gnu.org/licenses/>.\n */\n\nimport $ from 'jquery';\nimport _ from 'underscore';\nimport Backbone from 'backbone';\nimport config from 'js-sdk/src/jrs.configs';\nimport JobModel from '../../scheduler/model/JobModel';\n\nexport default Backbone.Collection.extend({\n    // collection model\n    model: JobModel,\n\n    // initialize view\n    initialize: function (ignore, options) {\n        this.options = _.extend({}, options);\n        this.initialAmountOfJobsToLoad = 100;\n\n        // TODO: extract to config files\n        this.amountOfJobsToLoad = 100;\n\n        // TODO: extract to config files\n        // variable which holds the amount of jobs loaded already from the backend\n        this.amountOfLoadedJobs = 0;\n    },\n\n    setSearchingTerm: function (term) {\n        this.searchingTerm = term;\n    },\n\n    getSearchingTerm: function () {\n        return this.searchingTerm;\n    },\n\n    getReportUri: function () {\n        return this.options.parentReportURI || this.options.reportUri;\n    },\n\n    fetch: function () {\n        //initialize the list of the reports which jobs we might need to fetch\n        this.urlsOfReportsToFetchJobs = [];\n\n        // In Master View mode we don't work with specific report so we can't fetch\n        // report options, so we need simply skip this part and fetch all jobs we have\n        if (this.options.masterViewMode) {\n            this.getJobsWithPagination();\n            return;\n        }\n\n        // in other case we have to be sure we have an Report Uri\n        if (!this.getReportUri()) {\n            return;\n        }\n\n        // Add the url of the report itself which we working with\n        this.urlsOfReportsToFetchJobs.push(this.getReportUri());\n\n        // If we are running CE version we don't need to have deal with report options,\n        // so we need to fetch only jobs of the report itself.\n        if (!config.isProVersion) {\n            this.getJobsOfAllReportsWeHave();\n            return;\n        }\n\n        // we moved the next section of the fetch function to separate one to let override it\n        this._secondFetchPart();\n    },\n\n    _secondFetchPart: function () {\n        // in PRO version get the report options first and then jobs\n        this.getReportOptions().always(() => {\n            this.getJobsOfAllReportsWeHave();\n        });\n    },\n\n    getReportOptions: function () {\n        var self = this, reportUri = this.getReportUri();\n        return this.request({ url: config.contextPath + '/rest_v2/reports' + reportUri + '/options' }).done(function (data) {\n            data = data.reportOptionsSummary;\n            if (data) {\n                for (var i = 0, l = data.length; i < l; i++) {\n                    if (data[i].uri) {\n                        self.urlsOfReportsToFetchJobs.push(data[i].uri);\n                    }\n                }\n            }\n        }).fail(function () {\n            // Don't panic if we failed to fetch all additional report options, it might be OK.\n        });\n    },\n\n    getJobsOfAllReportsWeHave: function () {\n        var self = this, jobModels = [], fetchedAmount = 0;    // fetch jobs for each Report and count how much we got\n        // once we finish with all reports initialize the collection by resetting it\n        // fetch jobs for each Report and count how much we got\n        // once we finish with all reports initialize the collection by resetting it\n        _.each(this.urlsOfReportsToFetchJobs, function (reportUri) {\n            self.getJobOfReport(reportUri).done(function (data) {\n                jobModels = jobModels.concat(self.parse(data));\n            }).fail(function (err) {\n                self.trigger('error', err);\n            }).always(function () {\n                fetchedAmount++;\n                if (fetchedAmount === self.urlsOfReportsToFetchJobs.length) {\n                    self.reset(jobModels);\n                }\n            });\n        });\n    },\n\n    getJobsFromBackend: function (startIndex, amountOfJobs) {\n        var requestParams = ['sortType=SORTBY_REPORTURI'];\n        if (startIndex) {\n            requestParams.push('startIndex=' + startIndex);\n        }\n        if (amountOfJobs) {\n            requestParams.push('numberOfRows=' + amountOfJobs);\n        }\n        if (this.searchingTerm) {\n            var term = encodeURI(this.searchingTerm);\n            /*\n\t\t\t    var modelToSearch = {\n\t\t\t\t    label: term, // Job Name\n\t\t\t\t    description: term, // Job Description.\n\t\t\t\t    reportLabel: term // Report Label - new API parameter\n\t\t\t    };\n\t\t\t    requestParams.push(\"example=\" + json.stringify(modelToSearch));\n\t\t\t    */\n            requestParams.push('label=' + term);\n        }\n        var self = this;\n        var dfr = $.Deferred();\n        var url = config.contextPath + '/rest_v2/jobs?' + requestParams.join('&');\n        this.request({ url: url }).done(function (data) {\n            var models = self.parse(data);\n            self.amountOfLoadedJobs += models.length;\n            dfr.resolve(models);\n        }).fail(function (err) {\n            self.trigger('error', err);\n            dfr.reject(err);\n        });\n        return dfr;\n    },\n\n    // This method can get jobs not only of the specific report\n    // but also all jobs which are available on the server.\n    // This can be done by sending request without report information\n    getJobOfReport: function (reportUri) {\n        var url = config.contextPath + '/rest_v2/jobs?reportUnitURI=' + encodeURI(reportUri);\n        return this.request({ url: url });\n    },\n\n    getJobsWithPagination: function () {\n        this.amountOfLoadedJobs = 0;\n        // reset this variable if it was used before\n        var self = this;\n        this.getJobsFromBackend(this.amountOfLoadedJobs, this.initialAmountOfJobsToLoad).done(function (models) {\n            self.reset(models);\n        });\n    },\n\n    loadMoreJobs: function () {\n        var self = this;\n        this.getJobsFromBackend(this.amountOfLoadedJobs, this.amountOfJobsToLoad).done(function (models) {\n            self.add(models);\n        });\n    },\n\n    // parse response from server\n    parse: function (response) {\n        return response ? response.jobsummary : [];\n    },\n\n    request: function (options) {\n        options = options || {};\n        options.cache = false;\n        return Backbone.sync.call(this, 'read', new Backbone.Model(), options);\n    },\n\n    permission: function (url, callback) {\n        // call backbone sync method manually\n        return Backbone.sync.call(this, 'read', new Backbone.Model(), {\n            url: config.contextPath + '/rest_v2/resources/' + url.replace(/\\/[^\\/]+$/, ''),\n            cache: false,\n            headers: { 'Accept': 'application/repository.folder+json' },\n            type: 'GET',\n            success: function (data, xhr) {\n                if ('function' === typeof callback)\n                    callback(undefined, data.permissionMask);\n            },\n            error: function (err) {\n                if ('function' === typeof callback)\n                    callback(err);\n            }\n        });\n    }\n});\n","/*\n * Copyright (C) 2005 - 2022 TIBCO Software Inc. All rights reserved.\n * http://www.jaspersoft.com.\n *\n * Unless you have purchased a commercial license agreement from Jaspersoft,\n * the following license terms apply:\n *\n * This program is free software: you can redistribute it and/or modify\n * it under the terms of the GNU Affero General Public License as\n * published by the Free Software Foundation, either version 3 of the\n * License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the\n * GNU Affero General Public License for more details.\n *\n * You should have received a copy of the GNU Affero General Public License\n * along with this program. If not, see <http://www.gnu.org/licenses/>.\n */\n\nimport $ from 'jquery';\nimport _ from 'underscore';\nimport i18n from '../../i18n/all.properties';\nimport Backbone from 'backbone';\nimport {isSupportsTouch, isIPad} from '../../util/utils.common';\nimport domUtil from 'js-sdk/src/common/util/domUtil';\nimport TouchController from '../../util/touch.controller';\nimport InfiniteScroll from '../../util/tools.infiniteScroll';\nimport JobView from './JobView';\nimport JobsCollection from '../collection/JobsCollection';\nimport jobsViewTemplate from '../template/jobsViewTemplate.htm';\nimport masterViewTemplate from '../template/masterViewTemplate.htm';\nimport listOfJobsTemplate from '../template/list/listOfJobsTemplate.htm';\nimport nothingToDisplayTemplate from '../template/list/nothingToDisplayTemplate.htm';\n\nexport default Backbone.View.extend({\n    // binded events for view\n    events: {\n        'click [name=backButton]': 'backButtonClick',\n        'click [name=scheduleJob]': 'createButtonClick',\n        'click [name=runJob]': 'runButtonClick',\n        'click [name=refreshList]': 'refreshButtonClick',\n        // search listeners\n        'keydown [name=jobSearchInput]': 'jobSearchInputKeyDown',\n        'click [name=jobSearchIcon]': 'jobSearchIconClick',\n        'click [name=jobSearchClear]': 'clearJobSearch'\n    },\n\n    _getJobsCollection: function (options) {\n        return new JobsCollection(null, options);\n    },\n\n    // initialize view\n    initialize: function (options) {\n        this.options = _.extend({}, options);\n        this.options = _.omit(this.options, 'model');\n\n        // create collection\n        this.jobsViewCollection = this._getJobsCollection(this.options);\n\n        // handle collection changes\n        this.listenTo(this.jobsViewCollection, 'add', this.createAndAddJobView);\n        this.listenTo(this.jobsViewCollection, 'reset destroy', this.renderCollection);\n    },\n    // get jobs from the server\n    refresh: function () {\n        this.jobsViewCollection.fetch();\n    },\n    searchJobs: function () {\n        var searchTerm = this.$el.find('[name=jobSearchInput]').val();\n        if (!searchTerm) {\n            return;\n        }\n        this.$el.find('[name=jobSearchClear]').addClass('up');\n        this.jobsViewCollection.setSearchingTerm(searchTerm);\n        this.jobsViewCollection.fetch();\n    },\n    clearJobSearch: function () {\n        this.$el.find('[name=jobSearchClear]').removeClass('up');\n        this.$el.find('[name=jobSearchInput]').val('');\n        this.jobsViewCollection.setSearchingTerm('');\n        this.jobsViewCollection.fetch();\n    },\n    render: function () {\n        const searchTerm = this.jobsViewCollection.getSearchingTerm();\n        var template = this.options.masterViewMode ? masterViewTemplate : jobsViewTemplate;\n        var templateData = {\n            i18n: i18n,\n            reportUri: this.options.reportUri,\n            searchTerm\n        };\n        this.setElement($(_.template(template, templateData)));\n        this.renderCollection();\n    },\n    renderCollection: function () {\n        var jobsContainer = this.$el.find('[name=jobsContainer]').empty();    // render collection items\n        // render collection items\n        if (this.jobsViewCollection.length) {\n            jobsContainer.append($(_.template(listOfJobsTemplate, {})));    // iterate over collection and add items\n            // iterate over collection and add items\n            this.jobsViewCollection.each(_.bind(this.createAndAddJobView, this));    // initialize the infinite scroll.\n            // initialize the infinite scroll.\n            this.initInfiniteScroll();\n            this.adjustTableHeaderWidth();\n        } else {\n            var nothingToDisplayMessage = this.options.isDashboard ? i18n['dashboard.scheduling.list.no.jobs.for.dashboard'] : i18n['report.scheduling.list.no.jobs.for.report'];\n            jobsContainer.append($(_.template(nothingToDisplayTemplate, { message: this.options.masterViewMode ? i18n['report.scheduling.list.no.jobs'] : nothingToDisplayMessage })));\n        }\n    },\n    initInfiniteScroll: function () {\n        var resultList = this.$el.find('#listOfJobs')[0];\n        var resultsContainer = this.$el.find('#jobsSummaryContainer')[0];\n        if (!this.options.masterViewMode || !resultList) {\n            return;\n        }\n        if (isSupportsTouch()) {\n            if (!this._touchController) {\n                this._touchController = new TouchController(resultList, resultList.parent(), { forceLayout: true });\n            }\n            this.listenTo(resultList, 'layout_update orientationchange', function () {\n                $(resultList).css('min-width', $(resultsContainer).width() + 'px');\n                resultList.width($(resultsContainer).width());\n            });\n        }\n        if (isIPad()) {\n            this._infiniteScroll = new InfiniteScroll({\n                control: resultsContainer,\n                content: resultList,\n                scroll: this._touchController || undefined\n            });\n        } else {\n            this._infiniteScroll = new InfiniteScroll({\n                control: resultsContainer,\n                content: resultList\n            });\n        }\n        this._infiniteScroll.onLoad = _.bind(function () {\n            this._infiniteScroll.wait();\n            this.jobsViewCollection.loadMoreJobs();\n            this._infiniteScroll.stopWaiting();\n        }, this);\n    },\n    // yes, it's a CSS hack\n    adjustTableHeaderWidth: function () {\n        var header =this.$el.find('.content > .subheader > .list.collapsible.header  .wrap');\n        var table = this.$el.find('.content > .body');\n        var hasScroll = domUtil.hasScrollBar(table[0], 'vertical');\n        header.css('margin-right', (hasScroll ? 15 : 0) + 'px');\n    },\n    jobSearchInputKeyDown: function (event) {\n        // on Esc key we'll clean the search area\n        if (event.keyCode === 27) {\n            // prevent other keyboard related logic to handle this Esc keypress\n            event.preventDefault();\n            event.stopPropagation();\n            this.clearJobSearch();\n        }    // we expect Enter/Return key to run the search\n        // we expect Enter/Return key to run the search\n        if (event.keyCode === 13) {\n            // prevent other keyboard related logic to handle this Esc keypress\n            event.preventDefault();\n            event.stopPropagation();\n            this.searchJobs();\n        }\n    },\n    jobSearchIconClick: function () {\n        this.searchJobs();\n    },\n    // add one element to collection\n    createAndAddJobView: function (item) {\n        var view = new JobView({\n            model: item,\n            masterViewMode: this.options.masterViewMode\n        });\n        this.listenTo(view, 'editJobPressed', this.editJobPressed);\n        var element = view.render().$el;\n        this.$el.find('[name=listOfJobs]').append(element);\n    },\n    editJobPressed: function (jobId) {\n        this.trigger('editJobPressed', jobId);\n    },\n    // go back to previous location\n    backButtonClick: function () {\n        this.trigger('backButtonPressed');\n    },\n    // handle new job creation\n    createButtonClick: function () {\n        this.trigger('createNewJobRequest');\n    },\n    // create new job and run it immediately\n    runButtonClick: function () {\n        this.trigger('runNowRequest');\n    },\n    refreshButtonClick: function () {\n        this.refresh();\n    }\n});\n","export default \"<div class=\\\"pageHeader \\\">\\n\\t<div class=\\\"pageHeader-title\\\">\\n\\t\\t<div class=\\\"pageHeader-title-icon\\\">\\n\\t\\t\\t<span class=\\\"icon schedules\\\"></span>\\n\\t\\t</div>\\n\\t\\t<div class=\\\"pageHeader-title-text\\\">{{- i18n[\\\"menu.jobs\\\"] }}</div>\\n\\t</div>\\n</div>\\n<div class=\\\"page column decorated primary listOfJobs masterView\\\">\\n\\n    <js-templateNonce></js-templateNonce>\\n\\t<div class=\\\"content\\\">\\n\\t\\t<div class=\\\"subheader\\\">\\n\\t\\t\\t<div class=\\\"toolbar\\\">\\n\\t\\t\\t\\t<span data-component-type=\\\"search\\\" data-tab-index=\\\"3\\\" class=\\\"control searchLockup \\\" id=\\\"secondarySearchBox\\\">\\n\\t\\t\\t\\t<label class=\\\"offLeft\\\" for=\\\"__scheduler_jobSearchInput\\\">{{- i18n[\\\"SEARCH_SEARCH\\\"] }}</label>\\n\\t\\t\\t\\t<div class=\\\"wrap\\\">\\n\\t\\t\\t\\t\\t<input type=\\\"text\\\" tabindex=\\\"\\\" name=\\\"jobSearchInput\\\" id=\\\"__scheduler_jobSearchInput\\\" class=\\\"\\\" value=\\\"{{- searchTerm }}\\\">\\n\\t\\t\\t\\t</div>\\n\\t\\t\\t\\t<b class=\\\"right\\\">\\n\\t\\t\\t\\t\\t<a name=\\\"jobSearchClear\\\" class=\\\"button searchClear {{- searchTerm ? 'up' : '' }}\\\"></a>\\n\\t\\t\\t\\t</b>\\n\\t\\t\\t\\t<a class=\\\"button search up\\\" name=\\\"jobSearchIcon\\\"></a>\\n\\t\\t\\t</span>\\n\\t\\t\\t</div>\\n\\t\\t\\t<ul id=\\\"resultsListHeader\\\" class=\\\"list collapsible tabular jobs header\\\">\\n\\t\\t\\t\\t<li id=\\\"\\\" class=\\\"jobs first leaf\\\">\\n\\t\\t\\t\\t\\t<div class=\\\"wrap\\\">\\n\\t\\t\\t\\t\\t\\t<div class=\\\"column one\\\">\\n\\t\\t\\t\\t\\t\\t\\t<p class=\\\"jobResource\\\">{{- i18n[\\\"report.scheduling.list.resource\\\"] }}</p>\\n\\t\\t\\t\\t\\t\\t</div>\\n\\t\\t\\t\\t\\t\\t<div class=\\\"column two\\\">\\n\\t\\t\\t\\t\\t\\t\\t<p class=\\\"jobName\\\">{{- i18n[\\\"report.scheduling.list.header.label\\\"] }}</p>\\n\\t\\t\\t\\t\\t\\t</div>\\n\\t\\t\\t\\t\\t\\t<div class=\\\"column three\\\">\\n\\t\\t\\t\\t\\t\\t\\t<p class=\\\"jobID\\\">{{- i18n[\\\"report.scheduling.list.header.id\\\"] }}</p>\\n\\t\\t\\t\\t\\t\\t\\t<p class=\\\"jobOwner\\\">{{- i18n[\\\"report.scheduling.list.header.owner\\\"] }}</p>\\n\\t\\t\\t\\t\\t\\t\\t<p class=\\\"jobState\\\">{{- i18n[\\\"report.scheduling.list.header.state\\\"] }}</p>\\n\\t\\t\\t\\t\\t\\t</div>\\n\\t\\t\\t\\t\\t\\t<div class=\\\"column four\\\">\\n\\t\\t\\t\\t\\t\\t\\t<p class=\\\"lastRanDate\\\">{{- i18n[\\\"report.scheduling.list.header.prevFireTime\\\"] }}</p>\\n\\n\\t\\t\\t\\t\\t\\t\\t<p class=\\\"nextRunDate\\\">{{- i18n[\\\"report.scheduling.list.header.nextFireTime\\\"] }}</p>\\n\\t\\t\\t\\t\\t\\t</div>\\n\\t\\t\\t\\t\\t\\t<div class=\\\"column five\\\">\\n\\t\\t\\t\\t\\t\\t\\t<p class=\\\"jobEnabled\\\">{{- i18n[\\\"report.scheduling.list.label.enabled\\\"] }}</p>\\n\\t\\t\\t\\t\\t\\t</div>\\n\\t\\t\\t\\t\\t</div>\\n\\t\\t\\t\\t</li>\\n\\t\\t\\t</ul>\\n\\t\\t</div>\\n\\n\\t\\t<div class=\\\"body\\\" id=\\\"jobsSummaryContainer\\\">\\n\\t\\t\\t<div name=\\\"jobsContainer\\\" class=\\\"body\\\"></div>\\n\\t\\t</div>\\n\\t</div>\\n</div>\\n\";","export default \"<div class=\\\"pageHeader \\\">\\n    <div class=\\\"pageHeader-title\\\">\\n        <div class=\\\"pageHeader-title-icon\\\">\\n            <span class=\\\"icon scheduledJobs\\\"></span>\\n        </div>\\n        <div class=\\\"pageHeader-title-text\\\">{{- i18n[\\\"report.scheduling.list.header\\\"] }}</div>\\n    </div>\\n    <div class=\\\"pageHeader-subtitle\\\">\\n        <div class=\\\"pageHeader-subtitle-path\\\">\\n            <span class=\\\"pageHeader-subtitle-path-text\\\">{{- reportUri }}</span>\\n        </div>\\n    </div>\\n</div>\\n<div class=\\\"page column decorated primary listOfJobs singleReportView\\\">\\n    <js-templateNonce></js-templateNonce>\\n    <div class=\\\"content\\\">\\n        <div class=\\\"subheader\\\">\\n            <div class=\\\"toolbar\\\">\\n                <ul class=\\\"list buttonSet\\\">\\n                    <li class=\\\"node open\\\">\\n                        <ul class=\\\"list buttonSet\\\">\\n                            <li class=\\\"leaf\\\">\\n                                <button name=\\\"backButton\\\" class=\\\"button capsule text up\\\">\\n                                    <span class=\\\"wrap\\\">{{- i18n[\\\"report.scheduling.list.button.back\\\"] }}</span>\\n                                    <span class=\\\"icon\\\"></span>\\n                                </button>\\n                            </li>\\n                            <li class=\\\"leaf\\\">\\n                                <button name=\\\"scheduleJob\\\" class=\\\"button capsule text first up\\\">\\n                                    <span class=\\\"wrap\\\">{{- i18n[\\\"report.scheduling.list.button.new\\\"] }}</span>\\n                                    <span class=\\\"icon\\\"></span>\\n                                </button>\\n                            </li>\\n                            <li class=\\\"leaf\\\">\\n                                <button name=\\\"runJob\\\" class=\\\"button capsule text last up\\\">\\n                                    <span class=\\\"wrap\\\">{{- i18n[\\\"report.scheduling.list.button.now\\\"] }}</span>\\n                                    <span class=\\\"icon\\\"></span>\\n                                </button>\\n                            </li>\\n                            <li class=\\\"leaf\\\">\\n                                <button name=\\\"refreshList\\\" class=\\\"button capsule text up\\\">\\n                                    <span class=\\\"wrap\\\">{{- i18n[\\\"report.scheduling.list.button.refresh\\\"] }}</span>\\n                                    <span class=\\\"icon\\\"></span>\\n                                </button>\\n                            </li>\\n                        </ul>\\n                    </li>\\n                </ul>\\n            </div>\\n            <ul id=\\\"resultsListHeader\\\" class=\\\"list collapsible tabular jobs header\\\">\\n                <li id=\\\"\\\" class=\\\"jobs first leaf\\\">\\n                    <div class=\\\"wrap\\\">\\n                        <div class=\\\"column one\\\">\\n                            <p class=\\\"jobID\\\">{{- i18n[\\\"report.scheduling.list.header.id\\\"] }}</p>\\n                        </div>\\n                        <div class=\\\"column two\\\">\\n                            <p class=\\\"jobName\\\">{{- i18n[\\\"report.scheduling.list.header.label\\\"] }}</p>\\n                            <p class=\\\"jobOwner\\\">{{- i18n[\\\"report.scheduling.list.header.owner\\\"] }}</p>\\n                        </div>\\n                        <div class=\\\"column three\\\">\\n                            <p class=\\\"jobState\\\">{{- i18n[\\\"report.scheduling.list.header.state\\\"] }}</p>\\n                        </div>\\n                        <div class=\\\"column four\\\">\\n                            <p class=\\\"lastRanDate\\\">{{- i18n[\\\"report.scheduling.list.header.prevFireTime\\\"] }}</p>\\n                            <p class=\\\"nextRunDate\\\">{{- i18n[\\\"report.scheduling.list.header.nextFireTime\\\"] }}</p>\\n                        </div>\\n                        <div class=\\\"column five\\\">\\n                            <p class=\\\"jobEnabled\\\">{{- i18n[\\\"report.scheduling.list.label.enabled\\\"] }}</p>\\n                        </div>\\n                    </div>\\n                </li>\\n            </ul>\\n        </div>\\n\\n        <div class=\\\"body\\\">\\n            <div id=\\\"jobsSummaryContainer\\\">\\n                <div name=\\\"jobsContainer\\\" class=\\\"body\\\"></div>\\n            </div>\\n        </div>\\n    </div>\\n</div>\\n\";","export default \"<ul name=\\\"listOfJobs\\\" id=\\\"listOfJobs\\\" class=\\\"list collapsible tabular jobs sixColumn\\\">\\n\\n    <js-templateNonce></js-templateNonce>\\n</ul>\";","export default \"<div class=\\\"panel info nothingToDisplay centered_vert centered_horz\\\" id=\\\"nothingToDisplay\\\">\\n\\n    <js-templateNonce></js-templateNonce>\\n\\t<div class=\\\"content \\\">\\n\\t\\t<div class=\\\"header \\\">\\n\\t\\t\\t<div class=\\\"title\\\"></div>\\n\\t\\t</div>\\n\\t\\t<div class=\\\"body  \\\">\\n\\t\\t\\t<p id=\\\"nothingToDisplayMessage\\\" class=\\\"message\\\">\\n\\t\\t\\t\\t<span class=\\\"jr-mInstructor-icon jr-mIcon jr-mIconXLarge jr-message jr\\\"></span>\\n\\t\\t\\t\\t<span class=\\\"message-text\\\">{{- message }}</span>\\n\\t\\t\\t</p>\\n\\t\\t</div>\\n\\t</div>\\n</div>\";","/*\n * Copyright (C) 2005 - 2022 TIBCO Software Inc. All rights reserved.\n * http://www.jaspersoft.com.\n *\n * Unless you have purchased a commercial license agreement from Jaspersoft,\n * the following license terms apply:\n *\n * This program is free software: you can redistribute it and/or modify\n * it under the terms of the GNU Affero General Public License as\n * published by the Free Software Foundation, either version 3 of the\n * License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the\n * GNU Affero General Public License for more details.\n *\n * You should have received a copy of the GNU Affero General Public License\n * along with this program. If not, see <http://www.gnu.org/licenses/>.\n */\n\nimport _ from 'underscore';\nimport i18n from '../../i18n/all.properties';\nimport ResourceModel from 'bi-repository/src/bi/repository/model/RepositoryResourceModel';\nimport DialogWithModelInputValidation from 'js-sdk/src/common/component/dialog/DialogWithModelInputValidation';\nimport saveDialogTemplate from './template/saveDialogTemplate.htm';\nimport $ from 'jquery';\n\nvar _savedOptions = {};\n// object used to save options which came to us\nexport default DialogWithModelInputValidation.extend({\n    theDialogIsOpen: false,\n    saveDialogTemplate: saveDialogTemplate,\n    constructor: function (options) {\n        options || (options = {});\n        _savedOptions = _.extend({}, options);\n        var model = this.extendModel(options.model);\n        var saveButtonLabel = this._getLabelForSaveButton(model);\n        var cancelButtonLabel = 'report.scheduling.saveDialog.cancel';    // TODO: replace this dialog with newer version (details see in 'DialogWithModelInputValidation' file)\n        // TODO: replace this dialog with newer version (details see in 'DialogWithModelInputValidation' file)\n        DialogWithModelInputValidation.prototype.constructor.call(this, {\n            skipLocation: !!_savedOptions.skipLocation,\n            modal: true,\n            model: model,\n            resizable: true,\n            additionalCssClasses: 'schedulerSaveDialog jr-uWidth-425px jr-uHeight-275px',\n            title: i18n['report.scheduling.saveDialog.save'],\n            content: _.template(this.saveDialogTemplate, {\n                i18n: i18n,\n                model: _.extend({}, model.attributes),\n                skipLocation: !!_savedOptions.skipLocation,\n                isEmbedded: _savedOptions.isEmbedded,\n                isEditMode: _savedOptions.isEditMode\n            }),\n            buttons: [\n                {\n                    label: i18n[saveButtonLabel],\n                    action: 'save',\n                    primary: true\n                },\n                {\n                    label: i18n[cancelButtonLabel],\n                    action: 'cancel',\n                    primary: false\n                }\n            ]\n        });\n        this.on('button:save', _.bind(this._onSaveDialogSaveButtonClick, this));\n        this.on('button:cancel', _.bind(this._onSaveDialogCancelButtonClick, this));\n    },\n    initialize: function () {\n        DialogWithModelInputValidation.prototype.initialize.apply(this, arguments);\n    },\n    restoreModel: function () {\n        if (this.originalModelValidation) {\n            this.model.validation = this.originalModelValidation;\n        }\n    },\n    extendModel: function (model) {\n        this.originalModelValidation = model.validation;\n        model.validation = _.extend({}, ResourceModel.prototype.validation, {\n            name: null,\n            parentFolderUri: null,\n            label: [\n                {\n                    required: true,\n                    msg: i18n['report.scheduling.saveDialog.validation.not.empty.label']\n                },\n                {\n                    maxLength: ResourceModel.settings.LABEL_MAX_LENGTH,\n                    msg: i18n['report.scheduling.saveDialog.validation.too.long.label']\n                }\n            ],\n            description: [\n                { required: false },\n                {\n                    maxLength: ResourceModel.settings.DESCRIPTION_MAX_LENGTH,\n                    msg: i18n['report.scheduling.saveDialog.validation.too.long.description']\n                }\n            ]\n        });\n        return model;\n    },\n    startSaveDialog: function () {\n        this._openDialog();\n    },\n    closeDialog: function () {\n        this.restoreModel();\n        this._closeDialog();\n    },\n    _closeSchedulerOverlay: function () {\n        window.parent.document.getElementsByClassName(\"schedulerOverlayIframe\")[0].hide();\n        window.parent.document.getElementById(\"dialogDimmer\").hide();\n    },\n    _openDialog: function () {\n        if (this.theDialogIsOpen) {\n            return;\n        }\n        this.bindValidation();\n        DialogWithModelInputValidation.prototype.open.apply(this, arguments);\n        this.$contentContainer.find('[name=label]').focus();\n        this.theDialogIsOpen = true;\n    },\n    _closeDialog: function () {\n        if (!this.theDialogIsOpen) {\n            return;\n        }\n        this.unbindValidation();\n        this.clearValidationErrors();\n        DialogWithModelInputValidation.prototype.close.apply(this, arguments);\n        this.theDialogIsOpen = false;\n    },\n    _getLabelForSaveButton: function () {\n        return 'report.scheduling.saveDialog.save';\n    },\n    _onDialogResize: function () {\n        var self = this;\n        var heightReservation = 60;\n        var otherElementsHeight = 0;\n        var descriptionArea = this.$contentContainer.find('textarea');\n        var dialogBody = this.$contentContainer.closest('.jr-mDialog > .jr-mDialog-body');\n        this.$contentContainer.children().not(descriptionArea).each(function () {\n            otherElementsHeight += self.$(this).outerHeight(true);\n        });\n        descriptionArea.height(dialogBody.outerHeight(true) - otherElementsHeight - heightReservation);\n    },\n    _onSaveDialogCancelButtonClick: function () {\n        this.restoreModel();\n        this._closeDialog();\n    },\n    _onSaveDialogSaveButtonClick: function () {\n        const { controlsController } = this.model;\n        if (!this.model.isValid(true)) {\n            return;\n        }\n        if (controlsController && controlsController.viewModel) {\n            $(document).trigger('viewmodel:values:changed');\n        }\n        this.performSave();\n    },\n    performSave: function () {\n        var self = this;\n        this.model.checkSaveValidation({ editMode: _savedOptions.isEditMode }).done(function () {\n            self.model.save({}, {\n                success: _.bind(self._saveSuccessCallback, self),\n                error: _.bind(self._saveErrorCallback, self)\n            });\n        }).fail(function () {\n            self.trigger('saveValidationFailed');\n        });\n    },\n    _saveSuccessCallback: function (model, data) {\n        this._closeDialog();\n        if (_.isFunction(_savedOptions.onSaveDone)) {\n            _savedOptions.onSaveDone();\n        }\n        _savedOptions.schedulerAccelator && this._closeSchedulerOverlay();\n    },\n    _saveErrorCallback: function (model, xhr, options) {\n        var self = this, response = false, errorHandled = false;\n        try {\n            response = JSON.parse(xhr.responseText);\n        } catch (e) {\n        }\n        if (response.error) {\n            response = response.error;\n        }\n        if (!_.isArray(response)) {\n            response = [response];\n        }\n        _.each(response, function (error) {\n            if (error.field !== 'label') {\n                return;\n            }\n            var message = '';\n            if (error.errorCode === 'error.not.empty') {\n                message = i18n['error.not.empty.label'];\n            }\n            if (error.errorCode === 'version.not.match') {\n                message = i18n['report.scheduling.resource.exists'];\n            }\n            if (error.errorCode === 'mandatory.parameter.error') {\n                message = i18n['report.scheduling.saveDialog.parameterIsMissing'];\n            }\n            if (message === '') {\n                return;\n            }\n            self.invalidField('[name=label]', message);\n            errorHandled = true;\n        });\n        if (errorHandled === false) {\n            if (_.isFunction(_savedOptions.onSaveFail)) {\n                _savedOptions.onSaveFail(model, xhr, options);\n            }\n        }\n    }\n});\n","export default \"<label title=\\\"{{- i18n['report.scheduling.saveDialog.jobNameTitle']}}\\\" class=\\\"control input text \\\">\\n\\n    <js-templateNonce></js-templateNonce>\\n\\t<span class=\\\"wrap\\\">{{- i18n['report.scheduling.saveDialog.jobName']}} ({{- i18n['required.field']}}):</span>\\n\\t<input type=\\\"text\\\" value=\\\"{{- model.label }}\\\" name=\\\"label\\\">\\n\\t<span class=\\\"message warning\\\"></span>\\n</label>\\n\\n<label title=\\\"{{- i18n['report.scheduling.saveDialog.descriptionTitle']}}\\\" class=\\\"control textArea\\\">\\n\\t<span class=\\\"wrap\\\">{{- i18n['report.scheduling.saveDialog.description']}}</span>\\n\\t<textarea type=\\\"text\\\" name=\\\"description\\\">{{- model.description }}</textarea>\\n\\t<span class=\\\"message warning\\\"></span>\\n</label>\\n\";","export default \"<div class=\\\"section calendarBlock\\\">\\n\\n    <js-templateNonce></js-templateNonce>\\n\\t<div id=\\\"holidayCalendar\\\" class=\\\"section holidayCalendar\\\">\\n\\t\\t<h4 class=\\\"title\\\">\\n\\t\\t\\t{{- i18n[\\\"report.scheduling.job.edit.holidays\\\"] }}\\n\\t\\t</h4>\\n\\t\\t<fieldset class=\\\"group first\\\">\\n\\t\\t\\t<label class=\\\"control twoLine\\\">\\n\\t\\t\\t\\t\\t\\t<span class=\\\"wrap\\\">\\n\\t\\t\\t\\t\\t\\t\\t{{- i18n[\\\"report.scheduling.job.edit.calendar.ofdates.toexclude\\\"] }}:\\n\\t\\t\\t\\t\\t\\t</span>\\n\\t\\t\\t\\t<select name=\\\"calendarSelect\\\"></select>\\n\\t\\t\\t</label>\\n\\t\\t</fieldset>\\n\\t</div>\\n</div>\\n\";","/*\n * Copyright (C) 2005 - 2022 TIBCO Software Inc. All rights reserved.\n * http://www.jaspersoft.com.\n *\n * Unless you have purchased a commercial license agreement from Jaspersoft,\n * the following license terms apply:\n *\n * This program is free software: you can redistribute it and/or modify\n * it under the terms of the GNU Affero General Public License as\n * published by the Free Software Foundation, either version 3 of the\n * License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the\n * GNU Affero General Public License for more details.\n *\n * You should have received a copy of the GNU Affero General Public License\n * along with this program. If not, see <http://www.gnu.org/licenses/>.\n */\n\nimport $ from 'jquery';\nimport _ from 'underscore';\nimport i18n from '../../../i18n/all.properties';\nimport Backbone from 'backbone';\nimport holidayCalendarTemplate from '../../template/editor/holidayCalendarTemplate.htm';\n\nexport default Backbone.View.extend({\n\n    initialize: function () {\n        this.listenTo(this.collection, 'reset change', this.render);\n    },\n\n    render: function () {\n        const $calendarView = $(_.template(holidayCalendarTemplate, { i18n: i18n }));\n        this.$el.empty().append($calendarView);\n\n        const calendarBlock = this.$el.find('.calendarBlock');\n        const calendarSelect = this.$el.find('[name=calendarSelect]');\n\n        // who knows, maybe it has the 'disabled' class, so remove it.\n        calendarBlock.removeClass('disabled').find('select').attr('disabled', false);\n        calendarSelect.empty('');\n\n        let $option;\n\n        if (this.collection.size() === 0) {\n            $option = $('<option>').attr('value', '').text(i18n['report.scheduling.job.edit.trigger.calendars.nocalendars']);\n            calendarSelect.append($option);\n\n            // mark the whole block with class name as disabled\n            calendarBlock.addClass('disabled').find('select').attr('disabled', 'disabled');\n            return this;\n        }\n\n        $option = $('<option>').attr('value', '').text(i18n['label.none']);\n        calendarSelect.append($option);\n\n        this.collection.forEach((calendar) => {\n            $option = $('<option>').attr('value', calendar.id).text(calendar.id);\n            calendarSelect.append($option);\n        });\n\n        return this;\n    }\n});\n","/*\n * Copyright (C) 2005 - 2022 TIBCO Software Inc. All rights reserved.\n * http://www.jaspersoft.com.\n *\n * Unless you have purchased a commercial license agreement from Jaspersoft,\n * the following license terms apply:\n *\n * This program is free software: you can redistribute it and/or modify\n * it under the terms of the GNU Affero General Public License as\n * published by the Free Software Foundation, either version 3 of the\n * License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the\n * GNU Affero General Public License for more details.\n *\n * You should have received a copy of the GNU Affero General Public License\n * along with this program. If not, see <http://www.gnu.org/licenses/>.\n */\n\nimport Backbone from 'backbone';\nimport config from 'js-sdk/src/jrs.configs';\n\nexport default Backbone.Model.extend({ urlRoot: config.contextPath + '/rest_v2/jobs/calendars' });\n","/*\n * Copyright (C) 2005 - 2022 TIBCO Software Inc. All rights reserved.\n * http://www.jaspersoft.com.\n *\n * Unless you have purchased a commercial license agreement from Jaspersoft,\n * the following license terms apply:\n *\n * This program is free software: you can redistribute it and/or modify\n * it under the terms of the GNU Affero General Public License as\n * published by the Free Software Foundation, either version 3 of the\n * License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the\n * GNU Affero General Public License for more details.\n *\n * You should have received a copy of the GNU Affero General Public License\n * along with this program. If not, see <http://www.gnu.org/licenses/>.\n */\n\nimport $ from 'jquery';\nimport Backbone from 'backbone';\nimport config from 'js-sdk/src/jrs.configs';\nimport HolidayCalModel from '../../scheduler/model/HolidayCal';\n\nexport default Backbone.Collection.extend({\n    // url for fetching collection\n    url: config.contextPath + '/rest_v2/jobs/calendars',\n\n    // collection model\n    model: HolidayCalModel,\n\n    // parse response to adjust fields usage\n    parse: function (response) {\n        const models = [];\n        if (response && response.calendarName) {\n            $.each(response.calendarName, function (index, value) {\n                models.push({ id: value });\n            });\n        }\n        return models;\n    }\n});\n","/*\n * Copyright (C) 2005 - 2022 TIBCO Software Inc. All rights reserved.\n * http://www.jaspersoft.com.\n *\n * Unless you have purchased a commercial license agreement from Jaspersoft,\n * the following license terms apply:\n *\n * This program is free software: you can redistribute it and/or modify\n * it under the terms of the GNU Affero General Public License as\n * published by the Free Software Foundation, either version 3 of the\n * License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the\n * GNU Affero General Public License for more details.\n *\n * You should have received a copy of the GNU Affero General Public License\n * along with this program. If not, see <http://www.gnu.org/licenses/>.\n */\n\nimport $ from 'jquery';\nimport _ from 'underscore';\nimport i18n from '../../../i18n/all.properties';\nimport config from 'js-sdk/src/jrs.configs';\nimport Backbone from 'backbone';\nimport DateAndTimePicker from 'js-sdk/src/components/dateAndTime/DateAndTimePicker';\nimport HolydayCalView from './HolidayCalView';\nimport HolidayCalsCollection from '../../collection/HolidayCalsCollection';\nimport moment from 'moment';\n\nimport scheduleTabTemplate from '../../template/editor/scheduleTabTemplate.htm';\n\nconst jqueryDateFormat = config.calendar.timepicker.dateFormat;\nconst jqueryTimeFormat = config.calendar.timepicker.timeFormat.replace(':ss', '');\n\n// in Scheduler we don't use \"seconds\", so momentjs should not take seconds into consideration\nexport default Backbone.View.extend({\n    // view events\n    events: {\n        'change [name=startType]': 'setStartType',\n        'change [name=startDate]': 'setStartDate',\n        'change [name=schedulerTimeZone]': 'setTimeZone',\n        'change [name=recurrenceType]': 'setRecurrenceType',\n        'change [name=recurrenceInterval]': 'setRecurrenceInterval',\n        'change [name=recurrenceIntervalUnit]': 'setRecurrenceIntervalUnit',\n        'change [name=endat]': 'setEnDat',\n        'change [name=occurrenceCount]': 'setOccurrenceCount',\n        'change [name=simpleEndDate]': 'setEndDate',\n        'change [name=calendarEndDate]': 'setEndDate',\n        'change [name=whichMonth]': 'monthRadioSelector',\n        'change [name=monthSelector]': 'setMonthSelector',\n        'change [name=whichDay]': 'dayRadioSelector',\n        'change [name=daySelector]': 'setDaySelector',\n        'change [name=datesInMonth]': 'setDatesInMonth',\n        'change [name=hours]': 'setHours',\n        'change [name=minutes]': 'setMinutes',\n        'change [name=calendarSelect]': 'setCalendar'\n    },\n\n    // initialize view\n    initialize: function () {\n        // Some calendars which are not used anymore\n        this.calCollection = new HolidayCalsCollection();\n        this.calView = new HolydayCalView({ collection: this.calCollection });\n\n        this.calCollection.fetch({\n            reset: true,\n            data: { calendarType: 'holiday' }\n        });\n\n        this.listenTo(this.model, 'change:trigger', this.triggerChanged);\n        this.listenTo(this.calCollection, 'reset change', this.calendarChanged);\n    },\n\n    render: function () {\n        this.setElement($(_.template(scheduleTabTemplate, {\n            _: _,\n            i18n: i18n,\n            timeZones: config.timeZones\n        })));\n        this.$el.find('[name=calendarBlockHolder]').append(this.calView.$el);\n        this.setupDatepickersOn();\n    },\n\n    setupDatepickersOn: function () {\n        this.$el.find(\".datepicker\").each((index, calendar) => {\n\n            const $calendar = $(calendar);\n\n            new DateAndTimePicker({\n                el: $calendar[0],\n                constrainInput: true,\n                dateFormat: jqueryDateFormat,\n                timeFormat: jqueryTimeFormat,\n                showOn: \"button\",\n                buttonText: \"\"\n            });\n\n            $calendar.next().addClass('button').addClass('picker');\n\n            this.listenTo(this.model, \"change:trigger\", () => {\n                const appTimeZone = moment.tz(this.model.get(\"trigger\").timezone).utcOffset();\n                $.datepicker._getInst($(calendar)[0]).settings.timepicker.timezone = appTimeZone;\n            });\n\n            // Prototype.js compatibility\n            $(calendar)[0].getValue = function () {\n                return $(this).val();\n            };\n        });\n    },\n\n    triggerChanged: function () {\n        // get trigger value\n        const trigger = this.model.get('trigger');\n        // set startType\n        this.$el.find('[name=startType]').filter('[value=' + trigger.startType + ']').prop('checked', true);\n        // set startDate\n        this.$el.find('[name=startDate]').val(trigger.startDate);\n        // set timezone\n        this.$el.find('[name=schedulerTimeZone]').val(trigger.timezone);\n        // set recurrenceType\n        this.$el.find('[name=recurrenceType]').val(trigger.type);\n        this.$el.find('fieldset[data-recurrence]').addClass('hidden');\n        this.$el.find('fieldset[data-recurrence=\"' + trigger.type + '\"]').removeClass('hidden');\n        if (trigger.type === 'none') {\n            this.$el.find('[name=calendarBlockHolder]').addClass('hidden');\n        }\n        if (trigger.type === 'simple') {\n            // set recurrenceInterval\n            this.$el.find('[name=recurrenceInterval]').val(trigger.recurrenceInterval);\n            // set recurrenceIntervalUnit\n            this.$el.find('[name=recurrenceIntervalUnit]').val(trigger.recurrenceIntervalUnit);\n            // set repeat logic\n            this.$el.find('[name=endat]').filter('[value=' + trigger.radioEndDate + ']').prop('checked', true);\n            this.$el.find('[name=occurrenceCount]').val(trigger.occurrenceCount);\n            this.$el.find('[name=simpleEndDate]').val(trigger.endDate);\n            this.$el.find('[name=calendarBlockHolder]').removeClass('hidden');\n            this.$el.find('[name=calendarSelect]').val(trigger.calendarName);\n        }\n        if (trigger.type === 'calendar') {\n            // set calendar months\n            this.$el.find('[name=whichMonth]').filter('[value=' + trigger.radioWhichMonth + ']').prop('checked', true);\n            this.$el.find('[name=monthSelector]').val(trigger.months.month);\n            // set calendar days\n            this.$el.find('[name=whichDay]').filter('[value=' + trigger.radioWhichDay + ']').prop('checked', true);\n            this.$el.find('[name=daySelector]').val(trigger.weekDays.day);\n            this.$el.find('[name=datesInMonth]').val(trigger.monthDays);\n            this.$el.find('[name=hours]').val(trigger.hours);\n            this.$el.find('[name=minutes]').val(trigger.minutes);\n            this.$el.find('[name=calendarEndDate]').val(trigger.endDate);\n            this.$el.find('[name=calendarBlockHolder]').removeClass('hidden');\n            this.$el.find('[name=calendarSelect]').val(trigger.calendarName);\n        }\n    },\n\n    calendarChanged: function () {\n        // calendar might be changed (and re-rendered by 'calView'), and in such case we'd like to\n        // update the current selected value for calendar\n        const trigger = this.model.get('trigger');\n        if (!trigger) {\n            // since this event might occur before the model and the trigger is available,\n            // we just need to exit because there is nothing to do right now.\n            return;\n        }\n        this.$el.find('[name=calendarSelect]').val(trigger.calendarName);\n    },\n\n    // trigger section changed\n    setStartType: function (event) {\n        this.model.update('trigger', { startType: $(event.target).val() });\n    },\n\n    // setter for startDate\n    setStartDate: function (event) {\n        this.model.update('trigger', {\n            startType: '2',\n            startDate: $(event.target).val()\n        });\n    },\n\n    // setter for timezone\n    setTimeZone: function (event) {\n        this.model.update('trigger', { timezone: $(event.target).val() });\n    },\n\n    // setter for recurrence type\n    setRecurrenceType: function (event) {\n        this.model.update('trigger', { type: $(event.target).val() });\n    },\n\n    // setter for recurrence interval\n    setRecurrenceInterval: function (event) {\n        this.model.update('trigger', { recurrenceInterval: $(event.target).val() });\n    },\n\n    // setter for recurrence interval units\n    setRecurrenceIntervalUnit: function (event) {\n        this.model.update('trigger', { recurrenceIntervalUnit: $(event.target).val() });\n    },\n\n    // setter for repeat logic\n    setEnDat: function (event) {\n        this.model.update('trigger', { radioEndDate: $(event.target).val() });\n    },\n\n    // setter for occurrenceCount\n    setOccurrenceCount: function (event) {\n        this.model.update('trigger', { occurrenceCount: $(event.target).val() });\n    },\n\n    // setter for end date\n    setEndDate: function (event) {\n        this.model.update('trigger', { endDate: $(event.target).val() });\n    },\n\n    // set month in calendar view\n    monthRadioSelector: function (event) {\n        this.model.update('trigger', { radioWhichMonth: $(event.target).val() });\n    },\n\n    // set month selector\n    setMonthSelector: function (event) {\n        const value = $(event.target).val() || [];\n        for (let i = 0, l = value.length; i < l; i++)\n            value[i] = parseInt(value[i]);\n        this.model.update('trigger', { months: { month: value } });\n    },\n\n    // set which day\n    dayRadioSelector: function (event) {\n        this.model.update('trigger', { radioWhichDay: $(event.target).val() });\n    },\n\n    // set day selector\n    setDaySelector: function (event) {\n        const value = $(event.target).val() || [];\n        for (let i = 0, l = value.length; i < l; i++)\n            value[i] = parseInt(value[i]);\n        this.model.update('trigger', { weekDays: { day: value } });\n    },\n\n    setDatesInMonth: function (event) {\n        this.model.update('trigger', { monthDays: $(event.target).val() });\n    },\n\n    setHours: function (event) {\n        this.model.update('trigger', { hours: $(event.target).val() });\n    },\n\n    setMinutes: function (event) {\n        this.model.update('trigger', { minutes: $(event.target).val() });\n    },\n\n    setCalendar: function (event) {\n        this.model.update('trigger', { calendarName: $(event.target).val() });\n    }\n});\n","export default \"<div class=\\\"scheduleTab\\\">\\n\\n    <js-templateNonce></js-templateNonce>\\n\\t<div class=\\\"neverFire\\\">\\n\\t\\t<input type=\\\"text\\\" name=\\\"triggerWillNeverFire\\\" class=\\\"hidden\\\">\\n\\n\\t\\t<div data-field=\\\"triggerWillNeverFire\\\" class=\\\"warning message\\\"></div>\\n\\t</div>\\n\\n\\t<!-- *START, SCHEDULE START SECTION -->\\n\\t<div id=\\\"scheduleStart\\\" class=\\\"section\\\">\\n\\t\\t<h4 class=\\\"title\\\">\\n\\t\\t\\t{{- i18n[\\\"report.scheduling.job.edit.schedulestart\\\"] }}\\n\\t\\t</h4>\\n\\t\\t<!-- *START JOB GROUP -->\\n\\t\\t<fieldset id=\\\"jobCommon\\\" class=\\\"group first\\\">\\n\\t\\t\\t<legend><span>\\n\\t\\t\\t\\t{{- i18n[\\\"report.scheduling.job.edit.startdate\\\"] }}:\\n\\t\\t\\t</span></legend>\\n\\t\\t\\t<ul class=\\\"list inputSet\\\">\\n\\t\\t\\t\\t<li class=\\\"leaf\\\">\\n\\t\\t\\t\\t\\t<div class=\\\"control radio\\\">\\n\\t\\t\\t\\t\\t\\t<label for=\\\"startImmediately\\\" class=\\\"wrap\\\">\\n\\t\\t\\t\\t\\t\\t\\t{{- i18n[\\\"report.scheduling.job.edit.trigger.start.immediately\\\"] }}\\n\\t\\t\\t\\t\\t\\t</label>\\n\\t\\t\\t\\t\\t\\t<input id=\\\"startImmediately\\\" name=\\\"startType\\\" type=\\\"radio\\\" value=\\\"1\\\">\\n\\t\\t\\t\\t\\t</div>\\n\\t\\t\\t\\t</li>\\n\\t\\t\\t\\t<li class=\\\"leaf last\\\">\\n\\t\\t\\t\\t\\t<div id=\\\"startDateLabel\\\" class=\\\"control radio twoLine\\\">\\n\\t\\t\\t\\t\\t\\t<label for=\\\"startDate\\\" class=\\\"wrap\\\">\\n\\t\\t\\t\\t\\t\\t\\t{{- i18n[\\\"report.scheduling.job.edit.onspecificdate\\\"] }}:\\n\\t\\t\\t\\t\\t\\t</label>\\n\\t\\t\\t\\t\\t\\t<input id=\\\"startDate\\\" name=\\\"startType\\\" type=\\\"radio\\\" value=\\\"2\\\">\\n\\n\\t\\t\\t\\t\\t\\t<div id=\\\"startOn\\\" class=\\\"control picker inline\\\">\\n\\t\\t\\t\\t\\t\\t\\t<input type=\\\"text\\\" name=\\\"startDate\\\" class=\\\"datepicker\\\">\\n\\n\\t\\t\\t\\t\\t\\t\\t<div data-field=\\\"startDate\\\" class=\\\"warning message\\\"></div>\\n\\t\\t\\t\\t\\t\\t</div>\\n\\t\\t\\t\\t\\t</div>\\n\\t\\t\\t\\t</li>\\n\\t\\t\\t</ul>\\n\\t\\t</fieldset>\\n\\t\\t<!-- TIME ZONE GROUP -->\\n\\t\\t<fieldset id=\\\"timeZone\\\" class=\\\"group\\\">\\n\\t\\t\\t<label class=\\\"control select inline twoLine\\\">\\n\\t\\t\\t\\t<span class=\\\"wrap\\\">\\n\\t\\t\\t\\t\\t{{- i18n[\\\"report.scheduling.job.edit.trigger.label.timezone\\\"] }}:\\n\\t\\t\\t\\t</span>\\n\\t\\t\\t\\t<select name=\\\"schedulerTimeZone\\\">\\n\\t\\t\\t\\t\\t{{\\n\\t\\t\\t\\t\\t\\t_.each(timeZones, function(zone) {\\n\\t\\t\\t\\t\\t\\t}}\\n\\t\\t\\t\\t\\t\\t\\t<option value=\\\"{{- zone.value }}\\\">\\n\\t\\t\\t\\t\\t\\t\\t\\t{{- zone.title }}\\n\\t\\t\\t\\t\\t\\t\\t</option>\\n\\t\\t\\t\\t\\t\\t{{\\n\\t\\t\\t\\t\\t\\t});\\n\\t\\t\\t\\t\\t}}\\n\\t\\t\\t\\t</select>\\n\\t\\t\\t</label>\\n\\t\\t</fieldset>\\n\\t</div>\\n\\t<!-- *END, SCHEDULE START SECTION -->\\n\\n\\n\\t<!-- *START, RECURRENCE SECTION -->\\n\\t<div id=\\\"scheduleRecurrence\\\" class=\\\"section\\\">\\n\\t\\t<h4 class=\\\"title\\\">\\n\\t\\t\\t{{- i18n[\\\"report.scheduling.job.edit.trigger.recurrence\\\"] }}\\n\\t\\t</h4>\\n\\n\\t\\t<!-- RECURRENCE TYPE GROUP -->\\n\\t\\t<fieldset id=\\\"recurrenceSelector\\\" class=\\\"group first\\\">\\n\\t\\t\\t<label class=\\\"control select inline twoLine\\\">\\n\\t\\t\\t\\t<span class=\\\"wrap\\\">\\n\\t\\t\\t\\t\\t{{- i18n[\\\"report.scheduling.job.edit.recurrencetype\\\"] }}:\\n\\t\\t\\t\\t</span>\\n\\t\\t\\t\\t<select name=\\\"recurrenceType\\\">\\n\\t\\t\\t\\t\\t<option value=\\\"none\\\">{{- i18n[\\\"report.scheduling.job.edit.recurrencetype.none\\\"] }}</option>\\n\\t\\t\\t\\t\\t<option value=\\\"simple\\\">{{- i18n[\\\"report.scheduling.job.edit.recurrencetype.simple\\\"] }}</option>\\n\\t\\t\\t\\t\\t<option value=\\\"calendar\\\">{{- i18n[\\\"report.scheduling.job.edit.recurrencetype.calendar\\\"] }}</option>\\n\\t\\t\\t\\t</select>\\n\\t\\t\\t</label>\\n\\t\\t</fieldset>\\n\\n\\t\\t<!-- *START, simple recurrence repetition -->\\n\\t\\t<fieldset id=\\\"simpleRecurrenceInterval\\\" data-recurrence=\\\"simple\\\" class=\\\"group\\\">\\n\\t\\t\\t<label class=\\\"control select inline\\\">\\n\\t\\t\\t\\t<span class=\\\"wrap\\\">\\n\\t\\t\\t\\t\\t{{- i18n[\\\"report.scheduling.job.edit.repeatevery\\\"] }} ({{- i18n[\\\"required.field\\\"] }}):\\n\\t\\t\\t\\t</span>\\n\\n\\t\\t\\t\\t<div class=\\\"control inline\\\">\\n\\t\\t\\t\\t\\t<input name=\\\"recurrenceInterval\\\" type=\\\"text\\\">\\n\\n\\t\\t\\t\\t\\t<div data-field=\\\"recurrenceInterval\\\" class=\\\"warning message\\\"></div>\\n\\t\\t\\t\\t</div>\\n\\t\\t\\t</label>\\n\\t\\t\\t<select name=\\\"recurrenceIntervalUnit\\\">\\n\\t\\t\\t\\t<option value=\\\"MINUTE\\\">{{- i18n[\\\"job.interval.unit.minute.label\\\"] }}</option>\\n\\t\\t\\t\\t<option value=\\\"HOUR\\\">{{- i18n[\\\"job.interval.unit.hour.label\\\"] }}</option>\\n\\t\\t\\t\\t<option value=\\\"DAY\\\">{{- i18n[\\\"job.interval.unit.day.label\\\"] }}</option>\\n\\t\\t\\t\\t<option value=\\\"WEEK\\\">{{- i18n[\\\"job.interval.unit.week.label\\\"] }}</option>\\n\\t\\t\\t</select>\\n\\t\\t</fieldset>\\n\\t\\t<!-- *END, simple recurrence repetition -->\\n\\n\\t<!-- *START, CALENDAR RECURRENCE -->\\n\\t<!-- *START calendar recurrence repetition -->\\n\\n\\t\\t<fieldset id=\\\"calendarRecurrence\\\" data-recurrence=\\\"calendar\\\" class=\\\"group \\\">\\n\\t\\t\\t<ul class=\\\"list\\\">\\n\\t\\t\\t\\t<li id=\\\"months\\\" class=\\\"node\\\">\\n\\t\\t\\t\\t\\t<fieldset class=\\\"group\\\">\\n\\t\\t\\t\\t\\t\\t<legend>\\n\\t\\t\\t\\t\\t\\t<span>\\n\\t\\t\\t\\t\\t\\t\\t{{- i18n[\\\"report.scheduling.job.edit.trigger.label.months\\\"] }}:\\n\\t\\t\\t\\t\\t\\t</span>\\n\\t\\t\\t\\t\\t\\t</legend>\\n\\t\\t\\t\\t\\t\\t<ul class=\\\"list inputSet\\\">\\n\\t\\t\\t\\t\\t\\t\\t<li class=\\\"leaf\\\">\\n\\t\\t\\t\\t\\t\\t\\t\\t<div title=\\\"Select to recur every month\\\" class=\\\"control radio\\\">\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t<label for=\\\"everyMonth_radio\\\" class=\\\"wrap\\\">\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t{{- i18n[\\\"report.scheduling.job.edit.trigger.label.months.all\\\"] }}\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t</label>\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t<input type=\\\"radio\\\" name=\\\"whichMonth\\\" id=\\\"everyMonth_radio\\\" value=\\\"everyMonth\\\">\\n\\t\\t\\t\\t\\t\\t\\t\\t</div>\\n\\t\\t\\t\\t\\t\\t\\t</li>\\n\\t\\t\\t\\t\\t\\t\\t<li class=\\\"leaf\\\">\\n\\t\\t\\t\\t\\t\\t\\t\\t<div id=\\\"selectedMonths\\\" class=\\\"control radio twoLine\\\">\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t<label for=\\\"selectedMonths_radio\\\" class=\\\"wrap\\\">\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t{{- i18n[\\\"report.scheduling.job.edit.trigger.label.months.selected\\\"] }}:\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t</label>\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t<input id=\\\"selectedMonths_radio\\\" type=\\\"radio\\\" name=\\\"whichMonth\\\" value=\\\"selectedMonths\\\" />\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t<span class=\\\"control select multiple\\\">\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t<select name=\\\"monthSelector\\\" size=\\\"12\\\" class=\\\"monthSelector\\\" multiple=\\\"multiple\\\">\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t<option value=\\\"1\\\">{{- i18n[\\\"monts.label.jan\\\"] }}</option>\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t<option value=\\\"2\\\">{{- i18n[\\\"monts.label.feb\\\"] }}</option>\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t<option value=\\\"3\\\">{{- i18n[\\\"monts.label.mar\\\"] }}</option>\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t<option value=\\\"4\\\">{{- i18n[\\\"monts.label.apr\\\"] }}</option>\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t<option value=\\\"5\\\">{{- i18n[\\\"monts.label.may\\\"] }}</option>\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t<option value=\\\"6\\\">{{- i18n[\\\"monts.label.jun\\\"] }}</option>\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t<option value=\\\"7\\\">{{- i18n[\\\"monts.label.jul\\\"] }}</option>\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t<option value=\\\"8\\\">{{- i18n[\\\"monts.label.aug\\\"] }}</option>\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t<option value=\\\"9\\\">{{- i18n[\\\"monts.label.sep\\\"] }}</option>\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t<option value=\\\"10\\\">{{- i18n[\\\"monts.label.oct\\\"] }}</option>\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t<option value=\\\"11\\\">{{- i18n[\\\"monts.label.nov\\\"] }}</option>\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t<option value=\\\"12\\\">{{- i18n[\\\"monts.label.dec\\\"] }}</option>\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t</select>\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t<div data-field=\\\"monthSelector\\\" class=\\\"warning message\\\"></div>\\n\\t\\t\\t\\t\\t\\t\\t\\t</span>\\n\\t\\t\\t\\t\\t\\t\\t\\t</div>\\n\\t\\t\\t\\t\\t\\t\\t</li>\\n\\t\\t\\t\\t\\t\\t</ul>\\n\\t\\t\\t\\t\\t</fieldset>\\n\\t\\t\\t\\t</li>\\n\\n\\t\\t\\t\\t<li id=\\\"days\\\" class=\\\"node\\\">\\n\\t\\t\\t\\t\\t<fieldset class=\\\"group\\\">\\n\\t\\t\\t\\t\\t\\t<legend>\\n\\t\\t\\t\\t\\t\\t<span>\\n\\t\\t\\t\\t\\t\\t\\t{{- i18n[\\\"report.scheduling.job.edit.trigger.label.days\\\"] }}:\\n\\t\\t\\t\\t\\t\\t</span>\\n\\t\\t\\t\\t\\t\\t</legend>\\n\\t\\t\\t\\t\\t\\t<ul class=\\\"list inputSet\\\">\\n\\t\\t\\t\\t\\t\\t\\t<li class=\\\"leaf\\\">\\n\\t\\t\\t\\t\\t\\t\\t\\t<div class=\\\"control radio\\\">\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t<label for=\\\"everyDay_radio\\\" class=\\\"wrap\\\">\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t{{- i18n[\\\"report.scheduling.job.edit.trigger.label.days.all\\\"] }}\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t</label>\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t<input id=\\\"everyDay_radio\\\" type=\\\"radio\\\" name=\\\"whichDay\\\" value=\\\"everyDay\\\">\\n\\t\\t\\t\\t\\t\\t\\t\\t</div>\\n\\t\\t\\t\\t\\t\\t\\t</li>\\n\\t\\t\\t\\t\\t\\t\\t<li class=\\\"leaf\\\">\\n\\t\\t\\t\\t\\t\\t\\t\\t<div id=\\\"weekDays\\\" class=\\\"control radio twoLine\\\">\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t<label for=\\\"weekDays_radio\\\" class=\\\"wrap\\\">\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t{{- i18n[\\\"report.scheduling.job.edit.selecteddays\\\"] }}:\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t</label>\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t<input id=\\\"weekDays_radio\\\" type=\\\"radio\\\" name=\\\"whichDay\\\" value=\\\"selectedDays\\\" />\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t<span class=\\\"control select multiple\\\">\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t<select name=\\\"daySelector\\\" size=\\\"7\\\" class=\\\"daySelector\\\" multiple=\\\"multiple\\\">\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t<option value=\\\"1\\\">{{- i18n[\\\"week.days.label.sun\\\"] }}</option>\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t<option value=\\\"2\\\">{{- i18n[\\\"week.days.label.mon\\\"] }}</option>\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t<option value=\\\"3\\\">{{- i18n[\\\"week.days.label.tue\\\"] }}</option>\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t<option value=\\\"4\\\">{{- i18n[\\\"week.days.label.wed\\\"] }}</option>\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t<option value=\\\"5\\\">{{- i18n[\\\"week.days.label.thu\\\"] }}</option>\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t<option value=\\\"6\\\">{{- i18n[\\\"week.days.label.fri\\\"] }}</option>\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t<option value=\\\"7\\\">{{- i18n[\\\"week.days.label.sat\\\"] }}</option>\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t</select>\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t<div data-field=\\\"daySelector\\\" class=\\\"warning message\\\"></div>\\n\\t\\t\\t\\t\\t\\t\\t\\t</span>\\n\\t\\t\\t\\t\\t\\t\\t\\t</div>\\n\\t\\t\\t\\t\\t\\t\\t</li>\\n\\t\\t\\t\\t\\t\\t\\t<li class=\\\"leaf\\\">\\n\\t\\t\\t\\t\\t\\t\\t\\t<div id=\\\"monthDays\\\" class=\\\"control radio twoLine\\\">\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t<label for=\\\"monthDays_radio\\\" class=\\\"wrap\\\">\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t{{- i18n[\\\"report.scheduling.job.edit.datesinmonth\\\"] }}:\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t</label>\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t<input id=\\\"monthDays_radio\\\" type=\\\"radio\\\" name=\\\"whichDay\\\" value=\\\"datesInMonth\\\">\\n\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t<div class=\\\"control input inline text\\\">\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t<input id=\\\"theMonthDays\\\" name=\\\"datesInMonth\\\" type=\\\"text\\\" />\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t<p class=\\\"message hint\\\">\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t{{- i18n[\\\"report.scheduling.job.edit.enterdatesordateranges\\\"] }}\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t</p>\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t<div data-field=\\\"datesInMonth\\\" class=\\\"warning message\\\"></div>\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t</div>\\n\\t\\t\\t\\t\\t\\t\\t\\t</div>\\n\\t\\t\\t\\t\\t\\t\\t</li>\\n\\t\\t\\t\\t\\t\\t</ul>\\n\\t\\t\\t\\t\\t</fieldset>\\n\\t\\t\\t\\t</li>\\n\\n\\t\\t\\t\\t<li id=\\\"repeatTimes\\\" class=\\\"node\\\">\\n\\t\\t\\t\\t\\t<fieldset class=\\\"group\\\">\\n\\t\\t\\t\\t\\t\\t<legend>\\n\\t\\t\\t\\t\\t\\t<span>\\n\\t\\t\\t\\t\\t\\t\\t{{- i18n[\\\"report.scheduling.job.edit.trigger.recurrence.times\\\"] }}:\\n\\t\\t\\t\\t\\t\\t</span>\\n\\t\\t\\t\\t\\t\\t</legend>\\n\\t\\t\\t\\t\\t\\t<ul class=\\\"list inputSet\\\">\\n\\t\\t\\t\\t\\t\\t\\t<li class=\\\"leaf\\\">\\n\\t\\t\\t\\t\\t\\t\\t\\t<div class=\\\"control text twoLine\\\">\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t<label class=\\\"control input text\\\">\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t<span class=\\\"wrap\\\">\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t{{- i18n[\\\"report.scheduling.job.edit.trigger.label.hours\\\"] }} ({{- i18n[\\\"required.field\\\"] }}):\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t</span>\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t<input type=\\\"text\\\" name=\\\"hours\\\">\\n\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t<p class=\\\"message hint\\\">\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t{{- i18n[\\\"report.scheduling.job.edit.trigger.label.hours.tip\\\"] }}\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t</p>\\n\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t<div data-field=\\\"hours\\\" class=\\\"warning message\\\"></div>\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t</label>\\n\\t\\t\\t\\t\\t\\t\\t\\t</div>\\n\\t\\t\\t\\t\\t\\t\\t</li>\\n\\t\\t\\t\\t\\t\\t\\t<li class=\\\"leaf\\\">\\n\\t\\t\\t\\t\\t\\t\\t\\t<div class=\\\"control text twoLine\\\">\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t<label class=\\\"control input text\\\">\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t<span class=\\\"wrap\\\">\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t{{- i18n[\\\"report.scheduling.job.edit.trigger.label.minutes\\\"] }} ({{- i18n[\\\"required.field\\\"] }}):\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t</span>\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t<input type=\\\"text\\\" name=\\\"minutes\\\">\\n\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t<p class=\\\"message hint\\\">\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t{{- i18n[\\\"report.scheduling.job.edit.trigger.label.minutes.tip\\\"] }}\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t</p>\\n\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t<div data-field=\\\"minutes\\\" class=\\\"warning message\\\"></div>\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t</label>\\n\\t\\t\\t\\t\\t\\t\\t\\t</div>\\n\\t\\t\\t\\t\\t\\t\\t</li>\\n\\t\\t\\t\\t\\t\\t</ul>\\n\\t\\t\\t\\t\\t</fieldset>\\n\\t\\t\\t\\t</li>\\n\\t\\t\\t</ul>\\n\\t\\t</fieldset>\\n\\t\\t<!-- *END calendar recurrence repetition -->\\n\\t\\t<!-- *END, CALENDAR RECURRENCE -->\\n\\t</div>\\n\\n\\t<!-- *START simple recurrence end date -->\\n\\t<fieldset id=\\\"scheduleEndSimple\\\" class=\\\"section\\\" data-recurrence=\\\"simple\\\">\\n\\t\\t<h4 class=\\\"title\\\">\\n\\t\\t\\t{{- i18n[\\\"report.scheduling.job.edit.scheduleend\\\"] }}\\n\\t\\t</h4>\\n\\t\\t<fieldset data-recurrence=\\\"simple\\\" class=\\\"group first\\\">\\n\\t\\t\\t<legend class=\\\"\\\">\\n\\t\\t\\t\\t<span>\\n\\t\\t\\t\\t\\t{{- i18n[\\\"report.scheduling.job.edit.enddate\\\"] }}:\\n\\t\\t\\t\\t</span>\\n\\t\\t\\t</legend>\\n\\t\\t\\t<ul class=\\\"list inputSet\\\">\\n\\t\\t\\t\\t<li class=\\\"leaf\\\">\\n\\t\\t\\t\\t\\t<div class=\\\"control radio twoLine\\\">\\n\\t\\t\\t\\t\\t\\t<label for=\\\"fixedRepeat\\\" class=\\\"wrap\\\">\\n\\t\\t\\t\\t\\t\\t\\t{{- i18n[\\\"report.scheduling.job.edit.runasetnumberoftimes\\\"] }}\\n\\t\\t\\t\\t\\t\\t</label>\\n\\t\\t\\t\\t\\t\\t<span class=\\\"wrap\\\">\\n\\t\\t\\t\\t\\t\\t\\t{{- i18n[\\\"report.scheduling.job.edit.numberofruns\\\"] }}:\\n\\t\\t\\t\\t\\t\\t</span>\\n\\t\\t\\t\\t\\t\\t<input id=\\\"fixedRepeat\\\" type=\\\"radio\\\" name=\\\"endat\\\" value=\\\"numberOfTimes\\\">\\n\\t\\t                    <span class=\\\"control inline twoLine\\\">\\n\\t\\t                        <input type=\\\"text\\\" id=\\\"maxOccurrences\\\" name=\\\"occurrenceCount\\\">\\n\\t\\t                        <div data-field=\\\"occurrenceCount\\\" class=\\\"warning message\\\"></div>\\n\\t\\t                    </span>\\n\\t\\t\\t\\t\\t</div>\\n\\t\\t\\t\\t</li>\\n\\t\\t\\t\\t<li class=\\\"leaf\\\">\\n\\t\\t\\t\\t\\t<div id=\\\"calendarRepeatSet\\\" class=\\\"control radio twoLine\\\">\\n\\t\\t\\t\\t\\t\\t<label for=\\\"calendarRepeat\\\" class=\\\"wrap\\\">\\n\\t\\t\\t\\t\\t\\t\\t{{- i18n[\\\"report.scheduling.job.edit.rununtilaspecifieddate\\\"] }}:\\n\\t\\t\\t\\t\\t\\t</label>\\n\\t\\t\\t\\t\\t\\t<input id=\\\"calendarRepeat\\\" type=\\\"radio\\\" name=\\\"endat\\\" value=\\\"specificDate\\\">\\n\\t\\t                    <span id=\\\"repeatEndDate\\\" class=\\\"control picker inline twoline\\\">\\n\\t\\t                        <input type=\\\"text\\\" class=\\\"datepicker\\\" name=\\\"simpleEndDate\\\">\\n\\t\\t                        <div data-field=\\\"simpleEndDate\\\" class=\\\"warning message\\\"></div>\\n\\t\\t                    </span>\\n\\t\\t\\t\\t\\t</div>\\n\\t\\t\\t\\t</li>\\n\\t\\t\\t\\t<li class=\\\"leaf last\\\">\\n\\t\\t\\t\\t\\t<div class=\\\"control radio\\\">\\n\\t\\t\\t\\t\\t\\t<label for=\\\"indefiniteRepeat\\\" class=\\\"wrap\\\">\\n\\t\\t\\t\\t\\t\\t\\t{{- i18n[\\\"report.scheduling.job.edit.runindefinitely\\\"] }}\\n\\t\\t\\t\\t\\t\\t</label>\\n\\t\\t\\t\\t\\t\\t<input id=\\\"indefiniteRepeat\\\" type=\\\"radio\\\" name=\\\"endat\\\" value=\\\"indefinitely\\\">\\n\\t\\t\\t\\t\\t</div>\\n\\t\\t\\t\\t</li>\\n\\t\\t\\t</ul>\\n\\t\\t</fieldset>\\n\\t</fieldset>\\n\\t<!-- *END simple recurrence end date -->\\n\\t<!-- *END, SIMPLE RECURRENCE -->\\n\\n\\n\\n\\n\\n\\t<!-- *START calendar recurrence end date -->\\n\\t<fieldset id=\\\"calendarEnd\\\" class=\\\"section\\\" data-recurrence=\\\"calendar\\\">\\n\\t\\t<h4 class=\\\"title\\\">\\n\\t\\t\\t{{- i18n[\\\"report.scheduling.job.edit.scheduleend\\\"] }}\\n\\t\\t</h4>\\n\\t\\t<fieldset id=\\\"calendarEnd\\\" class=\\\"group first\\\">\\n\\t\\t\\t<label class=\\\"control twoLine\\\">\\n\\t\\t\\t\\t<span class=\\\"wrap\\\">\\n\\t\\t\\t\\t\\t{{- i18n[\\\"report.scheduling.job.edit.enddate\\\"] }}:\\n\\t\\t\\t\\t</span>\\n\\t\\t\\t        <span class=\\\"control picker\\\">\\n\\t\\t\\t            <input id=\\\"trigger_endDate_calendar\\\" name=\\\"calendarEndDate\\\" type=\\\"text\\\" class=\\\"datepicker\\\">\\n\\t\\t\\t            <div data-field=\\\"calendarEndDate\\\" class=\\\"warning message\\\"></div>\\n\\t\\t\\t        </span>\\n\\t\\t\\t</label>\\n\\t\\t</fieldset>\\n\\t</fieldset>\\n\\t<!-- *END calendar recurrence end date -->\\n\\n\\t<!-- *START holidays -->\\n\\t<div class=\\\"section\\\" name=\\\"calendarBlockHolder\\\">\\n\\t</div>\\n\\t<!-- *END holidays -->\\n\\n    <!-- The next input tag was added because of the issue https://jira.tibco.com/browse/JS-62403 which is based on bug\\n        https://bugs.chromium.org/p/chromium/issues/detail?id=914451\\n        in short: Chrome auto-fills with passwords any last input tag on the page, so to fix the issue we need to add\\n        an extra input tag.\\n        Please, if you reading this text, try to open the original issue and check it against without this extra tag,\\n        maybe it has been fixed and you can remove this hack.\\n     -->\\n    <input style=\\\"position: fixed; top: -999px; left: -999px;\\\" type=\\\"text\\\" />\\n</div>\\n\";","/*\n * Copyright (C) 2005 - 2022 TIBCO Software Inc. All rights reserved.\n * http://www.jaspersoft.com.\n *\n * Unless you have purchased a commercial license agreement from Jaspersoft,\n * the following license terms apply:\n *\n * This program is free software: you can redistribute it and/or modify\n * it under the terms of the GNU Affero General Public License as\n * published by the Free Software Foundation, either version 3 of the\n * License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the\n * GNU Affero General Public License for more details.\n *\n * You should have received a copy of the GNU Affero General Public License\n * along with this program. If not, see <http://www.gnu.org/licenses/>.\n */\n\n\n/**\n * @version: $Id$\n */\n\nimport '../../../controls/controls.options';\nimport '../../../controls/controls.controller';\n\nimport $ from 'jquery';\nimport _ from 'underscore';\nimport i18n from '../../../i18n/all.properties';\nimport config from 'js-sdk/src/jrs.configs';\nimport Backbone from 'backbone';\nimport parametersTabTemplate from '../../template/editor/parametersTabTemplate.htm';\nimport {ControlsBase} from \"../../../controls/controls.base\";\nimport {JRS} from \"../../../namespace/namespace\";\n\n_.extend(ControlsBase, config.inputControlsConstants);\n\nexport default Backbone.View.extend({\n\n    // initialize view\n    initialize: function(options) {\n\n        this.options = _.extend({}, options);\n\n        this.listenTo(this.model, \"change:source\", this.sourceChange);\n\n        // handle values change\n        $(document).on(\"viewmodel:values:changed\", _.bind(this.viewModelValuesChange, this));\n    },\n\n    render: function() {\n        this.setElement($(_.template(parametersTabTemplate, {\n            i18n: i18n,\n            config: config\n        })));\n    },\n\n    saveAsDialogButtonSaveClick: function() {\n        var self = this,\n            optionName = this.reportOptionsDialog.input.getValue(),\n            selectedData = this.model.controlsController.getViewModel().get('selection'),\n            overwrite = optionName === this.reportOptionsDialog.optionNameToOverwrite;\n\n        $.when(this.reportOptions.add(this.reportOptions.optionsUrl || this.reportOptions.url, optionName, selectedData, overwrite)).\n            done(function () {\n                self.reportOptionsDialog.hideWarning();\n                var container = self.reportOptions.getElem().parent();\n                if (container.length === 0) {\n                    container = self.$el.find('.saveCurrentValuesContainer');\n                    container.prepend(self.reportOptions.getElem());\n                }\n                self.reportOptionsDialog.hide();\n                delete self.reportOptionsDialog.optionNameToOverwrite;\n            }).fail(function(err){\n                try {\n                    var response = JSON.parse(err.responseText);\n                    if (response.errorCode === \"report.options.dialog.confirm.message\"){\n                        !overwrite && (self.reportOptionsDialog.optionNameToOverwrite = optionName);\n                    }\n                    self.reportOptionsDialog.showWarning(response.message);\n                } catch (e) {\n                // In this scenario security error is handled earlier, in errorHandler, so we can ignore exception here.\n                // Comment this because it will not work in IE, but can be uncommented for debug purpose.\n                // console.error(\"Can't parse server response: %s\", \"controls.core\", err.responseText);\n                }\n            });\n    },\n\n    sourceChange: function(model, value) {\n\n        // get url for report\n        var url = value && value.reportUnitURI;\n\n        // get parameters\n        var parameters = this.model.get('source').parameters;\n\n        // check for parameters\n        if (!parameters) {\n            return;\n        }\n\n        // go deeper in structure\n        var preSelectedParameterValues = parameters.parameterValues;\n\n        for(var item in preSelectedParameterValues) {\n            if (preSelectedParameterValues.hasOwnProperty(item)) {\n                if (preSelectedParameterValues[item] === null) {\n                    delete preSelectedParameterValues[item];\n                }\n            }\n        }\n\n        if (this.reportOptions) {\n            this.reportOptions.url = undefined;\n        }\n\n        // create controls controller\n        this.model.controlsController = new JRS.Controls.Controller({\n            reportUri: url,\n            reportOptionUri: '',\n            preSelectedData: preSelectedParameterValues\n        });\n\n        var self = this;\n        this.model.controlsController.fetchAndSetInputControlsState(preSelectedParameterValues).done(function(response){\n            if(response) {\n                self.trigger(\"IC_Displayed\");\n            }else{\n                self.trigger(\"failedToGet_IC\");\n            }\n        }).fail(function(){\n            self.trigger(\"failedToGet_IC\");\n        });\n    },\n    viewModelValuesChange: function() {\n        // update model\n        this.model.set('source', {\n            reportUnitURI: this.model.get('source').reportUnitURI,\n            parameters: {\n                parameterValues: this.model.controlsController.getViewModel().get('selection')\n            }\n        }, { validate: false, silent: true });\n    }\n\n});\n","export default \"<div class=\\\"parametersTab\\\">\\n\\n    <js-templateNonce></js-templateNonce>\\n\\n\\t{{ if (config.isProVersion) { }}\\n\\t<div class=\\\"saveCurrentValuesContainer\\\">\\n\\t\\t<button name=\\\"saveCurrentValuesButton\\\" id=\\\"save\\\" type=\\\"button\\\" class=\\\"button action up \\\">\\n\\t\\t\\t<span class=\\\"wrap\\\">{{- i18n['report.scheduling.job.edit.parameters.save'] }}</span><span class=\\\"icon\\\"></span>\\n\\t\\t</button>\\n\\t</div>\\n\\t{{ } }}\\n\\n\\t<ul class=\\\"list inputControls inputControlsContainer\\\" id=\\\"inputControlsContainer\\\"></ul>\\n\\n\\t<!-- The next block needed just to create standard for Scheduler behavior, when we are switching to the\\n\\ttab where the error happened. To indicate what on this tab an error happened we introduce dummy control, which may have\\n\\tspecial error class. The warning element is also dummy -->\\n\\t<label class=\\\"hidden\\\">\\n\\t\\t<input type=\\\"text\\\" name=\\\"parametersErrorNotifierStub\\\" class=\\\"\\\">\\n\\t\\t<span class=\\\"message warning\\\" data-field=\\\"parametersErrorNotifierStub\\\"></span>\\n\\t</label>\\n</div>\";","/*\n * Copyright (C) 2005 - 2022 TIBCO Software Inc. All rights reserved.\n * http://www.jaspersoft.com.\n *\n * Unless you have purchased a commercial license agreement from Jaspersoft,\n * the following license terms apply:\n *\n * This program is free software: you can redistribute it and/or modify\n * it under the terms of the GNU Affero General Public License as\n * published by the Free Software Foundation, either version 3 of the\n * License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the\n * GNU Affero General Public License for more details.\n *\n * You should have received a copy of the GNU Affero General Public License\n * along with this program. If not, see <http://www.gnu.org/licenses/>.\n */\n\nimport $ from 'jquery';\nimport _ from 'underscore';\nimport i18n from '../../../i18n/all.properties';\nimport config from 'js-sdk/src/jrs.configs';\nimport Backbone from 'backbone';\nimport outputTabTemplate from '../../template/editor/outputTabTemplate.htm';\nimport RepositoryChooserDialogFactory from 'bi-repository/src/bi/repository/dialog/resourceChooser/RepositoryChooserDialogFactory';\nimport repositoryResourceTypes from 'bi-repository/src/bi/repository/enum/repositoryResourceTypes';\nimport settings from '../../../settings/treeComponent.settings';\n\nexport default Backbone.View.extend({\n    events: {\n        'click .ftp-test': 'testFTPConnection',\n        'click [name=outputRepositoryButton]': 'outputRepositoryButtonClick',\n        'click [name=sshKeyPathButton]': 'sshKeyPathButtonClick',\n        'change [name=outputRepository]': 'fixUriInput',\n        'change [name=sshKeyPath]': 'fixUriInput'\n    },\n    binding: [\n        {\n            attr: 'baseOutputFilename',\n            control: 'baseOutputFilename'\n        },\n        {\n            attr: 'outputTimeZone',\n            control: 'timeZone'\n        },\n        {\n            attr: 'outputLocale',\n            control: 'outputLocale'\n        },\n        {\n            attr: 'outputFormats/outputFormat',\n            control: 'outputFormats'\n        },\n        {\n            attr: 'repositoryDestination/outputDescription',\n            control: 'outputDescription'\n        },\n        {\n            attr: 'repositoryDestination/overwriteFiles',\n            control: 'overwriteFiles'\n        },\n        {\n            attr: 'repositoryDestination/sequentialFilenames',\n            control: 'sequentialFilenames'\n        },\n        {\n            attr: 'repositoryDestination/timestampPattern',\n            control: 'timestampPattern'\n        },\n        {\n            attr: 'repositoryDestination',\n            control: 'timestampPattern',\n            depends: 'repositoryDestination/sequentialFilenames'\n        },\n        {\n            attr: 'repositoryDestination/saveToRepository',\n            control: 'outputToRepository'\n        },\n        {\n            attr: 'repositoryDestination',\n            control: 'outputRepository, outputRepositoryButton',\n            depends: 'repositoryDestination/saveToRepository'\n        },\n        {\n            attr: 'repositoryDestination/folderURI',\n            control: 'outputRepository'\n        },\n        {\n            attr: 'repositoryDestination',\n            control: 'outputHostFileSystem',\n            depends: 'repositoryDestination/outputLocalFolder',\n            disabled: !(config.enableSaveToHostFS === 'true' || config.enableSaveToHostFS === true)\n        },\n        {\n            attr: 'repositoryDestination/outputLocalFolder',\n            control: 'outputToHostFileSystem',\n            getter: function (value) {\n                if (false === value)\n                    return null;\n                return '';\n            },\n            setter: function (value) {\n                return value === '' || !!value;\n            }\n        },\n        {\n            attr: 'repositoryDestination/outputLocalFolder',\n            control: 'outputHostFileSystem'\n        },\n        {\n            attr: 'repositoryDestination/outputFTPInfo/enabled',\n            control: 'outputToFTPServer',\n            getter: function (value) {\n                if (value === false) {\n                    // clear the errors in this block in case when this block has some errors and user decided to disable it\n                    this.$el.find('#ftpServerOutput').find('.error').removeClass('error');\n                }\n                return value;\n            }\n        },\n        {\n            attr: 'repositoryDestination/outputFTPInfo',\n            control: 'ftpAddress, ftpDirectory, ftpUsername, ftpPassword, ftpTestButton, ftpPort, ftpProtocol, sshKeyEnabled, sshKeyPath, sshKeyPathButton, sshPassphrase',\n            depends: 'repositoryDestination/outputFTPInfo/enabled'\n        },\n        {\n            attr: 'repositoryDestination/outputFTPInfo/serverName',\n            control: 'ftpAddress'\n        },\n        {\n            attr: 'repositoryDestination/outputFTPInfo/folderPath',\n            control: 'ftpDirectory'\n        },\n        {\n            attr: 'repositoryDestination/outputFTPInfo/userName',\n            control: 'ftpUsername',\n            setter: function (value) {\n                if (value == 'anonymous')\n                    return null;\n                return value;\n            }\n        },\n        {\n            attr: 'repositoryDestination/outputFTPInfo/password',\n            control: 'ftpPassword'\n        },\n        {\n            attr: 'repositoryDestination/outputFTPInfo/port',\n            control: 'ftpPort'\n        },\n        {\n            attr: 'repositoryDestination/outputFTPInfo/type',\n            control: 'ftpProtocol',\n            setter: function (value) {\n                this.$el.find('.control[data-ftp-type]').addClass('hidden');\n                if (value && value === 'sftp') {\n                    this.$el.find('.control[data-ftp-type=sftp]').removeClass('hidden');\n                }\n                return value;\n            }\n        },\n        {\n            attr: 'repositoryDestination/outputFTPInfo/sshKeyEnabled',\n            control: 'sshKeyEnabled'\n        },\n        {\n            attr: 'repositoryDestination/outputFTPInfo/sshKey',\n            control: 'sshKeyPath'\n        },\n        {\n            attr: 'repositoryDestination/outputFTPInfo/sshPassphrase',\n            control: 'sshPassphrase'\n        },\n        {\n            attr: 'repositoryDestination/outputFTPInfo',\n            control: 'sshKeyPath, sshKeyPathButton, sshPassphrase',\n            depends: 'repositoryDestination/outputFTPInfo/sshKeyEnabled',\n            setter: function (value) {\n                return value && !!this.$el.find('[name=outputToFTPServer]').filter(':checked').map(function () {\n                    return $(this).val();\n                }).get()[0];\n            }\n        }\n    ],\n    // set available output formats from JRS xml config\n    availableFormats: config.availableReportJobOutputFormats || [],\n    // initialize view\n    initialize: function (options) {\n        this.options = _.extend({}, options);    // save link to context\n        // save link to context\n        var self = this;\n        this.model.on('change:repositoryDestination', function (model, value) {\n            var rp = model.get('repositoryDestination');\n            self.$el.find('[name=ftpPort]').val(rp.outputFTPInfo.port);    // self.$el.find(\"[name=ftpProtocol]\").val(rp.outputFTPInfo.type);\n        });\n    },\n    isFormatAvailable: function (formatName) {\n        return _.contains(this.availableFormats, formatName);\n    },\n    getFolderChooserDialog: function () {\n        if (this.folderChooserDialog) {\n            return this.folderChooserDialog;\n        }\n        var self = this;\n        var Dialog = RepositoryChooserDialogFactory.getDialog('folder');\n\n        this.folderChooserDialog = new Dialog({\n            treeBufferSize: parseInt(settings.treeLevelLimit, 10),\n            setMinSizeAsSize: true\n        });\n\n        this.listenTo(this.folderChooserDialog, 'close', function () {\n            var resourceUri;\n            if (!this.folderChooserDialog.selectedResource) {\n                return;\n            }\n            if (!this.folderChooserDialog.selectedResource.resourceUri) {\n                return;\n            }\n            resourceUri = this.folderChooserDialog.selectedResource.resourceUri;\n            self.$el.find('[name=outputRepository]').val(resourceUri).trigger('change');\n        });\n        this.folderChooserDialog.setDefaultSelectedItem(this.model.get('repositoryDestination').folderURI);\n        return this.folderChooserDialog;\n    },\n    outputRepositoryButtonClick: function () {\n        this.getFolderChooserDialog().open();\n    },\n    getSshKeyChooserDialog: function () {\n        if (this.sshKeyChooserDialog) {\n            return this.sshKeyChooserDialog;\n        }\n        var self = this;\n        var Dialog = RepositoryChooserDialogFactory.getDialog('item');\n        this.sshKeyChooserDialog = new Dialog({\n            disableListTab: true,\n            treeBufferSize: parseInt(settings.treeLevelLimit, 10),\n            resourcesTypeToSelect: [repositoryResourceTypes.SECURE_FILE]\n        });\n        this.listenTo(this.sshKeyChooserDialog, 'close', function () {\n            var resourceUri;\n            if (!this.sshKeyChooserDialog.selectedResource) {\n                return;\n            }\n            if (!this.sshKeyChooserDialog.selectedResource.resourceUri) {\n                return;\n            }\n            resourceUri = this.sshKeyChooserDialog.selectedResource.resourceUri;\n            self.$el.find('[name=sshKeyPath]').val(resourceUri).trigger('change');\n        });\n        var ftpInfo = this.model.get('repositoryDestination').outputFTPInfo, sshKeyPath = (ftpInfo || {}).sshKey;\n        this.sshKeyChooserDialog.setDefaultSelectedItem(sshKeyPath);\n        return this.sshKeyChooserDialog;\n    },\n    sshKeyPathButtonClick: function () {\n        this.getSshKeyChooserDialog().open();\n    },\n    // This is workaround of missing validation criteria on incorrect URI format.\n    fixUriInput: function (event) {\n        var input = $(event.currentTarget), value = input.val();\n        if (!this.model.isValidUri(value))\n            return;    // Add \"/\" prefix if missing and trigger change again\n        // Add \"/\" prefix if missing and trigger change again\n        if (!(value === '' || _.startsWith(value, '/'))) {\n            input.val('/' + value).trigger('change');\n            return;\n        }    // Remove \"//\" in beginning\n        // Remove \"//\" in beginning\n        if (_.startsWith(value, '//')) {\n            input.val(value.substring(1, value.length)).trigger('change');\n            return;\n        }    // Remove \"/\" in the end\n        // Remove \"/\" in the end\n        if (value.length > 1 && _.endsWith(value, '/')) {\n            input.val(value.substring(0, value.length - 1)).trigger('change');\n            return;\n        }\n    },\n    render: function () {\n        this._renderTemplate();\n        this._initializeBinding();\n    },\n    _renderTemplate: function () {\n        var templateData = _.extend({}, {\n            _: _,\n            i18n: i18n,\n            availableFormats: this.availableFormats,\n            timeZones: config.timeZones,\n            locales: config.availableLocales,\n            localesName: config.availableLocalesFullName\n        }, this.model.attributes);\n        this.setElement($(_.template(outputTabTemplate, templateData)));\n    },\n    _initializeBinding: function () {\n        var self = this;    // adjust this checkbox into proper state depending on the server-side variable\n        // adjust this checkbox into proper state depending on the server-side variable\n        this.$el.find('[name=outputToHostFileSystem]').attr('disabled', config.enableSaveToHostFS === 'true' || config.enableSaveToHostFS === true ? false : 'disabled');\n        this.map = _.map(this.binding, _.clone);\n        _.each(this.map, function (data) {\n            // get control by name\n            data.control = data.control.split(',');\n            data.control = data.control.map(function (a) {\n                return '[name=' + a + ']';\n            });\n            data.control = self.$el.find(data.control.join(','));\n            if (data.attr)\n                data.attr = data.attr.split('/');\n            if (data.depends) {\n                if (data.depends[0] === '!') {\n                    data.invert = true;\n                    data.depends = data.depends.substr(1);\n                }\n            }\n            if (data.depends && !data.attr) {\n                data.depends = self.$el.find('[name=' + data.depends + ']');\n                var change = function () {\n                    var val = data.setter ? data.setter.call(self, data.depends) : data.depends.val();\n                    var isDisabled = data.disabled || (data.invert ? !!val : !val);\n                    data.control.attr('disabled', isDisabled ? 'disabled' : false);\n                };\n                data.depends.on('change', change);\n                return change();\n            }    // handle model change and update element\n            // handle model change and update element\n            self.model.on('change:' + data.attr[0], function (model, value) {\n                value = model.value(data.attr.join('/'));\n                if (data.setter)\n                    value = data.setter.call(self, value);\n                if (data.depends) {\n                    var val = model.value(data.depends);\n                    if (data.setter)\n                        val = data.setter.call(self, val);\n                    else if (val === '')\n                        val = true;\n                    var isDisabled = data.disabled || (data.invert ? !!val : !val);\n                    return data.control.attr('disabled', isDisabled ? 'disabled' : false);\n                }\n                if (data.control.is('[type=checkbox]') && data.control.length === 1)\n                    data.control.prop('checked', value);\n                else if (data.control.is('[type=radio]'))\n                    data.control.filter('[value=' + value + ']').prop('checked', true);\n                else\n                    data.control.val(value);\n            });    // handle element change and update model\n            // handle element change and update model\n            if (data.control.length && !data.depends) {\n                data.control.on('change', function () {\n                    var key, value, update, target;\n                    value = data.control.is('[type=checkbox]') ? data.control.filter(':checked').map(function () {\n                        return $(this).val();\n                    }).get() : data.control.val();\n                    if (data.control.is('[type=checkbox]') && data.control.length === 1)\n                        value = !!value[0];\n                    if (data.control.is('[type=radio]'))\n                        value = data.control.filter(':checked').val();\n                    if (data.getter)\n                        value = data.getter.call(self, value, _.clone(self.model.value(data.attr.join('/'))));\n                    if (data.attr.length > 1) {\n                        target = update = _.clone(self.model.get(data.attr[0]));\n                        for (var i = 1, l = data.attr.length - 1; i < l; i++) {\n                            key = data.attr[i];\n                            target[key] = target[key] ? _.clone(target[key]) : {};\n                            target = target[key];\n                        }\n                        target[data.attr[data.attr.length - 1]] = value;    // TODO: move this from here\n                        // TODO: move this from here\n                        if (data.attr.join('/') === 'repositoryDestination/outputFTPInfo/type') {\n                            target['port'] = self.model.ftpPortDefaults[value];\n                        }\n                    }\n                    self.model.update(data.attr[0], update || value);\n                });\n            }\n        });\n    },\n    testFTPConnection: function () {\n        $('#ftpTestButton').addClass('disabled');    // clear errors in FTP output section\n        // clear errors in FTP output section\n        this.$el.find('#ftpServerOutput').find('.error').removeClass('error');\n        this.model.testFTPConnection(function () {\n            $('#ftpTestButton').removeClass('disabled');\n        });\n    }\n});\n","export default \"<div class=\\\"outputTab\\\">\\n\\n    <js-templateNonce></js-templateNonce>\\n\\n\\t<div class=\\\"outputFileOptions section\\\">\\n\\n\\t\\t<h4 class=\\\"title\\\">\\n\\t\\t\\t{{- i18n[\\\"report.scheduling.job.edit.output.label\\\"] }}\\n\\t\\t</h4>\\n\\n\\t\\t<!-- start name and description -->\\n\\t\\t<fieldset id=\\\"outputFileName\\\" class=\\\"group first\\\" title=\\\"{{- i18n[\\\"report.scheduling.job.edit.parameters.tooltip.baseFileName\\\"] }}\\\">\\n\\t\\t\\t<label class=\\\"control input text\\\">\\n\\t\\t\\t\\t<span class=\\\"wrap\\\">\\n\\t\\t\\t\\t\\t{{- i18n[\\\"report.scheduling.job.edit.output.filename\\\"] }} ({{- i18n[\\\"required.field\\\"] }}):\\n\\t\\t\\t\\t</span>\\n\\t\\t\\t\\t<input name=\\\"baseOutputFilename\\\" type=\\\"text\\\" value=\\\"\\\" maxlength=\\\"200\\\">\\n\\t\\t\\t\\t<span data-field=\\\"baseOutputFilename\\\" class=\\\"message warning\\\"></span>\\n\\t\\t\\t</label>\\n\\t\\t</fieldset>\\n\\t\\t<fieldset id=\\\"outputDescription\\\" class=\\\"group\\\">\\n\\t\\t\\t<label class=\\\"control textArea\\\">\\n\\t\\t\\t\\t<span class=\\\"wrap\\\">\\n\\t\\t\\t\\t\\t{{- i18n[\\\"report.scheduling.job.edit.label.description\\\"] }}:\\n\\t\\t\\t\\t</span>\\n\\t\\t\\t\\t<textarea name=\\\"outputDescription\\\"></textarea>\\n\\t\\t\\t\\t<span data-field=\\\"outputDescription\\\" class=\\\"message warning\\\"></span>\\n\\t\\t\\t</label>\\n\\t\\t</fieldset>\\n\\t\\t<!-- end name and description -->\\n\\n\\t\\t<!-- start time zone -->\\n\\t\\t<fieldset id=\\\"timeZone\\\" class=\\\"group\\\">\\n\\t\\t\\t<label class=\\\"control select inline twoLine\\\">\\n\\t\\t\\t\\t<span class=\\\"wrap\\\">\\n\\t\\t\\t\\t\\t{{- i18n[\\\"report.scheduling.job.edit.output.label.timezone\\\"] }}:\\n\\t\\t\\t\\t</span>\\n\\t\\t\\t\\t<select name=\\\"timeZone\\\">\\n\\t\\t\\t\\t\\t{{\\n\\t\\t\\t\\t\\t\\t_.each(timeZones, function(zone) {\\n\\t\\t\\t\\t\\t\\t}}\\n\\t\\t\\t\\t\\t\\t\\t<option value=\\\"{{- zone.value }}\\\">\\n\\t\\t\\t\\t\\t\\t\\t\\t{{- zone.title }}\\n\\t\\t\\t\\t\\t\\t\\t</option>\\n\\t\\t\\t\\t\\t\\t{{\\n\\t\\t\\t\\t\\t\\t});\\n\\t\\t\\t\\t\\t}}\\n\\t\\t\\t\\t</select>\\n\\t\\t\\t</label>\\n\\t\\t</fieldset>\\n\\t\\t<!-- end time zone -->\\n\\n\\t\\t<!-- start output locale -->\\n\\t\\t<fieldset id=\\\"outputLocale\\\" class=\\\"group\\\">\\n\\t\\t\\t<label class=\\\"control select inline twoLine\\\">\\n\\t\\t\\t\\t<span class=\\\"wrap\\\">\\n\\t\\t\\t\\t\\t{{- i18n[\\\"report.scheduling.job.edit.output.label.locale\\\"] }}:\\n\\t\\t\\t\\t</span>\\n\\t\\t\\t\\t<select name=\\\"outputLocale\\\">\\n\\t\\t\\t\\t\\t<option value=\\\"\\\" selected=\\\"\\\">({{- i18n[\\\"report.scheduling.job.edit.output.locale.default\\\"] }})</option>\\n\\t\\t\\t\\t\\t{{ for (var i = 0; i < locales.length; i++) { }}\\n\\t\\t\\t\\t\\t<option value=\\\"{{- locales[i] }}\\\">{{- localesName[i] }}</option>\\n\\t\\t\\t\\t\\t{{ } }}\\n\\t\\t\\t\\t</select>\\n\\t\\t\\t</label>\\n\\t\\t</fieldset>\\n\\t\\t<!-- end output locale -->\\n\\n\\t\\t<!-- start formats -->\\n\\t\\t<fieldset id=\\\"outputFormat\\\" class=\\\"group\\\">\\n\\t\\t\\t<input id=\\\"outputFormats\\\" type=\\\"hidden\\\">\\n\\t\\t\\t<legend>\\n\\t\\t\\t\\t<span class=\\\"wrap\\\">\\n\\t\\t\\t\\t\\t{{- i18n[\\\"report.scheduling.job.edit.output.label.outputFormat\\\"] }}:\\n\\t\\t\\t\\t</span>\\n\\t\\t\\t</legend>\\n\\n\\t\\t\\t<ul class=\\\"list inputSet\\\">\\n\\n\\t\\t\\t\\t{{ for (var cindex = 0, formats = []; cindex < availableFormats.length; cindex++) { }}\\n\\t\\t\\t\\t{{     for (var index = 0; index < availableFormats[cindex].formats.length; index++) { }}\\n\\t\\t\\t\\t{{         var f = formats.find(e => e.format == availableFormats[cindex].formats[index]); }}\\n\\t\\t\\t\\t{{         f || formats.push(f = {format: availableFormats[cindex].formats[index], exportTypes: ''}); }}\\n\\t\\t\\t\\t{{         f.exportTypes += '|' + availableFormats[cindex].exportType + '|'; }}\\n\\t\\t\\t\\t{{     } }}\\n\\t\\t\\t\\t{{ } }}\\n\\n\\t\\t\\t\\t{{ for (var index = 0; index < formats.length; index++) { }}\\n\\t\\t\\t\\t<li class=\\\"leaf\\\">\\n\\t\\t\\t\\t\\t<div class=\\\"control checkBox\\\">\\n\\t\\t\\t\\t\\t\\t<label class=\\\"wrap\\\" for=\\\"scheduler_box_{{- index}}\\\" title=\\\"{{- i18n[\\\"report.output.\\\" + formats[index].format.replace(\\\"_\\\",\\\".\\\").toLowerCase() + \\\".label.tooltip\\\"] }}\\\">\\n\\t\\t\\t\\t\\t\\t{{- i18n[\\\"report.output.\\\" +  formats[index].format.replace(\\\"_\\\",\\\".\\\").toLowerCase() + \\\".label\\\"] }}\\n\\t\\t\\t\\t\\t\\t</label>\\n\\t\\t\\t\\t\\t\\t<input id=\\\"scheduler_box_{- index}}\\\" name=\\\"outputFormats\\\" value=\\\"{{- formats[index].format.toUpperCase() }}\\\" type=\\\"checkbox\\\" data-export-types=\\\"{{- formats[index].exportTypes }}\\\">\\n\\t\\t\\t\\t\\t</div>\\n\\t\\t\\t\\t</li>\\n\\n\\t\\t\\t\\t{{ } }}\\n\\t\\t\\t</ul>\\n\\n\\t\\t\\t<span data-field=\\\"outputFormats\\\" class=\\\"message warning\\\"></span>\\n\\t\\t</fieldset>\\n\\t\\t<!-- end formats -->\\n\\n\\t\\t<!-- start file handling -->\\n\\t\\t<fieldset id=\\\"fileHandling\\\" class=\\\"group\\\">\\n\\t\\t\\t<legend class=\\\"\\\">\\n\\t\\t\\t\\t<span class=\\\"wrap\\\">\\n\\t\\t\\t\\t\\t{{- i18n[\\\"report.scheduling.job.edit.file.handling\\\"] }}:\\n\\t\\t\\t\\t</span>\\n\\t\\t\\t</legend>\\n\\t\\t\\t<ul class=\\\"list inputSet\\\">\\n\\t\\t\\t\\t<li class=\\\"leaf\\\">\\n\\t\\t\\t\\t\\t<div class=\\\"control checkBox\\\">\\n\\t\\t\\t\\t\\t\\t<label class=\\\"wrap\\\" for=\\\"scheduler_overwriteFiles\\\">\\n\\t\\t\\t\\t\\t\\t\\t{{- i18n[\\\"report.scheduling.job.edit.repository.label.overwriteFiles\\\"] }}\\n\\t\\t\\t\\t\\t\\t</label>\\n\\t\\t\\t\\t\\t\\t<input id=\\\"scheduler_overwriteFiles\\\" type=\\\"checkbox\\\" name=\\\"overwriteFiles\\\" value=\\\"overwrite\\\">\\n\\t\\t\\t\\t\\t</div>\\n\\t\\t\\t\\t</li>\\n\\t\\t\\t\\t<li class=\\\"leaf\\\">\\n\\t\\t\\t\\t\\t<div class=\\\"control checkBox twoLine\\\">\\n\\t\\t\\t\\t\\t\\t<label class=\\\"wrap\\\" for=\\\"scheduler_sequentialFilenames\\\">\\n\\t\\t\\t\\t\\t\\t\\t{{- i18n[\\\"report.scheduling.job.edit.file.handling.sequential\\\"] }}\\n\\t\\t\\t\\t\\t\\t</label>\\n\\t\\t\\t\\t\\t\\t<span class=\\\"wrap\\\">\\n\\t\\t\\t\\t\\t\\t\\t{{- i18n[\\\"report.scheduling.job.edit.repository.label.timestampPattern\\\"] }}:\\n\\t\\t\\t\\t\\t\\t</span>\\n\\t\\t\\t\\t\\t\\t<input id=\\\"scheduler_sequentialFilenames\\\" type=\\\"checkbox\\\" name=\\\"sequentialFilenames\\\" value=\\\"sequential\\\">\\n\\t\\t\\t\\t\\t\\t<label class=\\\"control inline twoLine\\\" title=\\\"{{- i18n[\\\"report.scheduling.job.edit.parameters.tooltip.timestamp.pattern.sequential\\\"] }}\\\">\\n\\t\\t\\t\\t\\t\\t\\t<input name=\\\"timestampPattern\\\" type=\\\"text\\\" maxlength=\\\"100\\\" title=\\\"{{- i18n[\\\"report.scheduling.job.edit.parameters.tooltip.timestamp.pattern.simple.data\\\"] }}\\\">\\n\\t\\t\\t\\t\\t\\t\\t<span data-field=\\\"timestampPattern\\\" class=\\\"message warning\\\"></span>\\n\\t\\t\\t\\t\\t\\t</label>\\n\\t\\t\\t\\t\\t</div>\\n\\t\\t\\t\\t</li>\\n\\t\\t\\t</ul>\\n\\t\\t</fieldset>\\n\\t\\t<!-- end file handling -->\\n\\t</div>\\n\\n\\t<!-- start output destinations -->\\n\\t<div class=\\\"outputDestination section\\\">\\n\\t\\t<h4 class=\\\"title\\\">\\n\\t\\t\\t{{- i18n[\\\"report.scheduling.job.edit.destination\\\"] }}\\n\\t\\t</h4>\\n\\t\\t<ul class=\\\"list group first inputSet\\\">\\n\\n\\t\\t\\t<li id=\\\"repositoryOutput\\\" class=\\\"leaf\\\">\\n\\t\\t\\t\\t<div class=\\\"control checkBox\\\">\\n\\t\\t\\t\\t\\t<label class=\\\"control browser\\\" for=\\\"scheduler_outputToRepository\\\">\\n\\t\\t\\t\\t\\t\\t<span class=\\\"wrap\\\">\\n\\t\\t\\t\\t\\t\\t\\t{{- i18n[\\\"report.scheduling.job.edit.destination.repository\\\"] }}\\n\\t\\t\\t\\t\\t\\t</span>\\n\\t\\t\\t\\t\\t</label>\\n\\t\\t\\t\\t\\t<input id=\\\"scheduler_outputToRepository\\\" type=\\\"checkbox\\\" name=\\\"outputToRepository\\\">\\n\\t\\t\\t\\t</div>\\n\\t\\t\\t\\t<div class=\\\"control browser\\\">\\n\\t\\t\\t\\t\\t<input type=\\\"text\\\" name=\\\"outputRepository\\\">\\n\\t\\t\\t\\t\\t<button name=\\\"outputRepositoryButton\\\" class=\\\"button action up\\\" type=\\\"button\\\">\\n\\t\\t\\t\\t\\t\\t<span class=\\\"wrap\\\">\\n\\t\\t\\t\\t\\t\\t\\t{{- i18n[\\\"button.browse\\\"] }}\\n\\t\\t\\t\\t\\t\\t\\t<span class=\\\"icon\\\"></span>\\n\\t\\t\\t\\t\\t\\t</span>\\n\\t\\t\\t\\t\\t</button>\\n\\t\\t\\t\\t\\t<span data-field=\\\"outputRepository\\\" class=\\\"message warning\\\"></span>\\n\\t\\t\\t\\t</div>\\n\\t\\t\\t</li>\\n\\n\\t\\t\\t<li id=\\\"fileSystemOutput\\\" class=\\\"leaf\\\">\\n\\t\\t\\t\\t<div class=\\\"control checkBox\\\">\\n\\t\\t\\t\\t\\t<label class=\\\"control checkBox\\\" for=\\\"scheduler_outputToHostFileSystem\\\">\\n\\t\\t\\t\\t\\t\\t<span class=\\\"wrap\\\">\\n\\t\\t\\t\\t\\t\\t\\t{{- i18n[\\\"report.scheduling.job.edit.destination.fs\\\"] }}\\n\\t\\t\\t\\t\\t\\t</span>\\n\\t\\t\\t\\t\\t</label>\\n\\t\\t\\t\\t\\t<input id=\\\"scheduler_outputToHostFileSystem\\\" type=\\\"checkbox\\\" name=\\\"outputToHostFileSystem\\\">\\n\\t\\t\\t\\t</div>\\n\\t\\t\\t\\t<div class=\\\"control text\\\">\\n\\t\\t\\t\\t\\t<label class=\\\"control input text\\\" for=\\\"ftpAddress\\\">\\n\\t\\t\\t\\t\\t\\t<input type=\\\"text\\\" name=\\\"outputHostFileSystem\\\" />\\n\\t\\t\\t\\t\\t\\t<span data-field=\\\"outputHostFileSystem\\\" disabled=\\\"\\\" class=\\\"message warning\\\"></span>\\n\\t\\t\\t\\t\\t</label>\\n\\t\\t\\t\\t</div>\\n\\t\\t\\t</li>\\n\\n\\t\\t\\t<li id=\\\"ftpServerOutput\\\" class=\\\"leaf\\\">\\n\\t\\t\\t\\t<ul class=\\\"list\\\">\\n\\t\\t\\t\\t\\t<li class=\\\"leaf\\\">\\n\\t\\t\\t\\t\\t\\t<div class=\\\"control checkBox\\\">\\n\\t\\t\\t\\t\\t\\t\\t<label class=\\\"control checkBox\\\" for=\\\"scheduler_outputToFTPServer\\\">\\n\\t\\t\\t\\t\\t\\t\\t\\t<span class=\\\"wrap\\\">\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t{{- i18n[\\\"report.scheduling.job.edit.destination.ftp\\\"] }}\\n\\t\\t\\t\\t\\t\\t\\t\\t</span>\\n\\t\\t\\t\\t\\t\\t\\t</label>\\n\\t\\t\\t\\t\\t\\t\\t<input id=\\\"scheduler_outputToFTPServer\\\" type=\\\"checkbox\\\"\\n\\t\\t\\t\\t\\t\\t\\t       name=\\\"outputToFTPServer\\\">\\n\\t\\t\\t\\t\\t\\t</div>\\n\\n\\t\\t\\t\\t\\t\\t<!-- FTP output - SERVER ADDRESS -->\\n\\t\\t\\t\\t\\t\\t<div class=\\\"control text\\\">\\n\\t\\t\\t\\t\\t\\t\\t<label class=\\\"control input text\\\" for=\\\"ftpAddress\\\">\\n\\t\\t\\t\\t\\t\\t\\t\\t<span class=\\\"wrap\\\">\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t{{- i18n[\\\"report.scheduling.job.edit.destination.ftp.server\\\"] }}:\\n\\t\\t\\t\\t\\t\\t\\t\\t</span>\\n\\t\\t\\t\\t\\t\\t\\t\\t<input id=\\\"ftpAddress\\\" type=\\\"text\\\" name=\\\"ftpAddress\\\">\\n\\t\\t\\t\\t\\t\\t\\t\\t<span data-field=\\\"ftpAddress\\\" class=\\\"message warning\\\"></span>\\n\\t\\t\\t\\t\\t\\t\\t</label>\\n\\t\\t\\t\\t\\t\\t</div>\\n\\n\\t\\t\\t\\t\\t\\t<!-- FTP output - PORT -->\\n\\t\\t\\t\\t\\t\\t<div class=\\\"control text inline one\\\">\\n\\t\\t\\t\\t\\t\\t\\t<label class=\\\"control input text\\\" for=\\\"ftpPort\\\">\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t<span class=\\\"wrap\\\">\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t{{- i18n[\\\"report.scheduling.job.edit.destination.ftp.port\\\"] }}:\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t</span>\\n\\t\\t\\t\\t\\t\\t\\t\\t<input type=\\\"text\\\" name=\\\"ftpPort\\\" id=\\\"ftpPort\\\" >\\n\\t\\t\\t\\t\\t\\t\\t\\t<span data-field=\\\"ftpPort\\\" class=\\\"message warning\\\"></span>\\n\\t\\t\\t\\t\\t\\t\\t</label>\\n\\t\\t\\t\\t\\t\\t</div>\\n\\n\\t\\t\\t\\t\\t\\t<!-- FTP output - Transfer Protocol -->\\n\\t\\t\\t\\t\\t\\t<div class=\\\"control select inline two\\\">\\n\\t\\t\\t\\t\\t\\t\\t<label class=\\\"control select\\\" for=\\\"scheduler_ftpProtocol\\\">\\n\\t\\t\\t\\t\\t\\t\\t\\t<span class=\\\"wrap\\\">{{- i18n[\\\"report.scheduling.job.edit.destination.ftp.protocol\\\"] }}:</span>\\n\\t\\t\\t\\t\\t\\t\\t\\t<select name=\\\"ftpProtocol\\\" id=\\\"scheduler_ftpProtocol\\\">\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t<option value=\\\"ftp\\\">{{- i18n[\\\"report.scheduling.job.edit.destination.ftp.protocol.ftp\\\"] }}</option>\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t<option value=\\\"ftps\\\">{{- i18n[\\\"report.scheduling.job.edit.destination.ftp.protocol.ftps\\\"] }}</option>\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t<option value=\\\"sftp\\\">{{- i18n[\\\"report.scheduling.job.edit.destination.ftp.protocol.sftp\\\"] }}</option>\\n\\t\\t\\t\\t\\t\\t\\t\\t</select>\\n\\t\\t\\t\\t\\t\\t\\t</label>\\n\\t\\t\\t\\t\\t\\t</div>\\n\\n\\t\\t\\t\\t\\t\\t<!-- FTP output - DIRECTORY -->\\n\\t\\t\\t\\t\\t\\t<div class=\\\"control text\\\">\\n\\t\\t\\t\\t\\t\\t\\t<label class=\\\"control input text\\\" for=\\\"ftpDirectory\\\">\\n\\t\\t\\t\\t\\t\\t\\t\\t<span class=\\\"wrap\\\">\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t{{- i18n[\\\"report.scheduling.job.edit.destination.ftp.dir\\\"] }}:\\n\\t\\t\\t\\t\\t\\t\\t\\t</span>\\n\\t\\t\\t\\t\\t\\t\\t\\t<input id=\\\"ftpDirectory\\\" type=\\\"text\\\" name=\\\"ftpDirectory\\\">\\n\\t\\t\\t\\t\\t\\t\\t\\t<span data-field=\\\"ftpDirectory\\\" class=\\\"message warning\\\"></span>\\n\\t\\t\\t\\t\\t\\t\\t</label>\\n\\t\\t\\t\\t\\t\\t</div>\\n\\n\\t\\t\\t\\t\\t\\t<!-- FTP output - USER -->\\n\\t\\t\\t\\t\\t\\t<div class=\\\"control text inline\\\">\\n\\t\\t\\t\\t\\t\\t\\t<label class=\\\"control input text\\\" for=\\\"ftpUsername\\\">\\n\\t\\t\\t\\t\\t\\t\\t\\t<span class=\\\"wrap\\\">{{- i18n[\\\"report.scheduling.job.edit.destination.ftp.user\\\"] }}:</span>\\n\\t\\t\\t\\t\\t\\t\\t\\t<input id=\\\"ftpUsername\\\" type=\\\"text\\\" name=\\\"ftpUsername\\\">\\n\\t\\t\\t\\t\\t\\t\\t\\t<span data-field=\\\"ftpUsername\\\" class=\\\"message warning\\\"></span>\\n\\t\\t\\t\\t\\t\\t\\t</label>\\n\\t\\t\\t\\t\\t\\t</div>\\n\\n\\t\\t\\t\\t\\t\\t<!-- FTP output - PASSWORD -->\\n\\t\\t\\t\\t\\t\\t<div class=\\\"control text inline two\\\">\\n\\t\\t\\t\\t\\t\\t\\t<label class=\\\"control input text\\\" for=\\\"ftpPassword\\\">\\n\\t\\t\\t\\t\\t\\t\\t\\t<span class=\\\"wrap\\\">{{- i18n[\\\"report.scheduling.job.edit.destination.ftp.password\\\"] }}:</span>\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t<input type=\\\"password\\\" id=\\\"ftpPassword\\\" name=\\\"ftpPassword\\\">\\n\\t\\t\\t\\t\\t\\t\\t\\t<span data-field=\\\"ftpPassword\\\" class=\\\"message warning\\\"></span>\\n\\t\\t\\t\\t\\t\\t\\t</label>\\n\\t\\t\\t\\t\\t\\t</div>\\n\\n\\t\\t\\t\\t\\t</li>\\n\\n\\t\\t\\t\\t\\t<li class=\\\"leaf\\\">\\n\\n\\t\\t\\t\\t\\t\\t<div class=\\\"control checkBox\\\" data-ftp-type=\\\"sftp\\\">\\n\\t\\t\\t\\t\\t\\t\\t<label class=\\\"control checkBox\\\" for=\\\"scheduler_sshKeyEnabled\\\">\\n\\t\\t\\t\\t\\t\\t\\t\\t<span class=\\\"wrap\\\">\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t{{- i18n[\\\"report.scheduling.job.edit.destination.ftp.ssh\\\"] }}\\n\\t\\t\\t\\t\\t\\t\\t\\t</span>\\n\\t\\t\\t\\t\\t\\t\\t</label>\\n\\t\\t\\t\\t\\t\\t\\t<input id=\\\"scheduler_sshKeyEnabled\\\" type=\\\"checkbox\\\" name=\\\"sshKeyEnabled\\\">\\n\\t\\t\\t\\t\\t\\t</div>\\n\\n\\t\\t\\t\\t\\t\\t<div class=\\\"control text\\\" data-ftp-type=\\\"sftp\\\">\\n\\t\\t\\t\\t\\t\\t\\t<label for=\\\"scheduler_sshKeyPath\\\" class=\\\"control browser\\\">\\n\\t\\t\\t\\t\\t\\t\\t\\t<span class=\\\"wrap\\\">\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t{{- i18n[\\\"report.scheduling.job.edit.destination.ftp.ssh.key\\\"] }}:\\n\\t\\t\\t\\t\\t\\t\\t\\t</span>\\n\\t\\t\\t\\t\\t\\t\\t\\t<input type=\\\"text\\\" name=\\\"sshKeyPath\\\" id=\\\"scheduler_sshKeyPath\\\">\\n\\t\\t\\t\\t\\t\\t\\t\\t<button name=\\\"sshKeyPathButton\\\" class=\\\"button action up\\\" type=\\\"button\\\">\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t<span class=\\\"wrap\\\">\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t{{- i18n[\\\"button.browse\\\"] }}\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t<span class=\\\"icon\\\"></span>\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t</span>\\n\\t\\t\\t\\t\\t\\t\\t\\t</button>\\n\\t\\t\\t\\t\\t\\t\\t\\t<span data-field=\\\"sshKey\\\" class=\\\"message warning\\\"></span>\\n\\t\\t\\t\\t\\t\\t\\t\\t<span class=\\\"message hint\\\">{{- i18n[\\\"report.scheduling.job.edit.destination.ftp.ssh.key.hint\\\"] }}</span>\\n\\t\\t\\t\\t\\t\\t\\t</label>\\n\\t\\t\\t\\t\\t\\t</div>\\n\\n\\t\\t\\t\\t\\t\\t<div class=\\\"control text\\\" data-ftp-type=\\\"sftp\\\">\\n\\t\\t\\t\\t\\t\\t\\t<label class=\\\"control input text\\\">\\n\\t\\t\\t\\t\\t\\t\\t\\t<span class=\\\"wrap\\\">\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t{{- i18n[\\\"report.scheduling.job.edit.destination.ftp.ssh.passphrase\\\"] }}:\\n\\t\\t\\t\\t\\t\\t\\t\\t</span>\\n\\t\\t\\t\\t\\t\\t\\t\\t<input type=\\\"password\\\" name=\\\"sshPassphrase\\\">\\n\\t\\t\\t\\t\\t\\t\\t\\t<span data-field=\\\"sshPassphrase\\\" class=\\\"message warning\\\"></span>\\n\\t\\t\\t\\t\\t\\t\\t</label>\\n\\t\\t\\t\\t\\t\\t</div>\\n\\n\\t\\t\\t\\t\\t</li>\\n\\t\\t\\t\\t</ul>\\n\\t\\t\\t</li>\\n\\t\\t</ul>\\n\\n\\t\\t<fieldset id=\\\"testConnection\\\" class=\\\"group inputSet\\\">\\n\\t\\t\\t<button name=\\\"ftpTestButton\\\" id=\\\"ftpTestButton\\\" class=\\\"button action ftp-test up\\\" type=\\\"button\\\">\\n\\t            <span class=\\\"wrap\\\">\\n\\t\\t            {{- i18n[\\\"report.scheduling.job.edit.destination.ftp.test\\\"] }}\\n\\t                <span class=\\\"icon\\\"></span>\\n\\t            </span>\\n\\t\\t\\t</button>\\n\\t\\t\\t<span data-field=\\\"ftpTest\\\" class=\\\"message warning\\\"></span>\\n\\t\\t</fieldset>\\n\\t</div>\\n</div>\\n\";","/*\n * Copyright (C) 2005 - 2022 TIBCO Software Inc. All rights reserved.\n * http://www.jaspersoft.com.\n *\n * Unless you have purchased a commercial license agreement from Jaspersoft,\n * the following license terms apply:\n *\n * This program is free software: you can redistribute it and/or modify\n * it under the terms of the GNU Affero General Public License as\n * published by the Free Software Foundation, either version 3 of the\n * License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the\n * GNU Affero General Public License for more details.\n *\n * You should have received a copy of the GNU Affero General Public License\n * along with this program. If not, see <http://www.gnu.org/licenses/>.\n */\n\nimport $ from 'jquery';\nimport _ from 'underscore';\nimport i18n from '../../../i18n/all.properties';\nimport Backbone from 'backbone';\nimport notificationsTabTemplate from '../../template/editor/notificationsTabTemplate.htm';\nexport default Backbone.View.extend({\n    events: {\n        'change [name=to_suc]': 'to_suc_Change',\n        'change [name=cc_suc]': 'cc_suc_Change',\n        'change [name=bcc_suc]': 'bcc_suc_Change',\n        'change [name=subject_suc]': 'subject_suc_Change',\n        'change [name=message_suc]': 'message_suc_Change',\n        'change [name=resultSendTypeRadio]': 'setResultSendType',\n        'change [name=includeHtmlReport]': 'setResultSendType',\n        'change [name=dontSendEmptyReport]': 'dont_send_empty_report_Change',\n        'change [name=job_status_to]': 'job_status_to_Change',\n        'change [name=job_status_subject]': 'job_status_subject_Change',\n        'change [name=job_status_success_message]': 'job_status_success_message_Change',\n        'change [name=job_status_failed_message]': 'job_status_failed_message_Change',\n        'change [name=send_success_notification]': 'twoCheckboxes_Change',\n        'change [name=send_failure_notification]': 'twoCheckboxes_Change',\n        'change [name=include_report]': 'include_report_Change',\n        'change [name=include_stack_trace]': 'include_stack_trace_Change'\n    },\n    initialize: function (options) {\n        var self = this;\n        this.options = options;\n        this.model.on('change:mailNotification', function (model) {\n            var mn = model.get('mailNotification');\n            if (!mn)\n                return;\n            self.$el.find('[name=to_suc]').val(mn.toAddresses.address);\n            self.$el.find('[name=cc_suc]').val(mn.ccAddresses.address);\n            self.$el.find('[name=bcc_suc]').val(mn.bccAddresses.address);\n            self.$el.find('[name=subject_suc]').val(mn.subject);\n            self.$el.find('[name=message_suc]').val(mn.messageText);\n            self.message_suc_DisabledEnabled(model);\n            var chBoxValue = false, radioValue = '';\n            switch (mn.resultSendType) {\n            case 'SEND':\n                radioValue = 'asRepoLinks';\n                break;\n            case 'SEND_EMBED':\n                chBoxValue = true;\n                radioValue = 'asAttachedFiles';\n                break;\n            case 'SEND_EMBED_ZIP_ALL_OTHERS':\n                chBoxValue = true;\n                radioValue = 'asAttachedZip';\n                break;\n            case 'SEND_ATTACHMENT':\n                radioValue = 'asAttachedFiles';\n                break;\n            case 'SEND_ATTACHMENT_ZIP_ALL':\n                radioValue = 'asAttachedZip';\n                break;\n            }\n            self.$el.find('[name=resultSendTypeRadio]').filter('[value=' + radioValue + ']').prop('checked', true);\n            self.asRepoLinks_DisabledEnabled(model);\n            self.$el.find('[name=includeHtmlReport]').prop('checked', chBoxValue);\n            self.includeHtmlReport_DisabledEnabled(model);\n            self.$el.find('[name=dontSendEmptyReport]').prop('checked', mn.skipEmptyReports);\n        });\n        this.model.on('change:alert', function (model) {\n            var a = model.get('alert');\n            if (!a)\n                return;\n            self.$el.find('[name=job_status_to]').val(a.toAddresses.address);\n            self.$el.find('[name=send_success_notification]').prop('checked', a.jobState.indexOf('SUCCESS_ONLY') !== -1 || a.jobState.indexOf('ALL') !== -1);\n            self.$el.find('[name=send_failure_notification]').prop('checked', a.jobState.indexOf('FAIL_ONLY') !== -1 || a.jobState.indexOf('ALL') !== -1);\n            self.$el.find('[name=job_status_subject]').val(a.subject);\n            self.$el.find('[name=job_status_success_message]').val(a.messageText);\n            self.$el.find('[name=job_status_failed_message]').val(a.messageTextWhenJobFails);\n            self.$el.find('[name=include_report]').prop('checked', !!a.includingReportJobInfo);\n            self.$el.find('[name=include_stack_trace]').prop('checked', !!a.includingStackTrace);\n        });\n        this.model.on('change:outputFormats', function (model, value) {\n            var contains = value.outputFormat.indexOf('HTML') >= 0;\n            if (!contains) {\n                // we need to change from SEND_EMBED or SEND_EMBED_ZIP_ALL_OTHERS into SEND or SEND_ATTACHMENT\n                var c = self.model.get('mailNotification');\n                if (c && c.resultSendType && (c.resultSendType === 'SEND_EMBED' || c.resultSendType === 'SEND_EMBED_ZIP_ALL_OTHERS')) {\n                    var changeTo = 'SEND';\n                    var rd = model.get('repositoryDestination');\n                    if (rd) {\n                        if (!rd.saveToRepository) {\n                            changeTo = 'SEND_ATTACHMENT';\n                        }\n                    }\n                    model.update('mailNotification', { resultSendType: changeTo });\n                    return;\n                }\n            }\n            self.includeHtmlReport_DisabledEnabled(model);\n        });\n        this.model.on('change:repositoryDestination', function (model, value) {\n            var checked = value.saveToRepository;\n            if (!checked) {\n                // we need to change from SEND into SEND_ATTACHMENT\n                var c = self.model.get('mailNotification');\n                if (c && c.resultSendType && c.resultSendType === 'SEND') {\n                    model.update('mailNotification', { resultSendType: 'SEND_ATTACHMENT' });\n                    return;\n                }\n            }\n            self.asRepoLinks_DisabledEnabled(model);\n        });\n    },\n    render: function () {\n        this.setElement($(_.template(notificationsTabTemplate, { i18n: i18n })));\n    },\n    includeHtmlReport_DisabledEnabled: function (model) {\n        var enabled = true;\n        var mn = model.get('mailNotification');\n        if (mn) {\n            if (mn.resultSendType === 'SEND') {\n                enabled = false;\n            }\n        }\n        var of = model.get('outputFormats');\n        if (of) {\n            if (of.outputFormat.indexOf('HTML') === -1) {\n                enabled = false;\n            }\n        }\n        this.$el.find('[name=includeHtmlReport]').prop('disabled', enabled ? false : 'disabled');\n    },\n    message_suc_DisabledEnabled: function (model) {\n        var enabled = true;\n        var mn = model.get('mailNotification');\n        if (mn) {\n            if (mn.resultSendType === 'SEND_EMBED' || mn.resultSendType === 'SEND_EMBED_ZIP_ALL_OTHERS') {\n                enabled = false;\n            }\n        }\n        this.$el.find('[name=message_suc]').prop('disabled', enabled ? false : 'disabled');\n    },\n    asRepoLinks_DisabledEnabled: function (model) {\n        var enabled = true;\n        var rd = model.get('repositoryDestination');\n        if (rd) {\n            if (!rd.saveToRepository) {\n                enabled = false;\n            }\n        }\n        this.$el.find('[name=resultSendTypeRadio][value=asRepoLinks]').prop('disabled', enabled ? false : 'disabled');\n    },\n    to_suc_Change: function (evt) {\n        this.model.update('mailNotification', { toAddresses: { address: $(evt.target).val() } });\n    },\n    cc_suc_Change: function (evt) {\n        this.model.update('mailNotification', { ccAddresses: { address: $(evt.target).val() } });\n    },\n    bcc_suc_Change: function (evt) {\n        this.model.update('mailNotification', { bccAddresses: { address: $(evt.target).val() } });\n    },\n    subject_suc_Change: function (evt) {\n        this.model.update('mailNotification', { subject: $(evt.target).val() });\n    },\n    message_suc_Change: function (evt) {\n        this.model.update('mailNotification', { messageText: $(evt.target).val() });\n    },\n    setResultSendType: function (evt) {\n        var radioValue = this.$el.find('[name=resultSendTypeRadio]').filter(':checked').val();\n        var checkboxState = this.$el.find('[name=includeHtmlReport]').is(':checked');\n        var newVal = '';\n        if (checkboxState) {\n            if (radioValue === 'asRepoLinks') {\n                newVal = 'SEND';\n            } else if (radioValue === 'asAttachedFiles') {\n                newVal = 'SEND_EMBED';\n            } else if (radioValue === 'asAttachedZip') {\n                newVal = 'SEND_EMBED_ZIP_ALL_OTHERS';\n            }\n        } else {\n            if (radioValue === 'asRepoLinks') {\n                newVal = 'SEND';\n            } else if (radioValue === 'asAttachedFiles') {\n                newVal = 'SEND_ATTACHMENT';\n            } else if (radioValue === 'asAttachedZip') {\n                newVal = 'SEND_ATTACHMENT_ZIP_ALL';\n            }\n        }\n        this.model.update('mailNotification', { resultSendType: newVal });\n    },\n    dont_send_empty_report_Change: function (evt) {\n        this.model.update('mailNotification', { skipEmptyReports: $(evt.target).is(':checked') });\n    },\n    job_status_to_Change: function (evt) {\n        this.model.update('alert', { toAddresses: { address: $(evt.target).val() } });\n    },\n    job_status_subject_Change: function (evt) {\n        this.model.update('alert', { subject: $(evt.target).val() });\n    },\n    twoCheckboxes_Change: function (evt) {\n        var v1 = this.$el.find('[name=send_success_notification]').is(':checked'), v2 = this.$el.find('[name=send_failure_notification]').is(':checked');\n        var enumValue = [];\n        if (v1)\n            enumValue.push('SUCCESS_ONLY');\n        if (v2)\n            enumValue.push('FAIL_ONLY');\n        if (enumValue.length === 0) {\n            enumValue = ['NONE'];\n        }\n        if (enumValue.length === 2) {\n            enumValue = ['ALL'];\n        }\n        enumValue = enumValue.join('|');\n        this.model.update('alert', { jobState: enumValue });\n    },\n    job_status_success_message_Change: function (evt) {\n        this.model.update('alert', { messageText: $(evt.target).val() });\n    },\n    job_status_failed_message_Change: function (evt) {\n        this.model.update('alert', { messageTextWhenJobFails: $(evt.target).val() });\n    },\n    include_report_Change: function (evt) {\n        this.model.update('alert', { includingReportJobInfo: $(evt.target).is(':checked') });\n    },\n    include_stack_trace_Change: function (evt) {\n        this.model.update('alert', { includingStackTrace: $(evt.target).is(':checked') });\n    }\n});\n","export default \"<div class=\\\"notificationsTab\\\">\\n\\n    <js-templateNonce></js-templateNonce>\\n\\t<fieldset class=\\\"row inputs twoColumn_equal\\\">\\n\\t\\t<div class=\\\"column secondary\\\">\\n\\t\\t\\t<div class=\\\"content\\\">\\n\\t\\t\\t\\t<div id=\\\"jobSuccess\\\" class=\\\"section\\\">\\n\\t\\t\\t\\t\\t<h4 class=\\\"title\\\">\\n\\t\\t\\t\\t\\t\\t{{- i18n[\\\"report.scheduling.job.edit.email.header\\\"] }}\\n\\t\\t\\t\\t\\t</h4>\\n\\t\\t\\t\\t\\t<fieldset class=\\\"group first\\\">\\n\\t\\t\\t\\t\\t\\t<legend><span>\\n\\t\\t\\t\\t\\t\\t\\t{{- i18n[\\\"report.scheduling.job.edit.sendreportwhenschedulerrunssuccessfully\\\"] }}\\n\\t\\t\\t\\t\\t\\t</span></legend>\\n\\t\\t\\t\\t\\t\\t<label class=\\\"control input text\\\">\\n\\t\\t\\t\\t\\t\\t\\t<span class=\\\"wrap\\\">\\n\\t\\t\\t\\t\\t\\t\\t\\t{{- i18n[\\\"report.scheduling.job.edit.email.label.to\\\"] }}:\\n\\t\\t\\t\\t\\t\\t\\t</span>\\n\\t\\t\\t\\t\\t\\t\\t<input type=\\\"text\\\" name=\\\"to_suc\\\" />\\n\\t\\t\\t\\t\\t\\t\\t<span class=\\\"message hint\\\">\\n\\t\\t\\t\\t\\t\\t\\t\\t{{- i18n[\\\"report.scheduling.job.edit.usecommastoseparateaddresses\\\"] }}\\n\\t\\t\\t\\t\\t\\t\\t</span>\\n\\t\\t\\t\\t\\t\\t\\t<div data-field=\\\"to_suc\\\" class=\\\"warning message\\\"></div>\\n\\t\\t\\t\\t\\t\\t</label>\\n\\t\\t\\t\\t\\t\\t<label class=\\\"control input text\\\">\\n\\t\\t\\t\\t\\t\\t\\t<span class=\\\"wrap\\\">\\n\\t\\t\\t\\t\\t\\t\\t\\t{{- i18n[\\\"report.scheduling.job.edit.email.label.cc\\\"] }}:\\n\\t\\t\\t\\t\\t\\t\\t</span>\\n\\t\\t\\t\\t\\t\\t\\t<input type=\\\"text\\\" name=\\\"cc_suc\\\" />\\n\\t\\t\\t\\t\\t\\t\\t<div data-field=\\\"cc_suc\\\" class=\\\"warning message\\\"></div>\\n\\t\\t\\t\\t\\t\\t</label>\\n\\t\\t\\t\\t\\t\\t<label class=\\\"control input text\\\">\\n\\t\\t\\t\\t\\t\\t\\t<span class=\\\"wrap\\\">\\n\\t\\t\\t\\t\\t\\t\\t\\t{{- i18n[\\\"report.scheduling.job.edit.email.label.bcc\\\"] }}:\\n\\t\\t\\t\\t\\t\\t\\t</span>\\n\\t\\t\\t\\t\\t\\t\\t<input type=\\\"text\\\" name=\\\"bcc_suc\\\" />\\n\\t\\t\\t\\t\\t\\t\\t<div data-field=\\\"bcc_suc\\\" class=\\\"warning message\\\"></div>\\n\\t\\t\\t\\t\\t\\t</label>\\n\\t\\t\\t\\t\\t\\t<label class=\\\"control input text\\\">\\n\\t\\t\\t\\t\\t\\t\\t<span class=\\\"wrap\\\">\\n\\t\\t\\t\\t\\t\\t\\t\\t{{- i18n[\\\"report.scheduling.job.edit.email.label.subject\\\"] }}:\\n\\t\\t\\t\\t\\t\\t\\t</span>\\n\\t\\t\\t\\t\\t\\t\\t<input type=\\\"text\\\" name=\\\"subject_suc\\\" />\\n\\t\\t\\t\\t\\t\\t\\t<div data-field=\\\"subject_suc\\\" class=\\\"warning message\\\"></div>\\n\\t\\t\\t\\t\\t\\t</label>\\n\\t\\t\\t\\t\\t\\t<label class=\\\"control textArea\\\">\\n\\t\\t\\t\\t\\t\\t\\t<span class=\\\"wrap\\\">\\n\\t\\t\\t\\t\\t\\t\\t\\t{{- i18n[\\\"report.scheduling.job.edit.email.label.message\\\"] }}:\\n\\t\\t\\t\\t\\t\\t\\t</span>\\n\\t\\t\\t\\t\\t\\t\\t<textarea type=\\\"text\\\" name=\\\"message_suc\\\"></textarea>\\n\\t\\t\\t\\t\\t\\t</label>\\n\\t\\t\\t\\t\\t\\t<ul class=\\\"list inputSet\\\">\\n\\t\\t\\t\\t\\t\\t\\t<li class=\\\"leaf\\\">\\n\\t\\t\\t\\t\\t\\t\\t\\t<div class=\\\"control radio\\\">\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t<label for=\\\"jrsSchedule_resultTypeRadio1\\\" class=\\\"wrap\\\">\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t{{- i18n[\\\"report.scheduling.job.edit.includereportasrepositorylinksinemailbody\\\"] }}\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t</label>\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t<input value=\\\"asRepoLinks\\\" type=\\\"radio\\\" name=\\\"resultSendTypeRadio\\\" id=\\\"jrsSchedule_resultTypeRadio1\\\" />\\n\\t\\t\\t\\t\\t\\t\\t\\t</div>\\n\\t\\t\\t\\t\\t\\t\\t</li>\\n\\t\\t\\t\\t\\t\\t\\t<li class=\\\"leaf\\\">\\n\\t\\t\\t\\t\\t\\t\\t\\t<div class=\\\"control radio\\\">\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t<label for=\\\"jrsSchedule_resultTypeRadio2\\\" class=\\\"wrap\\\">\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t{{- i18n[\\\"report.scheduling.job.edit.includereportfilesasattachments\\\"] }}\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t</label>\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t<input value=\\\"asAttachedFiles\\\" type=\\\"radio\\\" name=\\\"resultSendTypeRadio\\\" id=\\\"jrsSchedule_resultTypeRadio2\\\">\\n\\t\\t\\t\\t\\t\\t\\t\\t</div>\\n\\t\\t\\t\\t\\t\\t\\t</li>\\n\\t\\t\\t\\t\\t\\t\\t<li class=\\\"leaf\\\">\\n\\t\\t\\t\\t\\t\\t\\t\\t<div class=\\\"control radio\\\">\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t<label for=\\\"jrsSchedule_resultTypeRadio3\\\" class=\\\"wrap\\\">\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t{{- i18n[\\\"report.scheduling.job.edit.includereportfiesaszip\\\"] }}\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t</label>\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t<input value=\\\"asAttachedZip\\\" type=\\\"radio\\\" name=\\\"resultSendTypeRadio\\\" id=\\\"jrsSchedule_resultTypeRadio3\\\">\\n\\t\\t\\t\\t\\t\\t\\t\\t</div>\\n\\t\\t\\t\\t\\t\\t\\t</li>\\n\\t\\t\\t\\t\\t\\t\\t<li class=\\\"leaf\\\">\\n\\t\\t\\t\\t\\t\\t\\t\\t<div class=\\\"control radio\\\">\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t<label for=\\\"jrsSchedule_includeHtmlReport\\\" class=\\\"wrap\\\">\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t{{- i18n[\\\"report.scheduling.job.edit.includehtmlreportinemailbody\\\"] }}\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t</label>\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t<input type=\\\"checkbox\\\" name=\\\"includeHtmlReport\\\" id=\\\"jrsSchedule_includeHtmlReport\\\">\\n\\t\\t\\t\\t\\t\\t\\t\\t</div>\\n\\t\\t\\t\\t\\t\\t\\t</li>\\n\\t\\t\\t\\t\\t\\t\\t<li class=\\\"leaf\\\">\\n\\t\\t\\t\\t\\t\\t\\t\\t<div class=\\\"control checkBox\\\">\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t<label for=\\\"jrsSchedule_dont_send_empty_report\\\" class=\\\"wrap\\\">\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t{{- i18n[\\\"report.scheduling.job.edit.donotsendemailsforemptyreports\\\"] }}\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t</label>\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t<input type=\\\"checkbox\\\" name=\\\"dontSendEmptyReport\\\" id=\\\"jrsSchedule_dont_send_empty_report\\\">\\n\\t\\t\\t\\t\\t\\t\\t\\t</div>\\n\\t\\t\\t\\t\\t\\t\\t</li>\\n\\t\\t\\t\\t\\t\\t</ul>\\n\\t\\t\\t\\t\\t</fieldset>\\n\\t\\t\\t\\t</div>\\n\\t\\t\\t</div>\\n\\t\\t</div>\\n\\n\\t\\t<div class=\\\"column primary\\\">\\n\\t\\t\\t<div class=\\\"content\\\">\\n\\t\\t\\t\\t<div id=\\\"jobNotification\\\" class=\\\"section\\\">\\n\\t\\t\\t\\t\\t<fieldset class=\\\"group first\\\">\\n\\t\\t\\t\\t\\t\\t<legend><span>\\n\\t\\t\\t\\t\\t\\t\\t{{- i18n[\\\"report.scheduling.job.edit.sendjobstatusnotifications\\\"] }}\\n\\t\\t\\t\\t\\t\\t</span></legend>\\n\\t\\t\\t\\t\\t\\t<label class=\\\"control input text\\\">\\n\\t\\t\\t\\t\\t\\t\\t<span class=\\\"wrap\\\">\\n\\t\\t\\t\\t\\t\\t\\t\\t{{- i18n[\\\"report.scheduling.job.edit.email.label.to\\\"] }}:\\n\\t\\t\\t\\t\\t\\t\\t</span>\\n\\t\\t\\t\\t\\t\\t\\t<input type=\\\"text\\\" name=\\\"job_status_to\\\">\\n\\t\\t\\t\\t\\t\\t\\t<span class=\\\"message hint\\\">\\n\\t\\t\\t\\t\\t\\t\\t\\t{{- i18n[\\\"report.scheduling.job.edit.usecommastoseparateaddresses\\\"] }}\\n\\t\\t\\t\\t\\t\\t\\t</span>\\n\\t\\t\\t\\t\\t\\t\\t<div data-field=\\\"job_status_to\\\" class=\\\"warning message\\\"></div>\\n\\t\\t\\t\\t\\t\\t</label>\\n\\t\\t\\t\\t\\t\\t<label class=\\\"control input text\\\">\\n\\t\\t\\t\\t\\t\\t\\t<span class=\\\"wrap\\\">\\n\\t\\t\\t\\t\\t\\t\\t\\t{{- i18n[\\\"report.scheduling.job.edit.email.label.subject\\\"] }}:\\n\\t\\t\\t\\t\\t\\t\\t</span>\\n\\t\\t\\t\\t\\t\\t\\t<input type=\\\"text\\\" name=\\\"job_status_subject\\\">\\n\\t\\t\\t\\t\\t\\t\\t<div data-field=\\\"job_status_subject\\\" class=\\\"warning message\\\"></div>\\n\\t\\t\\t\\t\\t\\t</label>\\n\\t\\t\\t\\t\\t\\t<ul class=\\\"list inputSet\\\">\\n\\t\\t\\t\\t\\t\\t\\t<li class=\\\"leaf last\\\">\\n\\t\\t\\t\\t\\t\\t\\t\\t<div class=\\\"control checkBox\\\">\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t<label for=\\\"jrsSchedule_send_success_notification\\\" class=\\\"wrap\\\">\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t{{- i18n[\\\"report.scheduling.job.edit.sendsuccessnotification\\\"] }}\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t</label>\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t<input type=\\\"checkBox\\\" name=\\\"send_success_notification\\\" id=\\\"jrsSchedule_send_success_notification\\\">\\n\\t\\t\\t\\t\\t\\t\\t\\t</div>\\n\\t\\t\\t\\t\\t\\t\\t\\t<label class=\\\"control textArea twoLine subItem\\\">\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t<span class=\\\"wrap\\\">\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t{{- i18n[\\\"report.scheduling.job.edit.email.label.successmessage\\\"] }}:\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t</span>\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t<textarea type=\\\"text\\\" name=\\\"job_status_success_message\\\"></textarea>\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t<div data-field=\\\"job_status_success_message\\\" class=\\\"warning message\\\"></div>\\n\\t\\t\\t\\t\\t\\t\\t\\t</label>\\n\\t\\t\\t\\t\\t\\t\\t</li>\\n\\t\\t\\t\\t\\t\\t</ul>\\n\\t\\t\\t\\t\\t\\t<ul id=\\\"failureIncludes\\\" class=\\\"list inputSet\\\">\\n\\t\\t\\t\\t\\t\\t\\t<li class=\\\"leaf\\\">\\n\\t\\t\\t\\t\\t\\t\\t\\t<div class=\\\"control checkBox\\\">\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t<label for=\\\"jrsSchedule_send_failure_notification\\\" class=\\\"wrap\\\">\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t{{- i18n[\\\"report.scheduling.job.edit.sendfailurenotification\\\"] }}\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t</label>\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t<input type=\\\"checkBox\\\" name=\\\"send_failure_notification\\\" id=\\\"jrsSchedule_send_failure_notification\\\">\\n\\t\\t\\t\\t\\t\\t\\t\\t</div>\\n\\t\\t\\t\\t\\t\\t\\t\\t<label class=\\\"control textArea twoLine subItem\\\">\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t<span class=\\\"wrap\\\">\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t{{- i18n[\\\"report.scheduling.job.edit.email.label.failuremessage\\\"] }}:\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t</span>\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t<textarea type=\\\"text\\\" name=\\\"job_status_failed_message\\\"></textarea>\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t<div data-field=\\\"job_status_failed_message\\\" class=\\\"warning message\\\"></div>\\n\\t\\t\\t\\t\\t\\t\\t\\t</label>\\n\\t\\t\\t\\t\\t\\t\\t</li>\\n\\t\\t\\t\\t\\t\\t\\t<ul class=\\\"list inputSet\\\">\\n\\t\\t\\t\\t\\t\\t\\t\\t<li class=\\\"leaf\\\">\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t<div class=\\\"control checkBox\\\">\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t<label for=\\\"jrsSchedule_include_report\\\" class=\\\"wrap\\\">\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t{{- i18n[\\\"report.scheduling.job.edit.includereport\\\"] }}\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t</label>\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t<input type=\\\"checkBox\\\" name=\\\"include_report\\\" id=\\\"jrsSchedule_include_report\\\">\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t</div>\\n\\t\\t\\t\\t\\t\\t\\t\\t</li>\\n\\t\\t\\t\\t\\t\\t\\t\\t<li class=\\\"leaf\\\">\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t<div class=\\\"control checkBox\\\">\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t<label for=\\\"jrsSchedule_include_stack_trace\\\" class=\\\"wrap\\\">\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t{{- i18n[\\\"report.scheduling.job.edit.includestacktrace\\\"] }}\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t</label>\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t<input type=\\\"checkBox\\\" name=\\\"include_stack_trace\\\" id=\\\"jrsSchedule_include_stack_trace\\\">\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t</div>\\n\\t\\t\\t\\t\\t\\t\\t\\t</li>\\n\\t\\t\\t\\t\\t\\t\\t</ul>\\n\\t\\t\\t\\t\\t\\t</ul>\\n\\t\\t\\t\\t\\t</fieldset>\\n\\t\\t\\t\\t</div>\\n\\t\\t\\t</div>\\n\\t\\t</div>\\n\\t</fieldset>\\n</div>\";","/*\n * Copyright (C) 2005 - 2022 TIBCO Software Inc. All rights reserved.\n * http://www.jaspersoft.com.\n *\n * Unless you have purchased a commercial license agreement from Jaspersoft,\n * the following license terms apply:\n *\n * This program is free software: you can redistribute it and/or modify\n * it under the terms of the GNU Affero General Public License as\n * published by the Free Software Foundation, either version 3 of the\n * License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the\n * GNU Affero General Public License for more details.\n *\n * You should have received a copy of the GNU Affero General Public License\n * along with this program. If not, see <http://www.gnu.org/licenses/>.\n */\n\nimport $ from 'jquery';\nimport _ from 'underscore';\nimport Backbone from 'backbone';\nimport i18n from '../../i18n/all.properties';\nimport AlertDialog from 'js-sdk/src/common/component/dialog/AlertDialog';\nimport SaveDialogView from '../saveDialog/SaveDialogView';\nimport dialogs from '../../components/components.dialogs';\n\nimport EditorScheduleTabView from './editor/ScheduleTabView';\nimport EditorParametersTabView from './editor/ParametersTabView';\nimport EditorOutputTabView from './editor/OutputTabView';\nimport EditorNotificationsTabView from './editor/NotificationsTabView';\nimport jobEditorViewDrawerTemplate from '../template/jobEditorViewDrawerTemplate.htm';\nimport jobEditorViewTemplate from '../template/jobEditorViewTemplate.htm';\n\nexport default Backbone.View.extend({\n\n    editMode: false,\n\n    // used for editing then we need to have different validations - for example we should skip the isPastDate\n    runNowMode: false,\n\n    // this is a mode in which some tabs are not activated\n    events: {\n        'mouseup [name=tabs] li': 'tabChangeClickEvent',\n        'touchend [name=tabs] li': 'tabChangeClickEvent',\n        'click [name=openSaveDialog]': 'openSaveDialogClick',\n        'click [name=cancelJobCreation]': 'cancelJobCreationClick'\n    },\n\n    // initialize view\n    initialize: function (options) {\n        this.options = _.extend({}, options);\n        this.tabs = {};\n\n        // model is valid, show success messages\n        this.listenTo(this.model, 'valid', this.validModelListener);\n\n        // model is invalid, show error messages\n        this.listenTo(this.model, 'invalid', this.invalidModelListener);\n\n        // handle any type of validation started\n        this.listenTo(this.model, 'clearAllErrors', this.clearAllValidationErrors);\n\n        // disable/enable parameters due to model state\n        this.listenTo(this.model, 'change:source', this.sourceKeyInModelChanged);\n        this.listenTo(this.model, 'failedToGet_IC', this.InputControlsNotLoaded);\n\n        this._initializeTabs(options);\n\n        this.listenTo(this.tabs.parametersTab, 'IC_Displayed', this.InputControlsLoaded);\n        this.listenTo(this.tabs.parametersTab, 'failedToGet_IC', this.InputControlsNotLoaded);\n    },\n\n    _initializeTabs: function (options) {\n        const tabParams = {\n            model: this.model,\n            reportUri: options.reportUri,\n            parentReportURI: options.parentReportURI\n        };\n        this.tabs.scheduleTab = new EditorScheduleTabView(tabParams);\n        this.tabs.parametersTab = new EditorParametersTabView(tabParams);\n        this.tabs.outputTab = new EditorOutputTabView(tabParams);\n        this.tabs.notificationsTab = new EditorNotificationsTabView(tabParams);\n    },\n\n    remove: function () {\n        this.tabs.scheduleTab.remove();\n        this.tabs.parametersTab.remove();\n        this.tabs.outputTab.remove();\n        this.tabs.notificationsTab.remove();\n        Backbone.View.prototype.remove.apply(this, arguments);\n    },\n\n    // ==================================================================================================\n    // Event listeners methods\n    tabChangeClickEvent: function (event) {\n        const tabElement = $(event.currentTarget);\n        const tabName = tabElement.attr('data-tab');\n\n        // don't change if clicked tab is disabled\n        if (tabElement.hasClass('disabled')) {\n            return;\n        }\n\n        // stop if tab already selected\n        if (this.currentActiveTabName === tabName) {\n            return;\n        }\n\n        this.model.validateAll(this.editMode).always(() => {\n            // search for error(s) on current tab if there are any\n            const errors = this.$el.find('[name=' + this.currentActiveTabName + ']').find('.error');\n            // don't switch current tab if one has error(s)\n            if (errors.length) {\n                return;\n            }\n            this.changeActiveTab(tabName);\n\n            // clear errors on the tab if any\n            this.clearAllValidationErrors();\n        });\n    },\n\n    openSaveDialogClick: function () {\n        this.startSavingProcess();\n    },\n\n    cancelJobCreationClick: function () {\n        this.trigger('cancelJobCreation');\n    },\n\n    // ==================================================================================================\n    // render interface methods...\n    renderCreateNewJobInterface: function () {\n        // set the variable to indicate which mode we are going to render\n        this.editMode = false;\n\n        // do the actual rendering....\n        this._render();\n\n        // adjust the tabs according to the running mode\n        if (this.options.runInBackgroundMode || this.runNowMode) {\n            this.changeActiveTab('outputTab');\n        } else {\n            this.changeActiveTab('scheduleTab');\n        }\n\n        // disable save button till we load data for parameters tab\n        this.prepareSaveOrSubmitButton();\n    },\n\n    prepareModelForCreatingNewJob: function () {\n        // create new model from report's uri\n        this.model.clear({ silent: true });\n\n        // remove ID\n        this.model.unset('id');\n\n        // prevent reaction on models' change\n        this.dontReactOnModelChange = true;\n        this.model.createFromUri(this.options.reportUri);\n        this.dontReactOnModelChange = false;\n\n        if (this.runNowMode) {\n            this.model.set('label', 'Immediate Execution');\n        }\n\n        // Next, load data for parameters tab\n        this.model.loadParameters(this.options.parentReportURI || false);\n    },\n\n    // edit job by job id\n    editExistingJob: function (jobId) {\n        this.editMode = true;\n\n        // private variables\n        // don't let listeners for model's change be run\n        this.model.clear({ silent: true });\n        this._render();\n\n        // select first tab\n        this.changeActiveTab('scheduleTab');\n\n        // set model id\n        this.model.set({ id: jobId });\n\n        this.prepareSaveOrSubmitButton();\n\n        if (this.model._fetched) {\n            this.model.set(this.model.parse(this.model._fetched));\n            this.setTitle(this.model.get('label'));\n            this.model._fetched = undefined;\n        } else {\n            // fetch model from server\n            this.model.fetch({\n                success: () => {\n                    // set proper title\n                    this.setTitle(this.model.get('label'));\n                }\n            });\n        }\n    },\n    prepareSaveOrSubmitButton: function () {\n        const openSaveDialogButton = this.$el.find('[name=openSaveDialog]'), cancelButton = this.$el.find('.footer #cancel');\n\n        // disable save button till we have a signal we may enable them back\n        openSaveDialogButton.attr('disabled', 'disabled').addClass('disabled');\n\n        // but cancel button we enable (it will be disabled during save process)\n        cancelButton.attr('disabled', null).removeClass('disabled');\n\n        // delay of enabling Save/Submit button till all data will be loaded\n        this.saveButtonReady = new $.Deferred();\n        this.saveButtonReady.done(function () {\n            // enable open save dialog button\n            openSaveDialogButton.attr('disabled', null).removeClass('disabled');\n        });\n    },\n\n    InputControlsLoaded: function () {\n        this.saveButtonReady.resolve();\n    },\n\n    InputControlsNotLoaded: function () {\n        this.saveButtonReady.resolve();\n        this.toggleEnableTab('parametersTab', false);\n    },\n\n    // ==================================================================================================\n    // Service methods...\n    setRunNowMode: function (runNowMode) {\n        this.runNowMode = !!runNowMode;\n    },\n\n    _render: function () {\n        const templateData = {\n            i18n: i18n,\n            reportUri: this.options.reportUri,\n            runNowMode: this.runNowMode,\n            shedulerAccelator: this.options.schedulerAccelator\n        };\n        let template = this.options.schedulerAccelator ? jobEditorViewDrawerTemplate : jobEditorViewTemplate;\n\n        this.setElement($(_.template(template, _.extend({}, templateData))));\n        if (this.runNowMode) {\n            this.$el.find('li[data-tab=scheduleTab]').addClass('disabled');\n        }\n        this.tabs.outputTab.options.editMode = this.editMode;\n        this.tabs.scheduleTab.render();\n        this.tabs.parametersTab.render();\n        this.tabs.outputTab.render();\n        this.tabs.notificationsTab.render();\n        this.$el.find('[name=scheduleTab]').append(this.tabs.scheduleTab.$el);\n        this.$el.find('[name=parametersTab]').append(this.tabs.parametersTab.$el);\n        this.$el.find('[name=outputTab]').append(this.tabs.outputTab.$el);\n        this.$el.find('[name=notificationsTab]').append(this.tabs.notificationsTab.$el);\n\n        // by default no tab is rendered\n        this.currentActiveTabName = '';\n    },\n\n    setTitle: function (title) {\n        this.$el.find('.pageHeader-title-text').text(title);\n    },\n\n    changeActiveTab: function (tabName) {\n        if (!tabName) {\n            return;\n        }\n\n        // get name of first tab with error\n        if (tabName === 'error') {\n            tabName = this.$el.find('[name=tabHolder] > div').find('.error').first().parents('.tab').attr('name');\n        }\n\n        // stop if tab already selected\n        if (this.currentActiveTabName === tabName) {\n            return;\n        }\n\n        // change active tab on the tab's list\n        this.$el.find('[name=tabs] li').removeClass('selected').filter('[data-tab=' + tabName + ']').addClass('selected');\n\n        // and change the active tab which is visible\n        this.$el.find('[name=tabHolder] > div').addClass('hidden').filter('[name=' + tabName + ']').removeClass('hidden');\n        this.currentActiveTabName = tabName;\n    },\n\n    // set tab state\n    toggleEnableTab: function (tabName, state) {\n        const tabElement = this.$el.find('[name=tabs] li').filter('[data-tab=' + tabName + ']');\n        tabElement.attr('disabled', !state).toggleClass('disabled', !state);\n\n        // select nearest enabled tab\n        if (!state && tabElement.hasClass('selected')) {\n            this.changeActiveTab(tabElement.nextAll(':not(.disabled):first').data('tab'));\n        }\n    },\n\n    sourceKeyInModelChanged: function (model, value) {\n        let empty;\n\n        // inside function create() we initialize the model with\n        // default parameters. That initialization should not affect\n        // save buttons because saveButtons must be handled only\n        // after we made special request to server, fetch information about\n        // parameters, save it to the model and handle them in this handler\n        if (this.dontReactOnModelChange === true) {\n            return;\n        }\n        if (value.parameters) {\n            empty = _.keys(value.parameters.parameterValues).length === 1;\n            // parameters are empty if length is 1 and it is timezone\n            empty &= !!value.parameters.parameterValues.REPORT_TIME_ZONE;\n        }\n\n        // also adjust Parameters tab\n        const doShowParametersTab = value.parameters && !empty;\n        if (!doShowParametersTab) {\n            // Save button is disabled while parameters tab is loading, but if\n            // parameter tab will not be displayed we can enable Save button\n            this.saveButtonReady.resolve();\n        }\n        this.toggleEnableTab('parametersTab', doShowParametersTab);\n        this.$el.find('.pageHeader-subtitle-path').find('.pageHeader-subtitle-path-text').text(value.reportUnitURI);\n        //this.$el.find('.schedule_for').find('.path').text(value.reportUnitURI);\n    },\n\n    // ==================================================================================================\n    // Save methods...\n    _prepareSaveDialog: function () {\n        this.saveDialog && this.saveDialog.remove();\n\n        this.saveDialog = new SaveDialogView(_.extend({}, this.options, {\n            model: this.model,\n            isEditMode: this.editMode,\n            onSaveDone: _.bind(this._onSaveDone, this),\n            onSaveFail: _.bind(this._onSaveFail, this)\n        }));\n\n        // during the save procedure we call different methods to check\n        // validity of model's data. Some of them may return \"invalid\" state,\n        // which means user has to make some corrections.\n        this.listenTo(this.saveDialog, 'saveValidationFailed', () => {\n            this.saveDialog.closeDialog();\n        });\n    },\n\n    startSavingProcess: function () {\n        this.model.validateAll(this.editMode).done(() => {\n            this._prepareSaveDialog();\n            this.saveDialog.startSaveDialog();\n        }).fail(() => {\n            this.changeActiveTab('error');\n        });\n    },\n\n    _onSaveDone: function () {\n        // the dialog is already closed himself, so don't worry\n        this.trigger('jobHasBeenCreated');\n    },\n\n    _onSaveFail: function (model, xhr, options) {\n        let response = false,\n            justExit = false,\n            errorHandled = false;\n\n        this.saveDialog.closeDialog();\n\n        try {\n            response = JSON.parse(xhr.responseText);\n        } catch (e) {\n        }\n        if (response.error) {\n            response = response.error;\n        }\n        if (!_.isArray(response)) {\n            response = [response];\n        }\n        _.each(response, (error) => {\n            let message = '';\n            let field = '';\n            if (error.errorCode === 'mandatory.parameter.error') {\n                message = i18n['report.scheduling.saveDialog.parameterIsMissing'];\n                if (error.parameters && error.parameters[0]) {\n                    field = error.parameters[0].substr(error.parameters[0].indexOf('.') + 1);\n                }\n            }\n            if (error.errorCode === 'error.duplicate.report.job.output.filename') {\n                field = 'baseOutputFilename';\n                message = i18n['error.duplicate.report.job.output.filename'].replace('{0}', error.errorArguments[0]).replace('{1}', error.errorArguments[1]);\n            }\n            if (error.message && error.message.indexOf('will never fire') !== -1) {\n                field = 'triggerWillNeverFire';\n                message = i18n['error.report.job.trigger.no.fire'];\n            }\n            if (error.errorCode === 'error.pattern') {\n                if (error.field === 'trigger.hours') {\n                    field = 'hours';\n                    message = i18n['error.pattern.trigger.hours'];\n                }\n                if (error.field === 'trigger.minutes') {\n                    field = 'minutes';\n                    message = i18n['error.pattern.trigger.minutes'];\n                }\n                if (error.field === 'trigger.monthDays') {\n                    field = 'datesInMonth';\n                    message = i18n['error.pattern.trigger.monthDays'];\n                }\n                if (error.field === 'contentRepositoryDestination.timestampPattern') {\n                    field = 'timestampPattern';\n                    message = i18n['error.pattern.contentRepositoryDestination.timestampPattern'];\n                }\n            }\n\n            // A special case them we are trying to edit job which already been executed.\n            // This may happen if job is going to run in few seconds and user clicks on Edit icon.\n            // Job might be executed so if users clicks on Save we'll face next issue\n            if (error.errorCode === 'resource.not.found') {\n                // in this case we have to show alert dialog and get back to Repository\n                const alertDialog = new AlertDialog({\n                    modal: true,\n                    additionalCssClasses: 'schedulerJobRemovedAlertDialog'\n                });\n                alertDialog.setMessage(i18n['report.scheduling.editing.jobHasBeenRemoved']);\n                this.listenTo(alertDialog, 'close', () => {\n                    this.trigger('errorEditingJob');\n                });\n                alertDialog.open();\n                justExit = true;\n                return;\n            }\n            if (message === '') {\n                return;\n            }\n            this.showValidationMessage('error', {\n                field: field,\n                message: message\n            });\n            errorHandled = true;\n        });\n        if (justExit === true) {\n            return;\n        }\n        if (errorHandled) {\n            this.changeActiveTab('error');\n        }\n        if (errorHandled === false) {\n            // otherwise, proceed with common error handling\n            let msg = i18n['report.scheduling.editing.failedToSave'] + '.';\n            if (response[0] && response[0].errorCode)\n                msg += '<br/>The reason is: ' + response[0].errorCode;\n            else if (response.message)\n                msg += '<br/>The reason is: ' + response.message;\n            msg += '<br/><br/>The full response from the server is: ' + xhr.responseText;\n            dialogs.errorPopup.show(msg);\n        }\n    },\n\n    // ==================================================================================================\n    // Validation methods...\n    clearAllValidationErrors: function () {\n        this.$el.find('.error').removeClass('error');\n    },\n\n    validModelListener: function (messages) {\n        _.each(messages, (message) => {\n            this.showValidationMessage('success', message);\n        });\n    },\n\n    invalidModelListener: function (errors, options) {\n\n        _.each(errors, (error) => {\n            this.showValidationMessage('error', error);\n        });\n\n        if (options && options.switchToErrors) {\n            this.changeActiveTab('error');\n        }\n    },\n\n    // show validation message\n    showValidationMessage: function (type, data) {\n        // skip errors we can't handle\n        if (!data.field) {\n            return;\n        }\n\n        // it happened what server sends an error message with different field names.\n        // correct it !\n        if (data.field === 'contentRepositoryDestination.folderURI') {\n            data.field = 'contentRepositoryDestination.outputRepository';\n        }\n        // remove prefixes\n        data.field = data.field.replace('trigger.', '');\n        data.field = data.field.replace('mailNotification.', '');\n        data.field = data.field.replace('contentRepositoryDestination.', '');\n\n        // get controls list\n        const message = this.$el.find('.warning[data-field=' + data.field + ']');\n        // set the \"error\" class into parent, because this is requirement of JRS CSS structure\n        message.parent().addClass('error');\n        // norw, adjust class type of the message field\n        message.removeClass('success').removeClass('error');\n        // remove all types of notifications\n        message.addClass(type);\n\n        // now, add the class name which represents the current notification\n        let text = '';\n        if (data.message) {\n            text = data.message;\n        } else if (data.errorCode) {\n            // get error text from i18n\n            text = i18n[data.errorCode];\n            if (!text) {\n                return;\n            }\n            // insert error arguments\n            if (data.errorArguments) {\n                for (let i = 0, l = data.errorArguments.length; i < l; i++) {\n                    text = text.replace('{' + i + '}', data.errorArguments[i]);\n                }\n            }\n        }\n\n        // show warning box\n        if (text !== '') {\n            message.text(text);\n        }\n    }\n});\n","export default \"<div class=\\\"jr-mDrawer jr-uHeight-100pc jr\\\">\\n    <div class=\\\"jr-mDrawer-header jr\\\">\\n        <div class=\\\"jr-mDrawer-header-title jr\\\">{{- i18n[\\\"report.scheduling.new.schedule\\\"] }}</div>\\n    </div>\\n    <div class=\\\"jr-mDrawer-body jr\\\">\\n        <div class=\\\"pageHeader \\\">\\n            <div class=\\\"pageHeader-subtitle\\\">\\n                <div class=\\\"pageHeader-subtitle-path\\\">\\n                    <span class=\\\"pageHeader-subtitle-path-label\\\">{{- i18n[\\\"report.scheduling.job.edit.shedulefor\\\"] }}:</span>\\n                    <span class=\\\"pageHeader-subtitle-path-text\\\">{{- reportUri }}</span>\\n                </div>\\n\\n                <div class=\\\"pageHeader-subtitle-tabs pageHeader-subtitle-tabsRight\\\">\\n                    <div class=\\\"tabs\\\">\\n                        <ul name=\\\"tabs\\\" disableCoreEvents=\\\"true\\\" class=\\\"control tabSet buttons horizontal\\\">\\n                            <li data-tab=\\\"scheduleTab\\\" class=\\\"tab\\\">\\n                                <a class=\\\"button\\\">\\n                                    <span class=\\\"wrap\\\">{{- i18n[\\\"report.scheduling.schedule\\\"] }}</span>\\n                                </a>\\n                            </li>\\n                            <li data-tab=\\\"parametersTab\\\" class=\\\"tab\\\">\\n                                <a class=\\\"button\\\">\\n                                    <span class=\\\"wrap\\\">{{- i18n[\\\"report.scheduling.job.edit.parameters.button\\\"] }}</span>\\n                                </a>\\n                            </li>\\n                            <li data-tab=\\\"outputTab\\\" class=\\\"tab\\\">\\n                                <a class=\\\"button\\\">\\n                                    <span class=\\\"wrap\\\">{{- i18n[\\\"report.scheduling.job.edit.output\\\"] }}</span>\\n                                </a>\\n                            </li>\\n                            <li data-tab=\\\"notificationsTab\\\" class=\\\"tab\\\">\\n                                <a class=\\\"button\\\">\\n                                    <span class=\\\"wrap\\\">{{- i18n[\\\"report.scheduling.job.edit.notifications\\\"] }}</span>\\n                                </a>\\n                            </li>\\n                        </ul>\\n                        <div class=\\\"control tabSet anchor\\\"></div>\\n                    </div>\\n                </div>\\n            </div>\\n        </div>\\n        <div class=\\\"wrapper\\\">\\n            <div class=\\\"schedulerEditor tabbed\\\">\\n                <js-templateNonce></js-templateNonce>\\n                <div name=\\\"tabHolder\\\">\\n                    <div class=\\\"tab\\\" name=\\\"scheduleTab\\\"></div>\\n                    <div class=\\\"tab\\\" name=\\\"parametersTab\\\"></div>\\n                    <div class=\\\"tab\\\" name=\\\"outputTab\\\"></div>\\n                    <div class=\\\"tab\\\" name=\\\"notificationsTab\\\"></div>\\n                </div>\\n            </div>\\n        </div>\\n    </div>\\n\\n    <div class=\\\"jr-mDrawer-footer jr\\\">\\n        {{ if (!runNowMode) { }}\\n        <button name=\\\"openSaveDialog\\\" class=\\\"jr-mButton jr-mButtonText jr-mButtonPrimary jr\\\">\\n            <span class=\\\"jr-mButton-label jr\\\">{{- i18n[\\\"button.save\\\"] }}</span>\\n        </button>\\n        {{ } else { }}\\n        <button name=\\\"openSaveDialog\\\" class=\\\"jr-mButton jr-mButtonText jr-mButtonPrimary jr\\\">\\n            <span class=\\\"jr-mButton-label jr\\\">{{- i18n[\\\"button.submit\\\"] }}</span>\\n        </button>\\n        {{ } }}\\n        <button name=\\\"cancelJobCreation\\\" class=\\\"jr-mButton jr-mButtonText jr-mButtonSecondary jr\\\">\\n            <span class=\\\"jr-mButton-label jr\\\">{{- i18n[\\\"button.cancel\\\"] }}</span>\\n        </button>\\n    </div>\\n</div>\\n\\n\";","export default \"<div class=\\\"pageHeader \\\">\\n    <div class=\\\"pageHeader-title\\\">\\n        <div class=\\\"pageHeader-title-icon\\\">\\n            <span class=\\\"icon scheduledJobs\\\"></span>\\n        </div>\\n        <div class=\\\"pageHeader-title-text\\\">{{- i18n[\\\"report.scheduling.new.schedule\\\"] }}</div>\\n    </div>\\n    <div class=\\\"pageHeader-subtitle\\\">\\n        <div class=\\\"pageHeader-subtitle-path\\\">\\n            <span class=\\\"pageHeader-subtitle-path-label\\\">{{- i18n[\\\"report.scheduling.job.edit.shedulefor\\\"] }}:</span>\\n            <span class=\\\"pageHeader-subtitle-path-text\\\">{{- reportUri }}</span>\\n        </div>\\n\\n        <div class=\\\"pageHeader-subtitle-tabs pageHeader-subtitle-tabsRight\\\">\\n            <div class=\\\"tabs\\\">\\n                <ul name=\\\"tabs\\\" disableCoreEvents=\\\"true\\\" class=\\\"control tabSet buttons horizontal\\\">\\n                    <li data-tab=\\\"scheduleTab\\\" class=\\\"tab\\\">\\n                        <a class=\\\"button\\\">\\n                            <span class=\\\"wrap\\\">{{- i18n[\\\"report.scheduling.schedule\\\"] }}</span>\\n                        </a>\\n                    </li>\\n                    <li data-tab=\\\"parametersTab\\\" class=\\\"tab\\\">\\n                        <a class=\\\"button\\\">\\n                            <span class=\\\"wrap\\\">{{- i18n[\\\"report.scheduling.job.edit.parameters.button\\\"] }}</span>\\n                        </a>\\n                    </li>\\n                    <li data-tab=\\\"outputTab\\\" class=\\\"tab\\\">\\n                        <a class=\\\"button\\\">\\n                            <span class=\\\"wrap\\\">{{- i18n[\\\"report.scheduling.job.edit.output\\\"] }}</span>\\n                        </a>\\n                    </li>\\n                    <li data-tab=\\\"notificationsTab\\\" class=\\\"tab\\\">\\n                        <a class=\\\"button\\\">\\n                            <span class=\\\"wrap\\\">{{- i18n[\\\"report.scheduling.job.edit.notifications\\\"] }}</span>\\n                        </a>\\n                    </li>\\n                </ul>\\n                <div class=\\\"control tabSet anchor\\\"></div>\\n            </div>\\n        </div>\\n    </div>\\n</div>\\n\\n<div class=\\\"schedulerEditor page column decorated primary tabbed\\\">\\n\\n    <js-templateNonce></js-templateNonce>\\n    <div class=\\\"content hasFooter \\\">\\n\\n        <div class=\\\"body\\\">\\n\\n            <div name=\\\"tabHolder\\\">\\n                <div class=\\\"tab\\\" name=\\\"scheduleTab\\\"></div>\\n                <div class=\\\"tab\\\" name=\\\"parametersTab\\\"></div>\\n                <div class=\\\"tab\\\" name=\\\"outputTab\\\"></div>\\n                <div class=\\\"tab\\\" name=\\\"notificationsTab\\\"></div>\\n            </div>\\n        </div>\\n\\n        <div class=\\\"footer\\\">\\n            <fieldset>\\n                {{ if (!runNowMode) { }}\\n                <button name=\\\"openSaveDialog\\\" class=\\\"button primary action up\\\">\\n                    <span class=\\\"wrap\\\">{{- i18n[\\\"button.save\\\"] }}</span><span class=\\\"icon\\\"></span>\\n                </button>\\n                {{ } else { }}\\n                <button name=\\\"openSaveDialog\\\" class=\\\"button primary action up\\\">\\n                    <span class=\\\"wrap\\\">{{- i18n[\\\"button.submit\\\"] }}</span><span class=\\\"icon\\\"></span>\\n                </button>\\n                {{ } }}\\n                <button name=\\\"cancelJobCreation\\\" class=\\\"button action up\\\">\\n                    <span class=\\\"wrap\\\">{{- i18n[\\\"button.cancel\\\"] }}</span><span class=\\\"icon\\\"></span>\\n                </button>\\n            </fieldset>\\n        </div>\\n    </div>\\n</div>\";","/*\n * Copyright (C) 2005 - 2022 TIBCO Software Inc. All rights reserved.\n * http://www.jaspersoft.com.\n *\n * Unless you have purchased a commercial license agreement from Jaspersoft,\n * the following license terms apply:\n *\n * This program is free software: you can redistribute it and/or modify\n * it under the terms of the GNU Affero General Public License as\n * published by the Free Software Foundation, either version 3 of the\n * License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the\n * GNU Affero General Public License for more details.\n *\n * You should have received a copy of the GNU Affero General Public License\n * along with this program. If not, see <http://www.gnu.org/licenses/>.\n */\n\nimport $ from 'jquery';\nimport _ from 'underscore';\nimport i18n from '../../i18n/all.properties';\nimport Backbone from 'backbone';\nimport jrsConfigs from 'js-sdk/src/jrs.configs';\nimport schedulerUtils from '../util/schedulerUtils';\nimport JobModel from '../model/JobModel';\nimport JobsView from './JobsView';\nimport JobEditorView from './JobEditorView';\nimport { ControlsBase } from \"../../controls/controls.base\";\n\n_.extend(ControlsBase, jrsConfigs.inputControlsConstants);\n\nexport default Backbone.View.extend({\n\n    className: 'schedulerApp',\n    // initial state of the views\n\n    jobsView: false,\n    // initialize app\n\n    _createJobModel: function() {\n        return new JobModel();\n    },\n\n    _createJobsView: function(options) {\n        return new JobsView(options);\n    },\n\n    _createJobEditorView: function(options) {\n        return new JobEditorView(options);\n    },\n\n    _getChildViewInitParams: function () {\n        return {\n            model: this._createJobModel(),\n            runInBackgroundMode: this.runInBackgroundMode,\n            masterViewMode: this.masterViewMode,\n            reportUri: this.schedulerStartupParams['reportUnitURI'],\n            parentReportURI: this.schedulerStartupParams['parentReportURI'] || null,\n            schedulerAccelator:this.schedulerAccelator\n        }\n    },\n\n    initialize: function (options) {\n        this.options = _.extend({}, options);\n\n        // check if we have a mark which says \"simply create a job to execute immediately and exit\"\n        this.runInBackgroundMode = document.location.hash.indexOf('#runInBackground@') === 0;\n\n        // saving the URL from which we came - we need this url when user would like to get back\n        schedulerUtils.saveCurrentLocation();\n\n        // not, get our parameters from URL\n        this.schedulerStartupParams = schedulerUtils.getParamsFromUri();\n\n        // Master View Mode (MVM) is a mode then we only able to see the list of scheduled jobs for all\n        // reports. In this mode we can't create new jobs, but we can control them: stop, continue, remove.\n        this.masterViewMode = !this.schedulerStartupParams['reportUnitURI'];\n\n        this.schedulerAccelator= this.schedulerStartupParams['schedulerAccelerator'];\n\n        // we have two child views: job editor and list of jobs views.\n        // let's prepare the object to initialize them later\n        this.childViewInitParams = this._getChildViewInitParams();\n\n        // suppress http basic auth for all requests\n        $.ajaxSetup({ headers: { 'X-Suppress-Basic': true } });\n\n        // handle ajax errors and reload page if request unauthorized\n        $(document).on('ajaxError', function (e, xhr, settings, exception) {\n            if (401 === xhr.status || 'Unauthorized' === exception) {\n                location.reload();\n            }\n        });\n\n        // by default we open list of jobs unless we are in the 'runInBackground' mode\n        if (this.runInBackgroundMode) {\n            this.runNowRequest();\n        } else if (this.isJobEditFromServerMonitoring()) {\n            this.openEditJobInterface(this.schedulerStartupParams.jobId);\n        } else {\n            this.openJobsListInterface();\n        }\n\n        if(this.schedulerAccelator){\n            this._openNewJobInterface();\n            this.$el.addClass('schedulerAccelerator').css({\n                'display':'none',\n                'position':'absolute',\n                'bottom':0,\n                'width':'100%'\n            });\n        }\n    },\n\n    prepareJobsView: function () {\n        if (this.jobsView) {\n            return;\n        }\n\n        this.jobsView = this._createJobsView(this.childViewInitParams);\n        this.listenTo(this.jobsView, 'createNewJobRequest', this.createNewJobRequest);\n        this.listenTo(this.jobsView, 'runNowRequest', this.runNowRequest);\n        this.listenTo(this.jobsView, 'backButtonPressed', this.backButtonPressed);\n        this.listenTo(this.jobsView, 'editJobPressed', this.openEditJobInterface);\n    },\n\n    prepareJobEditorView: function () {\n        if (this.jobEditorView) {\n            this.jobEditorView.remove();\n        }\n\n        this.jobEditorView = this._createJobEditorView(this.childViewInitParams);\n        this.listenTo(this.jobEditorView, 'errorEditingJob', this.errorEditingJob);\n        this.listenTo(this.jobEditorView, 'cancelJobCreation', this.cancelJobCreation);\n        this.listenTo(this.jobEditorView, 'jobHasBeenCreated', this.jobHasBeenCreated);\n    },\n\n    //=======================================================================\n    // next go methods which are responsive for some actions, like show list of jobs or create a new job\n\n    openJobsListInterface: function () {\n        // prepare a view which we need for this action\n        this.prepareJobsView();\n        // empty container of the application\n        this.$el.empty();\n        // render the view\n        this.jobsView.render();\n        // append view into application container\n        this.$el.append(this.jobsView.$el);\n        this.jobsView.refresh();\n        document.title = i18n['company.name'] + ': ' + i18n['report.scheduling.list.title'];\n    },\n\n    createNewJobRequest: function () {\n        this._openNewJobInterface(false);\n    },\n\n    runNowRequest: function () {\n        this._openNewJobInterface(true);\n    },\n\n    editJob: function (jobId) {\n        this.openEditJobInterface(jobId);\n    },\n\n    // internal method, which not be called directly\n    _openNewJobInterface: function (runMode) {\n\n        // prepare a view which we need for this action\n        this.prepareJobEditorView();\n\n        // adjust the \"run mode\" of the view\n        this.jobEditorView.setRunNowMode(runMode);\n\n        // empty container of the application\n        this.$el.empty();\n\n        // render the view\n        this.jobEditorView.renderCreateNewJobInterface();\n\n        // append view into application container\n        this.$el.append(this.jobEditorView.$el);\n\n        // now, prepare the model to represent the new job interface\n        this.jobEditorView.prepareModelForCreatingNewJob();\n        document.title = i18n['company.name'] + ': ' + i18n['report.scheduling.job.edit.title'];\n    },\n\n    openEditJobInterface: function (jobId) {\n        // prepare a view which we need for this action\n        this.prepareJobEditorView();\n\n        // empty container of the application\n        this.$el.empty();\n\n        // render the view\n        this.jobEditorView.editExistingJob(jobId);\n\n        // append view into application container\n        this.$el.append(this.jobEditorView.$el);\n        document.title = i18n['company.name'] + ': ' + i18n['report.scheduling.job.edit.title'];\n    },\n\n    backButtonPressed: function () {\n        schedulerUtils.getBackToPreviousLocation();\n    },\n\n    errorEditingJob: function () {\n        this.openJobsListInterface();\n    },\n\n    isJobEditFromServerMonitoring: function () {\n        return this.schedulerStartupParams.jobId && this.schedulerStartupParams.jobEditFromMonitoring;\n    },\n\n    cancelJobCreation: function () {\n        if (this.schedulerAccelator) {\n            schedulerUtils._closeScheduleOverlay();\n            schedulerUtils._detachEvents();\n        }else if(this.runInBackgroundMode|| this.isJobEditFromServerMonitoring()) {\n            // in 'runInBackground' mode we have to get back to previous page\n            schedulerUtils.getBackToPreviousLocation();\n        } else {\n            // in other case, we have to show the list of jobs\n            this.openJobsListInterface();\n        }\n    },\n\n    jobHasBeenCreated: function () {\n        if (this.runInBackgroundMode  || this.isJobEditFromServerMonitoring()) {\n            // in 'runInBackground' mode we have to get back to previous page\n            schedulerUtils.getBackToPreviousLocation();\n        } else {\n            // in other case, we have to show the list of jobs\n            this.openJobsListInterface();\n        }\n    }\n});\n","/*\n * Copyright (C) 2005 - 2022 TIBCO Software Inc. All rights reserved.\n * http://www.jaspersoft.com.\n *\n * Unless you have purchased a commercial license agreement from Jaspersoft,\n * the following license terms apply:\n *\n * This program is free software: you can redistribute it and/or modify\n * it under the terms of the GNU Affero General Public License as\n * published by the Free Software Foundation, either version 3 of the\n * License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the\n * GNU Affero General Public License for more details.\n *\n * You should have received a copy of the GNU Affero General Public License\n * along with this program. If not, see <http://www.gnu.org/licenses/>.\n */\n\nimport $ from 'jquery';\nimport SchedulerApp from './view/SchedulerApp';\n\nvar schedulerApp = new SchedulerApp();\n$('#display').append(schedulerApp.$el);    //workaround to make jquery-ui work properly with 'jr' prefix\n//workaround to make jquery-ui work properly with 'jr' prefix\n$('body').addClass('jr');\n\n//workaround for transition of workflow accelerator scheduler overlay\nif(schedulerApp.schedulerAccelator === \"schedule\"){\n    schedulerApp.$el.hasClass('schedulerAccelerator') && schedulerApp.$el.slideDown();\n    let schedulerIframe = window.parent.document.getElementsByClassName('schedulerOverlayIframe');\n    $(schedulerIframe).contents()[0].getElementById('loading').remove();\n}\n\n"],"sourceRoot":""}