(self.webpackChunkjrs_ui=self.webpackChunkjrs_ui||[]).push([[7925],{74238:(t,r,o)=>{"use strict";o.d(r,{Z:()=>s});var e=o(15892),n=o.n(e);const s=n().Model.extend({constructor:function(t,r){r||(r={}),this.parent=r.parent,n().Model.prototype.constructor.call(this,t,r)},_notify:function(t){this.parent._notify(t)},handleServerError:function(t){var r=this.get("uiModuleType");r&&r.handleServerError(t)},handleClientError:function(t){var r=this.get("uiModuleType");r&&r.handleClientError(t)}})},77925:(t,r,o)=>{"use strict";o.r(r),o.d(r,{default:()=>c});var e=o(74238),n=o(19698),s=o(4741),u=o(97836),a=o.n(u),i=o(84355);const c=e.Z.extend({defaults:function(){return{type:n.Z.CROSSTAB,module:"jive.crosstab",uimodule:"jive.crosstab.interactive",id:void 0,crosstabId:void 0,fragmentId:void 0,startColumnIndex:0,rowGroups:[],dataColumns:[]}},actions:{"change:order":function(t){var r=null;return"asc"===t.sort.order&&(r="ASCENDING"),"desc"===t.sort.order&&(r="DESCENDING"),t.componentType===s.Z.CROSSTAB_COLUMN?{actionName:"sortXTabByColumn",sortData:{crosstabId:this.attributes.crosstabId,order:r,measureIndex:t.sortMeasureIndex,columnValues:t.columnValues}}:{actionName:"sortXTabRowGroup",sortData:{crosstabId:this.attributes.crosstabId,order:r||"NONE",groupIndex:t.groupIndex}}}},initialize:function(t){this.config={},a().extend(this.config,t),this.events={ACTION_PERFORMED:"action",BEFORE_ACTION_PERFORMED:"beforeAction"}},getId:function(){return this.config.id},getCrosstabId:function(){return this.config.crosstabId},getFragmentId:function(){return this.config.fragmentId},sortRowGroup:function(t,r){var o=this,e={action:{actionName:"sortXTabRowGroup",sortData:{crosstabId:this.getCrosstabId(),order:r,groupIndex:t}}};o._notify({name:o.events.BEFORE_ACTION_PERFORMED}),o.trigger(i.Z.ACTION,e.action)},isDataColumnSortable:function(t){return"number"==typeof this.config.dataColumns[t-this.config.startColumnIndex].sortMeasureIndex},getColumnOrder:function(t){return this.config.dataColumns[t-this.config.startColumnIndex].order},sortByDataColumn:function(t,r){var o=this,e=this.config.dataColumns[t-this.config.startColumnIndex],n={action:{actionName:"sortXTabByColumn",sortData:{crosstabId:this.getCrosstabId(),order:r,measureIndex:e.sortMeasureIndex,columnValues:e.columnValues}}};o._notify({name:o.events.BEFORE_ACTION_PERFORMED}),o.trigger(i.Z.ACTION,n.action)},updateFromReportComponentObject:function(t){var r={};"order"in t.sort?r.order=t.sort.order:0===a().keys(t.sort).length&&(r.order=null),this.set(r,t)},toReportComponentObject:function(){return this.getDataColumns(this.attributes.dataColumns).concat(this.getRowGroups(this.attributes.rowGroups))},getDataColumns:function(){var t=a().bind(l,this,0);return a().compose((function(t){return a().each(t,(function(t){t.sort={},"ASCENDING"===t.order&&(t.sort.order="asc"),"DESCENDING"===t.order&&(t.sort.order="desc"),delete t.order})),t}),(function(t){return a().filter(t,(function(t){return"number"==typeof t.sortMeasureIndex}))}),t,(function(t){var r={id:this.getId()+"/dataColumns",componentType:s.Z.CROSSTAB_COLUMN};return a().map(t,(function(t){return a().extend({},r,t)}))}))}(),getRowGroups:(d=f,a().compose((function(t){return a().each(t,(function(t){t.sort={},"ASCENDING"===t.order&&(t.sort.order="asc"),"DESCENDING"===t.order&&(t.sort.order="desc"),delete t.order,delete t.sortable})),t}),(function(t){return a().filter(t,(function(t){return t.sortable}))}),d,(function(t){var r={id:this.getId()+"/rowGroups",componentType:s.Z.CROSSTAB_ROW};return a().map(t,(function(t){return a().extend({},r,t)}))})))});var d;function l(t,r){var o,e={},n=0;if(!r.length||r[0].columnValues&&r[0].columnValues.length>t){for(var s=0,u=r.length;s<u;s++)(o=e[r[s].columnValues[t].value]||(e[r[s].columnValues[t].value]=[])).push(r[s]);for(var a in e){var i=0;for(u=(o=e[a]).length;i<u;i++)o[i].id+="/"+n;l(t+1,e[a]),n++}}return r}function f(t){for(var r=0,o=t.length;r<o;r++)t[r].groupIndex=r,t[r].id+="/"+r;return t}}}]);
//# sourceMappingURL=chunk.7925.js.map