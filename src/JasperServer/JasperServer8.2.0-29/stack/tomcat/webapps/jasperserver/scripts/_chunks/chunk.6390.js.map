{"version":3,"sources":["webpack://jrs-ui/./src/tenantImportExport/import/factory/importModelAttributesFactory.js","webpack://jrs-ui/./src/tenantImportExport/import/enum/brokenDependencyStrategyEnum.js","webpack://jrs-ui/../js-sdk/src/common/transport/AjaxFormSubmitter.js","webpack://jrs-ui/./src/tenantImportExport/import/model/ImportModel.js","webpack://jrs-ui/./src/tenantImportExport/import/model/ImportStateModel.js","webpack://jrs-ui/./src/tenantImportExport/import/enum/importPendingStatesEnum.js","webpack://jrs-ui/./src/tenantImportExport/import/template/mergeTenantDialogTemplate.htm","webpack://jrs-ui/./src/tenantImportExport/import/view/MergeTenantDialogView.js","webpack://jrs-ui/./src/tenantImportExport/import/view/ImportDependentResourcesDialogView.js","webpack://jrs-ui/./src/tenantImportExport/import/view/ImportWarningsDialogView.js","webpack://jrs-ui/./src/tenantImportExport/import/factory/warningsFactory.js","webpack://jrs-ui/./src/tenantImportExport/import/enum/importRestErrorCodesEnum.js","webpack://jrs-ui/./src/tenantImportExport/import/factory/importErrorMessageFactory.js","webpack://jrs-ui/./src/tenantImportExport/import/view/ImportView.js","webpack://jrs-ui/./src/tenantImportExport/import/template/importTemplate.htm"],"names":["attributesByType","events","includeAccessEvents","includeAuditEvents","includeMonitoringEvents","themes","skipThemes","serverAssets","includeServerSettings","importExportTypesEnum","_","parseResponse","document","result","firstDocChild","firstChild","innerText","body","window","ActiveXObject","async","loadXML","replace","nodeName","toLowerCase","parseChildren","nextSibling","errorCode","node","children","ob","i","l","childNodes","length","nodeValue","push","AjaxUploader","uploadForm","url","method","enctype","this","name","form","$","attr","parceXmlDocToObject","prototype","submit","FormData","res","e","preventDefault","request","type","data","cache","contentType","processData","headers","Accept","done","resolve","fail","error","responseJSON","reject","off","iframe","append","on","contentWindow","remove","iframeUpload","ImportModel","BaseModel","defaults","BrokenDependencyStrategyEnum","validation","fileName","fn","test","initialize","attributes","options","AjaxFormSubmitter","parse","save","parameters","self","isNew","responce","set","id","trigger","_convertParameters","cancel","destroy","reset","customkeyElements","importModelAttributesFactory","keyAlias","alias","clear","undefined","value","secureKeyTypeEnum","get","keyType","BackboneValidation","ExportStateModel","BaseWarningDialogView","constructor","resizable","additionalCssClasses","title","i18n2","buttons","label","action","primary","i18n","template","close","open","message","errorCodeToMessageMap","warning","code","msgObj","msg","paramsNames","paramsObj","param","index","getParamsObject","restErrorCodeToErrorProviderMap","awsSettings","importRestErrorCodesEnum","errorProvider","ImportView","Backbone","tagName","className","computeds","deps","model","el","stateModel","ImportStateModel","customKeyStateModel","CustomKeyModel","loadingDialog","LoadingDialog","content","Dialog","RepositoryChooserDialogFactory","keyFileDialog","disableListTab","treeBufferSize","parseInt","settings","resourcesTypeToSelect","repositoryResourceTypes","selectedResource","resourceUri","_clearSecureKeyErrors","mergeTenantDialogView","MergeTenantDialogView","dependentResourcesDialogView","ImportDependentResourcesDialogView","warningsDialogView","ImportWarningsDialogView","notification","Notification","listenTo","_handleImportPhase","notFoundNotification","delay","unexpectedErrorNotification","_onModelChange","show","doImport","cancelImportTask","STATE","CANCELLED","applyBrokenDependencyStrategy","epoxifyView","render","organization","tenantId","$el","html","toJSON","secureKeyTypes","getCustomKeys","response","renderSecTemplate","customKeyFailure","customKeyElements","element","text","find","applyEpoxyBindings","validateFile","evt","target","val","$parent","parent","isValid","removeClass","addClass","dfd","_onImportFail","always","phase","INPROGRESS","READY","finishImport","call","FAILED","PENDING","finishPendingImport","_onRepositoryBrowserButtonClick","_onKeyTypeChange","event","radioValue","selectedIndex","_onSecretKeyInput","silent","_onSecretFileInput","_clickOnCheckbox","checkbox","next","disabled","checked","_onCustomKeyInput","showCustomKey","secretKeyTemplate","showKeyValue","exportMode","insertAfter","getWarnings","warnings","warningsFactory","notificationType","items","importErrorMessageFactory","ImportPendingStateEnum","fileTenantId","selectedTenantId","strategy","str","epoxyViewMixin"],"mappings":"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","file":"_chunks/chunk.6390.js","sourcesContent":["/*\n * Copyright (C) 2005 - 2022 TIBCO Software Inc. All rights reserved.\n * http://www.jaspersoft.com.\n *\n * Unless you have purchased a commercial license agreement from Jaspersoft,\n * the following license terms apply:\n *\n * This program is free software: you can redistribute it and/or modify\n * it under the terms of the GNU Affero General Public License as\n * published by the Free Software Foundation, either version 3 of the\n * License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the\n * GNU Affero General Public License for more details.\n *\n * You should have received a copy of the GNU Affero General Public License\n * along with this program. If not, see <http://www.gnu.org/licenses/>.\n */\n\nimport _ from 'underscore';\nimport importExportTypesEnum from '../../export/enum/exportTypesEnum';\n\nvar attributesByType = {};\nvar events = {\n    includeAccessEvents: true,\n    includeAuditEvents: true,\n    includeMonitoringEvents: true\n};\nvar themes = { skipThemes: true };\nvar serverAssets = { includeServerSettings: true };\nattributesByType[importExportTypesEnum.ROOT_TENANT] = _.extend({}, events, themes);\nattributesByType[importExportTypesEnum.TENANT] = _.extend({}, themes);\nattributesByType[importExportTypesEnum.SERVER_PRO] = _.extend({}, events, themes, serverAssets);\nattributesByType[importExportTypesEnum.SERVER_CE] = _.extend({}, serverAssets, { includeAccessEvents: true });\nexport default function (type) {\n    return attributesByType[type];\n}","/*\n * Copyright (C) 2005 - 2022 TIBCO Software Inc. All rights reserved.\n * http://www.jaspersoft.com.\n *\n * Unless you have purchased a commercial license agreement from Jaspersoft,\n * the following license terms apply:\n *\n * This program is free software: you can redistribute it and/or modify\n * it under the terms of the GNU Affero General Public License as\n * published by the Free Software Foundation, either version 3 of the\n * License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the\n * GNU Affero General Public License for more details.\n *\n * You should have received a copy of the GNU Affero General Public License\n * along with this program. If not, see <http://www.gnu.org/licenses/>.\n */\n\nexport default {\n    FAIL: 'fail',\n    SKIP: 'skip',\n    INCLUDE: 'include'\n};","/*\n * Copyright (C) 2005 - 2022 TIBCO Software Inc. All rights reserved.\n * http://www.jaspersoft.com.\n *\n * Unless you have purchased a commercial license agreement from Jaspersoft,\n * the following license terms apply:\n *\n * This program is free software: you can redistribute it and/or modify\n * it under the terms of the GNU Affero General Public License as\n * published by the Free Software Foundation, either version 3 of the\n * License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the\n * GNU Affero General Public License for more details.\n *\n * You should have received a copy of the GNU Affero General Public License\n * along with this program. If not, see <http://www.gnu.org/licenses/>.\n */\n\n\n/**\n * @author: ztomchenco\n * @version: $Id: AjaxFormSubmitter.js 9178 2015-08-10 16:48:28Z ztomchen $\n */\n\n\n\nimport _ from 'underscore';\nimport request from '../transport/request';\nimport $ from 'jquery';\n\nfunction parseResponse(document) {\n    var result, firstDocChild = null;\n    if (document.firstChild.innerText && document.firstChild.innerText !== \"\") {\n        if (document.body) {\n            result = new window.ActiveXObject(\"Microsoft.XMLDOM\");\n            result.async = false;\n            //remove injected by IE symbols\n            result.loadXML(document.firstChild.innerText.replace(\"\\r\\n-\", \"\\r\\n\"));\n        } else {\n            result = document;\n        }\n    } else {\n        result = document;\n    }\n\n    result.firstChild && (firstDocChild = result.firstChild.nodeName.toLowerCase());\n    if (!firstDocChild || firstDocChild === \"html\" || firstDocChild === \"#comment\") {\n        return {errorCode: \"unexpected.error\"}\n    }\n\n    return parseChildren((result.firstChild.nodeName.toLowerCase() === \"xml\")\n        ? result.firstChild.nextSibling : result.firstChild);\n}\n\nfunction parseChildren(node) {\n    var children, ob;\n    if (!node.children) {\n        children = [];\n        for (let i = 0, l = node.childNodes.length; i < l; i++) {\n            if (node.childNodes[i].nodeValue === null) {\n                children.push(node.childNodes[i]);\n            }\n        }\n    } else {\n        children = node.children;\n    }\n\n    if (children.length === 0 && node.childNodes.length === 1) {\n        return node.childNodes[0].nodeValue;\n    } else {\n        if (children.length > 1 && (children[0].nodeName === children[1].nodeName)) {\n            ob = [];\n            for (let i = 0, l = children.length; i < l; i++) {\n                ob[i] = parseChildren(children[i]);\n            }\n        } else {\n            ob = {};\n            for (let i = 0, l = children.length; i < l; i++) {\n                ob[children[i].nodeName] = parseChildren(children[i]);\n            }\n        }\n    }\n    return ob;\n}\n\nfunction ajaxUpload(form) {\n    var res = new $.Deferred();\n\n    form.submit(function (e) {\n        e.preventDefault();\n\n        request({\n            url: form.attr(\"action\"),\n            type: form.attr(\"method\"),\n            data: new FormData(form[0]),\n            cache: false,\n            contentType: false,\n            processData: false,\n            headers: {\n                Accept: \"application/json\"\n            }\n        }).done(function (result) {\n            res.resolve(result);\n        }).fail(function (error) {\n            error = error.responseJSON || error || {};\n\n            // default error code\n            _.defaults(error, {\n                errorCode: \"error.load.error\"\n            });\n\n            res.reject(error);\n        });\n\n        form.off(\"submit\");\n    });\n\n    form.submit();\n\n    return res;\n}\n\nfunction iframeUpload(form, name) {\n    var result = $.Deferred(),\n        iframe = $(\"<iframe style='display:none' name='\" + name + \"'></iframe>\");\n\n    form.append(iframe).attr(\"target\", name);\n\n    iframe.on(\"load\", function () {\n        try {\n            result.resolve(parseResponse(this.contentWindow.document));\n        } catch (e) {\n            result.reject({errorCode: \"error.invalid.response\"});\n        }\n\n        iframe.remove();\n    });\n\n    iframe.on(\"abort\", function () {\n        result.reject({errorCode: \"error.load.aborted\"});\n        iframe.remove();\n    });\n\n    iframe.on(\"error\", function () {\n        result.reject({errorCode: \"error.load.error\"});\n        iframe.remove();\n    });\n\n    form.submit();\n\n    return result;\n}\n\nvar AjaxUploader = function (uploadForm, url, method, enctype) {\n    this.name = _.uniqueId(\"uploadTarget\");\n    this.form = $(uploadForm);\n\n    url && this.form.attr(\"action\", url);\n    method && this.form.attr(\"method\", method);\n    enctype && this.form.attr(\"enctype\", enctype);\n\n    this.parceXmlDocToObject = parseResponse;\n};\n\nAjaxUploader.prototype.submit = function () {\n    if (window.FormData) {\n        return ajaxUpload(this.form);\n    }\n\n    return iframeUpload(this.form, this.name);\n};\n\nexport default AjaxUploader;","/*\n * Copyright (C) 2005 - 2022 TIBCO Software Inc. All rights reserved.\n * http://www.jaspersoft.com.\n *\n * Unless you have purchased a commercial license agreement from Jaspersoft,\n * the following license terms apply:\n *\n * This program is free software: you can redistribute it and/or modify\n * it under the terms of the GNU Affero General Public License as\n * published by the Free Software Foundation, either version 3 of the\n * License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the\n * GNU Affero General Public License for more details.\n *\n * You should have received a copy of the GNU Affero General Public License\n * along with this program. If not, see <http://www.gnu.org/licenses/>.\n */\n\nimport _ from 'underscore';\nimport $ from 'jquery';\nimport importModelAttributesFactory from '../factory/importModelAttributesFactory';\nimport BrokenDependencyStrategyEnum from '../enum/brokenDependencyStrategyEnum';\nimport AjaxFormSubmitter from 'js-sdk/src/common/transport/AjaxFormSubmitter';\nimport BackboneValidation from 'js-sdk/src/common/extension/backboneValidationExtension';\nimport BaseModel from 'js-sdk/src/common/model/BaseModel';\nimport secureKeyTypeEnum from '../enum/secureKeyTypeEnum';\n\nvar ImportModel = BaseModel.extend({\n    defaults: {\n        'fileName': '',\n        'update': true,\n        'skipUserUpdate': false,\n        'mergeOrganization': false,\n        'skipThemes': true,\n        'keyType': '',\n        'secretKey': '',\n        'secretUri': '',\n        'keyAlias' :'',\n        'invalidKeyError': '',\n        'invalidSecureFileContentError': '',\n        'brokenDependencies': BrokenDependencyStrategyEnum.FAIL\n    },\n    url: 'rest_v2/import',\n    validation: {\n        fileName: [{\n            fn: function (fileName) {\n                return !/\\.zip$/.test(fileName);\n            }\n        }]\n    },\n    initialize: function (attributes, options) {\n        this.form = new AjaxFormSubmitter(options.form, this.url, 'post', 'multipart/form-data');\n    },\n    parse: function () {\n        return this.attributes;\n    },\n    save: function () {\n        var self = this, result, parameters;\n        if (this.isNew()) {\n            result = new $.Deferred();\n            this.form.submit().done(function (responce) {\n                self.set('id', responce.id);\n                if (_.isUndefined(responce.errorCode) && _.isUndefined(responce.error)) {\n                    result.resolve(responce);\n                } else {\n                    result.reject(responce);\n                }\n            }).fail(function (responce) {\n                self.trigger('error', responce);\n                result.reject(responce);\n            });\n        } else {\n            parameters = this._convertParameters();\n            result = BaseModel.prototype.save.call(this, {\n                parameters: parameters\n            }, {\n                url: this.url + '/' + this.id\n            }).fail(_.bind(this.trigger, this, 'error'));\n        }\n        return result;\n    },\n    cancel: function () {\n        var url = this.url + '/' + this.id;\n        this.destroy({ url: url });\n    },\n    reset: function (type, options, customkeyElements) {\n        var defaults = _.extend({}, this.defaults, importModelAttributesFactory(type), options );\n        defaults.keyAlias = customkeyElements ? customkeyElements[0].alias :'';\n        this.clear().set(_.extend({}, defaults));\n        this.id = undefined;\n        if($('input[name =\"key-alias\"]').length){\n            $('input[name =\"key-alias\"]')[0].value = secureKeyTypeEnum.DEFAULTKEY;\n        }\n    },\n    _convertParameters: function () {\n        var parameters = [];\n\n        this.get('skipUserUpdate') && parameters.push('skip-user-update');\n        this.get('includeAccessEvents') && parameters.push('include-access-events');\n        this.get('includeAuditEvents') && parameters.push('include-audit-events');\n        this.get('includeMonitoringEvents') && parameters.push('include-monitoring-events');\n        this.get('includeServerSettings') && parameters.push('include-server-setting');\n        this.get('mergeOrganization') && parameters.push('merge-organization');\n        this.get('skipThemes') && parameters.push('skip-themes');\n        this.get('update') && parameters.push('update');\n\n        const keyType = this.get('keyType');\n\n        if (keyType) {\n            parameters.push('keyType');\n\n            if (keyType === secureKeyTypeEnum.VALUE) {\n                parameters.push('secret-key');\n            }\n\n            if (keyType === secureKeyTypeEnum.FILE) {\n                parameters.push('secret-uri');\n            }\n            if (keyType === secureKeyTypeEnum.CUSTOMKEY) {\n                parameters.push('key-alias');\n            }\n        }\n\n        return parameters;\n    }\n});\n_.extend(ImportModel.prototype, BackboneValidation.mixin);\nexport default ImportModel;","/*\n * Copyright (C) 2005 - 2022 TIBCO Software Inc. All rights reserved.\n * http://www.jaspersoft.com.\n *\n * Unless you have purchased a commercial license agreement from Jaspersoft,\n * the following license terms apply:\n *\n * This program is free software: you can redistribute it and/or modify\n * it under the terms of the GNU Affero General Public License as\n * published by the Free Software Foundation, either version 3 of the\n * License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the\n * GNU Affero General Public License for more details.\n *\n * You should have received a copy of the GNU Affero General Public License\n * along with this program. If not, see <http://www.gnu.org/licenses/>.\n */\n\nimport ExportStateModel from '../../export/model/ExportStateModel';\n\nexport default ExportStateModel.extend({\n    url: function () {\n        return 'rest_v2/import/' + this.id + '/state';\n    }\n});","/*\n * Copyright (C) 2005 - 2022 TIBCO Software Inc. All rights reserved.\n * http://www.jaspersoft.com.\n *\n * Unless you have purchased a commercial license agreement from Jaspersoft,\n * the following license terms apply:\n *\n * This program is free software: you can redistribute it and/or modify\n * it under the terms of the GNU Affero General Public License as\n * published by the Free Software Foundation, either version 3 of the\n * License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the\n * GNU Affero General Public License for more details.\n *\n * You should have received a copy of the GNU Affero General Public License\n * along with this program. If not, see <http://www.gnu.org/licenses/>.\n */\n\nexport default {\n    BROKEN_DEPS: 'import.broken.dependencies',\n    TENANT_MISMATCH: 'import.organizations.not.match'\n};","export default \"<p class=\\\"message\\\">\\n\\n    <js-templateNonce></js-templateNonce>\\n    {{- i18n['import.dialog.merge.tenant.intro'] }}</p>\\n\\n<p class=\\\"message imported-tenant\\\"><b>{{- i18n['import.dialog.merge.tenant.imported'] }} : </b> {{- fileTenantId}} </p>\\n<p class=\\\"message selected-tenant\\\"><b>{{- i18n['import.dialog.merge.tenant.selected'] }} : </b> {{- selectedTenantId}} </p>\\n\\n<p class=\\\"message\\\">{{- i18n['import.dialog.merge.tenant.outro'] }} {{- selectedTenantId}}</p>\\n\";","/*\n * Copyright (C) 2005 - 2022 TIBCO Software Inc. All rights reserved.\n * http://www.jaspersoft.com.\n *\n * Unless you have purchased a commercial license agreement from Jaspersoft,\n * the following license terms apply:\n *\n * This program is free software: you can redistribute it and/or modify\n * it under the terms of the GNU Affero General Public License as\n * published by the Free Software Foundation, either version 3 of the\n * License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the\n * GNU Affero General Public License for more details.\n *\n * You should have received a copy of the GNU Affero General Public License\n * along with this program. If not, see <http://www.gnu.org/licenses/>.\n */\n\nimport _ from 'underscore';\nimport i18n from 'js-sdk/src/i18n/CommonBundle.properties';\nimport i18n2 from '../../../i18n/ImportExportBundle.properties';\nimport BaseWarningDialogView from '../../view/BaseWarningDialogView';\nimport template from '../template/mergeTenantDialogTemplate.htm';\n\nexport default BaseWarningDialogView.extend({\n    constructor: function (options) {\n        options || (options = {});\n        _.extend(options, {\n            resizable: true,\n            additionalCssClasses: 'merge-tenant-dialog',\n            title: i18n2['import.dialog.merge.tenant.title'],\n            buttons: [\n                {\n                    label: i18n2['import.button.continue'],\n                    action: 'import',\n                    primary: true\n                },\n                {\n                    label: i18n['button.cancel'],\n                    action: 'cancel',\n                    primary: false\n                }\n            ],\n            template: template\n        });\n        BaseWarningDialogView.prototype.constructor.call(this, options);\n        this.on('button:import', _.bind(this.close, this));\n        this.on('button:cancel', _.bind(this.close, this));\n    },\n    open: function (options) {\n        _.extend(options, { i18n: i18n2 });\n        BaseWarningDialogView.prototype.open.call(this, options);\n    }\n});","/*\n * Copyright (C) 2005 - 2022 TIBCO Software Inc. All rights reserved.\n * http://www.jaspersoft.com.\n *\n * Unless you have purchased a commercial license agreement from Jaspersoft,\n * the following license terms apply:\n *\n * This program is free software: you can redistribute it and/or modify\n * it under the terms of the GNU Affero General Public License as\n * published by the Free Software Foundation, either version 3 of the\n * License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the\n * GNU Affero General Public License for more details.\n *\n * You should have received a copy of the GNU Affero General Public License\n * along with this program. If not, see <http://www.gnu.org/licenses/>.\n */\n\nimport _ from 'underscore';\nimport i18n from 'js-sdk/src/i18n/CommonBundle.properties';\nimport i18n2 from '../../../i18n/ImportExportBundle.properties';\nimport BaseWarningDialogView from '../../view/BaseWarningDialogView';\n\nexport default BaseWarningDialogView.extend({\n    constructor: function (options) {\n        options || (options = {});\n        _.extend(options, {\n            resizable: true,\n            buttons: [\n                {\n                    label: i18n2['import.button.include'],\n                    action: 'include',\n                    primary: true\n                },\n                {\n                    label: i18n2['import.button.skip'],\n                    action: 'skip',\n                    primary: false\n                },\n                {\n                    label: i18n['button.cancel'],\n                    action: 'cancel',\n                    primary: false\n                }\n            ]\n        });\n        BaseWarningDialogView.prototype.constructor.call(this, options);\n        this.on('button:include', _.bind(this.close, this));\n        this.on('button:skip', _.bind(this.close, this));\n        this.on('button:cancel', _.bind(this.close, this));\n    },\n    open: function (options) {\n        _.extend(options, { message: i18n2['import.dialog.broken.dependencies.intro'] });\n        BaseWarningDialogView.prototype.open.call(this, options);\n    }\n});","/*\n * Copyright (C) 2005 - 2022 TIBCO Software Inc. All rights reserved.\n * http://www.jaspersoft.com.\n *\n * Unless you have purchased a commercial license agreement from Jaspersoft,\n * the following license terms apply:\n *\n * This program is free software: you can redistribute it and/or modify\n * it under the terms of the GNU Affero General Public License as\n * published by the Free Software Foundation, either version 3 of the\n * License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the\n * GNU Affero General Public License for more details.\n *\n * You should have received a copy of the GNU Affero General Public License\n * along with this program. If not, see <http://www.gnu.org/licenses/>.\n */\n\nimport _ from 'underscore';\nimport i18n from 'js-sdk/src/i18n/CommonBundle.properties';\nimport i18n2 from '../../../i18n/ImportExportBundle.properties';\nimport BaseWarningDialogView from '../../view/BaseWarningDialogView';\n\nexport default BaseWarningDialogView.extend({\n    constructor: function (options) {\n        options || (options = {});\n        _.extend(options, {\n            resizable: true,\n            title: i18n2['import.dialog.warnings.title'],\n            additionalCssClasses: 'warnings-dialog',\n            buttons: [{\n                label: i18n['button.close'],\n                action: 'close',\n                primary: false\n            }]\n        });\n        BaseWarningDialogView.prototype.constructor.call(this, options);\n        this.on('button:close', _.bind(this.close, this));\n    }\n});","/*\n * Copyright (C) 2005 - 2022 TIBCO Software Inc. All rights reserved.\n * http://www.jaspersoft.com.\n *\n * Unless you have purchased a commercial license agreement from Jaspersoft,\n * the following license terms apply:\n *\n * This program is free software: you can redistribute it and/or modify\n * it under the terms of the GNU Affero General Public License as\n * published by the Free Software Foundation, either version 3 of the\n * License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the\n * GNU Affero General Public License for more details.\n *\n * You should have received a copy of the GNU Affero General Public License\n * along with this program. If not, see <http://www.gnu.org/licenses/>.\n */\n\n/**\n * @author: Olesya Bobruyko\n * @version: $Id$\n */\n\nimport i18n from '../../../i18n/ImportExportBundle.properties';\nimport _ from 'underscore';\n\nvar errorCodeToMessageMap = {};\n\nerrorCodeToMessageMap[\"import.resource.uri.too.long\"] = [\n    {\n        msg: i18n[\"import.resource.uri.too.long\"],\n        parameters: [\"resourceURI\"]\n    },\n    {\n        msg: i18n[\"import.resource.uri.too.long.length\"],\n        parameters: [\"resourceURI\", \"maxURILength\"]\n    }\n];\n\nerrorCodeToMessageMap[\"import.access.denied\"] = [\n    {\n        msg: i18n[\"import.access.denied\"],\n        parameters: [\"resourceURI\"]\n    }\n];\n\nerrorCodeToMessageMap[\"import.resource.not.found\"] = [\n    {\n        msg: i18n[\"import.resource.not.found\"],\n        parameters: [\"resourceURI\"]\n    }\n];\n\nerrorCodeToMessageMap[\"import.resource.different.type.already.exists\"] = [\n    {\n        msg: i18n[\"import.resource.different.type.already.exists\"],\n        parameters: [\"resourceURI\"]\n    }\n];\n\nerrorCodeToMessageMap[\"import.resource.uri.not.valid\"] = [\n    {\n        msg: i18n[\"import.resource.uri.not.valid\"],\n        parameters: [\"resourceURI\"]\n    }\n];\n\nerrorCodeToMessageMap[\"import.resource.data.missing\"] = [\n    {\n        msg: i18n[\"import.resource.data.missing\"],\n        parameters: [\"resourceURI\"]\n    }\n];\n\nerrorCodeToMessageMap[\"import.reference.resource.not.found\"] = [\n    {\n        msg: i18n[\"import.reference.resource.not.found\"],\n        parameters: [\"resourceURI\"]\n    },\n    {\n        msg: i18n[\"import.reference.dependent.resource.not.found\"],\n        parameters: [\"dependentResourceURI\", \"resourceURI\"]\n    }\n];\n\nerrorCodeToMessageMap[\"import.resource.attached.not.exist.org\"] = [\n    {\n        msg: i18n[\"import.resource.attached.not.exist.org\"],\n        parameters: [\"resourceURI\"]\n    }\n];\n\nerrorCodeToMessageMap[\"import.folder.attached.not.exist.org\"] = [\n    {\n        msg: i18n[\"import.folder.attached.not.exist.org\"],\n        parameters: [\"resourceURI\"]\n    }\n];\n\nerrorCodeToMessageMap[\"import.multi.tenancy.not.supported\"] = [\n    {\n        msg: i18n[\"import.multi.tenancy.not.supported\"],\n        parameters: [\"organizationId\"]\n    }\n];\n\nerrorCodeToMessageMap[\"import.skip.resource\"] = [\n    {\n        msg: i18n[\"import.skip.resource\"],\n        parameters: [\"resourceURI\"]\n    }\n];\n\nerrorCodeToMessageMap[\"import.report.job.reference.resource.not.found\"] = [\n    {\n        msg: i18n[\"import.report.job.reference.resource.not.found\"],\n        parameters: [\"resourceURI\"]\n    },\n    {\n        msg: i18n[\"import.report.job.reference.dependent.resource.not.found\"],\n        parameters: [\"dependentResourceURI\", \"resourceURI\"]\n    }\n];\n\nfunction getParamsObject(paramsNames, parameters) {\n    var paramsObj = {};\n\n    _.each(paramsNames, function(param, index) {\n        paramsObj[param] = parameters[index];\n    });\n\n    return paramsObj;\n}\n\nexport default function(warning) {\n    var code = warning.code,\n        parameters = warning.parameters,\n        msgObj = errorCodeToMessageMap[code],\n        msg;\n\n    msg = _.template(msgObj[parameters.length - 1].msg)(getParamsObject(msgObj[parameters.length - 1].parameters, parameters));\n\n    return msg;\n}","/*\n * Copyright (C) 2005 - 2022 TIBCO Software Inc. All rights reserved.\n * http://www.jaspersoft.com.\n *\n * Unless you have purchased a commercial license agreement from Jaspersoft,\n * the following license terms apply:\n *\n * This program is free software: you can redistribute it and/or modify\n * it under the terms of the GNU Affero General Public License as\n * published by the Free Software Foundation, either version 3 of the\n * License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the\n * GNU Affero General Public License for more details.\n *\n * You should have received a copy of the GNU Affero General Public License\n * along with this program. If not, see <http://www.gnu.org/licenses/>.\n */\n\nexport default {\n    INVALID_SECRET_KEY: 'import.invalid.secretKey',\n    INVALID_SECRET_KEY_LENGTH: 'import.invalid.secretKey.length',\n    INVALID_SECRET_FILE_CONTENT: 'import.invalid.secretUri.secretFile',\n    INVALID_SECRET_FILE: 'import.invalid.secretUri',\n    IMPORT_DECODE_FAILED: 'import.decode.failed'\n}","/*\n * Copyright (C) 2005 - 2022 TIBCO Software Inc. All rights reserved.\n * http://www.jaspersoft.com.\n *\n * Unless you have purchased a commercial license agreement from Jaspersoft,\n * the following license terms apply:\n *\n * This program is free software: you can redistribute it and/or modify\n * it under the terms of the GNU Affero General Public License as\n * published by the Free Software Foundation, either version 3 of the\n * License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the\n * GNU Affero General Public License for more details.\n *\n * You should have received a copy of the GNU Affero General Public License\n * along with this program. If not, see <http://www.gnu.org/licenses/>.\n */\n\nimport importRestErrorCodesEnum from '../enum/importRestErrorCodesEnum';\nimport i18n from '../../../i18n/ImportExportBundle.properties';\nimport awsSettings from '../../../settings/awsSettings.settings';\n\nconst getImportDecodeFailedError = () => {\n    if (awsSettings.productTypeIsJrsAmi || awsSettings.productTypeIsMpAmi) {\n        return i18n['import.decode.failed.aws'];\n    }\n\n    return i18n['import.decode.failed'];\n};\n\nconst restErrorCodeToErrorProviderMap = {\n    [importRestErrorCodesEnum.IMPORT_DECODE_FAILED]: getImportDecodeFailedError\n};\n\nexport default {\n    create(errorCode) {\n        const errorProvider = restErrorCodeToErrorProviderMap[errorCode];\n\n        if (errorProvider) {\n            return errorProvider();\n        }\n\n        return i18n[errorCode] || i18n[\"import.error.unexpected\"];\n    }\n}","/*\n * Copyright (C) 2005 - 2022 TIBCO Software Inc. All rights reserved.\n * http://www.jaspersoft.com.\n *\n * Unless you have purchased a commercial license agreement from Jaspersoft,\n * the following license terms apply:\n *\n * This program is free software: you can redistribute it and/or modify\n * it under the terms of the GNU Affero General Public License as\n * published by the Free Software Foundation, either version 3 of the\n * License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the\n * GNU Affero General Public License for more details.\n *\n * You should have received a copy of the GNU Affero General Public License\n * along with this program. If not, see <http://www.gnu.org/licenses/>.\n */\n\n\n/**\n * @author: Zakhar Tomchenko\n * @version:\n */\n\nimport $ from 'jquery';\nimport _ from 'underscore';\nimport Backbone from 'backbone';\nimport ImportModel from '../model/ImportModel';\nimport ImportStateModel from '../model/ImportStateModel';\nimport ImportPendingStateEnum from '../enum/importPendingStatesEnum';\nimport BrokenDependencyStrategyEnum from '../enum/brokenDependencyStrategyEnum';\nimport LoadingDialog from '../../export/view/LoadingDialog';\nimport MergeTenantDialogView from './MergeTenantDialogView';\nimport ImportDependentResourcesDialogView from './ImportDependentResourcesDialogView';\nimport ImportWarningsDialogView from './ImportWarningsDialogView';\nimport warningsFactory from '../factory/warningsFactory';\nimport Notification from 'js-sdk/src/common/component/notification/Notification';\nimport epoxyViewMixin from 'js-sdk/src/common/view/mixin/epoxyViewMixin';\nimport importTemplate from '../template/importTemplate.htm';\nimport i18n from '../../../i18n/ImportExportBundle.properties';\nimport i18n2 from 'js-sdk/src/i18n/CommonBundle.properties';\nimport secretKeyTemplate from '../../templates/secretKeyTemplate.htm' ;\nimport CustomKeyModel from '../../model/CustomKeyModel'\nimport RepositoryChooserDialogFactory from 'bi-repository/src/bi/repository/dialog/resourceChooser/RepositoryChooserDialogFactory';\nimport settings from \"../../../settings/treeComponent.settings\";\nimport repositoryResourceTypes from \"bi-repository/src/bi/repository/enum/repositoryResourceTypes\";\nimport secureKeyTypeEnum from '../enum/secureKeyTypeEnum';\nimport importRestErrorCodesEnum from '../enum/importRestErrorCodesEnum';\n\nimport importErrorMessageFactory from '../factory/importErrorMessageFactory';\n\nvar ImportView = Backbone.View.extend({\n    tagName: \"form\",\n    className: \"import-view\",\n    id: \"importDataFile\",\n\n    events: {\n        \"change input[type='file']\": \"validateFile\",\n        \"change input.jr-jDefaultKey, input.jr-jKeyValue, input.jr-jKeyFile , input.jr-juniversalKeyValue,  input.jr-jCustomKey\": \"_onKeyTypeChange\",\n        \"input input.jr-jSecretKey\": \"_onSecretKeyInput\",\n        \"input input.jr-jSecretUri\": \"_onSecretFileInput\",\n        \"click button.jr-jRepositoryBrowserButton\": \"_onRepositoryBrowserButtonClick\",\n        \"click .checkBox label\": \"_clickOnCheckbox\",\n        \"change .control.select.inline\": \"_onCustomKeyInput\"\n    },\n\n    computeds: {\n        'isKeyUseUniversal': {\n            deps: ['keyType'],\n            get: function(keyType) {\n                return keyType === secureKeyTypeEnum.UNIVERSALKEY;\n            }\n        },\n        'isKeyUseCustom': {\n            deps: ['keyType'],\n            get: function get(keyType) {\n                return keyType === secureKeyTypeEnum.CUSTOMKEY ;\n            }\n        },\n        'isKeyUseValue': {\n            deps: ['keyType'],\n            get: function(keyType) {\n                return keyType === secureKeyTypeEnum.VALUE;\n            }\n        },\n        'isKeyUseFile': {\n            deps: ['keyType'],\n            get: function(keyType) {\n                return keyType === secureKeyTypeEnum.FILE;\n            }\n        }\n    },\n\n    initialize:function (options = {}) {\n        this.model || (this.model = new ImportModel(null, {form: this.el}));\n\n        this.stateModel = new ImportStateModel();\n\n        this.customKeyStateModel = new CustomKeyModel();\n\n        this.loadingDialog = new LoadingDialog({\n            content: i18n2[\"dialog.overlay.loading\"]\n        });\n\n        const Dialog = RepositoryChooserDialogFactory.getDialog('item');\n\n        this.keyFileDialog = options.keyFileDialog || new Dialog({\n            disableListTab: true,\n            treeBufferSize: parseInt(settings.treeLevelLimit, 10),\n            resourcesTypeToSelect: [repositoryResourceTypes.SECURE_FILE]\n        });\n\n        this.keyFileDialog.on('close', () => {\n            if (this.keyFileDialog.selectedResource && this.keyFileDialog.selectedResource.resourceUri) {\n                const resourceUri = this.keyFileDialog.selectedResource.resourceUri;\n\n                this.model.set('secretUri', resourceUri);\n                this._clearSecureKeyErrors();\n            }\n        });\n\n        this.mergeTenantDialogView = new MergeTenantDialogView();\n        this.dependentResourcesDialogView = new ImportDependentResourcesDialogView();\n        this.warningsDialogView = new ImportWarningsDialogView();\n\n        this.notification = new Notification();\n\n        this.listenTo(this.stateModel, \"change:phase\", this._handleImportPhase, this);\n\n        var notFoundNotification = {\n                delay: false,\n                message: i18n[\"import.error.cancelled\"]\n            },\n            unexpectedErrorNotification = {\n                delay: false,\n                message: i18n[\"import.error.unexpected\"]\n            };\n\n        this.listenTo(this.model, \"change\", this._onModelChange);\n\n        this.listenTo(this.model, \"error:notFound\", _.bind(this.notification.show, this.notification, notFoundNotification));\n        this.listenTo(this.stateModel, \"error:notFound\", _.bind(this.notification.show, this.notification, notFoundNotification));\n\n        this.listenTo(this.model, \"error:internalServerError\", _.bind(this.notification.show, this.notification, unexpectedErrorNotification));\n        this.listenTo(this.stateModel, \"error:internalServerError\", _.bind(this.notification.show, this.notification, unexpectedErrorNotification));\n\n        this.listenTo(this.model, \"error\", _.bind(this.loadingDialog.close, this.loadingDialog));\n        this.listenTo(this.stateModel, \"error\", _.bind(this.loadingDialog.close, this.loadingDialog));\n\n        this.listenTo(this.mergeTenantDialogView, \"button:import\", function() {\n            this.model.set(\"mergeOrganization\", true);\n            if (this.model.get('keyType') === '') {\n                this.model.set('keyAlias', secureKeyTypeEnum.DEFAULTKEY);\n            } else if (this.model.get('keyType') === secureKeyTypeEnum.UNIVERSALKEY) {\n                this.model.set('keyAlias', secureKeyTypeEnum.UNIVERSALKEY);\n            }\n            this.doImport();\n        }, this);\n\n        this.listenTo(this.mergeTenantDialogView, \"button:cancel\", _.bind(cancelImportTask, this, ImportStateModel.STATE.CANCELLED));\n\n        this.listenTo(this.dependentResourcesDialogView, \"button:skip\", applyBrokenDependencyStrategy(this, BrokenDependencyStrategyEnum.SKIP));\n        this.listenTo(this.dependentResourcesDialogView, \"button:include\", applyBrokenDependencyStrategy(this, BrokenDependencyStrategyEnum.INCLUDE));\n        this.listenTo(this.dependentResourcesDialogView, \"button:cancel\", _.bind(cancelImportTask, this, ImportStateModel.STATE.CANCELLED));\n\n        this.epoxifyView();\n    },\n\n    render: function (options) {\n        var self = this;\n        this.type = options.type;\n\n        this.model.reset(this.type, {organization: options.tenantId});\n\n        this.$el.html(_.template(importTemplate)({\n            i18n: i18n,\n            i18n2: i18n2,\n            model: _.extend(this.model.toJSON(), {\n                secureKeyTypes: secureKeyTypeEnum\n            })\n        }));\n        this.customKeyStateModel.getCustomKeys().done(function(response) {\n            if( response && response.length === 0){\n                renderSecTemplate(self, false);\n            }else if(response && response.responseJSON && response.responseJSON.error){\n                customKeyFailure(self, response);\n            } else {\n                self.customKeyElements = response;\n                self.model.set('keyAlias',response[0].alias);\n                renderSecTemplate(self, true);\n                for (var i = 0; i < response.length; ++i) {\n                    var element = $(\"<option />\").attr(\"value\", response[i].alias);\n                    element.text(response[i].label ? response[i].label : response[i].alias);\n                    self.$el.find('#importCustomKey').append(element);\n                }\n            }\n            self.applyEpoxyBindings();\n        }).fail(function(response) {\n            customKeyFailure(self, response);\n        });\n        return this;\n    },\n\n    validateFile: function (evt) {\n        this.model.set(\"fileName\", $(evt.target).val());\n\n        var $file = $(evt.target),\n            $parent = $file.parent();\n\n        if (this.model.isValid(true)) {\n            $parent.removeClass(\"error\");\n        } else {\n            $parent.addClass(\"error\");\n        }\n    },\n\n    doImport: function () {\n        let dfd = new $.Deferred();\n\n        var self = this;\n\n        this.loadingDialog.open();\n\n        if (this.model.isValid(true)) {\n            dfd = this.model.save().fail((res) => {\n                this._onImportFail(res);\n            }).always(function (res) {\n                self.stateModel.set(res);\n            });\n        } else {\n            dfd.reject();\n        }\n\n        return dfd;\n    },\n\n    _onImportFail: function(res) {\n        const errorCode = res.errorCode;\n\n        if (errorCode === importRestErrorCodesEnum.INVALID_SECRET_KEY) {\n            this.model.set('invalidKeyError', i18n['import.invalid.secretKey']);\n        } else if (errorCode === importRestErrorCodesEnum.INVALID_SECRET_FILE_CONTENT) {\n            this.model.set('invalidSecureFileContentError', i18n['import.invalid.secretUri.secretFile']);\n        } else if (errorCode === importRestErrorCodesEnum.INVALID_SECRET_FILE) {\n            this.model.set('invalidSecureFileContentError', i18n['import.invalid.secretUri']);\n        } else if (errorCode === importRestErrorCodesEnum.INVALID_SECRET_KEY_LENGTH) {\n            this.model.set('invalidKeyError', i18n['import.invalid.secretKey.length']);\n        }\n    },\n\n    _handleImportPhase: function() {\n        var phase = this.stateModel.get(\"phase\");\n\n        if (phase !== ImportStateModel.STATE.INPROGRESS) {\n            this.loadingDialog.close();\n        }\n\n        if (phase === ImportStateModel.STATE.READY) {\n            finishImport.call(this, \"import.finished\", \"success\");\n        }\n        else if (phase === ImportStateModel.STATE.FAILED) {\n            if (this.stateModel.get(\"error\") && this.stateModel.get(\"error\").errorCode) {\n                finishImport.call(this, this.stateModel.get(\"error\").errorCode);\n            } else if (this.stateModel.get(\"message\")) {\n                finishImport.call(this, this.stateModel.get(\"message\"));\n            }\n        } else if (phase === ImportStateModel.STATE.CANCELLED) {\n            finishImport.call(this, \"import.error.cancelled\");\n        }\n        else if (phase === ImportStateModel.STATE.PENDING) {\n            finishPendingImport.call(this);\n        }\n    },\n\n    _onRepositoryBrowserButtonClick: function() {\n        this.keyFileDialog.open();\n    },\n\n    _clearSecureKeyErrors: function() {\n        this.model.set({\n            'invalidKeyError': '',\n            'invalidSecureFileContentError': ''\n        });\n    },\n\n    _onKeyTypeChange: function(event) {\n        let radioValue = event.target.value;\n        let element = this.$el.find('input[name =\"key-alias\"]')[0];\n        let index = this.$el.find('#importCustomKey')[0] && this.$el.find('#importCustomKey')[0].selectedIndex;\n        if(radioValue == secureKeyTypeEnum.CUSTOMKEY) {\n            element.value = $(\".control.select.inline\").find('option')[index].value;\n        }else if(radioValue == secureKeyTypeEnum.UNIVERSALKEY ){\n            element.value = radioValue;\n        }else if(radioValue == ''){\n            element.value = secureKeyTypeEnum.DEFAULTKEY;\n        }else{\n            element.value ='' ;\n        }\n        this.model.set('keyType', radioValue);\n\n        this._clearSecureKeyErrors();\n    },\n\n    _onSecretKeyInput: function(event) {\n        const value = event.target.value;\n\n        this.model.set('secretKey', value, {silent: true});\n\n        this._clearSecureKeyErrors();\n    },\n\n    _onSecretFileInput: function(event) {\n        const value = event.target.value;\n\n        this.model.set('secretUri', value, {silent: true});\n\n        this._clearSecureKeyErrors();\n    },\n\n    _clickOnCheckbox:function (evt) {\n        var checkbox = $(evt.target).next();\n        if (!checkbox[0].disabled) {\n            checkbox[0].checked = !checkbox[0].checked;\n            checkbox.trigger(\"change\");\n        }\n    },\n\n    _onCustomKeyInput: function(evt){\n        const index = evt.target.selectedIndex;\n        const  element = $(\".control.select.inline\").find('option')[index];\n        this.model.set('keyAlias', element.value, {silent: true});\n        this.$el.find('input[name =\"key-alias\"]')[0].value = element.value;\n    },\n\n    _onModelChange: function() {\n        this.model.isValid(true);\n    }\n});\n\n_.extend(ImportView.prototype, epoxyViewMixin);\n\nfunction customKeyFailure(self, response) {\n    renderSecTemplate(self, false);\n    self.applyEpoxyBindings();\n    self.notification.show({\n        delay: false,\n        message: response && response.responseJSON && response.responseJSON.message\n    });\n    self.trigger('error', self, response);\n}\n\nfunction renderSecTemplate(self, showCustomKey) {\n    $(_.template(secretKeyTemplate, {\n        i18n: i18n,\n        i18n2: i18n2,\n        model: _.extend(self.model.toJSON(), {\n            secureKeyTypes: secureKeyTypeEnum\n        }),\n        showCustomKey: showCustomKey,\n        showKeyValue: true,\n        exportMode: false\n    })).insertAfter(self.$el.find('fieldset:first'));\n}\nfunction getWarnings() {\n    var warnings = this.stateModel.get(\"warnings\");\n\n    return _.map(warnings, function(value) {\n        return warningsFactory(value);\n    });\n}\n\nfunction finishImport(code, notificationType) {\n    notificationType = notificationType || \"warning\";\n\n    var warnings = getWarnings.call(this);\n\n    if (code === \"import.finished\" && !_.isEmpty(warnings)) {\n        this.warningsDialogView.open({items: warnings});\n    }\n\n    this.notification.show({\n        delay: false,\n        message: importErrorMessageFactory.create(code),\n        type: notificationType\n    });\n\n    this.trigger(\"import:finished\", this.model.get(\"organization\"));\n\n    this.model.reset(this.type, {}, this.customKeyElements);\n}\n\nfunction finishPendingImport(){\n    var error = this.stateModel.get(\"error\");\n\n    if (error.errorCode === ImportPendingStateEnum.BROKEN_DEPS){\n        this.dependentResourcesDialogView.open({items: error.parameters});\n\n    } else if (error.errorCode === ImportPendingStateEnum.TENANT_MISMATCH){\n        this.mergeTenantDialogView.open({fileTenantId: error.parameters[0], selectedTenantId: this.model.get(\"organization\")});\n    }\n}\n\nfunction applyBrokenDependencyStrategy(self, strategy){\n    return function(str){\n        self.model.set(\"brokenDependencies\", strategy);\n        self.doImport();\n    };\n}\n\nfunction cancelImportTask(phase) {\n    this.model.cancel();\n    this.stateModel.set(\"phase\", phase);\n}\n\nexport default ImportView;","export default \"<input name=\\\"organization\\\" class=\\\"\\\" type=\\\"hidden\\\" data-bind=\\\"value:organization\\\"/>\\n\\n    <js-templateNonce></js-templateNonce>\\n\\n<fieldset class=\\\"group\\\">\\n    <legend class=\\\"\\\">\\n        <span>{{- i18n['import.file.name'] }}</span>\\n    </legend>\\n    <label for=\\\"uploadFile\\\">\\n        <input name=\\\"file\\\" class=\\\"upload-file\\\" id=\\\"uploadFile\\\" type=\\\"file\\\"/>\\n    </label>\\n</fieldset>\\n<fieldset class=\\\"group\\\">\\n    <legend class=\\\"\\\">\\n        <span>{{- i18n['import.options'] }}</span>\\n    </legend>\\n    <ul class=\\\"list inputSet\\\">\\n        <li class=\\\"leaf\\\">\\n            <div class=\\\"control checkBox\\\">\\n                <label class=\\\"wrap\\\" title=\\\"\\\" for=\\\"update\\\">{{- i18n['import.update'] }}</label>\\n                <input id=\\\"update\\\" class=\\\"\\\" type=\\\"checkbox\\\" value=\\\"\\\" name=\\\"update\\\" data-bind=\\\"checked:update\\\"/>\\n            </div>\\n            <ul class=\\\"list inputSet\\\">\\n                <li class=\\\"leaf\\\">\\n                    <div class=\\\"control checkBox\\\">\\n                        <label class=\\\"wrap\\\" title=\\\"\\\">{{- i18n['import.skip.user.update']\\n                            }}</label>\\n                        <input id=\\\"skipUserUpdate\\\" class=\\\"\\\" type=\\\"checkbox\\\" value=\\\"\\\" name=\\\"skip-user-update\\\"\\n                               data-bind=\\\"checked:skipUserUpdate, enabled:update\\\"/>\\n                    </div>\\n                </li>\\n            </ul>\\n        </li>\\n\\n        {{ if (model.includeAuditEvents) { }}\\n        <li class=\\\"leaf\\\">\\n            <div class=\\\"control checkBox\\\">\\n                <label class=\\\"wrap\\\" title=\\\"\\\">{{- i18n['import.include.audit.events']}}</label>\\n                <input id=\\\"includeAuditEvents\\\" class=\\\"\\\" type=\\\"checkbox\\\" name=\\\"include-audit-events\\\"\\n                       data-bind=\\\"checked:includeAuditEvents\\\"/>\\n            </div>\\n        </li>\\n\\n        {{ } if (model.includeAccessEvents) { }}\\n        <li class=\\\"leaf\\\">\\n            <div class=\\\"control checkBox\\\">\\n                <label class=\\\"wrap\\\" title=\\\"\\\">{{- i18n['import.include.access.events']}}</label>\\n                <input id=\\\"includeAccessEvents\\\" class=\\\"\\\" type=\\\"checkbox\\\" value=\\\"\\\" name=\\\"include-access-events\\\"\\n                       data-bind=\\\"checked:includeAccessEvents\\\"/>\\n            </div>\\n        </li>\\n\\n        {{ } if (model.includeMonitoringEvents) { }}\\n        <li class=\\\"leaf\\\">\\n            <div class=\\\"control checkBox\\\">\\n                <label class=\\\"wrap\\\" title=\\\"\\\">{{- i18n['import.include.monitoring.events'] }}</label>\\n                <input id=\\\"includeMonitoringEvents\\\" class=\\\"\\\" type=\\\"checkbox\\\" value=\\\"\\\" name=\\\"include-monitoring-events\\\"\\n                       data-bind=\\\"checked:includeMonitoringEvents\\\"/>\\n            </div>\\n        </li>\\n\\n        {{ } if (model.includeServerSettings) { }}\\n        <li class=\\\"leaf\\\">\\n            <div class=\\\"control checkBox\\\">\\n                <label class=\\\"wrap\\\">{{- i18n['import.include.configuration.settings']}}</label>\\n                <input class=\\\"\\\" type=\\\"checkbox\\\" value=\\\"\\\" name=\\\"include-server-settings\\\"\\n                       data-bind=\\\"checked:includeServerSettings\\\"/>\\n            </div>\\n        </li>\\n        {{ } if (typeof model.skipThemes !== \\\"undefined\\\") { }}\\n\\n        <li class=\\\"leaf\\\">\\n            <div class=\\\"control checkBox\\\">\\n                <label class=\\\"wrap\\\" title=\\\"\\\">{{- i18n['import.include.themes']}}</label>\\n                <input type=\\\"checkbox\\\" value=\\\"\\\"\\n                       data-bind=\\\"checked:not(skipThemes)\\\"/>\\n                <input class=\\\"hidden\\\" id=\\\"skip-themes\\\" type=\\\"checkbox\\\"  value=\\\"\\\" name=\\\"skip-themes\\\"\\n                       data-bind=\\\"checked:skipThemes\\\"/>\\n            </div>\\n        </li>\\n        {{ } }}\\n    </ul>\\n</fieldset>\\n\\n<!-- Hack for correct sending of multipart/form-data in IE. -->\\n<!-- Here is the fix https://blog.yorkxin.org/posts/2014/02/06/ajax-with-formdata-is-broken-on-ie10-ie11/ -->\\n<input type=\\\"hidden\\\" name=\\\"_dontcare\\\">\\n<input type=\\\"hidden\\\" name=\\\"key-alias\\\" value=\\\"{{- model.secureKeyTypes.DEFAULTKEY }}\\\">\";"],"sourceRoot":""}