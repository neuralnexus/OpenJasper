(self.webpackChunkjrs_ui=self.webpackChunkjrs_ui||[]).push([[6539],{46539:(e,t,i)=>{"use strict";i.d(t,{Z:()=>M});var d,r=i(72157),s=i.n(r),o=i(72861),n=i(52499),l=i(33806),a=i(64155),h={trees:{},nodes:{},treeNodeEdited:null,editaborted:!1,activeTreeId:null,Tree:function(e,t){this.id=e,t?(this.setRootNode(t.root),this.bShowRoot=!!t.bShowRoot,this.handleNodeOnDblclick=void 0===t.handleNodeOnDblclick||t.handleNodeOnDblclick,this.multiSelectEnabled=!!t.multiSelectEnabled,this.showAllNodesOnStartup=!!t.showAllNodesOnStartup,this.treeClassName=t.treeClassName?t.treeClassName:"",this.dragPattern=t.dragPattern,this.dragClasses=t.dragClasses,this.dropClasses=t.dropClasses,this.selectOnMousedown=t.selectOnMousedown,this.regionID=t.regionID,this.scroll=t.scroll,this.templateDomId=t.templateDomId?t.templateDomId:this.DEFAULT_TREE_TEMPLATE_ID,this.allowHyperlinks=!t.escapeHyperlinks):(this.templateDomId=this.DEFAULT_TREE_TEMPLATE_ID,this.handleNodeOnDblclick=!0),this.stateObject={},this.sortNodes=!0,this.sorters=[this.sortByOrder,this.sortByName],this.selectedNodes=[],this.TREE_NN_ITEMS_SELECTED="#{count} items selected",h.trees[this.id]=this,this._createFromTemplate(),this.refreshStyle(),this._registerEvents(),this._registerCustomScroll()},getNextId:(d=1,function(){return d++}),getActiveTree:function(){return h.trees[h.activeTreeId]},getTreeNode:function(e){return h.nodes[e]},getStorageVal:function(e){return(JSON.parse(window.localStorage.getItem("dynamicTree"))||{})[e]||null},setStorageVal:function(e,t){var i=window.localStorage,d=JSON.parse(i.getItem("dynamicTree"))||{};d[e]=t;try{i.setItem("dynamicTree",JSON.stringify(d))}catch(e){window.console&&console.log(e)}},_templateHash:{}};h.Tree.addVar("DEFAULT_TREE_TEMPLATE_ID","list_responsive_collapsible"),h.Tree.addVar("HIDE_ROOT_CLASS_NAME","hideRoot"),h.Tree.addMethod("getId",(function(){return this.id})),h.Tree.addMethod("_getElement",(function(){return this._element||(this._element=s()("#"+this.id)[0]),this._element})),h.Tree.addMethod("_createFromTemplate",(function(){this._getElement()&&(this._getElement().insert({after:this._getTemplateElement(this._getElement())}),this._getElement().remove(),this._element=null,this._getElement()&&this._getElement().update())})),h.Tree.addMethod("_registerCustomScroll",(function(){if(!this.scroll&&this._getElement()){var e=this._getElement().up(l.Z.SWIPE_SCROLL_PATTERN);if(e){var t=l.Z.scrolls.get(e.identify());t&&(this.scroll=t)}}})),h.Tree.addMethod("setRootNode",(function(e){this.rootNode=e,this.rootNode&&(this.rootNode.treeId=this.id)})),h.Tree.addMethod("getRootNode",(function(){return this.rootNode})),h.Tree.addMethod("refreshStyle",(function(){var e=this._getElement();e.templateClassName&&(e.className=e.templateClassName),this.treeClassName&&s()(e).addClass(this.treeClassName),this.bShowRoot?s()(e).removeClass(this.HIDE_ROOT_CLASS_NAME):s()(e).addClass(this.HIDE_ROOT_CLASS_NAME)})),h.Tree.addMethod("resetSelected",(function(){this._prevSelectedNodes=this.selectedNodes.clone(),this.selectedNodes=[]})),h.Tree.addMethod("revertSelection",(function(e){var t=this._prevSelectedNodes.clone();t=t.concat(this.selectedNodes),this.selectedNodes=this._prevSelectedNodes.clone();for(var i=0;i<t.length;i++)t[i].refreshStyle()})),h.Tree.addMethod("getSelectedNode",(function(){return 0===this.selectedNodes.length?null:this.selectedNodes[0]})),h.Tree.addMethod("addNodeToSelected",(function(e){this.selectedNodes.push(e),this._prevSelectedNodes=this.selectedNodes.clone()})),h.Tree.addMethod("removeNodeFromSelected",(function(e){for(var t=0;t<this.selectedNodes.length;t++)if(this.selectedNodes[t]==e)return this._prevSelectedNodes=this.selectedNodes.clone(),void this.selectedNodes.splice(t,1)})),h.Tree.addMethod("isNodeSelected",(function(e){var t=this.selectedNodes&&this.selectedNodes.length;if(t)for(var i=0;i<t;i++)if(this.selectedNodes[i]==e)return!0;return!1})),h.Tree.addMethod("resortSubtree",(function(e){if(e){e.resortChilds();for(var t=0;t<e.childs.length;t++)this.resortSubtree(e.childs[t])}})),h.Tree.addMethod("resortTree",(function(){this.sortNodes&&this.resortSubtree(this.rootNode)})),h.Tree.addMethod("readStates",(function(){var e=h.getStorageVal("tree"+this.id);if(e)for(var t in e)this.stateObject[t]=e[t]})),h.Tree.addMethod("getState",(function(e){var t,i=this.stateObject;return i[e]?(null!==(t=i[e])&&""!==t||(t=h.TreeNode.State.CLOSED),t):h.TreeNode.State.CLOSED})),h.Tree.addMethod("writeStates",(function(e,t){var i={},d=this.stateObject;for(var r in d)i[r]=d[r];d[e]=t,null!=t&&(i[e]=t),h.setStorageVal("tree"+this.id,i)})),h.Tree.addMethod("resetStates",(function(){this.stateObject={},h.setStorageVal("tree"+this.id,"")})),h.Tree.addMethod("comparer",(function(e,t){var i,d;if(this.sorters&&this.sorters.length)for(i=0;i<this.sorters.length;i++)if(0!==(d=this.sorters[i](e,t)))return d;return 0})),h.Tree.addMethod("renderTree",(function(){this.readStates(),this.stopWaiting(),this.refreshStyle();var e=this._getElement();this.rootNode&&(this.writeStates(this.rootNode.id,h.TreeNode.State.OPEN),this.rootNode.showNode(),this.rootNode.render(e),this.refreshScroll())})),h.Tree.addMethod("refreshScroll",(function(e){e?setTimeout(function(){this.scroll&&this.scroll.refresh()}.bind(this),e):this.scroll&&this.scroll.refresh()})),h.Tree.addMethod("binarySearchOfNode",(function(e,t){for(var i=0,d=e.length-1;i<=d;){var r=Math.round((i+d)/2),s=e[r];if(this.comparer(s,t)<0)i=r+1;else{if(!(this.comparer(s,t)>0))return r;d=r-1}}return-(i+1)})),h.Tree.addMethod("_deselectAllNodes",(function(e){if(this.selectedNodes.length>0){var t=this.selectedNodes.clone();this.resetSelected();for(var i=0;i<t.length;i++)t[i].refreshStyle();if(e)h.trees[this.id].fireUnSelectAllEvent(e)}})),h.Tree.addMethod("_selectOrEditNode",(function(e,t,i,d,r,s){var o,n,l,c=s&&s.shouldFocus,u=t.isSelected()&&r,f=this.multiSelectEnabled&&t.isSelected()&&i&&!u,E=t.isSelected()&&h.treeNodeEdited!==t&&!this.multiSelectEnabled&&!i&&!u,v=null!=h.treeNodeEdited&&(g||f),p=this.multiSelectEnabled&&!t.isSelected()&&d&&(0,a.sDW)(this._lastSelectedNode)&&this._lastSelectedNode.parent===t.parent,m=this.multiSelectEnabled&&t.isSelected()&&d&&(0,a.sDW)(this._lastSelectedNode)&&this._lastSelectedNode.parent===t.parent,g=!this.multiSelectEnabled&&!t.isSelected()||this.multiSelectEnabled&&!i&&!t.isSelected(),N=!t.isSelected()||g&&this.selectedNodes.length>1||c;if(d&&this._lastSelectedNode||(this._lastSelectedNode=t),f&&t.deselect(e),g&&this._deselectAllNodes(e),!E||c){if(v&&h.treeNodeEdited.doEndEdit(e),p||m){var T=(l=t.parent).childs.indexOf(this._lastSelectedNode),_=l.childs.indexOf(t);o=Math.min(T,_),n=Math.max(T,_)}if(p)if(o>-1)for(var S=o;S<=n;S++)l.childs[S].select(e);else l.childs[n].select(e);else if(m){for(var C=0;C<o;C++)l.childs[C].deselect(e);for(var M=n+1;M<l.childs.length;M++)l.childs[M].deselect(e)}else N&&t.select(e,t.nofocus,s)}else t.edit(e)})),h.Tree.addMethod("_deselectOthers",(function(e,t,i,d,r){this.multiSelectEnabled&&this.selectedNodes.length>1&&t.isSelected()&&!(i||d||r)&&this.selectedNodes.findAll(function(e){return e!=t}.bind(this)).invoke("deselect",e)})),h.Tree.addMethod("_selectNextNode",(function(e,t){var i=e.isOpen()&&e.getFirstChild()||e.nextSibling||function e(t){return(t=t.parent)?t.nextSibling?t.nextSibling:e(t):null}(e);i&&e.deselect()&&i.select(t,null,{shouldFocus:!0})})),h.Tree.addMethod("_selectPreviousNode",(function(e,t){var i=e.prevSibling&&function e(t){return!(t.isOpen()&&t.hasChilds())&&t||e(t.getLastChild())}(e.prevSibling)||e.parent;i&&i.name&&e.deselect()&&i.select(t,null,{shouldFocus:!0})})),h.Tree.addMethod("_selectInwards",(function(e,t){if(e.isOpen()){var i=e.getFirstChild();i&&e.deselect()&&i.select(t,null,{shouldFocus:!0})}else e.handleNode(t)})),h.Tree.addMethod("_selectOutwards",(function(e,t){if(!e.isHiddenRootNode())if(e.isOpen())e.handleNode(t);else{var i=e.parent;i&&i.name&&e.deselect()&&i.select(t,null,{shouldFocus:!0})}})),h.Tree.addMethod("_expandOrCollapse",(function(e,t){e.handleNode(t)})),h.Tree.addMethod("_selectFirstVisibleNode",(function(e,t){for(e.deselect();e.parent;)e=e.parent;e.name||(e=e.childs[0]),e.select(t,null,{shouldFocus:!0})})),h.Tree.addMethod("_selectLastVisibleNode",(function(e,t){for(e.deselect();e.parent;)e=e.parent;for(;e.isOpen()&&e.childs.length>0;)e=e.childs[e.childs.length-1];e.select(t,null,{shouldFocus:!0})})),h.Tree.addMethod("sortByOrder",(function(e,t){var i=e.orderNumber,d=t.orderNumber;return null==i&&null==d?0:null==i?1:null==d?-1:i-d})),h.Tree.addMethod("sortByName",(function(e,t){var i=e.name.toLowerCase(),d=t.name.toLowerCase();return i>d?1:i<d?-1:0})),h.Tree.addVar("TREE_WAIT_TEMPLATE_DOM_ID","list_responsive_collapsible:loading"),h.Tree.addMethod("wait",(function(){s()("#"+this.id).html(document.getElementById(this.TREE_WAIT_TEMPLATE_DOM_ID).clone(!0))[0]})),h.Tree.addMethod("stopWaiting",(function(){s()("#"+this.id).html("")[0]})),h.Tree.addMethod("_getTemplateElement",(function(e){var t=this.templateDomId,i=document.getElementById(t).clone(!0);return s()(i).attr("id",this.getId()),i.templateId=t,i.templateClassName=i.className,(0,a.lem)(e,i),i}));const c=h;var u=i(84612);c.TreeNode=function(e){this.id=c.getNextId(),this.treeId=null,this.name=null!=e.name?e.name:this.DEFAULT_NAME,this.param=null!=e.param?e.param:{},this.orderNumber=null!=e.orderNumber?e.orderNumber:null,this.childs=[],this.parent=null,this.Types={Folder:new c.TreeNode.Type(this.FOLDER_TYPE_NAME)},this.isloaded=!1,this.delayedRendering=!0,this.haschilds=!1,this.editable=!1,this.isWaiting=!1,this.hidden=!1,this.isDropTarget=!1,this.keydownSubFocus=!1,c.nodes[this.id]=this},c.TreeNode.Type=function(e,t){this.name=e,t&&(this.cssClassName=t.cssClassName,this.templateDomId=t.templateDomId)},c.TreeNode.State={OPEN:"open",CLOSED:"closed"},c.TreeNode.addVar("FOLDER_TYPE_NAME","com.jaspersoft.jasperserver.api.metadata.common.domain.Folder"),c.TreeNode.addVar("DEFAULT_NAME","unset name"),c.TreeNode.addVar("NODE_ID_PREFIX","node"),c.TreeNode.addVar("SUB_NODE_ID_SUFFIX","sub"),c.TreeNode.addVar("HANDLER_ID_PREFIX","handler"),c.TreeNode.addVar("NODE_CLASS_NAME","node").addVar("LEAF_CLASS_NAME","leaf").addVar("OPEN_CLASS_NAME","open").addVar("CLOSED_CLASS_NAME","closed").addVar("SELECTED_CLASS_NAME","selected").addVar("LOADING_CLASS_NAME","loading").addVar("ROOTS_CLASS_NAME","roots").addVar("KEYDOWN_SUB_FOCUS_CLASS_NAME","focus-visible"),c.TreeNode.addVar("nodeHeaderTemplateDomId","list_responsive_collapsible:leaf"),c.TreeNode.addVar("nodeFooterTemplateDomId","list_responsive_collapsible"),c.TreeNode.addVar("nodeInputTemplateDomId","list_responsive_collapsible:input"),c.TreeNode.addVar("isSelectable",!1),c.TreeNode.addMethod("getTreeId",(function(){return this.treeId||this.parent&&this.parent.getTreeId()})),c.TreeNode.addMethod("getState",(function(){return c.trees[this.getTreeId()].getState(this.id)})),c.TreeNode.addMethod("isParent",(function(){return this.param.type==this.Types.Folder.name})),c.TreeNode.addMethod("addChild",(function(e){if(this.isParent()){var t=this.childs[this.childs.length-1];t&&(t.nextSibling=e,e.prevSibling=t),this.childs.push(e),e.parent=this,this.resortChilds(),this.delayedRendering||(e.showNode(),e.render(this._getChildrenElement(),e.nextSibling))}})),c.TreeNode.addMethod("removeChild",(function(e){for(var t=0;t<this.childs.length;t++)if(this.childs[t]==e){this.childs.splice(t,1);break}if(e.deselect(),!this.delayedRendering){var i=e._getElement();i&&i.remove()}})),c.TreeNode.addMethod("resortChilds",(function(){var e=this.getTreeId(),t=c.trees[e];if(t&&t.sortNodes&&(0,a.kJL)(this.childs)){this.childs.sort((function(e,i){return t.comparer(e,i)}));for(var i=this.childs.length;i--;){var d=this.childs[i];d.prevSibling=this.childs[i-1],d.nextSibling=this.childs[i+1]}}})),c.TreeNode.addMethod("resetChilds",(function(){this.childs=[]})),c.TreeNode.addMethod("setHasChilds",(function(e){this.haschilds=e})),c.TreeNode.addMethod("hasChilds",(function(){return!!this.haschilds||this.getChildCount()>0})),c.TreeNode.addMethod("getChildCount",(function(){return this.childs.length})),c.TreeNode.addMethod("getFirstChild",(function(){return this.hasChilds()?this.childs[0]:null})),c.TreeNode.addMethod("getLastChild",(function(){return this.hasChilds()?this.childs[this.childs.length-1]:null})),c.TreeNode.addMethod("_getElement",(function(e){return this._element||(this._element=s()("#"+this.NODE_ID_PREFIX+this.id)[0]),this._element})),c.TreeNode.addMethod("_getTitle",(function(){var e=this._getElement().childElements()[0];e.cleanWhitespace();var t=e.childNodes[e.childNodes.length-1];return"#text"!==t.nodeName&&(t=document.createTextNode(""),e.appendChild(t)),t})),c.TreeNode.addMethod("_getTitleInputElement",(function(){return s()(this._getElement().getElementsByTagName("input")[0])[0]})),c.TreeNode.addMethod("_getChildrenElement",(function(){return this._childrenElement||(this._childrenElement=s()("#"+this.NODE_ID_PREFIX+this.id+this.SUB_NODE_ID_SUFFIX)[0]),this._childrenElement})),c.TreeNode.addMethod("isOpen",(function(){return this.getState()===c.TreeNode.State.OPEN})),c.TreeNode.addMethod("changeName",(function(e){this.name=e,this._getTitle().data=this.name})),c.TreeNode.addMethod("getType",(function(){for(var e in this.Types)if(this.param.type===this.Types[e].name)return this.Types[e]})),c.TreeNode.addMethod("refreshStyle",(function(e){if(e=s()(e)[0]||this._getElement()){e.templateClassName&&(e.className=e.templateClassName),this.isParent()?(s()(e).addClass(this.NODE_CLASS_NAME).removeClass(this.LEAF_CLASS_NAME),this.isWaiting||(this.isOpen()?(s()(e).attr("aria-expanded",!0),s()(e).addClass(this.OPEN_CLASS_NAME).removeClass(this.CLOSED_CLASS_NAME)):(s()(e).attr("aria-expanded",!1),s()(e).addClass(this.CLOSED_CLASS_NAME).removeClass(this.OPEN_CLASS_NAME)))):s()(e).addClass(this.LEAF_CLASS_NAME).removeClass(this.NODE_CLASS_NAME),this.isWaiting?s()(e).addClass(this.LOADING_CLASS_NAME):s()(e).removeClass(this.LOADING_CLASS_NAME),this.isSelected()?s()(e).addClass(this.SELECTED_CLASS_NAME):s()(e).removeClass(this.SELECTED_CLASS_NAME),this.hidden?s()(e).addClass(l.Z.HIDDEN_CLASS):s()(e).removeClass(l.Z.HIDDEN_CLASS),this.param.cssClass&&s()(e).addClass(this.param.cssClass);var t=this.getType();t&&t.cssClassName&&s()(e).addClass(t.cssClassName),this.keydownSubFocus&&s()(e).addClass(this.KEYDOWN_SUB_FOCUS_CLASS_NAME);var i=s()(e).children();this.isDropTarget&&i&&s()(i).addClass(l.Z.DROP_TARGET_CLASS),!this.isDropTarget&&i&&s()(i).removeClass(l.Z.DROP_TARGET_CLASS)}})),c.TreeNode.addMethod("_createNode",(function(){var e=this.id,t=c.trees[this.getTreeId()],i=this._getHeaderTemplateElement();i.id=this.NODE_ID_PREFIX+e,i.tabIndex=-1,this.refreshStyle(i),this.treeId=t.id,i.treeNode=this;var d=i.childElements()[0];t.allowHyperlinks?d.insert(u.Z.softHtmlEscape(this.name,{whiteList:["a"]})):d.insert(u.Z.hardEscape(this.name)),null!=this.tooltip&&this.tooltip.length>0&&(d.title=this.tooltip),d.childElements().each(function(t,i){0===i&&(t.id=this.HANDLER_ID_PREFIX+e);var d=this.iconTooltip;d&&(t.title=(0,a.kJL)(d)?d[i]:d)}.bind(this)),this._element=i})),c.TreeNode.addMethod("_createNodeChildren",(function(){var e=this._getFooterTemplateElement();e.id=this.NODE_ID_PREFIX+this.id+this.SUB_NODE_ID_SUFFIX,this._childrenElement=e})),c.TreeNode.addMethod("showNode",(function(e){var t=c.trees[this.getTreeId()];if((this._createNode(),this.isParent())&&(this.isOpen()||t.showAllNodesOnStartup)){this._createNodeChildren();for(var i=0;i<this.getChildCount();i++)this.childs[i].showNode(this._getChildrenElement());this.delayedRendering=!1,t.fireOpenEvent(this)}this.render(e)})),c.TreeNode.addMethod("render",(function(e,t){if(!Object.isUndefined(e)){var i=s()(e)[0];i&&(this._getChildrenElement()&&this._getElement().insert(this._getChildrenElement()),t?i.insert(this._getElement(),{before:t._getElement()}):i.insert(this._getElement()))}})),c.TreeNode.addMethod("_renderChildren",(function(){var e=this._getElement();e&&this._getChildrenElement()&&e.insert(this._getChildrenElement())})),c.TreeNode.addMethod("refreshNode",(function(){if(this.refreshStyle(),this.isParent()&&this.isOpen()&&this.isloaded){this.delayedRendering?(this._createNodeChildren(),this._renderChildren()):this._getChildrenElement().update("");for(var e=0;e<this.getChildCount();e++)this.childs[e].showNode(this._getChildrenElement());this.delayedRendering=!1}c.trees[this.getTreeId()].refreshScroll()})),c.TreeNode.addMethod("wait",(function(){this.isWaiting=!0,this.refreshStyle()})),c.TreeNode.addMethod("stopWaiting",(function(){this.isWaiting=!1,this.refreshStyle()})),c.TreeNode.addMethod("isHiddenRootNode",(function(){var e=c.trees[this.getTreeId()];return e.rootNode==this&&!e.bShowRoot})),c.TreeNode.addMethod("deselect",(function(e){var t=c.trees[this.getTreeId()];return!(!t||!this.isSelected())&&(t.removeNodeFromSelected(this),this.refreshStyle(),e&&t.fireUnSelectEvent(this,e),!0)})),c.TreeNode.addMethod("select",(function(e,t,i){if((i=i||{}).shouldFocus&&!t&&this.focus(e),this.isSelected())return!1;var d=c.trees[this.getTreeId()];return d.addNodeToSelected(this),this.refreshStyle(),!i.silent&&d.fireSelectEvent(this,e),!0})),c.TreeNode.addMethod("focus",(function(e){if(!(0,a.zcy)()&&this._getElement()){this._getElement().focus({preventScroll:!0});var t=s()(this._getElement()).find(".wrap").first()[0];t&&t.scrollIntoView({block:"nearest",inline:"nearest"});var i=e&&e.type;"keydown"===i?(e.preventDefault(),this.keydownSubFocus=!0):"mouseup"===i&&(this.keydownSubFocus=!1)}})),c.TreeNode.addMethod("isSelected",(function(){var e=c.trees[this.getTreeId()];return e&&e.isNodeSelected(this)})),c.TreeNode.addMethod("_removeTitle",(function(){var e=this._getTitle();e.data="",s()("#"+e.parentNode)[0].cleanWhitespace()})),c.TreeNode.addMethod("edit",(function(e){if(this.editable){if(c.treeNodeEdited==this)return;c.treeNodeEdited=this;var t=this.name,i=s()(this._getTitle().parentNode)[0],d=this._getInputTemplateElement();this._getTitle().data="",i.cleanWhitespace(),i.insert(d),d.value=u.Z.unescape(this.name),d.focus(),s()(d).find(e),d.onclick=function(e){(0,a.rV9)(e)},d.ondblclick=function(e){(0,a.rV9)(e)},d.onmousedown=function(e){(0,a.rV9)(e)},d.onmouseup=function(e){(0,a.rV9)(e)},d.onkeydown=function(e){var i=window.event?window.event:e;13==i.keyCode?(d.onblur=null,this.doEndEdit(i)):27==i.keyCode&&(d.onblur=null,d.value=t,this.doEndEdit(i))}.bindAsEventListener(this),d.onblur=function(e){this.doEndEdit(e)}.bindAsEventListener(this),c.trees[this.getTreeId()].fireStartEditEvent(this,d)}})),c.TreeNode.addMethod("doEndEdit",(function(e){this.editEnded(),c.trees[this.getTreeId()].fireEndEditEvent(this)})),c.TreeNode.addMethod("editEnded",(function(){var e=c.trees[this.getTreeId()];if(null!=c.treeNodeEdited){var t=this._getTitleInputElement(),i=t.value;if(i==c.treeNodeEdited.name)return t.remove(),this._getTitle().data=c.treeNodeEdited.name,void(c.treeNodeEdited=null);e.fireEditEvent(c.treeNodeEdited,i),c.editaborted||(c.treeNodeEdited.name=i,t.remove(),this._getTitle().data=i),c.treeNodeEdited=null}})),c.TreeNode.addMethod("scroll",(function(e){var t=c.trees[this.getTreeId()].rootNode._getElement(),i=e?s()(e)[0]:s()(t.parentNode)[0],d=this._getElement();if(i){var r=i.clientHeight,o=i.clientWidth,n=i.scrollTop,l=i.scrollLeft,a=d.cumulativeOffset().top-i.cumulativeOffset().top,h=d.offsetLeft,u=d.clientHeight,f=d.clientWidth;(a>n+r||a+u<n)&&(i.scrollTop=a-(r/2-u/2)),h>l+o?i.scrollLeft=h-(o/2-f/2):h+f<l&&(i.scrollTop=h-(o/2-f/2))}})),c.TreeNode.addMethod("handleNode",(function(e){if(this.isParent()){var t=c.trees[this.getTreeId()];this.isOpen()?t.writeStates(this.id,c.TreeNode.State.CLOSED):(t.writeStates(this.id,c.TreeNode.State.OPEN),t.fireOpenEvent(this,e)),e&&"keydown"===e.type&&(this.keydownSubFocus=!0),this.refreshNode()}})),c.TreeNode.addMethod("openNode",(function(e){if(this.isParent()){var t=c.trees[this.getTreeId()];this.isOpen()||(t.writeStates(this.id,c.TreeNode.State.OPEN),t.fireOpenEvent(this,e)),this.refreshNode()}})),c.TreeNode.addMethod("_getHeaderTemplateElement",(function(){var e=this.getType(),t=e&&e.templateDomId?e.templateDomId:this.nodeHeaderTemplateDomId,i=document.getElementById(t).clone(!0);return i.templateId=t,i.templateClassName=i.className,i})),c.TreeNode.addMethod("_getFooterTemplateElement",(function(){var e=this.nodeFooterTemplateDomId,t=document.getElementById(e).clone(!0);return t.templateId=e,t.update(""),t})),c.TreeNode.addMethod("_getInputTemplateElement",(function(){var e=this.nodeInputTemplateDomId,t=document.getElementById(e).clone(!0);return t.templateId=e,t}));const f=c,E={isInSelection:function(){}};var v=i(11364),p=i(94277);f.Tree.addVar("NODE_PATTERN",".node").addVar("NODE_WRAPPER_PATTERN",".node > .wrap").addVar("NODE_ICON_PATTERN",".node > .wrap .icon").addVar("NODE_CUSTOM_PATTERNS",[]),f.Tree.addVar("LEAF_PATTERN",".leaf").addVar("LEAF_WRAPPER_PATTERN",".leaf > .wrap").addVar("LEAF_ICON_PATTERN",".leaf > .wrap .icon").addVar("LEAF_CUSTOM_PATTERNS",[]),f.Tree.addVar("draggables",[]),f.Tree.addVar("isMouseClick",!1),f.Tree.addMethod("getTreeNodeByEvent",(function(e){var t=Event.element(e);return this.getTreeNodeByElement(t)})),f.Tree.addMethod("getTreeNodeByElement",(function(e){for(;e&&e.readAttribute&&s()(e).attr("id")!==this.id;){var t=e.treeNode;if(t&&t.getTreeId()===this.getId())return t;e=s()(e.parentNode)[0]}return null})),f.Tree.addMethod("isNodeEvent",(function(e){var t=(0,a.Ua0)(e.element().parentNode,"LI");return t&&s()(t).hasClass(l.Z.NODE_CLASS)})),f.Tree.addMethod("isLeafEvent",(function(e){var t=(0,a.Ua0)(e.element().parentNode,"LI");return t&&s()(t).hasClass(l.Z.LEAF_CLASS)})),f.Tree.addMethod("isIconEvent",(function(e){return s()(e.element()).hasClass(l.Z.ICON_CLASS)})),f.Tree.addMethod("_registerEvents",(function(){this._cleanUpListeners(),this._registerClickEvents(),this._registerCustomEvents(),this._registerKeyEvents(),this._registerMouseEvents()})),f.Tree.addMethod("_cleanUpListeners",(function(){var e=this._getElement();e.stopObserving("click"),e.stopObserving("dblclick"),(0,a.MEy)()?(e.stopObserving("touchstart"),e.stopObserving("drag:touchstart"),e.stopObserving("touchend")):(e.stopObserving("mousedown"),e.stopObserving("drag:mousedown"),e.stopObserving("mouseup")),e.stopObserving("mouseover"),e.stopObserving("mouseout")})),f.Tree.addMethod("_registerClickEvents",(function(){var e=this._getElement();e.observe("click",function(t){var i=(0,a.Ua0)(t.element(),l.Z.BUTTON_PATTERN)&&this.getTreeNodeByEvent(t);if(i){var d=this.isNodeEvent(t),r=this.isLeafEvent(t);d?(e.fire("nodeIcon:click",{targetEvent:t,node:i}),e.fire("node:click",{targetEvent:t,node:i})):r&&(e.fire("nodeIcon:click",{targetEvent:t,node:i}),e.fire("leaf:click",{targetEvent:t,node:i})),!(0,a.zcy)()&&d&&i.handleNode(t)}}.bindAsEventListener(this)),e.observe("dblclick",function(t){var i=(0,a.Ua0)(t.element(),l.Z.BUTTON_PATTERN)&&this.getTreeNodeByEvent(t);if(i){var d=this.isIconEvent(t),r=this.isNodeEvent(t),s=this.isLeafEvent(t);r?(d&&e.fire("nodeIcon:dblclick",{targetEvent:t,node:i}),e.fire("node:dblclick",{targetEvent:t,node:i})):s&&(d&&e.fire("leafIcon:dblclick",{targetEvent:t,node:i}),e.fire("leaf:dblclick",{targetEvent:t,node:i})),this.handleNodeOnDblclick&&(r||s)&&!d&&i.handleNode(t)}}.bindAsEventListener(this))})),f.Tree.addMethod("_registerMouseEvents",(function(){var e=this._getElement();e.observe((0,a.MEy)()?"touchstart":"mousedown",function(t){var i=t.element(),d=(0,a.Ua0)(i,l.Z.BUTTON_PATTERN)&&this.getTreeNodeByEvent(t);if(d){t.treeEvent=!0;var r=this.isIconEvent(t),o=this.isNodeEvent(t),n=this.isLeafEvent(t);if((0,a.MEy)())if(p.hl.vars.ajax_in_progress)alert("please wait");else if(this.twofingers=!1,2==t.touches.length&&(this.twofingers=!0,this._selectOrEditNode(t,d,(0,a.yHG)(t),(0,a.LM1)(t),(0,a.dOg)(t),{shouldFocus:!0}),d.isSelected()||E&&E.isInSelection(d))){var h=s()(i).parents("li:first");return void(s()(h).hasClass("selected")&&document.fire(l.Z.ELEMENT_CONTEXTMENU,{targetEvent:t,node:i}))}(0,a.MEy)()&&p.hl.vars.ajax_in_progress||(!this.selectOnMousedown||(0,a.MEy)()&&1!=t.touches.length||this._selectOrEditNode(t,d,(0,a.yHG)(t),(0,a.LM1)(t),(0,a.dOg)(t),{shouldFocus:!0}),o?(r&&e.fire("nodeIcon:mousedown",{targetEvent:t,node:d}),e.fire("node:mousedown",{targetEvent:t,node:d})):n&&(r&&e.fire("leafIcon:mousedown",{targetEvent:t,node:d}),e.fire("leaf:mousedown",{targetEvent:t,node:d})))}}.bindAsEventListener(this)),e.observe((0,a.MEy)()?"drag:touchstart":"drag:mousedown",function(t){this.isMouseClick=!0;var i=t.memo.targetEvent,d=(0,a.Ua0)(i.element(),l.Z.BUTTON_PATTERN)&&this.getTreeNodeByEvent(i);if(d){i.treeEvent=!0;var r=this.isIconEvent(i),s=this.isNodeEvent(i),o=this.isLeafEvent(i);this.selectOnMousedown&&!(0,a.dOg)(i)&&this._selectOrEditNode(i,d,(0,a.yHG)(i),(0,a.LM1)(i),(0,a.dOg)(i),{shouldFocus:!0}),s?(r&&e.fire("nodeIcon.drag:mousedown",{targetEvent:i,node:d}),e.fire("node.drag:mousedown",{targetEvent:i,node:d})):o&&(r&&e.fire("leafIcon.drag:mousedown",{targetEvent:i,node:d}),e.fire("leaf.drag:mousedown",{targetEvent:i,node:d}))}}.bindAsEventListener(this)),e.observe((0,a.MEy)()?"touchend":"mouseup",function(t){this.isMouseClick=!0;var i=(0,a.Ua0)(t.element(),l.Z.BUTTON_PATTERN)&&this.getTreeNodeByEvent(t);if(i){t.treeEvent=!0;var d=this.isIconEvent(t),r=this.isNodeEvent(t),s=this.isLeafEvent(t);this.twofingers&&(t.isEmulatedRightClick=!0),(0,a.MEy)()&&!this.twofingers&&(this.clickid==i.id&&!p.hl.vars.ajax_in_progress&&t.timeStamp-this.clicktime<700&&(r?(d&&e.fire("nodeIcon:dblclick",{targetEvent:t,node:i}),e.fire("node:dblclick",{targetEvent:t,node:i})):s&&(d&&e.fire("leafIcon:dblclick",{targetEvent:t,node:i}),e.fire("leaf:dblclick",{targetEvent:t,node:i})),this.handleNodeOnDblclick&&(r||s)&&!d&&i.handleNode(t)),this.clicktime=t.timeStamp,this.clickid=i.id),(0,a.MEy)()&&p.hl.vars.ajax_in_progress||(this.selectOnMousedown||v.Z.element_scrolled||(0,a.MEy)()&&1!=t.changedTouches.length||this._selectOrEditNode(t,i,(0,a.yHG)(t),(0,a.LM1)(t),(0,a.dOg)(t),{shouldFocus:!0}),this._deselectOthers(t,i,(0,a.yHG)(t),(0,a.LM1)(t),(0,a.dOg)(t)),r?(d&&e.fire("nodeIcon:mouseup",{targetEvent:t,node:i}),e.fire("node:mouseup",{targetEvent:t,node:i})):s&&(d&&e.fire("leafIcon:mouseup",{targetEvent:t,node:i}),e.fire("leaf:mouseup",{targetEvent:t,node:i})),(0,a.MEy)()&&r&&d&&!v.Z.element_scrolled&&i.handleNode(t))}}.bindAsEventListener(this)),"createTouch"in document||(e.observe("mouseover",function(t){var i=t.element(),d=(0,a.Ua0)(i,l.Z.BUTTON_PATTERN)&&this.getTreeNodeByEvent(t);d&&(this.createDraggableIfNeeded(t,d),!(0,a.Isx)()&&e.fire("tree:mouseover",{targetEvent:t,node:d}))}.bindAsEventListener(this)),(0,a.Isx)()||e.observe("mouseout",function(t){var i=(0,a.Ua0)(t.element(),l.Z.BUTTON_PATTERN)&&this.getTreeNodeByEvent(t);i&&e.fire("tree:mouseout",{targetEvent:t,node:i})}.bindAsEventListener(this))),o.m9.add(e,{accept:this.dropClasses,onDrop:function(e){this.elementDropped=e}.bind(this)})})),f.Tree.addMethod("_registerKeyEvents",(function(){var e=this,t=this._getElement(),i=function(){return function(t){var i=s()("#resultsList").find(".selected")[0],d="foldersTree"===s()(t.target).closest(".list.collapsible.folders").attr("id");if(e.isMouseClick=!1,d)"wait"!==document.body.style.cursor&&i&&i.focus();else{var r=e.getTreeNodeByEvent(t);if(f.treeNodeEdited===r)return;r&&e._expandOrCollapse(r,t.memo.targetEvent)}}};t.observe("key:enter",i().bindAsEventListener(this)),t.observe("key:space",i().bindAsEventListener(this)),t.observe("key:home",function(e){var t=this.getTreeNodeByEvent(e);this.isMouseClick=!1,t&&this._selectFirstVisibleNode(t,e.memo.targetEvent)}.bindAsEventListener(this)),t.observe("key:end",function(e){var t=this.getTreeNodeByEvent(e);this.isMouseClick=!1,t&&this._selectLastVisibleNode(t,e.memo.targetEvent)}.bindAsEventListener(this)),t.observe("key:down",function(e){e.memo.targetEvent.preventDefault();var t=this.getTreeNodeByEvent(e);this.isMouseClick=!1,f.treeNodeEdited!==t&&t&&this._selectNextNode(t,e.memo.targetEvent)}.bindAsEventListener(this)),t.observe("key:up",function(e){e.memo.targetEvent.preventDefault();var t=this.getTreeNodeByEvent(e);this.isMouseClick=!1,f.treeNodeEdited!==t&&t&&this._selectPreviousNode(t,e.memo.targetEvent)}.bindAsEventListener(this)),t.observe("key:right",function(e){var t=this.getTreeNodeByEvent(e);this.isMouseClick=!1,f.treeNodeEdited!==t&&t&&this._selectInwards(t,e.memo.targetEvent)}.bindAsEventListener(this)),t.observe("key:left",function(e){var t=this.getTreeNodeByEvent(e);this.isMouseClick=!1,f.treeNodeEdited!==t&&t&&this._selectOutwards(t,e.memo.targetEvent)}.bindAsEventListener(this)),t.observe("key:contextMenu",function(e){this.isMouseClick=!1;var i=this.getTreeNodeByEvent(e);i&&(e.treeEvent=!0,t.fire("tree:contextMenu",{targetEvent:e,node:i,focused:e.memo.node}))}.bindAsEventListener(this))})),f.Tree.addMethod("_registerCustomEvents",(function(){var e=this._getElement();e.observe("mousedown",function(t){f.activeTreeId&&f.activeTreeId===this.getId()||(e.fire("tree:blur",{targetEvent:t,tree:f.getActiveTree()}),f.activeTreeId=this.getId(),e.fire("tree:focus",{targetEvent:t,tree:f.getActiveTree()}))}.bindAsEventListener(this)),e.observe("mouseover",function(t){this.getTreeNodeByEvent(t)||e.fire("tree:mouseover",{targetEvent:t,tree:this})}.bindAsEventListener(this)),e.observe("mouseout",function(t){this.getTreeNodeByEvent(t)||e.fire("tree:mouseout",{targetEvent:t,tree:this})}.bindAsEventListener(this)),e.observe("focusin",function(e){var t=s()(e.target).closest(".list.collapsible.folders");t.attr("tabindex",-1),t.find("[tabindex='0']").attr("tabindex",-1),t.find(".selected").attr("tabindex",0);var i=this.getTreeNodeByEvent(e);i?(this.isMouseClick||(i.keydownSubFocus=!0),i.focus(),i.refreshStyle()):t.find(".selected").focus(),0===t.find("[tabindex='0']").length&&t.attr("tabindex",0)}.bindAsEventListener(this)),e.observe("focus",function(e){this.isMouseClick=!1}.bindAsEventListener(this)),e.observe("focusout",function(e){var t=this.getTreeNodeByEvent(e);t&&(t.keydownSubFocus=!1,t.refreshStyle());var i=s()(e.target).closest(".list.collapsible.folders");i.find("[tabindex='0']").attr("tabindex",-1),i.attr("tabindex",0)}.bindAsEventListener(this))})),f.Tree.addMethod("fireOpenEvent",(function(e,t){this._getElement().fire("node:open",{node:e,targetEvent:t})})),f.Tree.addMethod("fireSelectEvent",(function(e,t){this._getElement().fire(e.isParent()?"node:selected":"leaf:selected",{node:e,targetEvent:t})})),f.Tree.addMethod("fireUnSelectEvent",(function(e,t){this._getElement().fire(e.isParent()?"node:unselected":"leaf:unselected",{node:e,targetEvent:t})})),f.Tree.addMethod("fireUnSelectAllEvent",(function(e){this._getElement().fire("items:unselected",{targetEvent:e})})),f.Tree.addMethod("fireEditEvent",(function(e,t){this._getElement().fire(e.isParent()?"node:edit":"leaf:edit",{node:e,newValue:t})})),f.Tree.addMethod("fireStartEditEvent",(function(e,t){this._getElement().fire(e.isParent()?"node:startEdit":"leaf:startEdit",{node:e,input:t})})),f.Tree.addMethod("fireEndEditEvent",(function(e){this._getElement().fire(e.isParent()?"node:endEdit":"leaf:endEdit",{node:e})})),f.Tree.addMethod("observe",(function(e,t){this._getElement().observe(e,t)})),f.Tree.addMethod("stopObserving",(function(e,t){this._getElement().stopObserving(e,t)})),f.Tree.addMethod("createDraggableIfNeeded",(function(e,t){var i=e?e.element():t._getElement().children(this.dragPattern),d=this.draggables[i.identify()];if(this.dragPattern&&!d){var r=(0,a.BwZ)(i,[this.dragPattern],!0);if(r&&i.className.toLowerCase().indexOf("icon")<0&&!this.draggables[r.identify()])return this.draggables[r.identify()]=new o._l(i,{superghosting:!0,mouseOffset:!0,delay:(0,a.w1q)()||(0,a.MEy)()?200:0,onStart:this.setDragStartState.bind(this,t),onEnd:this.setDragEndState.bind(this,t)}),this.draggables[r.identify()]}return null})),f.Tree.addMethod("setDragStartState",(function(e,t,i){var d=e._getElement().templateClassName;d&&s()(t.element).addClass(d),t.element.setStyle({width:null,height:null}),s()(t.element).addClass(l.Z.DRAGGING_CLASS).addClass(this.getId()),this.dragClasses&&s()(t.element).addClass(this.dragClasses),this.selectedNodes.length>1&&t.element.update(new n.Template(this.TREE_NN_ITEMS_SELECTED).evaluate({count:this.selectedNodes.length})),t.element.node=e,t.element.nodes=this.selectedNodes,t.options.scroll=this._getElement(),t.options.scrollSensitivity=l.Z.SCROLL_SENSITIVITY,o.Mw.dragging=this.regionID||!0})),f.Tree.addMethod("setDragEndState",(function(e,t,i){o.Mw.dragging=null}));const m=f;var g=i(71914),N=i(236),T=i(11129),_=i(97836),S=i.n(_);m.TreeSupport=function(e,t){if(m.Tree.call(this,e,t),this.providerId=t.providerId,this.hideLoader=t.hideLoader,this.rootUri=Object.isUndefined(t.rootUri)?"/":t.rootUri,this.nodeClass=t.nodeClass&&Object.isFunction(t.nodeClass)?t.nodeClass:m.TreeNode,t.rootObjectModifier&&(this.modifyRootObject=t.rootObjectModifier),this.resetStatesOnShow=Object.isUndefined(t.resetStatesOnShow)||t.resetStatesOnShow,this.inInit=!0,this.ajaxBufferId="ajaxbuffer",this.nodeTextId="treeNodeText",this.urlGetNode=t.urlGetNode?t.urlGetNode:this._getFlowUrl("getNode"),this.urlGetChildren=t.urlGetChildren?t.urlGetChildren:this._getFlowUrl("getChildren"),this.urlGetMultipleChildren=t.urlGetMultipleChildren?t.urlGetMultipleChildren:this._getFlowUrl("getMultipleChildren"),this.urlGetMessage=t.urlGetMessage?t.urlGetMessage:this._getFlowUrl("getMessage"),this.additionalParams=t.additionalParams?t.additionalParams:{},null==this.TREE_NN_ITEMS_SELECTED){var i=function(e){this.TREE_NN_ITEMS_SELECTED=e}.bind(this);this.getMessage("TREE_NN_ITEMS_SELECTED",i,null)}this._initOpenListener()},m.TreeSupport.prototype=(0,a.I8Q)(m.Tree.prototype),m.TreeSupport.addMethod("_initOpenListener",(function(){this.observe("node:open",function(e){var t=e.memo.node;t&&!t.isloaded&&this.getTreeNodeChildren(t)}.bindAsEventListener(this))})),m.TreeSupport.addMethod("stopObserving",(function(e,t){this._getElement().stopObserving(e,t),"node:open"!==e||t||this._initOpenListener()})),m.TreeSupport.addMethod("_getFlowUrl",(function(e){return g.Z.contextPath+"/flow.html?_flowId=treeFlow&method="+e})),m.TreeSupport.addMethod("showTree",(function(e,t,i,d){var r=this.urlGetNode+"&provider="+this.providerId+"&uri="+this.rootUri+"&depth="+e;d&&(r+="&forceHtmlEscape=true"),r+="&"+this._evaluateAdditionalParams(),this._showTree(r,t,i)})),m.TreeSupport.addMethod("_evaluateAdditionalParams",(function(){var e=this.additionalParams;return S().isFunction(e)&&(e=e.call(null)),S().isObject(e)?Object.toQueryString(e):null})),m.TreeSupport.addMethod("showTreePrefetchNodes",(function(e,t,i){var d=this.urlGetNode+"&provider="+this.providerId+"&uri="+this.rootUri;e&&(d+="&prefetch="+encodeURIComponent(e)),d+="&"+this._evaluateAdditionalParams(),this._showTree(d,t,i)})),m.TreeSupport.addMethod("_showTree",(function(e,t,i){var d=this;this.inInit=!0,this.wait();var r,s,o,n=(r=this,s=t,o=i,function(){return r.showTreeCallback(s,o)});(0,N.mc)(e,{fillLocation:this.ajaxBufferId,callback:n,errorHandler:function(){var e=!1;return d.httpErrorHandler&&(e=d.httpErrorHandler.apply(window,arguments)),!1===e&&(e=T.m0.apply(window,arguments)),e},hideLoader:this.hideLoader})})),m.TreeSupport.addMethod("showTreeCallback",(function(e,t){var i=document.getElementById(this.nodeTextId);if(null!=i){var d=u.Z.unescape(s()(i).text()).evalJSON();this.modifyRootObject&&(d=this.modifyRootObject(d,!1)),i=document.getElementById(this.ajaxBufferId),s()(i).html(""),this.setRootNode(this.processNode(d)),this.resortTree(),this.resetStatesOnShow&&this.resetStates(),this.renderTree(),this.inInit=!1,e?e():this.fireTreeLoadedEvent({tree:this})}else t?t():this.fireServerErrorEvent()})),m.TreeSupport.addMethod("processNode",(function(e){var t={};t.id=e.id,t.type=e.type,t.uri=e.uri,t.extra=(0,a.I8Q)(e.extra),e.cssClass&&(t.cssClass=e.cssClass);var i=new(0,this.nodeClass)({name:(0,a.UsS)(e.label),param:t,orderNumber:e.order});e.tooltip&&(i.tooltip=e.tooltip);var d=e.children;if(null!=d){var r=d.length;if(0===r)i.setHasChilds(!1);else for(var s=0;s<r;s++){var o=d[s];if(o){var n=this.processNode(o);i.addChild(n)}}i.isloaded=!0}return i})),m.TreeSupport.addMethod("getTreeNodeChildren",(function(e,t,i){var d,r,s,o,n=e.param.uri,l=(d=this,r=e.id,s=t,o=i,function(){d.resortTree(),d.getTreeNodeChildrenCallback(r,s,o)});(0,N.mc)(this.urlGetChildren+"&provider="+this.providerId+"&uri="+encodeURIComponent(encodeURIComponent(n))+"&"+this._evaluateAdditionalParams(),{fillLocation:this.ajaxBufferId,callback:l,errorHandler:function(t){(500==t.status||t.getResponseHeader("JasperServerError"))&&e.stopWaiting(),(0,T.m0)(t)},hideLoader:this.hideLoader}),this.inInit||e.wait()})),m.TreeSupport.addMethod("getTreeNodeChildrenCallback",(function(e,t,i){var d=document.getElementById(this.nodeTextId);if(null!=d){var r=u.Z.unescape(s()(d).text()).evalJSON(),o=m.nodes[e];this.modifyRootObject&&(r=this.modifyRootObject(r,!0,o)),d=document.getElementById(this.ajaxBufferId),s()(d).html(""),o.resetChilds(),o.stopWaiting();var n=r.length;if(0===n)o.setHasChilds(!1);else{var l=o.getTreeId(),a=l?m.trees[l]:null,h=a?a.sortNodes:null;a&&(a.sortNodes=!1);for(var c=0;c<n;c++){var f=this.processNode(r[c]);o.addChild(f)}a&&(a.sortNodes=h,o.resortChilds())}o.isloaded=!0,o.refreshNode(),t?t(o.childs):this.fireChildrenLoadedEvent(o.childs)}else i?i():this.fireServerErrorEvent()})),m.TreeSupport.addMethod("getTreeMultipleNodesChildren",(function(e,t,i){var d,r="",s=[];if(e&&e.length)for(d=0;d<e.length;d++)d>0&&(r+=","),r+=encodeURIComponent(encodeURIComponent(e[d].param.uri)),s[d]=e[d].id;if(r.length){var o,n,l,a,h=(o=this,n=s,l=t,a=i,function(){return o.getTreeMultipleNodesChildrenCallback(n,l,a)});if((0,N.mc)(this.urlGetMultipleChildren+"&provider="+this.providerId,{fillLocation:this.ajaxBufferId,callback:h,postData:"uris="+r,errorHandler:T.m0,hideLoader:this.hideLoader}),!this.inInit)for(d=0;d<e.length;d++)e[d].wait()}})),m.TreeSupport.addMethod("getTreeMultipleNodesChildrenCallback",(function(e,t,i){var d=document.getElementById(this.nodeTextId);if(null!=d){var r=u.Z.unescape(s()(d).text()).evalJSON();d=document.getElementById(this.ajaxBufferId),s()(d).html(""),t?t(e,r):(this.setMultipleNodesChilden(e,r),this.fireMultipleChildrenLoadedEvent(e,r))}else i?i():this.fireServerErrorEvent()})),m.TreeSupport.addMethod("setMultipleNodesChilden",(function(e,t,i){if(e&&t)for(var d=0;d<t.length;d++){for(var r=t[d],s=r.children,o=null,n=0;n<e.length;n++){var l=m.nodes[e[n]];if(l.param.uri==r.parentUri){o=l;break}}if(o){o.resetChilds(),o.stopWaiting();var a=s.length;if(0===a)o.setHasChilds(!1);else{var h=o.getTreeId(),c=h?m.trees[h]:null,u=c?c.sortNodes:null;c&&(c.sortNodes=!1);for(var f=0;f<a;f++){var E=this.processNode(s[f]);o.addChild(E)}c&&(c.sortNodes=u,o.resortChilds())}o.isloaded=!0,i||o.refreshNode()}}})),m.TreeSupport.addMethod("getTreeNodeChildrenPrefetched",(function(e,t,i,d,r,s,o){var n=e.param.uri,l=this.urlGetNode+"&provider="+this.providerId+"&uri="+n,a="";t&&(a="&prefetch="+t),r&&(l+="&depth="+r);var h,c,u,f,E,v,p=(h=this,c=e.id,u=i,f=d,E=s,v=o,function(){return h.getTreeNodeChildrenPrefetchedCallback(c,u,f,E,v)});(0,N.mc)(l,{fillLocation:this.ajaxBufferId,callback:p,postData:a,errorHandler:T.m0,hideLoader:this.hideLoader}),this.inInit||e.wait()})),m.TreeSupport.addMethod("getTreeNodeChildrenPrefetchedCallback",(function(e,t,i,d,r){var o=document.getElementById(this.nodeTextId);if(null!=o){var n=u.Z.unescape(s()(o).text()).evalJSON();o=document.getElementById(this.ajaxBufferId),s()(o).html("");var l=m.nodes[e];if(l.resetChilds(),l.stopWaiting(),n.children){var a=l.getTreeId(),h=a?m.trees[a]:null,c=h?h.sortNodes:null;h&&(h.sortNodes=!1);for(var f=0;f<n.children.length;f++){var E=this.processNode(n.children[f]);l.addChild(E)}h&&(h.sortNodes=c,d||l.resortChilds())}l.isloaded=!0,r||l.refreshNode(),t?t():this.fireChildredPrefetchedLoadedEvent(l.childs)}else i?i():this.fireServerErrorEvent()})),m.TreeSupport.addMethod("openAndSelectNode",(function(e,t,i,d){var r=function(e){var t=m.trees[e.getTreeId()];e.parent&&t&&t.rootNode!=e.parent&&t.getState(e.parent.id)==m.TreeNode.State.CLOSED&&e.parent.handleNode(),e&&s()("#dataChooserSource").length&&(e.nofocus=!0),t._selectOrEditNode(void 0,e,!1,!1,!1,d)};this.processNodePath(e,r,i);var o=this.getSelectedNode();if(o)o.scroll();else{var n=this.getRootNode();n.name?r(n):r(n.getFirstChild())}t&&t()})),m.TreeSupport.addMethod("processNodePath",(function(e,t,i){var d=this.getRootNode();if("/"===e)t(d);else{var r,s=e.split("/");for(r=0;r<s.length;r++)if(s[r]){var o=d;if(!(d=this.findNodeChildByMetaName(d,s[r]))){if(!i)return;if(!(d=this.findNodeFirstNodeChildByAlphabeticalOrder(o)))return}t(d)}}})),m.TreeSupport.addMethod("findLastLoadedNode",(function(e){var t,i={node:null},d=(t=i,function(e){t.node=e});return this.processNodePath(e,d),i.node})),m.TreeSupport.addMethod("findNodeChildByMetaName",(function(e,t){if(e.hasChilds())for(var i=0;i<e.childs.length;i++)if(e.childs[i].param.id==t)return e.childs[i];return null})),m.TreeSupport.addMethod("findNodeFirstNodeChildByAlphabeticalOrder",(function(e){var t=null,i=null;if(e.childs.length>0){t=e.childs[0].param.id,i=0;for(var d=null,r=null,s=1;s<e.childs.length;s++){r=s;for(var o=(d=e.childs[s].param.id).length<t.length?d.length:t.length,n=0;n<o;n++){if(d.charCodeAt(n)<t.charCodeAt(n)){t=d,i=r;break}if(d.charCodeAt(n)>t.charCodeAt(n))break}}return e.childs[i]}return null})),m.TreeSupport.addMethod("findNodeById",(function(e,t){return function e(t,i){if(!i||!t)return null;if(i.param.id===t)return i;if(i.hasChilds())for(var d=0;d<i.childs.length;++d){var r=e(t,i.childs[d]);if(r)return r}return null}(e,t||this.getRootNode())})),m.TreeSupport.addMethod("hasVisibleFolders",(function(e){if(this.bShowRoot)return!0;var t=e.children;if(t)for(var i=0;i<t.length;i++){var d=e.children[i].children;if(d&&d.length>0)return!0}return!1})),m.TreeSupport.addMethod("getMessage",(function(e,t,i){var d,r,s,o=this.urlGetMessage+"&messageId="+e,n=(d=this,r=t,s=i,function(){return d.getMessageCallback(r,s)});(0,N.mc)(o,{fillLocation:this.ajaxBufferId,callback:n,errorHandler:T.m0,hideLoader:this.hideLoader})})),m.TreeSupport.addMethod("getMessageCallback",(function(e,t){var i=document.getElementById(this.ajaxBufferId);if(null!=i){var d=s()(i),r=(0,a.fyY)(d.html());d.html(""),e&&e(r)}else t&&t()})),m.TreeSupport.addMethod("fireServerErrorEvent",(function(){this._getElement().fire("server:error",{})})),m.TreeSupport.addMethod("fireTreeLoadedEvent",(function(e){this._getElement().fire("tree:loaded",{tree:e})})),m.TreeSupport.addMethod("fireChildrenLoadedEvent",(function(e){this._getElement().fire("children:loaded",{nodes:e})})),m.TreeSupport.addMethod("fireMultipleChildrenLoadedEvent",(function(e,t){this._getElement().fire("multipleChildren:loaded",{parentNodeIds:e,metaNodes:t})})),m.TreeSupport.addMethod("fireChildredPrefetchedLoadedEvent",(function(e){this._getElement().fire("childredPrefetched:loaded",{nodes:e})}));const C=m;C.RepositoryFolder=function(e){C.TreeNode.call(this,e),this.Types={Folder:new C.TreeNode.Type("com.jaspersoft.jasperserver.api.metadata.common.domain.Folder"),SuperRoot:new C.TreeNode.Type("superroot"),Root:new C.TreeNode.Type("root")},this.nodeHeaderTemplateDomId="list_responsive_collapsible_folders:folders",this.param.extra&&this.param.extra.isActiveThemeFolder&&(this.param.cssClass=this.ACTIVE_THEME_CLASS)},C.TreeNode&&(C.RepositoryFolder.prototype=(0,a.I8Q)(C.TreeNode.prototype)),C.RepositoryFolder.addVar("ACTIVE_THEME_CLASS","activeTheme"),C.RepositoryFolder.addMethod("isParent",(function(){return this.param.type==this.Types.Folder.name||this.param.type==this.Types.SuperRoot.name||this.param.type==this.Types.Root.name})),C.RepositoryFolder.addMethod("isSuperRoot",(function(){return this.param.type==this.Types.SuperRoot.name})),C.RepositoryFolder.addMethod("isPublic",(function(){return"public"===this.param.id})),C.createRepositoryTree=function(e,t){var i=null!=t.organizationId&&""!==t.organizationId;null==t.bShowRoot&&(t.bShowRoot=!i),t.nodeClass||(t.nodeClass=C.RepositoryFolder),t.templateDomId="list_responsive_collapsible_folders";var d=new C.TreeSupport(e,t);if(d.organizationId=t.organizationId,d.publicFolderUri=t.publicFolderUri,d.orgMode=i,d.modifyRootObject=function(e,t,i){var d;if(t){d=[];for(var r=0;r<e.length;r++)e[r].uri==this.publicFolderUri&&i&&"/"!=i.param.uri||d.push(e[r])}else if(this.orgMode&&null!=e.children){for(var s,o=e.children,n=[],l=0;l<o.length;l++)o[l].uri==this.publicFolderUri?s=o[l]:n.push(o[l]);e.children=n,(d={type:"superroot",label:"",extra:{}}).children=s?[e,s]:[e]}else d=e;return d},d.getRootNode=function(){var e=this.rootNode;return e.isSuperRoot()?e.childs[0].isPublic()&&e.childs.length>1?e.childs[1]:e.childs[0]:e},d.findNodeChildByMetaName=function(e,t){if(e.isSuperRoot()){var i,r;if(e.childs[0].isPublic()?(i=e.childs[0],r=e.childs[1]):(i=e.childs[1],r=e.childs[0]),"public"===t)return i;e=r}if(e.hasChilds())for(var s=0;s<e.childs.length;s++)if(e.childs[s].param.id==t)return e.childs[s];return"public"==t&&e.parent&&e.parent.isSuperRoot()?d.findNodeChildByMetaName(e.parent,t):null},(0,a.zcy)()){var r=s()("#"+e)[0];d.touchController=new v.Z(r,s()(r).parent(1),{absolute:!0})}return d};const M=C}}]);
//# sourceMappingURL=chunk.6539.js.map