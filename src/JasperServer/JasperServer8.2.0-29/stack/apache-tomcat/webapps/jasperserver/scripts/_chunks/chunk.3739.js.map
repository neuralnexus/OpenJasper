{"version":3,"sources":["webpack://jrs-ui/./src/components/components.templateengine.js","webpack://jrs-ui/./src/i18n/ImportExportValidationBundle.properties.js","webpack://jrs-ui/./src/tenantImportExport/export/model/ResourcesModel.js","webpack://jrs-ui/./src/tenantImportExport/export/factory/exportModelAttributesFactory.js","webpack://jrs-ui/./src/tenantImportExport/export/model/ExportModel.js","webpack://jrs-ui/./src/tenantImportExport/export/model/AuthorityPickerModel.js","webpack://jrs-ui/./src/tenantImportExport/export/view/AuthorityPickerView.js","webpack://jrs-ui/./src/tenantImportExport/export/template/authorityPickerTemplate.htm","webpack://jrs-ui/./src/tenantImportExport/export/template/authorityPickerOptionsTemplate.htm","webpack://jrs-ui/./src/tenantImportExport/export/view/ExportDependentResourcesDialogView.js","webpack://jrs-ui/./src/tenantImportExport/export/template/assetsToIncludeExtendedVersionTemplate.htm","webpack://jrs-ui/./src/tenantImportExport/export/template/eventsToIncludeTemplate.htm","webpack://jrs-ui/./src/tenantImportExport/export/template/rolesAndUsersToIncludeTemplate.htm","webpack://jrs-ui/./src/tenantImportExport/export/factory/exportTemplateFactory.js","webpack://jrs-ui/./src/tenantImportExport/export/template/repositoryExportTemplate.htm","webpack://jrs-ui/./src/tenantImportExport/export/view/ExportView.js","webpack://jrs-ui/./src/tenantImportExport/export/template/exportDataFileTemplate.htm","webpack://jrs-ui/./src/tenantImportExport/export/template/exportOptionsContainerTemplate.htm","webpack://jrs-ui/../js-sdk/src/common/util/i18nMessage.js"],"names":["jQuery","_","jaspersoft","render","templateText","model","type","template","this","STD_PLACEHOLDERS","result","String","each","val","index","regExp","RegExp","replace","renderUrl","encode","url","encodeURI","getTemplateText","templateId","html","createTemplate","length","createTemplateFromText","createTemplateSection","section","concreteSectionRegexpPattern","regexp","templateSectionText","match","bundle","Object","keys","reduce","acc","key","Backbone","fetch","request","attributesByType","commonAttributes","roles","users","everything","userForRoles","rolesForUser","includeReports","includeOtherResourceFiles","includeDataSources","includeDependentObjects","includeAttributes","includeAttributeValues","events","includeAccessEvents","includeAuditEvents","includeMonitoringEvents","proAssets","includeDomains","includeAdHocViews","includeDashboards","tenantAssets","includeSubOrganizations","serverAssets","includeServerSettings","exportTypesEnum","i18nMessage","i18nMessageUtil","i18n","typeMap","ExportModel","BaseModel","defaults","validation","fileName","required","msg","maxLength","fn","test","uris","state","toExportTask","parameters","param","initialize","resources","ResourcesModel","save","dfd","$","tmpModel","self","exportModel","res","get","someResourceIsChecked","done","push","resolve","getResourceTypes","resourceTypes","response","fail","reject","trigger","cancel","id","destroy","includeReportJobs","repositoryExportOptions","scheduledJobs","ExportOptions","uri","organizationsFolderUri","orgTemplateFolderUri","matches","jrsConfigs","exec","organization","last","first","tenantExportOptions","getConvertedParameters","secureKeyTypeEnum","reset","opts","exportModelAttributesFactory","clear","set","includeRepositoryPermissions","skipProfileAttributesValues","attributeNames","value","prototype","BackboneValidation","items","Engine","urlTemplate","context","parse","responce","role","user","defaultErrorHandler","xnr","data","JSON","responseText","error","status","setContext","searchString","excludeSubOrgs","instance","inst","isBeetween","a","b","c","Math","max","min","cursor","baseCursor","selecting","scrollSpeed","options","on","renderList","arguments","upHandler","evt","stopScroll","el","initOptions","mainTemplate","optionsTemplate","$el","children","subEl","find","delegateEvents","attributes","element","attr","height","scrollTop","getSelected","memo","selected","span","join","search","addClass","removeClass","_selectAllHandler","selectAll","keyHandler","which","setDisabled","$selectAll","undelegateEvents","highlightSet","what","toggleClass","silent","selectNone","selectInverse","selectItem","n","unSelectItem","selectRange","begin","end","selectionStarted","ctrlKey","metaKey","target","parents","shiftKey","mouseEntered","mouseLeave","previous","next","relatedTarget","selectionFinished","startScroll","hasClass","direction","document","body","scrollTimer","setInterval","scrollList","clearInterval","off","BaseWarningDialogView","constructor","resizable","buttons","label","i18n2","action","primary","close","open","message","exportTemplateByType","rolesAndUsersToIncludeTemplate","assetsToIncludeExtendedVersionTemplate","eventsToIncludeTemplate","ExportView","className","computeds","includeAccessEventsChecked","enableAttributesValues","deps","enableReportJobs","isKeyDefaultValue","keyType","isKeyUniversalValue","isKeyUseCustom","stateModel","ExportStateModel","customKeyStateModel","CustomKeyModel","epoxifyView","loadingDialog","LoadingDialog","content","notification","Notification","dependentResourcesDialogView","ExportDependentResourcesDialogView","listenTo","_onModelChange","handleExportPhase","window","location","reload","notFoundNotification","delay","unexpectedErrorNotification","show","downloadFile","call","_showNotification","cancelExportTask","_onRepositoryBrowserButtonClick","keyFileDialog","_clearSecureKeyErrors","_onKeyTypeChange","event","radioValue","_onCustomKeyInput","selectedIndex","isServerType","_isServerLevel","isServerOrRootType","stopListening","filterAuthoritiesBySubOrgs","_resetModel","encryptionHint","awsSettings","getCustomKeys","responseJSON","customKeyFailure","alias","renderSecTemplate","i","text","append","doExport","isValid","unset","notificationOptions","phase","brokenDependencies","_getBrokenDependencies","contextMixin","rolesList","usersList","bindWithRoles","selection","onUsersToRolesChange","rolesToUsers","bindWithUsers","onRolesToUsersChange","usersToRoles","changeEnabledState","includeRolesByUsers","is","_includeUsersOrRoles","includeUsersWithRoles","includeSelectedRolesUsersOnly","sendParameters","item","username","tenantId","name","isVisible","warnings","paths","code","path","_clickOnCheckbox","checkbox","disabled","checked","modelOptions","initializeAuthorityPickers","AuthorityPickerView","AuthorityModel","customClass","title","selectLabel","secretKeyTemplate","outerHTML","exportTemplateFactory","isServerLevel","isServerCe","isRepository","isSubOrgLevel","toJSON","secureKeyTypes","showCustomKey","showKeyValue","exportMode","applyEpoxyBindings","focus","iframe","createElement","src","style","display","epoxyViewMixin","ARGS_TYPE","classUtil","args","Array","slice","toString","argsType","_getArgsType","_interpolateIndexArgs","_interpolateObjectArgs","firstArg","separator","formattedArgs","argument","l","parameter","create"],"mappings":"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","file":"_chunks/chunk.3739.js","sourcesContent":["/*\n * Copyright (C) 2005 - 2022 TIBCO Software Inc. All rights reserved.\n * http://www.jaspersoft.com.\n *\n * Unless you have purchased a commercial license agreement from Jaspersoft,\n * the following license terms apply:\n *\n * This program is free software: you can redistribute it and/or modify\n * it under the terms of the GNU Affero General Public License as\n * published by the Free Software Foundation, either version 3 of the\n * License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the\n * GNU Affero General Public License for more details.\n *\n * You should have received a copy of the GNU Affero General Public License\n * along with this program. If not, see <http://www.gnu.org/licenses/>.\n */\n\n\n/**\n * @author: inesterenko\n * @version: $Id$\n */\nimport jQuery from \"jquery\";\nimport _ from \"underscore\";\nimport {jaspersoft} from \"../namespace/namespace\";\n\n//TODO: this module from controls.core.js, remove it from controls.core.js\njaspersoft.components.templateEngine = (function(jQuery, _){\n\n    // Provide functionality to get templates\n\n    return {\n\n        // Populate template with data\n        render:function (templateText, model, type) {\n            if (!type){\n                //Mustache by default\n                return _.template(templateText)(model);\n            }else if(type == this.STD_PLACEHOLDERS){\n                var result = String(templateText);\n                _.each(model,  function(val, index){\n                    var regExp = new RegExp(\"\\\\{\"+index+\"\\\\}\");\n                    result = result.replace(regExp, val);\n                });\n                return result;\n            }\n        },\n        renderUrl:function(templateText, model, encode){\n            var url = _.template(templateText)(model);\n            if(encode){\n                url = encodeURI(url);\n            }\n            return url;\n        },\n        // Return template's text\n        getTemplateText:function (templateId) {\n            var scriptTag = jQuery(\"#\" + templateId);\n            return scriptTag.html();\n        },\n\n        // Return template's function for given id\n        createTemplate:function (templateId) {\n            var scriptTag = jQuery(\"#\" + templateId);\n            var templateText = scriptTag.html();\n\n            if (templateText && templateText.length > 0) {\n                return function (model) {\n                    return _.template(templateText)(model);\n                };\n            }\n        },\n\n        createTemplateFromText: function(templateText){\n            if (templateText && templateText.length > 0) {\n                return function (model) {\n                    return _.template(templateText)(model);\n                };\n            }\n        },\n\n        // Cut template's text chunk and wrap with a function\n        createTemplateSection:function (section, templateId) {\n            var regexpTemplate = '<!--#val-->(\\\\s|\\\\S)*<!--/val-->';\n            var concreteSectionRegexpPattern = regexpTemplate.replace(/val/g, section);\n            var regexp = new RegExp(concreteSectionRegexpPattern, \"g\");\n            var templateText = this.getTemplateText(templateId);\n            var templateSectionText = templateText.match(regexp)[0];\n            return  function (model) {\n                return _.template(templateSectionText)(model);\n            };\n        },\n\n        STD_PLACEHOLDERS : \"std_placeholder\"\n\n    };\n\n})(\n    jQuery,\n    _\n);\n\nexport default jaspersoft.components.templateEngine;\n","\n        import {store, MERGED_BUNDLES_NAME} from 'bundleStore';\n        \n        let bundle;\n        \n        if ('ImportExportValidationBundle' !== MERGED_BUNDLES_NAME) {\n            store['ImportExportValidationBundle'] = store['ImportExportValidationBundle'] || {};\n            bundle = store['ImportExportValidationBundle'];\n        } else {\n            bundle = Object.keys(store).reduce((acc, key) => {\n                return {\n                    ...acc,\n                    ...store[key]\n                }\n            }, {});\n        }\n                                     \n        export default bundle;\n    ","/*\n * Copyright (C) 2005 - 2022 TIBCO Software Inc. All rights reserved.\n * http://www.jaspersoft.com.\n *\n * Unless you have purchased a commercial license agreement from Jaspersoft,\n * the following license terms apply:\n *\n * This program is free software: you can redistribute it and/or modify\n * it under the terms of the GNU Affero General Public License as\n * published by the Free Software Foundation, either version 3 of the\n * License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the\n * GNU Affero General Public License for more details.\n *\n * You should have received a copy of the GNU Affero General Public License\n * along with this program. If not, see <http://www.gnu.org/licenses/>.\n */\n\nimport Backbone from 'backbone';\nimport request from 'js-sdk/src/common/transport/request';\n\nexport default Backbone.Model.extend({\n    url: 'rest_v2/settings/exportResourceOptions',\n    fetch: function () {\n        return request({\n            url: this.url,\n            type: 'GET'\n        });\n    }\n});","/*\n * Copyright (C) 2005 - 2022 TIBCO Software Inc. All rights reserved.\n * http://www.jaspersoft.com.\n *\n * Unless you have purchased a commercial license agreement from Jaspersoft,\n * the following license terms apply:\n *\n * This program is free software: you can redistribute it and/or modify\n * it under the terms of the GNU Affero General Public License as\n * published by the Free Software Foundation, either version 3 of the\n * License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the\n * GNU Affero General Public License for more details.\n *\n * You should have received a copy of the GNU Affero General Public License\n * along with this program. If not, see <http://www.gnu.org/licenses/>.\n */\n\nimport _ from 'underscore';\nimport exportTypesEnum from '../enum/exportTypesEnum';\n\nvar attributesByType = {};\nvar commonAttributes = {\n    roles: null,\n    users: null,\n    everything: true,\n    userForRoles: false,\n    rolesForUser: false,\n    includeReports: true,\n    includeOtherResourceFiles: true,\n    includeDataSources: true,\n    includeDependentObjects: true,\n    includeAttributes: true,\n    includeAttributeValues: true\n};\nvar events = {\n    includeAccessEvents: false,\n    includeAuditEvents: false,\n    includeMonitoringEvents: false\n};\nvar proAssets = {\n    includeDomains: true,\n    includeAdHocViews: true,\n    includeDashboards: true\n};\nvar tenantAssets = { includeSubOrganizations: true };\nvar serverAssets = { includeServerSettings: true };\nattributesByType[exportTypesEnum.ROOT_TENANT] = _.extend({}, commonAttributes, events, proAssets, tenantAssets, serverAssets);\nattributesByType[exportTypesEnum.TENANT] = _.extend({}, commonAttributes, proAssets, tenantAssets);\nattributesByType[exportTypesEnum.SERVER_PRO] = _.extend({}, commonAttributes, events, proAssets, tenantAssets, serverAssets);\nattributesByType[exportTypesEnum.SERVER_CE] = _.extend({}, commonAttributes, serverAssets, { includeAccessEvents: true });\nexport default function (type) {\n    return attributesByType[type];\n}","/*\n * Copyright (C) 2005 - 2022 TIBCO Software Inc. All rights reserved.\n * http://www.jaspersoft.com.\n *\n * Unless you have purchased a commercial license agreement from Jaspersoft,\n * the following license terms apply:\n *\n * This program is free software: you can redistribute it and/or modify\n * it under the terms of the GNU Affero General Public License as\n * published by the Free Software Foundation, either version 3 of the\n * License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the\n * GNU Affero General Public License for more details.\n *\n * You should have received a copy of the GNU Affero General Public License\n * along with this program. If not, see <http://www.gnu.org/licenses/>.\n */\n\n\n/**\n * @author: Zakhar Tomchenko\n * @version:\n */\n\nimport $ from 'jquery';\nimport _ from 'underscore';\nimport Backbone from 'backbone';\nimport BackboneValidation from 'js-sdk/src/common/extension/backboneValidationExtension';\nimport jrsConfigs from 'js-sdk/src/jrs.configs';\nimport i18n from '../../../i18n/ImportExportValidationBundle.properties';\nimport BaseModel from 'js-sdk/src/common/model/BaseModel';\nimport ResourcesModel from '../model/ResourcesModel';\nimport exportModelAttributesFactory from '../factory/exportModelAttributesFactory';\nimport exportTypesEnum from '../enum/exportTypesEnum';\nimport i18nMessageUtil from 'js-sdk/src/common/util/i18nMessage';\nimport secureKeyTypeEnum from '../../import/enum/secureKeyTypeEnum';\n\nvar i18nMessage = i18nMessageUtil.extend({ bundle: i18n });\n\nvar MAX_LENGTH = 256,\n    typeMap = {\n        includeReports: \"report\",\n        includeDomains: \"domain\",\n        includeAdHocViews: \"adhocDataView\",\n        includeDataSources: \"dataSource\",\n        includeDashboards: \"dashboard\",\n        includeOtherResourceFiles: \"others\" // TODO WAT?\n    },\n\n    ExportModel = BaseModel.extend({\n\n        defaults: {\n            \"uris\": [\"/\"],\n            \"fileName\": \"export.zip\",\n            \"encryptFile\": false,\n            \"includeRepositoryPermissions\": true,\n            \"includeScheduledReportJobs\": true,\n            \"includeDependencies\": true,\n            \"includeFullResourcePath\": true,\n            'keyType': '',\n            'keyAlias' :'',\n            'invalidKeyError': '',\n            'invalidSecureFileContentError': '',\n            'customKeyElements' : '',\n            'showCustomKey' : true,\n            'key-Alias': ''\n        },\n\n        validation: {\n            fileName: [\n                {\n                    required: true,\n                    msg: new i18nMessage(\"export.file.name.empty\")\n                },\n                {\n                    maxLength: MAX_LENGTH,\n                    msg: new i18nMessage(\"export.file.name.too.long\", MAX_LENGTH)\n                },\n                {\n                    fn: function(fileName) {\n                        if (/[\\\\/?*%:|\"<>]/g.test(fileName)) {\n                            return new i18nMessage(\"export.file.name.contains.not.supported.characters\");\n                        }\n                        if (/^[\\.]{1,2}$/g.test(fileName)) {\n                            return new i18nMessage(\"export.file.name.not.valid\");\n                        }\n                    }\n                }\n            ],\n            uris: [\n                {\n                    fn: function() {\n                        var state = this.toExportTask();\n\n                        return !(state.uris || state.roles || state.users || _.filter(state.parameters, function (param) {\n                            return param !== \"role-users\" && param !== \"users-roles\";\n                        }).length);\n                    }\n                }\n            ]\n        },\n\n        initialize: function () {\n            BaseModel.prototype.initialize.call(this);\n            _.bindAll(this, \"url\", \"save\", \"cancel\", \"toExportTask\", \"reset\");\n\n            this.resources = new ResourcesModel();\n        },\n\n        url: function () {\n            return \"rest_v2/export\"\n        },\n\n        save: function () {\n            var dfd = new $.Deferred(),\n                tmpModel = new Backbone.Model(),\n                self = this;\n\n            tmpModel.url = this.url;\n\n            var parameters = {};\n\n            getResourceTypes(this).done(function(resourceTypes) {\n                resourceTypes && (parameters.resourceTypes = resourceTypes);\n\n                tmpModel.save(_.extend(self.toExportTask(), parameters)).done(function(response) {\n                    dfd.resolve(response);\n                }).fail(function(response) {\n                    dfd.reject(response);\n                    self.trigger(\"error\", self, response);\n                })\n            });\n\n            return dfd;\n        },\n\n        cancel: function() {\n            var url = this.url() + \"/\" + this.id;\n\n            this.destroy({url: url});\n        },\n\n\n        toExportTask: function () {\n            var everything = this.get(\"everything\"),\n                roles = this.get(\"roles\"),\n                users = this.get(\"users\"),\n                uris = _.clone(this.get(\"uris\")),\n                includeReportJobs = everything || (this.get(\"includeReports\") && this.get(\"includeScheduledReportJobs\"));\n\n            var repositoryExportOptions = {\n                uris: uris,\n                scheduledJobs: this.get(\"includeScheduledReportJobs\") ? uris : null,\n                parameters: []\n            };\n            _.extend(repositoryExportOptions, this.ExportOptions());\n            this.get(\"includeRepositoryPermissions\") && repositoryExportOptions.parameters.push(\"repository-permissions\");\n\n            !this.get(\"includeDependencies\") && repositoryExportOptions.parameters.push(\"skip-dependent-resources\");\n\n            // drop parent org prefix from paths, add required attributes if exporting from sub-org and includeFullResourcePath is unchecked\n            var matches = subOrgLevelMatches(uris && uris[0]);\n            if (matches && !this.get(\"includeFullResourcePath\")) {\n                repositoryExportOptions.organization = matches.last();\n                repositoryExportOptions.parameters.push(\"skip-suborganizations\", \"skip-attribute-values\");\n                repositoryExportOptions.uris = _.map(uris, function(uri) {\n                    return uri.replace(matches.first(),\"\");\n                });\n                repositoryExportOptions.scheduledJobs = this.get(\"includeScheduledReportJobs\") ? repositoryExportOptions.uris : null;\n            }\n\n            var tenantExportOptions = {\n                uris: someResourceIsChecked(this) ? uris : null,\n                roles: !_.isEmpty(roles) ? roles : null,\n                users: !_.isEmpty(users) ? users : null,\n                scheduledJobs: includeReportJobs ? uris : null,\n                organization: this.get(\"organization\"),\n                parameters: getConvertedParameters(this)\n            };\n            _.extend(tenantExportOptions, this.ExportOptions());\n\n            return this.type !== exportTypesEnum.REPOSITORY\n                ? tenantExportOptions\n                : repositoryExportOptions;\n        },\n\n        ExportOptions: function() {\n            if ( this.get(\"keyType\") ===secureKeyTypeEnum.CUSTOMKEY ) {\n                return {'keyAlias' : this.get(\"keyAlias\")};\n            } else if( this.get(\"keyType\") ===secureKeyTypeEnum.UNIVERSALKEY ) {\n                return {'keyAlias' : this.get(\"keyType\")};\n            } else{\n                return {'keyAlias' : secureKeyTypeEnum.DEFAULTKEY};\n            }\n        },\n\n        reset: function(opts, type) {\n            this.type = type;\n\n            var defaults = _.extend({}, this.defaults, exportModelAttributesFactory(type));\n\n            this.clear().set(_.extend({}, defaults, opts));\n        }\n    });\n\n_.extend(ExportModel.prototype, BackboneValidation.mixin);\n\nfunction getConvertedParameters(exportModel) {\n    var res = [],\n        includeRepositoryPermissions,\n        skipProfileAttributesValues;\n\n    if (exportModel.get(\"everything\")) {\n        res.push(\"everything\");\n\n        exportModel.get(\"includeAccessEvents\") && res.push(\"include-access-events\");\n    } else {\n        includeRepositoryPermissions = someResourceIsChecked(exportModel) && exportModel.get(\"includeRepositoryPermissions\") && !_.isEmpty(exportModel.get(\"uris\"));\n        skipProfileAttributesValues = !exportModel.get(\"includeAttributeValues\") || !exportModel.get(\"includeAttributes\");\n\n        exportModel.get(\"userForRoles\") && res.push(\"role-users\");\n        exportModel.get(\"rolesForUser\") && res.push(\"users-roles\");\n\n        includeRepositoryPermissions && res.push(\"repository-permissions\");\n        !exportModel.get(\"includeSubOrganizations\") && res.push(\"skip-suborganizations\");\n\n        exportModel.get(\"includeAttributes\") && res.push(\"include-attributes\");\n        skipProfileAttributesValues && res.push(\"skip-attribute-values\");\n\n        exportModel.get(\"includeServerSettings\") && res.push(\"include-server-settings\");\n        (!someResourceIsChecked(exportModel) || !exportModel.get(\"includeDependentObjects\")) && res.push(\"skip-dependent-resources\");\n    }\n\n    exportModel.get(\"includeAuditEvents\") && res.push(\"include-audit-events\");\n\n    exportModel.get(\"includeMonitoringEvents\") && res.push(\"include-monitoring-events\");\n\n    exportModel.get(\"encryptFile\") && res.push(\"encrypted\");\n\n    return res;\n}\n\nfunction getResourceTypes(exportModel) {\n    var res = [],\n        dfd = new $.Deferred();\n\n    !exportModel.get(\"everything\") && someResourceIsChecked(exportModel)\n        ? exportModel.resources.fetch().done(function(resources) {\n            for (var key in typeMap) {\n                exportModel.get(key) && res.push(resources[typeMap[key]]);\n            }\n\n            dfd.resolve(_.flatten(res));\n        })\n        : dfd.resolve(null);\n\n    return dfd;\n}\n\nfunction someResourceIsChecked(exportModel) {\n    var attributeNames = _.keys(typeMap);\n\n    return _.filter(attributeNames, function(value) {\n        return exportModel.get(value);\n    }).length;\n}\n\nfunction subOrgLevelMatches(uri) {\n    var organizationsFolderUri = jrsConfigs.organizationsFolderUri || \"/organizations\";\n    var orgTemplateFolderUri = jrsConfigs.orgTemplateFolderUri || \"/org_template\";\n    var regExp = new RegExp(\"^(\" + organizationsFolderUri + \"(?!\" + orgTemplateFolderUri + \")/([^/]+))+\");\n    return regExp.exec(uri);\n}\n\nexport default ExportModel;","/*\n * Copyright (C) 2005 - 2022 TIBCO Software Inc. All rights reserved.\n * http://www.jaspersoft.com.\n *\n * Unless you have purchased a commercial license agreement from Jaspersoft,\n * the following license terms apply:\n *\n * This program is free software: you can redistribute it and/or modify\n * it under the terms of the GNU Affero General Public License as\n * published by the Free Software Foundation, either version 3 of the\n * License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the\n * GNU Affero General Public License for more details.\n *\n * You should have received a copy of the GNU Affero General Public License\n * along with this program. If not, see <http://www.gnu.org/licenses/>.\n */\n\n/**\n * @author: ztomchenco\n * @version: $Id$\n */\nimport Backbone from 'backbone';\nimport Engine from '../../../components/components.templateengine';\nimport _ from 'underscore';\n\nexport default Backbone.Model.extend({\n\n    defaults: {\n        items: []\n    },\n\n    url: function () {\n        return Engine.renderUrl(this.urlTemplate, this.context, true);\n    },\n\n    parse: function (responce) {\n        return {items: responce ? ((responce.role) ? responce.role : responce.user) : []};\n    },\n\n    defaultErrorHandler: function (model, xnr) {\n        var data;\n        try {\n            data = JSON.parse(xnr.responseText);\n        } catch (error) { // this is not JSON\n            data = null;\n        }\n        this.trigger(\"error:server\", xnr.status, data, model);\n    },\n\n    setContext: function (context) {\n        this.context = _.extend(this.context || {\n            searchString: \"\",\n            excludeSubOrgs: false\n        }, context);\n        this.fetch({error: _.bind(this.defaultErrorHandler, this)});\n    }\n\n}, {\n    instance: function (urlTemplate, context) {\n        var inst = new this();\n        inst.urlTemplate = urlTemplate;\n        context && inst.setContext(context);\n        return inst;\n    }\n});\n","/*\n * Copyright (C) 2005 - 2022 TIBCO Software Inc. All rights reserved.\n * http://www.jaspersoft.com.\n *\n * Unless you have purchased a commercial license agreement from Jaspersoft,\n * the following license terms apply:\n *\n * This program is free software: you can redistribute it and/or modify\n * it under the terms of the GNU Affero General Public License as\n * published by the Free Software Foundation, either version 3 of the\n * License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the\n * GNU Affero General Public License for more details.\n *\n * You should have received a copy of the GNU Affero General Public License\n * along with this program. If not, see <http://www.gnu.org/licenses/>.\n */\n\nimport jQuery from 'jquery';\nimport Backbone from 'backbone';\nimport mainTemplate from '../template/authorityPickerTemplate.htm';\nimport optionTemplate from '../template/authorityPickerOptionsTemplate.htm';\nimport _ from 'underscore';\n\nfunction isBeetween(a, b, c) {\n    return c <= Math.max(a, b) && c >= Math.min(a, b);\n}\nexport default Backbone.View.extend({\n    events: {\n        'click .button.search': 'search',\n        'click .button.searchClear': 'clear',\n        'click .button-select-all': '_selectAllHandler',\n        'keydown input[type=text]': 'keyHandler',\n        'mousedown li': 'selectionStarted',\n        'mouseenter li': 'mouseEntered',\n        'mouseleave li': 'mouseLeave',\n        'mouseup ul': 'selectionFinished',\n        'mouseenter ul': 'stopScroll',\n        'mouseleave ul': 'startScroll'\n    },\n    cursor: -1,\n    baseCursor: -1,\n    selecting: false,\n    scrollSpeed: 30,\n    initialize: function (options) {\n        this.model.on('change', _.bind(this.renderList, this));\n        this.model.on('error:server', _.bind(function () {\n            this.trigger('error:server', arguments);\n        }, this));\n        this.upHandler = _.bind(function (evt) {\n            this.stopScroll(evt);\n            this.selecting = false;\n        }, this);\n        this.el = false;\n        this.initOptions = options;\n    },\n    render: function () {\n        if (!this.mainTemplate)\n            this.mainTemplate = _.template(mainTemplate);\n        if (!this.optionsTemplate)\n            this.optionsTemplate = _.template(optionTemplate);\n        if (!this.el) {\n            this.$el = jQuery('<div></div>').html(this.mainTemplate(this.initOptions)).children();\n            this.el = this.$el[0];\n            this.subEl = this.$el.find('.authorityPicker ul');\n            this.delegateEvents();\n        }\n        this.model.context || this.model.setContext();\n        return this;\n    },\n    renderList: function () {\n        this.subEl.html(this.optionsTemplate(this.model.attributes)).find('li').each(function (index, element) {\n            jQuery(element).attr('index', index);\n        });\n        this.cursor = -1;\n        this.baseCursor = -1;\n        this.scrollSpeed = this.subEl.find('li:eq(0)').height();\n        this.subEl.scrollTop(0);\n        this.trigger('change:selection', []);\n        return this;\n    },\n    getSelected: function () {\n        return _.reduce(this.subEl.find('.selected'), function (memo, el) {\n            var selected = _.map(jQuery(el).find('span'), function (span) {\n                return jQuery(span).html();\n            });\n            memo.push(selected.join('|'));\n            return memo;\n        }, []);\n    },\n    search: function () {\n        var searchString = this.$el.find('input[type=text]').val();\n        this.model.setContext({ searchString: searchString });\n        if (searchString) {\n            this.$el.find('.button.searchClear').addClass('up');\n        } else {\n            this.$el.find('.button.searchClear').removeClass('up');\n        }\n    },\n    _selectAllHandler: function () {\n        this.selectAll();\n    },\n    clear: function () {\n        this.$el.find('input[type=text]').val('');\n        this.search();\n    },\n    keyHandler: function (evt) {\n        if (evt.which === 13) {\n            this.search();\n        }\n    },\n    setDisabled: function (value) {\n        var $selectAll = this.$el.find('.button-select-all').children();\n        if (value) {\n            this.subEl.addClass('disabled');\n            $selectAll.addClass('disabled');\n            this.undelegateEvents();\n        } else {\n            this.subEl.removeClass('disabled');\n            $selectAll.removeClass('disabled');\n            this.delegateEvents();\n        }\n        this.$el.find('input[type=text]').attr('disabled', value);\n    },\n    highlightSet: function (what) {\n        this.subEl.find('li').each(function (index, element) {\n            element = jQuery(element);\n            var selected = _.map(element.find('span'), function (span) {\n                return jQuery(span).html();\n            });\n            element.toggleClass('highlighted', _.contains(what, selected.join('|')));\n        });\n    },\n    selectAll: function (silent) {\n        this.subEl.find('li').each(function (index, element) {\n            jQuery(element).addClass('selected');\n        });\n        silent || this.trigger('change:selection', this.getSelected());\n    },\n    selectNone: function (silent) {\n        this.subEl.find('li').each(function (index, element) {\n            jQuery(element).removeClass('selected');\n        });\n        silent || this.trigger('change:selection', this.getSelected());\n    },\n    selectInverse: function (silent) {\n        this.subEl.find('li').each(function (index, element) {\n            jQuery(element).toggleClass('selected');\n        });\n        silent || this.trigger('change:selection', this.getSelected());\n    },\n    selectItem: function (n, silent) {\n        this.subEl.find('li[index=' + n + ']').addClass('selected');\n        silent || this.trigger('change:selection', this.getSelected());\n    },\n    unSelectItem: function (n, silent) {\n        this.subEl.find('li[index=' + n + ']').removeClass('selected');\n        silent || this.trigger('change:selection', this.getSelected());\n    },\n    selectRange: function (a, b, silent) {\n        var begin = Math.min(a, b);\n        var end = Math.max(a, b);\n        this.subEl.find('li:lt(' + (end + 1) + ')').each(function (index, element) {\n            if (index >= begin) {\n                jQuery(element).addClass('selected');\n            }\n        });\n        silent || this.trigger('change:selection', this.getSelected());\n    },\n    selectionStarted: function (evt) {\n        this.selecting = true;\n        if (!(evt.ctrlKey || evt.metaKey)) {\n            this.selectNone(true);\n        }\n        var index = +jQuery(evt.target).parents('li').toggleClass('selected').attr('index');\n        if (evt.shiftKey) {\n            if (this.cursor != -1) {\n                this.selectRange(this.cursor, index, true);\n            }\n        } else {\n            this.cursor = index;\n            this.baseCursor = this.cursor;\n        }\n    },\n    mouseEntered: function (evt) {\n        if (this.selecting) {\n            this.cursor = +jQuery(evt.target).parents('li').addClass('selected').attr('index');\n        }\n    },\n    mouseLeave: function (evt) {\n        if (this.selecting) {\n            var previous = jQuery(evt.target).parents('li');\n            var next = jQuery(evt.relatedTarget).parents('li');\n            if (isBeetween(this.cursor, this.baseCursor, +next.attr('index'))) {\n                previous.removeClass('selected');\n            }\n        }\n    },\n    selectionFinished: function (evt) {\n        this.selecting = false;\n        this.trigger('change:selection', this.getSelected());\n    },\n    startScroll: function (evt) {\n        if (this.selecting) {\n            if (jQuery(evt.relatedTarget).hasClass('upper')) {\n                this.direction = -1;\n            } else if (jQuery(evt.relatedTarget).hasClass('lower')) {\n                this.direction = 1;\n            } else {\n                this.selecting = false;\n                return;\n            }\n            jQuery(document.body).on('mouseup', this.upHandler);\n            this.scrollTimer = setInterval(_.bind(this.scrollList, this), 200);\n        }\n    },\n    stopScroll: function (evt) {\n        if (this.selecting) {\n            clearInterval(this.scrollTimer);\n            this.direction = 0;\n            jQuery(document.body).off('mouseup', this.upHandler);\n        }\n    },\n    scrollList: function () {\n        this.subEl.scrollTop(+this.subEl.scrollTop() + this.scrollSpeed * this.direction);\n        if (isBeetween(this.cursor, this.baseCursor, this.cursor + this.direction)) {\n            this.unSelectItem(this.cursor, true);\n        } else {\n            this.selectItem(this.cursor + this.direction, true);\n        }\n        this.cursor = this.cursor + this.direction;\n    }\n});","export default \"<div class=\\\"control combo {{- customClass}} \\\" title=\\\"{{- title}}\\\">\\n\\n    <js-templateNonce></js-templateNonce>\\n    <span class=\\\"wrap\\\">{{- title}}</span>\\n        <span class=\\\"control searchLockup \\\">\\n            <div class=\\\"wrap\\\">\\n                <input type=\\\"text\\\" tabindex=\\\"\\\">\\n            </div>\\n            <b class=\\\"right\\\">\\n                <a class=\\\"button searchClear\\\"></a>\\n            </b>\\n            <a class=\\\"button search up\\\"></a>\\n        </span>\\n\\n    <div class=\\\"authorityPicker\\\" onselectstart=\\\"return false\\\">\\n        <div class=\\\"selectBorder upper\\\"></div>\\n        <ul class=\\\"list\\\"></ul>\\n        <div class=\\\"selectBorder lower\\\"></div>\\n    </div>\\n\\n    <div class=\\\"button-select-all\\\" title=\\\"{{- selectLabel }}\\\">\\n        <i class=\\\"icon\\\"></i>\\n        <a class=\\\"label\\\">\\n            <span class=\\\"text\\\">{{- selectLabel }}</span>\\n        </a>\\n    </div>\\n</div>\";","export default \"{{ for (var i = 0, l = items.length; i<l; i++){ }}\\n<li class=\\\"leaf\\\">\\n\\n    <js-templateNonce></js-templateNonce>\\n    <div class=\\\"\\\"><span class=\\\"leftColumn\\\">{{- items[i].name}}{{- items[i].username}}</span>\\n        {{ if (items[i].tenantId){ }}\\n            <span class=\\\"rightColumn\\\">{{- items[i].tenantId }}</span>\\n        {{ } }}\\n    </div>\\n</li>\\n{{ } }}\\n\";","/*\n * Copyright (C) 2005 - 2022 TIBCO Software Inc. All rights reserved.\n * http://www.jaspersoft.com.\n *\n * Unless you have purchased a commercial license agreement from Jaspersoft,\n * the following license terms apply:\n *\n * This program is free software: you can redistribute it and/or modify\n * it under the terms of the GNU Affero General Public License as\n * published by the Free Software Foundation, either version 3 of the\n * License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the\n * GNU Affero General Public License for more details.\n *\n * You should have received a copy of the GNU Affero General Public License\n * along with this program. If not, see <http://www.gnu.org/licenses/>.\n */\n\nimport _ from 'underscore';\nimport i18n from 'js-sdk/src/i18n/CommonBundle.properties';\nimport i18n2 from '../../../i18n/ImportExportBundle.properties';\nimport BaseWarningDialogView from '../../view/BaseWarningDialogView';\n\nexport default BaseWarningDialogView.extend({\n    constructor: function (options) {\n        options || (options = {});\n        _.extend(options, {\n            resizable: true,\n            buttons: [\n                {\n                    label: i18n2['export.button.continue'],\n                    action: 'export',\n                    primary: true\n                },\n                {\n                    label: i18n['button.cancel'],\n                    action: 'cancel',\n                    primary: false\n                }\n            ]\n        });\n        BaseWarningDialogView.prototype.constructor.call(this, options);\n        this.on('button:export', _.bind(this.close, this));\n        this.on('button:cancel', _.bind(this.close, this));\n    },\n    open: function (options) {\n        _.extend(options, { message: i18n2['export.dialog.broken.dependencies.intro'] });\n        BaseWarningDialogView.prototype.open.call(this, options);\n    }\n});","export default \"<div class=\\\"section resources tenant-options\\\">\\n\\n    <js-templateNonce></js-templateNonce>\\n    <p class=\\\"title\\\">{{- i18n[\\\"export.dialog.resources\\\"] }}</p>\\n\\n    <div class=\\\"group\\\">\\n        <div class=\\\"control checkBox\\\">\\n            <label class=\\\"wrap\\\" title=\\\"\\\">{{- i18n[\\\"export.dialog.resources.data.sources\\\"] }}</label>\\n            <input class=\\\"includeDataSources\\\" name=\\\"includeDataSources\\\" type=\\\"checkbox\\\"\\n                   data-bind=\\\"checked:includeDataSources, disabled:everything\\\">\\n        </div>\\n        {{ if(!isServerCe) { }}\\n        <div class=\\\"control checkBox\\\">\\n            <label class=\\\"wrap\\\" title=\\\"\\\">{{- i18n[\\\"export.dialog.resources.domains\\\"] }}</label>\\n            <input class=\\\"includeDomains\\\" name=\\\"includeDomains\\\" type=\\\"checkbox\\\"\\n                   data-bind=\\\"checked:includeDomains, disabled:everything\\\">\\n        </div>\\n        <div class=\\\"control checkBox\\\">\\n            <label class=\\\"wrap\\\" title=\\\"\\\">{{- i18n[\\\"export.dialog.resources.ad.hoc.views\\\"] }}</label>\\n            <input class=\\\"includeAdHocViews\\\" name=\\\"includeAdHocViews\\\" type=\\\"checkbox\\\"\\n                   data-bind=\\\"checked:includeAdHocViews, disabled:everything\\\">\\n        </div>\\n        {{ } }}\\n        <div class=\\\"control checkBox\\\">\\n            <label class=\\\"wrap\\\" title=\\\"\\\">{{- i18n[\\\"export.dialog.resources.reports\\\"] }}</label>\\n            <input class=\\\"includeReports\\\" name=\\\"includeReports\\\" type=\\\"checkbox\\\"\\n                   data-bind=\\\"checked:includeReports, disabled:everything\\\">\\n        </div>\\n        {{ if(!isServerCe) { }}\\n        <div class=\\\"control checkBox\\\">\\n            <label class=\\\"wrap\\\" title=\\\"\\\">{{- i18n[\\\"export.dialog.resources.dashboards\\\"] }}</label>\\n            <input class=\\\"includeDashboards\\\" name=\\\"includeDashboards\\\" type=\\\"checkbox\\\"\\n                   data-bind=\\\"checked:includeDashboards, disabled:everything\\\">\\n        </div>\\n        {{ } }}\\n        <div class=\\\"control checkBox\\\">\\n            <label class=\\\"wrap\\\" title=\\\"\\\">{{- i18n[\\\"export.dialog.resources.scheduled.report.jobs\\\"] }}</label>\\n            <input class=\\\"includeScheduledReportJobs\\\" name=\\\"includeScheduledReportJobs\\\" type=\\\"checkbox\\\"\\n                   data-bind=\\\"checked:includeScheduledReportJobs, enabled:enableReportJobs\\\">\\n        </div>\\n        <div class=\\\"control checkBox\\\">\\n            <label class=\\\"wrap\\\" title=\\\"\\\">{{- i18n[\\\"export.dialog.resources.other.resources\\\"] }}</label>\\n            <input class=\\\"includeOtherResourceFiles\\\" name=\\\"includeOtherResourceFiles\\\" type=\\\"checkbox\\\"\\n                   data-bind=\\\"checked:includeOtherResourceFiles, disabled:everything\\\">\\n        </div>\\n    </div>\\n</div>\\n\\n<div class=\\\"section assets tenant-options\\\">\\n    <p class=\\\"title\\\">{{- i18n[\\\"export.dialog.assets\\\"] }}</p>\\n\\n    <div class=\\\"group\\\">\\n        {{ if(!isServerCe) { }}\\n        <div class=\\\"control checkBox\\\">\\n            <label class=\\\"wrap\\\" title=\\\"\\\">{{- i18n[\\\"export.dialog.assets.sub.organizations\\\"] }}</label>\\n            <input class=\\\"includeSubOrganizations\\\" name=\\\"includeSubOrganizations\\\" type=\\\"checkbox\\\"\\n                   data-bind=\\\"checked:includeSubOrganizations, disabled:everything\\\">\\n        </div>\\n        {{ } }}\\n        <div class=\\\"control checkBox\\\">\\n            <label class=\\\"wrap\\\" title=\\\"\\\">{{- i18n[\\\"export.dialog.assets.dependent.objects\\\"] }}</label>\\n            <input class=\\\"includeDependentObjects\\\" name=\\\"includeDependentObjects\\\" type=\\\"checkbox\\\"\\n                   data-bind=\\\"checked:includeDependentObjects, enabled:someResourceIsChecked\\\">\\n        </div>\\n\\n        <div class=\\\"control checkBox\\\">\\n            <label class=\\\"wrap\\\" title=\\\"\\\">{{- i18n[\\\"export.dialog.assets.repository.permissions\\\"] }}</label>\\n            <input class=\\\"includeRepositoryPermissions\\\" name=\\\"includeRepositoryPermissions\\\" type=\\\"checkbox\\\"\\n                   data-bind=\\\"checked:includeRepositoryPermissions, enabled:someResourceIsChecked\\\">\\n        </div>\\n        {{ if (isServerOrRootType) { }}\\n        <div class=\\\"control checkBox\\\">\\n            <label class=\\\"wrap\\\" title=\\\"\\\">{{- i18n[\\\"export.dialog.assets.server.settings\\\"] }}</label>\\n            <input class=\\\"includeServerSettings\\\" name=\\\"includeServerSettings\\\" type=\\\"checkbox\\\"\\n                   data-bind=\\\"checked:includeServerSettings, disabled:everything\\\">\\n        </div>\\n        {{ } }}\\n        <div class=\\\"control checkBox\\\">\\n            <label class=\\\"wrap\\\" title=\\\"\\\">{{- i18n[\\\"export.dialog.assets.attributes\\\"] }}</label>\\n            <input class=\\\"includeAttributes\\\" name=\\\"includeAttributes\\\" type=\\\"checkbox\\\"\\n                   data-bind=\\\"checked:includeAttributes, disabled:everything\\\">\\n        </div>\\n        <div class=\\\"control checkBox\\\">\\n            <label class=\\\"wrap\\\" title=\\\"\\\">{{- i18n[\\\"export.dialog.assets.attribute.values\\\"] }}</label>\\n            <input class=\\\"includeAttributeValues\\\" name=\\\"includeAttributeValues\\\" type=\\\"checkbox\\\"\\n                   data-bind=\\\"checked:includeAttributeValues, enabled:enableAttributesValues\\\">\\n        </div>\\n    </div>\\n</div>\\n\";","export default \"<div class=\\\"section events\\\">\\n\\n    <js-templateNonce></js-templateNonce>\\n    <p class=\\\"title\\\">{{- i18n[\\\"export.dialog.events\\\"] }}</p>\\n    <div class=\\\"group\\\">\\n        <div class=\\\"control checkBox\\\">\\n            <label class=\\\"wrap\\\" title=\\\"\\\">{{- i18n[\\\"export.dialog.events.access.events\\\"] }}</label>\\n            <input class=\\\"includeAccessEvents\\\" name=\\\"includeAccessEvents\\\" type=\\\"checkbox\\\" data-bind=\\\"checked:includeAccessEvents, enabled:everything\\\">\\n        </div>\\n        {{ if(!isServerCe) { }}\\n        <div class=\\\"control checkBox\\\">\\n            <label class=\\\"wrap\\\" title=\\\"\\\">{{- i18n[\\\"export.dialog.events.audit.events\\\"] }}</label>\\n            <input class=\\\"includeAuditEvents\\\" name=\\\"includeAuditEvents\\\" type=\\\"checkbox\\\" data-bind=\\\"checked:includeAuditEvents\\\">\\n        </div>\\n        <div class=\\\"control checkBox\\\">\\n            <label class=\\\"wrap\\\" title=\\\"\\\">{{- i18n[\\\"export.dialog.events.monitoring.events\\\"] }}</label>\\n            <input class=\\\"includeMonitoringEvents\\\" name=\\\"includeMonitoringEvents\\\" type=\\\"checkbox\\\" data-bind=\\\"checked:includeMonitoringEvents\\\">\\n        </div>\\n        {{ } }}\\n    </div>\\n</div>\";","export default \"<div class=\\\"section roles-users\\\">\\n\\n    <js-templateNonce></js-templateNonce>\\n    <p class=\\\"title\\\">{{- i18n[\\\"export.dialog.roles.users\\\"] }}</p>\\n    <div class=\\\"group rolesAndUsers\\\">\\n        <div class=\\\"control radio\\\">\\n            <label class=\\\"wrap\\\" title=\\\"\\\" for=\\\"selectedUsersRoles\\\">{{- i18n[\\\"export.dialog.roles.users.selected.roles.users\\\"] }}</label>\\n            <input id=\\\"selectedUsersRoles\\\" class=\\\"selectedUsersRoles\\\" name=\\\"sample\\\" type=\\\"radio\\\" data-bind=\\\"disabled:everything\\\" checked=\\\"checked\\\">\\n        </div>\\n        <div class=\\\"control radio\\\">\\n            <label class=\\\"wrap\\\" title=\\\"\\\" for=\\\"usersWithSelectedRoles\\\">{{- i18n[\\\"export.dialog.roles.users.users.with.selected.roles\\\"] }}</label>\\n            <input id=\\\"usersWithSelectedRoles\\\" class=\\\"usersWithSelectedRoles\\\" name=\\\"sample\\\" type=\\\"radio\\\" data-bind=\\\"disabled:everything\\\">\\n        </div>\\n        <div class=\\\"control radio\\\">\\n            <label class=\\\"wrap\\\" title=\\\"\\\" for=\\\"rolesWithSelectedUsers\\\">{{- i18n[\\\"export.dialog.roles.users.roles.with.selected.users\\\"] }}</label>\\n            <input id=\\\"rolesWithSelectedUsers\\\" class=\\\"rolesWithSelectedUsers\\\" name=\\\"sample\\\" type=\\\"radio\\\" data-bind=\\\"disabled:everything\\\">\\n        </div>\\n    </div>\\n    <div class=\\\"group\\\">\\n        <div class=\\\"selectRolesUsers column two control pickWells\\\"></div>\\n    </div>\\n</div>\";","/*\n * Copyright (C) 2005 - 2022 TIBCO Software Inc. All rights reserved.\n * http://www.jaspersoft.com.\n *\n * Unless you have purchased a commercial license agreement from Jaspersoft,\n * the following license terms apply:\n *\n * This program is free software: you can redistribute it and/or modify\n * it under the terms of the GNU Affero General Public License as\n * published by the Free Software Foundation, either version 3 of the\n * License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the\n * GNU Affero General Public License for more details.\n *\n * You should have received a copy of the GNU Affero General Public License\n * along with this program. If not, see <http://www.gnu.org/licenses/>.\n */\n\nimport $ from 'jquery';\nimport assetsToIncludeExtendedVersionTemplate from '../template/assetsToIncludeExtendedVersionTemplate.htm';\nimport eventsToIncludeTemplate from '../template/eventsToIncludeTemplate.htm';\nimport exportDataFileTemplate from '../template/exportDataFileTemplate.htm';\nimport rolesAndUsersToIncludeTemplate from '../template/rolesAndUsersToIncludeTemplate.htm';\nimport exportOptionsContainerTemplate from '../template/exportOptionsContainerTemplate.htm';\nimport repositoryExportTemplate from '../template/repositoryExportTemplate.htm';\nimport exportTypesEnum from '../enum/exportTypesEnum';\nimport secretKeyTemplate from '../../templates/secretKeyTemplate.htm'\n\nvar exportTemplateByType = {};\nexportTemplateByType[exportTypesEnum.ROOT_TENANT] = [\n    rolesAndUsersToIncludeTemplate,\n    assetsToIncludeExtendedVersionTemplate,\n    eventsToIncludeTemplate\n].join('');\nexportTemplateByType[exportTypesEnum.TENANT] = [\n    rolesAndUsersToIncludeTemplate,\n    assetsToIncludeExtendedVersionTemplate\n].join('');\nexportTemplateByType[exportTypesEnum.SERVER_PRO] = [\n    rolesAndUsersToIncludeTemplate,\n    assetsToIncludeExtendedVersionTemplate,\n    eventsToIncludeTemplate\n].join('');\nexportTemplateByType[exportTypesEnum.SERVER_CE] = [\n    rolesAndUsersToIncludeTemplate,\n    assetsToIncludeExtendedVersionTemplate,\n    eventsToIncludeTemplate\n].join('');\nexportTemplateByType[exportTypesEnum.REPOSITORY] = [\n    repositoryExportTemplate\n].join('');\nexport default function (options) {\n    options = options || {};    // eslint-disable-next-line xss/htmlOutputRule\n    // eslint-disable-next-line xss/htmlOutputRule\n    return exportDataFileTemplate + secretKeyTemplate + $(exportOptionsContainerTemplate).append(exportTemplateByType[options.type])[0].outerHTML;\n}","export default \"<div class=\\\"section resources\\\">\\n\\n    <js-templateNonce></js-templateNonce>\\n    <p>{{- i18n[\\\"export.dialog.options\\\"] }}</p>\\n    <div class=\\\"group\\\">\\n        <div class=\\\"control checkBox\\\">\\n            <label for=\\\"includeScheduledReportJobsId\\\" class=\\\"wrap\\\" title=\\\"\\\">{{- i18n[\\\"export.report.jobs\\\"] }}</label>\\n            <input id=\\\"includeScheduledReportJobsId\\\" class=\\\"includeScheduledReportJobs\\\" name=\\\"includeScheduledReportJobs\\\" aria-labelledby=\\\"includeScheduledReportJobsLabel\\\" type=\\\"checkbox\\\" data-bind=\\\"checked:includeScheduledReportJobs\\\">\\n        </div>\\n        <div class=\\\"control checkBox\\\">\\n            <label for=\\\"includeRepositoryPermissionsId\\\" class=\\\"wrap\\\" title=\\\"\\\">{{- i18n[\\\"export.include.permissions\\\"] }}</label>\\n            <input id=\\\"includeRepositoryPermissionsId\\\" class=\\\"includeRepositoryPermissions\\\" name=\\\"includeRepositoryPermissions\\\" aria-labelledby=\\\"includeRepositoryPermissionsLabel\\\" type=\\\"checkbox\\\" data-bind=\\\"checked:includeRepositoryPermissions\\\">\\n        </div>\\n        <div class=\\\"control checkBox\\\">\\n            <label for=\\\"includeDependenciesCheckbox\\\" class=\\\"wrap\\\" title=\\\"\\\">{{- i18n[\\\"export.include.dependencies\\\"] }} </label>\\n            <input id=\\\"includeDependenciesCheckbox\\\" class=\\\"includeDependencies\\\" name=\\\"includeDependencies\\\" type=\\\"checkbox\\\" data-bind=\\\"checked:includeDependencies\\\">\\n        </div>\\n        {{ if (isSubOrgLevel) { }}\\n        <div class=\\\"control checkBox\\\">\\n            <label for=\\\"includeFullResourcePathId\\\" class=\\\"wrap\\\" title=\\\"\\\">{{- i18n[\\\"export.include.full.repo.path\\\"] }}</label>\\n            <input id=\\\"includeFullResourcePathId\\\" class=\\\"includeFullResourcePath\\\" name=\\\"includeFullResourcePath\\\" aria-labelledby=\\\"includeFullResourcePathLabel\\\" type=\\\"checkbox\\\" data-bind=\\\"checked:includeFullResourcePath\\\">\\n        </div>\\n        {{ } }}\\n    </div>\\n</div>\";","/*\n * Copyright (C) 2005 - 2022 TIBCO Software Inc. All rights reserved.\n * http://www.jaspersoft.com.\n *\n * Unless you have purchased a commercial license agreement from Jaspersoft,\n * the following license terms apply:\n *\n * This program is free software: you can redistribute it and/or modify\n * it under the terms of the GNU Affero General Public License as\n * published by the Free Software Foundation, either version 3 of the\n * License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the\n * GNU Affero General Public License for more details.\n *\n * You should have received a copy of the GNU Affero General Public License\n * along with this program. If not, see <http://www.gnu.org/licenses/>.\n */\n\n\n/**\n * @author: Zakhar Tomchenko\n * @version:\n */\n\nimport $ from 'jquery';\nimport _ from 'underscore';\nimport Backbone from 'backbone';\nimport ExportModel from '../model/ExportModel';\nimport ExportStateModel from '../model/ExportStateModel';\nimport AuthorityModel from '../model/AuthorityPickerModel';\nimport AuthorityPickerView from './AuthorityPickerView';\nimport LoadingDialog from './LoadingDialog';\nimport ExportDependentResourcesDialogView from './ExportDependentResourcesDialogView';\nimport Notification from 'js-sdk/src/common/component/notification/Notification';\nimport epoxyViewMixin from 'js-sdk/src/common/view/mixin/epoxyViewMixin';\nimport exportTemplateFactory from '../factory/exportTemplateFactory';\nimport exportTypesEnum from '../enum/exportTypesEnum';\nimport i18n from '../../../i18n/ImportExportBundle.properties';\nimport i18n2 from 'js-sdk/src/i18n/CommonBundle.properties';\n\nimport awsSettings from '../../../settings/awsSettings.settings';\nimport secureKeyTypeEnum from \"../../import/enum/secureKeyTypeEnum\";\nimport CustomKeyModel from '../../model/CustomKeyModel';\n\nvar ExportView = Backbone.View.extend({\n    className: \"export-view\",\n\n    events: {\n        \"change .usersWithSelectedRoles\": \"includeRolesByUsers\",\n        \"change .rolesWithSelectedUsers\": \"includeUsersWithRoles\",\n        \"change .selectedUsersRoles\": \"includeSelectedRolesUsersOnly\",\n        \"change input.jr-jDefaultKey, input.jr-jKeyValue, input.jr-jKeyFile , input.jr-juniversalKeyValue,  input.jr-jCustomKey\": \"_onKeyTypeChange\",\n        \"click .section .checkBox label\": \"_clickOnCheckbox\",\n        \"click button.jr-jRepositoryBrowserButton\": \"_onRepositoryBrowserButtonClick\",\n        \"change .control.select.inline\": \"_onCustomKeyInput\"\n    },\n\n    computeds: {\n        includeAccessEventsChecked: function() {\n            return this.model.get(\"everything\") ? this.model.get(\"includeAccessEvents\") : false;\n        },\n\n        enableAttributesValues: {\n            deps: [\"everything\", \"includeAttributes\"],\n            get: function(everything, includeAttributes) {\n                return !everything && includeAttributes;\n            }\n        },\n\n        enableReportJobs: {\n            deps: [\"everything\", \"includeReports\"],\n            get: function(everything, includeReports) {\n                return !everything && includeReports;\n            }\n        },\n\n        someResourceIsChecked: {\n            deps: [\"everything\", \"includeReports\", \"includeAdHocViews\", \"includeDashboards\", \"includeDomains\", \"includeDataSources\", \"includeOtherResourceFiles\"],\n            get: function(everything, includeReports, includeAdHocViews, includeDashboards, includeDomains, includeDataSources, includeOtherResourceFiles) {\n                return !everything && (includeReports || includeAdHocViews || includeDashboards || includeDomains || includeDataSources || includeOtherResourceFiles);\n            }\n        },\n\n        isKeyDefaultValue: {\n            deps: ['keyType'],\n            get: function(keyType) {\n                return keyType === secureKeyTypeEnum.DEFAULTKEY;\n            }\n        },\n\n        isKeyUniversalValue: {\n            deps: ['keyType'],\n            get: function(keyType) {\n                return keyType === secureKeyTypeEnum.UNIVERSALKEY;\n            }\n        },\n\n        isKeyUseCustom: {\n            deps: ['keyType'],\n            get: function(keyType) {\n                return keyType === secureKeyTypeEnum.CUSTOMKEY;\n            }\n        }\n    },\n\n    initialize: function(options = {}) {\n        _.bindAll(this, \"render\", \"doExport\", \"handleExportPhase\", \"filterAuthoritiesBySubOrgs\",\n            \"bindWithRoles\", \"bindWithUsers\", \"changeEnabledState\", \"includeRolesByUsers\", \"includeUsersWithRoles\",\n            \"includeSelectedRolesUsersOnly\", \"sendParameters\", \"onRolesToUsersChange\", \"onUsersToRolesChange\",\n            \"_isServerLevel\", \"_includeUsersOrRoles\", \"_showNotification\", \"_getBrokenDependencies\",\n            \"_clickOnCheckbox\", \"_onModelChange\", \"_resetModel\");\n\n        this.model || (this.model = new ExportModel());\n        this.stateModel = new ExportStateModel();\n        this.customKeyStateModel = new CustomKeyModel();\n\n        this.epoxifyView();\n\n        this.loadingDialog = new LoadingDialog({\n            content: i18n2[\"dialog.overlay.loading\"]\n        });\n\n        this.notification = new Notification();\n\n        this.dependentResourcesDialogView = new ExportDependentResourcesDialogView();\n\n        this.listenTo(this.model, \"change\", this._onModelChange);\n        this.listenTo(this.stateModel, \"change:phase\", this.handleExportPhase, this);\n\n        this.listenTo(this.model, \"error:unauthorized\", window.location.reload);\n        this.listenTo(this.stateModel, \"error:unauthorized\", window.location.reload);\n\n\n        var notFoundNotification = {\n                delay: false,\n                message: i18n[\"export.error.cancelled\"]\n            },\n            unexpectedErrorNotification = {\n                delay: false,\n                message: i18n[\"export.error.unexpected\"]\n            };\n\n        this.listenTo(this.model, \"error:notFound\", _.bind(this.notification.show, this.notification, notFoundNotification));\n        this.listenTo(this.stateModel, \"error:notFound\", _.bind(this.notification.show, this.notification, notFoundNotification));\n\n        this.listenTo(this.model, \"error:internalServerError\", _.bind(this.notification.show, this.notification, unexpectedErrorNotification));\n        this.listenTo(this.stateModel, \"error:internalServerError\", _.bind(this.notification.show, this.notification, unexpectedErrorNotification));\n\n        this.listenTo(this.model, \"error\", _.bind(this.loadingDialog.close, this.loadingDialog));\n        this.listenTo(this.stateModel, \"error\", _.bind(this.loadingDialog.close, this.loadingDialog));\n\n        this.listenTo(this.dependentResourcesDialogView, \"button:export\", _.compose(\n            _.bind(this.dependentResourcesDialogView.close, this.dependentResourcesDialogView),\n            _.bind(function() {\n                downloadFile.call(this);\n                this._showNotification({message: i18n[\"export.finished\"], type: \"success\"});\n            }, this)));\n        this.listenTo(this.dependentResourcesDialogView, \"button:cancel\", _.bind(cancelExportTask, this, ExportStateModel.STATE.CANCELLED));\n    },\n    _onRepositoryBrowserButtonClick: function() {\n        this.keyFileDialog.open();\n    },\n    _clearSecureKeyErrors: function() {\n        this.model.set({\n            'invalidKeyError': '',\n            'invalidSecureFileContentError': ''\n        });\n    },\n\n    _onKeyTypeChange: function(event) {\n        let radioValue = event.target.value;\n\n        this.model.set('keyType', radioValue);\n\n        this._clearSecureKeyErrors();\n    },\n\n    _onCustomKeyInput: function(evt){\n        const index = evt.target.selectedIndex;\n        const element = $(\".control.select.inline\").find('option')[index];\n        this.model.set('keyAlias', element.value, {silent: true});\n    },\n\n\n    render: function(options) {\n        options = options || {};\n\n        this.type = options.type;\n\n        var isServerType = this._isServerLevel(this.type),\n            isServerOrRootType = isServerType || this.type === exportTypesEnum.ROOT_TENANT;\n\n        isServerOrRootType\n            ? this.$el.addClass(\"with-events\")\n            : this.$el.removeClass(\"with-events\");\n\n        this.stopListening(this.model, \"change:includeSubOrganizations\", this.filterAuthoritiesBySubOrgs);\n\n        this._resetModel(options);\n\n        let encryptionHint = i18n['export.dialog.file.properties.encryption.hint'];\n\n        if (awsSettings.productTypeIsJrsAmi || awsSettings.productTypeIsMpAmi) {\n            encryptionHint = i18n['export.dialog.file.properties.encryption.hint.aws'];\n        }\n        var self = this;\n        this.customKeyStateModel.getCustomKeys().done(function(response) {\n            if(response && response.responseJSON && response.responseJSON.error){\n                customKeyFailure(self, options, encryptionHint, isServerOrRootType, isServerType, response);\n            } else {\n                response.length && self.model.set('keyAlias',response[0].alias);\n                renderSecTemplate(self, options, encryptionHint, isServerOrRootType, isServerType, response);\n                for (var i = 0; i < response.length; ++i) {\n                    var element = $(\"<option />\").attr(\"value\", response[i].alias);\n                    element.text(response[i].label ? response[i].label : response[i].alias);\n                    self.$el.find('#importCustomKey').append(element);\n                }\n            }\n        }).fail(function (response) {\n            customKeyFailure(self, options, encryptionHint, isServerOrRootType, isServerType, response);\n        });\n\n        this.$el.attr({role: 'form'});\n\n        return this;\n    },\n\n    doExport: function() {\n        var self = this;\n\n        if (this.model.isValid(true)) {\n            this.loadingDialog.open();\n            this.model.save().done(function(status) {\n                self.stateModel.unset(\"warnings\", {silent: true});\n                self.stateModel.set(status);\n                self.model.set(\"id\", status.id);\n            });\n        }\n    },\n\n    handleExportPhase: function() {\n        var phase = this.stateModel.get(\"phase\"),\n            brokenDependencies = this._getBrokenDependencies(),\n            notificationOptions;\n\n        if (phase == ExportStateModel.STATE.READY) {\n            this.loadingDialog.close();\n            if (!_.isEmpty(brokenDependencies)) {\n                this.dependentResourcesDialogView.open({items: brokenDependencies});\n            } else {\n                downloadFile.call(this);\n                notificationOptions = {\n                    message: i18n[\"export.finished\"],\n                    type: \"success\"\n                };\n            }\n        }\n\n        if (phase == ExportStateModel.STATE.FAILED) {\n            notificationOptions = {\n                message: i18n[\"export.error.unexpected\"]\n            };\n        }\n\n        if (phase == ExportStateModel.STATE.CANCELLED) {\n            notificationOptions = {\n                message: i18n[\"export.error.cancelled\"]\n            };\n        }\n\n        notificationOptions && this._showNotification(notificationOptions);\n    },\n\n    filterAuthoritiesBySubOrgs: function(){\n        var contextMixin = {excludeSubOrgs: !this.model.get(\"includeSubOrganizations\")};\n\n        this.rolesList.model.setContext(contextMixin);\n        this.usersList.model.setContext(contextMixin);\n    },\n\n    bindWithRoles: function(selection) {\n        this.model.set({roles: selection});\n        this.onUsersToRolesChange();\n        if (selection.length) {\n            this.rolesToUsers.setContext({roles: selection});\n        } else {\n            this.rolesToUsers.set({items: []});\n        }\n    },\n\n    bindWithUsers: function(selection) {\n        this.model.set({users: selection});\n        this.onRolesToUsersChange();\n        if (selection.length) {\n            this.usersToRoles.setContext({users: selection});\n        } else {\n            this.usersToRoles.set({items: []});\n        }\n    },\n\n    changeEnabledState: function() {\n        var value = this.model.get(\"everything\");\n\n        this.rolesList.setDisabled(value || this.model.get(\"rolesForUser\"));\n        this.usersList.setDisabled(value || this.model.get(\"userForRoles\"));\n        if (value) {\n            this.rolesList.selectNone();\n            this.usersList.selectNone();\n        }\n    },\n\n    includeRolesByUsers: function(evt) {\n        var val = $(evt.target).is(\":checked\");\n        this.model.set({rolesForUser: !val, userForRoles: val});\n        this.onRolesToUsersChange();\n\n        this._includeUsersOrRoles(!val, val);\n    },\n\n    includeUsersWithRoles: function(evt) {\n        var val = $(evt.target).is(\":checked\");\n        this.model.set({rolesForUser: val, userForRoles: !val});\n        this.onUsersToRolesChange();\n\n        this._includeUsersOrRoles(val, !val);\n    },\n\n    includeSelectedRolesUsersOnly: function(evt) {\n        if ($(evt.target).is(\":checked\")) {\n            this.model.set({userForRoles: false, rolesForUser: false});\n            this.onRolesToUsersChange();\n            this.onUsersToRolesChange();\n\n            this._includeUsersOrRoles(false, false);\n        }\n    },\n    sendParameters: function(evt) {\n        this.model.isValid(true) && this.model.save();\n    },\n\n    onRolesToUsersChange: function() {\n        if (this.model.get(\"userForRoles\")) {\n            this.usersList.highlightSet(_.map(this.rolesToUsers.get(\"items\"), function(item) {\n                return item.username + (item.tenantId ? \"|\" + item.tenantId : \"\")\n            }));\n            this.rolesList.highlightSet([]);\n        } else {\n            this.usersList.highlightSet([]);\n        }\n    },\n\n    onUsersToRolesChange: function() {\n        if (this.model.get(\"rolesForUser\")) {\n            this.rolesList.highlightSet(_.map(this.usersToRoles.get(\"items\"), function(item) {\n                return item.name + (item.tenantId ? \"|\" + item.tenantId : \"\")\n            }));\n            this.usersList.highlightSet([]);\n        } else {\n            this.rolesList.highlightSet([]);\n        }\n    },\n\n    _isServerLevel: function(type) {\n        return type === exportTypesEnum.SERVER_CE || type === exportTypesEnum.SERVER_PRO;\n    },\n\n    _includeUsersOrRoles: function(rolesForUser, userForRoles) {\n        this.rolesList.setDisabled(rolesForUser);\n        this.usersList.setDisabled(userForRoles);\n        this.rolesList.selectNone();\n        this.usersList.selectNone();\n    },\n\n    _showNotification: function(options) {\n        options = _.defaults(options, {type: \"warning\"});\n\n        this.loadingDialog.isVisible() && this.loadingDialog.close();\n        this.notification.show({\n            delay: false,\n            message: options.message,\n            type: options.type\n        });\n    },\n\n    _getBrokenDependencies: function() {\n        var warnings = this.stateModel.get(\"warnings\"),\n            paths = [];\n\n        _.each(warnings, function(value) {\n            if (value.code === \"export.broken.dependency\") {\n                paths.push(value.parameters);\n            }\n        });\n\n        return _.flatten(_.sortBy(paths, function (path) { return path; }));\n    },\n\n    _clickOnCheckbox: function(evt) {\n        var checkbox = $(evt.target).next();\n        if (!checkbox[0].disabled) {\n            this.model.set(checkbox[0].name, !checkbox[0].checked);\n        }\n    },\n\n    _onModelChange: function() {\n        this.model.isValid(true);\n    },\n\n    _resetModel: function(options) {\n        var modelOptions = {\n            organization: this.type == exportTypesEnum.REPOSITORY ? null : options.tenantId\n        };\n\n        if (this.type === exportTypesEnum.ROOT_TENANT || this.type === exportTypesEnum.TENANT) {\n            var fileName = this.type === exportTypesEnum.ROOT_TENANT ? \"root_export.zip\" : options.tenantId + \"_export.zip\";\n\n            _.extend(modelOptions, {fileName: fileName});\n        }\n\n        this.model.reset(modelOptions, this.type);\n    }\n});\n\n_.extend(ExportView.prototype, epoxyViewMixin);\n\nfunction customKeyFailure(self, options, encryptionHint, isServerOrRootType, isServerType, response) {\n    renderSecTemplate(self, options, encryptionHint, isServerOrRootType, isServerType, []);\n    self.notification.show({\n        delay: false,\n        message: response && response.responseJSON && response.responseJSON.message\n    });\n    self.trigger('error', self, response);\n}\n\nfunction initializeAuthorityPickers(options){\n    this.rolesList = new AuthorityPickerView({\n        model: AuthorityModel.instance(\"rest_v2/{{if (tenantId) { }}organizations/{{-tenantId}}/{{ } }}roles?q={{-searchString}}{{ if (excludeSubOrgs) { }}&includeSubOrgs=false{{ } }}\", {tenantId: options.tenantId}),\n        customClass: \"selectedRoles\",\n        title: i18n[\"export.dialog.roles.users.roles.label\"],\n        selectLabel: i18n[\"export.dialog.roles.users.select.all.roles.label\"]\n    });\n\n    this.rolesList.on(\"change:selection\", this.bindWithRoles);\n    this.rolesList.render();\n\n    this.usersList = new AuthorityPickerView({\n        model: AuthorityModel.instance(\"rest_v2/{{if (tenantId) { }}organizations/{{-tenantId}}/{{ } }}users?q={{-searchString}}{{ if (excludeSubOrgs) { }}&includeSubOrgs=false{{ } }}\", {tenantId: options.tenantId}),\n        customClass: \"select selectedUsers\",\n        title: i18n[\"export.dialog.roles.users.users.label\"],\n        selectLabel: i18n[\"export.dialog.roles.users.select.all.users.label\"]\n    });\n\n    this.usersList.on(\"change:selection\", this.bindWithUsers);\n    this.usersList.render();\n\n    this.rolesToUsers = AuthorityModel.instance(\"rest_v2/users?hasAllRequiredRoles=false{{ if (roles) for (var i = 0; i < roles.length; i++) { }}&requiredRole={{-roles[i]}}{{ } }}\");\n    this.rolesToUsers.on(\"change\", this.onRolesToUsersChange);\n\n    this.usersToRoles = AuthorityModel.instance(\"rest_v2/roles?hasAllUsers=false{{ if (users) for (var i = 0; i < users.length; i++) { }}&user={{-users[i]}}{{ } }}\");\n    this.usersToRoles.on(\"change\", this.onUsersToRolesChange);\n\n    this.changeEnabledState();\n    this.listenTo(this.model, \"change:everything\", this.changeEnabledState);\n\n    this.$el.find(\".selectRolesUsers\").append(this.rolesList.el).append(this.usersList.el);\n\n    this.listenTo(this.model, \"change:includeSubOrganizations\", this.filterAuthoritiesBySubOrgs);\n}\nfunction renderSecTemplate(self, options, encryptionHint, isServerOrRootType, isServerType, response) {\n    self.template = _.template(exportTemplateFactory(options))({\n        everything: false,\n        i18n: i18n,\n        i18n2: i18n2,\n        encryptionHint: encryptionHint,\n        isServerOrRootType: isServerOrRootType,\n        isServerLevel: isServerType,\n        isServerCe: self.type === exportTypesEnum.SERVER_CE,\n        isRepository: self.type === exportTypesEnum.REPOSITORY,\n        isSubOrgLevel: options.isSubOrgLevel,\n        model: _.extend(self.model.toJSON(), {\n            secureKeyTypes: secureKeyTypeEnum\n        }),\n        showCustomKey: response.length === 0 ? false : true,\n        showKeyValue: false,\n        exportMode: true\n    });\n    self.$el.html(self.template);\n    if (self.$(\".selectRolesUsers\").length) {\n        initializeAuthorityPickers.call(self, options);\n    }\n    self.applyEpoxyBindings();\n\n    if (self.$(\"input\").length) {\n        self.$(\"input\")[0].focus();\n    }\n}\n\nfunction downloadFile() {\n    var iframe = document.createElement(\"iframe\");\n    iframe.src = this.model.url() + \"/\" + this.stateModel.id + \"/\" + this.model.get(\"fileName\");\n    iframe.style.display = \"none\";\n    $(\"body\").append(iframe);\n}\n\nfunction cancelExportTask(phase) {\n    this.model.cancel();\n    this.stateModel.set(\"phase\", phase);\n}\n\nexport default ExportView;","export default \"<div class=\\\"section file-name\\\">\\n\\n    <js-templateNonce></js-templateNonce>\\n    {{ if (!isRepository) { }} <p class=\\\"title\\\">{{- i18n[\\\"export.dialog.file.properties\\\"] }}</p> {{ } }}\\n    <div class=\\\"group\\\">\\n        <div class=\\\"control input\\\" data-bind=\\\"validationErrorClass:fileName\\\" data-model-attr=\\\"fileName\\\">\\n            <span class=\\\"wrap\\\">{{- i18n[\\\"export.dialog.file.properties.data.file.name\\\"]}}</span>\\n            <input type=\\\"text\\\" class=\\\"fileName\\\"  data-bind=\\\"value:fileName, events:['keyup']\\\" aria-label=\\\"{{- i18n['export.dialog.file.properties.data.file.name']}}\\\"/>\\n            <p class=\\\"message hint jr-jEncryptionHint\\\">{{- encryptionHint }}</p>\\n            <span class=\\\"message warning fileNameMessage\\\" data-bind=\\\"validationErrorText:fileName\\\" data-model-attr=\\\"fileName\\\"></span>\\n        </div>\\n\\n        {{ if (0) { }}\\n        <div class=\\\"control checkBox encryptFileWrapper\\\">\\n            <label class=\\\"wrap\\\" title=\\\"\\\">{{- i18n[\\\"export.dialog.file.properties.encrypt.file\\\"] }}</label>\\n            <input class=\\\"encryptFile\\\" name=\\\"encryptFile\\\" type=\\\"checkbox\\\" data-bind=\\\"checked:encryptFile\\\">\\n        </div>\\n        {{ } }}\\n    </div>\\n</div>\\n\";","export default \"<div class=\\\"export-options\\\">\\n\\n    <js-templateNonce></js-templateNonce>\\n    {{ if (!isRepository) { }}\\n    <p class=\\\"title export-options-title\\\">{{- i18n[\\\"export.dialog.options\\\"] }}</p>\\n    <div class=\\\"section everything\\\">\\n        <div class=\\\"control checkBox everything\\\">\\n            <label class=\\\"wrap\\\" title=\\\"\\\">{{- i18n[\\\"export.dialog.everything\\\"] }}</label>\\n            <input class=\\\"everything\\\" name=\\\"everything\\\" type=\\\"checkbox\\\" data-bind=\\\"checked:everything\\\">\\n        </div>\\n    </div>\\n    {{ } }}\\n</div>\";","/*\n * Copyright (C) 2005 - 2022 TIBCO Software Inc. All rights reserved.\n * http://www.jaspersoft.com.\n *\n * Unless you have purchased a commercial license agreement from Jaspersoft,\n * the following license terms apply:\n *\n * This program is free software: you can redistribute it and/or modify\n * it under the terms of the GNU Affero General Public License as\n * published by the Free Software Foundation, either version 3 of the\n * License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the\n * GNU Affero General Public License for more details.\n *\n * You should have received a copy of the GNU Affero General Public License\n * along with this program. If not, see <http://www.gnu.org/licenses/>.\n */\n\nimport _ from 'underscore';\nimport classUtil from './classUtil';\nvar ARGS_TYPE = {\n    INDEX: 'index',\n    KEY_VALUE: 'keyValue'\n};\nvar DEFAILT_KEY_VALUE_SEPARATOR = ', ';\nvar i18nMessage = classUtil.extend({\n    constructor: function (code) {\n        this.code = code;\n        this.args = Array.prototype.slice.call(arguments, 1);\n    },\n    bundle: {}\n});\ni18nMessage.prototype.toString = function () {\n    var text = this.bundle[this.code];\n    if (!text) {\n        return this.code;\n    }\n    var argsType = this._getArgsType(this.args);\n    if (argsType === ARGS_TYPE.INDEX) {\n        text = this._interpolateIndexArgs(this.args, text);\n    } else if (argsType === ARGS_TYPE.KEY_VALUE) {\n        text = this._interpolateObjectArgs(this.args, text);\n    }\n    return text;\n};\ni18nMessage.prototype._getArgsType = function (args) {\n    if (args && args.length) {\n        var firstArg = _.first(args);\n        return _.isObject(firstArg) ? ARGS_TYPE.KEY_VALUE : ARGS_TYPE.INDEX;\n    }\n};\ni18nMessage.prototype._interpolateObjectArgs = function (args, text) {\n    var separator = args[0].separator || DEFAILT_KEY_VALUE_SEPARATOR;\n    var formattedArgs = args.reduce(function (memo, argument) {\n        var key = argument.key, value = argument.value;\n        if (memo[key]) {\n            memo[key] = memo[key] + separator;\n        } else {\n            memo[key] = '';\n        }\n        memo[key] = memo[key] + value;\n        return memo;\n    }, {});\n    text = _.keys(formattedArgs).reduce(function (memo, key) {\n        var value = formattedArgs[key], regexp = '\\\\{' + key + '\\\\}';\n        return memo.replace(new RegExp(regexp, 'g'), value);\n    }, text);\n    return text;\n};\ni18nMessage.prototype._interpolateIndexArgs = function (args, text) {\n    for (var i = 0, l = args.length; i < l; i++) {\n        var parameter = args[i], regexp = '\\\\{' + i + '\\\\}';\n        text = text.replace(new RegExp(regexp, 'g'), parameter);\n    }\n    return text;\n};\ni18nMessage.create = function (bundle) {\n    return function (code) {\n        var message = Object.create(i18nMessage.prototype);\n        message = _.extend(message, {\n            bundle: bundle,\n            code: code,\n            args: Array.prototype.slice.call(arguments, 1)\n        });\n        return message.toString(message);\n    };\n};\nexport default i18nMessage;"],"sourceRoot":""}