{"version":3,"sources":["webpack://jrs-ui/../bi-repository/src/bi/repository/enum/repositoryResourceTypes.js","webpack://jrs-ui/../bi-repository/src/bi/repository/enum/olapConnectionTypesEnum.js","webpack://jrs-ui/../bi-repository/src/bi/repository/dialog/processor/factory/processorsFactory.js","webpack://jrs-ui/../bi-repository/src/bi/repository/dialog/resourceChooser/template/repositoryFolderChooserDialogTooltipTemplate.htm","webpack://jrs-ui/../bi-repository/src/bi/repository/dialog/resourceChooser/template/repositoryFoldersTreeLevelTemplate.htm","webpack://jrs-ui/../bi-repository/src/bi/repository/factory/repositoryTreeFactory.js","webpack://jrs-ui/../bi-repository/src/bi/repository/util/extractRootLevelDataFromHtmlResponse.ts","webpack://jrs-ui/../bi-repository/src/bi/repository/util/resourcesTreeGetDataUriFnUtil.js","webpack://jrs-ui/./src/settings/settingsStore.js","webpack://jrs-ui/../js-sdk/src/common/component/dialog/AlertDialog.js","webpack://jrs-ui/../js-sdk/src/common/component/dialog/Dialog.js","webpack://jrs-ui/../js-sdk/src/common/component/tooltip/Tooltip.js","webpack://jrs-ui/../js-sdk/src/common/component/panel/trait/collapsiblePanelTrait.js","webpack://jrs-ui/../js-sdk/src/common/component/list/view/ScalableList.js","webpack://jrs-ui/../js-sdk/src/common/component/list/templates/viewPortChunksTemplate.htm","webpack://jrs-ui/../js-sdk/src/common/component/list/templates/itemsTemplate.htm","webpack://jrs-ui/../js-sdk/src/common/component/list/view/ListWithSelection.js","webpack://jrs-ui/../js-sdk/src/components/scalableList/model/trait/addToSelectionModelTrait.js","webpack://jrs-ui/../js-sdk/src/common/component/tree/TreeLevel.js","webpack://jrs-ui/../js-sdk/src/common/component/tree/template/treeLevelListTemplate.htm","webpack://jrs-ui/../js-sdk/src/common/component/tree/Tree.js","webpack://jrs-ui/../js-sdk/src/common/component/tree/template/treeLevelTemplate.htm","webpack://jrs-ui/../js-sdk/src/common/component/tree/TreeDataLayer.js","webpack://jrs-ui/../js-sdk/src/common/component/tree/plugin/TooltipPlugin.js","webpack://jrs-ui/../js-sdk/src/common/component/tree/plugin/TreePlugin.js","webpack://jrs-ui/../js-sdk/src/common/extension/backboneValidationExtension.js","webpack://jrs-ui/../js-sdk/src/common/component/dialog/template/alertDialogTemplate.htm","webpack://jrs-ui/../js-sdk/src/common/component/tooltip/template/tooltipTemplate.htm","webpack://jrs-ui/./src/settings/treeComponent.settings.js"],"names":["RESOURCE_LOOKUP","DASHBOARD","LEGACY_DASHBOARD","REPORT_UNIT","TOPIC","ADHOC_DATA_VIEW","FILE","BUNDLE_FILE","SECURITY_FILE","FOLDER","SECURE_FILE","PROP","ACCESS_GRANT_SCHEMA","DATA_TYPE","JDBC_DATA_SOURCE","AWS_DATA_SOURCE","AZURE_SQL_DATA_SOURCE","JNDI_DATA_SOURCE","VIRTUAL_DATA_SOURCE","CUSTOM_DATA_SOURCE","BEAN_DATA_SOURCE","XMLA_CONNECTION","LIST_OF_VALUES","REPORT_OPTIONS","QUERY","OLAP_UNIT","DOMAIN_TOPIC","DOMAIN","SEMANTIC_LAYER_DATA_SOURCE","SECURE_MONDRIAN_CONNECTION","MONDRIAN_XMLA_DEFINITION","MONDRIAN_CONNECTION","INPUT_CONTROL","ORGANIZATION","OLAP_CUBE","repositoryResourceTypes","processors","folderTreeProcessor","processItem","item","_readonly","value","permissionMask","treeNodeProcessor","_node","_","olapConnectionTypesEnum","resourceType","i18nItemProcessor","i18n","commonMessagesBundle","filterPublicFolderProcessor","uri","defaultSettings","filterEmptyFoldersProcessor","_links","content","cssClassItemProcessor","cssClass","fakeUriProcessor","match","replace","processorName","repositoryFoldersTreeFactory","options","types","listView","olapDataLayer","TreeDataLayer","requestType","dataUriTemplate","jrsConfigs","processorsFactory","levelDataId","getDataArray","data","getTreeConstructor","instance","itemsTemplate","treeItemsTemplate","repositoryFoldersTreeLevelTemplate","listItemHeight","selection","allowed","multiple","rootless","collapsed","lazyLoad","getDataUri","resourcesTreeGetDataUriFnUtil","getFolderUri","contextPath","recursive","type","containerType","forceTotalCount","forceFullPage","cache","searchKey","pageSize","customDataLayers","getDataLayer","customizedGetDataLayerFunc","getDataSize","status","xhr","getResponseHeader","getTreeListInstance","bufferSize","treeBufferSize","additionalCssClasses","collapserSelector","openClass","closedClass","getCustomRootDataLayer","this","resource","getTreeInstance","tooltipOptions","contentTemplate","constr","Tree","TooltipTreePlugin","create","rootLevelProcessors","processor","push","getTreeRootLevelProcessors","extractRootLevelDataFromHtmlResponse","publicFolder","children","fakeRoot","id","label","computePermissionMask","extra","accept","dataType","level","getLevel","contentType","JSON","stringify","defaultDataLayer","mask","isWritable","isRemovable","isAdministrable","settings","html","htmlTrimmed","trim","length","jsonAsText","substring","parse","params","folderUri","encodeURIComponent","reduce","memo","exclude","Dialog","alertDialogTemplate","constructor","modal","message","title","titleContainerId","bodyContainerId","buttons","action","primary","initialize","arguments","on","close","setMessage","xssUtil","whiteList","rendered","renderContent","$contentContainer","Panel","defaultTemplate","dialogTemplate","events","traits","resizable","additionalBodyCssClasses","returnFocusTo","resizablePanelTrait","dialogOptions","resetSizeOnOpen","OptionContainer","el","$","contextName","optionTemplate","dialogButtonTemplate","listenTo","button","join","buttonView","buttonModel","trigger","get","render","getTemplateArguments","templateArguments","setElement","res","setTitle","text","$el","attr","setReturnFocus","element","hide","dimmer","Dimmer","zIndex","append","draggable","handle","addClasses","containment","open","coordinates","isVisible","css","height","width","find","highestIndex","show","_setMinSize","position","_position","top","left","_increaseZIndex","removeClass","lastFocusedElement","document","activeElement","firstFocusable","stdnav","focus","_onDialogResize","addCssClasses","classNames","addClass","toggleCollapsedState","enableButton","enable","disableButton","disable","is","minWidth","minHeight","setMinSizeAsSize","body","elHeight","elWidth","bodyHeight","bodyWidth","fitByHeight","fitByWidth","window","Math","max","_focus","_onKeyDown","e","key","keyCode","stopPropagation","_onKeyboardEvent","remove","resetHighestIndex","index","Backbone","template","tooltipTemplate","delay","offset","x","y","attribute","cssClasses","contentSelector","triggerEvents","attachTo","Error","_shown","$attachTo","tooltip","selector","_onMouseMove","_onMouseLeave","_render","model","dfd","_event","toJSON","empty","_showTooltip","resolve","_timer","setTimeout","_updatePosition","clearTimeout","detach","tooltipHeight","innerHeight","tooltipWidth","innerWidth","windowHeight","windowWidth","shiftY","shiftX","pageY","pageX","event","off","container","detachFrom","collapseControlPressed","evt","allowPropagation","onCollapseControlPressed","stopListeningToCollapser","$collapser","expandOnDblClickSelector","abstractPanelTrait","onConstructor","collapserClass","collapsiblePanelClass","allowEventPropagation","allowMouseDownEventPropagation","beforeSetElement","call","afterSetElement","prepend","onRemove","ListModel","ScalableListModel","listItemSelector","attributes","chunksTemplate","defaultChunkHeight","chunkHeight","scrollTimeout","manualScrollInterval","lazy","defaultItemHeight","initListeners","fetch","onModelChange","onFetchFailed","onScroll","scrollTimer","_fetchVisibleData","renderData","responseStatus","error","postProcessChunkModelItem","i","undefined","_renderItems","bufferStart","bufferEnd","firstChunkWithData","itemsPerChunk","ceil","lastChunkWithData","that","each","chunk","chunkModel","_getChunkModel","total","totalItems","itemHeight","chunkHtml","_renderViewChunks","force","chunks","_getViewChunksModel","$firstViewChunk","totalChunksToShow","lastChunkHeight","viewChunks","_calcViewPortConstants","viewPortConstantsInitialized","outerHeight","_calcViewPortHeight","floor","viewPortHeight","itemsPerView","_getItemsPerView","_renderData","firstItemForChunk","lastItemForChunk","min","items","Array","prototype","slice","visibleItems","_getVisibleItems","bottom","scrollPos","_getScrollPos","topVisibleItem","elOffset","viewChunkOffset","has","resize","componentHeight","_componentHeight","callback","keepPosition","scrollTop","reset","silent","once","apply","scrollTo","newTopVisibleItemPos","itemPos","BUTTONS","LEFT","RIGHT","ScalableList","ListWithSelectionModel","globalEvents","eventListenerPattern","markerClass","selectedClass","_initSelection","delegateEvents","onMousedown","onMousemove","onMousedblclick","onItemEvent","onGlobalMouseup","undelegateEvents","selectionAllowed","leftButtonSelection","right","clearSelection","selectValue","selectRange","deselectValue","onGlobalMousemove","selected","selectionContains","getDisabled","itemData","_getDomItemData","currentTarget","_singleSelect","selectionChanged","_triggerSelectionChanged","_triggerDblclicked","getItemByEvent","eventType","which","buttonType","mouseDownPos","_getMousePos","_multiSelect","_allowMouseMoveSelection","_stopAutoScroll","_mouseMoved","addRangeToSelection","self","leftMouseButtonPressed","rightMouseButtonPressed","mousePosY","clientY","scrollInterval","setInterval","_autoScroll","visibleRangeStart","start","visibleRangeEnd","end","$item","parseInt","newScrollPos","viewPortTop","shouldScroll","_selectRangeOnAutoScroll","oldScrollPos","clearInterval","shiftKey","ctrlKey","metaKey","toggleSelection","addValueToSelection","getValue","parent","modelItem","mousePos","abs","clientX","getSelection","setValue","modelOptions","select","selectAll","selectNone","invertSelection","setDisabled","disabled","removeValueFromSelection","addToSelection","afterFetchComplete","ListWithSelectionModelExtended","addToSelectionModelTrait","collapsiblePanelTrait","_isReady","owner","levelHeight","plugins","defaults","l","plugin","dataLayer","getData","_getDataProvider","list","List","cid","listRendered","listRenderError","itemsSelected","itemsDblClicked","_onOpen","obtainDataOptions","obtainData","request","dataProvider","DataProviderWithSearchCache","getDataOptions","limit","context","loadingClass","depth","itemsIterator","levelId","refresh","set","recalcConstraints","fetchVisibleData","resetSelection","hasItems","clearCache","clear","parentLevelId","predefinedData","splice","isReady","count","result","keys","isLevelToExclude","levelsToExclude","topLevel","handler","opts","ITEM_ACTIONS","_plugins","_type","_options","listTemplate","concat","rootLevel","TreeLevel","rootLevelHeight","addLevels","visitedLevels","treeInitialized","expand","treeRemoved","nodeId","collapse","_getNodeByLevelId","listContainingLevel","itemOfLevel","node","nodeElement","itsList","parentLevel","parentPath","split","nodeInfo","deselect","addItem","parentId","_getNodeItems","updateItem","_addItem","childItems","_updateItem","updatedChildItems","_selectTreeNode","pathToSelect","$scrollContainer","onceRootNodeIsReady","selectItemAfterFolderTreeIsOpened","folderToSelect","levelIdToSelect","getLevelId","$tree","$selectedItem","tmp","pathToOpen","substr","lastIndexOf","_openPath","done","path","pathFragmentToOpen","splitPath","levelIdToOpen","repositoryPath","nodesOnTop","topLevelCase","indexOf","use","extend","constructorPlugin","constructorOptions","levelName","ClassUtil","extractId","headers","Accept","url","dataSize","process","fail","reject","responseText","_process","invokeProcessors","changeDataStructure","processedData","processedItem","j","le","TreePlugin","Tooltip","listensToList","itemsRendered","dataLayerObtained","numberUtils","NumberUtils","originalValidate","Validation","attrs","valid","view","invalid","doesNotContainSymbols","forbiddenSymbols","RegExp","test","integerNumber","isNumberInt","some","fn","typeFn","hexColor","xRegExpPattern","customValue","startsWithLetter","containsOnlyWordCharacters","search","arrayMinLength","minLength"],"mappings":"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","file":"_chunks/chunk.3422.js","sourcesContent":["/*\n * Copyright (C) 2005 - 2022 TIBCO Software Inc. All rights reserved.\n * http://www.jaspersoft.com.\n *\n * Unless you have purchased a commercial license agreement from Jaspersoft,\n * the following license terms apply:\n *\n * This program is free software: you can redistribute it and/or modify\n * it under the terms of the GNU Affero General Public License as\n * published by the Free Software Foundation, either version 3 of the\n * License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the\n * GNU Affero General Public License for more details.\n *\n * You should have received a copy of the GNU Affero General Public License\n * along with this program. If not, see <http://www.gnu.org/licenses/>.\n */\n\nexport default {\n    RESOURCE_LOOKUP: 'resourceLookup',\n    DASHBOARD: 'dashboard',\n    LEGACY_DASHBOARD: 'legacyDashboard',\n    REPORT_UNIT: 'reportUnit',\n    TOPIC: 'topic',\n    ADHOC_DATA_VIEW: 'adhocDataView',\n    FILE: 'file',\n    BUNDLE_FILE: 'bundleFile',\n    SECURITY_FILE:'securityFile',\n    FOLDER: 'folder',\n    SECURE_FILE: 'secureFile',\n    PROP: 'prop',\n    ACCESS_GRANT_SCHEMA: 'accessGrantSchema',\n    DATA_TYPE: 'dataType',\n    JDBC_DATA_SOURCE: 'jdbcDataSource',\n    AWS_DATA_SOURCE: 'awsDataSource',\n    AZURE_SQL_DATA_SOURCE: 'azureSqlDataSource',\n    JNDI_DATA_SOURCE: 'jndiJdbcDataSource',\n    VIRTUAL_DATA_SOURCE: 'virtualDataSource',\n    CUSTOM_DATA_SOURCE: 'customDataSource',\n    BEAN_DATA_SOURCE: 'beanDataSource',\n    XMLA_CONNECTION: 'xmlaConnection',\n    LIST_OF_VALUES: 'listOfValues',\n    REPORT_OPTIONS: 'reportOptions',\n    QUERY: 'query',\n    OLAP_UNIT: 'olapUnit',\n    DOMAIN_TOPIC: 'domainTopic',\n    DOMAIN: 'domain',\n    SEMANTIC_LAYER_DATA_SOURCE: 'semanticLayerDataSource',\n    SECURE_MONDRIAN_CONNECTION: 'secureMondrianConnection',\n    MONDRIAN_XMLA_DEFINITION: 'mondrianXmlaDefinition',\n    MONDRIAN_CONNECTION: 'mondrianConnection',\n    INPUT_CONTROL: 'inputControl',\n    ORGANIZATION: 'organization',\n    OLAP_CUBE: 'olapCube'\n};","/*\n * Copyright (C) 2005 - 2022 TIBCO Software Inc. All rights reserved.\n * http://www.jaspersoft.com.\n *\n * Unless you have purchased a commercial license agreement from Jaspersoft,\n * the following license terms apply:\n *\n * This program is free software: you can redistribute it and/or modify\n * it under the terms of the GNU Affero General Public License as\n * published by the Free Software Foundation, either version 3 of the\n * License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the\n * GNU Affero General Public License for more details.\n *\n * You should have received a copy of the GNU Affero General Public License\n * along with this program. If not, see <http://www.gnu.org/licenses/>.\n */\n\nimport repositoryResourceTypes from '../enum/repositoryResourceTypes';\nexport default [\n    repositoryResourceTypes.MONDRIAN_CONNECTION,\n    repositoryResourceTypes.SECURE_MONDRIAN_CONNECTION,\n    repositoryResourceTypes.XMLA_CONNECTION\n];","/*\n * Copyright (C) 2005 - 2022 TIBCO Software Inc. All rights reserved.\n * http://www.jaspersoft.com.\n *\n * Unless you have purchased a commercial license agreement from Jaspersoft,\n * the following license terms apply:\n *\n * This program is free software: you can redistribute it and/or modify\n * it under the terms of the GNU Affero General Public License as\n * published by the Free Software Foundation, either version 3 of the\n * License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the\n * GNU Affero General Public License for more details.\n *\n * You should have received a copy of the GNU Affero General Public License\n * along with this program. If not, see <http://www.gnu.org/licenses/>.\n */\n\nimport _ from 'underscore';\nimport defaultSettings from 'js-sdk/src/jrs.configs';\nimport olapConnectionTypesEnum from '../../../enum/olapConnectionTypesEnum';\nimport repositoryResourceTypes from '../../../enum/repositoryResourceTypes';\nimport commonMessagesBundle from 'js-sdk/src/i18n/CommonBundle.properties';\nfunction cssClassItemProcessor(item) {\n    switch (item.value.resourceType) {\n    case repositoryResourceTypes.REPORT_UNIT:\n        item.cssClass = 'report';\n        break;\n    case repositoryResourceTypes.DOMAIN_TOPIC:\n        item.cssClass = 'domain topic';\n        break;\n    case repositoryResourceTypes.SEMANTIC_LAYER_DATA_SOURCE:\n        item.cssClass = 'domain';\n        break;\n    case repositoryResourceTypes.OLAP_CUBE:\n        item.cssClass = 'olap';\n        break;\n    default:\n        break;\n    }\n    return item;\n}\nvar processors = {\n    folderTreeProcessor: {\n        processItem: function (item) {\n            item._readonly = !(item.value.permissionMask == 1 || item.value.permissionMask & 4);\n            return item;\n        }\n    },\n    treeNodeProcessor: {\n        processItem: function (item) {\n            item._node = _.contains(_.union([repositoryResourceTypes.FOLDER], olapConnectionTypesEnum), item.value.resourceType);\n            return item;\n        }\n    },\n    i18nItemProcessor: {\n        processItem: function (item) {\n            item.i18n = commonMessagesBundle;\n            return item;\n        }\n    },\n    filterPublicFolderProcessor: {\n        processItem: function (item) {\n            if (item.value.uri !== '/root' + defaultSettings.publicFolderUri && item.value.uri !== '/root' + defaultSettings.tempFolderUri) {\n                return item;\n            }\n        }\n    },\n    filterEmptyFoldersProcessor: {\n        processItem: function (item) {\n            if (!(item.value.resourceType === 'folder' && item.value._links.content === '')) {\n                return item;\n            }\n        }\n    },\n    cssClassItemProcessor: { processItem: cssClassItemProcessor },\n    fakeUriProcessor: {\n        processItem: function (item) {\n            if (item.value.uri && item.value.uri.match(/^\\/root/)) {\n                item.value.uri = item.value.uri.replace('/root', '');\n            }\n            return item;\n        }\n    }\n};\nfunction processorsFactory(processorName) {\n    return processors[processorName];\n}\nexport default processorsFactory;","export default \"<p class=\\\"message label\\\">\\n\\n    <js-templateNonce></js-templateNonce>\\n    {{- model.i18n['tooltip.name'] }}</p>\\n<p class=\\\"message\\\">{{- model.value.label }}</p>\\n<p class=\\\"message label\\\">{{- model.i18n['tooltip.path'] }}</p>\\n<p class=\\\"message\\\">{{- model.value.uri }}</p>\";","export default \"<ul class=\\\"list collapsible\\\" style=\\\"top: {{- top}}px; position: relative;\\\">\\n\\n    <js-templateNonce></js-templateNonce>\\n\\t{{ _.each(items, function(item){ }}\\n\\t<li class=\\\"{{- item._node ? 'node closed' : 'leaf'}} {{- item.selected ? 'selected' : ''}} {{- item._readonly ? 'readonly' : ''}}\\\" data-index=\\\"{{- item.index }}\\\" tabindex=\\\"-1\\\">\\n\\t\\t<p class=\\\"wrap button draggable\\\" data-tooltip='true'><b class=\\\"icon\\\"></b> {{- item.value.label }} </p>\\n\\t\\t<div class=\\\"subcontainer\\\" ></div>\\n\\t</li>\\n\\t{{ }) }}\\n</ul>\\n\";","/*\n * Copyright (C) 2005 - 2022 TIBCO Software Inc. All rights reserved.\n * http://www.jaspersoft.com.\n *\n * Unless you have purchased a commercial license agreement from Jaspersoft,\n * the following license terms apply:\n *\n * This program is free software: you can redistribute it and/or modify\n * it under the terms of the GNU Affero General Public License as\n * published by the Free Software Foundation, either version 3 of the\n * License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the\n * GNU Affero General Public License for more details.\n *\n * You should have received a copy of the GNU Affero General Public License\n * along with this program. If not, see <http://www.gnu.org/licenses/>.\n */\n\nimport Tree from 'js-sdk/src/common/component/tree/Tree';\nimport $ from 'jquery';\nimport _ from 'underscore';\nimport i18n from 'js-sdk/src/i18n/CommonBundle.properties';\nimport TreeDataLayer from 'js-sdk/src/common/component/tree/TreeDataLayer';\nimport processorsFactory from '../dialog/processor/factory/processorsFactory';\nimport TooltipTreePlugin from 'js-sdk/src/common/component/tree/plugin/TooltipPlugin';\nimport repositoryResourceTypes from '../enum/repositoryResourceTypes';\nimport olapConnectionTypesEnum from '../enum/olapConnectionTypesEnum';\nimport resourcesTreeGetDataUriFnUtil from '../util/resourcesTreeGetDataUriFnUtil';\nimport extractRootLevelDataFromHtmlResponse from '../util/extractRootLevelDataFromHtmlResponse';\nimport tooltipTemplate from '../dialog/resourceChooser/template/repositoryFolderChooserDialogTooltipTemplate.htm';\nimport repositoryFoldersTreeLevelTemplate from '../dialog/resourceChooser/template/repositoryFoldersTreeLevelTemplate.htm';\nimport jrsConfigs from 'js-sdk/src/jrs.configs';\n\nvar LIST_ITEM_HEIGHT = 22;\nvar TREE_BUFFER_SIZE = 5000;\n\nvar repositoryFoldersTreeFactory = function (options) {\n    options = options || {};\n    if (!options.types) {\n        throw 'Resources types required';\n    }\n    if (!options.listView) {\n        return getTreeInstance(options);\n    } else {\n        return getTreeListInstance(options);\n    }\n};\nfunction getTreeConstructor(options) {\n    var tooltipOptions = _.extend({}, {\n        i18n: i18n,\n        contentTemplate: tooltipTemplate\n    }, options.tooltipOptions);\n    return options.constr || Tree.use(TooltipTreePlugin, tooltipOptions).create();\n}\nfunction getTreeInstance(options) {\n    options = options || {};\n    var processors = options.processors = _.map(options.processors, function (processorName) {\n        return processorsFactory(processorName);\n    });\n    var TreeConstructor = getTreeConstructor(options);\n    return TreeConstructor.instance({\n        listItemHeight: LIST_ITEM_HEIGHT,\n        bufferSize: options.treeBufferSize || TREE_BUFFER_SIZE,\n        additionalCssClasses: 'folders',\n        collapserSelector: options.collapserSelector,\n        openClass: options.openClass,\n        closedClass: options.closedClass,\n        levelDataId: 'uri',\n        itemsTemplate: options.treeItemsTemplate || repositoryFoldersTreeLevelTemplate,\n        collapsed: true,\n        lazyLoad: true,\n        rootless: true,\n        getDataUri: resourcesTreeGetDataUriFnUtil({\n            getFolderUri: getFolderUri,\n            contextPath: jrsConfigs.contextPath,\n            recursive: false,\n            type: options.types,\n            containerType: options.containerType,\n            forceTotalCount: true,\n            forceFullPage: true\n        }),\n        selection: {\n            allowed: true,\n            multiple: false\n        },\n        customDataLayers: {\n            //workaround for correct viewing of '/public' and '/' folder labels\n            '/': getCustomRootDataLayer(options)\n        },\n        processors: processors,\n        getDataArray: function (data) {\n            if (data && data[repositoryResourceTypes.RESOURCE_LOOKUP]) {\n                data = data[repositoryResourceTypes.RESOURCE_LOOKUP];\n                var levelDataId = this.levelDataId, first = _.first(data);\n                if (!first[levelDataId].match(/^\\/public/)) {\n                    data = _.map(data, function (resource) {\n                        resource.uri = '/root' + resource[levelDataId];\n                        return resource;\n                    });\n                }\n                return data;\n            }\n            return [];\n        },\n        getDataSize: function (data, status, xhr) {\n            return +xhr.getResponseHeader('Total-Count');\n        },\n        getDataLayer: customizedGetDataLayerFunc\n    });\n}\nfunction getTreeRootLevelProcessors(processors) {\n    var rootLevelProcessors = [];\n    var filterPublicFolderProcessor = processorsFactory('filterPublicFolderProcessor');\n    _.each(processors, function (processor) {\n        if (processor !== filterPublicFolderProcessor) {\n            rootLevelProcessors.push(processor);\n        }\n    });\n    return rootLevelProcessors;\n}\nfunction getCustomRootDataLayer(options) {\n    var processors = options.processors;\n    var rootLevelProcessors = getTreeRootLevelProcessors(processors);\n    var uri = '/flow.html?_flowId=searchFlow&method=getNode&provider=repositoryExplorerTreeFoldersProvider&uri=/&depth=1';\n    return _.extend(new TreeDataLayer({\n        dataUriTemplate: options.contextPath + uri,\n        processors: rootLevelProcessors,\n        getDataArray: function (data) {\n            data = extractRootLevelDataFromHtmlResponse(data);\n\n            var publicFolder = _.find(data.children, function (item) {\n                    return item.uri === '/public';\n                }), fakeRoot = [{\n                    id: '/root',\n                    label: data.label,\n                    uri: '/',\n                    resourceType: 'folder',\n                    permissionMask: computePermissionMask(data.extra),\n                    _links: { content: '@fakeContentLink' }\n                }];\n            if (publicFolder) {\n                fakeRoot.push({\n                    id: '/public',\n                    label: publicFolder.label,\n                    uri: '/public',\n                    resourceType: 'folder',\n                    permissionMask: computePermissionMask(publicFolder.extra),\n                    _links: { content: '@fakeContentLink' }\n                });\n            }\n            return fakeRoot;\n        }\n    }), {\n        accept: 'text/html',\n        dataType: 'text'\n    });\n}\nfunction getTreeListInstance(options) {\n    var olapDataLayer = getOlapDataLayer(), processors = options.processors;\n    var TreeConstructor = getTreeConstructor(options);\n    return TreeConstructor.instance({\n        itemsTemplate: options.treeItemsTemplate || repositoryFoldersTreeLevelTemplate,\n        listItemHeight: LIST_ITEM_HEIGHT,\n        selection: {\n            allowed: true,\n            multiple: false\n        },\n        rootless: true,\n        collapsed: true,\n        lazyLoad: true,\n        getDataUri: resourcesTreeGetDataUriFnUtil({\n            getFolderUri: getFolderUri,\n            contextPath: jrsConfigs.contextPath,\n            recursive: true,\n            type: options.types,\n            containerType: options.containerType,\n            forceTotalCount: true,\n            forceFullPage: true\n        }),\n        levelDataId: 'uri',\n        cache: {\n            searchKey: 'searchString',\n            pageSize: 100\n        },\n        processors: processors,\n        customDataLayers: { 'olapDataLayer': olapDataLayer },\n        getDataLayer: customizedGetDataLayerFunc,\n        getDataArray: function (data) {\n            return data && data[repositoryResourceTypes.RESOURCE_LOOKUP] ? data[repositoryResourceTypes.RESOURCE_LOOKUP] : [];\n        },\n        getDataSize: function (data, status, xhr) {\n            return +xhr.getResponseHeader('Total-Count');\n        }\n    });\n}\nfunction getOlapDataLayer() {\n    return new TreeDataLayer({\n        requestType: 'POST',\n        dataUriTemplate: jrsConfigs.contextPath + '/rest_v2/connections',\n        processors: [\n            processorsFactory('i18nItemProcessor'),\n            processorsFactory('cssClassItemProcessor')\n        ],\n        levelDataId: 'uri',\n        getDataArray: function (data) {\n            return data && data[repositoryResourceTypes.RESOURCE_LOOKUP] ? data[repositoryResourceTypes.RESOURCE_LOOKUP] : [];\n        }\n    });\n}\nfunction customizedGetDataLayerFunc(level) {\n    var resourceType, isOlapResource;\n    level = level.item ? level : this.getLevel(level.id);\n    if (level) {\n        resourceType = level.item.value.resourceType;\n        isOlapResource = _.contains(olapConnectionTypesEnum, resourceType);\n        if (!isOlapResource) {\n            return this.customDataLayers && this.customDataLayers[level.id] ? this.customDataLayers[level.id] : this.defaultDataLayer;\n        } else {\n            var olapDataLayer = _.clone(this.customDataLayers['olapDataLayer']);\n            _.extend(olapDataLayer, {\n                accept: 'application/repository.' + resourceType + '.metadata+json',\n                contentType: 'application/repository.' + resourceType + '+json',\n                data: JSON.stringify(resourceType)\n            });\n            return olapDataLayer;\n        }\n    }\n}\n\nfunction getFolderUri(id) {\n    if (id.match(/^\\/root/)) {\n        return id.replace(\"/root\", \"\");\n    } else {\n        return id;\n    }\n}\nfunction computePermissionMask(extra) {\n    var mask = 2;\n    extra.isWritable && (mask = mask | 4);\n    extra.isRemovable && (mask = mask | 16);\n    extra.isAdministrable && (mask = 1);\n    return mask;\n}\nrepositoryFoldersTreeFactory.settings = jrsConfigs;\nexport default repositoryFoldersTreeFactory;","/*\n * Copyright (C) 2005 - 2022 TIBCO Software Inc. All rights reserved.\n * http://www.jaspersoft.com.\n *\n * Unless you have purchased a commercial license agreement from Jaspersoft,\n * the following license terms apply:\n *\n * This program is free software: you can redistribute it and/or modify\n * it under the terms of the GNU Affero General Public License as\n * published by the Free Software Foundation, either version 3 of the\n * License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the\n * GNU Affero General Public License for more details.\n *\n * You should have received a copy of the GNU Affero General Public License\n * along with this program. If not, see <http://www.gnu.org/licenses/>.\n */\n\nexport default (html: string) => {\n    // The length for '<div id='treeNodeText'>' is 23:\n    const START_DIV_LENGTH = 23;\n    // The length for '</div>' is 6:\n    const END_DIV_LENGTH = 6;\n    // Length for start + end is 29:\n    const WRAPPING_DIV_LENGTH = 29;\n\n    const htmlTrimmed = html.trim();\n    if (htmlTrimmed.length <= WRAPPING_DIV_LENGTH) {\n        return {};\n    }\n    const jsonAsText = htmlTrimmed.substring(START_DIV_LENGTH, htmlTrimmed.length - END_DIV_LENGTH);\n    return JSON.parse(jsonAsText);\n};\n","/*\n * Copyright (C) 2005 - 2022 TIBCO Software Inc. All rights reserved.\n * http://www.jaspersoft.com.\n *\n * Unless you have purchased a commercial license agreement from Jaspersoft,\n * the following license terms apply:\n *\n * This program is free software: you can redistribute it and/or modify\n * it under the terms of the GNU Affero General Public License as\n * published by the Free Software Foundation, either version 3 of the\n * License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the\n * GNU Affero General Public License for more details.\n *\n * You should have received a copy of the GNU Affero General Public License\n * along with this program. If not, see <http://www.gnu.org/licenses/>.\n */\n\nimport _ from 'underscore';\n\nexport default function(options) {\n\n    return function(params) {\n        var uri = \"\";\n\n        uri += options.contextPath + \"/rest_v2/api/resources?\";\n\n        if (options.getFolderUri) {\n            var folderUri = options.getFolderUri(params.id);\n\n            if (folderUri) {\n                uri += \"folderUri=\" + encodeURIComponent(folderUri);\n            }\n        } else {\n            uri += \"folderUri=\" + encodeURIComponent(params.id);\n        }\n\n        if (options.recursive) {\n            uri += \"&recursive=true\";\n        } else {\n            uri += \"&recursive=false\";\n        }\n\n        if (options.type) {\n            uri += options.type.reduce(function(memo, type) {\n                memo += \"&type=\" + type;\n\n                return memo;\n            }, \"\");\n        }\n\n        if (options.containerType) {\n            uri += \"&containerType=\" + options.containerType;\n        }\n\n        if (options.exclude) {\n            uri += \"&excludeFolder=\" + options.exclude;\n        }\n\n        uri += \"&offset={{= offset }}&limit={{= limit }}\";\n\n        if (options.forceTotalCount) {\n            uri += \"&forceTotalCount=true\";\n        }\n\n        if (options.forceFullPage) {\n            uri += \"&forceFullPage=true\";\n        }\n\n        return _.template(uri, params);\n    }\n}\n","/*\n * Copyright (C) 2005 - 2022 TIBCO Software Inc. All rights reserved.\n * http://www.jaspersoft.com.\n *\n * Unless you have purchased a commercial license agreement from Jaspersoft,\n * the following license terms apply:\n *\n * This program is free software: you can redistribute it and/or modify\n * it under the terms of the GNU Affero General Public License as\n * published by the Free Software Foundation, either version 3 of the\n * License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the\n * GNU Affero General Public License for more details.\n *\n * You should have received a copy of the GNU Affero General Public License\n * along with this program. If not, see <http://www.gnu.org/licenses/>.\n */\n\n// This settings store will be filled with the actual settings loaded from the server\n\nexport default {};","/*\n * Copyright (C) 2005 - 2022 TIBCO Software Inc. All rights reserved.\n * http://www.jaspersoft.com.\n *\n * Unless you have purchased a commercial license agreement from Jaspersoft,\n * the following license terms apply:\n *\n * This program is free software: you can redistribute it and/or modify\n * it under the terms of the GNU Affero General Public License as\n * published by the Free Software Foundation, either version 3 of the\n * License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the\n * GNU Affero General Public License for more details.\n *\n * You should have received a copy of the GNU Affero General Public License\n * along with this program. If not, see <http://www.gnu.org/licenses/>.\n */\n\nimport _ from 'underscore';\nimport Dialog from './Dialog';\nimport xssUtil from '../../util/xssUtil';\nimport alertDialogTemplate from './template/alertDialogTemplate.htm';\nimport i18n from '../../../i18n/CommonBundle.properties';\nexport default Dialog.extend({\n    contentTemplate: _.template(alertDialogTemplate),\n    constructor: function (options) {\n        options || (options = {});\n        Dialog.prototype.constructor.call(this, {\n            modal: options.modal !== false,\n            message: options.message,\n            additionalCssClasses: 'alertDialog ' + (options.additionalCssClasses || ''),\n            title: options.title || i18n['dialog.exception.title'],\n            id: options.id,\n            titleContainerId: options.titleContainerId,\n            bodyContainerId: options.bodyContainerId,\n            buttons: [{\n                label: i18n['button.close'],\n                action: 'close',\n                primary: true\n            }]\n        }, options);\n    },\n    initialize: function (options) {\n        Dialog.prototype.initialize.apply(this, arguments);\n        this.on('button:close', this.close);\n        this.setMessage(options.message);\n    },\n    setMessage: function (message) {\n        message = xssUtil.softHtmlEscape(message, {whiteList: [\"br\"]});\n        this.content = this.contentTemplate({ message: message });\n        var rendered = this.renderContent();\n        this.$contentContainer.html(rendered);\n    }\n});","/*\n * Copyright (C) 2005 - 2022 TIBCO Software Inc. All rights reserved.\n * http://www.jaspersoft.com.\n *\n * Unless you have purchased a commercial license agreement from Jaspersoft,\n * the following license terms apply:\n *\n * This program is free software: you can redistribute it and/or modify\n * it under the terms of the GNU Affero General Public License as\n * published by the Free Software Foundation, either version 3 of the\n * License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the\n * GNU Affero General Public License for more details.\n *\n * You should have received a copy of the GNU Affero General Public License\n * along with this program. If not, see <http://www.gnu.org/licenses/>.\n */\n\n\n/**\n* @author: Zakhar Tomchenko, Kostiantyn Tsaregradskyi\n* @version: $Id$\n*/\n\nimport _ from 'underscore';\nimport $ from 'jquery';\nimport Dimmer from '../base/Dimmer';\nimport Panel from '../panel/Panel';\nimport OptionContainer from '../base/OptionContainer';\n\nimport resizablePanelTrait from '../panel/trait/resizablePanelTrait';\nimport dialogTemplate from './template/dialogTemplate.htm';\nimport dialogButtonTemplate from './template/dialogButtonTemplate.htm';\nimport 'jquery-ui/ui/widgets/draggable';\nimport stdnav from \"../../stdnav/stdnav\";\n\nvar Dialog = Panel.extend(/** @lends Dialog.prototype */{\n    defaultTemplate: dialogTemplate,\n\n    events: {\n        \"mousedown\": \"_focus\",\n        \"touchstart\": \"_focus\",\n        \"keydown\": \"_onKeyDown\",\n        \"keyup\": \"_onKeyboardEvent\",\n        \"keypress\": \"_onKeyboardEvent\",\n        \"resize\": \"_onDialogResize\"\n    },\n\n    /**\n     * @constructor Dialog\n     * @classdesc Base Dialog component\n     * @extends Panel\n     * @param {object} [options] Options for Dialog. For panel-specfic options see {@link Panel#constructor}\n     * @param {boolean} [options.resizable=false] If dialog is resizable\n     * @param {boolean} [options.modal=false] If dialog is modal\n     * @param {object[]} [options.buttons] Buttons for dialog\n     * @param {string} options.buttons[].action Button action\n     * @param {string} options.buttons[].label Button label\n     * @param {boolean} options.buttons[].primary If button is primary\n     * @fires Dialog#button:ACTION\n     */\n    constructor: function(options) {\n        options || (options = {});\n        options.traits || (options.traits = []);\n\n        this.resizable = options.resizable || false;\n        this.modal = options.modal || false;\n        this.id = options.id;\n        this.titleContainerId = options.titleContainerId;\n        this.bodyContainerId = options.bodyContainerId;\n        this.additionalBodyCssClasses = options.additionalBodyCssClasses || \"\";\n        this.returnFocusTo = options.returnFocusTo || false;\n\n        if (this.resizable && _.indexOf(options.traits, resizablePanelTrait) === -1) {\n            options.traits.push(resizablePanelTrait);\n        }\n\n        Panel.call(this, options);\n    },\n\n    initialize: function(options) {\n        this.dialogOptions = _.extend({}, options);\n        this.collapsed = !this.collapsed;\n        this.resetSizeOnOpen = _.isUndefined(options.resetSizeOnOpen) ? true : options.resetSizeOnOpen;\n\n        if(!_.isEmpty(options.buttons)) {\n            this.buttons = new OptionContainer({\n                options:options.buttons,\n                el: this.$(\".jr-mDialog-footer\")[0] || this.$(\".footer\")[0],\n                contextName:\"button\",\n                optionTemplate: options.dialogButtonTemplate || dialogButtonTemplate\n            });\n        }\n\n        Panel.prototype.initialize.apply(this, arguments);\n\n        /**\n         * @event Dialog#button:ACTION\n         */\n        // re-trigger button events on dialog itself\n        this.buttons && this.listenTo(\n            this.buttons,\n            _.map(options.buttons, function(button) { return \"button:\" + button.action; }).join(\" \"),\n            _.bind(function(buttonView, buttonModel) { this.trigger(\"button:\" + buttonModel.get(\"action\"), buttonView, buttonModel); }, this));\n\n        this.render();\n    },\n\n    getTemplateArguments: function () {\n        var\n            templateArguments = Panel.prototype.getTemplateArguments.apply(this, arguments);\n\n        return _.extend(templateArguments, {\n            id: this.id,\n            titleContainerId: this.titleContainerId,\n            bodyContainerId: this.bodyContainerId,\n            additionalBodyCssClasses: this.additionalBodyCssClasses\n        });\n    },\n\n    setElement: function(el) {\n        var res = Panel.prototype.setElement.apply(this, arguments);\n\n        this.buttons && this.buttons.setElement(this.$(\".jr-mDialog-footer\")[0] || this.$(\".footer\")[0]);\n\n        return res;\n    },\n\n    /**\n     * @description Set panel title.\n     * @param {string} title Panel title\n     */\n    setTitle: function(title) {\n        this.$(\".jr-mDialog-header > .jr-mDialog-header-title\").text(title);\n        this.$el.attr(\"aria-label\", title);\n    },\n\n    /**\n     * @description Set element to return focus to when closing\n     * @param {element} element Element to return focus to\n     */\n    setReturnFocus: function(element) {\n        this.returnFocusTo = element;\n    },\n\n    render: function() {\n        this.$el.hide();\n\n        if (this.modal) {\n            this.dimmer = new Dimmer({zIndex: 900});\n        }\n\n        $(\"body\").append(this.$el);\n\n        this.$el.draggable({ handle: \".mover\", addClasses: false, containment: \"document\"});\n\n        return this;\n    },\n\n    /**\n     * @description Open dialog.\n     * @param {object} [coordinates] Position to open dialog.\n     * @param {number} [coordinates.top] Top position to open dialog.\n     * @param {number} [coordinates.left] Left position to open dialog.\n     * @fires Dialog#dialog:visible\n     * @returns {Dialog}\n     */\n    open: function(coordinates) {\n        if (this.isVisible()) {\n            return this;\n        }\n\n        if (this.resetSizeOnOpen) {\n            this.$el.css({\n                height: \"\",\n                width: \"\"\n            });\n\n            this.$el.find(\"textarea\").css({\n                height: \"\",\n                width: \"\"\n            });\n        }\n\n        Panel.prototype.open.apply(this, arguments);\n\n        // increase the dimmer zIndex to hide the dialog which already might be on the page\n        this.modal && this.dimmer.css({zIndex: ++Dialog.highestIndex}).show();\n\n        this._setMinSize();\n\n        var position = this._position(coordinates);\n\n        this.$el.css({\n            top: position.top,\n            left: position.left,\n            position: \"absolute\"\n        });\n\n        // make this dialog be above any other pre-opened dialog and above the dimmer\n        this._increaseZIndex();\n\n        // Class \"over\" is added to buttons on mouseover by some old prototype code.\n        // Button may remain overed when dialog is closed and it will be displayed as overed when we will open\n        // dialog again. That's why we need to remove class \"over\" when dialog is opened.\n        this.buttons && this.buttons.$(\".over\").removeClass(\"over\");\n\n        this.$el.show();\n\n        this.lastFocusedElement = this.returnFocusTo || document.activeElement;\n        let firstFocusable = stdnav.getFirstFocusableElement(this.$el[0]);\n        firstFocusable && _.defer(() => firstFocusable.focus());\n\n        this._onDialogResize();\n\n        /**\n         * @event Dialog#dialog:visible\n         */\n        this.trigger(\"dialog:visible\");\n        stdnav.beginModalFocus(this.$el[0]);\n        return this;\n    },\n\n    /**\n     * @description Close dialog.\n     * @returns {Dialog|undefined}\n     */\n    close: function() {\n        if (this.isVisible()) {\n            stdnav.endModalFocus(this.$el[0]);\n\n            // lower the z-index of the current dialog which going to be closed\n            this.$el.css({ zIndex: --Dialog.highestIndex });\n\n            // and lower the dimmer's zIndex to show the dialog which was previously hidden by this dimmer\n            this.modal && this.dimmer.css({ zIndex: --Dialog.highestIndex }).hide();\n\n            this.$el.hide();\n            this.lastFocusedElement && this.lastFocusedElement.focus();\n\n            Panel.prototype.close.apply(this, arguments);\n\n            return this;\n        }\n    },\n\n    /**\n     * @description Adds additional css classes to Panel\n     * @param {string} classNames Panel css class names\n     */\n    addCssClasses: function(classNames) {\n        this.$el.addClass(classNames);\n    },\n\n    /**\n     * @description Overrides {@link Panel#toggleCollapsedState} to do nothing.\n     * @returns {Dialog}\n     */\n    toggleCollapsedState: function() {\n        return this;\n    },\n\n    /**\n     * @description Enable specific dialog button.\n     * @param {string} action Button action\n     */\n    enableButton: function(action) {\n        this.buttons.enable(action);\n    },\n\n    /**\n     * @description Disable specific dialog button.\n     * @param {string} action Button action\n     */\n    disableButton: function(action) {\n        this.buttons.disable(action);\n    },\n\n    /**\n     * @description Check if dialog is visible.\n     * @returns {boolean}\n     */\n    isVisible: function() {\n        return this.$el.is(\":visible\");\n    },\n\n    _setMinSize: function() {\n        if (this.dialogOptions.minWidth) {\n            this.$el.css({\n                minWidth: this.dialogOptions.minWidth\n            });\n        }\n\n        if (this.dialogOptions.minHeight) {\n            this.$el.css({\n                minHeight: this.dialogOptions.minHeight\n            });\n        }\n\n        if (this.dialogOptions.setMinSizeAsSize) {\n            this.$el.css({\n                width: this.dialogOptions.minWidth,\n                height: this.dialogOptions.minHeight\n            });\n        }\n    },\n\n    _position: function(coordinates) {\n        var top, left;\n        var body = $(\"body\"),\n            elHeight = this.$el.height(),\n            elWidth = this.$el.width();\n\n        if (coordinates && typeof coordinates.top != \"undefined\" && typeof coordinates.left != \"undefined\") {\n            top = coordinates.top;\n            left = coordinates.left;\n\n            var bodyHeight = body.height();\n            var bodyWidth = body.width();\n\n            var fitByHeight = bodyHeight - coordinates.top;\n            var fitByWidth =  bodyWidth - coordinates.left;\n\n            if (fitByHeight < elHeight) {\n                top = coordinates.top - elHeight;\n                top = (top < 0) ? (bodyHeight/2 - elHeight/2) : top\n            }\n            if (fitByWidth < elWidth) {\n                left = coordinates.left - elWidth;\n                left = (left < 0) ? (bodyWidth/2 - elWidth/2) : left\n            }\n\n        } else {\n            top = $(window).height() / 2 - elHeight / 2;\n            left = $(window).width() / 2 - elWidth / 2;\n        }\n\n        return {\n            top: Math.max(0, top),\n            left: Math.max(0, left)\n        };\n    },\n\n    _focus: function() {\n        !this.modal && this._increaseZIndex();\n    },\n\n    _increaseZIndex: function() {\n        this.$el.css({ zIndex : ++Dialog.highestIndex });\n    },\n\n    _onKeyDown: function(e) {\n        // ARIA requirements are that the ESC key will close modal dialogs\n        // However... buttonless dialog can't be closed (e.g: loading dialog)\n        if ((e.key === \"Escape\" || e.keyCode === 27)\n            && (this.buttons\n                && this.dialogOptions.buttons.length > 0)) {\n            this.close();\n        }\n\n        this.buttons && this.buttons._onKeyDown(e);\n\n        // We don't want to let any keyboard event go outside of our dialog.\n        // (for details see ticket http://jira.jaspersoft.com/browse/JRS-12262)\n        e.stopPropagation();\n    },\n\n    _onKeyboardEvent: function(e) {\n        // We don't want to let any keyboard event go outside of our dialog.\n        // (for details see ticket http://jira.jaspersoft.com/browse/JRS-12262)\n        e.stopPropagation();\n    },\n\n    _onDialogResize: function () {\n        // re-define your own resize logic here\n    },\n\n    /**\n     * @description Remove dialog from DOM\n     */\n    remove: function() {\n        this.buttons && this.buttons.remove();\n\n        this.dimmer && this.dimmer.remove();\n\n        try {\n            this.$el.draggable(\"destroy\");\n        } catch (e) {\n            // destroyed already, skip\n        }\n\n        Panel.prototype.remove.call(this);\n    }\n}, {\n    // this value is based on the same value taken from CSS file jasper-ui.css (see selector '.jr-mDialog.jr')\n    highestIndex: 5000,\n    resetHighestIndex: function(index){\n        Dialog.highestIndex = index || 5000;\n    }\n});\n\nexport default Dialog;\n","/*\n * Copyright (C) 2005 - 2022 TIBCO Software Inc. All rights reserved.\n * http://www.jaspersoft.com.\n *\n * Unless you have purchased a commercial license agreement from Jaspersoft,\n * the following license terms apply:\n *\n * This program is free software: you can redistribute it and/or modify\n * it under the terms of the GNU Affero General Public License as\n * published by the Free Software Foundation, either version 3 of the\n * License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the\n * GNU Affero General Public License for more details.\n *\n * You should have received a copy of the GNU Affero General Public License\n * along with this program. If not, see <http://www.gnu.org/licenses/>.\n */\n\nimport $ from 'jquery';\nimport _ from 'underscore';\nimport Backbone from 'backbone';\nimport tooltipTemplate from './template/tooltipTemplate.htm';\nexport default Backbone.View.extend({\n    template: _.template(tooltipTemplate),\n    delay: 500,\n    offset: {\n        x: 10,\n        y: 10\n    },\n    attribute: 'data-tooltip',\n    cssClasses: 'panel info tooltip',\n    contentSelector: '.body',\n    triggerEvents: false,\n    el: function () {\n        return this.template({ cssClasses: this.cssClasses });\n    },\n    constructor: function (options) {\n        options || (options = {});\n        if (!options.attachTo || $(options.attachTo).length === 0) {\n            throw new Error('Tooltip should be attached to an element');\n        }\n        if (!options.contentTemplate) {\n            throw new Error('Tooltip should have contentTemplate');\n        }\n        this._shown = false;\n        this.$attachTo = $(options.attachTo);\n        this.$attachTo[0].tooltip = this;\n        options.delay && (this.delay = options.delay);\n        options.offset && (this.offset = options.offset);\n        options.attribute && (this.attribute = options.attribute);\n        options.cssClasses && (this.cssClasses = options.cssClasses);\n        this.contentTemplate = options.contentTemplate;\n        this.i18n = options.i18n || {};\n        !_.isUndefined(options.triggerEvents) && (this.triggerEvents = options.triggerEvents);\n        this.selector = '[' + this.attribute + ']';\n        _.bindAll(this, 'show', '_onMouseMove', '_onMouseLeave');\n        this.$attachTo.on('mousemove touchmove', this.selector, this._onMouseMove);\n        this.$attachTo.on('mouseleave touchend', this.selector, this._onMouseLeave);\n        Backbone.View.prototype.constructor.apply(this, arguments);\n    },\n    _render: function (model, options, dfd) {\n        if (this._event) {\n            model = model instanceof Backbone.Model ? model.toJSON() : model;\n            var content = _.template(this.contentTemplate)({\n                model: model,\n                i18n: this.i18n,\n                options: options || {}\n            });\n            this.$el.find('.body').empty().append(content);\n            this._showTooltip();\n        }\n        dfd.resolve();\n    },\n    show: function (model, options) {\n        var dfd = new $.Deferred();\n        this._timer = setTimeout(_.bind(this._render, this, model, options, dfd), this.delay);\n        return dfd;\n    },\n    _showTooltip: function () {\n        $('body').append(this.$el);\n        this._updatePosition();\n        this._shown = true;\n        this.triggerEvents && this.trigger('show', this);\n    },\n    hide: function () {\n        this.contentTemplate && this._timer && clearTimeout(this._timer);\n        this.$el.detach();\n        this._shown = false;\n        this.triggerEvents && this.trigger('hide', this);\n    },\n    _updatePosition: function () {\n        var tooltipHeight = this.$el.innerHeight(), tooltipWidth = this.$el.innerWidth(), windowHeight = $(window).height(), windowWidth = $(window).width(), shiftY = this.offset.y, shiftX = this.offset.x;\n        if (tooltipHeight + this._event.pageY + this.offset.y + 3 >= windowHeight) {\n            shiftY = -this.offset.y - tooltipHeight;\n        }\n        if (tooltipWidth + this._event.pageX + this.offset.x + 3 >= windowWidth) {\n            shiftX = -this.offset.x - tooltipWidth;\n        }\n        this.$el.css({\n            top: this._event.pageY + shiftY,\n            left: this._event.pageX + shiftX\n        });\n    },\n    _onMouseMove: function (event) {\n        this._event = event;\n    },\n    _onMouseLeave: function () {\n        this._shown && this.hide();\n        this._timer && clearTimeout(this._timer);\n        this._event = null;\n    },\n    remove: function () {\n        this._shown && this.hide();\n        this._timer && clearTimeout(this._timer);\n        this.$attachTo.off('mousemove touchmove', this.selector, this._onMouseMove);\n        this.$attachTo.off('mouseleave touchend', this.selector, this._onMouseLeave);\n        Backbone.View.prototype.remove.apply(this, arguments);\n    }\n}, {\n    attachTo: function (container, options) {\n        var Tooltip = this;\n        options || (options = {});\n        options.attachTo = container || 'body';\n        return new Tooltip(options);\n    },\n    detachFrom: function (container) {\n        container = $(container)[0];\n        container.tooltip && container.tooltip.remove();\n    }\n});","/*\n * Copyright (C) 2005 - 2022 TIBCO Software Inc. All rights reserved.\n * http://www.jaspersoft.com.\n *\n * Unless you have purchased a commercial license agreement from Jaspersoft,\n * the following license terms apply:\n *\n * This program is free software: you can redistribute it and/or modify\n * it under the terms of the GNU Affero General Public License as\n * published by the Free Software Foundation, either version 3 of the\n * License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the\n * GNU Affero General Public License for more details.\n *\n * You should have received a copy of the GNU Affero General Public License\n * along with this program. If not, see <http://www.gnu.org/licenses/>.\n */\n\nimport _ from 'underscore';\nimport $ from 'jquery';\nimport abstractPanelTrait from './abstractPanelTrait';\nfunction collapseControlPressed(evt, allowPropagation) {\n    !allowPropagation && evt.stopPropagation();\n    this.onCollapseControlPressed ? this.onCollapseControlPressed(evt) : this.toggleCollapsedState();\n}\nfunction stopListeningToCollapser() {\n    this.$collapser && this.$collapser.off('mousedown');\n    this.$el && this.$el.find(this.expandOnDblClickSelector).off('dblclick');\n}\nexport default _.extend({}, abstractPanelTrait, {\n    onConstructor: function (options) {\n        this.collapserClass = options.collapserClass || 'buttonIconToggle';\n        this.collapserSelector = options.collapserSelector || '.buttonIconToggle';\n        this.collapsiblePanelClass = options.collapsiblePanelClass || 'collapsiblePanel';\n        this.expandOnDblClickSelector = options.expandOnDblClickSelector || '> p:first';\n        this.allowEventPropagation = !!options.allowMouseDownEventPropagation;\n        this.onCollapseControlPressed = options.onCollapseControlPressed;\n    },\n    beforeSetElement: function () {\n        stopListeningToCollapser.call(this);\n    },\n    afterSetElement: function () {\n        this.$el.addClass(this.collapsiblePanelClass);\n        this.$collapser = this.$(this.collapserSelector);\n        if (!this.$collapser.length) {\n            this.$collapser = $('<button></button>').addClass(this.collapserClass);\n            this.$('> .header').prepend(this.$collapser);\n        }\n        this.$collapser.on('mousedown', _.bind(collapseControlPressed, this, this.allowEventPropagation));\n        this.$el.find(this.expandOnDblClickSelector).on('dblclick', _.bind(collapseControlPressed, this));\n    },\n    onRemove: function () {\n        stopListeningToCollapser.call(this);\n    }\n});","/*\n * Copyright (C) 2005 - 2022 TIBCO Software Inc. All rights reserved.\n * http://www.jaspersoft.com.\n *\n * Unless you have purchased a commercial license agreement from Jaspersoft,\n * the following license terms apply:\n *\n * This program is free software: you can redistribute it and/or modify\n * it under the terms of the GNU Affero General Public License as\n * published by the Free Software Foundation, either version 3 of the\n * License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the\n * GNU Affero General Public License for more details.\n *\n * You should have received a copy of the GNU Affero General Public License\n * along with this program. If not, see <http://www.gnu.org/licenses/>.\n */\n\nimport $ from 'jquery';\nimport Backbone from 'backbone';\nimport _ from 'underscore';\nimport ScalableListModel from '../../../../components/scalableList/model/ScalableListModel';\nimport defaultChunksTemplate from '../templates/viewPortChunksTemplate.htm';\nimport defaultItemsTemplate from '../templates/itemsTemplate.htm';\nvar DEFAULT_VIEW_PORT_CHUNK_HEIGHT = 1000000;\nvar DEFAULT_SCROLL_TIMEOUT = 50;\nvar DEFAULT_MANUAL_SCROLL_INTERVAL = 50;\nvar DEFAULT_LIST_ITEM_HEIGHT = 21;\nvar MIN_ITEM_HEIGHT_TRESHOLD = 2;\nvar ScalableList = Backbone.View.extend({\n    ListModel: ScalableListModel,\n    listItemSelector: 'li',\n    events: {\n        'scroll': 'onScroll',\n        'touchmove': 'onScroll'\n    },\n    attributes: { 'style': 'overflow-y: auto; height: 100px' },\n    initialize: function (options) {\n        _.bindAll(this, '_fetchVisibleData');\n        this.model = options.model || new this.ListModel(options);\n        this.chunksTemplate = _.template(options.chunksTemplate || defaultChunksTemplate);\n        this.itemsTemplate = _.template(options.itemsTemplate || defaultItemsTemplate);\n        this.defaultChunkHeight = this.chunkHeight = options.chunkHeight || DEFAULT_VIEW_PORT_CHUNK_HEIGHT;\n        this.scrollTimeout = typeof options.scrollTimeout !== 'undefined' ? options.scrollTimeout : DEFAULT_SCROLL_TIMEOUT;\n        this.manualScrollInterval = options.manualScrollInterval || DEFAULT_MANUAL_SCROLL_INTERVAL;\n        this.lazy = options.lazy;\n        this.defaultItemHeight = options.listItemHeight || DEFAULT_LIST_ITEM_HEIGHT;\n        this.listItemSelector = options.listItemSelector || this.listItemSelector;\n        this.render();\n        this.initListeners();\n        if (!this.lazy) {\n            this.model.fetch();\n        }\n        return this;\n    },\n    initListeners: function () {\n        this.listenTo(this.model, 'change', this.onModelChange, this);\n        this.listenTo(this.model, 'fetchFailed', this.onFetchFailed, this);\n    },\n    render: function () {\n        return this;\n    },\n    onScroll: function (event) {\n        if (this.scrollTimeout > 0) {\n            clearTimeout(this.scrollTimer);\n            this.scrollTimer = setTimeout(this._fetchVisibleData, this.scrollTimeout);\n        } else {\n            this._fetchVisibleData();\n        }\n    },\n    onModelChange: function () {\n        this.renderData();\n    },\n    onFetchFailed: function (responseStatus, error) {\n        this.trigger('listRenderError', responseStatus, error);\n    },\n    postProcessChunkModelItem: function (item, i) {\n        item.index = this.model.get('bufferStartIndex') + i;\n        if (item.label === undefined) {\n            item.label = item.value;\n        }\n        item.label = $.trim(item.label);\n    },\n    _renderItems: function () {\n        var bufferStart = this.model.get('bufferStartIndex');\n        var bufferEnd = this.model.get('bufferEndIndex');\n        var firstChunkWithData = this.itemsPerChunk ? Math.ceil((bufferStart + 1) / this.itemsPerChunk) : 1;\n        var lastChunkWithData = this.itemsPerChunk ? Math.ceil((bufferEnd + 1) / this.itemsPerChunk) : 1;\n        var that = this;\n        this.$el.find('.j-view-port-chunk').each(function (index, chunk) {\n            var chunkModel = that._getChunkModel({\n                index: index + 1,\n                firstChunkWithData: firstChunkWithData,\n                lastChunkWithData: lastChunkWithData,\n                bufferStart: bufferStart,\n                bufferEnd: bufferEnd,\n                total: that.totalItems,\n                itemsPerChunk: that.itemsPerChunk,\n                itemHeight: that.itemHeight,\n                chunkHeight: that.chunkHeight,\n                model: that.model\n            });\n            var chunkHtml = chunkModel ? that.itemsTemplate(chunkModel) : '';\n            $(chunk).html(chunkHtml);\n        });\n    },\n    _renderViewChunks: function (force) {\n        if (this.totalItems !== this.model.get('total') || force) {\n            this.totalItems = this.model.get('total');\n            this.$el.html(this.chunksTemplate({\n                _: _,\n                chunks: this._getViewChunksModel()\n            }));\n            this.$firstViewChunk = this.$el.find('.j-view-port-chunk:first');\n        }\n    },\n    _getViewChunksModel: function () {\n        var totalChunksToShow = this.itemsPerChunk ? Math.ceil(this.totalItems / this.itemsPerChunk) : 1;\n        var lastChunkHeight = totalChunksToShow > 0 ? this.itemHeight ? this.totalItems * this.itemHeight - (totalChunksToShow - 1) * this.chunkHeight : this.chunkHeight : 1;\n        var viewChunks = [];\n        for (var i = 1; i < totalChunksToShow; i++) {\n            viewChunks.push({ height: this.chunkHeight });\n        }\n        viewChunks.push({ height: lastChunkHeight });\n        return viewChunks;\n    },\n    _calcViewPortConstants: function (options) {\n        options = options || {};\n        if (!this.viewPortConstantsInitialized) {\n            this.itemHeight = this.defaultItemHeight;\n            if (this.$firstViewChunk) {\n                this.itemHeight = this.$el.find(this.listItemSelector + ':first').outerHeight(true);\n                if (!this.itemHeight || this.itemHeight <= MIN_ITEM_HEIGHT_TRESHOLD) {\n                    this.itemHeight = this.defaultItemHeight;\n                    this.viewPortConstantsInitialized = false;\n                } else {\n                    this.viewPortConstantsInitialized = true;\n                }\n            }\n            this._calcViewPortHeight();\n            this.itemsPerChunk = Math.floor(this.defaultChunkHeight / this.itemHeight);\n            this.chunkHeight = this.itemsPerChunk * this.itemHeight;\n            this._renderViewChunks(true);\n            this._renderItems();\n        }\n    },\n    _calcViewPortHeight: function () {\n        this.viewPortHeight = this.$el.height();\n        this.itemsPerView = Math.floor(this.viewPortHeight / this.itemHeight) - 1;\n    },\n    _getItemsPerView: function () {\n        this._renderData();\n        return this.itemsPerView;\n    },\n    _getChunkModel: function (options) {\n        var index = options.index;\n        if (index < options.firstChunkWithData || index > options.lastChunkWithData) {\n            return null;\n        }\n        var firstItemForChunk = options.itemsPerChunk ? Math.max(options.bufferStart, options.itemsPerChunk * (index - 1)) : options.bufferStart;\n        var lastItemForChunk = options.itemsPerChunk ? Math.min(options.bufferEnd, options.itemsPerChunk * index - 1) : options.bufferEnd;\n        var top = options.itemHeight ? firstItemForChunk * options.itemHeight - (index - 1) * options.chunkHeight : 0;\n        var items = Array.prototype.slice.call(options.model.get('items'), firstItemForChunk - options.bufferStart, lastItemForChunk - options.bufferStart + 1);\n        _.each(items, function (item, i) {\n            this.postProcessChunkModelItem(item, i + (firstItemForChunk - options.bufferStart));\n        }, this);\n        return {\n            top: top,\n            items: items\n        };\n    },\n    _fetchVisibleData: function () {\n        var visibleItems = this._getVisibleItems();\n        this.model.fetch({\n            top: visibleItems.top,\n            bottom: visibleItems.bottom\n        });\n    },\n    _getVisibleItems: function () {\n        var scrollPos = this._getScrollPos();\n        var total = this.model.get('total');\n        var topVisibleItem = Math.min(total - this.itemsPerView, Math.floor(scrollPos / this.itemHeight));\n        var bottomVisibleItem = Math.min(total - 1, topVisibleItem + this.itemsPerView + 1);\n        return {\n            top: topVisibleItem,\n            bottom: bottomVisibleItem\n        };\n    },\n    _getScrollPos: function () {\n        this._renderData();\n        var scrollPos = 0;\n        if (this.$firstViewChunk) {\n            var elOffset = this.$el.offset();\n            var viewChunkOffset = this.$firstViewChunk.offset();\n            if (elOffset && viewChunkOffset) {\n                scrollPos = elOffset.top - viewChunkOffset.top;\n            }\n        }\n        return scrollPos;\n    },\n    renderData: function () {\n        if (this.lazy || !this.model.has('bufferStartIndex') || !this.model.has('bufferEndIndex')) {\n            this.lazy = null;\n            this.model.fetch();\n        } else {\n            this._renderData();\n        }\n        return this;\n    },\n    _renderData: function () {\n        this.trigger('before:render:data');\n        this._renderViewChunks();\n        this._renderItems();\n        this._calcViewPortConstants();\n        this.trigger('render:data');\n    },\n    resize: function () {\n        if (!this.$el.is(':visible')) {\n            return;\n        }\n        var componentHeight = this.$el.outerHeight();\n        if (componentHeight === this._componentHeight) {\n            return;\n        } else {\n            this._componentHeight = componentHeight;\n        }\n        this.viewPortConstantsInitialized = false;\n        this._renderData();\n    },\n    fetch: function (callback, options) {\n        this.lazy = false;\n        options = options || {};\n        var scrollPos;\n        if (options.keepPosition) {\n            scrollPos = this.$el.get(0).scrollTop;\n        } else {\n            this.reset({\n                silent: true,\n                lazy: false\n            });\n        }\n        this.model.once('change', function () {\n            if (options.keepPosition) {\n                this.$el.scrollTop(scrollPos);\n            }\n            callback && callback.apply(this, arguments);\n        }, this).fetch({ force: true });\n    },\n    reset: function (options) {\n        options = _.defaults(options || {}, { lazy: true });\n        this.$el.scrollTop(0);\n        this.lazy = options.lazy;\n        this.model.reset(options);\n    },\n    scrollTo: function (index) {\n        if (typeof index !== 'number') {\n            return;\n        }\n        var scrollPos = this._getScrollPos();\n        if (!this.viewPortConstantsInitialized) {\n            return;\n        }\n        this._calcViewPortHeight();\n        var newTopVisibleItemPos = null;\n        var itemPos = index * this.itemHeight;\n        if (itemPos < scrollPos) {\n            newTopVisibleItemPos = itemPos;\n        } else if (itemPos + this.itemHeight > scrollPos + this.viewPortHeight) {\n            newTopVisibleItemPos = itemPos + this.itemHeight - this.viewPortHeight;\n        }\n        if (newTopVisibleItemPos !== null) {\n            this.$el.scrollTop(newTopVisibleItemPos);\n        }\n    }\n});\nexport default ScalableList;","export default \"{{_.each(chunks, function(chunk) { }}\\n<div class=\\\"j-view-port-chunk\\\" style=\\\"height: {{- chunk.height}}px\\\">\\n\\n    <js-templateNonce></js-templateNonce>\\n</div>\\n{{ }); }}\\n\";","export default \"<ul class=\\\"jr-mSelectlist jr\\\" style=\\\"top: {{- top}}px; position: relative;\\\">\\n\\n    <js-templateNonce></js-templateNonce>\\n    {{_.each(items, function(item) { }}\\n    <li class=\\\"jr-mSelectlist-item {{ if (item.selected) print('jr-isSelected'); }} jr\\\" title=\\\"{{ print(item.label && item.label.trim() ? _.xssHardEscape(item.label) : '&nbsp;')}}\\\" data-index=\\\"{{- item.index}}\\\">\\n        <div class=\\\"jr-mSelectlist-item-wrapper jr\\\">\\n            <a class=\\\"jr-mSelectlist-item-text jr\\\">{{ print(item.label && item.label.trim() ? _.xssHardEscape(item.label) : '&nbsp;')}}</a>\\n        </div>\\n    </li>\\n    {{ }); }}\\n</ul>\";","/*\n * Copyright (C) 2005 - 2022 TIBCO Software Inc. All rights reserved.\n * http://www.jaspersoft.com.\n *\n * Unless you have purchased a commercial license agreement from Jaspersoft,\n * the following license terms apply:\n *\n * This program is free software: you can redistribute it and/or modify\n * it under the terms of the GNU Affero General Public License as\n * published by the Free Software Foundation, either version 3 of the\n * License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the\n * GNU Affero General Public License for more details.\n *\n * You should have received a copy of the GNU Affero General Public License\n * along with this program. If not, see <http://www.gnu.org/licenses/>.\n */\n\nimport $ from 'jquery';\nimport _ from 'underscore';\nimport ListWithSelectionModel from '../../../../components/scalableList/model/ListWithSelectionModel';\nimport ScalableList from './ScalableList';\nvar MOUSE_MOVE_MIN_PIXELS = 1;\nvar BUTTONS = {\n    LEFT: 'left',\n    RIGHT: 'right'\n};\nvar ListWithSelection = ScalableList.extend({\n    ListModel: ListWithSelectionModel,\n    globalEvents: true,\n    initialize: function (options) {\n        _.bindAll(this, 'onGlobalMouseup', 'onGlobalMousemove', '_autoScroll', 'fetch');\n        this.eventListenerPattern = options.eventListenerPattern || 'li';\n        this.markerClass = options.markerClass ? options.markerClass : '';\n        this.selectedClass = options.selectedClass ? options.selectedClass : 'selected';\n        this._initSelection(options.selection);\n        return ScalableList.prototype.initialize.call(this, options);\n    },\n    delegateEvents: function () {\n        var res = ScalableList.prototype.delegateEvents.apply(this, arguments);\n        this.$el.on('mousedown', this.eventListenerPattern, _.bind(this.onMousedown, this)).on('mousemove', this.eventListenerPattern, _.bind(this.onMousemove, this)).on('dblclick', this.eventListenerPattern, _.bind(this.onMousedblclick, this)).on('contextmenu', this.eventListenerPattern, _.bind(this.onItemEvent, this, this.$el)).on('mouseout', this.eventListenerPattern, _.bind(this.onItemEvent, this, this.$el)).on('mouseover', this.eventListenerPattern, _.bind(this.onItemEvent, this, this.$el));\n        !this.globalEvents && this.$el.on('mouseup', this.eventListenerPattern, this.onGlobalMouseup);\n        return res;\n    },\n    undelegateEvents: function () {\n        var res = ScalableList.prototype.undelegateEvents.apply(this, arguments);\n        this.$el.off('mouseup').off('mousedown').off('mousemove').off('dblclick').off('contextmenu').off('mouseout').off('mouseover');\n        return res;\n    },\n    _initSelection: function (selection) {\n        selection = _.extend({ allowed: {} }, selection);\n        var selectionAllowed = selection.allowed ?? {}, leftButtonSelection = !_.isObject(selectionAllowed) ? selectionAllowed : selectionAllowed.left;\n        this.selection = {\n            allowed: {\n                left: typeof leftButtonSelection !== 'undefined' ? leftButtonSelection : true,\n                right: typeof selectionAllowed.right !== 'undefined' ? selectionAllowed.right : false\n            },\n            multiple: typeof selection.multiple !== 'undefined' ? selection.multiple : true\n        };\n    },\n    initListeners: function () {\n        ScalableList.prototype.initListeners.call(this);\n        this.listenTo(this.model, 'selection:clear', this.clearSelection, this);\n        this.listenTo(this.model, 'selection:add', this.selectValue, this);\n        this.listenTo(this.model, 'selection:addRange', this.selectRange, this);\n        this.listenTo(this.model, 'selection:remove', this.deselectValue, this);\n        this.globalEvents && $('body').on('mouseup', this.onGlobalMouseup).on('mousemove', this.onGlobalMousemove);\n    },\n    postProcessChunkModelItem: function (item, i) {\n        ScalableList.prototype.postProcessChunkModelItem.call(this, item, i);\n        item.selected = this.model.selectionContains && this.model.selectionContains(item.value, item.index);\n    },\n    onMousedblclick: function (event) {\n        if (!this.selection.multiple) {\n            if ((this.selection.allowed.left || this.selection.allowed.right) && !this.getDisabled()) {\n                var itemData = this._getDomItemData(event.currentTarget);\n                this._singleSelect(event, itemData.value, itemData.index);\n                if (this.selectionChanged) {\n                    this._triggerSelectionChanged();\n                    this._triggerDblclicked();\n                    this.selectionChanged = false;\n                }\n            }\n        }\n    },\n    getItemByEvent: function (e) {\n        return this._getDomItemData(e.currentTarget).item;\n    },\n    onItemEvent: function (element, e) {\n        var eventType = e.type, item = this.getItemByEvent(e);\n        this.trigger('list:item:' + eventType, item, e);\n    },\n    onMousedown: function (event) {\n        if (!this.getDisabled() && (this.selection.allowed.left && event.which === 1 || this.selection.allowed.right && event.which === 3)) {\n            var buttonType = event.which === 1 ? BUTTONS.LEFT : BUTTONS.RIGHT;\n            if (this.selection.multiple) {\n                this[buttonType + 'MouseButtonPressed'] = true;\n                this.mouseDownPos = this._getMousePos(event);\n            }\n            var itemData = this._getDomItemData(event.currentTarget);\n            this.selection.multiple ? this._multiSelect(event, itemData.value, itemData.index) : this._singleSelect(event, itemData.value, itemData.index);\n        }\n    },\n    onMousemove: function (event) {\n        if (this._allowMouseMoveSelection()) {\n            this._stopAutoScroll();\n            if (this._mouseMoved(event, this.mouseDownPos)) {\n                this.mouseDownPos = this._getMousePos(event);\n                var itemData = this._getDomItemData(event.currentTarget);\n                if (!this.model.selectionContains(itemData.value, itemData.index)) {\n                    this.model.addRangeToSelection(itemData.value, itemData.index);\n                }\n            }\n        }\n    },\n    onGlobalMouseup: function (event) {\n        var self = this;\n        if (this.leftMouseButtonPressed || this.rightMouseButtonPressed) {\n            _.each(BUTTONS, function (buttonType) {\n                self[buttonType + 'MouseButtonPressed'] = false;\n            });\n            delete this.mouseDownPos;\n            this._stopAutoScroll();\n            if (this.selectionChanged) {\n                this._triggerSelectionChanged();\n                this.selectionChanged = false;\n            }\n        }\n    },\n    onGlobalMousemove: function (event) {\n        if (this._allowMouseMoveSelection()) {\n            this.mousePosY = event.clientY;\n            if (!this.scrollInterval) {\n                this.scrollInterval = setInterval(this._autoScroll, this.manualScrollInterval);\n            }\n        }\n    },\n    clearSelection: function () {\n        this.$el.find('li.' + this.selectedClass + this.markerClass).removeClass(this.selectedClass);\n        this.selectionChanged = true;\n    },\n    selectValue: function (selection) {\n        this.$el.find('li' + this.markerClass + '[data-index=\\'' + selection.index + '\\']:not(.' + this.selectedClass + ')').addClass(this.selectedClass);\n        if (this.selection.multiple) {\n            this.selectionChanged = true;\n        } else {\n            this._triggerSelectionChanged();\n        }\n    },\n    selectRange: function (options) {\n        var self = this;\n        var visibleRangeStart = Math.max(this.model.get('bufferStartIndex'), options.start);\n        var visibleRangeEnd = Math.min(this.model.get('bufferEndIndex'), options.end);\n        this.$el.find('li' + this.markerClass + ':not(.' + this.selectedClass + ')').each(function () {\n            var $item = $(this);\n            var index = parseInt($item.attr('data-index'), 10);\n            if (index >= visibleRangeStart && index <= visibleRangeEnd) {\n                var item = self.model.get('items')[index - self.model.get('bufferStartIndex')];\n                if (self.model.selectionContains(item.value, index)) {\n                    $item.addClass(self.selectedClass);\n                }\n            }\n        });\n        this.selectionChanged = true;\n    },\n    deselectValue: function (selection) {\n        this.$el.find('li[data-index=\\'' + selection.index + '\\'].' + this.selectedClass + this.markerClass).removeClass(this.selectedClass);\n        if (this.selection.multiple) {\n            this.selectionChanged = true;\n        } else {\n            this._triggerSelectionChanged();\n        }\n    },\n    _autoScroll: function () {\n        var viewPortTop = this.$el.offset().top;\n        var scrollTop = this.$el.scrollTop();\n        var scrollPos = typeof this.scrollTop !== 'undefined' ? this.scrollTop : scrollTop;\n        var newScrollPos;\n        var shouldScroll = false;\n        if (this.mousePosY < viewPortTop) {\n            newScrollPos = scrollPos - this.itemHeight * 3;\n            shouldScroll = newScrollPos < scrollTop;\n        } else if (this.mousePosY > viewPortTop + this.viewPortHeight) {\n            newScrollPos = scrollPos + this.itemHeight * 3;\n            shouldScroll = newScrollPos > scrollTop;\n        }\n        if (shouldScroll) {\n            this.$el.scrollTop(newScrollPos);\n            this.scrollTop = this.$el.scrollTop();\n            this._fetchVisibleData();\n        }\n        this._selectRangeOnAutoScroll(scrollPos, newScrollPos);\n    },\n    _selectRangeOnAutoScroll: function (oldScrollPos, newScrollPos) {\n        var index;\n        if (oldScrollPos < newScrollPos) {\n            index = this._getVisibleItems().bottom;\n        } else if (oldScrollPos > newScrollPos) {\n            index = this._getVisibleItems().top;\n        }\n        if (index) {\n            var item = this.model.get('items')[index - this.model.get('bufferStartIndex')];\n            if (item) {\n                if (!this.model.selectionContains(item.value, index)) {\n                    this.model.addRangeToSelection(item.value, index);\n                }\n            }\n        }\n    },\n    _stopAutoScroll: function () {\n        if (this.scrollInterval) {\n            clearInterval(this.scrollInterval);\n            this.scrollInterval = undefined;\n            this.scrollTop = undefined;\n        }\n    },\n    _multiSelect: function (event, value, index) {\n        if (event.shiftKey) {\n            this.model.addRangeToSelection(value, index);\n        } else if (event.ctrlKey || event.metaKey) {\n            this._singleSelect(event, value, index);\n        } else {\n            this.model.toggleSelection(value, index);\n        }\n    },\n    _singleSelect: function (event, value, index) {\n        this.model.clearSelection().addValueToSelection(value, index);\n    },\n    _triggerSelectionChanged: function () {\n        this.trigger('selection:change', this.getValue());\n    },\n    _triggerDblclicked: function () {\n        this.trigger('item:dblclick', this.getValue());\n    },\n    _getDomItemData: function (item) {\n        var $item = $(item);\n        var index = $item.attr('data-index');\n        while (index === undefined) {\n            $item = $item.parent();\n            index = $item.attr('data-index');\n        }\n        index = parseInt(index, 10);\n        var modelItem = this.model.get('items')[index - this.model.get('bufferStartIndex')];\n        return {\n            item: modelItem,\n            value: modelItem.value,\n            index: index\n        };\n    },\n    _mouseMoved: function (event, mousePos) {\n        return Math.abs(mousePos.x - event.clientX) + Math.abs(mousePos.y - event.clientY) >= MOUSE_MOVE_MIN_PIXELS;\n    },\n    _getMousePos: function (event) {\n        return {\n            x: event.clientX,\n            y: event.clientY\n        };\n    },\n    _allowMouseMoveSelection: function () {\n        return (this.selection.allowed.left && this.leftMouseButtonPressed || this.selection.allowed.right && this.rightMouseButtonPressed) && this.selection.multiple && !this.getDisabled();\n    },\n    getValue: function () {\n        return this.model.getSelection();\n    },\n    setValue: function (selection, options) {\n        options = options || {};\n        if (!options.silent && (!options.modelOptions || !options.modelOptions.silent)) {\n            this.model.once('selection:change', this._triggerSelectionChanged, this);\n        }\n        options = options.modelOptions;\n        this.model.select(selection, options);\n        return this;\n    },\n    selectAll: function (options) {\n        if (!options || !options.silent) {\n            this.model.once('selection:change', this._triggerSelectionChanged, this);\n        }\n        this.model.selectAll();\n        return this;\n    },\n    selectNone: function (options) {\n        return this.setValue({}, options);\n    },\n    invertSelection: function (options) {\n        if (!options || !options.silent) {\n            this.model.once('selection:change', this._triggerSelectionChanged, this);\n        }\n        this.model.invertSelection();\n        return this;\n    },\n    setDisabled: function (disabled) {\n        this.disabled = disabled;\n        this.disabled ? this.$el.addClass('disabled') : this.$el.removeClass('disabled');\n        return this;\n    },\n    getDisabled: function () {\n        return this.disabled;\n    },\n    remove: function () {\n        $('body').off('mouseup', this.onGlobalMouseup).off('mousemove', this.onGlobalMousemove);\n        return ScalableList.prototype.remove.call(this);\n    }\n});\nexport default ListWithSelection;","/*\n * Copyright (C) 2005 - 2022 TIBCO Software Inc. All rights reserved.\n * http://www.jaspersoft.com.\n *\n * Unless you have purchased a commercial license agreement from Jaspersoft,\n * the following license terms apply:\n *\n * This program is free software: you can redistribute it and/or modify\n * it under the terms of the GNU Affero General Public License as\n * published by the Free Software Foundation, either version 3 of the\n * License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the\n * GNU Affero General Public License for more details.\n *\n * You should have received a copy of the GNU Affero General Public License\n * along with this program. If not, see <http://www.gnu.org/licenses/>.\n */\n\nimport _ from 'underscore';\n\nfunction toggleSelection(item, i, select) {\n    var index = this.get('bufferStartIndex') + i;\n    if (this.selectionContains) {\n        if (select) {\n            item.selected = true;\n            !this.selectionContains(item.value, index) && this.addValueToSelection(item.value, index);\n        } else {\n            item.selected = false;\n            this.selectionContains(item.value, index) && this.removeValueFromSelection(item.value, index);\n        }\n    }\n    delete item.addToSelection;\n}\n\nexport default {\n    afterFetchComplete: function (items) {\n        _.each(items, function (item, i) {\n            if (item) {\n                if (item.addToSelection) {\n                    toggleSelection.call(this, item, i, true);\n                } else if (!_.isUndefined(item.addToSelection)) {\n                    toggleSelection.call(this, item, i);\n                }\n            }\n        }, this);\n    }\n};\n","/*\n * Copyright (C) 2005 - 2022 TIBCO Software Inc. All rights reserved.\n * http://www.jaspersoft.com.\n *\n * Unless you have purchased a commercial license agreement from Jaspersoft,\n * the following license terms apply:\n *\n * This program is free software: you can redistribute it and/or modify\n * it under the terms of the GNU Affero General Public License as\n * published by the Free Software Foundation, either version 3 of the\n * License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the\n * GNU Affero General Public License for more details.\n *\n * You should have received a copy of the GNU Affero General Public License\n * along with this program. If not, see <http://www.gnu.org/licenses/>.\n */\n\nimport _ from 'underscore';\nimport Panel from '../panel/Panel';\nimport collapsiblePanelTrait from '../panel/trait/collapsiblePanelTrait';\nimport List from '../list/view/ListWithSelection';\nimport addToSelectionModelTrait from '../../../components/scalableList/model/trait/addToSelectionModelTrait';\nimport ListWithSelectionModel from '../../../components/scalableList/model/ListWithSelectionModel';\n\nlet ListWithSelectionModelExtended = ListWithSelectionModel.extend(addToSelectionModelTrait);\n\nimport DataProviderWithSearchCache from './dataprovider/DataProviderWithSearchCache';\nexport default Panel.extend({\n    constructor: function (options) {\n        options || (options = {});\n        _.extend(options, { traits: [collapsiblePanelTrait] });\n        Panel.prototype.constructor.call(this, options);\n    },\n    initialize: function (options) {\n        options || (options = {});\n        this._isReady = false;\n        this.item = options.item || {};\n        this.id = this.item.id;\n        this.owner = options.owner;\n        this.parent = options.parent;\n        this.itemsTemplate = options.itemsTemplate;\n        this.listItemHeight = options.listItemHeight;\n        this.levelHeight = options.levelHeight;\n        this.lazyLoad = !!options.lazyLoad;\n        this.selection = options.selection || {\n            allowed: false,\n            multiple: false\n        };\n        this.resource = this.item.value;\n        this.bufferSize = options.bufferSize;\n        this.cache = typeof options.cache != 'undefined' ? options.cache : false;\n        this.allowMouseDownEventPropagation = options.allowMouseDownEventPropagation;\n        this.items = {};\n        this.plugins = [];\n        var defaults = {\n            el: this.el,\n            model: this.model\n        };\n        for (var i = 0, l = options.plugins.length; i < l; i++) {\n            var plugin = options.plugins[i].constr;\n            this.plugins.push(new plugin(_.extend({}, defaults, options.plugins[i].options)));\n        }\n        this.dataLayer = this.owner.getDataLayer(this);\n        _.invoke(this.plugins, 'dataLayerObtained', this.dataLayer);\n        Panel.prototype.initialize.apply(this, arguments);\n    },\n    render: function () {\n        var model = new ListWithSelectionModelExtended({\n            bufferSize: this.bufferSize,\n            getData: this._getDataProvider(this.cache)\n        });\n        this.list = new List({\n            markerClass: '.' + this.cid,\n            eventListenerPattern: '.' + this.cid + ':not(.readonly) > p',\n            el: this.$contentContainer,\n            itemsTemplate: this.itemsTemplate,\n            listItemHeight: this.listItemHeight,\n            lazy: true,\n            selection: this.selection,\n            allowMouseDownEventPropagation: this.allowMouseDownEventPropagation,\n            model: model\n        });\n        this.list.on('render:data', _.bind(listRendered, this));\n        this.list.on('listRenderError', _.bind(listRenderError, this));\n        this.list.on('selection:change', _.bind(itemsSelected, this));\n        this.list.on('item:dblclick', _.bind(itemsDblClicked, this));\n        if (this.lazyLoad) {\n            this.on('open', this._onOpen, this);\n        } else {\n            this.list.renderData();\n        }\n        return this;\n    },\n    _getDataProvider: function (cache) {\n        var self = this, getData = _.bind(function (obtainDataOptions) {\n                return this.obtainData(obtainDataOptions, self);\n            }, this.dataLayer), options = {};\n        if (cache) {\n            if (typeof cache === 'object') {\n                options = _.extend(options, cache);\n            }\n            options.request = options.request || getData;\n            this.dataProvider = new DataProviderWithSearchCache(options);\n            getData = this.dataProvider.getData;\n        }\n        return function (getDataOptions) {\n            getDataOptions || (getDataOptions = {\n                offset: 0,\n                limit: 100\n            });\n            getDataOptions.id = self.id;\n            return getData(_.extend({}, self.owner.context, getDataOptions), self);\n        };\n    },\n    _onOpen: function () {\n        this.$el.removeClass(this.openClass).addClass(this.loadingClass);\n        this.list.renderData();\n    },\n    setElement: function (el) {\n        var res = Panel.prototype.setElement.apply(this, arguments);\n        if (this.list) {\n            this.list.setElement(this.$contentContainer);\n            this.list.totalItems = -1;\n        }\n        _.each(this.plugins, function (plugin) {\n            plugin.setElement(el);\n        });\n        this.lazyLoad || this.list && this.list.renderData();\n        if (!this.collapsed) {\n            this.open({\n                silent: true,\n                depth: 0\n            });\n            if (this.lazyLoad) {\n                this.list.renderData();\n            }\n        }\n        return res;\n    },\n    open: function (options) {\n        itemsIterator(this, Panel.prototype.open, options, options ? options.depth : 0);\n        Panel.prototype.open.call(this, options);\n    },\n    close: function (options) {\n        Panel.prototype.close.call(this, options);\n        itemsIterator(this, Panel.prototype.close, options, options ? options.depth : undefined);\n        clearSelection(this);\n    },\n    getLevel: function (levelId) {\n        return _(this.items).reduce(function (memo, item) {\n            return memo || (item.id === levelId ? item : item.getLevel(levelId));\n        }, false);\n    },\n    refresh: function (options) {\n        if (this.listRenderError)\n            return;\n        if (this.lazyLoad && !this.collapsed || !this.lazyLoad) {\n            this.once('ready', _.bind(itemsIterator, this, this, this.refresh, options, 1));\n            this.list.model.fetch({\n                top: 0,\n                bottom: this.list.model.bufferSize,\n                force: true\n            });\n            this.list.scrollTo(0);\n        } else {\n            this.list.model.set('bufferStartIndex', undefined, { silent: true });\n            this.list.model.set('bufferEndIndex', undefined, { silent: true });\n            this.list.model.set('total', undefined, { silent: true });\n            itemsIterator(this, this.refresh, options);\n        }\n    },\n    fetch: function (options, callback) {\n        this.list.fetch(callback, options);\n    },\n    recalcConstraints: function () {\n        this.list.resize();\n    },\n    fetchVisibleData: function () {\n        this.list._fetchVisibleData();\n    },\n    resetSelection: function (options) {\n        clearSelection(this, options);\n        options && options.silent || this.trigger('selection:change', []);\n    },\n    hasItems: function () {\n        return !!this.$('> .subcontainer > .j-view-port-chunk > ul > li').length;\n    },\n    clearCache: function () {\n        _.each(this.items, function (value) {\n            value.clearCache();\n        });\n        this.dataProvider && this.dataProvider.clear();\n    },\n    remove: function () {\n        var self = this, index = -1;\n        _.forEach(_.keys(this.items), function (key) {\n            self.items[key].remove();\n        });\n        this.dataProvider && this.dataProvider.clear();\n        this.list.remove();\n        if (this.parent) {\n            var parentLevelId = this.parent.id, dataLayer = this.owner.getDataLayer(parentLevelId);\n            if (dataLayer && dataLayer.predefinedData && dataLayer.predefinedData[parentLevelId] && _.isArray(dataLayer.predefinedData[parentLevelId])) {\n                for (var i = 0; i < dataLayer.predefinedData[parentLevelId].length; i++) {\n                    if (dataLayer.predefinedData[parentLevelId][i].id === this.id) {\n                        index = i;\n                        break;\n                    }\n                }\n                if (index > -1) {\n                    dataLayer.predefinedData[parentLevelId].splice(index, 1);\n                    delete dataLayer.predefinedData[this.id];\n                }\n            }\n            delete this.parent.items[this.id];\n        }\n        Panel.prototype.remove.apply(this, arguments);\n    },\n    isReady: function () {\n        return this._isReady;\n    }\n});\nfunction listRendered() {\n    this.$el.removeClass(this.loadingClass).addClass(this.openClass);\n    _.invoke(this.plugins, 'itemsRendered', this.list.model, this.list);\n    var count = this.list.$('> .j-view-port-chunk > ul > li').addClass(this.cid).length, height = _.isFunction(this.levelHeight) ? this.levelHeight() : this.levelHeight;\n    if (height && count * this.listItemHeight > height) {\n        this.list.$el.css({\n            'height': height + 'px',\n            'overflow-y': 'auto'\n        });\n    } else {\n        this.list.$el.css({\n            'height': 'auto',\n            'overflow': 'auto'\n        });\n    }\n    this.list._calcViewPortHeight();\n    this._isReady = true;\n    this.trigger('ready', this);\n}\nfunction listRenderError(responseStatus, error) {\n    this.listRenderError = true;\n    this.trigger('listRenderError', responseStatus, error, this);\n}\nfunction itemsSelected(items) {\n    var result = [];\n    _.chain(items).keys(items).each(function (key) {\n        result.push(items[key]);\n    });\n    this.selection.multiple || clearSelection(this);\n    this.trigger('selection:change', result, this, []);\n}\nfunction itemsDblClicked(items) {\n    var result = [];\n    _.chain(items).keys(items).each(function (key) {\n        result.push(items[key]);\n    });\n    this.selection.multiple || clearSelection(this);\n    this.trigger('item:dblclick', result);\n}\nfunction isLevelToExclude(level, levelsToExclude) {\n    for (var i = 0; i < levelsToExclude.length; i++) {\n        if (levelsToExclude[i] === level)\n            return true;\n    }\n}\nfunction itemsIterator(topLevel, handler, options, depth) {\n    if (options && options.exclude && _.isArray(options.exclude) && isLevelToExclude(topLevel, options.exclude)) {\n        return;\n    }\n    if (depth === undefined || depth > 0) {\n        _.chain(topLevel.items).keys().each(function (key) {\n            if (!(options && options.exclude && _.isArray(options.exclude) && isLevelToExclude(topLevel.items[key], options.exclude))) {\n                handler.call(topLevel.items[key], options);\n            }\n            itemsIterator(topLevel.items[key], handler, options, depth === undefined ? depth : --depth);\n        });\n    }\n}\nfunction clearSelection(topLevel, options) {\n    options = options && { exclude: options.exclude };\n    itemsIterator(topLevel, function (opts) {\n        this.list.clearSelection();\n        this.list.model.selection = [];\n    }, options);\n}","export default \"<ul class=\\\"list collapsible folders\\\" style=\\\"top: {{- top}}px; position: relative;\\\">\\n\\n    <js-templateNonce></js-templateNonce>\\n    {{ _.each(items, function(item){ }}\\n    <li class=\\\"{{- item._node ? 'node closed' : 'leaf'}} {{- item.selected ? 'selected' : ''}}\\\" data-index=\\\"{{- item.index }}\\\" tabindex=\\\"-1\\\">\\n        <p class=\\\"wrap button draggable\\\" data-tooltip=\\\"{{- item.value.label }}\\\"><b class=\\\"icon\\\"></b> {{- item.value.label }} </p>\\n        <div class=\\\"subcontainer\\\" ></div>\\n    </li>\\n    {{ }) }}\\n</ul>\\n\";","/*\n * Copyright (C) 2005 - 2022 TIBCO Software Inc. All rights reserved.\n * http://www.jaspersoft.com.\n *\n * Unless you have purchased a commercial license agreement from Jaspersoft,\n * the following license terms apply:\n *\n * This program is free software: you can redistribute it and/or modify\n * it under the terms of the GNU Affero General Public License as\n * published by the Free Software Foundation, either version 3 of the\n * License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the\n * GNU Affero General Public License for more details.\n *\n * You should have received a copy of the GNU Affero General Public License\n * along with this program. If not, see <http://www.gnu.org/licenses/>.\n */\n\nimport $ from 'jquery';\nimport _ from 'underscore';\nimport Backbone from 'backbone';\nimport TreeLevel from './TreeLevel';\nimport TreeDataLayer from './TreeDataLayer';\nimport listTemplate from './template/treeLevelListTemplate.htm';\nimport levelTemplate from './template/treeLevelTemplate.htm';\n\nvar ITEM_ACTIONS = {\n    ADD: 'add',\n    UPDATE: 'update'\n};\nvar Tree = Backbone.View.extend({\n    template: _.template(levelTemplate),\n    _plugins: [],\n    el: function () {\n        return this.template();\n    },\n    constructor: function (options) {\n        options || (options = {});\n        this.defaultDataLayer = new TreeDataLayer(options);\n        this.customDataLayers = options.customDataLayers;\n        if (options.type) {\n            this._type = options.type;\n            options.type = undefined;\n        } else {\n            this._type = 'tree';\n        }\n        options.collapserSelector || (options.collapserSelector = 'b.icon:eq(0)');\n        if (options.predefinedData) {\n            this.defaultDataLayer.predefinedData = options.predefinedData;\n            options.predefinedData = undefined;\n        } else {\n            this.defaultDataLayer.predefinedData = {};\n        }\n        if (options.rootless) {\n            this.rootless = options.rootless;\n            options.rootless = undefined;\n        }\n        if (options.additionalCssClasses) {\n            this.additionalCssClasses = options.additionalCssClasses;\n            options.additionalCssClasses = undefined;\n        }\n        if (options.getDataLayer) {\n            this.getDataLayer = options.getDataLayer;\n            options.getDataLayer = undefined;\n        }\n        this._options = _.extend({\n            itemsTemplate: listTemplate,\n            plugins: this._plugins,\n            owner: this\n        }, options);\n        this.context = options.context || {};\n        for (var i = 0, l = this._plugins.length; i < l; i++) {\n            this._plugins[i].processors && (this.processors = this.processors.concat(this._plugins[i].processors));\n        }\n        Backbone.View.apply(this, arguments);\n    },\n    initialize: function (options) {\n        this.rootLevel = new TreeLevel(_.extend({}, this._options, { levelHeight: options.rootLevelHeight }, { el: this.$('li')[0] }, {\n            item: {\n                id: '/',\n                value: {\n                    id: '/',\n                    resourceType: 'folder'\n                }\n            }\n        }));\n        this.rootless && this.$el.find('ul:first').addClass('hideRoot');\n        this.additionalCssClasses && this.$el.find('ul:first').addClass(this.additionalCssClasses);\n        this.listenTo(this.rootLevel, 'ready', _.bind(addLevels, this));\n        this.listenTo(this.rootLevel, 'selection:change', _.bind(function (selection, level, visitedLevels) {\n            if (level && visitedLevels && _.isArray(visitedLevels)) {\n                this.rootLevel.selection.multiple || this.rootLevel.resetSelection({\n                    silent: true,\n                    exclude: [visitedLevels[0]]\n                });\n            }\n            this.trigger('selection:change', selection);\n        }, this));\n        this.listenTo(this.rootLevel, 'item:dblclick', _.bind(function (selection) {\n            this.trigger('item:dblclick', selection);\n        }, this));\n        for (var i = 0, l = this._plugins.length; i < l; i++) {\n            this._plugins[i].constr.treeInitialized.call(this, this._plugins[i].options);\n        }\n        this.rootLevel.render();\n        if (options.collapsed && options.lazyLoad && this.rootless) {\n            this.expand('/');\n        }\n    },\n    remove: function () {\n        for (var i = 0, l = this._plugins.length; i < l; i++) {\n            this._plugins[i].constr.treeRemoved.call(this);\n        }\n        this.rootLevel.remove();\n        Backbone.View.prototype.remove.apply(this, arguments);\n    },\n    expand: function (nodeId, options) {\n        var level = this.getLevel(nodeId);\n        level && level.open(options);\n        return this;\n    },\n    collapse: function (nodeId, options) {\n        var level = this.getLevel(nodeId);\n        level && level.close(options);\n        return this;\n    },\n    _getNodeByLevelId: function (levelId) {\n        var listContainingLevel, itemOfLevel;\n        var level = this.getLevel(levelId);\n        if (level) {\n            if (!level.parent) {\n                return null;\n            }\n            listContainingLevel = level.parent.list;\n            return {\n                node: level.item,\n                nodeElement: level.$el,\n                itsList: listContainingLevel\n            };\n        }\n        var parentLevel = false;\n        if (this._type === 'list') {\n            parentLevel = this.rootLevel;\n        } else if (this._type === 'tree') {\n            var parentPath = levelId.split('/');\n            parentPath = parentPath.slice(0, parentPath.length - 1).join('/');\n            if (parentPath === '') {\n                parentPath = '/';\n            }\n            parentLevel = this.getLevel(parentPath);\n            if (!parentLevel) {\n                return null;\n            }\n        }\n        if (!parentLevel) {\n            return null;\n        }\n        listContainingLevel = parentLevel.list;\n        itemOfLevel = _.find(listContainingLevel.model.get('items'), function (item) {\n            return item.id === levelId;\n        });\n        if (!itemOfLevel) {\n            return null;\n        }\n        return {\n            node: itemOfLevel,\n            nodeElement: listContainingLevel.$el.find('li.leaf.selected'),\n            itsList: listContainingLevel\n        };\n    },\n    select: function (levelId) {\n        var nodeInfo = this._getNodeByLevelId(levelId);\n        if (!nodeInfo) {\n            return;\n        }\n        nodeInfo.itsList.model.clearSelection().addValueToSelection(nodeInfo.node.value, nodeInfo.node.index);\n        this.trigger('selection:change', nodeInfo.itsList.getValue());\n    },\n    deselect: function (nodeId) {\n    },\n    addItem: function (parentId, itemData) {\n        var level = this.getLevel(parentId), action = ITEM_ACTIONS.ADD;\n        level && this._getNodeItems(parentId, level, itemData, action);\n        return this;\n    },\n    updateItem: function (itemData, parentId) {\n        var level = parentId ? this.getLevel(parentId) : this.rootLevel;\n        level && this._getNodeItems(level.id, level, itemData);\n        return this;\n    },\n    resetSelection: function (options) {\n        this.rootLevel.list.clearSelection();\n        this.rootLevel.list.model.selection = [];\n        this.rootLevel.resetSelection(options);\n        return this;\n    },\n    refresh: function (context) {\n        context && (this.context = context);\n        this.rootLevel.refresh();\n    },\n    recalcConstraints: function () {\n        this.rootLevel.recalcConstraints();\n    },\n    fetchVisibleData: function () {\n        this.rootLevel.fetchVisibleData();\n    },\n    clearCache: function () {\n        this.rootLevel.clearCache();\n    },\n    getLevel: function (levelId) {\n        return this.rootLevel.id === levelId ? this.rootLevel : this.rootLevel.getLevel(levelId);\n    },\n    getDataLayer: function (level) {\n        return this.customDataLayers && this.customDataLayers[level.id] ? this.customDataLayers[level.id] : this.defaultDataLayer;\n    },\n    _addItem: function (childItems, parentId, itemData) {\n        !_.findWhere(childItems, { id: itemData.id }) && childItems.push(itemData);\n        return childItems;\n    },\n    _updateItem: function (childItems, itemData) {\n        _.each(childItems, function (item) {\n            item.id === itemData.id && _.extend(item, itemData);\n        }, this);\n        return childItems;\n    },\n    _getNodeItems: function (parentId, level, itemData, action) {\n        var dataLayer = this.getDataLayer(level), childItems = level.list.model.get('items') ? level.list.model.get('items') : [], updatedChildItems;\n        dataLayer.predefinedData = dataLayer.predefinedData || {};\n        updatedChildItems = action === ITEM_ACTIONS.ADD ? this._addItem(childItems, parentId, itemData) : this._updateItem(childItems, itemData);\n        dataLayer.predefinedData[parentId] = _.sortBy(updatedChildItems, 'label');\n        level.fetch({\n            force: true,\n            keepPosition: true\n        });\n    },\n    _selectTreeNode: function (pathToSelect, $scrollContainer) {\n        if (!_.isString(pathToSelect) || pathToSelect === '') {\n            return;\n        }\n        var onceRootNodeIsReady = _.bind(function () {\n            var selectItemAfterFolderTreeIsOpened = _.bind(function () {\n                var folderToSelect = pathToSelect, levelIdToSelect = this.getLevelId(folderToSelect);\n                this.expand(levelIdToSelect);\n                this.select(levelIdToSelect);\n                if (this._type === 'list') {\n                    this.rootLevel.on('ready', onceRootNodeIsReady);\n                } else if (this._type === 'tree') {\n                    if ($scrollContainer && $scrollContainer.length) {\n                        var $tree = this.$el, nodeInfo = this._getNodeByLevelId(levelIdToSelect);\n                        if (!nodeInfo) {\n                            return;\n                        }\n                        var $selectedItem = nodeInfo.nodeElement;\n                        if (!$selectedItem) {\n                            return;\n                        }\n                        var scrollTo = $selectedItem.offset().top - $tree.offset().top - $scrollContainer.height() / 2 + $selectedItem.height() / 2;\n                        $scrollContainer.scrollTop(scrollTo);\n                    }\n                }\n            }, this);\n            if (pathToSelect === '/' || pathToSelect === '/public' || this._type === 'list') {\n                selectItemAfterFolderTreeIsOpened();\n            } else {\n                var tmp = pathToSelect.replace(/\\/$/, '');\n                var pathToOpen = tmp.substr(0, tmp.lastIndexOf('/'));\n                pathToOpen = pathToOpen || '/';\n                var dfd = new $.Deferred();\n                this._openPath(pathToOpen, dfd, 0);\n                dfd.done(selectItemAfterFolderTreeIsOpened);\n            }\n        }, this);\n        if (this.rootLevel.isReady()) {\n            onceRootNodeIsReady();\n        } else {\n            this.rootLevel.on('ready', onceRootNodeIsReady);\n        }\n    },\n    _openPath: function (path, dfd, index) {\n        if (!path) {\n            return dfd.resolve();\n        }\n        var self = this, pathFragmentToOpen, splitPath, level, levelIdToOpen;\n        if (path === '/') {\n            splitPath = ['/'];\n        } else {\n            splitPath = path.split('/');\n            splitPath[0] = '/';\n        }\n        if (splitPath[0] === '/' && splitPath[1] === 'public') {\n            splitPath = _.union(['/public'], _.rest(splitPath, 2));\n        }\n        index = index || 0;\n        if (index === splitPath.length) {\n            return dfd.resolve();\n        }\n        pathFragmentToOpen = _.first(splitPath, index + 1).join('/');\n        pathFragmentToOpen = pathFragmentToOpen.replace(/\\/\\//g, '/');\n        levelIdToOpen = this.getLevelId(pathFragmentToOpen);\n        level = this.getLevel(levelIdToOpen);\n        if (level) {\n            if (level.collapsed) {\n                level.once('ready', function () {\n                    self._openPath(path, dfd, index + 1);\n                });\n                level.open();\n            } else {\n                this._openPath(path, dfd, index + 1);\n            }\n        }\n    },\n    getLevelId: function (repositoryPath) {\n        var levelId = '';\n        var nodesOnTop = ['/public'];\n        if (repositoryPath === '/' || repositoryPath === '/root') {\n            levelId = '/root';\n        } else {\n            var topLevelCase = false;\n            for (var i = 0; i < nodesOnTop.length; i++) {\n                if (repositoryPath.indexOf(nodesOnTop[i]) === 0) {\n                    topLevelCase = true;\n                    break;\n                }\n            }\n            if (topLevelCase) {\n                levelId = repositoryPath;\n            } else {\n                levelId = '/root' + '/' + repositoryPath.substr(1);\n            }\n        }\n        return levelId;\n    }\n}, {\n    instance: function (options) {\n        return new this(options);\n    }\n});\nexport default {\n    use: function (plugin, options) {\n        return function (constructor) {\n            return {\n                use: function (constructorPlugin, constructorOptions) {\n                    constructor.prototype._plugins.push({\n                        constr: constructorPlugin,\n                        options: constructorOptions\n                    });\n                    return this;\n                },\n                create: function () {\n                    return constructor;\n                }\n            };\n        }(Tree.extend({\n            _plugins: [{\n                constr: plugin,\n                options: options\n            }]\n        }));\n    },\n    create: function () {\n        return Tree;\n    }\n};\nfunction addLevels(parentLevel) {\n    var items = parentLevel.list.model.get('items'), self = this;\n    items = _.where(items, { _node: true });\n    parentLevel.$('.node').each(function (index, element) {\n        var levelName = items[index].id;\n        if (parentLevel.items[levelName]) {\n            parentLevel.items[levelName].setElement(element);\n        } else {\n            parentLevel.items[levelName] = new TreeLevel(_.extend({}, self._options, {\n                el: element,\n                item: items[index],\n                parent: parentLevel\n            }));\n            self.listenTo(parentLevel.items[levelName], 'listRenderError', _.bind(function (responseStatus, error, level) {\n                this.trigger('levelRenderError', responseStatus, error, level);\n            }, self));\n            parentLevel.listenTo(parentLevel.items[levelName], 'ready', _.bind(addLevels, self));\n            parentLevel.listenTo(parentLevel.items[levelName], 'selection:change', function (selection, level, visitedLevels) {\n                level && visitedLevels.push(level);\n                parentLevel.list.model.clearSelection();\n                parentLevel.trigger('selection:change', selection, parentLevel, visitedLevels);\n            });\n            parentLevel.listenTo(parentLevel.items[levelName], 'item:dblclick', function (selection) {\n                parentLevel.list.model.clearSelection();\n                parentLevel.trigger('item:dblclick', selection);\n            });\n            parentLevel.items[levelName].render();\n        }\n    }).length && parentLevel.$('.j-view-port-chunk').css({ height: 'auto' });\n}","export default \"<div>\\n\\n    <js-templateNonce></js-templateNonce>\\n    <ul class=\\\"list collapsible folders\\\">\\n        <li class=\\\"node\\\">\\n            <p class=\\\"wrap button\\\">\\n                <b class=\\\"icon\\\" id=\\\"handler2\\\" title=\\\"\\\"></b>root\\n            </p>\\n            <div class=\\\"subcontainer\\\"></div>\\n        </li>\\n    </ul>\\n</div>\";","/*\n * Copyright (C) 2005 - 2022 TIBCO Software Inc. All rights reserved.\n * http://www.jaspersoft.com.\n *\n * Unless you have purchased a commercial license agreement from Jaspersoft,\n * the following license terms apply:\n *\n * This program is free software: you can redistribute it and/or modify\n * it under the terms of the GNU Affero General Public License as\n * published by the Free Software Foundation, either version 3 of the\n * License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the\n * GNU Affero General Public License for more details.\n *\n * You should have received a copy of the GNU Affero General Public License\n * along with this program. If not, see <http://www.gnu.org/licenses/>.\n */\n\nimport _ from 'underscore';\nimport $ from 'jquery';\nimport ClassUtil from '../../util/classUtil';\n\nimport request from '../../transport/request';\n\nexport default ClassUtil.extend({\n    constructor: function (options) {\n        this.requestType = options.requestType ? options.requestType : 'GET';\n        options.getDataUri && (this.getDataUri = options.getDataUri);\n        this.getDataUri || (this.getDataUri = _.template(options.dataUriTemplate));\n        options.getDataArray && (this.getDataArray = options.getDataArray);\n        options.getDataSize && (this.getDataSize = options.getDataSize);\n        options.extractId && (this.extractId = options.extractId);\n        this.levelDataId = options.levelDataId ? options.levelDataId : 'id';\n        this.processors = options.processors || [];\n        this.initialize(options);\n    },\n    initialize: function (options) {\n    },\n    extractId: function (item) {\n        return item[this.levelDataId];\n    },\n    getDataSize: function (data, status, xhr) {\n        return this.getDataArray(data, status, xhr).length;\n    },\n    getDataArray: function (data, status, xhr) {\n        return data;\n    },\n    obtainData: function (options, level) {\n        var result = new $.Deferred(), self = this;\n        if (this.predefinedData && this.predefinedData[options.id]) {\n            result.resolve({\n                total: this.predefinedData[options.id].length,\n                data: this.predefinedData[options.id]\n            });\n        } else {\n            request({\n                type: this.requestType,\n                dataType: this.dataType || 'json',\n                headers: {\n                    Accept: this.accept || 'application/json',\n                    'Content-Type': this.contentType || undefined\n                },\n                cache: false,\n                data: this.data || undefined,\n                url: this.getDataUri(options)\n            }).done(function () {\n                var data = arguments[0];\n                self.dataSize = self.getDataSize.call(self, data, options, arguments[2]);\n                result.resolve({\n                    total: self.dataSize,\n                    data: process.call(self, self.getDataArray.call(self, data, options, arguments[2]), options)\n                });\n            }).fail(function (xhr) {\n                result.reject(xhr.status, xhr.responseText);\n            });\n        }\n        return result;\n    },\n    _process: process\n});\nfunction process(data, options) {\n    return invokeProcessors.call(this, changeDataStructure.call(this, data), options);\n}\nfunction changeDataStructure(data) {\n    for (var i = 0, l = data.length; i < l; i++) {\n        data[i] = {\n            id: this.extractId(data[i]),\n            value: data[i]\n        };\n    }\n    return data;\n}\nfunction invokeProcessors(data, options) {\n    var processedData, processedItem;\n    if (this.processors && this.processors.length) {\n        for (var i = 0, l = this.processors.length; i < l; i++) {\n            processedData = [];\n            for (var j = 0, le = data.length; j < le; j++) {\n                processedItem = this.processors[i].processItem(data[j], options, this);\n                processedItem && processedData.push(processedItem);\n            }\n            data = processedData;\n        }\n    }\n    return data;\n}","/*\n * Copyright (C) 2005 - 2022 TIBCO Software Inc. All rights reserved.\n * http://www.jaspersoft.com.\n *\n * Unless you have purchased a commercial license agreement from Jaspersoft,\n * the following license terms apply:\n *\n * This program is free software: you can redistribute it and/or modify\n * it under the terms of the GNU Affero General Public License as\n * published by the Free Software Foundation, either version 3 of the\n * License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the\n * GNU Affero General Public License for more details.\n *\n * You should have received a copy of the GNU Affero General Public License\n * along with this program. If not, see <http://www.gnu.org/licenses/>.\n */\n\nimport TreePlugin from './TreePlugin';\nimport _ from 'underscore';\nimport Tooltip from '../../tooltip/Tooltip';\nexport default TreePlugin.extend({\n    initialize: function (options) {\n        this.tooltip = Tooltip.attachTo(options.attachTo, _.omit(options, 'el'));\n        this.listensToList = false;\n        TreePlugin.prototype.initialize.apply(this, arguments);\n    },\n    itemsRendered: function (model, list) {\n        var self = this;\n        if (!this.listensToList) {\n            this.listensToList = true;\n            this.listenTo(list, 'list:item:mouseover', function (item, e) {\n                self.tooltip.show(item);\n            });\n            this.listenTo(list, 'list:item:mouseout', function () {\n                self.tooltip.hide();\n            });\n        }\n    },\n    remove: function () {\n        Tooltip.detachFrom(this.$el);\n        this.tooltip.remove();\n        TreePlugin.prototype.remove.apply(this, arguments);\n    }\n});","/*\n * Copyright (C) 2005 - 2022 TIBCO Software Inc. All rights reserved.\n * http://www.jaspersoft.com.\n *\n * Unless you have purchased a commercial license agreement from Jaspersoft,\n * the following license terms apply:\n *\n * This program is free software: you can redistribute it and/or modify\n * it under the terms of the GNU Affero General Public License as\n * published by the Free Software Foundation, either version 3 of the\n * License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the\n * GNU Affero General Public License for more details.\n *\n * You should have received a copy of the GNU Affero General Public License\n * along with this program. If not, see <http://www.gnu.org/licenses/>.\n */\n\nimport Backbone from 'backbone';\nexport default Backbone.View.extend({\n    dataLayerObtained: function () {\n    },\n    itemsRendered: function () {\n    }\n}, {\n    processors: null,\n    treeInitialized: function () {\n    },\n    treeRemoved: function () {\n    }\n});","/*\n * Copyright (C) 2005 - 2022 TIBCO Software Inc. All rights reserved.\n * http://www.jaspersoft.com.\n *\n * Unless you have purchased a commercial license agreement from Jaspersoft,\n * the following license terms apply:\n *\n * This program is free software: you can redistribute it and/or modify\n * it under the terms of the GNU Affero General Public License as\n * published by the Free Software Foundation, either version 3 of the\n * License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the\n * GNU Affero General Public License for more details.\n *\n * You should have received a copy of the GNU Affero General Public License\n * along with this program. If not, see <http://www.gnu.org/licenses/>.\n */\n\nimport Validation from 'backbone-validation';\nimport _ from 'underscore';\nimport NumberUtils from '../util/parse/NumberUtils';\n\nvar numberUtils = new NumberUtils();\nvar originalValidate = Validation.mixin.validate;\n\nValidation.mixin.validate = function (attrs, options) {\n    options || (options = {});\n    var self = this;\n    return originalValidate.call(this, attrs, _.extend({\n        valid: function (view, attr) {\n            self.trigger('validate:' + attr, self, attr);\n        },\n        invalid: function (view, attr, error) {\n            self.trigger('validate:' + attr, self, attr, error);\n        }\n    }, options));\n};\n_.extend(Validation.validators, {\n    doesNotContainSymbols: function (value, attr, forbiddenSymbols) {\n        if (new RegExp('[' + forbiddenSymbols + ']', 'g').test(value)) {\n            return 'Attribute \\'' + attr + '\\' contains forbidden symbols';\n        }\n    },\n    integerNumber: function (value) {\n        if (!numberUtils.isNumberInt(value)) {\n            return 'Value is not a valid integer number';\n        }\n    },\n    type: function (value, attr, types) {\n        function typeFn(type) {\n            var fn;\n            if ('string' == type) {\n                fn = _.isString;\n            } else if ('number' === type) {\n                fn = _.isNumber;\n            } else if ('object' === type) {\n                fn = _.isObject;\n            } else if ('boolean' === type) {\n                fn = _.isBoolean;\n            } else if ('null' === type) {\n                fn = _.isNull;\n            } else if ('undefined' === type) {\n                fn = _.isUndefined;\n            }\n            return fn;\n        }\n        if (!_.isArray(types)) {\n            types = [types];\n        }\n        var isValueOneOfTypes = types.some(function (type) {\n            return typeFn(type)(value);\n        });\n        if (!isValueOneOfTypes) {\n            return '\\'{attr}\\' is not {type}'.replace('{attr}', attr).replace('\\'{type}\\'', types.join(' '));\n        }\n    },\n    url: function (value) {\n        if (!/(http|https):\\/\\/.*\\..*./.test(value)) {\n            return 'Value is not a valid url';\n        }\n    },\n    hexColor: function (value) {\n        if (!/^#[0-9a-f]{3,6}$/i.test(value)) {\n            return 'Value is not a valid hex color';\n        }\n    },\n    xRegExpPattern: function (value, attr, customValue, model) {\n        if (!customValue.test(value)) {\n            return 'Value does not match pattern';\n        }\n    },\n    startsWithLetter: function (value, attr, customValue, model) {\n        if (!value.substr(0, 1).match(/[A-Za-z]/)) {\n            return 'Value should start with letter';\n        }\n    },\n    containsOnlyWordCharacters: function (value, attr, customValue, model) {\n        if (value.search(/\\W/) >= 0) {\n            return 'Value should contain only word characters (letters, digits and underscore)';\n        }\n    },\n    arrayMinLength: function (value, attr, minLength, model) {\n        if (_.isArray(value) && value.length < minLength) {\n            return 'Array length is less than ' + minLength;\n        }\n    }\n});\nexport default Validation;","export default \"<p class='alertText'>\\n\\n    <js-templateNonce></js-templateNonce>\\n    {{- message }}\\n</p>\";","export default \"<div class=\\\"{{- cssClasses }}\\\" style=\\\"position: absolute; z-index: 100000;\\\">\\n\\n    <js-templateNonce></js-templateNonce>\\n    <div class=\\\"content\\\">\\n        <div class=\\\"body\\\"></div>\\n    </div>\\n</div>\\n\";","\n        import settingsStore from 'settingsStore';\n        settingsStore['treeComponent'] = settingsStore['treeComponent'] || {};\n        export default settingsStore['treeComponent'];\n    "],"sourceRoot":""}