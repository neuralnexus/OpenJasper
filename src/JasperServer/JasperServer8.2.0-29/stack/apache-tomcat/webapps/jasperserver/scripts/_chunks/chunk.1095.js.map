{"version":3,"sources":["webpack://jrs-ui/./src/components/components.templateengine.js","webpack://jrs-ui/./src/addResource/jasperReport/addJasperReportResourcesAndControls.common.js","webpack://jrs-ui/./src/namespace/namespace.js"],"names":["jQuery","_","jaspersoft","render","templateText","model","type","template","this","STD_PLACEHOLDERS","result","String","each","val","index","regExp","RegExp","replace","renderUrl","encode","url","encodeURI","getTemplateText","templateId","html","createTemplate","length","createTemplateFromText","createTemplateSection","section","concreteSectionRegexpPattern","regexp","templateSectionText","match","resource","jrsConfigs","resourceReport","isIPad","container","nonSuggestedResources","canChangeResources","nonSuggestedResourceTemplate","resourcesContainer","templateEngine","el","find","on","name","append","suggestedResources","suggestedResourceTemplate","fileType","located","addSuggestedResourcesSection","addResourceModel","addResourceTemplate","addAddResourceSection","controlsContainer","nonSuggestedControls","nonSuggestedControlTemplate","local","referenceURI","addNonSuggestedControlsSection","suggestedControls","suggestedControlTemplate","addSuggestedControlsSection","addControlModel","addControlTemplate","addAddControlSection","JRS","vars","element_scrolled","ajax_in_progress","current_flow","contextPath","__jrsConfigs__","i18n","isEncryptionOn","isProVersion","components","Mocks","Export","configs","TIMEOUT","DELAY","window","localContext","calendar","bundledCalendarFormat","bundledCalendarTimeFormat"],"mappings":"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","file":"_chunks/chunk.1095.js","sourcesContent":["/*\n * Copyright (C) 2005 - 2022 TIBCO Software Inc. All rights reserved.\n * http://www.jaspersoft.com.\n *\n * Unless you have purchased a commercial license agreement from Jaspersoft,\n * the following license terms apply:\n *\n * This program is free software: you can redistribute it and/or modify\n * it under the terms of the GNU Affero General Public License as\n * published by the Free Software Foundation, either version 3 of the\n * License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the\n * GNU Affero General Public License for more details.\n *\n * You should have received a copy of the GNU Affero General Public License\n * along with this program. If not, see <http://www.gnu.org/licenses/>.\n */\n\n\n/**\n * @author: inesterenko\n * @version: $Id$\n */\nimport jQuery from \"jquery\";\nimport _ from \"underscore\";\nimport {jaspersoft} from \"../namespace/namespace\";\n\n//TODO: this module from controls.core.js, remove it from controls.core.js\njaspersoft.components.templateEngine = (function(jQuery, _){\n\n    // Provide functionality to get templates\n\n    return {\n\n        // Populate template with data\n        render:function (templateText, model, type) {\n            if (!type){\n                //Mustache by default\n                return _.template(templateText)(model);\n            }else if(type == this.STD_PLACEHOLDERS){\n                var result = String(templateText);\n                _.each(model,  function(val, index){\n                    var regExp = new RegExp(\"\\\\{\"+index+\"\\\\}\");\n                    result = result.replace(regExp, val);\n                });\n                return result;\n            }\n        },\n        renderUrl:function(templateText, model, encode){\n            var url = _.template(templateText)(model);\n            if(encode){\n                url = encodeURI(url);\n            }\n            return url;\n        },\n        // Return template's text\n        getTemplateText:function (templateId) {\n            var scriptTag = jQuery(\"#\" + templateId);\n            return scriptTag.html();\n        },\n\n        // Return template's function for given id\n        createTemplate:function (templateId) {\n            var scriptTag = jQuery(\"#\" + templateId);\n            var templateText = scriptTag.html();\n\n            if (templateText && templateText.length > 0) {\n                return function (model) {\n                    return _.template(templateText)(model);\n                };\n            }\n        },\n\n        createTemplateFromText: function(templateText){\n            if (templateText && templateText.length > 0) {\n                return function (model) {\n                    return _.template(templateText)(model);\n                };\n            }\n        },\n\n        // Cut template's text chunk and wrap with a function\n        createTemplateSection:function (section, templateId) {\n            var regexpTemplate = '<!--#val-->(\\\\s|\\\\S)*<!--/val-->';\n            var concreteSectionRegexpPattern = regexpTemplate.replace(/val/g, section);\n            var regexp = new RegExp(concreteSectionRegexpPattern, \"g\");\n            var templateText = this.getTemplateText(templateId);\n            var templateSectionText = templateText.match(regexp)[0];\n            return  function (model) {\n                return _.template(templateSectionText)(model);\n            };\n        },\n\n        STD_PLACEHOLDERS : \"std_placeholder\"\n\n    };\n\n})(\n    jQuery,\n    _\n);\n\nexport default jaspersoft.components.templateEngine;\n","/*\n * Copyright (C) 2005 - 2019 TIBCO Software Inc. All rights reserved.\n * http://www.jaspersoft.com.\n *\n * Unless you have purchased a commercial license agreement from Jaspersoft,\n * the following license terms apply:\n *\n * This program is free software: you can redistribute it and/or modify\n * it under the terms of the GNU Affero General Public License as\n * published by the Free Software Foundation, either version 3 of the\n * License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the\n * GNU Affero General Public License for more details.\n *\n * You should have received a copy of the GNU Affero General Public License\n * along with this program. If not, see <http://www.gnu.org/licenses/>.\n */\n\n\n/**\n * @version: $Id$\n */\n\nimport _ from 'underscore';\nimport jrsConfigs from 'js-sdk/src/jrs.configs';\nimport resource from '../../resource/resource.base';\nimport resourceReport from '../../resource/resource.report';\nimport templateEngine from '../../components/components.templateengine';\nimport jQuery from 'jquery';\nimport {isIPad} from \"../../util/utils.common\";\n\n_.extend(resource.messages, jrsConfigs.addJasperReport.resource.messages);\n\nresourceReport.initialize();\nisIPad() && resource.initSwipeScroll();\n\nvar resourcesContainer = jQuery(jQuery(\"#resources ul\")[0]);\n\naddNonSuggestedResourcesSection(resourcesContainer, jrsConfigs.addJasperReport.nonSuggestedResources, jrsConfigs.addJasperReport.canChangeResources);\naddSuggestedResourcesSection(resourcesContainer, jrsConfigs.addJasperReport.suggestedResources);\naddAddResourceSection(resourcesContainer, {canChangeResources: jrsConfigs.addJasperReport.canChangeResources});\n\nvar controlsContainer = jQuery(jQuery(\"#controls ul\")[0]);\n\naddNonSuggestedControlsSection(controlsContainer, jrsConfigs.addJasperReport.nonSuggestedControls, jrsConfigs.addJasperReport.canChangeResources);\naddSuggestedControlsSection(controlsContainer, jrsConfigs.addJasperReport.suggestedControls);\naddAddControlSection(controlsContainer, {canChangeResources: jrsConfigs.addJasperReport.canChangeResources});\n\n\nfunction addAddResourceSection(container, addResourceModel) {\n    var addResourceTemplate = templateEngine.getTemplateText(\"addJasperReportAddResourceTemplate\");\n\n    var el = jQuery(templateEngine.render(addResourceTemplate, addResourceModel));\n\n    el.find(\"a.launcher\").on(\"click\", function() {\n        resourceReport.addResource();\n        return false;\n    });\n\n    container.append(el);\n}\n\nfunction addAddControlSection(container, addControlModel) {\n    var addControlTemplate = templateEngine.getTemplateText(\"addJasperReportAddControlTemplate\");\n\n    var el = jQuery(templateEngine.render(addControlTemplate, addControlModel));\n\n    el.find(\"a.launcher\").on(\"click\", function() {\n        resourceReport.addControl();\n        return false;\n    });\n\n    container.append(el);\n}\n\nfunction addSuggestedResourcesSection(container, suggestedResources) {\n    var suggestedResourceTemplate = templateEngine.getTemplateText(\"addJasperReportSuggestedResourceTemplate\");\n\n    _.each(suggestedResources, function(model) {\n        var el = jQuery(templateEngine.render(suggestedResourceTemplate, _.defaults({}, model, {\n            fileType: \"\"\n        })));\n\n        el.find(\"a.emphasis\").on(\"click\", function() {\n            resourceReport.editResource(model.name);\n            return false;\n        });\n\n        if (!model.located) {\n            el.find(\"a.launcher\").on(\"click\", function() {\n                resourceReport.editResource(model.name);\n                return false;\n            });\n        }\n\n        container.append(el);\n    });\n}\n\nfunction addSuggestedControlsSection(container, suggestedControls) {\n    var suggestedControlTemplate = templateEngine.getTemplateText(\"addJasperReportSuggestedControlTemplate\");\n\n    _.each(suggestedControls, function(model) {\n        var el = jQuery(templateEngine.render(suggestedControlTemplate, model));\n\n        el.find(\"a.emphasis\").on(\"click\", function() {\n            resourceReport.editControl(model.name);\n            return false;\n        });\n\n        if (model.located) {\n            el.find(\"a.launcher\").on(\"click\", function() {\n                resourceReport.removeControl(model.name);\n                return false;\n            });\n        }\n\n        container.append(el);\n    });\n}\n\nfunction addNonSuggestedResourcesSection(container, nonSuggestedResources, canChangeResources) {\n    var nonSuggestedResourceTemplate = templateEngine.getTemplateText(\"addJasperReportNonSuggestedResourceTemplate\");\n\n    _.each(nonSuggestedResources, function(model) {\n        var el = jQuery(templateEngine.render(nonSuggestedResourceTemplate, model));\n\n        if (canChangeResources) {\n            el.find(\"a.emphasis\").on(\"click\", function() {\n                resourceReport.editResource(model.name);\n                return false;\n            });\n            el.find(\"a.launcher\").on(\"click\", function() {\n                resourceReport.removeResource(model.name);\n                return false;\n            });\n        }\n\n        container.append(el);\n    });\n}\n\nfunction addNonSuggestedControlsSection(container, nonSuggestedControls, canChangeResources) {\n    var nonSuggestedControlTemplate = templateEngine.getTemplateText(\"addJasperReportNonSuggestedControlTemplate\");\n\n    _.each(nonSuggestedControls, function(model) {\n        var el = jQuery(templateEngine.render(nonSuggestedControlTemplate, model));\n\n        if (canChangeResources) {\n            el.find(\"a.emphasis\").on(\"click\", function() {\n                if (model.local) {\n                    resourceReport.editControl(model.name);\n                } else {\n                    resourceReport.editControl(model.referenceURI);\n                }\n                return false;\n            });\n\n            el.find(\"a.launcher\").on(\"click\", function() {\n                if (model.local) {\n                    resourceReport.removeControl(model.name);\n                } else {\n                    resourceReport.removeControl(model.referenceURI);\n                }\n                return false;\n            });\n        }\n\n        container.append(el);\n    });\n}\n","/*\n * Copyright (C) 2005 - 2022 TIBCO Software Inc. All rights reserved.\n * http://www.jaspersoft.com.\n *\n * Unless you have purchased a commercial license agreement from Jaspersoft,\n * the following license terms apply:\n *\n * This program is free software: you can redistribute it and/or modify\n * it under the terms of the GNU Affero General Public License as\n * published by the Free Software Foundation, either version 3 of the\n * License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the\n * GNU Affero General Public License for more details.\n *\n * You should have received a copy of the GNU Affero General Public License\n * along with this program. If not, see <http://www.gnu.org/licenses/>.\n */\n/**\n * @version: $Id$\n */\n/* global __jrsConfigs__ */\n//JasperServer namespace  mess\n\n/*\n *  One of Jasperserver namespaces.\n */\nvar JRS = {\n    vars: {\n        element_scrolled: false,\n        ajax_in_progress: false,\n        current_flow: null,\n        contextPath: __jrsConfigs__.contextPath\n    },\n    i18n: {}\n};\nvar Calendar = {};\nif (typeof isEncryptionOn === 'undefined') {\n    var isEncryptionOn = false;\n}\nfunction isProVersion() {\n    return __jrsConfigs__.isProVersion;\n}\nvar jaspersoft = {\n    components: {},\n    i18n: {}\n};\nif (typeof JRS == 'undefined') {\n    JRS = { Mocks: {} };\n}\nif (typeof JRS.vars == 'undefined') {\n    JRS.vars = {\n        element_scrolled: false,\n        ajax_in_progress: false,\n        current_flow: null\n    };\n}    //TODO: move closer to Import/Export\n//TODO: move closer to Import/Export\nif (typeof JRS.Export == 'undefined') {\n    JRS.Export = {\n        i18n: {\n            'file.name.empty': 'export.file.name.empty',\n            'file.name.too.long': 'export.file.name.too.long',\n            'file.name.not.valid': 'export.file.name.not.valid',\n            'export.select.users': 'export.select.users',\n            'export.select.roles': 'export.select.roles',\n            'export.session.expired': 'export.session.expired',\n            'error.timeout': 'export.file.name.empty'\n        },\n        configs: {\n            TIMEOUT: 1200000,\n            DELAY: 3000\n        }\n    };\n}\nif (typeof window.localContext == 'undefined') {\n    window.localContext = {};\n}    //TODO: move to common module\n//TODO: move to common module\nif (__jrsConfigs__.calendar) {\n    JRS.i18n['bundledCalendarFormat'] = __jrsConfigs__.calendar.i18n.bundledCalendarFormat;\n    JRS.i18n['bundledCalendarTimeFormat'] = __jrsConfigs__.calendar.i18n.bundledCalendarTimeFormat;\n}\n\nwindow.JRS = JRS;\nwindow.jaspersoft = jaspersoft;\nwindow.isProVersion = isProVersion;\n\nexport {jaspersoft, JRS, isProVersion};"],"sourceRoot":""}