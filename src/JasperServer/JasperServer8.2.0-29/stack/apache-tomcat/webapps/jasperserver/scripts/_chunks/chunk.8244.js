(self.webpackChunkjrs_ui=self.webpackChunkjrs_ui||[]).push([[8244],{9231:(t,e,i)=>{"use strict";i.d(e,{Z:()=>r});var n=i(33806),_=i(43852),o=i(72157),s=i.n(o),a=function(t){this._id=t.id,this._dom=s()("#"+this._id)[0],this._enabled=!0,this._process(),this._assignHandlers()};a.addMethod("_process",(function(){this._input=s()(this._dom).find("input")[0],this._clearButton=s()(this._dom).find(".button.searchClear")[0],this._searchButton=s()(this._dom).find(".button.search")[0]})),a.addMethod("_assignHandlers",(function(){s()(this._dom).on("submit",(function(t){Event.stop(t)})),s()(this._input).on("keypress",this._keyPressHandler.bindAsEventListener(this)),s()(this._clearButton).on("click",this._clearHandler.bindAsEventListener(this)),s()(this._searchButton).on("click",this._searchHandler.bindAsEventListener(this))})),a.addMethod("_keyPressHandler",(function(t){this._enabled&&Event.KEY_RETURN==t.keyCode&&(this._doSearch(),Event.stop(t))})),a.addMethod("_updateClearButtonVisibility",(function(){this.getText().blank()?s()(this._clearButton).removeClass(n.Z.UP_CLASS):s()(this._clearButton).addClass(n.Z.UP_CLASS)})),a.addMethod("_clearHandler",(function(){this._enabled&&(this.setText(""),this._doSearch())})),a.addMethod("_searchHandler",(function(){this._enabled&&this._doSearch()})),a.addMethod("getText",(function(){return this._input.getValue()})),a.addMethod("setText",(function(t){this._input.setValue(t),this._updateClearButtonVisibility()})),a.addMethod("enable",(function(){_.Z.enable(this._clearButton),_.Z.enable(this._searchButton),s()(this._input).attr(n.Z.READONLY_ATTR_NAME,null),s()(this._dom).attr(n.Z.DISABLED_ATTR_NAME,null),this._enabled=!0})),a.addMethod("disable",(function(){_.Z.disable(this._clearButton),_.Z.disable(this._searchButton),s()(this._input).attr(n.Z.READONLY_ATTR_NAME,n.Z.READONLY_ATTR_NAME),s()(this._dom).attr(n.Z.DISABLED_ATTR_NAME,n.Z.DISABLED_ATTR_NAME),this._enabled=!1})),a.addMethod("_doSearch",(function(t){this._updateClearButtonVisibility(),this.onSearch(this.getText())})),a.addMethod("onSearch",(function(t){}));const r=a},40574:(t,e,i)=>{"use strict";i.d(e,{Z:()=>r});var n=i(72157),_=i.n(n),o=i(64155),s=i(43852),a=i(7923);a.Z.initialize=function(t){a.Z.actionMap=t,_()(".toolbar").on("mouseup mouseover mouseout","button",(function(t){_()(this).prop("disabled")||a.Z["mouse"+t.type.substring(5,6).toUpperCase()+t.type.substring(6)+"Handler"](t,this)})),(0,o.vU$)()&&_()(".toolbar li").each((function(t,e){_()(e).css("padding","0 2px")}))},a.Z.mouseUpHandler=function(t,e){var i=e.className.indexOf("capsule")>=0?a.Z.actionMap[e.id]:null;i&&((0,o.qO$)(i)(t),t.stopPropagation())},a.Z.mouseOverHandler=function(t,e){e.className.indexOf("capsule")>=0&&e.className.indexOf("mutton")>=0&&!s.Z.isDisabled(e)&&a.Z.showButtonMenu(t.originalEvent,e)},a.Z.mouseOutHandler=function(t,e){};const r=a.Z},7923:(t,e,i)=>{"use strict";i.d(e,{Z:()=>a});var n=i(72157),_=i.n(n),o=i(72086),s=i(43852);const a={UP:"up",DOWN:"down",OVER:"over",DISABLED:"disabled",PRESSED:"pressed",CONTENT_PREFIX:"toolbar_",MenuClass:"menu vertical dropDown",TOOLBAR_MENU_CLASS:"menu vertical dropDown fitable",ACTION_MODEL_TAG:"adhocActionModel",CAPSULE_PATTERN:"capsule",showButtonMenu:function(t,e){e=_()(e);var i=this.CONTENT_PREFIX+e.attr("id"),n="adhocActionModel"==this.ACTION_MODEL_TAG?this.actionModel:this.ACTION_MODEL_TAG;o.Z.showDropDownMenu(t,e,i,this.TOOLBAR_MENU_CLASS,n)},setActionModel:function(t){this.actionModel=t},isToolBarButton:function(t){return!!t&&_()(t).hasClass("capsule")},enable:function(t,e){s.Z.enable(t)},disable:function(t){s.Z.disable(t)},setButtonState:function(t,e){e?this.enable(t):this.disable(t)}}},95952:(t,e,i)=>{"use strict";i.d(e,{Z:()=>o});var n=i(29338),_=i(70692);_.Z.serverActionFactory={browse:function(t){return this.createAction(_.Z.ActionMap.BROWSE,t)},search:function(t){return this.createAction(_.Z.ActionMap.SEARCH,t)},next:function(t){return this.createAction(_.Z.ActionMap.NEXT,t)},selectAndGetDetails:function(t){return this.createAction(_.Z.ActionMap.SELECT_AND_GET_DETAILS,t)},searchAvailable:function(t){return this.createAction(_.Z.ActionMap.SEARCH_AVAILABLE,t)},searchAssigned:function(t){return this.createAction(_.Z.ActionMap.SEARCH_ASSIGNED,t)},nextAvailable:function(t){return this.createAction(_.Z.ActionMap.NEXT_AVAILABLE,t)},nextAssigned:function(t){return this.createAction(_.Z.ActionMap.NEXT_ASSIGNED,t)},create:function(t){var e=t.entity,i={entity:Object.toJSON(e)};return this.createAction(_.Z.ActionMap.CREATE,i)},update:function(t){var e={entityName:t.entityName,entity:Object.toJSON(t.entity),assignedEntities:Object.toJSON(t.assigned),unassignedEntities:Object.toJSON(t.unassigned)};return this.createAction(_.Z.ActionMap.UPDATE,e,t.unencryptedEntity)},deleteAll:function(t){var e=t.entities,i={entities:Object.toJSON(e.collect((function(t){return t.getNameWithTenant()})))};return this.createAction(_.Z.ActionMap.DELETE_ALL,i)},delete:function(t){var e=t.entity,i=t.entityEvent,n={entity:e.getNameWithTenant(),entityEvent:i};return this.createAction(_.Z.ActionMap.DELETE,n)},exist:function(t){var e={entityName:t.entity.getNameWithTenant()},i=new _.Z.ServerAction(_.Z.ActionMap.EXIST,e);return i.onSuccess=function(e){e.exist?t.onExist&&t.onExist(e.uniqueId):t.onNotExist&&t.onNotExist()},i.onError=function(e){_.Z.fire(_.Z.Event.SERVER_ERROR,{inputData:t,responseData:e})},i},createAction:function(t,e,i){var n,o=new _.Z.ServerAction(t,e);if(t==_.Z.ActionMap.BROWSE)n=_.Z.Event.RESULT_CHANGED;else if(t==_.Z.ActionMap.SEARCH)n=_.Z.Event.RESULT_CHANGED;else if(t==_.Z.ActionMap.NEXT)n=_.Z.Event.RESULT_NEXT;else if(t==_.Z.ActionMap.SELECT_AND_GET_DETAILS)n=_.Z.Event.ENTITY_DETAILS_LOADED;else if(t==_.Z.ActionMap.SEARCH_AVAILABLE)n=_.Z.Event.SEARCH_AVAILABLE_LOADED;else if(t==_.Z.ActionMap.SEARCH_ASSIGNED)n=_.Z.Event.SEARCH_ASSIGNED_LOADED;else if(t==_.Z.ActionMap.NEXT_AVAILABLE)n=_.Z.Event.NEXT_AVAILABLE_LOADED;else if(t==_.Z.ActionMap.NEXT_ASSIGNED)n=_.Z.Event.NEXT_ASSIGNED_LOADED;else if(t==_.Z.ActionMap.CREATE)n=_.Z.Event.ENTITY_CREATED;else if(t==_.Z.ActionMap.UPDATE)n=_.Z.Event.ENTITY_UPDATED;else if(t==_.Z.ActionMap.DELETE_ALL)n=_.Z.Event.ENTITIES_DELETED;else{if(t!=_.Z.ActionMap.DELETE)throw new Error("Unexpected action name '"+t+"'");n=_.Z.Event.ENTITY_DELETED}return o.onSuccess=function(t){_.Z.fire(n,{inputData:e,unencryptedEntity:i,responseData:t})},o.onError=function(t){_.Z.fire(_.Z.Event.SERVER_ERROR,{inputData:e,unencryptedEntity:i,responseData:t})},o}},_.Z.clientActionFactory={create:function(){var t;_.Z.manager.tenantsTree&&(t=_.Z.manager.tenantsTree.getTenant());var e=_.Z.entityList.getSelectedEntities();return new _.Z.Action((function(){_.Z.entityList.deselectAll(),_.Z.addDialog.show(t)}),(function(){return _.Z.invokeClientAction("cancelIfEdit",{entity:e[0]})}))},deleteAll:function(){var t=_.Z.entityList.getSelectedEntities();return new _.Z.Action((function(){var e=_.Z.getMessage("deleteAllMessage",{count:t.length}),i=new n.Z({text:e});i.on("button:yes",(function(){_.Z.invokeServerAction(_.Z.ActionMap.DELETE_ALL,{entities:t})})),i.open()}),(function(){return _.Z.invokeClientAction("cancelIfEdit",{entity:t[0]})}))},delete:function(t){var e=t.entity,i=t.entityEvent;return new _.Z.Action((function(){var t=_.Z.getMessage("deleteMessage",{entity:e.getDisplayName()}),o=new n.Z({text:t});o.on("button:yes",(function(){_.Z.invokeServerAction(_.Z.ActionMap.DELETE,{entity:e,entityEvent:i})})),o.open()}))},cancelIfEdit:function(t){var e=(t=t||{}).entity||_.Z.manager.tenantsTree&&_.Z.manager.tenantsTree.getTenant(),i=void 0===t.showConfirm||t.showConfirm,n=void 0===t.entityEvent||t.entityEvent,o=_.Z.properties;return new _.Z.Action((function(){return o.locked&&n||!(!o.isChanged()||i&&confirm(_.Z.getMessage("cancelEdit",{entity:e.getDisplayName()})))?(!n&&o.lock(),!1):(o.isEditMode&&(o.lock(),o.cancel().done((function(){var t=o.getDetailsLoadedEntity(),e=!_.Z.userManager||_.Z.entityList.findEntity(t.fullName);o.unlock(),e?_.Z.fire(_.Z.Event.ENTITY_SELECT_AND_GET_DETAILS,{entityId:t.id,cancelIfEdit:!0,entityEvent:!0}):o.hide()}))),!0)}))}};const o=_.Z},82681:(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.d(__webpack_exports__,{Z:()=>__WEBPACK_DEFAULT_EXPORT__});var dragdropextra__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(72861),prototype__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__(52499),_components_components_searchBox__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__(9231),_components_components_toolbarButtons_events__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__(40574),_util_utils_common__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__(64155),_core_core_layout__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__(33806),_components_list_base__WEBPACK_IMPORTED_MODULE_6__=__webpack_require__(56461),_util_tools_infiniteScroll__WEBPACK_IMPORTED_MODULE_7__=__webpack_require__(45186),_components_components_tooltip__WEBPACK_IMPORTED_MODULE_8__=__webpack_require__(84581),_core_core_events_bis__WEBPACK_IMPORTED_MODULE_9__=__webpack_require__(43852),_actionModel_actionModel_primaryNavigation__WEBPACK_IMPORTED_MODULE_10__=__webpack_require__(72335),_core_core_ajax__WEBPACK_IMPORTED_MODULE_11__=__webpack_require__(236),_core_core_ajax_utils__WEBPACK_IMPORTED_MODULE_12__=__webpack_require__(11129),_mng_org_module__WEBPACK_IMPORTED_MODULE_13__=__webpack_require__(70692),js_sdk_src_common_util_xssUtil__WEBPACK_IMPORTED_MODULE_14__=__webpack_require__(84612),jquery__WEBPACK_IMPORTED_MODULE_15__=__webpack_require__(72157),jquery__WEBPACK_IMPORTED_MODULE_15___default=__webpack_require__.n(jquery__WEBPACK_IMPORTED_MODULE_15__);function RegExpRepresenter(t){this.charMap={"\\s":" "},this.expressionTokens=this.__parse(t)}Object.assign(_mng_org_module__WEBPACK_IMPORTED_MODULE_13__.Z,{TREE_ID:"orgTree",COOKIE_NAME:"selectedTenant",messages:[],ActionMap:{SEARCH:"search",BROWSE:"browse",NEXT:"next",SELECT_AND_GET_DETAILS:"selectAndGetDetails",SEARCH_AVAILABLE:"searchAvailable",SEARCH_ASSIGNED:"searchAssigned",NEXT_AVAILABLE:"nextAvailable",NEXT_ASSIGNED:"nextAssigned",CREATE:"create",UPDATE:"update",DELETE:"delete",DELETE_ALL:"deleteAll",EXIST:"exist"},Event:{ORG_BROWSE:"org:browse",ENTITY_SEARCH:"entity:search",ENTITY_NEXT:"entity:next",ENTITY_SELECT_AND_GET_DETAILS:"entity:selectAndGetDetails",RESULT_CHANGED:"result:changed",RESULT_NEXT:"result:next",ENTITY_DETAILS_LOADED:"entity:detailsLoaded",SEARCH_AVAILABLE_LOADED:"searchAvailable:loaded",SEARCH_ASSIGNED_LOADED:"searchAssigned:loaded",NEXT_AVAILABLE_LOADED:"nextAvailable:loaded",NEXT_ASSIGNED_LOADED:"nextAssigned:loaded",SERVER_ERROR:"server:error",SERVER_UNAVAILABLE:"server:unavailable",ENTITY_CREATED:"entity:created",ENTITY_UPDATED:"entity:updated",ENTITY_DELETED:"entity:deleted",ENTITIES_DELETED:"entities:deleted"},observe:function(t,e){this._getContainer().observe(t,e)},stopObserving:function(t,e){this._getContainer().stopObserving(t,e)},fire:function(t,e){this._getContainer().fire(t,e)},getMessage:function(t,e){var i=_mng_org_module__WEBPACK_IMPORTED_MODULE_13__.Z.messages[t];return i?new prototype__WEBPACK_IMPORTED_MODULE_1__.Template(i).evaluate(e||{}):""},_comparator:function(t,e){return t>e?1:t<e?-1:0},_getContainer:function(){return this._container||(this._container=document.body),this._container},Configuration:{nameSeparator:"|",userDefaultRole:"ROLE_USER",userNameNotSupportedSymbols:"[|]",roleNameNotSupportedSymbols:"[|]",emailRegExpPattern:"^[\\p{L}\\p{M}\\p{N}._%'-\\@\\,\\;\\s]+$",superuserRole:"ROLE_SUPERUSER",adminRole:"ROLE_ADMINISTRATOR",anonymousRole:"ROLE_ANONYMOUS"}}),_mng_org_module__WEBPACK_IMPORTED_MODULE_13__.Z.systemRoles=[_mng_org_module__WEBPACK_IMPORTED_MODULE_13__.Z.Configuration.userDefaultRole,_mng_org_module__WEBPACK_IMPORTED_MODULE_13__.Z.Configuration.superuserRole,_mng_org_module__WEBPACK_IMPORTED_MODULE_13__.Z.Configuration.adminRole,_mng_org_module__WEBPACK_IMPORTED_MODULE_13__.Z.Configuration.anonymousRole],_mng_org_module__WEBPACK_IMPORTED_MODULE_13__.Z.Organization=function(t){if(!t)throw new Error("Can't create Organization from undefined json or node");t.param?(this.id=t.param.id,this.name=t.name,this.uri=t.param.uri,this.treeNode=t):(this.id=t.tenantId||t.id,this.name=t.tenantName,this.alias=t.tenantAlias||t.alias||"",this.desc=t.tenantDesc,this.uri=t.tenantUri,this.parentId=t.parentId,this.subTenantCount=t.subTenantCount)},_mng_org_module__WEBPACK_IMPORTED_MODULE_13__.Z.Organization.addMethod("isRoot",(function(t){return"organizations"==this.id})),_mng_org_module__WEBPACK_IMPORTED_MODULE_13__.Z.Organization.addMethod("getNameWithTenant",(function(){return this.id})),_mng_org_module__WEBPACK_IMPORTED_MODULE_13__.Z.Organization.addMethod("getDisplayName",(function(){return this.name})),_mng_org_module__WEBPACK_IMPORTED_MODULE_13__.Z.Organization.addMethod("equals",(function(t){return t&&this.id==t.id})),_mng_org_module__WEBPACK_IMPORTED_MODULE_13__.Z.Organization.addMethod("toJSON",(function(t){return{tenantId:this.id,tenantName:this.name,tenantAlias:this.alias,tenantDesc:this.desc,parentId:this.parentId,tenantUri:this.uri}})),_mng_org_module__WEBPACK_IMPORTED_MODULE_13__.Z.Organization.addMethod("navigateToManager",(function(){_actionModel_actionModel_primaryNavigation__WEBPACK_IMPORTED_MODULE_10__.Z.navigationPaths.tempNavigateToManager=(0,_util_utils_common__WEBPACK_IMPORTED_MODULE_4__.I8Q)(_actionModel_actionModel_primaryNavigation__WEBPACK_IMPORTED_MODULE_10__.Z.navigationPaths.organization),_actionModel_actionModel_primaryNavigation__WEBPACK_IMPORTED_MODULE_10__.Z.navigationPaths.tempNavigateToManager.params+="&"+Object.toQueryString({tenantId:this.id}),_actionModel_actionModel_primaryNavigation__WEBPACK_IMPORTED_MODULE_10__.Z.navigationOption("tempNavigateToManager")})),_mng_org_module__WEBPACK_IMPORTED_MODULE_13__.Z.Permission=function(t){this.isInherited=!!t.isInherited,t.permission&&(this.permission=t.permission),t.inheritedPermission&&(this.inheritedPermission=t.inheritedPermission),this.isDisabled=!!t.isDisabled},_mng_org_module__WEBPACK_IMPORTED_MODULE_13__.Z.Permission.addMethod("getResolvedPermission",(function(){return this.isInherited?this.inheritedPermission:this.permission})),_mng_org_module__WEBPACK_IMPORTED_MODULE_13__.Z.Permission.addMethod("toJSON",(function(){return{permission:this.permission,isInherited:this.isInherited,inheritedPermission:this.inheritedPermission,newPermission:this.newPermission}})),_mng_org_module__WEBPACK_IMPORTED_MODULE_13__.Z.Permission.addMethod("toData",(function(){return{permission:this.permission,isInherited:this.isInherited,inheritedPermission:this.inheritedPermission,newPermission:this.newPermission}})),_mng_org_module__WEBPACK_IMPORTED_MODULE_13__.Z.User=function(t){t&&(this.userName=t.userName,this.fullName=t.fullName,this.password=t.password||"",this.confirmPassword=t.confirmPassword||"",this.tenantId=t.tenantId,this.email=t.email,this.enabled=t.enabled,this.external=t.external,this.roles=[],t.roles&&t.roles.each(function(t){this.roles.push(new _mng_org_module__WEBPACK_IMPORTED_MODULE_13__.Z.Role(t))}.bind(this)),t.permissionToDisplay&&(this.permission=new _mng_org_module__WEBPACK_IMPORTED_MODULE_13__.Z.Permission(t.permissionToDisplay)))},_mng_org_module__WEBPACK_IMPORTED_MODULE_13__.Z.User.addVar("FLOW_ID","userListFlow"),_mng_org_module__WEBPACK_IMPORTED_MODULE_13__.Z.User.addMethod("getDisplayName",(function(){return this.userName})),_mng_org_module__WEBPACK_IMPORTED_MODULE_13__.Z.User.addMethod("getNameWithTenant",(function(){return this.tenantId&&!this.tenantId.blank()?this.userName+_mng_org_module__WEBPACK_IMPORTED_MODULE_13__.Z.Configuration.userNameSeparator+this.tenantId:this.userName})),_mng_org_module__WEBPACK_IMPORTED_MODULE_13__.Z.User.addMethod("getManagerURL",(function(){return"flow.html?"+Object.toQueryString({_flowId:this.FLOW_ID,text:void 0!==this.userName?encodeURIComponent(this.userName):this.userName,tenantId:void 0!==this.tenantId?encodeURIComponent(this.tenantId):this.tenantId})})),_mng_org_module__WEBPACK_IMPORTED_MODULE_13__.Z.User.addMethod("navigateToManager",(function(){_actionModel_actionModel_primaryNavigation__WEBPACK_IMPORTED_MODULE_10__.Z.navigationPaths.tempNavigateToManager=(0,_util_utils_common__WEBPACK_IMPORTED_MODULE_4__.I8Q)(_actionModel_actionModel_primaryNavigation__WEBPACK_IMPORTED_MODULE_10__.Z.navigationPaths.user),_actionModel_actionModel_primaryNavigation__WEBPACK_IMPORTED_MODULE_10__.Z.navigationPaths.tempNavigateToManager.params+="&"+Object.toQueryString({text:this.userName,tenantId:this.tenantId}),_actionModel_actionModel_primaryNavigation__WEBPACK_IMPORTED_MODULE_10__.Z.navigationOption("tempNavigateToManager")})),_mng_org_module__WEBPACK_IMPORTED_MODULE_13__.Z.User.addMethod("equals",(function(t){return t&&this.userName==t.userName&&this.tenantId==t.tenantId})),_mng_org_module__WEBPACK_IMPORTED_MODULE_13__.Z.User.addMethod("toPermissionData",(function(t){return{userName:this.userName,tenantId:this.tenantId,permissionToDisplay:this.permission.toData()}})),_mng_org_module__WEBPACK_IMPORTED_MODULE_13__.Z.Role=function(t){t&&(this.roleName=t.roleName,this.external=t.external,this.tenantId=t.tenantId),t.permissionToDisplay&&(this.permission=new _mng_org_module__WEBPACK_IMPORTED_MODULE_13__.Z.Permission(t.permissionToDisplay))},_mng_org_module__WEBPACK_IMPORTED_MODULE_13__.Z.Role.addVar("FLOW_ID","roleListFlow"),_mng_org_module__WEBPACK_IMPORTED_MODULE_13__.Z.Role.addMethod("getDisplayName",(function(){return this.roleName})),_mng_org_module__WEBPACK_IMPORTED_MODULE_13__.Z.Role.addMethod("getNameWithTenant",(function(){return this.tenantId&&!this.tenantId.blank()?this.roleName+_mng_org_module__WEBPACK_IMPORTED_MODULE_13__.Z.Configuration.userNameSeparator+this.tenantId:this.roleName})),_mng_org_module__WEBPACK_IMPORTED_MODULE_13__.Z.Role.addMethod("getManagerURL",(function(){return"flow.html?"+Object.toQueryString({_flowId:this.FLOW_ID,text:void 0!==this.roleName?encodeURIComponent(this.roleName):this.roleName,tenantId:void 0!==this.tenantId?encodeURIComponent(this.tenantId):this.tenantId})})),_mng_org_module__WEBPACK_IMPORTED_MODULE_13__.Z.Role.addMethod("navigateToManager",(function(){_actionModel_actionModel_primaryNavigation__WEBPACK_IMPORTED_MODULE_10__.Z.navigationPaths.tempNavigateToManager=(0,_util_utils_common__WEBPACK_IMPORTED_MODULE_4__.I8Q)(_actionModel_actionModel_primaryNavigation__WEBPACK_IMPORTED_MODULE_10__.Z.navigationPaths.role),_actionModel_actionModel_primaryNavigation__WEBPACK_IMPORTED_MODULE_10__.Z.navigationPaths.tempNavigateToManager.params+="&"+Object.toQueryString({text:this.roleName,tenantId:this.tenantId}),_actionModel_actionModel_primaryNavigation__WEBPACK_IMPORTED_MODULE_10__.Z.navigationOption("tempNavigateToManager")})),_mng_org_module__WEBPACK_IMPORTED_MODULE_13__.Z.Role.addMethod("equals",(function(t){return t&&this.roleName==t.roleName&&this.tenantId==t.tenantId})),_mng_org_module__WEBPACK_IMPORTED_MODULE_13__.Z.Role.addMethod("toPermissionData",(function(t){return{roleName:this.roleName,tenantId:this.tenantId,permissionToDisplay:this.permission.toData()}})),_mng_org_module__WEBPACK_IMPORTED_MODULE_13__.Z.initTenantsTreeEvents=function(){_mng_org_module__WEBPACK_IMPORTED_MODULE_13__.Z.manager.tenantsTree.on("selection:change",(function(t){if(!_mng_org_module__WEBPACK_IMPORTED_MODULE_13__.Z.manager.lastSelectedOrg||_mng_org_module__WEBPACK_IMPORTED_MODULE_13__.Z.manager.lastSelectedOrg.id!==t.id){var e=new _mng_org_module__WEBPACK_IMPORTED_MODULE_13__.Z.Organization(t),i=_mng_org_module__WEBPACK_IMPORTED_MODULE_13__.Z.properties;_mng_org_module__WEBPACK_IMPORTED_MODULE_13__.Z.manager.tenantsTree.setTenant(e),window.localStorage&&localStorage.setItem(_mng_org_module__WEBPACK_IMPORTED_MODULE_13__.Z.COOKIE_NAME,JSON.stringify(t)),_mng_org_module__WEBPACK_IMPORTED_MODULE_13__.Z.fire(_mng_org_module__WEBPACK_IMPORTED_MODULE_13__.Z.Event.ORG_BROWSE,{organization:e,entityEvent:!1}),_mng_org_module__WEBPACK_IMPORTED_MODULE_13__.Z.orgManager&&(i.changeDisable(!1,["#"+i._EDIT_BUTTON_ID]),_mng_org_module__WEBPACK_IMPORTED_MODULE_13__.Z.fire(_mng_org_module__WEBPACK_IMPORTED_MODULE_13__.Z.Event.ENTITY_SELECT_AND_GET_DETAILS,{entityId:e.id,entityEvent:!1})),(_mng_org_module__WEBPACK_IMPORTED_MODULE_13__.Z.userManager||_mng_org_module__WEBPACK_IMPORTED_MODULE_13__.Z.roleManager)&&(i.hide(),i.unlock())}})),_mng_org_module__WEBPACK_IMPORTED_MODULE_13__.Z.manager.tenantsTree.on("import:finished",(function(t){var e=_mng_org_module__WEBPACK_IMPORTED_MODULE_13__.Z.properties;_mng_org_module__WEBPACK_IMPORTED_MODULE_13__.Z.fire(_mng_org_module__WEBPACK_IMPORTED_MODULE_13__.Z.Event.ORG_BROWSE,{force:!0,entityEvent:!1}),_mng_org_module__WEBPACK_IMPORTED_MODULE_13__.Z.orgManager&&(e.changeDisable(!1,["#"+e._EDIT_BUTTON_ID]),_mng_org_module__WEBPACK_IMPORTED_MODULE_13__.Z.fire(_mng_org_module__WEBPACK_IMPORTED_MODULE_13__.Z.Event.ENTITY_SELECT_AND_GET_DETAILS,{refreshAttributes:!0,entityId:t,entityEvent:!1}))}))},_mng_org_module__WEBPACK_IMPORTED_MODULE_13__.Z.entityList={ID_PATTERN:".ID > a",_listId:"entitiesList",_containerId:"listContainer",_searchBoxId:"secondarySearchBox",initialize:function(t){this.list=new _components_list_base__WEBPACK_IMPORTED_MODULE_6__.W.List(this._listId,{listTemplateDomId:t.listTemplateId,itemTemplateDomId:t.itemTemplateId,multiSelect:!0,selectionDefaultsToCursor:!0,comparator:function(t,e){return _mng_org_module__WEBPACK_IMPORTED_MODULE_13__.Z._comparator(t.getLabel(),e.getLabel())}}),this._initEvents(),this._infiniteScroll=new _util_tools_infiniteScroll__WEBPACK_IMPORTED_MODULE_7__.Z({id:this._containerId,contentId:this._listId}),this._searchBox=new _components_components_searchBox__WEBPACK_IMPORTED_MODULE_2__.Z({id:this._searchBoxId}),t.text&&this._searchBox.setText(t.text),this._infiniteScroll.onLoad=function(){_mng_org_module__WEBPACK_IMPORTED_MODULE_13__.Z.fire(_mng_org_module__WEBPACK_IMPORTED_MODULE_13__.Z.Event.ENTITY_NEXT,{})},this._searchBox.onSearch=function(t){_mng_org_module__WEBPACK_IMPORTED_MODULE_13__.Z.fire(_mng_org_module__WEBPACK_IMPORTED_MODULE_13__.Z.Event.ENTITY_SEARCH,{text:t})},_mng_org_module__WEBPACK_IMPORTED_MODULE_13__.Z.toolbar.initialize(t.toolbarModel),this.toolbar=_mng_org_module__WEBPACK_IMPORTED_MODULE_13__.Z.toolbar,this.list.show()},_initEvents:function(){this.list.observe("item:selected",function(t){var e=t.memo.item,i=_mng_org_module__WEBPACK_IMPORTED_MODULE_13__.Z.properties;this.lastSelectedName=e.getValue().getNameWithTenant(),_mng_org_module__WEBPACK_IMPORTED_MODULE_13__.Z.fire(_mng_org_module__WEBPACK_IMPORTED_MODULE_13__.Z.Event.ENTITY_SELECT_AND_GET_DETAILS,{entityId:e.getValue().id,entityEvent:!0}),i.changeDisable(!1,["#"+i._EDIT_BUTTON_ID])}.bindAsEventListener(this)),this.list.observe("item:unselected",function(t){var e=_mng_org_module__WEBPACK_IMPORTED_MODULE_13__.Z.manager.tenantsTree,i=_mng_org_module__WEBPACK_IMPORTED_MODULE_13__.Z.properties;i.changeDisable(!1,["#"+i._EDIT_BUTTON_ID]),!i.locked&&e?_mng_org_module__WEBPACK_IMPORTED_MODULE_13__.Z.fire(_mng_org_module__WEBPACK_IMPORTED_MODULE_13__.Z.Event.ENTITY_SELECT_AND_GET_DETAILS,{entityId:e.getTenant().id,entityEvent:!0,isCtrlHeld:t.memo.isCtrlHeld}):(i.hide(),this.toolbar.refresh())}.bindAsEventListener(this)),this.list.observe("item:beforeSelectOrUnselect",function(t){var e=t.memo.item;t.stopSelectOrUnselect=!_mng_org_module__WEBPACK_IMPORTED_MODULE_13__.Z.invokeClientAction("cancelIfEdit",{entity:e.getValue(),showConfirm:t.memo.showConfirm})}.bindAsEventListener(this))},_createEntityItem:function(t){var e=new _components_list_base__WEBPACK_IMPORTED_MODULE_6__.W.ListItem({label:t.getDisplayName(),value:t}),i=this;return e.processTemplate=function(t){return t.select(i.ID_PATTERN)[0].update(js_sdk_src_common_util_xssUtil__WEBPACK_IMPORTED_MODULE_14__.Z.hardEscape(this.getValue().getDisplayName())),t},e},getSearchText:function(){return this._searchBox.getText()},setSearchText:function(t){return this._searchBox.setText(t)},getSelectedEntities:function(){return this.list?this.list.getSelectedItems().collect((function(t){return t.getValue()})):[]},setEntities:function(t){var e=t.collect(this._createEntityItem.bind(this));this._infiniteScroll.reset(),this.list.setItems(e),this.list.show(),this.toolbar.refresh()},findEntity:function(t){var e=this.list.getItems();return(_mng_org_module__WEBPACK_IMPORTED_MODULE_13__.Z.properties.options||_mng_org_module__WEBPACK_IMPORTED_MODULE_13__.Z.userManager.options)._.find(e,(function(e){return e.getValue().fullName===t}))},addEntities:function(t){var e=t.collect(this._createEntityItem.bind(this));this.list.addItems(e),this.list.refresh(),this.toolbar.refresh()},selectEntity:function(t){var e=this.list.getItems().detect((function(e){return e.getValue().getNameWithTenant()==t}));e&&(e.isSelected()&&e.deselect(),e.select(),this.lastSelectedName=e.getValue().getNameWithTenant())},restoreSelectedEntity:function(t){this.selectEntity(this.lastSelectedName?this.lastSelectedName:t)},deselectAll:function(){this.list.resetSelected()},update:function(t,e){this.list.getItems().findAll((function(e){return e.getValue().getNameWithTenant()==t})).each((function(t){t.setValue(e),t.refresh()}))},remove:function(t){var e,i=this.list.getItems();e=(0,_util_utils_common__WEBPACK_IMPORTED_MODULE_4__.kJL)(t)?i.findAll((function(e){return t.include(e.getValue().getNameWithTenant())})):i.findAll((function(e){return e.getValue().getNameWithTenant()==t})),this.list.resetSelected(),this.list.removeItems(e)}},_mng_org_module__WEBPACK_IMPORTED_MODULE_13__.Z.properties={_EDIT_MODE_CLASS:"editMode",_moveButtonsId:"moveButtons",_id:"properties",_value:null,isEditMode:!1,_NOTHING_TO_DISPLAY_ID:"nothingToDisplay",_ASSIGNED_VIEW_ID:"assignedView",_ASSIGNED_VIEW_LIST_ID:"assignedViewList",_ASSIGNED_ID:"assigned",_AVAILABLE_ID:"available",_ASSIGNED_LIST_ID:"assignedList",_AVAILABLE_LIST_ID:"availableList",_ATTRIBUTES_LIST_ID:"attributesTab",_EDIT_BUTTON_ID:"edit",_SAVE_BUTTON_ID:"save",_CANCEL_BUTTON_ID:"cancel",_DELETE_BUTTON_ID:"delete",_REMOVE_FROM_ASSIGNED_BUTTON_ID:"removeFromAssigned",_ADD_TO_ASSIGNED_BUTTON_ID:"addToAssigned",_BUTTONS_CONTAINER_ID:"propertiesButtons",_MOVE_BUTTONS_CONTAINER_ID:"moveButtons",_DND_CLASS:".draggable",_DROP_CLASS:"wrap",buttonsFunctions:{},initialize:function(t){var e=t.attributesTypesEnum;if(this.options=t,this.locked=!1,this.hide(),this.processTemplate(t),this._toggleButton(),t.attributes){var i=!_mng_org_module__WEBPACK_IMPORTED_MODULE_13__.Z.userManager&&_mng_org_module__WEBPACK_IMPORTED_MODULE_13__.Z.orgManager?e.TENANT:e.USER,n=t.attributesViewOptionsFactory,_=t.scrollEventTrait,o=t.AttributesViewFacade;this.options._.extend(this,_),this.attributesFacade=new o(n({context:t.attributes.context,container:jquery__WEBPACK_IMPORTED_MODULE_15___default()("#attributesTab"),type:i}))}this.options.showAssigned&&this.initDnD(),this.initEvents(),this.initButtonsFunctions(),this.options.ConfirmationDialog&&this._initConfirmationDialog()},_initConfirmationDialog:function(){var t=this,e=this.options.i18n;this.confirmationDialog=new this.options.ConfirmationDialog({title:e["attributes.confirm.dialog.title"],text:e["attributes.confirm.cancel.dialog.text"]}),this.confirmationDialog.on("button:yes",(function(){t.cancelOnEdit()}))},_toggleButton:function(){var t=this.isChanged();this.attributesFacade&&this.attributesFacade.containsUnsavedItems()||t?this.saveButton.removeAttribute("disabled"):this.saveButton.removeClassName("over").setAttribute("disabled","disabled")},show:function(t,e){if(!this.locked){if(this.attributesFacade){var i=this,n=t&&t.isRoot&&t.isRoot(),_=n?this.options._.extend({},t,{id:null}):t;this.attributesFacade.getCurrentView().setContext(_,e).done((function(){i.attributesFacade.render(n)}))}(0,prototype__WEBPACK_IMPORTED_MODULE_1__.$)(this._NOTHING_TO_DISPLAY_ID).addClassName(_core_core_layout__WEBPACK_IMPORTED_MODULE_5__.Z.HIDDEN_CLASS),document.body.removeClassName(_core_core_layout__WEBPACK_IMPORTED_MODULE_5__.Z.NOTHING_TO_DISPLAY_CLASS),this._value=t,this.changeMode(!1)}},hide:function(){if(!this.locked){var t=(0,prototype__WEBPACK_IMPORTED_MODULE_1__.$)(this._NOTHING_TO_DISPLAY_ID);t.removeClassName(_core_core_layout__WEBPACK_IMPORTED_MODULE_5__.Z.HIDDEN_CLASS),(0,_util_utils_common__WEBPACK_IMPORTED_MODULE_4__.wyW)(t,{horz:!0,vert:!0}),document.body.addClassName(_core_core_layout__WEBPACK_IMPORTED_MODULE_5__.Z.NOTHING_TO_DISPLAY_CLASS),this._value=null,this.changeMode(!1)}},lock:function(){this.locked=!0},unlock:function(){this.locked=!1},setDetailsLoadedEntity:function(t){this.detailsLoadedEntity=t},getDetailsLoadedEntity:function(){return this.detailsLoadedEntity},processTemplate:function(t){if(this.editButton=(0,prototype__WEBPACK_IMPORTED_MODULE_1__.$)(this._EDIT_BUTTON_ID),this.saveButton=(0,prototype__WEBPACK_IMPORTED_MODULE_1__.$)(this._SAVE_BUTTON_ID),this.cancelButton=(0,prototype__WEBPACK_IMPORTED_MODULE_1__.$)(this._CANCEL_BUTTON_ID),this.deleteButton=(0,prototype__WEBPACK_IMPORTED_MODULE_1__.$)(this._DELETE_BUTTON_ID),this.options.showAssigned){this.removeFromAssigned=(0,prototype__WEBPACK_IMPORTED_MODULE_1__.$)(this._REMOVE_FROM_ASSIGNED_BUTTON_ID),this.addToAssigned=(0,prototype__WEBPACK_IMPORTED_MODULE_1__.$)(this._ADD_TO_ASSIGNED_BUTTON_ID),this.assignedViewList=new _components_list_base__WEBPACK_IMPORTED_MODULE_6__.W.List(this._ASSIGNED_VIEW_LIST_ID,{listTemplateDomId:t.viewAssignedListTemplateDomId,itemTemplateDomId:t.viewAssignedItemTemplateDomId,comparator:this.assignedComparator,allowSelections:!1,selectionDefaultsToCursor:!1});var e={listTemplateDomId:"list_responsive_collapsible_fields",itemTemplateDomId:"list_responsive_collapsible_fields:fields",comparator:this.assignedComparator,dragPattern:this._DND_CLASS,allowSelections:!0,selectionDefaultsToCursor:!0,multiSelect:!0,selectOnMousedown:!0,setCursorOnMouseDown:!0};this.assignedList=new _components_list_base__WEBPACK_IMPORTED_MODULE_6__.W.List(this._ASSIGNED_LIST_ID,Object.extend({},e,{allowSelections:!1,selectionDefaultsToCursor:!1})),this.availableList=new _components_list_base__WEBPACK_IMPORTED_MODULE_6__.W.List(this._AVAILABLE_LIST_ID,e),t.searchAssigned&&(this.assignedViewSearchBox=new _components_components_searchBox__WEBPACK_IMPORTED_MODULE_2__.Z({id:(0,prototype__WEBPACK_IMPORTED_MODULE_1__.$)(this._ASSIGNED_VIEW_ID).select(_core_core_layout__WEBPACK_IMPORTED_MODULE_5__.Z.SEARCH_LOCKUP_PATTERN)[0].identify()}),this.assignedViewSearchBox.onSearch=function(t){_mng_org_module__WEBPACK_IMPORTED_MODULE_13__.Z.invokeServerAction(_mng_org_module__WEBPACK_IMPORTED_MODULE_13__.Z.ActionMap.SEARCH_ASSIGNED,{text:t})}),this.availableSearchBox=new _components_components_searchBox__WEBPACK_IMPORTED_MODULE_2__.Z({id:(0,prototype__WEBPACK_IMPORTED_MODULE_1__.$)(this._AVAILABLE_ID).select(_core_core_layout__WEBPACK_IMPORTED_MODULE_5__.Z.SEARCH_LOCKUP_PATTERN)[0].identify()}),this.availableSearchBox.onSearch=function(t){_mng_org_module__WEBPACK_IMPORTED_MODULE_13__.Z.invokeServerAction(_mng_org_module__WEBPACK_IMPORTED_MODULE_13__.Z.ActionMap.SEARCH_AVAILABLE,{text:t})},this.assignedSearchBox=new _components_components_searchBox__WEBPACK_IMPORTED_MODULE_2__.Z({id:(0,prototype__WEBPACK_IMPORTED_MODULE_1__.$)(this._ASSIGNED_ID).select(_core_core_layout__WEBPACK_IMPORTED_MODULE_5__.Z.SEARCH_LOCKUP_PATTERN)[0].identify()}),this.assignedSearchBox.onSearch=function(t){_mng_org_module__WEBPACK_IMPORTED_MODULE_13__.Z.invokeServerAction(_mng_org_module__WEBPACK_IMPORTED_MODULE_13__.Z.ActionMap.SEARCH_ASSIGNED,{text:t})},t.searchAssigned&&(this.assignedViewInfiniteScroll=new _util_tools_infiniteScroll__WEBPACK_IMPORTED_MODULE_7__.Z({id:(0,prototype__WEBPACK_IMPORTED_MODULE_1__.$)((0,prototype__WEBPACK_IMPORTED_MODULE_1__.$)(this._ASSIGNED_VIEW_LIST_ID).parentNode).identify(),contentId:this._ASSIGNED_VIEW_LIST_ID}),this.assignedViewInfiniteScroll.onLoad=function(){_mng_org_module__WEBPACK_IMPORTED_MODULE_13__.Z.invokeServerAction(_mng_org_module__WEBPACK_IMPORTED_MODULE_13__.Z.ActionMap.NEXT_ASSIGNED,{})}),this.availableInfiniteScroll=new _util_tools_infiniteScroll__WEBPACK_IMPORTED_MODULE_7__.Z({id:(0,prototype__WEBPACK_IMPORTED_MODULE_1__.$)((0,prototype__WEBPACK_IMPORTED_MODULE_1__.$)(this._AVAILABLE_LIST_ID).parentNode).identify(),contentId:this._AVAILABLE_LIST_ID}),this.availableInfiniteScroll.onLoad=function(){_mng_org_module__WEBPACK_IMPORTED_MODULE_13__.Z.invokeServerAction(_mng_org_module__WEBPACK_IMPORTED_MODULE_13__.Z.ActionMap.NEXT_AVAILABLE,{})},this.assignedInfiniteScroll=new _util_tools_infiniteScroll__WEBPACK_IMPORTED_MODULE_7__.Z({id:(0,prototype__WEBPACK_IMPORTED_MODULE_1__.$)((0,prototype__WEBPACK_IMPORTED_MODULE_1__.$)(this._ASSIGNED_LIST_ID).parentNode).identify(),contentId:this._ASSIGNED_LIST_ID}),this.assignedInfiniteScroll.onLoad=function(){_mng_org_module__WEBPACK_IMPORTED_MODULE_13__.Z.invokeServerAction(_mng_org_module__WEBPACK_IMPORTED_MODULE_13__.Z.ActionMap.NEXT_ASSIGNED,{})}}},initDnD:function(){dragdropextra__WEBPACK_IMPORTED_MODULE_0__.m9.add((0,prototype__WEBPACK_IMPORTED_MODULE_1__.$)(this._ASSIGNED_LIST_ID).up(),{accept:[this._DROP_CLASS],hoverclass:_core_core_layout__WEBPACK_IMPORTED_MODULE_5__.Z.DROP_TARGET_CLASS,onDrop:function(t,e,i){t.items&&this._addToAssigned()}.bind(this)}),dragdropextra__WEBPACK_IMPORTED_MODULE_0__.m9.add((0,prototype__WEBPACK_IMPORTED_MODULE_1__.$)(this._AVAILABLE_LIST_ID).up(),{accept:[this._DROP_CLASS],hoverclass:_core_core_layout__WEBPACK_IMPORTED_MODULE_5__.Z.DROP_TARGET_CLASS,onDrop:function(t,e,i){t.items&&this._removeFromAssigned()}.bind(this)})},initEvents:function(){function t(){(this.assignedList.getSelectedItems().length>0?_core_core_events_bis__WEBPACK_IMPORTED_MODULE_9__.Z.enable:_core_core_events_bis__WEBPACK_IMPORTED_MODULE_9__.Z.disable)(this.removeFromAssigned)}function e(){(this.availableList.getSelectedItems().length>0?_core_core_events_bis__WEBPACK_IMPORTED_MODULE_9__.Z.enable:_core_core_events_bis__WEBPACK_IMPORTED_MODULE_9__.Z.disable)(this.addToAssigned)}(0,prototype__WEBPACK_IMPORTED_MODULE_1__.$)(this._BUTTONS_CONTAINER_ID).observe("click",function(t){var e=t.element(),i=(0,_util_utils_common__WEBPACK_IMPORTED_MODULE_4__.BwZ)(e,[_core_core_layout__WEBPACK_IMPORTED_MODULE_5__.Z.BUTTON_PATTERN],!0);i&&this.buttonsFunctions[i.identify()]&&this.buttonsFunctions[i.identify()].call(this),t.preventDefault(),t.stopPropagation()}.bindAsEventListener(this)),this.options.showAssigned&&((0,prototype__WEBPACK_IMPORTED_MODULE_1__.$)(this._MOVE_BUTTONS_CONTAINER_ID).observe("click",function(t){var e=t.element(),i=(0,_util_utils_common__WEBPACK_IMPORTED_MODULE_4__.BwZ)(e,[_core_core_layout__WEBPACK_IMPORTED_MODULE_5__.Z.BUTTON_PATTERN],!0);i&&(i==this.removeFromAssigned?this._removeFromAssigned():i==this.addToAssigned&&this._addToAssigned()),t.preventDefault(),t.stopPropagation()}.bindAsEventListener(this)),this.assignedList.observe("item:selected",t.bindAsEventListener(this)),this.assignedList.observe("item:unselected",t.bindAsEventListener(this)),this.assignedList.observe("item:dblclick",function(t){this._removeFromAssigned()}.bindAsEventListener(this)),this.availableList.observe("item:selected",e.bindAsEventListener(this)),this.availableList.observe("item:unselected",e.bindAsEventListener(this)),this.availableList.observe("item:dblclick",function(t){this._addToAssigned()}.bindAsEventListener(this))),this.attributesFacade&&this.attributesFacade.on("change",this.options._.bind(this._toggleButton,this))},initButtonsFunctions:function(){this.buttonsFunctions[this._EDIT_BUTTON_ID]=function(){this.changeMode(!0)},this.buttonsFunctions[this._SAVE_BUTTON_ID]=function(){var t=this,e=new(jquery__WEBPACK_IMPORTED_MODULE_15___default().Deferred);this.asyncValidate?this.asyncValidate().done((function(){t.attributesFacade?t.attributesFacade.getCurrentView().saveChildren().done((function(){e.resolve()})).fail((function(){e.reject(),jquery__WEBPACK_IMPORTED_MODULE_15___default()(".tab[tabid='#attributesTab']").trigger("mouseup")})):e.resolve(),e.done((function(){t.save(t._value)}))})):this.validate()&&(this.attributesFacade?this.attributesFacade.getCurrentView().saveChildren().done((function(){e.resolve()})).fail((function(){e.reject(),jquery__WEBPACK_IMPORTED_MODULE_15___default()(".tab[tabid='#attributesTab']").trigger("mouseup")})):e.resolve(),e.done((function(){t.save(t._value)})))},this.buttonsFunctions[this._CANCEL_BUTTON_ID]=function(){this.attributesFacade?this.isChanged()?this.confirmationDialog.open():this.cancelOnEdit():_mng_org_module__WEBPACK_IMPORTED_MODULE_13__.Z.invokeClientAction("cancelIfEdit",{entity:this.getValue()})},this.buttonsFunctions[this._DELETE_BUTTON_ID]=function(){this._deleteEntity()},this.buttonsFunctions[this._REMOVE_FROM_ASSIGNED_BUTTON_ID]=function(){this._removeFromAssigned()},this.buttonsFunctions[this._ADD_TO_ASSIGNED_BUTTON_ID]=function(){this._addFromAssigned()}},cancelOnEdit:function(){var t=this;this.isEditMode&&this.cancel().done((function(){t.unlock(),t.changeMode(!1),t._toggleButton()}))},changeMode:function(t){var e,i,n,_;if(this.isEditMode=t,this.attributesFacade){i=(0,prototype__WEBPACK_IMPORTED_MODULE_1__.$)("attributesTab");var o=!!this._value&&"organizations"===this._value.id;this.detachScrollEvent(this.attributesFacade.getCurrentView().$container.parent()),this.attributesFacade.toggleMode(t,o),t&&this.initScrollEvent(this.attributesFacade.getCurrentView()),e=(0,prototype__WEBPACK_IMPORTED_MODULE_1__.$$)(".tertiary")[0],n=(0,prototype__WEBPACK_IMPORTED_MODULE_1__.$)("propertiesTab"),_=jquery__WEBPACK_IMPORTED_MODULE_15___default()(".control.tabSet.anchor")}t?((0,prototype__WEBPACK_IMPORTED_MODULE_1__.$)(this._id).addClassName(this._EDIT_MODE_CLASS),e&&(e.down(".selected").removeClassName("selected"),e.down("li",0).addClassName("selected"),e.addClassName("tabbed"),i.addClassName("hidden"),n.removeClassName("hidden"),_.removeClass("attributesAnchor")),this._assigned=[],this._unassigned=[],this.options.showAssigned&&((0,_util_utils_common__WEBPACK_IMPORTED_MODULE_4__.wyW)((0,prototype__WEBPACK_IMPORTED_MODULE_1__.$)(this._moveButtonsId),{horz:!0}),(0,prototype__WEBPACK_IMPORTED_MODULE_1__.$)(this._moveButtonsId).style.zIndex=1e3,this.assignedList.setItems([]),this.assignedList.show(),this.availableList.setItems([]),this.availableList.show(),_core_core_events_bis__WEBPACK_IMPORTED_MODULE_9__.Z.disable(this.removeFromAssigned),_core_core_events_bis__WEBPACK_IMPORTED_MODULE_9__.Z.disable(this.addToAssigned),this.assignedSearchBox.setText(""),this.availableSearchBox.setText(""),_mng_org_module__WEBPACK_IMPORTED_MODULE_13__.Z.invokeServerAction(_mng_org_module__WEBPACK_IMPORTED_MODULE_13__.Z.ActionMap.SEARCH_ASSIGNED,{text:this.assignedSearchBox.getText()}),_mng_org_module__WEBPACK_IMPORTED_MODULE_13__.Z.invokeServerAction(_mng_org_module__WEBPACK_IMPORTED_MODULE_13__.Z.ActionMap.SEARCH_AVAILABLE,{text:this.availableSearchBox.getText()})),this._editEntity(),this._toggleButton()):((0,prototype__WEBPACK_IMPORTED_MODULE_1__.$)(this._id).removeClassName(this._EDIT_MODE_CLASS),e&&(i.removeClassName("hidden"),n.removeClassName("hidden"),e.removeClassName("tabbed")),this.options.searchAssigned&&this.assignedViewSearchBox&&this.assignedViewSearchBox.setText(""),this.changeDisable(this.canEdit(),["#"+this._EDIT_BUTTON_ID]),this.changeDisable(this.canDelete(),["#"+this._DELETE_BUTTON_ID]),this._showEntity(),this._assigned=[],this._unassigned=[])},canEdit:function(){return!0},canDelete:function(){var t=this.getValue();return(!t||t.getNameWithTenant()!==this.options.currentUser)&&(!!t&&"/"!==t.uri)},setValuesProperty:function(t,e){this._value[t]=e},getValue:function(){return this._value},setProperties:function(t){},isChanged:function(t){},save:function(t){},validate:function(){return!0},assignedComparator:function(t,e){var i=t.getLabel(),n=e.getLabel();return i>n?1:i<n?-1:0},_moveEntities:function(t){var e,i,n,_;t?(e=this._unassigned,n=this.availableList,i=this._assigned,_=this.assignedList):(e=this._assigned,n=this.assignedList,i=this._unassigned,_=this.availableList);var o=n.getSelectedItems(),s=o.collect((function(t){return t.getValue()}));i=i.concat(s.collect((function(e){return e.available==t?e:null}))).compact(),e=e.reject((function(t){return s.detect((function(e){return t.equals(e)}))})),n.removeItems(o),_.addItems(o,!0),_.refresh(),t?(this._unassigned=e,this._assigned=i):(this._assigned=e,this._unassigned=i)},_addToAssigned:function(){this._moveEntities(!0)},_removeFromAssigned:function(){this._moveEntities(!1)},_entitiesToItems:function(t,e){return(t=t||[]).collect(function(t){var i="",n=[],_="orgTooltip";t instanceof _mng_org_module__WEBPACK_IMPORTED_MODULE_13__.Z.User?(i=t.userName,t.fullName&&t.fullName.length>0&&(n=[t.fullName]),_=t.tenantId?"fullNameAndOrgTooltip":"fullNameTooltip"):t instanceof _mng_org_module__WEBPACK_IMPORTED_MODULE_13__.Z.Role&&(i=t.roleName,_=t.tenantId?"orgTooltip":void 0),t.tenantId&&t.tenantId.length>0&&n.push(t.tenantId),t.available=!!e;var o=new _components_list_base__WEBPACK_IMPORTED_MODULE_6__.W.ListItem({label:i,value:t});return this.isEditMode?o.processTemplate=function(t){return n.length>0&&new _components_components_tooltip__WEBPACK_IMPORTED_MODULE_8__.p(t,{text:js_sdk_src_common_util_xssUtil__WEBPACK_IMPORTED_MODULE_14__.Z.hardEscape(n),templateId:_}),_components_list_base__WEBPACK_IMPORTED_MODULE_6__.W.ListItem.prototype.processTemplate.call(this,t)}:o.processTemplate=function(t){var e=t.select("a")[0];return e.insert(js_sdk_src_common_util_xssUtil__WEBPACK_IMPORTED_MODULE_14__.Z.hardEscape(this.getLabel())),e.writeAttribute("href",this.getValue().getManagerURL()),n.length>0&&new _components_components_tooltip__WEBPACK_IMPORTED_MODULE_8__.p(t,{text:js_sdk_src_common_util_xssUtil__WEBPACK_IMPORTED_MODULE_14__.Z.hardEscape(n),templateId:_}),t},o}.bind(this))},getAssignedEntities:function(){return this._assigned},getUnassignedEntities:function(){return this._unassigned},setAssignedEntities:function(t){this.assignedViewInfiniteScroll&&this.assignedViewInfiniteScroll.reset(),this.assignedInfiniteScroll&&this.assignedInfiniteScroll.reset();var e=this.isEditMode?this.assignedList:this.assignedViewList,i=this._filterEntities(t,this._unassigned,this._assigned,this.assignedSearchBox.getText());e.setItems(this._entitiesToItems(i)),e.refresh()},addAssignedEntities:function(t){var e=this.isEditMode?this.assignedList:this.assignedViewList,i=this._filterEntities(t,this._unassigned,this._assigned,this.assignedSearchBox.getText());e.addItems(this._entitiesToItems(i)),e.refresh()},setAvailableEntities:function(t){this.availableInfiniteScroll.reset();var e=this._filterEntities(t,this._assigned,this._unassigned,this.availableSearchBox.getText());this.availableList.setItems(this._entitiesToItems(e,!0)),this.availableList.refresh()},addAvailableEntities:function(t){var e=this._filterEntities(t,this._assigned,this._unassigned,this.availableSearchBox.getText());this.availableList.addItems(this._entitiesToItems(e,!0)),this.availableList.refresh()},_filterEntities:function(t,e,i,n){var _=t.reject((function(t){return e.detect((function(e){return e.equals(t)}))}));return n=n.toLowerCase(),_=_.concat(i.findAll((function(t){return t.getDisplayName().toLowerCase().include(n)})))},changeReadonly:function(t,e){e.each(function(e){(0,prototype__WEBPACK_IMPORTED_MODULE_1__.$)(this._id).select(e)[0].writeAttribute(_core_core_layout__WEBPACK_IMPORTED_MODULE_5__.Z.READONLY_ATTR_NAME,t?null:_core_core_layout__WEBPACK_IMPORTED_MODULE_5__.Z.READONLY_ATTR_NAME)}.bind(this))},resetValidation:function(t){var e=(0,prototype__WEBPACK_IMPORTED_MODULE_1__.$)(this._id);t.each(function(t){_util_utils_common__WEBPACK_IMPORTED_MODULE_4__.n4K.hideError(e.select(t)[0])}.bind(this))},changeDisable:function(t,e){e.each(function(e){t?_core_core_events_bis__WEBPACK_IMPORTED_MODULE_9__.Z.enable((0,prototype__WEBPACK_IMPORTED_MODULE_1__.$)(this._id).select(e)[0]):_core_core_events_bis__WEBPACK_IMPORTED_MODULE_9__.Z.disable((0,prototype__WEBPACK_IMPORTED_MODULE_1__.$)(this._id).select(e)[0])}.bind(this))},_deleteEntity:function(){},_editEntity:function(){},_showEntity:function(){}},_mng_org_module__WEBPACK_IMPORTED_MODULE_13__.Z.addDialog={show:function(t){},hide:function(t){}},_mng_org_module__WEBPACK_IMPORTED_MODULE_13__.Z.Action=function(t,e){Object.isFunction(t)&&(e=e&&Object.isFunction(e)?e:this.beforeInvoke,this.invokeAction=function(){if(e())return t.apply(this,arguments)})},_mng_org_module__WEBPACK_IMPORTED_MODULE_13__.Z.Action.addMethod("invokeAction",_util_utils_common__WEBPACK_IMPORTED_MODULE_4__.cnY),_mng_org_module__WEBPACK_IMPORTED_MODULE_13__.Z.Action.addMethod("beforeInvoke",(function(){return!0})),_mng_org_module__WEBPACK_IMPORTED_MODULE_13__.Z.ServerAction=function(t,e){this.actionURL="flow.html?_flowExecutionKey="+window.localContext.flowExecutionKey+"&_eventId="+t,this.data=Object.toQueryString(e),this.onSuccess=(0,_util_utils_common__WEBPACK_IMPORTED_MODULE_4__.cnY)(),this.onError=(0,_util_utils_common__WEBPACK_IMPORTED_MODULE_4__.cnY)()},_mng_org_module__WEBPACK_IMPORTED_MODULE_13__.Z.ServerAction.addMethod("invokeAction",(function(){this.beforeInvoke()&&(0,_core_core_ajax__WEBPACK_IMPORTED_MODULE_11__.mc)(this.actionURL,{postData:this.data,callback:function(t){t.error?this.onError(t.error):this.onSuccess(t.data)}.bind(this),errorHandler:function(t){return t.getResponseHeader("LoginRequested")?(_mng_org_module__WEBPACK_IMPORTED_MODULE_13__.Z.fire(_mng_org_module__WEBPACK_IMPORTED_MODULE_13__.Z.Event.SERVER_UNAVAILABLE,{}),!0):(0,_core_core_ajax_utils__WEBPACK_IMPORTED_MODULE_12__.m0)(t)},mode:_core_core_ajax__WEBPACK_IMPORTED_MODULE_11__.w8.prototype.EVAL_JSON})})),_mng_org_module__WEBPACK_IMPORTED_MODULE_13__.Z.ServerAction.addMethod("beforeInvoke",(function(){return!0})),_mng_org_module__WEBPACK_IMPORTED_MODULE_13__.Z.toolbar={_actionModel:{},initialize:function(t){this._actionModel=t,_components_components_toolbarButtons_events__WEBPACK_IMPORTED_MODULE_3__.Z.initialize(this._toActionMap(this._actionModel)),this.refresh()},refresh:function(){for(var t in this._actionModel){var e=this._actionModel[t].buttonId,i=(0,_util_utils_common__WEBPACK_IMPORTED_MODULE_4__.J$4)(this._actionModel[t].test);_components_components_toolbarButtons_events__WEBPACK_IMPORTED_MODULE_3__.Z.setButtonState((0,prototype__WEBPACK_IMPORTED_MODULE_1__.$)(e),i())}},_toActionMap:function(t){var e={};for(var i in t){var n=t[i];e[n.buttonId]=function(t,e){return function(){var i=(0,_util_utils_common__WEBPACK_IMPORTED_MODULE_4__.qO$)(t),n=e,_=window.localContext&&window.localContext[t];n&&(0,_util_utils_common__WEBPACK_IMPORTED_MODULE_4__.kJL)(n)?i.apply(_?window.localContext:null,n):i.call(_?window.localContext:null,n)}}(n.action,n.actionArgs)}return e}},_mng_org_module__WEBPACK_IMPORTED_MODULE_13__.Z.createInputRegExValidator=function(t){return{validator:function(e){var i=!t.regExp.test(e),n=i?"":_mng_org_module__WEBPACK_IMPORTED_MODULE_13__.Z.getMessage("unsupportedSymbols",{symbols:t.unsupportedSymbols});return t.isValid=i,{isValid:i,errorMessage:n}},element:t}},_mng_org_module__WEBPACK_IMPORTED_MODULE_13__.Z.createBlankValidator=function(t,e,i,n){return{validator:function(t){var i=!t.blank();return{isValid:i,errorMessage:i?"":_mng_org_module__WEBPACK_IMPORTED_MODULE_13__.Z.getMessage(e)}},element:t,onValid:i,onInvalid:n}},_mng_org_module__WEBPACK_IMPORTED_MODULE_13__.Z.createMaxLengthValidator=function(t,e,i){return{validator:function(n){var _=t.hasAttribute("maxlength")?t.readAttribute("maxlength"):t.maxlength,o=n.length<parseInt(_),s=o?"":_mng_org_module__WEBPACK_IMPORTED_MODULE_13__.Z.getMessage(e);return i&&(s=s.replace(i,_)),{isValid:o,errorMessage:s}},element:t}},_mng_org_module__WEBPACK_IMPORTED_MODULE_13__.Z.createSameValidator=function(t,e,i){return{validator:function(t){var n=t===e.getValue();return{isValid:n,errorMessage:n?"":_mng_org_module__WEBPACK_IMPORTED_MODULE_13__.Z.getMessage(i)}},element:t}},_mng_org_module__WEBPACK_IMPORTED_MODULE_13__.Z.createRegExpValidator=function(t,e,i){return{validator:function(t){var n=i.exec(t),_=!n&&0===t.length||n&&t==n[0];return{isValid:_,errorMessage:_?"":_mng_org_module__WEBPACK_IMPORTED_MODULE_13__.Z.getMessage(e)}},element:t}},_mng_org_module__WEBPACK_IMPORTED_MODULE_13__.Z.truncateOrgName=function(t){return t&&t.length>0?t.truncate(15):""},RegExpRepresenter.addMethod("__parse",(function(t){for(var e=(0,prototype__WEBPACK_IMPORTED_MODULE_1__.$A)(),i=1;i<t.length-1;i++){var n=t.charAt(i);"\\"==n&&(n+=t.charAt(++i)),"\\u"==n&&(n+=t.substring(++i,i+4),i+=3),e.push(n)}return e})),RegExpRepresenter.addMethod("getCharacters",(function(){var result=(0,prototype__WEBPACK_IMPORTED_MODULE_1__.$A)();return this.expressionTokens.each(function(token){if(token.startsWith("\\u"))result.push(eval('"'+token+'"'));else if(token.startsWith("\\")){var ch=this.charMap[token];result.push(ch||token.substring(1,token.length))}else result.push(token)}.bind(this)),result})),RegExpRepresenter.addMethod("getRepresentedString",(function(){for(var t="",e=this.getCharacters(),i=e.length,n=0;n<i;n++){var _=e[n];t+=" "==_||"."==_||","==_?"["+_+"]":_,n<i-1&&(t+=", ")}return t}));const __WEBPACK_DEFAULT_EXPORT__=_mng_org_module__WEBPACK_IMPORTED_MODULE_13__.Z},70692:(t,e,i)=>{"use strict";i.d(e,{Z:()=>n});const n={}},17788:(t,e,i)=>{"use strict";i.d(e,{Z:()=>d});var n=i(95952),_=i(82681),o=i(94277),s=i(97836),a=i.n(s),r=i(70692);r.Z.confirmAndLeave=function(){var t=r.Z.entityList.getSelectedEntities();return!!r.Z.properties.attributesFacade||r.Z.invokeClientAction("cancelIfEdit",{entity:t[0],entityEvent:!1})},r.Z.manager={initialize:function(t){this.options=t,this.state=t.state,a().extend(this.state,{id:this.state.tenantId}),(0,o.YT)()&&(this.tenantsTree=new t.TenantsTreeView({container:"#folders .body",currentUser:t.currentUser,removeContextMenuTreePlugin:t.removeContextMenuTreePlugin,selectedTenant:this.state,comparator:function(t,e){return r.Z._comparator(t.tenantName,e.tenantName)}}),r.Z.initTenantsTreeEvents(),this.tenantsTree.render()),r.Z.observe("org:browse",function(t){var e,i;this.tenantsTree&&(i=this.tenantsTree.getTenant());var n=t.memo.entityEvent;if(t.memo.force||!this.lastSelectedOrg||this.lastSelectedOrg.id!==(null===(e=i)||void 0===e?void 0:e.id)){var _=r.Z.entityList.getSelectedEntities();r.Z.invokeClientAction("cancelIfEdit",{entity:_[0]||i,entityEvent:n})?(r.Z.invokeServerAction(r.Z.ActionMap.BROWSE,{tenantId:i?i.id:null}),this.lastSelectedOrg=i):this.lastSelectedOrg&&this.tenantsTree.selectTenant(this.lastSelectedOrg.id)}}.bindAsEventListener(this)),r.Z.observe("entity:search",function(t){var e,i=r.Z.entityList.getSelectedEntities(),n=t.memo.text;this.tenantsTree&&(e=this.tenantsTree.getTenant()),r.Z.invokeClientAction("cancelIfEdit",{entity:i[0]||e})?(r.Z.invokeServerAction(r.Z.ActionMap.SEARCH,{text:n}),this.lastSearchText=n):0===n.length&&this.lastSearchText&&0!==this.lastSearchText.length&&r.Z.entityList.setSearchText(this.lastSearchText)}.bindAsEventListener(this)),r.Z.observe("entity:next",function(t){r.Z.invokeServerAction(r.Z.ActionMap.NEXT,{})}.bindAsEventListener(this)),r.Z.observe("entity:selectAndGetDetails",function(t){var e=t.memo.entityEvent,i=t.memo.isCtrlHeld,n=t.memo.cancelIfEdit,_=r.Z.entityList.getSelectedEntities(),o=Boolean(t.memo.refreshAttributes);if(_.length>1)r.Z.properties.hide(),r.Z.entityList.toolbar.refresh();else{var s,a=_[0];if(s=a&&e?a.getNameWithTenant():(!e||i||n)&&t.memo.entityId,!a&&(r.Z.userManager||!r.Z.userManager&&r.Z.roleManager)&&i)return void r.Z.properties.hide();s&&r.Z.invokeServerAction(r.Z.ActionMap.SELECT_AND_GET_DETAILS,{refreshAttributes:o,entity:s})}}.bindAsEventListener(this)),r.Z.observe("result:changed",function(e){var i=e.memo.responseData;r.Z.entityList.setEntities(i.entities.collect(this.entityJsonToObject)),t.defaultEntity&&r.Z.entityList.restoreSelectedEntity(t.defaultEntity)}.bindAsEventListener(this)),r.Z.observe("result:next",function(t){var e=t.memo.responseData;e.entities.length>0&&r.Z.entityList.addEntities(e.entities.collect(this.entityJsonToObject))}.bindAsEventListener(this)),r.Z.observe("entity:detailsLoaded",function(t){var e=this.entityJsonToObject(t.memo.responseData),i=r.Z.properties,n=t.memo.inputData.refreshAttributes;r.Z.entityList.update(e.getNameWithTenant(),e),i.setDetailsLoadedEntity(e),i.show(e,n),!i.locked&&i.setProperties(e),r.Z.entityList.toolbar.refresh(),i.unlock()}.bindAsEventListener(this)),r.Z.observe("searchAvailable:loaded",function(t){var e=t.memo.responseData;e&&e.entities&&r.Z.properties.setAvailableEntities(e.entities.collect(this.relatedEntityJsonToObject))}.bindAsEventListener(this)),r.Z.observe("searchAssigned:loaded",function(t){var e=t.memo.responseData;e&&e.entities&&r.Z.properties.setAssignedEntities(e.entities.collect(this.relatedEntityJsonToObject))}.bindAsEventListener(this)),r.Z.observe("nextAvailable:loaded",function(t){var e=t.memo.responseData;e&&e.entities&&e.entities.length>0&&r.Z.properties.addAvailableEntities(e.entities.collect(this.relatedEntityJsonToObject))}.bindAsEventListener(this)),r.Z.observe("nextAssigned:loaded",function(t){var e=t.memo.responseData;e&&e.entities&&e.entities.length>0&&r.Z.properties.addAssignedEntities(e.entities.collect(this.relatedEntityJsonToObject))}.bindAsEventListener(this)),r.Z.observe("server:error",(function(t){var e=t.memo.responseData;e&&alert(e.message+"\n\n"+e.description?e.description:"")})),r.Z.observe("entity:created",function(t){r.Z.addDialog.hide();var e=t.memo.inputData.entity;if(e){var i=this.entityJsonToObject(e.evalJSON());r.Z.entityList.addEntities([i]),r.Z.entityList.deselectAll(),r.Z.entityList.selectEntity(i.getNameWithTenant())}}.bindAsEventListener(this)),r.Z.observe("entity:updated",function(t){var e=this,i=t.memo.inputData.entityName,n=t.memo.responseData;n.roles||(n=t.memo.unencryptedEntity),n||(n=t.memo.inputData.entity);var _=r.Z.properties.attributesFacade||{},o=_.designer&&_.designer.saveDfD;r.Z.properties.isEditMode&&(o?o.done((function(){r.Z.properties.changeMode(!1)})):r.Z.properties.changeMode(!1)),n&&(o?o.done((function(){e.updateEntityList(n,i)})):this.updateEntityList(n,i))}.bindAsEventListener(this)),r.Z.observe("entity:deleted",function(t){var e=t.memo.inputData.entity;r.Z.entityList.remove(e)}.bindAsEventListener(this)),r.Z.observe("entities:deleted",function(t){var e=t.memo.inputData.entities;e&&r.Z.entityList.remove(e.evalJSON())}.bindAsEventListener(this))},updateEntityList:function(t,e){var i=this.entityJsonToObject(t.evalJSON?t.evalJSON():t);r.Z.entityList.update(e,i),r.Z.entityList.selectEntity(i.getNameWithTenant?i.getNameWithTenant():e)},entityJsonToObject:function(t){},relatedEntityJsonToObject:function(t){},reloadEntities:function(){r.Z.fire(r.Z.Event.ORG_BROWSE,{})},isUserSuperuser:function(){var t=(0,o.YT)()?r.Z.Configuration.superuserRole:r.Z.Configuration.adminRole;return null!=this.options.currentUserRoles.detect((function(e){return e.roleName==t&&!e.tenantId}))}},r.Z.invokeServerAction=function(t,e){var i=r.Z.serverActionFactory[t];if(!i)throw new Error("No server action found for action name '"+t+"'");i.call(r.Z.serverActionFactory,e).invokeAction()},r.Z.invokeClientAction=function(t,e){var i=r.Z.clientActionFactory[t];if(i)return i.call(r.Z.clientActionFactory,e).invokeAction();throw new Error("No client action found for action name '"+t+"'")};const l=r.Z;var c=Object.assign(n.Z,_.Z,l);window.orgModule=c;const d=c},42885:(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.d(__webpack_exports__,{Z:()=>__WEBPACK_DEFAULT_EXPORT__});var underscore__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(97836),underscore__WEBPACK_IMPORTED_MODULE_0___default=__webpack_require__.n(underscore__WEBPACK_IMPORTED_MODULE_0__),prototype__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__(52499);function RegExpRepresenter(t){this.charMap={"\\s":" "},this.expressionTokens=this.__parse(t)}underscore__WEBPACK_IMPORTED_MODULE_0___default().extend(RegExpRepresenter.prototype,{__parse:function(t){for(var e=(0,prototype__WEBPACK_IMPORTED_MODULE_1__.$A)(),i=1;i<t.length-1;i++){var n=t.charAt(i);"\\"==n&&(n+=t.charAt(++i)),"\\u"==n&&(n+=t.substring(++i,i+4),i+=3),e.push(n)}return e},getCharacters:function getCharacters(){var result=(0,prototype__WEBPACK_IMPORTED_MODULE_1__.$A)();return this.expressionTokens.each(function(token){if(token.startsWith("\\u"))result.push(eval('"'+token+'"'));else if(token.startsWith("\\")){var ch=this.charMap[token];result.push(ch||token.substring(1,token.length))}else result.push(token)}.bind(this)),result},getRepresentedString:function(){for(var t="",e=this.getCharacters(),i=e.length,n=0;n<i;n++){var _=e[n];t+=" "==_||"."==_||","==_?"["+_+"]":_,n<i-1&&(t+=", ")}return t}});const __WEBPACK_DEFAULT_EXPORT__=RegExpRepresenter},55894:(t,e,i)=>{"use strict";i.d(e,{Z:()=>Z});var n=i(72157),_=i.n(n),o=i(97836),s=i.n(o),a=i(15892),r=i.n(a),l=i(76144),c=i(71914),d=i(89560),E=i(63739),u=i(18580),h=i(31371);function m(t){return s().isArray(t)||(t=[t]),!!s().reduce(t,(function(t,e){return t||!e.resourceType||e.resourceType.indexOf("ReportUnit")+1||e.resourceType.indexOf("ReportOptions")+1}),!1)}const D=d.Z.extend({constructor:function(t){t||(t={}),this.options=t,d.Z.prototype.constructor.call(this,{model:this.model,resizable:!0,modal:!0,content:"",buttons:[{label:u.Z["button.export"],action:"export",primary:!0},{label:u.Z["button.cancel"],action:"cancel",primary:!1}]}),this.on("button:export",s().bind(this._onExportButtonClick,this)),this.on("button:cancel",s().bind(this._closeExportDialog,this))},initialize:function(t){this.exportView=new E.Z,this.listenTo(this.exportView.model,"validated",(function(t){t?this.buttons.enable("export"):this.buttons.disable("export")}),this),d.Z.prototype.initialize.apply(this,arguments)},openRepoDialog:function(t,e){var i,n=e&&("mouseup"===e.type&&e.target.ancestors().filter((function(t){return t.hasClassName("selected")}))[0]||"dataavailable"===e.type&&e.target),_=(i=t,s().isArray(i)?s().pluck(i,"URIString"):[i.URIString]),o=c.Z.organizationsFolderUri||"/organizations",a=c.Z.orgTemplateFolderUri||"/org_template",r=new RegExp("^("+o+"/([^/]+))+"),d=new RegExp("^"+o+a+"(/.*)?"),E=!!r.exec(_[0])&&!d.exec(_[0]),u={type:h.Z.REPOSITORY,isSubOrgLevel:E},D=" "+l.Z["export.dialog.repository.title"];this.addCssClasses("repository-export-dialog"),this._openExportDialog(u,D,n),this.exportView.model.set({uris:_,includeScheduledReportJobs:m(t)})},openTenantDialog:function(t){var e=" "+t.name,i={type:t.isRoot()?h.Z.ROOT_TENANT:h.Z.TENANT,tenantId:t.id};this.addCssClasses("tenant-export-dialog"),this._openExportDialog(i,e)},fieldIsValid:function(){},fieldIsInvalid:function(t){},_onExportButtonClick:function(){this.exportView.doExport(),this._closeExportDialog()},_closeExportDialog:function(){this.$el.css({width:this.width}),this.close(),this.$el.find(".export-view").html("")},_openExportDialog:function(t,e,i){var n=l.Z["export.dialog.title"]+(e||"");this.setContent(this.exportView.render(t).$el),this.setTitle(n),this.setReturnFocus(i),this.exportView.applyEpoxyBindings(),this.exportView.delegateEvents(),d.Z.prototype.open.apply(this,arguments),this.$el.css({minHeight:this.$el.outerHeight()}),this.width=this.$el.outerWidth()}});var p=i(46390);const g=d.Z.extend({constructor:function(t){t||(t={}),this.options=t,d.Z.prototype.constructor.call(this,{model:this.model,modal:!0,resizable:!0,additionalCssClasses:"tenant-import-dialog",content:"",buttons:[{label:u.Z["button.import"],action:"import",primary:!0},{label:u.Z["button.cancel"],action:"cancel",primary:!1}]}),this.on("button:import",s().bind(this._onImportButtonClick,this)),this.on("button:cancel",s().bind(this._closeImportDialog,this))},initialize:function(t){d.Z.prototype.initialize.apply(this,arguments),this.importView=new p.Z,this.listenTo(this.importView,"import:finished",(function(t){this.close(),this.trigger("import:finished",t)})),this.listenTo(this.importView.model,"validated",(function(t){t?this.buttons.enable("import"):this.buttons.disable("import")}),this)},openDialog:function(t){var e=l.Z["tenant.import.dialog.title"]+" "+t.name,i=t.isRoot()?h.Z.ROOT_TENANT:h.Z.TENANT;t.isRoot()&&this.addCssClasses("tenant"),this.setContent(this.importView.render({type:i,tenantId:t.id}).$el),this.setTitle(e),d.Z.prototype.open.apply(this,arguments),this.importView.applyEpoxyBindings(),this.importView.delegateEvents()},fieldIsValid:function(){},fieldIsInvalid:function(t){},_closeImportDialog:function(){this.close()},_onImportButtonClick:function(){var t=this;this.importView.doImport().done((function(e){t._closeImportDialog()}))}});var M=i(97572),T=i(15495),O=i(27661),A=i(71887),I=s().memoize((function(t){return s().map(t.options,(function(t){return t.model.get("action")}))}),(function(t){return t.cid}));const f=A.Z.extend({initialize:function(t){if(!t)throw new Error("Initialization error. Options required.");if(this.contextMenus=t.contextMenus,this.contextMenu=t.contextMenu,this.defaultSelectedItems=t.defaultSelectedItems||function(){},!this.contextMenus&&!this.contextMenu)throw new Error("contextMenu or contextMenus must be specified.");if(this.showContextMenuCondition=t.showContextMenuCondition,!this.showContextMenuCondition&&!this.contextMenu)throw new Error("contextMenu must be specified for default behaviour");!this.showContextMenuCondition&&(this.showContextMenuCondition=function(){return this.contextMenu}),this.model=t.model,A.Z.prototype.initialize.apply(this,arguments)},itemAction:function(t){var e=t.get("action");this.treeItem.action=e},itemsRendered:function(t,e){var i=this;this.listenTo(e,"list:item:contextmenu",(function(t,e){if(this.currentContextMenu=i.showContextMenuCondition(t),this.lastContextMenu&&this.lastContextMenu.hide(),this.lastContextMenu=this.currentContextMenu,this.currentContextMenu){this.currentContextMenu.treeItem=t;var n=this.currentContextMenu.treeItem.action;n||(n=i.defaultSelectedItems.call(this.currentContextMenu,t,I(this.currentContextMenu)))?this.currentContextMenu.resetSelection([n]):this.currentContextMenu.resetSelection(),this.currentContextMenu.show({left:e.pageX,top:e.pageY}),this.listenTo(this.currentContextMenu.collection,"select",(function(t,e){this.itemAction.call(this.currentContextMenu,e)}),this)}}),this)},remove:function(){this.stopListening(),this.contextMenu&&this.contextMenu.remove()}});function P(t){return t.contextPath+"/rest_v2/organizations?{{= id != 'organizations' ? 'rootTenantId=' + encodeURIComponent(id) : ''}}&offset={{= offset }}&limit={{= limit }}&maxDepth=1"}var L=function(t){return{processItem:function(e){return e._node=!0,e.label=e.value.tenantName,e.value.label=e.label,e.value.uri=e.value.tenantUri,e.id===t&&(e.addToSelection=!0),e}}};function v(t){var e=t.comparator,i=M.Z.use(O.Z,{i18n:u.Z,contentTemplate:t.tooltipContentTemplate});return t.contextMenu&&(i=i.use(f,{contextMenu:t.contextMenu})),i.create().instance(s().extend({},{selection:{allowed:{left:!0,right:!0},multiple:!1},rootless:!0,collapsed:!0,lazyLoad:!0,bufferSize:5e3,allowMouseDownEventPropagation:!0,dataUriTemplate:P({contextPath:c.Z.contextPath}),levelDataId:"id",getDataArray:function(t,i,n){var _=t?t.organization:[];return e&&_.sort(e),_},processors:[L(t.tenantId)],customDataLayers:{"/":s().extend(new T.Z({dataUriTemplate:c.Z.contextPath+"/flow.html?_flowId=treeFlow&method=getNode&provider=tenantTreeFoldersProvider&uri=/",processors:[L(t.tenantId)],getDataArray:function(t){return[{id:(t=JSON.parse(_()(t).text())).id,tenantName:t.label,tenantUri:"/",resourceType:"folder",_links:{content:"@fakeContentLink"}}]}}),{accept:"text/html",dataType:"text"})}}))}var C=i(59661);const R=C.Z.extend({constructor:function(t,e){if(!t||!s().isArray(t)||0===t.length)throw new Error("Menu should have options");e||(e={}),C.Z.call(this,{options:t,collection:e.collection,mainTemplate:e.menuContainerTemplate||'<div class="menu vertical dropDown fitable" tabindex="-1" style="z-index: 99999; display: none;">\n\n    <js-templateNonce></js-templateNonce>\n    <div class="content">\n        <ul></ul>\n    </div>\n</div>',optionTemplate:e.menuOptionTemplate||'<li class="leaf" {{ if(typeof(groupId)!== "undefined") { }} data-groupId = {{- groupId }} {{ } }} >\n\n    <js-templateNonce></js-templateNonce>\n    <p class="wrap button"><span class="icon"></span>{{- label }}</p>\n</li>',toggle:e.toggle,toggleClass:e.toggleClass}),this.maxSize=e.maxSize,this._onConstructor&&this._onConstructor(t,e)},initialize:function(){C.Z.prototype.initialize.apply(this,arguments),_()("body").append(this.$el),this._onInitialize&&this._onInitialize()},show:function(){var t=C.Z.prototype.show.apply(this,arguments);return this.applyMaxSize(),t},applyMaxSize:function(){this.maxSize&&this.options.length>this.maxSize&&this.$el.css({"overflow-y":"auto","max-height":this.maxSize*this.options[0].$el.height()+"px"})}});const b=R.extend({constructor:function(t,e){R.call(this,t,e),s().bindAll(this,"_tryHide"),this.topPadding=e&&e.topPadding||5,this.leftPadding=e&&e.leftPadding||5,this.extraOffset=t.extraOffset||10,this.hideOnMouseLeave=e&&e.hideOnMouseLeave||!1,s().bindAll(this,"_tryHide","_checkBounds"),this.hideOnMouseLeave&&this.$el.on("mouseleave",this._tryHide)},_tryHide:function(){this.hide(),this._signOffTryHide()},_signOffTryHide:function(){_()(document.body).off("click.contextMenu",this._tryHide),_()(document.body).off("mousemove",this._checkBounds)},show:function(t,e){if(!t||!s().isNumber(t.top)||!s().isNumber(t.left))throw new Error("Required params (top, left) missing: "+JSON.stringify(t));_()(document.body).on("click.contextMenu",this._tryHide),this.hideOnMouseLeave&&_()(document.body).on("mousemove",this._checkBounds);var i=t.top,n=t.left,o=this.topPadding,a=this.leftPadding,r=_()("body"),l=this._calculateMenuHeightOnShow(),c=this.$el.width(),d=e?e.height():r.height(),E=e?e.width():r.width(),u=e?e.offset():r.offset(),h=d-t.top,m=E-t.left;return h<l&&((i=t.top-l-o)<u.top&&(i+=u.top-i+o),i=i<0?d/2-l/2:i),m<c&&((n=t.left-c-a)<u.left&&(n+=u.left-n+a),n=n<0?E/2-c/2:n),s().extend(this,{top:i,left:n}),this.$el.css({top:this.top,left:this.left}),R.prototype.show.apply(this,arguments)},_checkBounds:function(t){var e={top:this.$el[0].offsetTop-this.extraOffset,bottom:this.$el[0].offsetTop+this.$el[0].offsetHeight+this.extraOffset,left:this.$el[0].offsetLeft-this.extraOffset,right:this.$el[0].offsetLeft+this.$el[0].offsetWidth+this.extraOffset};this._isPointerOutOfBounds(e,t)&&this._tryHide()},_isPointerOutOfBounds:function(t,e){return e.clientX<t.left||e.clientX>t.right||e.clientY<t.top||e.clientY>t.bottom},_calculateMenuHeightOnShow:function(){this.$el.css({opacity:0}),R.prototype.show.apply(this,arguments);var t=this.$el.height();return this.hide(),this.$el.css({opacity:""}),t},remove:function(){this._signOffTryHide(),this.hideOnMouseLeave&&this.$el.off("mouseleave",this._tryHide),R.prototype.remove.apply(this,arguments)}});var B="organizations";const Z=r().View.extend({initialize:function(t){this.$container=_()(t.container);var e=window.localStorage?JSON.parse(localStorage.getItem("selectedTenant")):null,i=t.selectedTenant||e,n=t.currentUser?t.currentUser.split("|")[1]||B:"/"===(null==i?void 0:i.tenantUri)&&i.tenantId||B;this.splittedUri=s().compact(i.tenantUri.split("/")),this.splittedUri.splice(this.splittedUri.length-1,1),this.splittedUri.unshift(n);var o={tooltipContentTemplate:'{{ if (model.value.tenantDesc) { }}\n\x3c!--<p class="message label">{{- i18n[\'tooltip.description\'] }}</p><p class="message">{{- model.value.tenantDesc }}</p>--\x3e\n{{ } }}\n{{ if (model.value.uri) { }}\n<p class="message label">{{- i18n[\'tooltip.path\'] }}</p><p class="message">{{- model.value.uri }}</p>\n{{ } }}\n\n    <js-templateNonce></js-templateNonce>',tenantId:i.id||n,comparator:t.comparator};t.removeContextMenuTreePlugin||(this.contextMenu=new b([{label:l.Z["context.menu.option.export"],action:"export"},{label:l.Z["context.menu.option.import"],action:"import"}],{hideOnMouseLeave:!0}),s().extend(o,{contextMenu:this.contextMenu}),this.listenTo(this.contextMenu,"option:export",this._onExport),this.listenTo(this.contextMenu,"option:import",this._onImport)),this.exportDialog=new D,this.importDialog=new g,this.tree=new v(o),this._initEvents()},render:function(){this.$container.append(this.tree.render().$el)},refreshTenant:function(t){var e=this.tree.getLevel(t);this.tree.getDataLayer(e).predefinedData=[],t?e.refresh():this.tree.refresh()},getTenant:function(){return this.selectedTenant},setTenant:function(t,e,i){e?this.selectedTenant[e]=i:this.selectedTenant=t},selectTenant:function(t){this.tree.select(t)},addTenant:function(t,e){var i=this.tree.getLevel(t);this.listenToOnce(i,"ready",(function(){this.tree.addItem(t,this._processItem(e,!0))})),i.open()},updateTenant:function(t,e,i){this.tree.updateItem(this._processItem(e,!1,i),t)},removeTenant:function(t,e){var i,n=this.tree.getLevel(e);t=s().isArray(t)?t:[t],s().each(t,(function(t){(i=this.tree.getLevel(t))&&i.remove()}),this),n.refresh(),n.open()},remove:function(){this.tree.remove(),this.contextMenu&&this.contextMenu.remove()},_processItem:function(t,e,i){var n=t.tenantId||t.id,_=t.tenantFolderUri||t.tenantUri,o=t.tenantName,s={id:n,label:o,uri:_,tenantUri:_,parentId:t.parentId};return e?{_node:!0,id:n,label:o,value:s}:{id:t.tenantId,addToSelection:i,label:o,value:s}},_initEvents:function(){this.expandedLevels=[],this.listenTo(this.tree,"selection:change",(function(t){this.trigger("selection:change",s().compact(t)[0])})),this.listenTo(this.importDialog,"import:finished",(function(t){this.refreshTenant(t),this.trigger("import:finished",t)})),this._recursivelyOpenLevels(this.tree.rootLevel)},_recursivelyOpenLevels:function(t){this.listenTo(t,"ready",(function(){var t=this.tree.getLevel(this.splittedUri[0]);this.splittedUri.splice(0,1),t?(this.expandedLevels.push(t),this.tree.expand(t.id),this._recursivelyOpenLevels(t)):s().each(this.expandedLevels,(function(t){this.stopListening(t,"ready")}),this)}))},_onExport:function(){this.exportDialog.openTenantDialog(this.selectedTenant)},_onImport:function(){this.importDialog.openDialog(this.selectedTenant)}})},45186:(t,e,i)=>{"use strict";i.d(e,{Z:()=>a});var n=i(64155),_=i(72157),o=i.n(_),s=function(t){this._id=t.id,this._contentId=t.contentId?t.contentId:void 0,this._scroll=t.scroll,this._loadFactor=t.loadFactor?t.loadFactor:.95,this._lastContentHeight=0,this._loading=!1,t.control?void 0!==t.control.length&&t.control.length>1?this._control=o()(t.control[0]):this._control=o()(t.control)[0]:this._control=this._scroll?this._scroll.parent:o()("#"+this._id)[0],this._scroll?this._content=this._scroll.element:t.content?void 0!==t.content.length&&t.content.length>1?this._content=o()(t.content[0]):this._content=o()(t.content)[0]:this._content=this._contentId?o()("#"+this._contentId)[0]:this._control.childElements()[0],this._eventType=(0,n.MEy)()?"touchmove":"scroll",this._control.observe(this._eventType,this._onScrollHandler.bind(this))};s.addMethod("destroy",(function(){this._control&&this._control.stopObserving(this._eventType,this._handler)})),s.addMethod("_onScrollHandler",(function(t){var e=this._scroll?-1*this._scroll.y:this._control.scrollTop,i=this._content.getHeight(),_=this._control.getHeight();i!=this._lastContentHeight&&(this._loading=!1);var o=!this._loading&&0!=i;(o=this._scroll?o&&this._scroll.isBottom():o&&(_+e)/i>this._loadFactor)&&(this._loading=!0,this._lastContentHeight=i,(0,n.zcy)()&&this.wait(),this.onLoad())})),s.addMethod("onLoad",n.cnY),s.addMethod("reset",(function(){(0,n.zcy)()?this._scroll.reset():this._control.scrollTop=0,this._loading=!1})),s.addMethod("wait",(function(){if(!this._waitIndicator){this._waitIndicator=new Element("div",{class:"dimmer resultsOverlay"});var t=this._control.getDimensions(),e=this._control.positionedOffset();this._waitIndicator.setStyle({zIndex:"4000",top:e.top+"px",left:e.left+"px",height:t.height+"px",width:t.width+"px"}),this._control.insert({after:this._waitIndicator})}this._waitIndicator.show()})),s.addMethod("stopWaiting",(function(){this._waitIndicator&&this._waitIndicator.hide()})),window.InfiniteScroll=s;const a=s},29338:(t,e,i)=>{"use strict";i.d(e,{Z:()=>r});var n=i(97836),_=i.n(n),o=i(89560),s=i(77325),a=i(18580);const r=o.Z.extend({constructor:function(t){t||(t={}),this.confirmDialogTemplate=t.confirmDialogTemplate||_().template(s.Z),o.Z.prototype.constructor.call(this,{modal:!0,additionalCssClasses:t.additionalCssClasses||"confirmationDialog",title:t.title||a.Z["dialog.confirm.title"],content:this.confirmDialogTemplate({text:t.text}),buttons:t.buttons||[{label:t.yesLabel||a.Z["button.yes"],action:"yes",primary:!0},{label:t.noLabel||a.Z["button.no"],action:"no",primary:!1}]})},initialize:function(){o.Z.prototype.initialize.apply(this,arguments),this.on("button:yes",this.close),this.on("button:no",this.close)},setContent:function(t){o.Z.prototype.setContent.call(this,this.confirmDialogTemplate({text:t}))}})},77325:(t,e,i)=>{"use strict";i.d(e,{Z:()=>n});const n="<p class='confirmationText'>\n\n    <js-templateNonce></js-templateNonce>\n    {{ print(_.xssSoftEscape(text)) }}\n</p>"}}]);
//# sourceMappingURL=chunk.8244.js.map