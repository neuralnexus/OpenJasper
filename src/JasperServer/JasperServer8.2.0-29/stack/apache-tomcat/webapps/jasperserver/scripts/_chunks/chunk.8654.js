(self.webpackChunkjrs_ui=self.webpackChunkjrs_ui||[]).push([[8654],{84581:(t,e,n)=>{"use strict";n.d(e,{p:()=>c,k:()=>u});var i=n(97836),s=n.n(i),a=n(64155),r=n(72157),o=n.n(r),l=n(84612),d=n(33806);function c(t,e){if(t){if(this.srcElement=t,e&&(this.label=e.label,this.text=e.text,this.offsets=e.offsets,this.showBelow=!!e.showBelow,this.templateId=e.templateId,this.loadTextCallback=e.loadTextCallback,this.loadTextExecuted=!1),this.disabled=!1,this.removed=!1,this.templateId)this._toAttribute(this.TOOLTIP_TEMPLATE,this.templateId);else{var n=this._fromAttribute(this.TOOLTIP_TEMPLATE);this.templateId=n&&n.length>0?n:this.TOOLTIP_TEMPLATE_ID}this.label?this._toAttribute(this.TOOLTIP_LABEL,this.label):this.label=this._fromAttribute(this.TOOLTIP_LABEL),this.text?this._toAttribute(this.TOOLTIP_TEXT,this.text):this.text=this._fromAttribute(this.TOOLTIP_TEXT),this.label&&(this.label=this._escapeText(this.label)),this.text&&(this.text=this._escapeText(this.text)),this.srcElement.jsTooltip=this,u.tooltips.push(this)}}c.addVar("SEPARATOR","@@"),c.addVar("TOOLTIP_LABEL","tooltiplabel"),c.addVar("TOOLTIP_TEXT","tooltiptext"),c.addVar("TOOLTIP_TEMPLATE","tooltiptemplate"),c.addVar("TOOLTIP_TEMPLATE_ID","jsTooltip"),c.addVar("LABEL_PATTERN",".message.label"),c.addVar("TEXT_PATTERN",".message:not(.label)"),c.addMethod("_toAttribute",(function(t,e){this.srcElement&&(e=l.Z.hardEscape(e),this.srcElement.writeAttribute(t,(0,a.kJL)(e)?e.join(this.SEPARATOR):e))})),c.addMethod("_fromAttribute",(function(t){if(this.srcElement&&this.srcElement.hasAttribute(t)){var e=this.srcElement.readAttribute(t);return e.include(this.SEPARATOR)?e.split(this.SEPARATOR):e}return null})),c.addMethod("_setValues",(function(t,e){t.each((function(t,n){(s().isString(e[n])||s().isNumber(e[n]))&&t.update(l.Z.hardEscape(e[n]))}))})),c.addMethod("_calculateZIndex",(function(t){function e(t){return parseInt(o()(t).css("z-index"))}var n=e(t);s().isNumber(n)&&!s().isNaN(n)||(n=1e3);var i=s().flatten([this.srcElement,o()(this.srcElement).parents().toArray()]);return s().reduce(i,(function(t,n){var i=e(n);return s().isNumber(i)&&!s().isNaN(i)&&(t=Math.max(t,i)),t}),n)+1})),c.addMethod("_escapeText",(function(t){return s().isArray(t)?s().map(t,(function(t){return l.Z.hardEscape(t)})):l.Z.hardEscape(t)})),c.addMethod("show",(function(t){var e;t&&(this.offsets=t),this._element=o()("#"+this.templateId)[0],this.showBelow?(e=(0,a.Qyk)(this.srcElement))[1]+=this.srcElement.clientHeight+5:e=[(0,a.vjD)()+5,(0,a.cxm)()+5],this.offsets&&(e[0]+=this.offsets[0],e[1]+=this.offsets[1]),this._element.setStyle({position:"absolute",left:e[0]+"px",top:e[1]+"px",zIndex:this._calculateZIndex(this._element)});var n=this._element.select(this.LABEL_PATTERN),i=this._element.select(this.TEXT_PATTERN);if(this.label&&this._setValues(n,(0,a.kJL)(this.label)?this.label:[this.label]),this.text&&this._setValues(i,(0,a.kJL)(this.text)?this.text:[this.text]),o()(this._element).removeClass(d.Z.HIDDEN_CLASS),e[0]+this._element.clientWidth>o()(window).width()){var s=e[0]-this._element.clientWidth>0?e[0]-this._element.clientWidth:15;this._element.setStyle({left:s+"px"})}if(e[1]+this._element.clientHeight>o()(window).height()){var r=e[1]-this._element.clientHeight-10;this._element.setStyle({top:r+"px"})}return this.loadTextCallback&&!this.loadTextExecuted&&(this.loadTextExecuted=!0,this.loadTextCallback(this)),this})),c.addMethod("updateText",(function(t){if(this.text=this._escapeText(t),this._element){var e=this._element.select(this.TEXT_PATTERN);this._setValues(e,(0,a.kJL)(this.text)?this.text:[this.text])}})),c.addMethod("hide",(function(){this._element&&o()(this._element).addClass(d.Z.HIDDEN_CLASS)})),c.addMethod("disable",(function(){u.hideJSTooltip(this.srcElement),this.disabled=!0})),c.addMethod("enable",(function(){this.disabled=!1,u.showJSTooltip(this.srcElement,this.offsets)})),c.addMethod("remove",(function(){var t=u.tooltips.indexOf(this.srcElement.jsTooltip);-1!==t&&(u.hideJSTooltip(this.srcElement),u.tooltips.splice(t,1)),this.removed=!0})),c.addMethod("isRemoved",(function(){return this.removed}));var u={TOOLTIP_PATTERN:"*[tooltiptext] > *",ELEMENT_WITH_TOOLTIP_PATTERN:"*[tooltiptext]",tooltips:[],showJSTooltip:function(t,e){if(t.jsTooltip){if(!t.jsTooltip.disabled&&e){var n=e[0],i=e[1];this.cleanUp();var s=o()(t).attr("tooltipappeardelay");s=s?parseInt(s):1e3,t.jsTooltip.timer&&clearTimeout(t.jsTooltip.timer),t.jsTooltip.timer=setTimeout((function(){t.jsTooltip.show([n,i])}),s),o()(t).on("mousemove",(function(t){n=t.clientX,i=t.clientY}))}}else t.jsTooltip=new c(t,{})},enableTooltips:function(){(this.tooltips||[]).forEach((function(t){t.enable()}))},disableTooltips:function(){(this.tooltips||[]).forEach((function(t){t.disable()}))},hideJSTooltip:function(t){t&&t.jsTooltip&&(t.jsTooltip.timer&&clearTimeout(t.jsTooltip.timer),t.jsTooltip.hide(),o()(t).off("mousemove"))},cleanUp:function(){if(this.tooltips&&this.tooltips.length>0){var t=[],e="fuigasuifdughaiadbvguaidbapvuwbev";this.tooltips.each((function(n){n.srcElement.id&&document.getElementById(n.srcElement.id)||(n.srcElement.setAttribute("id",e),document.getElementById(e)||(n.hide(),t.push(n)),n.srcElement.removeAttribute("id"))})),t.length>0&&(this.tooltips=this.tooltips.reject((function(e){return t.include(e)})))}}}},46460:(t,e,n)=>{"use strict";n.d(e,{hp:()=>u});var i=n(52499),s=n(33806),a=n(64155),r=n(52687),o=n(72157),l=n.n(o),d=n(97836),c=n.n(d),u={INPUT_CONTROLS_FORM:"inputControlsForm",INPUT_CONTROLS_CONTAINER:"inputControlsContainer",INPUT_CONTROLS_DIALOG:"inputControls",SAVE_REPORT_OPTIONS_DIALOG:"saveValues",REPORT_OPTIONS_SELECTOR:"savedValues",TOOLBAR_CONTROLS_BUTTON:"ICDialog",DEFAULT_OPTION_TEXT:"Options",KEY_DOWN_TIMEOUT:800,NULL_SUBSTITUTION_VALUE:null,NULL_SUBSTITUTION_LABEL:null,NOTHING_SUBSTITUTION_VALUE:null,_BUTTON_OK:"ok",_BUTTON_SAVE:"save",_BUTTON_REMOVE:"remove",_BUTTON_APPLY:"apply",_BUTTON_CANCEL:"cancel",TEMP_REPORT_CONTAINER:"tempReportContainer",WRAPPER_ERROR_FLAG_PREFIX_SELECTOR:"div[id^=error_]",WRAPPERS_ERRORS_DIV:"wrappersErrors",EVAL_SCRIPT_ELEMENT_NAME:"_evalScript",CONTROL_OPTIONS_TEXT:"Saved Values:",CALENDAR_ICON_SPAN:'<span class="button picker calTriggerWrapper" ></span>',_messages:{},getMessage:function(t,e){var n=this._messages[t];return n?new i.Template(n).evaluate(e||{}):""},setControlError:function(t,e){t&&(t=l()("#"+t),e[0]?(t.parent().addClass(s.Z.ERROR_CLASS),t.nextSiblings()[0].update(e)):(t.parent().removeClass(s.Z.ERROR_CLASS),t.nextSiblings()[0].update("")))},setControlsErrors:function(t){var e=l()(u.WRAPPER_ERROR_FLAG_PREFIX_SELECTOR),n=0,s=-1;e.each((function(e){var a=!1;t&&t.each((function(t){if(e.id.indexOf(t[0])>-1)throw u.setControlError(e,t[1]),s<0&&(l()("#inputControlsForm .leaf").each((function(t,e){t<n&&(s+=e.clientHeight)})),l()(".groupBox .content .body")[0].scrollTop=s),a=!0,i.$break;n++})),a||u.setControlError(e,"")}))},buildParams:function(t){var e="";if(c().isObject(t)&&!c().isEmpty(t)){var n=function(t){return t.length>0&&"&"!=t[t.length-1]&&(t+="&"),t};c().each(t,(function(t,i){e=n(e),c().isArray(t)?c().each(t,(function(t){e=n(e),e+=i+"="+encodeURIComponent(t)})):e+=i+"="+encodeURIComponent(t)}))}return e},buildSelectedDataUri:function(t,e){var n=u.buildParams(t);return c().isObject(e)&&!c().isEmpty(e)?n+"&"+u.buildParams(e):n}},p=function(t){var e=this;this._dom=l()("#"+u.INPUT_CONTROLS_DIALOG)[0],this.buttonActions=t,l()("#"+u.INPUT_CONTROLS_DIALOG).on("mouseup touchend","button",(function(t){if(this.id&&!this.id.empty()&&!this.disabled){var n=e.buttonActions["button#"+this.id];n&&n()}}))};p.addMethod("_dialogClickHandler",(function(t){var e=t.element();for(var n in this.buttonActions)if((0,a.BwZ)(e,[n],!0))return this.buttonActions[n](),t.preventDefault(),void t.stopPropagation()})),p.addMethod("show",(function(){r.Z.popup.show(this._dom)})),p.addMethod("hide",(function(){r.Z.popup.hide(this._dom)}));var h=function(t){this._dom=l()("#"+u.SAVE_REPORT_OPTIONS_DIALOG)[0],this.input=l()(this._dom).find("input#savedValuesName")[0],this.overwrite=!1,this.buttonActions=t,this._dialogClickHandler=this._dialogClickHandler.bindAsEventListener(this),this._dom.observe("click",this._dialogClickHandler)};h.addMethod("remove",(function(){this._dom.stopObserving("click",this._dialogClickHandler)})),h.addMethod("_dialogClickHandler",(function(t){var e=t.element();for(var n in this.buttonActions)if((0,a.BwZ)(e,[n],!0))return this.buttonActions[n](),t.preventDefault(),void t.stopPropagation()})),h.addMethod("show",(function(){this.input.setValue(u.DEFAULT_OPTION_TEXT),r.Z.popup.show(this._dom)})),h.addMethod("hide",(function(){r.Z.popup.hide(this._dom),this.hideWarning()})),h.addMethod("showWarning",(function(t){var e=l()("#"+u.SAVE_REPORT_OPTIONS_DIALOG).find(".warning");t&&e.text(t),e.show()})),h.addMethod("hideWarning",(function(){var t=l()("#"+u.SAVE_REPORT_OPTIONS_DIALOG).find(".warning");t.text(""),t.hide()}))},59002:(t,e,n)=>{"use strict";var i=n(94277),s=n(236),a=n(97836),r=n.n(a),o=n(52687),l=n(72157),d=n.n(l);n(29437);i.hl.Controls=function(t,e,n){var i=navigator.userAgent.toLowerCase().indexOf("msie")>-1;function a(t){return function(n){return e.template(t)(e.defaults({data:void 0,uuid:void 0,message:void 0,description:void 0},n))}}return{Base:e.extend((function(){}),{extend:function(t,n){var i,s=this;i=t&&e.has(t,"constructor")?t.constructor:function(){return s.apply(this,arguments)},e.extend(i,s,n);var a=function(){this.constructor=i};return a.prototype=s.prototype,i.prototype=new a,t&&e.extend(i.prototype,t),i.__super__=s.prototype,i}}),TemplateEngine:{render:function(t,n,i){if(!i)return a(t)(n);if(i==this.STD_PLACEHOLDERS){var s=String(t);return e.each(n,(function(t,e){var n=new RegExp("\\{"+e+"\\}");s=s.replace(n,t)})),s}},renderUrl:function(t,n,s){var a=e.template(t)(n);return i&&!s&&(a=encodeURI(a)),a},getTemplateText:function(e){return t("#"+e).html()},createTemplate:function(e){var n=t("#"+e).html();if(n&&n.length>0)return a(n)},createTemplateSection:function(t,e){var n="\x3c!--#val--\x3e(\\s|\\S)*\x3c!--/val--\x3e".replace(/val/g,t),i=new RegExp(n,"g");return a(this.getTemplateText(e).match(i)[0])},STD_PLACEHOLDERS:"std_placeholder"},Utils:{LOADING_DIALOG_DELAY:800,INPUT_CONTROLS_COMPONENT_ID:"input-controls",isElementInDom:function(t){var e=t.nextSibling,n=t.parentNode&&11!==t.parentNode.nodeType;return e||n},setInnerHtml:function(n,s,a){var r,o,l;if(this.isElementInDom(n)&&(r=n.nextSibling,o=n.parentNode,l=n.style.display,n.style.display="none",o.removeChild(n)),t(n).html(""),i&&"SELECT"==n.tagName){var d=document.createDocumentFragment();e.each(a.data,(function(n){var i=document.createElement("OPTION");i.value=e.isUndefined(n.value)?n.id:n.value,t(i).html(n.label),n.selected&&i.setAttribute("selected","selected"),d.appendChild(i)})),n.appendChild(d)}else t(n).html(s(a));if(r?o.insertBefore(n,r):o&&o.appendChild(n),n.style.display=l,i&&"SELECT"==n.tagName){var c=n.getAttribute("style");n.removeAttribute("style"),n.setAttribute("style",c)}},wait:function(e){return t.Deferred((function(t){setTimeout(t.resolve,e)}))},showLoadingDialogOn:function(i,a,r){this.wait(a||this.LOADING_DIALOG_DELAY).then(e.bind((function(){"pending"==i.state()&&(n.popup.showShared(t("#"+s.hj.LOADING_ID)[0],r,{focus:!1,owner:this.INPUT_CONTROLS_COMPONENT_ID}),t.when(i).always(e.bind((function(){var e=this.INPUT_CONTROLS_COMPONENT_ID;this.wait(500).then((function(){window.viewer&&window.viewer.loading?window.viewer.loaded&&n.popup.hideShared(t("#"+s.hj.LOADING_ID)[0],e):n.popup.hideShared(t("#"+s.hj.LOADING_ID)[0],e)}))}),this)))}),this))},createTimer:function(e){var n=new t.Deferred;return n.done((function(t){var n=(new Date).getTime()-t;console.log(e+" took time: "+n+" msec.")})),{start:function(){return this.startTime=(new Date).getTime(),this},stop:function(){return n.resolve(this.startTime),this}}}},listen:function(n,i){e.each(n,(function(n,i){t(document).on(i,e.bind(n,this))}),i||this)},ignore:function(e,n){t(document).off(e,n)}}}(d(),r(),o.Z),window.Controls=i.hl.Controls;i.hl.Controls},37260:(t,e,n)=>{"use strict";n.r(e);var i=n(72157),s=n.n(i),a=n(97836),r=n.n(a),o=n(70682),l=n(15892),d=n.n(l),c=n(71914),u=n(59272),p=n(24777);p.Z.globalConfiguration=p.Z.globalConfiguration||{};const h=p.Z.globalConfiguration;var g=n(8121),m=n.n(g);const f="NORMAL",b="PAUSED",v="EXECUTING";var y=n(12354),T=n.n(y),_=n(64155);function D(t){return(D="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}var w=",",j="YYYY-MM-DD HH:mm",C=!1,E={},S={},x=function(t){var e,n=[{id:0,value:"dd",key:"day-of-month-2",result:"DD"},{id:1,value:"DD",key:"day-of-week",result:"dddd"},{id:2,value:"mm",key:"month-2",result:"MM"},{id:3,value:"MM",key:"month-name",result:"MMMM"},{id:4,value:"yy",key:"year-4",result:"YYYY"},{id:5,value:"d",key:"day-of-month-1",result:"D"},{id:6,value:"D",key:"day-of-week-abbr",result:"ddd"},{id:7,value:"m",key:"month-1",result:"M"},{id:8,value:"M",key:"month-name-abbr",result:"MMM"},{id:9,value:"y",key:"year-2",result:"YY"},{id:10,value:"oo",key:"day-of-year-2",result:"DDDD"},{id:11,value:"o",key:"day-of-year-1",result:"DDD"}];for(e=0;e<n.length;e++)t=t.replace(new RegExp(n[e].value,"g"),"{"+n[e].id+"}");for(e=0;e<n.length;e++)t=t.replace(new RegExp("\\{"+n[e].id+"\\}","g"),n[e].result);return t}(c.Z.calendar.timepicker.dateFormat)+" "+c.Z.calendar.timepicker.timeFormat.replace(":ss","");const I=d().Model.extend({ftpPortDefaults:{ftp:"21",ftps:"990",sftp:"22"},urlRoot:c.Z.contextPath+"/rest_v2/jobs",validateAll:function(t){var e=this,n=s().Deferred();return this.runServerValidationRequests().always((function(i){var s=e.isValid(t);i&&i.errorCode&&(s=!1,e.trigger("invalid",[i],{switchToErrors:!1})),s?n.resolve():n.reject()})),n},isValid:function(t){return!this.validate(this.attributes,{validate:!0,editMode:t}).length},validate:function(t,e){if(!0===(e=e||{}).validate){var n,i=[];t.trigger&&(2==t.trigger.startType&&(t.trigger.startDate?T()(t.trigger.startDate,x,!0).isValid()?!e.editMode&&this.ifPastDate(t.trigger.startDate,t.trigger.timezone)&&i.push({field:"startDate",errorCode:"error.before.current.date.trigger.startDate"}):i.push({field:"startDate",errorCode:"error.invalid.date"}):i.push({field:"startDate",errorCode:"report.scheduling.job.edit.specify.startdate"})),"simple"===t.trigger.type?(this.isNumeric(t.trigger.recurrenceInterval)?this.isNumeric(t.trigger.recurrenceInterval,{minValue:-2147483648,maxValue:2147483647})||i.push({field:"recurrenceInterval",errorCode:"typeMismatch.java.lang.Integer"}):i.push({field:"recurrenceInterval",errorCode:"report.scheduling.job.edit.specify.recurrenceinterval"}),"numberOfTimes"===t.trigger.radioEndDate&&(this.isNumeric(t.trigger.occurrenceCount)?this.isNumeric(t.trigger.occurrenceCount,{minValue:-2147483648,maxValue:2147483647})||i.push({field:"occurrenceCount",errorCode:"typeMismatch.java.lang.Integer"}):i.push({field:"occurrenceCount",errorCode:"report.scheduling.job.edit.specify.numberoftimestorunreport"})),"specificDate"===t.trigger.radioEndDate&&(t.trigger.endDate?T()(t.trigger.endDate,x,!0).isValid()?(this.ifPastDate(t.trigger.endDate,t.trigger.timezone)&&i.push({field:"simpleEndDate",errorCode:"error.before.current.date.trigger.endDate"}),2==t.trigger.startType&&t.trigger.startDate&&+new Date(t.trigger.startDate)>=+new Date(t.trigger.endDate)&&i.push({field:"simpleEndDate",errorCode:"error.before.start.date.trigger.endDate"})):i.push({field:"simpleEndDate",errorCode:"error.invalid.date"}):i.push({field:"simpleEndDate",errorCode:"report.scheduling.job.edit.specify.enddate"}))):"calendar"===t.trigger.type&&("selectedMonths"===t.trigger.radioWhichMonth&&0===t.trigger.months.month.length&&i.push({field:"monthSelector",errorCode:"report.scheduling.job.edit.specify.monthswhenjobshouldrun"}),t.trigger.endDate&&(T()(t.trigger.endDate,x,!0).isValid()?(this.ifPastDate(t.trigger.endDate,t.trigger.timezone)&&i.push({field:"calendarEndDate",errorCode:"error.before.current.date.trigger.endDate"}),2==t.trigger.startType&&t.trigger.startDate&&+new Date(t.trigger.startDate)>=+new Date(t.trigger.endDate)&&i.push({field:"calendarEndDate",errorCode:"error.before.start.date.trigger.endDate"})):i.push({field:"calendarEndDate",errorCode:"error.invalid.date"})),"selectedDays"===t.trigger.radioWhichDay&&0===t.trigger.weekDays.day.length&&i.push({field:"daySelector",errorCode:"report.scheduling.job.edit.specify.dayswhenjobshouldrun"}),"datesInMonth"===t.trigger.radioWhichDay&&((n=this.parseIntervals(t.trigger.monthDays,"daysInMonth"))||i.push({field:"datesInMonth",errorCode:"report.scheduling.job.edit.specify.whenjobshouldrun"})),this.parseIntervals(t.trigger.hours,"hours")||i.push({field:"hours",errorCode:"error.not.empty.trigger.hours"}),this.parseIntervals(t.trigger.minutes,"minutes")||i.push({field:"minutes",errorCode:"error.not.empty.trigger.minutesshould"})));var s=t.repositoryDestination;if(s.outputDescription&&s.outputDescription.length>250&&i.push({field:"outputDescription",errorCode:"report.scheduling.job.output.long.description"}),s.sequentialFilenames&&!s.timestampPattern&&i.push({field:"timestampPattern",errorCode:"report.scheduling.job.output.timestamppattern"}),t.baseOutputFilename||i.push({field:"baseOutputFilename",errorCode:"error.not.empty.baseOutputFilename"}),t.baseOutputFilename&&!this.isValidFileName(t.baseOutputFilename)&&i.push({field:"baseOutputFilename",errorCode:"error.invalid.chars.baseOutputFilename"}),t.outputFormats.outputFormat&&t.outputFormats.outputFormat.length||i.push({field:"outputFormats",errorCode:"error.report.job.no.output.formats"}),s.saveToRepository&&!s.folderURI&&i.push({field:"outputRepository",errorCode:"error.not.empty.folderURI"}),s.saveToRepository&&s.folderURI&&!this.isValidUri(s.folderURI)&&i.push({field:"outputRepository",errorCode:"error.report.job.invalid.chars.folderURI"}),r().isUndefined(s.outputLocalFolder)||""!==s.outputLocalFolder||i.push({field:"outputHostFileSystem",errorCode:"error.not.empty.folder"}),s.outputFTPInfo.enabled&&(s.outputFTPInfo.serverName&&this.isHostName(s.outputFTPInfo.serverName)||i.push({field:"ftpAddress",errorCode:"error.report.scheduling.empty.ftp.server"}),s.outputFTPInfo.port&&this.isNumeric(s.outputFTPInfo.port)&&0<(n=parseInt(s.outputFTPInfo.port,10))&&n<=65535||i.push({field:"ftpPort",errorCode:"error.report.scheduling.empty.ftp.port"}),"sftp"===s.outputFTPInfo.type&&s.outputFTPInfo.sshKeyEnabled&&(s.outputFTPInfo.sshKey&&""!==s.outputFTPInfo.sshKey?this.isValidUri(s.outputFTPInfo.sshKey)||i.push({field:"sshKey",errorCode:"error.report.job.invalid.chars.sshKey"}):i.push({field:"sshKey",errorCode:"error.not.empty.sshKey"}))),t.mailNotification){var a=t.mailNotification.toAddresses&&t.mailNotification.toAddresses.address||"",o=t.mailNotification.ccAddresses&&t.mailNotification.ccAddresses.address||"",l=t.mailNotification.bccAddresses&&t.mailNotification.bccAddresses.address||"",d=t.mailNotification.subject||"",c=t.mailNotification.messageText||"";a&&!this.validateEmails(a)&&i.push({field:"to_suc",errorCode:"error.invalid.mailNotification.invalidEmailaddresses"}),o&&!this.validateEmails(o)&&i.push({field:"cc_suc",errorCode:"error.invalid.mailNotification.invalidEmailaddresses"}),l&&!this.validateEmails(l)&&i.push({field:"bcc_suc",errorCode:"error.invalid.mailNotification.invalidEmailaddresses"}),(a||d)&&(a||i.push({field:"to_suc",errorCode:"error.invalid.mailNotification.specify.oneaddresses"}),d||i.push({field:"subject_suc",errorCode:"report.scheduling.job.edit.specify.messagesubject"})),c&&(a||i.push({field:"to_suc",errorCode:"error.invalid.mailNotification.specify.oneaddresses"}),d||i.push({field:"subject_suc",errorCode:"report.scheduling.job.edit.specify.messagesubject"}))}if(t.alert){var u=t.alert.toAddresses&&t.alert.toAddresses.address||"",p=t.alert.subject||"";u&&!this.validateEmails(u)&&i.push({field:"job_status_to",errorCode:"error.invalid.mailNotification.invalidEmailaddresses"}),(u||p)&&(u||i.push({field:"job_status_to",errorCode:"error.invalid.mailNotification.specify.oneaddresses"}),p||i.push({field:"job_status_subject",errorCode:"report.scheduling.job.edit.specify.messagesubject"})),-1===t.alert.jobState.indexOf("SUCCESS_ONLY")&&-1===t.alert.jobState.indexOf("ALL")||(u||i.push({field:"job_status_to",errorCode:"error.invalid.mailNotification.specify.oneaddresses"}),p||i.push({field:"job_status_subject",errorCode:"report.scheduling.job.edit.specify.messagesubject"})),-1===t.alert.jobState.indexOf("FAIL_ONLY")&&-1===t.alert.jobState.indexOf("ALL")||(u||i.push({field:"job_status_to",errorCode:"error.invalid.mailNotification.specify.oneaddresses"}),p||i.push({field:"job_status_subject",errorCode:"report.scheduling.job.edit.specify.messagesubject"}))}return this.trigger("clearAllErrors"),i.length?this.trigger("invalid",i):this.trigger("valid",[]),i}},update:function(t,e){if("object"===D(e))for(var n in e=r().extend({},this.get(t),e))e.hasOwnProperty(n)&&void 0===e[n]&&delete e[n];this.set(t,e)},value:function(t){for(var e=this.attributes,n=0,i=(t=t.split("/")).length-1;n<i;n++){if(!e)return;e=e[t[n]]}if(e)return e[t[t.length-1]]},sync:function(t,e,n){return"update"===t?t="create":"create"===t&&(t="update"),n||(n={}),n.contentType="application/job+json",n.beforeSend=function(t){t.setRequestHeader("Accept","application/job+json")},n.cache=!1,d().sync(t,e,n)},parse:function(t){if(t.trigger&&("simpleTrigger"in t.trigger?t.trigger.type="simpleTrigger":"calendarTrigger"in t.trigger&&(t.trigger.type="calendarTrigger"),t.trigger.type&&(r().extend(t.trigger,t.trigger[t.trigger.type]),delete t.trigger[t.trigger.type]),"simpleTrigger"===t.trigger.type&&null===t.trigger.recurrenceInterval?t.trigger.type="none":"simpleTrigger"===t.trigger.type?t.trigger.type="simple":"calendarTrigger"===t.trigger.type?t.trigger.type="calendar":t.trigger.type="none","none"===t.trigger.type&&(t.trigger.occurrenceCount=""),void 0===t.trigger.startType&&(t.trigger.startType=1),t.trigger.startDate&&(t.trigger.startDate=this.formatDate(t.trigger.startDate)),void 0!==t.trigger.timezone&&null!==t.trigger.timezone||(t.trigger.timezone=c.Z.usersTimeZone||"America/Los_Angeles"),"simple"!==t.trigger.type&&"calendar"!==t.trigger.type||void 0!==t.trigger.calendarName&&null!==t.trigger.calendarName||(t.trigger.calendarName=""),void 0!==t.trigger.recurrenceInterval&&null!==t.trigger.recurrenceInterval||(t.trigger.recurrenceInterval=1),void 0!==t.trigger.recurrenceIntervalUnit&&null!==t.trigger.recurrenceIntervalUnit||(t.trigger.recurrenceIntervalUnit="DAY"),void 0!==t.trigger.occurrenceCount&&null!==t.trigger.occurrenceCount||(t.trigger.occurrenceCount=""),void 0===t.trigger.endDate||null===t.trigger.endDate?t.trigger.endDate="":t.trigger.endDate=this.formatDate(t.trigger.endDate),t.trigger.endDate?t.trigger.endDate&&(t.trigger.radioEndDate="specificDate",t.trigger.occurrenceCount=""):-1!=t.trigger.occurrenceCount&&t.trigger.occurrenceCount?t.trigger.radioEndDate="numberOfTimes":(t.trigger.radioEndDate="indefinitely",t.trigger.occurrenceCount=""),t.trigger.months||(t.trigger.months={}),r().isArray(t.trigger.months.month)||(t.trigger.months.month=[]),t.trigger.radioWhichMonth="everyMonth",0<t.trigger.months.month.length&&t.trigger.months.month.length<12?t.trigger.radioWhichMonth="selectedMonths":12==t.trigger.months.month.length&&(t.trigger.radioWhichMonth="everyMonth",t.trigger.months.month=[]),t.trigger.weekDays||(t.trigger.weekDays={}),r().isArray(t.trigger.weekDays.day)||(t.trigger.weekDays.day=[]),void 0===t.trigger.monthDays||null===t.trigger.monthDays?t.trigger.monthDays="":t.trigger.monthDays=t.trigger.monthDays.toString().replace(/ /g,"").replace(/,/g,", "),void 0!==t.trigger.daysType?"month"==t.trigger.daysType.toLowerCase()?(t.trigger.radioWhichDay="datesInMonth",t.trigger.weekDays.day=[]):"week"==t.trigger.daysType.toLowerCase()?(t.trigger.radioWhichDay="selectedDays",t.trigger.monthDays=""):(t.trigger.radioWhichDay="everyDay",t.trigger.weekDays.day=[],t.trigger.monthDays=""):0<t.trigger.weekDays.day.length&&t.trigger.weekDays.day.length<7?t.trigger.radioWhichDay="selectedDays":t.trigger.monthDays?t.trigger.radioWhichDay="datesInMonth":t.trigger.radioWhichDay="everyDay",void 0===t.trigger.hours||null===t.trigger.hours?t.trigger.hours="0":t.trigger.hours=t.trigger.hours.toString().replace(/ /g,"").replace(/,/g,", "),void 0===t.trigger.minutes||null===t.trigger.minutes?t.trigger.minutes="0":t.trigger.minutes=t.trigger.minutes.toString().replace(/ /g,"").replace(/,/g,", ")),null!=t.outputFormats&&null!=t.outputFormats.outputFormat)for(var e=t.outputFormats.outputFormat,n=0;n<e.length;n++)"XLS"===e[n]?e[n]="XLSX":"XLS_NOPAG"===e[n]&&(e[n]="XLSX_NOPAG");if(void 0===t.repositoryDestination||null===t.repositoryDestination)t.repositoryDestination={overwriteFiles:!0,sequentialFilenames:!1,saveToRepository:!0,timestampPattern:"yyyyMMddHHmm",outputFTPInfo:{propertiesMap:{},type:"ftp",port:"21",implicit:!0,pbsz:0}};else{if(void 0===t.repositoryDestination.outputFTPInfo||null===t.repositoryDestination.outputFTPInfo)t.repositoryDestination.outputFTPInfo={};else{var i=t.repositoryDestination.outputFTPInfo;i.enabled=!!i.serverName&&!!i.userName,i.sshKeyEnabled=!!i.sshKey,i.enabled&&(t.repositoryDestination.outputFTPInfo.password=c.Z.VALUE_SUBSTITUTION),i.sshKeyEnabled&&(t.repositoryDestination.outputFTPInfo.sshPassphrase=c.Z.VALUE_SUBSTITUTION)}t.repositoryDestination.timestampPattern||(t.repositoryDestination.timestampPattern="yyyyMMddHHmm")}void 0!==t.repositoryDestination.outputFTPInfo.port&&null!==t.repositoryDestination.outputFTPInfo.port||(t.repositoryDestination.outputFTPInfo.port=this.ftpPortDefaults[t.repositoryDestination.outputFTPInfo.type]);var s="SEND";if(t.mailNotification=t.mailNotification||{toAddresses:{address:""},ccAddresses:{address:""},bccAddresses:{address:""},subject:"",messageText:"",resultSendType:s},t.alert=t.alert||{toAddresses:{address:""},subject:"",messageText:"",messageTextWhenJobFails:"",jobState:"NONE"},void 0===t.mailNotification.resultSendType||null===t.mailNotification.resultSendType)t.mailNotification.resultSendType=s;else{var a=t.mailNotification.resultSendType;"SEND"!==a&&"SEND_ATTACHMENT"!==a&&"SEND_ATTACHMENT_NOZIP"!==a&&"SEND_EMBED"!==a&&"SEND_ATTACHMENT_ZIP_ALL"!==a&&"SEND_EMBED_ZIP_ALL_OTHERS"!==a&&(t.mailNotification.resultSendType=s)}var o=["toAddresses","ccAddresses","bccAddresses"];for(n=0;n<o.length;n++)void 0===t.mailNotification[o[n]]||null===t.mailNotification[o[n]]?t.mailNotification[o[n]]={address:""}:void 0!==t.mailNotification[o[n]].address&&null!==t.mailNotification[o[n]].address||(t.mailNotification[o[n]].address=""),r().isArray(t.mailNotification[o[n]].address)&&t.mailNotification[o[n]].address.length>0?t.mailNotification[o[n]].address=t.mailNotification[o[n]].address.join(", "):t.mailNotification[o[n]].address="";return t.mailNotification.toAddresses.address||(t.mailNotification={toAddresses:{address:""},ccAddresses:{address:""},bccAddresses:{address:""},subject:"",messageText:"",resultSendType:s}),void 0===t.alert.toAddresses||null===t.alert.toAddresses?t.alert.toAddresses={address:""}:void 0!==t.alert.toAddresses.address&&null!==t.alert.toAddresses.address||(t.alert.toAddresses.address=""),r().isArray(t.alert.toAddresses.address)&&t.alert.toAddresses.address.length>0?t.alert.toAddresses.address=t.alert.toAddresses.address.join(", "):t.alert={toAddresses:{address:""},subject:"",messageText:"",messageTextWhenJobFails:"",jobState:"NONE",includingReportJobInfo:!1,includingStackTrace:!1},t},toJSON:function(){var t=s().extend(!0,{},this.attributes),e={};if(t.trigger&&(t.trigger.startType=parseInt(t.trigger.startType,10),1===t.trigger.startType?t.trigger.startDate=null:t.trigger.startDate=T()(t.trigger.startDate,x,!0).format(j),"none"===t.trigger.type?(t.trigger.type="simpleTrigger",t.trigger.endDate=null,t.trigger.occurrenceCount=1,t.trigger.recurrenceInterval=null,t.trigger.recurrenceIntervalUnit=null,delete t.trigger.hours,delete t.trigger.minutes,delete t.trigger.months,delete t.trigger.daysType,delete t.trigger.weekDays,delete t.trigger.monthDays,delete t.trigger.calendarName):"simple"===t.trigger.type?(t.trigger.type="simpleTrigger","numberOfTimes"==t.trigger.radioEndDate&&(t.trigger.endDate=null),"specificDate"==t.trigger.radioEndDate&&(t.trigger.occurrenceCount=-1,t.trigger.endDate=T()(t.trigger.endDate,x,!0).format(j)),"indefinitely"==t.trigger.radioEndDate&&(t.trigger.occurrenceCount=-1,t.trigger.endDate=null),t.trigger.recurrenceInterval=parseInt(t.trigger.recurrenceInterval,10),t.trigger.recurrenceIntervalUnit=t.trigger.recurrenceIntervalUnit.toUpperCase(),""===t.trigger.calendarName&&(t.trigger.calendarName=null),delete t.trigger.hours,delete t.trigger.minutes,delete t.trigger.months,delete t.trigger.daysType,delete t.trigger.weekDays,delete t.trigger.monthDays):"calendar"===t.trigger.type&&(t.trigger.type="calendarTrigger","everyMonth"===t.trigger.radioWhichMonth&&(t.trigger.months.month=[1,2,3,4,5,6,7,8,9,10,11,12]),"everyDay"===t.trigger.radioWhichDay||7==t.trigger.weekDays.day.length?(t.trigger.daysType="ALL",t.trigger.weekDays.day=[],t.trigger.monthDays=""):"selectedDays"===t.trigger.radioWhichDay?(t.trigger.daysType="WEEK",t.trigger.monthDays=""):"datesInMonth"===t.trigger.radioWhichDay&&(t.trigger.daysType="MONTH",t.trigger.weekDays.day=[]),t.trigger.monthDays=t.trigger.monthDays.replace(/ /g,""),""===t.trigger.endDate?delete t.trigger.endDate:t.trigger.endDate=T()(t.trigger.endDate,x,!0).format(j),t.trigger.hours=t.trigger.hours.replace(/ /g,""),t.trigger.minutes=t.trigger.minutes.replace(/ /g,""),""===t.trigger.calendarName&&(t.trigger.calendarName=null),delete t.trigger.occurrenceCount,delete t.trigger.recurrenceInterval,delete t.trigger.recurrenceIntervalUnit),delete t.trigger.radioEndDate,delete t.trigger.radioWhichMonth,delete t.trigger.radioWhichDay,t.trigger&&t.trigger.type&&(e[t.trigger.type]=t.trigger,delete e[t.trigger.type].type,t.trigger=e)),t.repositoryDestination&&(t.repositoryDestination.outputFTPInfo&&(t.repositoryDestination.outputFTPInfo.enabled||(t.repositoryDestination.outputFTPInfo={type:"ftp",port:21,folderPath:null,password:null,propertiesMap:{},serverName:null,userName:null,sshKey:null,sshPassphrase:null}),t.repositoryDestination.outputFTPInfo.password===c.Z.VALUE_SUBSTITUTION&&delete t.repositoryDestination.outputFTPInfo.password,"sftp"===t.repositoryDestination.outputFTPInfo.type&&t.repositoryDestination.outputFTPInfo.sshKeyEnabled?t.repositoryDestination.outputFTPInfo.sshPassphrase===c.Z.VALUE_SUBSTITUTION&&delete t.repositoryDestination.outputFTPInfo.sshPassphrase:(delete t.repositoryDestination.outputFTPInfo.sshKey,delete t.repositoryDestination.outputFTPInfo.sshPassphrase),"enabled"in t.repositoryDestination.outputFTPInfo&&delete t.repositoryDestination.outputFTPInfo.enabled,"sshKeyEnabled"in t.repositoryDestination.outputFTPInfo&&delete t.repositoryDestination.outputFTPInfo.sshKeyEnabled),t.repositoryDestination.sequentialFilenames||(t.repositoryDestination.timestampPattern=null)),t.mailNotification){var n,i=["toAddresses","ccAddresses","bccAddresses"];for(n=0;n<i.length;n++)if(t.mailNotification[i[n]]&&void 0!==t.mailNotification[i[n]].address){if(!t.mailNotification[i[n]].address){delete t.mailNotification[i[n]];continue}t.mailNotification[i[n]].address=t.mailNotification[i[n]].address.replace(/ /g,"").split(w)}t.mailNotification.toAddresses&&void 0!==t.mailNotification.toAddresses.address||delete t.mailNotification}return t.alert&&(t.alert.toAddresses&&void 0!==t.alert.toAddresses.address&&(t.alert.toAddresses.address?t.alert.toAddresses.address=t.alert.toAddresses.address.replace(/ /g,"").split(w):delete t.alert.toAddresses.address),t.alert.toAddresses&&void 0!==t.alert.toAddresses.address||delete t.alert),t},state:function(t){var e={jobId:[this.id],toJSON:function(){return this},trigger:function(){return this}};return this.get("state").value=t?f:b,this.trigger("change"),d().sync.call(this,"update",e,{url:c.Z.contextPath+"/rest_v2/jobs/"+(t?"resume":"pause"),type:"POST"})},loadParameters:function(t){t=t||this.get("source").reportUnitURI;var e=this,n=c.Z.contextPath+"/rest_v2/reports"+encodeURI(t)+"/inputControls/";return d().sync.call(this,"read",new(d().Model),{url:n,type:"GET"}).done((function(t){if(t&&t.inputControl){for(var n={},i=t.inputControl,s=0;s<i.length;s++)n[i[s].id]=null;e.update("source",{parameters:{parameterValues:n}})}else e.trigger("failedToGet_IC")})).fail((function(){e.trigger("failedToGet_IC")}))},checkSaveValidation:function(t){t=t||{};var e=s().Deferred(),n=0,i=function(){3===++n&&e.resolve()},a=function(){e.reject()};return this.testDates(t.editMode).done(i).fail(a),this.validateParametersIC().done(i).fail(a),this.testOutputHostFileSystemFolder().done(i).fail(a),e},testDates:function(t){var e=[],n=s().Deferred(),i=this.attributes.trigger;return!t&&2==i.startType&&i.startDate&&this.ifPastDate(i.startDate,i.timezone)&&e.push({field:"startDate",errorCode:"error.before.current.date.trigger.startDate"}),"simple"===i.type&&"specificDate"===i.radioEndDate&&i.endDate&&this.ifPastDate(i.endDate,i.timezone)?e.push({field:"simpleEndDate",errorCode:"error.before.current.date.trigger.endDate"}):"calendar"===i.type&&i.endDate&&this.ifPastDate(i.endDate,i.timezone)&&e.push({field:"calendarEndDate",errorCode:"error.before.current.date.trigger.endDate"}),e.length?(this.trigger("invalid",e,{switchToErrors:!0}),n.reject()):n.resolve()},testFTPConnection:function(t){if(C)"function"==typeof t&&t();else{var e=this.get("repositoryDestination");if(e&&e.outputFTPInfo&&e.outputFTPInfo.enabled){e=e.outputFTPInfo;var n=this,i={host:e.serverName,userName:e.userName,folderPath:e.folderPath,type:e.type,protocol:e.protocol,port:e.port,implicit:e.implicit,prot:e.prot,pbsz:e.pbsz,toJSON:function(){return this},trigger:function(){return this}};return this.get("id")&&(i.holder="job:"+this.get("id")),e.password!==c.Z.VALUE_SUBSTITUTION&&(i.password=e.password),"sftp"===e.type&&e.sshKeyEnabled&&(i.sshKey=e.sshKey,e.sshPassphrase!==c.Z.VALUE_SUBSTITUTION&&(i.sshPassphrase=e.sshPassphrase)),C=!0,s()("#ftpTestButton").addClass("checking"),s()("[data-field=ftpTest]").text(""),d().sync.call(this,"update",i,{url:c.Z.contextPath+"/rest_v2/connections",contentType:"application/connections.ftp+json",headers:{Accept:"application/json"},type:"POST",success:function(e,i){C=!1,s()("#ftpTestButton").removeClass("checking"),n.trigger("valid",[{field:"ftpTest",errorCode:"report.scheduling.connection.passed"}]),"function"==typeof t&&t(void 0)},error:function(e){C=!1,s()("#ftpTestButton").removeClass("checking"),n.trigger("invalid",[{field:"ftpTest",errorCode:"report.scheduling.connection.failed"}]),"function"==typeof t&&t(e)}})}"function"==typeof t&&t()}},validateParametersIC:function(){var t=this,e=s().Deferred(),n=this.get("source").parameters;return this.get("source")?!n||r().isEmpty(n.parameterValues)?e.resolve():(this.controlsController.validate().then((function(n){n?e.resolve():(t.trigger("invalid",[{field:"parametersErrorNotifierStub",errorCode:"report.scheduling.list.state.5"}],{switchToErrors:!0}),e.reject())})),e):e.resolve()},runServerValidationRequests:function(){var t=s().Deferred(),e=0,n=function(){2===++e&&t.resolve()},i=function(e){t.reject(e)};return this.testOutputRepositoryFolder().done(n).fail(i),this.testSshKey().done(n).fail(i),t},testSshKey:function(){var t=s().Deferred(),e=this.get("repositoryDestination")?this.get("repositoryDestination").outputFTPInfo:null;if(!e||!e.enabled||!e.sshKeyEnabled)return t.resolve();var n=e.sshKey;return n&&""!==n&&this.isValidUri(n)?r().isUndefined(S[n])?(this.resource("file",n,(function(e,i){e?(S[n]={field:"sshKey",errorCode:"error.report.job.report.inexistent.sshKey",errorArguments:[n]},t.reject(S[n])):(S[n]={},t.resolve())})),t):S[n].errorCode?t.reject(S[n]):t.resolve():t.resolve()},testOutputRepositoryFolder:function(){var t=s().Deferred();if(!this.get("repositoryDestination"))return t.resolve();if(!this.get("repositoryDestination").saveToRepository)return t.resolve();var e=this.get("repositoryDestination").folderURI;return e.indexOf("${")>=0?t.resolve():e&&""!==e?this.isValidUri(e)?r().isUndefined(E[e])?(this.checkPermissionOnFolder(e,(function(n,i){var s=null;n?s="error.report.job.report.inexistent.output":1!==i&&30!==i&&6!==i&&(s="error.report.job.output.folder.notwriteable"),s?(E[e]={field:"outputRepository",errorCode:s,errorArguments:[e]},t.reject(E[e])):(E[e]={},t.resolve())})),t):E[e].errorCode?t.reject(E[e]):t.resolve():t.reject({field:"outputRepository",errorCode:"error.report.job.invalid.chars.folderURI"}):t.reject({field:"outputRepository",errorCode:"error.not.empty.folder"})},testOutputHostFileSystemFolder:function(){var t=this,e=s().Deferred();if("false"===c.Z.enableSaveToHostFS||!1===c.Z.enableSaveToHostFS)return e.resolve();if(!this.get("repositoryDestination"))return e.resolve();var n=this.get("repositoryDestination").outputLocalFolder;if(r().isUndefined(n)||null===n)return e.resolve();if(!n)return this.trigger("invalid",[{field:"outputHostFileSystem",errorCode:"report.scheduling.output.localhostpath"}],{switchToErrors:!0}),e.reject();var i={path:this.get("repositoryDestination").outputLocalFolder,toJSON:function(){return this},trigger:function(){return this}};return d().sync.call(this,"update",i,{url:c.Z.contextPath+"/rest_v2/connections",contentType:"application/connections.lfs+json",type:"POST",headers:{Accept:"application/json"}}).done((function(){e.resolve()})).fail((function(){t.trigger("invalid",[{field:"outputHostFileSystem",errorCode:"report.scheduling.output.localhostpath"}],{switchToErrors:!0}),e.reject()})),e},checkPermissionOnFolder:function(t,e){return d().sync.call(this,"read",new(d().Model),{url:c.Z.contextPath+"/rest_v2/resources"+t,headers:{Accept:"application/repository.folder+json"},type:"GET",success:function(t,n){"function"==typeof e&&e(void 0,t.permissionMask)},error:function(t){try{t=JSON.parse(t.responseText)}catch(t){}"function"==typeof e&&e(t)}})},resource:function(t,e,n){return d().sync.call(this,"read",new(d().Model),{url:c.Z.contextPath+"/rest_v2/resources"+e,headers:{Accept:"application/repository."+t+"+json"},type:"GET",success:function(t,e){"function"==typeof n&&n(void 0,t)},error:function(t){"function"==typeof n&&n(t)}})},parseUri:function(t){var e;return"/"!==t[0]&&(t="/"+t),t&&(e=t.match(/^(.*)\/([^\/]+)$/))?(""===e[1]&&(e[1]="/"),{full:e[0],folder:e[1],file:e[2]}):{}},createFromUri:function(t){this.trigger("clearAllErrors"),this.clear({silent:!0}),t=this.parseUri(t),this.set(this.parse(this.createNewData(t)))},createNewData:function(t){var e=r().extend({},c.Z.reportJobEditorDefaults);return{baseOutputFilename:t.file,outputFormats:{outputFormat:["PDF"]},source:{reportUnitURI:t.full},trigger:{timezone:c.Z.usersTimeZone||"America/Los_Angeles"},outputTimeZone:c.Z.usersTimeZone||"America/Los_Angeles",repositoryDestination:{overwriteFiles:!0,sequentialFilenames:!1,folderURI:void 0===e["scheduler.job.repositoryDestination.folderURI"]?t.folder:e["scheduler.job.repositoryDestination.folderURI"],saveToRepository:!0,timestampPattern:"yyyyMMddHHmm",outputFTPInfo:{propertiesMap:{},type:"ftp",port:"21",implicit:!0,pbsz:0}}}},formatDate:function(t){return t?T()(t,j).format(x):""},parseIntervals:function(t,e){if(!(t=t||!1))return!1;var n,i,s,a=(t=t.replace(/ /g,"")).split(","),r=[],o={};1==a.length&&(a=t.split("/"));var l=1,d=31;if("hours"===e&&(l=0,d=23),"minutes"===e&&(l=0,d=59),a.length<1)return!1;for(n=0;n<a.length;n++)if(-1!==a[n].indexOf("-")){if(s=a[n].split("-"),!this.isNumeric(s[0],{allowZero:!0}))return!1;if(!this.isNumeric(s[1],{allowZero:!0}))return!1;if(s[0]=parseInt(s[0],10),s[1]=parseInt(s[1],10),!(l<=s[0]&&s[0]<=d))return!1;if(!(l<=s[1]&&s[1]<=d))return!1;if(s[0]>=s[1])return!1;for(i=s[0];i<=s[1];i++)void 0===o[i]&&(r.push(i),o[i]=1)}else{if(!this.isNumeric(a[n],{allowZero:!0}))return!1;if(a[n]=parseInt(a[n],10),!(l<=a[n]&&a[n]<=d))return!1;void 0===o[a[n]]&&(r.push(a[n]),o[a[n]]=1)}return r},ifPastDate:function(t,e){return!(!t||!e)&&(n=(0,_.Km3)(e),i=T()().utcOffset()/60-n,s=+T()().format("X"),+T()(t,x,!0).add(1,"minute").format("X")+3600*i<s);var n,i,s},isHostName:function(t){if(!t)return!1;if(t.indexOf("${")>=0)return!0;return/^(([a-zA-Z0-9]|[a-zA-Z0-9][a-zA-Z0-9\-]*[a-zA-Z0-9])\.)*([A-Za-z0-9]|[A-Za-z0-9][A-Za-z0-9\-]*[A-Za-z0-9])$/.test(t)},isEmail:function(t){return!!t&&(t.indexOf("${")>=0||new(m())(h.emailRegExpPattern,"g").test(t))},isValidFileName:function(t){return!!t&&(t.indexOf("${")>=0||!new RegExp(h.resourceIdNotSupportedSymbols,"g").test(t))},isValidUri:function(t){return!!t&&(t.indexOf("${")>=0||!new RegExp(h.resourceIdNotSupportedSymbols,"g").test(t.replace(/\//g,"")))},validateEmails:function(t){if(!t)return!1;t=t.split(new RegExp(" *, *"));for(var e=0;e<t.length;e++)if(!this.isEmail(t[e]))return!1;return!0},isNumeric:function(t,e){var n;if(!t)return!1;if((e=e||{}).allowNegative=e.allowNegative||!1,e.allowZero=e.allowZero||!1,e.maxValue=e.maxValue||!1,e.minValue=e.minValue||!1,"string"==typeof t){if(t.match(/\D/))return!1;if(n=parseInt(t,10),r().isNaN(n))return!1}return!(!1===e.allowNegative&&n<0)&&((!1!==e.allowZero||0!==n)&&(!(e.maxValue&&e.maxValue<n)&&!(e.minValue&&n<e.minValue)))}});var N=n(57443),R=n(11364),A=function(t){this._id=t.id,this._contentId=t.contentId?t.contentId:void 0,this._scroll=t.scroll,this._loadFactor=t.loadFactor?t.loadFactor:.95,this._lastContentHeight=0,this._loading=!1,t.control?void 0!==t.control.length&&t.control.length>1?this._control=s()(t.control[0]):this._control=s()(t.control)[0]:this._control=this._scroll?this._scroll.parent:s()("#"+this._id)[0],this._scroll?this._content=this._scroll.element:t.content?void 0!==t.content.length&&t.content.length>1?this._content=s()(t.content[0]):this._content=s()(t.content)[0]:this._content=this._contentId?s()("#"+this._contentId)[0]:this._control.childElements()[0],this._eventType=(0,_.MEy)()?"touchmove":"scroll",this._control.observe(this._eventType,this._onScrollHandler.bind(this))};A.addMethod("destroy",(function(){this._control&&this._control.stopObserving(this._eventType,this._handler)})),A.addMethod("_onScrollHandler",(function(t){var e=this._scroll?-1*this._scroll.y:this._control.scrollTop,n=this._content.getHeight(),i=this._control.getHeight();n!=this._lastContentHeight&&(this._loading=!1);var s=!this._loading&&0!=n;(s=this._scroll?s&&this._scroll.isBottom():s&&(i+e)/n>this._loadFactor)&&(this._loading=!0,this._lastContentHeight=n,(0,_.zcy)()&&this.wait(),this.onLoad())})),A.addMethod("onLoad",_.cnY),A.addMethod("reset",(function(){(0,_.zcy)()?this._scroll.reset():this._control.scrollTop=0,this._loading=!1})),A.addMethod("wait",(function(){if(!this._waitIndicator){this._waitIndicator=new Element("div",{class:"dimmer resultsOverlay"});var t=this._control.getDimensions(),e=this._control.positionedOffset();this._waitIndicator.setStyle({zIndex:"4000",top:e.top+"px",left:e.left+"px",height:t.height+"px",width:t.width+"px"}),this._control.insert({after:this._waitIndicator})}this._waitIndicator.show()})),A.addMethod("stopWaiting",(function(){this._waitIndicator&&this._waitIndicator.hide()})),window.InfiniteScroll=A;const P=A;var O=n(84612),k=n(29338),F=n(55149),L=n(84581),M=function(t){return t.state.previousFireTime?F.Z.isoTimestampToLocalizedTimestampByTimezone(t.state.previousFireTime):""},Z=function(t){var e=t.state.value;return e!==f&&e!==v?o.Z["report.scheduling.list.label.disabled"]:t.state.nextFireTime?F.Z.isoTimestampToLocalizedTimestampByTimezone(t.state.nextFireTime):""},U=function(t){var e=t.state.value;return e===f||e===v};const V=d().View.extend({tagName:"li",className:"jobs first leaf",events:{"click [name=editJob]":"edit","click [name=deleteJob]":"remove","change [name=enableJob]":"enable"},initialize:function(t){this.options=r().extend({},t);var e=this.options.masterViewMode?'<div class="wrap draggable">\n\n    <js-templateNonce></js-templateNonce>\n    <div class="column one">\n        <p class="jobResource" >{{- model.reportLabel }} </p>\n        <p class="jobResourcePath">{{- model.reportUnitURI }}</p>\n    </div>\n    <div class="column two">\n        <p class="jobName">{{- model.label }}</p>\n        <p class="jobDescription" title="{{- model.description }}">{{- model.description }}</p>\n    </div>\n    <div class="column three">\n        <p class="jobID">{{- model.id }}</p>\n        <p class="jobOwner">{{- model.owner }}</p>\n        <p class="jobState">{{- model.state.value }}</p>\n    </div>\n    <div class="column four">\n        <p class="lastRanDate">\n            {{- lastRanDate }}\n        </p>\n        <p class="nextRunDate">\n            {{- nextRunDate }}\n        </p>\n    </div>\n    <div class="column five">\n\t    <div class="jobDelete">\n\t\t    <button name="deleteJob" class="button action simple delete up"></button>\n\t    </div>\n\t    <div class="jobEdit">\n\t\t    <button name="editJob" class="button action simple edit up"></button>\n\t    </div>\n\t    <div class="jobEnabled">\n\t\t    <input name="enableJob" type="checkbox" {{ if (isJobEnabled) { }} checked="checked" {{ } }}></input>\n\t    </div>\n    </div>\n</div>\n\n':'<div class="wrap draggable">\n\n    <js-templateNonce></js-templateNonce>\n    <div class="column one">\n        <p class="jobID">{{- model.id }}</p>\n    </div>\n    <div class="column two">\n        <p class="jobName">{{- model.label }}</p>\n        <p class="jobOwner">{{- model.owner }}</p>\n    </div>\n    <div class="column three">\n        <p class="jobState">{{- model.state.value }}</p>\n    </div>\n    <div class="column four">\n        <p class="lastRanDate">\n            {{- lastRanDate }}\n        </p>\n        <p class="nextRunDate">\n            {{- nextRunDate }}\n        </p>\n    </div>\n    <div class="column five">\n\t    <div class="jobDelete">\n\t\t    <button name="deleteJob" class="button action simple delete up"></button>\n\t    </div>\n\t    <div class="jobEdit">\n\t\t    <button name="editJob" class="button action simple edit up"></button>\n\t    </div>\n\t    <p class="jobEnabled">\n\t\t    <input name="enableJob" type="checkbox" {{ if (isJobEnabled) { }} checked="checked" {{ } }} ></input>\n\t    </p>\n    </div>\n</div>\n\n';this.template=r().template(e),this.model.on("change",this.render,this)},render:function(){var t=this.model.toJSON();return this.$el.html(this.template({model:t,i18n:o.Z,lastRanDate:M(t),nextRunDate:Z(t),isJobEnabled:U(t)})),this.model.collection&&this.model.collection.options.masterViewMode&&this.addToolTipToListElement(this.$el),this},addToolTipToListElement:function(t){var e=t.find(".jobResource")[0],n=t.find(".jobResourcePath")[0];e.update(O.Z.hardEscape(this.model.attributes.reportLabel)),n.update(O.Z.hardEscape(this.model.attributes.reportUnitURI)),new L.p(e,{text:O.Z.hardEscape(this.model.attributes.reportLabel)}),new L.p(n,{text:O.Z.hardEscape(this.model.attributes.reportUnitURI)})},edit:function(){this.trigger("editJobPressed",this.model.get("id"))},remove:function(){var t=this,e=o.Z["report.scheduling.editing.job.confirm.delete"].replace("{name}",O.Z.hardEscape(this.model.get("label"))).replace("{newline}","<br><br>"),n=new k.Z({title:o.Z["report.scheduling.editing.job.confirm.title"],text:e,additionalCssClasses:"schedulerJobRemoveDialog"});this.listenTo(n,"button:yes",(function(){t.model.destroy()})),n.open()},enable:function(t){this.model.state(t.target.checked)}}),B=d().Collection.extend({model:I,initialize:function(t,e){this.options=r().extend({},e),this.initialAmountOfJobsToLoad=100,this.amountOfJobsToLoad=100,this.amountOfLoadedJobs=0},setSearchingTerm:function(t){this.searchingTerm=t},getSearchingTerm:function(){return this.searchingTerm},getReportUri:function(){return this.options.parentReportURI||this.options.reportUri},fetch:function(){this.urlsOfReportsToFetchJobs=[],this.options.masterViewMode?this.getJobsWithPagination():this.getReportUri()&&(this.urlsOfReportsToFetchJobs.push(this.getReportUri()),c.Z.isProVersion?this._secondFetchPart():this.getJobsOfAllReportsWeHave())},_secondFetchPart:function(){var t=this;this.getReportOptions().always((function(){t.getJobsOfAllReportsWeHave()}))},getReportOptions:function(){var t=this,e=this.getReportUri();return this.request({url:c.Z.contextPath+"/rest_v2/reports"+e+"/options"}).done((function(e){if(e=e.reportOptionsSummary)for(var n=0,i=e.length;n<i;n++)e[n].uri&&t.urlsOfReportsToFetchJobs.push(e[n].uri)})).fail((function(){}))},getJobsOfAllReportsWeHave:function(){var t=this,e=[],n=0;r().each(this.urlsOfReportsToFetchJobs,(function(i){t.getJobOfReport(i).done((function(n){e=e.concat(t.parse(n))})).fail((function(e){t.trigger("error",e)})).always((function(){++n===t.urlsOfReportsToFetchJobs.length&&t.reset(e)}))}))},getJobsFromBackend:function(t,e){var n=["sortType=SORTBY_REPORTURI"];if(t&&n.push("startIndex="+t),e&&n.push("numberOfRows="+e),this.searchingTerm){var i=encodeURI(this.searchingTerm);n.push("label="+i)}var a=this,r=s().Deferred(),o=c.Z.contextPath+"/rest_v2/jobs?"+n.join("&");return this.request({url:o}).done((function(t){var e=a.parse(t);a.amountOfLoadedJobs+=e.length,r.resolve(e)})).fail((function(t){a.trigger("error",t),r.reject(t)})),r},getJobOfReport:function(t){var e=c.Z.contextPath+"/rest_v2/jobs?reportUnitURI="+encodeURI(t);return this.request({url:e})},getJobsWithPagination:function(){this.amountOfLoadedJobs=0;var t=this;this.getJobsFromBackend(this.amountOfLoadedJobs,this.initialAmountOfJobsToLoad).done((function(e){t.reset(e)}))},loadMoreJobs:function(){var t=this;this.getJobsFromBackend(this.amountOfLoadedJobs,this.amountOfJobsToLoad).done((function(e){t.add(e)}))},parse:function(t){return t?t.jobsummary:[]},request:function(t){return(t=t||{}).cache=!1,d().sync.call(this,"read",new(d().Model),t)},permission:function(t,e){return d().sync.call(this,"read",new(d().Model),{url:c.Z.contextPath+"/rest_v2/resources/"+t.replace(/\/[^\/]+$/,""),cache:!1,headers:{Accept:"application/repository.folder+json"},type:"GET",success:function(t,n){"function"==typeof e&&e(void 0,t.permissionMask)},error:function(t){"function"==typeof e&&e(t)}})}}),J=d().View.extend({events:{"click [name=backButton]":"backButtonClick","click [name=scheduleJob]":"createButtonClick","click [name=runJob]":"runButtonClick","click [name=refreshList]":"refreshButtonClick","keydown [name=jobSearchInput]":"jobSearchInputKeyDown","click [name=jobSearchIcon]":"jobSearchIconClick","click [name=jobSearchClear]":"clearJobSearch"},_getJobsCollection:function(t){return new B(null,t)},initialize:function(t){this.options=r().extend({},t),this.options=r().omit(this.options,"model"),this.jobsViewCollection=this._getJobsCollection(this.options),this.listenTo(this.jobsViewCollection,"add",this.createAndAddJobView),this.listenTo(this.jobsViewCollection,"reset destroy",this.renderCollection)},refresh:function(){this.jobsViewCollection.fetch()},searchJobs:function(){var t=this.$el.find("[name=jobSearchInput]").val();t&&(this.$el.find("[name=jobSearchClear]").addClass("up"),this.jobsViewCollection.setSearchingTerm(t),this.jobsViewCollection.fetch())},clearJobSearch:function(){this.$el.find("[name=jobSearchClear]").removeClass("up"),this.$el.find("[name=jobSearchInput]").val(""),this.jobsViewCollection.setSearchingTerm(""),this.jobsViewCollection.fetch()},render:function(){var t=this.jobsViewCollection.getSearchingTerm(),e=this.options.masterViewMode?'<div class="pageHeader ">\n\t<div class="pageHeader-title">\n\t\t<div class="pageHeader-title-icon">\n\t\t\t<span class="icon schedules"></span>\n\t\t</div>\n\t\t<div class="pageHeader-title-text">{{- i18n["menu.jobs"] }}</div>\n\t</div>\n</div>\n<div class="page column decorated primary listOfJobs masterView">\n\n    <js-templateNonce></js-templateNonce>\n\t<div class="content">\n\t\t<div class="subheader">\n\t\t\t<div class="toolbar">\n\t\t\t\t<span data-component-type="search" data-tab-index="3" class="control searchLockup " id="secondarySearchBox">\n\t\t\t\t<label class="offLeft" for="__scheduler_jobSearchInput">{{- i18n["SEARCH_SEARCH"] }}</label>\n\t\t\t\t<div class="wrap">\n\t\t\t\t\t<input type="text" tabindex="" name="jobSearchInput" id="__scheduler_jobSearchInput" class="" value="{{- searchTerm }}">\n\t\t\t\t</div>\n\t\t\t\t<b class="right">\n\t\t\t\t\t<a name="jobSearchClear" class="button searchClear {{- searchTerm ? \'up\' : \'\' }}"></a>\n\t\t\t\t</b>\n\t\t\t\t<a class="button search up" name="jobSearchIcon"></a>\n\t\t\t</span>\n\t\t\t</div>\n\t\t\t<ul id="resultsListHeader" class="list collapsible tabular jobs header">\n\t\t\t\t<li id="" class="jobs first leaf">\n\t\t\t\t\t<div class="wrap">\n\t\t\t\t\t\t<div class="column one">\n\t\t\t\t\t\t\t<p class="jobResource">{{- i18n["report.scheduling.list.resource"] }}</p>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t<div class="column two">\n\t\t\t\t\t\t\t<p class="jobName">{{- i18n["report.scheduling.list.header.label"] }}</p>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t<div class="column three">\n\t\t\t\t\t\t\t<p class="jobID">{{- i18n["report.scheduling.list.header.id"] }}</p>\n\t\t\t\t\t\t\t<p class="jobOwner">{{- i18n["report.scheduling.list.header.owner"] }}</p>\n\t\t\t\t\t\t\t<p class="jobState">{{- i18n["report.scheduling.list.header.state"] }}</p>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t<div class="column four">\n\t\t\t\t\t\t\t<p class="lastRanDate">{{- i18n["report.scheduling.list.header.prevFireTime"] }}</p>\n\n\t\t\t\t\t\t\t<p class="nextRunDate">{{- i18n["report.scheduling.list.header.nextFireTime"] }}</p>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t<div class="column five">\n\t\t\t\t\t\t\t<p class="jobEnabled">{{- i18n["report.scheduling.list.label.enabled"] }}</p>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t</li>\n\t\t\t</ul>\n\t\t</div>\n\n\t\t<div class="body" id="jobsSummaryContainer">\n\t\t\t<div name="jobsContainer" class="body"></div>\n\t\t</div>\n\t</div>\n</div>\n':'<div class="pageHeader ">\n    <div class="pageHeader-title">\n        <div class="pageHeader-title-icon">\n            <span class="icon scheduledJobs"></span>\n        </div>\n        <div class="pageHeader-title-text">{{- i18n["report.scheduling.list.header"] }}</div>\n    </div>\n    <div class="pageHeader-subtitle">\n        <div class="pageHeader-subtitle-path">\n            <span class="pageHeader-subtitle-path-text">{{- reportUri }}</span>\n        </div>\n    </div>\n</div>\n<div class="page column decorated primary listOfJobs singleReportView">\n    <js-templateNonce></js-templateNonce>\n    <div class="content">\n        <div class="subheader">\n            <div class="toolbar">\n                <ul class="list buttonSet">\n                    <li class="node open">\n                        <ul class="list buttonSet">\n                            <li class="leaf">\n                                <button name="backButton" class="button capsule text up">\n                                    <span class="wrap">{{- i18n["report.scheduling.list.button.back"] }}</span>\n                                    <span class="icon"></span>\n                                </button>\n                            </li>\n                            <li class="leaf">\n                                <button name="scheduleJob" class="button capsule text first up">\n                                    <span class="wrap">{{- i18n["report.scheduling.list.button.new"] }}</span>\n                                    <span class="icon"></span>\n                                </button>\n                            </li>\n                            <li class="leaf">\n                                <button name="runJob" class="button capsule text last up">\n                                    <span class="wrap">{{- i18n["report.scheduling.list.button.now"] }}</span>\n                                    <span class="icon"></span>\n                                </button>\n                            </li>\n                            <li class="leaf">\n                                <button name="refreshList" class="button capsule text up">\n                                    <span class="wrap">{{- i18n["report.scheduling.list.button.refresh"] }}</span>\n                                    <span class="icon"></span>\n                                </button>\n                            </li>\n                        </ul>\n                    </li>\n                </ul>\n            </div>\n            <ul id="resultsListHeader" class="list collapsible tabular jobs header">\n                <li id="" class="jobs first leaf">\n                    <div class="wrap">\n                        <div class="column one">\n                            <p class="jobID">{{- i18n["report.scheduling.list.header.id"] }}</p>\n                        </div>\n                        <div class="column two">\n                            <p class="jobName">{{- i18n["report.scheduling.list.header.label"] }}</p>\n                            <p class="jobOwner">{{- i18n["report.scheduling.list.header.owner"] }}</p>\n                        </div>\n                        <div class="column three">\n                            <p class="jobState">{{- i18n["report.scheduling.list.header.state"] }}</p>\n                        </div>\n                        <div class="column four">\n                            <p class="lastRanDate">{{- i18n["report.scheduling.list.header.prevFireTime"] }}</p>\n                            <p class="nextRunDate">{{- i18n["report.scheduling.list.header.nextFireTime"] }}</p>\n                        </div>\n                        <div class="column five">\n                            <p class="jobEnabled">{{- i18n["report.scheduling.list.label.enabled"] }}</p>\n                        </div>\n                    </div>\n                </li>\n            </ul>\n        </div>\n\n        <div class="body">\n            <div id="jobsSummaryContainer">\n                <div name="jobsContainer" class="body"></div>\n            </div>\n        </div>\n    </div>\n</div>\n',n={i18n:o.Z,reportUri:this.options.reportUri,searchTerm:t};this.setElement(s()(r().template(e,n))),this.renderCollection()},renderCollection:function(){var t=this.$el.find("[name=jobsContainer]").empty();if(this.jobsViewCollection.length)t.append(s()(r().template('<ul name="listOfJobs" id="listOfJobs" class="list collapsible tabular jobs sixColumn">\n\n    <js-templateNonce></js-templateNonce>\n</ul>',{}))),this.jobsViewCollection.each(r().bind(this.createAndAddJobView,this)),this.initInfiniteScroll(),this.adjustTableHeaderWidth();else{var e=this.options.isDashboard?o.Z["dashboard.scheduling.list.no.jobs.for.dashboard"]:o.Z["report.scheduling.list.no.jobs.for.report"];t.append(s()(r().template('<div class="panel info nothingToDisplay centered_vert centered_horz" id="nothingToDisplay">\n\n    <js-templateNonce></js-templateNonce>\n\t<div class="content ">\n\t\t<div class="header ">\n\t\t\t<div class="title"></div>\n\t\t</div>\n\t\t<div class="body  ">\n\t\t\t<p id="nothingToDisplayMessage" class="message">\n\t\t\t\t<span class="jr-mInstructor-icon jr-mIcon jr-mIconXLarge jr-message jr"></span>\n\t\t\t\t<span class="message-text">{{- message }}</span>\n\t\t\t</p>\n\t\t</div>\n\t</div>\n</div>',{message:this.options.masterViewMode?o.Z["report.scheduling.list.no.jobs"]:e})))}},initInfiniteScroll:function(){var t=this.$el.find("#listOfJobs")[0],e=this.$el.find("#jobsSummaryContainer")[0];this.options.masterViewMode&&t&&((0,_.MEy)()&&(this._touchController||(this._touchController=new R.Z(t,t.parent(),{forceLayout:!0})),this.listenTo(t,"layout_update orientationchange",(function(){s()(t).css("min-width",s()(e).width()+"px"),t.width(s()(e).width())}))),(0,_.zcy)()?this._infiniteScroll=new P({control:e,content:t,scroll:this._touchController||void 0}):this._infiniteScroll=new P({control:e,content:t}),this._infiniteScroll.onLoad=r().bind((function(){this._infiniteScroll.wait(),this.jobsViewCollection.loadMoreJobs(),this._infiniteScroll.stopWaiting()}),this))},adjustTableHeaderWidth:function(){var t=this.$el.find(".content > .subheader > .list.collapsible.header  .wrap"),e=this.$el.find(".content > .body"),n=N.Z.hasScrollBar(e[0],"vertical");t.css("margin-right",(n?15:0)+"px")},jobSearchInputKeyDown:function(t){27===t.keyCode&&(t.preventDefault(),t.stopPropagation(),this.clearJobSearch()),13===t.keyCode&&(t.preventDefault(),t.stopPropagation(),this.searchJobs())},jobSearchIconClick:function(){this.searchJobs()},createAndAddJobView:function(t){var e=new V({model:t,masterViewMode:this.options.masterViewMode});this.listenTo(e,"editJobPressed",this.editJobPressed);var n=e.render().$el;this.$el.find("[name=listOfJobs]").append(n)},editJobPressed:function(t){this.trigger("editJobPressed",t)},backButtonClick:function(){this.trigger("backButtonPressed")},createButtonClick:function(){this.trigger("createNewJobRequest")},runButtonClick:function(){this.trigger("runNowRequest")},refreshButtonClick:function(){this.refresh()}});var H=n(76802),$=n(47269),z=n(99494);var K={};const W=z.Z.extend({theDialogIsOpen:!1,saveDialogTemplate:'<label title="{{- i18n[\'report.scheduling.saveDialog.jobNameTitle\']}}" class="control input text ">\n\n    <js-templateNonce></js-templateNonce>\n\t<span class="wrap">{{- i18n[\'report.scheduling.saveDialog.jobName\']}} ({{- i18n[\'required.field\']}}):</span>\n\t<input type="text" value="{{- model.label }}" name="label">\n\t<span class="message warning"></span>\n</label>\n\n<label title="{{- i18n[\'report.scheduling.saveDialog.descriptionTitle\']}}" class="control textArea">\n\t<span class="wrap">{{- i18n[\'report.scheduling.saveDialog.description\']}}</span>\n\t<textarea type="text" name="description">{{- model.description }}</textarea>\n\t<span class="message warning"></span>\n</label>\n',constructor:function(t){t||(t={}),K=r().extend({},t);var e=this.extendModel(t.model),n=this._getLabelForSaveButton(e);z.Z.prototype.constructor.call(this,{skipLocation:!!K.skipLocation,modal:!0,model:e,resizable:!0,additionalCssClasses:"schedulerSaveDialog jr-uWidth-425px jr-uHeight-275px",title:o.Z["report.scheduling.saveDialog.save"],content:r().template(this.saveDialogTemplate,{i18n:o.Z,model:r().extend({},e.attributes),skipLocation:!!K.skipLocation,isEmbedded:K.isEmbedded,isEditMode:K.isEditMode}),buttons:[{label:o.Z[n],action:"save",primary:!0},{label:o.Z["report.scheduling.saveDialog.cancel"],action:"cancel",primary:!1}]}),this.on("button:save",r().bind(this._onSaveDialogSaveButtonClick,this)),this.on("button:cancel",r().bind(this._onSaveDialogCancelButtonClick,this))},initialize:function(){z.Z.prototype.initialize.apply(this,arguments)},restoreModel:function(){this.originalModelValidation&&(this.model.validation=this.originalModelValidation)},extendModel:function(t){return this.originalModelValidation=t.validation,t.validation=r().extend({},$.Z.prototype.validation,{name:null,parentFolderUri:null,label:[{required:!0,msg:o.Z["report.scheduling.saveDialog.validation.not.empty.label"]},{maxLength:$.Z.settings.LABEL_MAX_LENGTH,msg:o.Z["report.scheduling.saveDialog.validation.too.long.label"]}],description:[{required:!1},{maxLength:$.Z.settings.DESCRIPTION_MAX_LENGTH,msg:o.Z["report.scheduling.saveDialog.validation.too.long.description"]}]}),t},startSaveDialog:function(){this._openDialog()},closeDialog:function(){this.restoreModel(),this._closeDialog()},_closeSchedulerOverlay:function(){window.parent.document.getElementsByClassName("schedulerOverlayIframe")[0].hide(),window.parent.document.getElementById("dialogDimmer").hide()},_openDialog:function(){this.theDialogIsOpen||(this.bindValidation(),z.Z.prototype.open.apply(this,arguments),this.$contentContainer.find("[name=label]").focus(),this.theDialogIsOpen=!0)},_closeDialog:function(){this.theDialogIsOpen&&(this.unbindValidation(),this.clearValidationErrors(),z.Z.prototype.close.apply(this,arguments),this.theDialogIsOpen=!1)},_getLabelForSaveButton:function(){return"report.scheduling.saveDialog.save"},_onDialogResize:function(){var t=this,e=0,n=this.$contentContainer.find("textarea"),i=this.$contentContainer.closest(".jr-mDialog > .jr-mDialog-body");this.$contentContainer.children().not(n).each((function(){e+=t.$(this).outerHeight(!0)})),n.height(i.outerHeight(!0)-e-60)},_onSaveDialogCancelButtonClick:function(){this.restoreModel(),this._closeDialog()},_onSaveDialogSaveButtonClick:function(){var t=this.model.controlsController;this.model.isValid(!0)&&(t&&t.viewModel&&s()(document).trigger("viewmodel:values:changed"),this.performSave())},performSave:function(){var t=this;this.model.checkSaveValidation({editMode:K.isEditMode}).done((function(){t.model.save({},{success:r().bind(t._saveSuccessCallback,t),error:r().bind(t._saveErrorCallback,t)})})).fail((function(){t.trigger("saveValidationFailed")}))},_saveSuccessCallback:function(t,e){this._closeDialog(),r().isFunction(K.onSaveDone)&&K.onSaveDone(),K.schedulerAccelator&&this._closeSchedulerOverlay()},_saveErrorCallback:function(t,e,n){var i=this,s=!1,a=!1;try{s=JSON.parse(e.responseText)}catch(t){}s.error&&(s=s.error),r().isArray(s)||(s=[s]),r().each(s,(function(t){if("label"===t.field){var e="";"error.not.empty"===t.errorCode&&(e=o.Z["error.not.empty.label"]),"version.not.match"===t.errorCode&&(e=o.Z["report.scheduling.resource.exists"]),"mandatory.parameter.error"===t.errorCode&&(e=o.Z["report.scheduling.saveDialog.parameterIsMissing"]),""!==e&&(i.invalidField("[name=label]",e),a=!0)}})),!1===a&&r().isFunction(K.onSaveFail)&&K.onSaveFail(t,e,n)}});var q=n(52687),G=n(12197);const Y=d().View.extend({initialize:function(){this.listenTo(this.collection,"reset change",this.render)},render:function(){var t=s()(r().template('<div class="section calendarBlock">\n\n    <js-templateNonce></js-templateNonce>\n\t<div id="holidayCalendar" class="section holidayCalendar">\n\t\t<h4 class="title">\n\t\t\t{{- i18n["report.scheduling.job.edit.holidays"] }}\n\t\t</h4>\n\t\t<fieldset class="group first">\n\t\t\t<label class="control twoLine">\n\t\t\t\t\t\t<span class="wrap">\n\t\t\t\t\t\t\t{{- i18n["report.scheduling.job.edit.calendar.ofdates.toexclude"] }}:\n\t\t\t\t\t\t</span>\n\t\t\t\t<select name="calendarSelect"></select>\n\t\t\t</label>\n\t\t</fieldset>\n\t</div>\n</div>\n',{i18n:o.Z}));this.$el.empty().append(t);var e,n=this.$el.find(".calendarBlock"),i=this.$el.find("[name=calendarSelect]");return n.removeClass("disabled").find("select").attr("disabled",!1),i.empty(""),0===this.collection.size()?(e=s()("<option>").attr("value","").text(o.Z["report.scheduling.job.edit.trigger.calendars.nocalendars"]),i.append(e),n.addClass("disabled").find("select").attr("disabled","disabled"),this):(e=s()("<option>").attr("value","").text(o.Z["label.none"]),i.append(e),this.collection.forEach((function(t){e=s()("<option>").attr("value",t.id).text(t.id),i.append(e)})),this)}}),X=d().Model.extend({urlRoot:c.Z.contextPath+"/rest_v2/jobs/calendars"}),Q=d().Collection.extend({url:c.Z.contextPath+"/rest_v2/jobs/calendars",model:X,parse:function(t){var e=[];return t&&t.calendarName&&s().each(t.calendarName,(function(t,n){e.push({id:n})})),e}});var tt=c.Z.calendar.timepicker.dateFormat,et=c.Z.calendar.timepicker.timeFormat.replace(":ss","");const nt=d().View.extend({events:{"change [name=startType]":"setStartType","change [name=startDate]":"setStartDate","change [name=schedulerTimeZone]":"setTimeZone","change [name=recurrenceType]":"setRecurrenceType","change [name=recurrenceInterval]":"setRecurrenceInterval","change [name=recurrenceIntervalUnit]":"setRecurrenceIntervalUnit","change [name=endat]":"setEnDat","change [name=occurrenceCount]":"setOccurrenceCount","change [name=simpleEndDate]":"setEndDate","change [name=calendarEndDate]":"setEndDate","change [name=whichMonth]":"monthRadioSelector","change [name=monthSelector]":"setMonthSelector","change [name=whichDay]":"dayRadioSelector","change [name=daySelector]":"setDaySelector","change [name=datesInMonth]":"setDatesInMonth","change [name=hours]":"setHours","change [name=minutes]":"setMinutes","change [name=calendarSelect]":"setCalendar"},initialize:function(){this.calCollection=new Q,this.calView=new Y({collection:this.calCollection}),this.calCollection.fetch({reset:!0,data:{calendarType:"holiday"}}),this.listenTo(this.model,"change:trigger",this.triggerChanged),this.listenTo(this.calCollection,"reset change",this.calendarChanged)},render:function(){this.setElement(s()(r().template('<div class="scheduleTab">\n\n    <js-templateNonce></js-templateNonce>\n\t<div class="neverFire">\n\t\t<input type="text" name="triggerWillNeverFire" class="hidden">\n\n\t\t<div data-field="triggerWillNeverFire" class="warning message"></div>\n\t</div>\n\n\t\x3c!-- *START, SCHEDULE START SECTION --\x3e\n\t<div id="scheduleStart" class="section">\n\t\t<h4 class="title">\n\t\t\t{{- i18n["report.scheduling.job.edit.schedulestart"] }}\n\t\t</h4>\n\t\t\x3c!-- *START JOB GROUP --\x3e\n\t\t<fieldset id="jobCommon" class="group first">\n\t\t\t<legend><span>\n\t\t\t\t{{- i18n["report.scheduling.job.edit.startdate"] }}:\n\t\t\t</span></legend>\n\t\t\t<ul class="list inputSet">\n\t\t\t\t<li class="leaf">\n\t\t\t\t\t<div class="control radio">\n\t\t\t\t\t\t<label for="startImmediately" class="wrap">\n\t\t\t\t\t\t\t{{- i18n["report.scheduling.job.edit.trigger.start.immediately"] }}\n\t\t\t\t\t\t</label>\n\t\t\t\t\t\t<input id="startImmediately" name="startType" type="radio" value="1">\n\t\t\t\t\t</div>\n\t\t\t\t</li>\n\t\t\t\t<li class="leaf last">\n\t\t\t\t\t<div id="startDateLabel" class="control radio twoLine">\n\t\t\t\t\t\t<label for="startDate" class="wrap">\n\t\t\t\t\t\t\t{{- i18n["report.scheduling.job.edit.onspecificdate"] }}:\n\t\t\t\t\t\t</label>\n\t\t\t\t\t\t<input id="startDate" name="startType" type="radio" value="2">\n\n\t\t\t\t\t\t<div id="startOn" class="control picker inline">\n\t\t\t\t\t\t\t<input type="text" name="startDate" class="datepicker">\n\n\t\t\t\t\t\t\t<div data-field="startDate" class="warning message"></div>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t</li>\n\t\t\t</ul>\n\t\t</fieldset>\n\t\t\x3c!-- TIME ZONE GROUP --\x3e\n\t\t<fieldset id="timeZone" class="group">\n\t\t\t<label class="control select inline twoLine">\n\t\t\t\t<span class="wrap">\n\t\t\t\t\t{{- i18n["report.scheduling.job.edit.trigger.label.timezone"] }}:\n\t\t\t\t</span>\n\t\t\t\t<select name="schedulerTimeZone">\n\t\t\t\t\t{{\n\t\t\t\t\t\t_.each(timeZones, function(zone) {\n\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t<option value="{{- zone.value }}">\n\t\t\t\t\t\t\t\t{{- zone.title }}\n\t\t\t\t\t\t\t</option>\n\t\t\t\t\t\t{{\n\t\t\t\t\t\t});\n\t\t\t\t\t}}\n\t\t\t\t</select>\n\t\t\t</label>\n\t\t</fieldset>\n\t</div>\n\t\x3c!-- *END, SCHEDULE START SECTION --\x3e\n\n\n\t\x3c!-- *START, RECURRENCE SECTION --\x3e\n\t<div id="scheduleRecurrence" class="section">\n\t\t<h4 class="title">\n\t\t\t{{- i18n["report.scheduling.job.edit.trigger.recurrence"] }}\n\t\t</h4>\n\n\t\t\x3c!-- RECURRENCE TYPE GROUP --\x3e\n\t\t<fieldset id="recurrenceSelector" class="group first">\n\t\t\t<label class="control select inline twoLine">\n\t\t\t\t<span class="wrap">\n\t\t\t\t\t{{- i18n["report.scheduling.job.edit.recurrencetype"] }}:\n\t\t\t\t</span>\n\t\t\t\t<select name="recurrenceType">\n\t\t\t\t\t<option value="none">{{- i18n["report.scheduling.job.edit.recurrencetype.none"] }}</option>\n\t\t\t\t\t<option value="simple">{{- i18n["report.scheduling.job.edit.recurrencetype.simple"] }}</option>\n\t\t\t\t\t<option value="calendar">{{- i18n["report.scheduling.job.edit.recurrencetype.calendar"] }}</option>\n\t\t\t\t</select>\n\t\t\t</label>\n\t\t</fieldset>\n\n\t\t\x3c!-- *START, simple recurrence repetition --\x3e\n\t\t<fieldset id="simpleRecurrenceInterval" data-recurrence="simple" class="group">\n\t\t\t<label class="control select inline">\n\t\t\t\t<span class="wrap">\n\t\t\t\t\t{{- i18n["report.scheduling.job.edit.repeatevery"] }} ({{- i18n["required.field"] }}):\n\t\t\t\t</span>\n\n\t\t\t\t<div class="control inline">\n\t\t\t\t\t<input name="recurrenceInterval" type="text">\n\n\t\t\t\t\t<div data-field="recurrenceInterval" class="warning message"></div>\n\t\t\t\t</div>\n\t\t\t</label>\n\t\t\t<select name="recurrenceIntervalUnit">\n\t\t\t\t<option value="MINUTE">{{- i18n["job.interval.unit.minute.label"] }}</option>\n\t\t\t\t<option value="HOUR">{{- i18n["job.interval.unit.hour.label"] }}</option>\n\t\t\t\t<option value="DAY">{{- i18n["job.interval.unit.day.label"] }}</option>\n\t\t\t\t<option value="WEEK">{{- i18n["job.interval.unit.week.label"] }}</option>\n\t\t\t</select>\n\t\t</fieldset>\n\t\t\x3c!-- *END, simple recurrence repetition --\x3e\n\n\t\x3c!-- *START, CALENDAR RECURRENCE --\x3e\n\t\x3c!-- *START calendar recurrence repetition --\x3e\n\n\t\t<fieldset id="calendarRecurrence" data-recurrence="calendar" class="group ">\n\t\t\t<ul class="list">\n\t\t\t\t<li id="months" class="node">\n\t\t\t\t\t<fieldset class="group">\n\t\t\t\t\t\t<legend>\n\t\t\t\t\t\t<span>\n\t\t\t\t\t\t\t{{- i18n["report.scheduling.job.edit.trigger.label.months"] }}:\n\t\t\t\t\t\t</span>\n\t\t\t\t\t\t</legend>\n\t\t\t\t\t\t<ul class="list inputSet">\n\t\t\t\t\t\t\t<li class="leaf">\n\t\t\t\t\t\t\t\t<div title="Select to recur every month" class="control radio">\n\t\t\t\t\t\t\t\t\t<label for="everyMonth_radio" class="wrap">\n\t\t\t\t\t\t\t\t\t\t{{- i18n["report.scheduling.job.edit.trigger.label.months.all"] }}\n\t\t\t\t\t\t\t\t\t</label>\n\t\t\t\t\t\t\t\t\t<input type="radio" name="whichMonth" id="everyMonth_radio" value="everyMonth">\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t</li>\n\t\t\t\t\t\t\t<li class="leaf">\n\t\t\t\t\t\t\t\t<div id="selectedMonths" class="control radio twoLine">\n\t\t\t\t\t\t\t\t\t<label for="selectedMonths_radio" class="wrap">\n\t\t\t\t\t\t\t\t\t\t{{- i18n["report.scheduling.job.edit.trigger.label.months.selected"] }}:\n\t\t\t\t\t\t\t\t\t</label>\n\t\t\t\t\t\t\t\t\t<input id="selectedMonths_radio" type="radio" name="whichMonth" value="selectedMonths" />\n\t\t\t\t\t\t\t\t\t<span class="control select multiple">\n\t\t\t\t\t\t\t\t\t<select name="monthSelector" size="12" class="monthSelector" multiple="multiple">\n\t\t\t\t\t\t\t\t\t\t<option value="1">{{- i18n["monts.label.jan"] }}</option>\n\t\t\t\t\t\t\t\t\t\t<option value="2">{{- i18n["monts.label.feb"] }}</option>\n\t\t\t\t\t\t\t\t\t\t<option value="3">{{- i18n["monts.label.mar"] }}</option>\n\t\t\t\t\t\t\t\t\t\t<option value="4">{{- i18n["monts.label.apr"] }}</option>\n\t\t\t\t\t\t\t\t\t\t<option value="5">{{- i18n["monts.label.may"] }}</option>\n\t\t\t\t\t\t\t\t\t\t<option value="6">{{- i18n["monts.label.jun"] }}</option>\n\t\t\t\t\t\t\t\t\t\t<option value="7">{{- i18n["monts.label.jul"] }}</option>\n\t\t\t\t\t\t\t\t\t\t<option value="8">{{- i18n["monts.label.aug"] }}</option>\n\t\t\t\t\t\t\t\t\t\t<option value="9">{{- i18n["monts.label.sep"] }}</option>\n\t\t\t\t\t\t\t\t\t\t<option value="10">{{- i18n["monts.label.oct"] }}</option>\n\t\t\t\t\t\t\t\t\t\t<option value="11">{{- i18n["monts.label.nov"] }}</option>\n\t\t\t\t\t\t\t\t\t\t<option value="12">{{- i18n["monts.label.dec"] }}</option>\n\t\t\t\t\t\t\t\t\t</select>\n\t\t\t\t\t\t\t\t\t<div data-field="monthSelector" class="warning message"></div>\n\t\t\t\t\t\t\t\t</span>\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t</li>\n\t\t\t\t\t\t</ul>\n\t\t\t\t\t</fieldset>\n\t\t\t\t</li>\n\n\t\t\t\t<li id="days" class="node">\n\t\t\t\t\t<fieldset class="group">\n\t\t\t\t\t\t<legend>\n\t\t\t\t\t\t<span>\n\t\t\t\t\t\t\t{{- i18n["report.scheduling.job.edit.trigger.label.days"] }}:\n\t\t\t\t\t\t</span>\n\t\t\t\t\t\t</legend>\n\t\t\t\t\t\t<ul class="list inputSet">\n\t\t\t\t\t\t\t<li class="leaf">\n\t\t\t\t\t\t\t\t<div class="control radio">\n\t\t\t\t\t\t\t\t\t<label for="everyDay_radio" class="wrap">\n\t\t\t\t\t\t\t\t\t\t{{- i18n["report.scheduling.job.edit.trigger.label.days.all"] }}\n\t\t\t\t\t\t\t\t\t</label>\n\t\t\t\t\t\t\t\t\t<input id="everyDay_radio" type="radio" name="whichDay" value="everyDay">\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t</li>\n\t\t\t\t\t\t\t<li class="leaf">\n\t\t\t\t\t\t\t\t<div id="weekDays" class="control radio twoLine">\n\t\t\t\t\t\t\t\t\t<label for="weekDays_radio" class="wrap">\n\t\t\t\t\t\t\t\t\t\t{{- i18n["report.scheduling.job.edit.selecteddays"] }}:\n\t\t\t\t\t\t\t\t\t</label>\n\t\t\t\t\t\t\t\t\t<input id="weekDays_radio" type="radio" name="whichDay" value="selectedDays" />\n\t\t\t\t\t\t\t\t\t<span class="control select multiple">\n\t\t\t\t\t\t\t\t\t<select name="daySelector" size="7" class="daySelector" multiple="multiple">\n\t\t\t\t\t\t\t\t\t\t<option value="1">{{- i18n["week.days.label.sun"] }}</option>\n\t\t\t\t\t\t\t\t\t\t<option value="2">{{- i18n["week.days.label.mon"] }}</option>\n\t\t\t\t\t\t\t\t\t\t<option value="3">{{- i18n["week.days.label.tue"] }}</option>\n\t\t\t\t\t\t\t\t\t\t<option value="4">{{- i18n["week.days.label.wed"] }}</option>\n\t\t\t\t\t\t\t\t\t\t<option value="5">{{- i18n["week.days.label.thu"] }}</option>\n\t\t\t\t\t\t\t\t\t\t<option value="6">{{- i18n["week.days.label.fri"] }}</option>\n\t\t\t\t\t\t\t\t\t\t<option value="7">{{- i18n["week.days.label.sat"] }}</option>\n\t\t\t\t\t\t\t\t\t</select>\n\t\t\t\t\t\t\t\t\t<div data-field="daySelector" class="warning message"></div>\n\t\t\t\t\t\t\t\t</span>\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t</li>\n\t\t\t\t\t\t\t<li class="leaf">\n\t\t\t\t\t\t\t\t<div id="monthDays" class="control radio twoLine">\n\t\t\t\t\t\t\t\t\t<label for="monthDays_radio" class="wrap">\n\t\t\t\t\t\t\t\t\t\t{{- i18n["report.scheduling.job.edit.datesinmonth"] }}:\n\t\t\t\t\t\t\t\t\t</label>\n\t\t\t\t\t\t\t\t\t<input id="monthDays_radio" type="radio" name="whichDay" value="datesInMonth">\n\n\t\t\t\t\t\t\t\t\t<div class="control input inline text">\n\t\t\t\t\t\t\t\t\t\t<input id="theMonthDays" name="datesInMonth" type="text" />\n\t\t\t\t\t\t\t\t\t\t<p class="message hint">\n\t\t\t\t\t\t\t\t\t\t\t{{- i18n["report.scheduling.job.edit.enterdatesordateranges"] }}\n\t\t\t\t\t\t\t\t\t\t</p>\n\t\t\t\t\t\t\t\t\t\t<div data-field="datesInMonth" class="warning message"></div>\n\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t</li>\n\t\t\t\t\t\t</ul>\n\t\t\t\t\t</fieldset>\n\t\t\t\t</li>\n\n\t\t\t\t<li id="repeatTimes" class="node">\n\t\t\t\t\t<fieldset class="group">\n\t\t\t\t\t\t<legend>\n\t\t\t\t\t\t<span>\n\t\t\t\t\t\t\t{{- i18n["report.scheduling.job.edit.trigger.recurrence.times"] }}:\n\t\t\t\t\t\t</span>\n\t\t\t\t\t\t</legend>\n\t\t\t\t\t\t<ul class="list inputSet">\n\t\t\t\t\t\t\t<li class="leaf">\n\t\t\t\t\t\t\t\t<div class="control text twoLine">\n\t\t\t\t\t\t\t\t\t<label class="control input text">\n\t\t\t\t\t\t\t\t\t<span class="wrap">\n\t\t\t\t\t\t\t\t\t\t{{- i18n["report.scheduling.job.edit.trigger.label.hours"] }} ({{- i18n["required.field"] }}):\n\t\t\t\t\t\t\t\t\t</span>\n\t\t\t\t\t\t\t\t\t\t<input type="text" name="hours">\n\n\t\t\t\t\t\t\t\t\t\t<p class="message hint">\n\t\t\t\t\t\t\t\t\t\t\t{{- i18n["report.scheduling.job.edit.trigger.label.hours.tip"] }}\n\t\t\t\t\t\t\t\t\t\t</p>\n\n\t\t\t\t\t\t\t\t\t\t<div data-field="hours" class="warning message"></div>\n\t\t\t\t\t\t\t\t\t</label>\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t</li>\n\t\t\t\t\t\t\t<li class="leaf">\n\t\t\t\t\t\t\t\t<div class="control text twoLine">\n\t\t\t\t\t\t\t\t\t<label class="control input text">\n\t\t\t\t\t\t\t\t\t<span class="wrap">\n\t\t\t\t\t\t\t\t\t\t{{- i18n["report.scheduling.job.edit.trigger.label.minutes"] }} ({{- i18n["required.field"] }}):\n\t\t\t\t\t\t\t\t\t</span>\n\t\t\t\t\t\t\t\t\t\t<input type="text" name="minutes">\n\n\t\t\t\t\t\t\t\t\t\t<p class="message hint">\n\t\t\t\t\t\t\t\t\t\t\t{{- i18n["report.scheduling.job.edit.trigger.label.minutes.tip"] }}\n\t\t\t\t\t\t\t\t\t\t</p>\n\n\t\t\t\t\t\t\t\t\t\t<div data-field="minutes" class="warning message"></div>\n\t\t\t\t\t\t\t\t\t</label>\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t</li>\n\t\t\t\t\t\t</ul>\n\t\t\t\t\t</fieldset>\n\t\t\t\t</li>\n\t\t\t</ul>\n\t\t</fieldset>\n\t\t\x3c!-- *END calendar recurrence repetition --\x3e\n\t\t\x3c!-- *END, CALENDAR RECURRENCE --\x3e\n\t</div>\n\n\t\x3c!-- *START simple recurrence end date --\x3e\n\t<fieldset id="scheduleEndSimple" class="section" data-recurrence="simple">\n\t\t<h4 class="title">\n\t\t\t{{- i18n["report.scheduling.job.edit.scheduleend"] }}\n\t\t</h4>\n\t\t<fieldset data-recurrence="simple" class="group first">\n\t\t\t<legend class="">\n\t\t\t\t<span>\n\t\t\t\t\t{{- i18n["report.scheduling.job.edit.enddate"] }}:\n\t\t\t\t</span>\n\t\t\t</legend>\n\t\t\t<ul class="list inputSet">\n\t\t\t\t<li class="leaf">\n\t\t\t\t\t<div class="control radio twoLine">\n\t\t\t\t\t\t<label for="fixedRepeat" class="wrap">\n\t\t\t\t\t\t\t{{- i18n["report.scheduling.job.edit.runasetnumberoftimes"] }}\n\t\t\t\t\t\t</label>\n\t\t\t\t\t\t<span class="wrap">\n\t\t\t\t\t\t\t{{- i18n["report.scheduling.job.edit.numberofruns"] }}:\n\t\t\t\t\t\t</span>\n\t\t\t\t\t\t<input id="fixedRepeat" type="radio" name="endat" value="numberOfTimes">\n\t\t                    <span class="control inline twoLine">\n\t\t                        <input type="text" id="maxOccurrences" name="occurrenceCount">\n\t\t                        <div data-field="occurrenceCount" class="warning message"></div>\n\t\t                    </span>\n\t\t\t\t\t</div>\n\t\t\t\t</li>\n\t\t\t\t<li class="leaf">\n\t\t\t\t\t<div id="calendarRepeatSet" class="control radio twoLine">\n\t\t\t\t\t\t<label for="calendarRepeat" class="wrap">\n\t\t\t\t\t\t\t{{- i18n["report.scheduling.job.edit.rununtilaspecifieddate"] }}:\n\t\t\t\t\t\t</label>\n\t\t\t\t\t\t<input id="calendarRepeat" type="radio" name="endat" value="specificDate">\n\t\t                    <span id="repeatEndDate" class="control picker inline twoline">\n\t\t                        <input type="text" class="datepicker" name="simpleEndDate">\n\t\t                        <div data-field="simpleEndDate" class="warning message"></div>\n\t\t                    </span>\n\t\t\t\t\t</div>\n\t\t\t\t</li>\n\t\t\t\t<li class="leaf last">\n\t\t\t\t\t<div class="control radio">\n\t\t\t\t\t\t<label for="indefiniteRepeat" class="wrap">\n\t\t\t\t\t\t\t{{- i18n["report.scheduling.job.edit.runindefinitely"] }}\n\t\t\t\t\t\t</label>\n\t\t\t\t\t\t<input id="indefiniteRepeat" type="radio" name="endat" value="indefinitely">\n\t\t\t\t\t</div>\n\t\t\t\t</li>\n\t\t\t</ul>\n\t\t</fieldset>\n\t</fieldset>\n\t\x3c!-- *END simple recurrence end date --\x3e\n\t\x3c!-- *END, SIMPLE RECURRENCE --\x3e\n\n\n\n\n\n\t\x3c!-- *START calendar recurrence end date --\x3e\n\t<fieldset id="calendarEnd" class="section" data-recurrence="calendar">\n\t\t<h4 class="title">\n\t\t\t{{- i18n["report.scheduling.job.edit.scheduleend"] }}\n\t\t</h4>\n\t\t<fieldset id="calendarEnd" class="group first">\n\t\t\t<label class="control twoLine">\n\t\t\t\t<span class="wrap">\n\t\t\t\t\t{{- i18n["report.scheduling.job.edit.enddate"] }}:\n\t\t\t\t</span>\n\t\t\t        <span class="control picker">\n\t\t\t            <input id="trigger_endDate_calendar" name="calendarEndDate" type="text" class="datepicker">\n\t\t\t            <div data-field="calendarEndDate" class="warning message"></div>\n\t\t\t        </span>\n\t\t\t</label>\n\t\t</fieldset>\n\t</fieldset>\n\t\x3c!-- *END calendar recurrence end date --\x3e\n\n\t\x3c!-- *START holidays --\x3e\n\t<div class="section" name="calendarBlockHolder">\n\t</div>\n\t\x3c!-- *END holidays --\x3e\n\n    \x3c!-- The next input tag was added because of the issue https://jira.tibco.com/browse/JS-62403 which is based on bug\n        https://bugs.chromium.org/p/chromium/issues/detail?id=914451\n        in short: Chrome auto-fills with passwords any last input tag on the page, so to fix the issue we need to add\n        an extra input tag.\n        Please, if you reading this text, try to open the original issue and check it against without this extra tag,\n        maybe it has been fixed and you can remove this hack.\n     --\x3e\n    <input style="position: fixed; top: -999px; left: -999px;" type="text" />\n</div>\n',{_:r(),i18n:o.Z,timeZones:c.Z.timeZones}))),this.$el.find("[name=calendarBlockHolder]").append(this.calView.$el),this.setupDatepickersOn()},setupDatepickersOn:function(){var t=this;this.$el.find(".datepicker").each((function(e,n){var i=s()(n);new G.Z({el:i[0],constrainInput:!0,dateFormat:tt,timeFormat:et,showOn:"button",buttonText:""}),i.next().addClass("button").addClass("picker"),t.listenTo(t.model,"change:trigger",(function(){var e=T().tz(t.model.get("trigger").timezone).utcOffset();s().datepicker._getInst(s()(n)[0]).settings.timepicker.timezone=e})),s()(n)[0].getValue=function(){return s()(this).val()}}))},triggerChanged:function(){var t=this.model.get("trigger");this.$el.find("[name=startType]").filter("[value="+t.startType+"]").prop("checked",!0),this.$el.find("[name=startDate]").val(t.startDate),this.$el.find("[name=schedulerTimeZone]").val(t.timezone),this.$el.find("[name=recurrenceType]").val(t.type),this.$el.find("fieldset[data-recurrence]").addClass("hidden"),this.$el.find('fieldset[data-recurrence="'+t.type+'"]').removeClass("hidden"),"none"===t.type&&this.$el.find("[name=calendarBlockHolder]").addClass("hidden"),"simple"===t.type&&(this.$el.find("[name=recurrenceInterval]").val(t.recurrenceInterval),this.$el.find("[name=recurrenceIntervalUnit]").val(t.recurrenceIntervalUnit),this.$el.find("[name=endat]").filter("[value="+t.radioEndDate+"]").prop("checked",!0),this.$el.find("[name=occurrenceCount]").val(t.occurrenceCount),this.$el.find("[name=simpleEndDate]").val(t.endDate),this.$el.find("[name=calendarBlockHolder]").removeClass("hidden"),this.$el.find("[name=calendarSelect]").val(t.calendarName)),"calendar"===t.type&&(this.$el.find("[name=whichMonth]").filter("[value="+t.radioWhichMonth+"]").prop("checked",!0),this.$el.find("[name=monthSelector]").val(t.months.month),this.$el.find("[name=whichDay]").filter("[value="+t.radioWhichDay+"]").prop("checked",!0),this.$el.find("[name=daySelector]").val(t.weekDays.day),this.$el.find("[name=datesInMonth]").val(t.monthDays),this.$el.find("[name=hours]").val(t.hours),this.$el.find("[name=minutes]").val(t.minutes),this.$el.find("[name=calendarEndDate]").val(t.endDate),this.$el.find("[name=calendarBlockHolder]").removeClass("hidden"),this.$el.find("[name=calendarSelect]").val(t.calendarName))},calendarChanged:function(){var t=this.model.get("trigger");t&&this.$el.find("[name=calendarSelect]").val(t.calendarName)},setStartType:function(t){this.model.update("trigger",{startType:s()(t.target).val()})},setStartDate:function(t){this.model.update("trigger",{startType:"2",startDate:s()(t.target).val()})},setTimeZone:function(t){this.model.update("trigger",{timezone:s()(t.target).val()})},setRecurrenceType:function(t){this.model.update("trigger",{type:s()(t.target).val()})},setRecurrenceInterval:function(t){this.model.update("trigger",{recurrenceInterval:s()(t.target).val()})},setRecurrenceIntervalUnit:function(t){this.model.update("trigger",{recurrenceIntervalUnit:s()(t.target).val()})},setEnDat:function(t){this.model.update("trigger",{radioEndDate:s()(t.target).val()})},setOccurrenceCount:function(t){this.model.update("trigger",{occurrenceCount:s()(t.target).val()})},setEndDate:function(t){this.model.update("trigger",{endDate:s()(t.target).val()})},monthRadioSelector:function(t){this.model.update("trigger",{radioWhichMonth:s()(t.target).val()})},setMonthSelector:function(t){for(var e=s()(t.target).val()||[],n=0,i=e.length;n<i;n++)e[n]=parseInt(e[n]);this.model.update("trigger",{months:{month:e}})},dayRadioSelector:function(t){this.model.update("trigger",{radioWhichDay:s()(t.target).val()})},setDaySelector:function(t){for(var e=s()(t.target).val()||[],n=0,i=e.length;n<i;n++)e[n]=parseInt(e[n]);this.model.update("trigger",{weekDays:{day:e}})},setDatesInMonth:function(t){this.model.update("trigger",{monthDays:s()(t.target).val()})},setHours:function(t){this.model.update("trigger",{hours:s()(t.target).val()})},setMinutes:function(t){this.model.update("trigger",{minutes:s()(t.target).val()})},setCalendar:function(t){this.model.update("trigger",{calendarName:s()(t.target).val()})}});n(60107);var it=n(46460),st=n(94277);r().extend(it.hp,c.Z.inputControlsConstants);const at=d().View.extend({initialize:function(t){this.options=r().extend({},t),this.listenTo(this.model,"change:source",this.sourceChange),s()(document).on("viewmodel:values:changed",r().bind(this.viewModelValuesChange,this))},render:function(){this.setElement(s()(r().template('<div class="parametersTab">\n\n    <js-templateNonce></js-templateNonce>\n\n\t{{ if (config.isProVersion) { }}\n\t<div class="saveCurrentValuesContainer">\n\t\t<button name="saveCurrentValuesButton" id="save" type="button" class="button action up ">\n\t\t\t<span class="wrap">{{- i18n[\'report.scheduling.job.edit.parameters.save\'] }}</span><span class="icon"></span>\n\t\t</button>\n\t</div>\n\t{{ } }}\n\n\t<ul class="list inputControls inputControlsContainer" id="inputControlsContainer"></ul>\n\n\t\x3c!-- The next block needed just to create standard for Scheduler behavior, when we are switching to the\n\ttab where the error happened. To indicate what on this tab an error happened we introduce dummy control, which may have\n\tspecial error class. The warning element is also dummy --\x3e\n\t<label class="hidden">\n\t\t<input type="text" name="parametersErrorNotifierStub" class="">\n\t\t<span class="message warning" data-field="parametersErrorNotifierStub"></span>\n\t</label>\n</div>',{i18n:o.Z,config:c.Z})))},saveAsDialogButtonSaveClick:function(){var t=this,e=this.reportOptionsDialog.input.getValue(),n=this.model.controlsController.getViewModel().get("selection"),i=e===this.reportOptionsDialog.optionNameToOverwrite;s().when(this.reportOptions.add(this.reportOptions.optionsUrl||this.reportOptions.url,e,n,i)).done((function(){t.reportOptionsDialog.hideWarning();var e=t.reportOptions.getElem().parent();0===e.length&&(e=t.$el.find(".saveCurrentValuesContainer")).prepend(t.reportOptions.getElem()),t.reportOptionsDialog.hide(),delete t.reportOptionsDialog.optionNameToOverwrite})).fail((function(n){try{var s=JSON.parse(n.responseText);"report.options.dialog.confirm.message"===s.errorCode&&!i&&(t.reportOptionsDialog.optionNameToOverwrite=e),t.reportOptionsDialog.showWarning(s.message)}catch(t){}}))},sourceChange:function(t,e){var n=e&&e.reportUnitURI,i=this.model.get("source").parameters;if(i){var s=i.parameterValues;for(var a in s)s.hasOwnProperty(a)&&null===s[a]&&delete s[a];this.reportOptions&&(this.reportOptions.url=void 0),this.model.controlsController=new st.hl.Controls.Controller({reportUri:n,reportOptionUri:"",preSelectedData:s});var r=this;this.model.controlsController.fetchAndSetInputControlsState(s).done((function(t){t?r.trigger("IC_Displayed"):r.trigger("failedToGet_IC")})).fail((function(){r.trigger("failedToGet_IC")}))}},viewModelValuesChange:function(){this.model.set("source",{reportUnitURI:this.model.get("source").reportUnitURI,parameters:{parameterValues:this.model.controlsController.getViewModel().get("selection")}},{validate:!1,silent:!0})}});var rt=n(54339),ot=n(35826),lt=n(92111);const dt=d().View.extend({events:{"click .ftp-test":"testFTPConnection","click [name=outputRepositoryButton]":"outputRepositoryButtonClick","click [name=sshKeyPathButton]":"sshKeyPathButtonClick","change [name=outputRepository]":"fixUriInput","change [name=sshKeyPath]":"fixUriInput"},binding:[{attr:"baseOutputFilename",control:"baseOutputFilename"},{attr:"outputTimeZone",control:"timeZone"},{attr:"outputLocale",control:"outputLocale"},{attr:"outputFormats/outputFormat",control:"outputFormats"},{attr:"repositoryDestination/outputDescription",control:"outputDescription"},{attr:"repositoryDestination/overwriteFiles",control:"overwriteFiles"},{attr:"repositoryDestination/sequentialFilenames",control:"sequentialFilenames"},{attr:"repositoryDestination/timestampPattern",control:"timestampPattern"},{attr:"repositoryDestination",control:"timestampPattern",depends:"repositoryDestination/sequentialFilenames"},{attr:"repositoryDestination/saveToRepository",control:"outputToRepository"},{attr:"repositoryDestination",control:"outputRepository, outputRepositoryButton",depends:"repositoryDestination/saveToRepository"},{attr:"repositoryDestination/folderURI",control:"outputRepository"},{attr:"repositoryDestination",control:"outputHostFileSystem",depends:"repositoryDestination/outputLocalFolder",disabled:!("true"===c.Z.enableSaveToHostFS||!0===c.Z.enableSaveToHostFS)},{attr:"repositoryDestination/outputLocalFolder",control:"outputToHostFileSystem",getter:function(t){return!1===t?null:""},setter:function(t){return""===t||!!t}},{attr:"repositoryDestination/outputLocalFolder",control:"outputHostFileSystem"},{attr:"repositoryDestination/outputFTPInfo/enabled",control:"outputToFTPServer",getter:function(t){return!1===t&&this.$el.find("#ftpServerOutput").find(".error").removeClass("error"),t}},{attr:"repositoryDestination/outputFTPInfo",control:"ftpAddress, ftpDirectory, ftpUsername, ftpPassword, ftpTestButton, ftpPort, ftpProtocol, sshKeyEnabled, sshKeyPath, sshKeyPathButton, sshPassphrase",depends:"repositoryDestination/outputFTPInfo/enabled"},{attr:"repositoryDestination/outputFTPInfo/serverName",control:"ftpAddress"},{attr:"repositoryDestination/outputFTPInfo/folderPath",control:"ftpDirectory"},{attr:"repositoryDestination/outputFTPInfo/userName",control:"ftpUsername",setter:function(t){return"anonymous"==t?null:t}},{attr:"repositoryDestination/outputFTPInfo/password",control:"ftpPassword"},{attr:"repositoryDestination/outputFTPInfo/port",control:"ftpPort"},{attr:"repositoryDestination/outputFTPInfo/type",control:"ftpProtocol",setter:function(t){return this.$el.find(".control[data-ftp-type]").addClass("hidden"),t&&"sftp"===t&&this.$el.find(".control[data-ftp-type=sftp]").removeClass("hidden"),t}},{attr:"repositoryDestination/outputFTPInfo/sshKeyEnabled",control:"sshKeyEnabled"},{attr:"repositoryDestination/outputFTPInfo/sshKey",control:"sshKeyPath"},{attr:"repositoryDestination/outputFTPInfo/sshPassphrase",control:"sshPassphrase"},{attr:"repositoryDestination/outputFTPInfo",control:"sshKeyPath, sshKeyPathButton, sshPassphrase",depends:"repositoryDestination/outputFTPInfo/sshKeyEnabled",setter:function(t){return t&&!!this.$el.find("[name=outputToFTPServer]").filter(":checked").map((function(){return s()(this).val()})).get()[0]}}],availableFormats:c.Z.availableReportJobOutputFormats||[],initialize:function(t){this.options=r().extend({},t);var e=this;this.model.on("change:repositoryDestination",(function(t,n){var i=t.get("repositoryDestination");e.$el.find("[name=ftpPort]").val(i.outputFTPInfo.port)}))},isFormatAvailable:function(t){return r().contains(this.availableFormats,t)},getFolderChooserDialog:function(){if(this.folderChooserDialog)return this.folderChooserDialog;var t=this,e=rt.Z.getDialog("folder");return this.folderChooserDialog=new e({treeBufferSize:parseInt(lt.Z.treeLevelLimit,10),setMinSizeAsSize:!0}),this.listenTo(this.folderChooserDialog,"close",(function(){var e;this.folderChooserDialog.selectedResource&&this.folderChooserDialog.selectedResource.resourceUri&&(e=this.folderChooserDialog.selectedResource.resourceUri,t.$el.find("[name=outputRepository]").val(e).trigger("change"))})),this.folderChooserDialog.setDefaultSelectedItem(this.model.get("repositoryDestination").folderURI),this.folderChooserDialog},outputRepositoryButtonClick:function(){this.getFolderChooserDialog().open()},getSshKeyChooserDialog:function(){if(this.sshKeyChooserDialog)return this.sshKeyChooserDialog;var t=this,e=rt.Z.getDialog("item");this.sshKeyChooserDialog=new e({disableListTab:!0,treeBufferSize:parseInt(lt.Z.treeLevelLimit,10),resourcesTypeToSelect:[ot.Z.SECURE_FILE]}),this.listenTo(this.sshKeyChooserDialog,"close",(function(){var e;this.sshKeyChooserDialog.selectedResource&&this.sshKeyChooserDialog.selectedResource.resourceUri&&(e=this.sshKeyChooserDialog.selectedResource.resourceUri,t.$el.find("[name=sshKeyPath]").val(e).trigger("change"))}));var n=(this.model.get("repositoryDestination").outputFTPInfo||{}).sshKey;return this.sshKeyChooserDialog.setDefaultSelectedItem(n),this.sshKeyChooserDialog},sshKeyPathButtonClick:function(){this.getSshKeyChooserDialog().open()},fixUriInput:function(t){var e=s()(t.currentTarget),n=e.val();this.model.isValidUri(n)&&(""===n||r().startsWith(n,"/")?r().startsWith(n,"//")?e.val(n.substring(1,n.length)).trigger("change"):n.length>1&&r().endsWith(n,"/")&&e.val(n.substring(0,n.length-1)).trigger("change"):e.val("/"+n).trigger("change"))},render:function(){this._renderTemplate(),this._initializeBinding()},_renderTemplate:function(){var t=r().extend({},{_:r(),i18n:o.Z,availableFormats:this.availableFormats,timeZones:c.Z.timeZones,locales:c.Z.availableLocales,localesName:c.Z.availableLocalesFullName},this.model.attributes);this.setElement(s()(r().template('<div class="outputTab">\n\n    <js-templateNonce></js-templateNonce>\n\n\t<div class="outputFileOptions section">\n\n\t\t<h4 class="title">\n\t\t\t{{- i18n["report.scheduling.job.edit.output.label"] }}\n\t\t</h4>\n\n\t\t\x3c!-- start name and description --\x3e\n\t\t<fieldset id="outputFileName" class="group first" title="{{- i18n["report.scheduling.job.edit.parameters.tooltip.baseFileName"] }}">\n\t\t\t<label class="control input text">\n\t\t\t\t<span class="wrap">\n\t\t\t\t\t{{- i18n["report.scheduling.job.edit.output.filename"] }} ({{- i18n["required.field"] }}):\n\t\t\t\t</span>\n\t\t\t\t<input name="baseOutputFilename" type="text" value="" maxlength="200">\n\t\t\t\t<span data-field="baseOutputFilename" class="message warning"></span>\n\t\t\t</label>\n\t\t</fieldset>\n\t\t<fieldset id="outputDescription" class="group">\n\t\t\t<label class="control textArea">\n\t\t\t\t<span class="wrap">\n\t\t\t\t\t{{- i18n["report.scheduling.job.edit.label.description"] }}:\n\t\t\t\t</span>\n\t\t\t\t<textarea name="outputDescription"></textarea>\n\t\t\t\t<span data-field="outputDescription" class="message warning"></span>\n\t\t\t</label>\n\t\t</fieldset>\n\t\t\x3c!-- end name and description --\x3e\n\n\t\t\x3c!-- start time zone --\x3e\n\t\t<fieldset id="timeZone" class="group">\n\t\t\t<label class="control select inline twoLine">\n\t\t\t\t<span class="wrap">\n\t\t\t\t\t{{- i18n["report.scheduling.job.edit.output.label.timezone"] }}:\n\t\t\t\t</span>\n\t\t\t\t<select name="timeZone">\n\t\t\t\t\t{{\n\t\t\t\t\t\t_.each(timeZones, function(zone) {\n\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t<option value="{{- zone.value }}">\n\t\t\t\t\t\t\t\t{{- zone.title }}\n\t\t\t\t\t\t\t</option>\n\t\t\t\t\t\t{{\n\t\t\t\t\t\t});\n\t\t\t\t\t}}\n\t\t\t\t</select>\n\t\t\t</label>\n\t\t</fieldset>\n\t\t\x3c!-- end time zone --\x3e\n\n\t\t\x3c!-- start output locale --\x3e\n\t\t<fieldset id="outputLocale" class="group">\n\t\t\t<label class="control select inline twoLine">\n\t\t\t\t<span class="wrap">\n\t\t\t\t\t{{- i18n["report.scheduling.job.edit.output.label.locale"] }}:\n\t\t\t\t</span>\n\t\t\t\t<select name="outputLocale">\n\t\t\t\t\t<option value="" selected="">({{- i18n["report.scheduling.job.edit.output.locale.default"] }})</option>\n\t\t\t\t\t{{ for (var i = 0; i < locales.length; i++) { }}\n\t\t\t\t\t<option value="{{- locales[i] }}">{{- localesName[i] }}</option>\n\t\t\t\t\t{{ } }}\n\t\t\t\t</select>\n\t\t\t</label>\n\t\t</fieldset>\n\t\t\x3c!-- end output locale --\x3e\n\n\t\t\x3c!-- start formats --\x3e\n\t\t<fieldset id="outputFormat" class="group">\n\t\t\t<input id="outputFormats" type="hidden">\n\t\t\t<legend>\n\t\t\t\t<span class="wrap">\n\t\t\t\t\t{{- i18n["report.scheduling.job.edit.output.label.outputFormat"] }}:\n\t\t\t\t</span>\n\t\t\t</legend>\n\n\t\t\t<ul class="list inputSet">\n\n\t\t\t\t{{ for (var cindex = 0, formats = []; cindex < availableFormats.length; cindex++) { }}\n\t\t\t\t{{     for (var index = 0; index < availableFormats[cindex].formats.length; index++) { }}\n\t\t\t\t{{         var f = formats.find(e => e.format == availableFormats[cindex].formats[index]); }}\n\t\t\t\t{{         f || formats.push(f = {format: availableFormats[cindex].formats[index], exportTypes: \'\'}); }}\n\t\t\t\t{{         f.exportTypes += \'|\' + availableFormats[cindex].exportType + \'|\'; }}\n\t\t\t\t{{     } }}\n\t\t\t\t{{ } }}\n\n\t\t\t\t{{ for (var index = 0; index < formats.length; index++) { }}\n\t\t\t\t<li class="leaf">\n\t\t\t\t\t<div class="control checkBox">\n\t\t\t\t\t\t<label class="wrap" for="scheduler_box_{{- index}}" title="{{- i18n["report.output." + formats[index].format.replace("_",".").toLowerCase() + ".label.tooltip"] }}">\n\t\t\t\t\t\t{{- i18n["report.output." +  formats[index].format.replace("_",".").toLowerCase() + ".label"] }}\n\t\t\t\t\t\t</label>\n\t\t\t\t\t\t<input id="scheduler_box_{- index}}" name="outputFormats" value="{{- formats[index].format.toUpperCase() }}" type="checkbox" data-export-types="{{- formats[index].exportTypes }}">\n\t\t\t\t\t</div>\n\t\t\t\t</li>\n\n\t\t\t\t{{ } }}\n\t\t\t</ul>\n\n\t\t\t<span data-field="outputFormats" class="message warning"></span>\n\t\t</fieldset>\n\t\t\x3c!-- end formats --\x3e\n\n\t\t\x3c!-- start file handling --\x3e\n\t\t<fieldset id="fileHandling" class="group">\n\t\t\t<legend class="">\n\t\t\t\t<span class="wrap">\n\t\t\t\t\t{{- i18n["report.scheduling.job.edit.file.handling"] }}:\n\t\t\t\t</span>\n\t\t\t</legend>\n\t\t\t<ul class="list inputSet">\n\t\t\t\t<li class="leaf">\n\t\t\t\t\t<div class="control checkBox">\n\t\t\t\t\t\t<label class="wrap" for="scheduler_overwriteFiles">\n\t\t\t\t\t\t\t{{- i18n["report.scheduling.job.edit.repository.label.overwriteFiles"] }}\n\t\t\t\t\t\t</label>\n\t\t\t\t\t\t<input id="scheduler_overwriteFiles" type="checkbox" name="overwriteFiles" value="overwrite">\n\t\t\t\t\t</div>\n\t\t\t\t</li>\n\t\t\t\t<li class="leaf">\n\t\t\t\t\t<div class="control checkBox twoLine">\n\t\t\t\t\t\t<label class="wrap" for="scheduler_sequentialFilenames">\n\t\t\t\t\t\t\t{{- i18n["report.scheduling.job.edit.file.handling.sequential"] }}\n\t\t\t\t\t\t</label>\n\t\t\t\t\t\t<span class="wrap">\n\t\t\t\t\t\t\t{{- i18n["report.scheduling.job.edit.repository.label.timestampPattern"] }}:\n\t\t\t\t\t\t</span>\n\t\t\t\t\t\t<input id="scheduler_sequentialFilenames" type="checkbox" name="sequentialFilenames" value="sequential">\n\t\t\t\t\t\t<label class="control inline twoLine" title="{{- i18n["report.scheduling.job.edit.parameters.tooltip.timestamp.pattern.sequential"] }}">\n\t\t\t\t\t\t\t<input name="timestampPattern" type="text" maxlength="100" title="{{- i18n["report.scheduling.job.edit.parameters.tooltip.timestamp.pattern.simple.data"] }}">\n\t\t\t\t\t\t\t<span data-field="timestampPattern" class="message warning"></span>\n\t\t\t\t\t\t</label>\n\t\t\t\t\t</div>\n\t\t\t\t</li>\n\t\t\t</ul>\n\t\t</fieldset>\n\t\t\x3c!-- end file handling --\x3e\n\t</div>\n\n\t\x3c!-- start output destinations --\x3e\n\t<div class="outputDestination section">\n\t\t<h4 class="title">\n\t\t\t{{- i18n["report.scheduling.job.edit.destination"] }}\n\t\t</h4>\n\t\t<ul class="list group first inputSet">\n\n\t\t\t<li id="repositoryOutput" class="leaf">\n\t\t\t\t<div class="control checkBox">\n\t\t\t\t\t<label class="control browser" for="scheduler_outputToRepository">\n\t\t\t\t\t\t<span class="wrap">\n\t\t\t\t\t\t\t{{- i18n["report.scheduling.job.edit.destination.repository"] }}\n\t\t\t\t\t\t</span>\n\t\t\t\t\t</label>\n\t\t\t\t\t<input id="scheduler_outputToRepository" type="checkbox" name="outputToRepository">\n\t\t\t\t</div>\n\t\t\t\t<div class="control browser">\n\t\t\t\t\t<input type="text" name="outputRepository">\n\t\t\t\t\t<button name="outputRepositoryButton" class="button action up" type="button">\n\t\t\t\t\t\t<span class="wrap">\n\t\t\t\t\t\t\t{{- i18n["button.browse"] }}\n\t\t\t\t\t\t\t<span class="icon"></span>\n\t\t\t\t\t\t</span>\n\t\t\t\t\t</button>\n\t\t\t\t\t<span data-field="outputRepository" class="message warning"></span>\n\t\t\t\t</div>\n\t\t\t</li>\n\n\t\t\t<li id="fileSystemOutput" class="leaf">\n\t\t\t\t<div class="control checkBox">\n\t\t\t\t\t<label class="control checkBox" for="scheduler_outputToHostFileSystem">\n\t\t\t\t\t\t<span class="wrap">\n\t\t\t\t\t\t\t{{- i18n["report.scheduling.job.edit.destination.fs"] }}\n\t\t\t\t\t\t</span>\n\t\t\t\t\t</label>\n\t\t\t\t\t<input id="scheduler_outputToHostFileSystem" type="checkbox" name="outputToHostFileSystem">\n\t\t\t\t</div>\n\t\t\t\t<div class="control text">\n\t\t\t\t\t<label class="control input text" for="ftpAddress">\n\t\t\t\t\t\t<input type="text" name="outputHostFileSystem" />\n\t\t\t\t\t\t<span data-field="outputHostFileSystem" disabled="" class="message warning"></span>\n\t\t\t\t\t</label>\n\t\t\t\t</div>\n\t\t\t</li>\n\n\t\t\t<li id="ftpServerOutput" class="leaf">\n\t\t\t\t<ul class="list">\n\t\t\t\t\t<li class="leaf">\n\t\t\t\t\t\t<div class="control checkBox">\n\t\t\t\t\t\t\t<label class="control checkBox" for="scheduler_outputToFTPServer">\n\t\t\t\t\t\t\t\t<span class="wrap">\n\t\t\t\t\t\t\t\t\t{{- i18n["report.scheduling.job.edit.destination.ftp"] }}\n\t\t\t\t\t\t\t\t</span>\n\t\t\t\t\t\t\t</label>\n\t\t\t\t\t\t\t<input id="scheduler_outputToFTPServer" type="checkbox"\n\t\t\t\t\t\t\t       name="outputToFTPServer">\n\t\t\t\t\t\t</div>\n\n\t\t\t\t\t\t\x3c!-- FTP output - SERVER ADDRESS --\x3e\n\t\t\t\t\t\t<div class="control text">\n\t\t\t\t\t\t\t<label class="control input text" for="ftpAddress">\n\t\t\t\t\t\t\t\t<span class="wrap">\n\t\t\t\t\t\t\t\t\t{{- i18n["report.scheduling.job.edit.destination.ftp.server"] }}:\n\t\t\t\t\t\t\t\t</span>\n\t\t\t\t\t\t\t\t<input id="ftpAddress" type="text" name="ftpAddress">\n\t\t\t\t\t\t\t\t<span data-field="ftpAddress" class="message warning"></span>\n\t\t\t\t\t\t\t</label>\n\t\t\t\t\t\t</div>\n\n\t\t\t\t\t\t\x3c!-- FTP output - PORT --\x3e\n\t\t\t\t\t\t<div class="control text inline one">\n\t\t\t\t\t\t\t<label class="control input text" for="ftpPort">\n\t\t\t\t\t\t\t\t\t\t<span class="wrap">\n\t\t\t\t\t\t\t\t\t\t\t{{- i18n["report.scheduling.job.edit.destination.ftp.port"] }}:\n\t\t\t\t\t\t\t\t\t\t</span>\n\t\t\t\t\t\t\t\t<input type="text" name="ftpPort" id="ftpPort" >\n\t\t\t\t\t\t\t\t<span data-field="ftpPort" class="message warning"></span>\n\t\t\t\t\t\t\t</label>\n\t\t\t\t\t\t</div>\n\n\t\t\t\t\t\t\x3c!-- FTP output - Transfer Protocol --\x3e\n\t\t\t\t\t\t<div class="control select inline two">\n\t\t\t\t\t\t\t<label class="control select" for="scheduler_ftpProtocol">\n\t\t\t\t\t\t\t\t<span class="wrap">{{- i18n["report.scheduling.job.edit.destination.ftp.protocol"] }}:</span>\n\t\t\t\t\t\t\t\t<select name="ftpProtocol" id="scheduler_ftpProtocol">\n\t\t\t\t\t\t\t\t\t<option value="ftp">{{- i18n["report.scheduling.job.edit.destination.ftp.protocol.ftp"] }}</option>\n\t\t\t\t\t\t\t\t\t<option value="ftps">{{- i18n["report.scheduling.job.edit.destination.ftp.protocol.ftps"] }}</option>\n\t\t\t\t\t\t\t\t\t<option value="sftp">{{- i18n["report.scheduling.job.edit.destination.ftp.protocol.sftp"] }}</option>\n\t\t\t\t\t\t\t\t</select>\n\t\t\t\t\t\t\t</label>\n\t\t\t\t\t\t</div>\n\n\t\t\t\t\t\t\x3c!-- FTP output - DIRECTORY --\x3e\n\t\t\t\t\t\t<div class="control text">\n\t\t\t\t\t\t\t<label class="control input text" for="ftpDirectory">\n\t\t\t\t\t\t\t\t<span class="wrap">\n\t\t\t\t\t\t\t\t\t{{- i18n["report.scheduling.job.edit.destination.ftp.dir"] }}:\n\t\t\t\t\t\t\t\t</span>\n\t\t\t\t\t\t\t\t<input id="ftpDirectory" type="text" name="ftpDirectory">\n\t\t\t\t\t\t\t\t<span data-field="ftpDirectory" class="message warning"></span>\n\t\t\t\t\t\t\t</label>\n\t\t\t\t\t\t</div>\n\n\t\t\t\t\t\t\x3c!-- FTP output - USER --\x3e\n\t\t\t\t\t\t<div class="control text inline">\n\t\t\t\t\t\t\t<label class="control input text" for="ftpUsername">\n\t\t\t\t\t\t\t\t<span class="wrap">{{- i18n["report.scheduling.job.edit.destination.ftp.user"] }}:</span>\n\t\t\t\t\t\t\t\t<input id="ftpUsername" type="text" name="ftpUsername">\n\t\t\t\t\t\t\t\t<span data-field="ftpUsername" class="message warning"></span>\n\t\t\t\t\t\t\t</label>\n\t\t\t\t\t\t</div>\n\n\t\t\t\t\t\t\x3c!-- FTP output - PASSWORD --\x3e\n\t\t\t\t\t\t<div class="control text inline two">\n\t\t\t\t\t\t\t<label class="control input text" for="ftpPassword">\n\t\t\t\t\t\t\t\t<span class="wrap">{{- i18n["report.scheduling.job.edit.destination.ftp.password"] }}:</span>\n\t\t\t\t\t\t\t\t\t<input type="password" id="ftpPassword" name="ftpPassword">\n\t\t\t\t\t\t\t\t<span data-field="ftpPassword" class="message warning"></span>\n\t\t\t\t\t\t\t</label>\n\t\t\t\t\t\t</div>\n\n\t\t\t\t\t</li>\n\n\t\t\t\t\t<li class="leaf">\n\n\t\t\t\t\t\t<div class="control checkBox" data-ftp-type="sftp">\n\t\t\t\t\t\t\t<label class="control checkBox" for="scheduler_sshKeyEnabled">\n\t\t\t\t\t\t\t\t<span class="wrap">\n\t\t\t\t\t\t\t\t\t{{- i18n["report.scheduling.job.edit.destination.ftp.ssh"] }}\n\t\t\t\t\t\t\t\t</span>\n\t\t\t\t\t\t\t</label>\n\t\t\t\t\t\t\t<input id="scheduler_sshKeyEnabled" type="checkbox" name="sshKeyEnabled">\n\t\t\t\t\t\t</div>\n\n\t\t\t\t\t\t<div class="control text" data-ftp-type="sftp">\n\t\t\t\t\t\t\t<label for="scheduler_sshKeyPath" class="control browser">\n\t\t\t\t\t\t\t\t<span class="wrap">\n\t\t\t\t\t\t\t\t\t{{- i18n["report.scheduling.job.edit.destination.ftp.ssh.key"] }}:\n\t\t\t\t\t\t\t\t</span>\n\t\t\t\t\t\t\t\t<input type="text" name="sshKeyPath" id="scheduler_sshKeyPath">\n\t\t\t\t\t\t\t\t<button name="sshKeyPathButton" class="button action up" type="button">\n\t\t\t\t\t\t\t\t\t<span class="wrap">\n\t\t\t\t\t\t\t\t\t\t{{- i18n["button.browse"] }}\n\t\t\t\t\t\t\t\t\t\t<span class="icon"></span>\n\t\t\t\t\t\t\t\t\t</span>\n\t\t\t\t\t\t\t\t</button>\n\t\t\t\t\t\t\t\t<span data-field="sshKey" class="message warning"></span>\n\t\t\t\t\t\t\t\t<span class="message hint">{{- i18n["report.scheduling.job.edit.destination.ftp.ssh.key.hint"] }}</span>\n\t\t\t\t\t\t\t</label>\n\t\t\t\t\t\t</div>\n\n\t\t\t\t\t\t<div class="control text" data-ftp-type="sftp">\n\t\t\t\t\t\t\t<label class="control input text">\n\t\t\t\t\t\t\t\t<span class="wrap">\n\t\t\t\t\t\t\t\t\t{{- i18n["report.scheduling.job.edit.destination.ftp.ssh.passphrase"] }}:\n\t\t\t\t\t\t\t\t</span>\n\t\t\t\t\t\t\t\t<input type="password" name="sshPassphrase">\n\t\t\t\t\t\t\t\t<span data-field="sshPassphrase" class="message warning"></span>\n\t\t\t\t\t\t\t</label>\n\t\t\t\t\t\t</div>\n\n\t\t\t\t\t</li>\n\t\t\t\t</ul>\n\t\t\t</li>\n\t\t</ul>\n\n\t\t<fieldset id="testConnection" class="group inputSet">\n\t\t\t<button name="ftpTestButton" id="ftpTestButton" class="button action ftp-test up" type="button">\n\t            <span class="wrap">\n\t\t            {{- i18n["report.scheduling.job.edit.destination.ftp.test"] }}\n\t                <span class="icon"></span>\n\t            </span>\n\t\t\t</button>\n\t\t\t<span data-field="ftpTest" class="message warning"></span>\n\t\t</fieldset>\n\t</div>\n</div>\n',t)))},_initializeBinding:function(){var t=this;this.$el.find("[name=outputToHostFileSystem]").attr("disabled","true"!==c.Z.enableSaveToHostFS&&!0!==c.Z.enableSaveToHostFS&&"disabled"),this.map=r().map(this.binding,r().clone),r().each(this.map,(function(e){if(e.control=e.control.split(","),e.control=e.control.map((function(t){return"[name="+t+"]"})),e.control=t.$el.find(e.control.join(",")),e.attr&&(e.attr=e.attr.split("/")),e.depends&&"!"===e.depends[0]&&(e.invert=!0,e.depends=e.depends.substr(1)),e.depends&&!e.attr){e.depends=t.$el.find("[name="+e.depends+"]");var n=function(){var n=e.setter?e.setter.call(t,e.depends):e.depends.val(),i=e.disabled||(e.invert?!!n:!n);e.control.attr("disabled",!!i&&"disabled")};return e.depends.on("change",n),n()}t.model.on("change:"+e.attr[0],(function(n,i){if(i=n.value(e.attr.join("/")),e.setter&&(i=e.setter.call(t,i)),e.depends){var s=n.value(e.depends);e.setter?s=e.setter.call(t,s):""===s&&(s=!0);var a=e.disabled||(e.invert?!!s:!s);return e.control.attr("disabled",!!a&&"disabled")}e.control.is("[type=checkbox]")&&1===e.control.length?e.control.prop("checked",i):e.control.is("[type=radio]")?e.control.filter("[value="+i+"]").prop("checked",!0):e.control.val(i)})),e.control.length&&!e.depends&&e.control.on("change",(function(){var n,i,a,o;if(i=e.control.is("[type=checkbox]")?e.control.filter(":checked").map((function(){return s()(this).val()})).get():e.control.val(),e.control.is("[type=checkbox]")&&1===e.control.length&&(i=!!i[0]),e.control.is("[type=radio]")&&(i=e.control.filter(":checked").val()),e.getter&&(i=e.getter.call(t,i,r().clone(t.model.value(e.attr.join("/"))))),e.attr.length>1){o=a=r().clone(t.model.get(e.attr[0]));for(var l=1,d=e.attr.length-1;l<d;l++)o[n=e.attr[l]]=o[n]?r().clone(o[n]):{},o=o[n];o[e.attr[e.attr.length-1]]=i,"repositoryDestination/outputFTPInfo/type"===e.attr.join("/")&&(o.port=t.model.ftpPortDefaults[i])}t.model.update(e.attr[0],a||i)}))}))},testFTPConnection:function(){s()("#ftpTestButton").addClass("disabled"),this.$el.find("#ftpServerOutput").find(".error").removeClass("error"),this.model.testFTPConnection((function(){s()("#ftpTestButton").removeClass("disabled")}))}}),ct=d().View.extend({events:{"change [name=to_suc]":"to_suc_Change","change [name=cc_suc]":"cc_suc_Change","change [name=bcc_suc]":"bcc_suc_Change","change [name=subject_suc]":"subject_suc_Change","change [name=message_suc]":"message_suc_Change","change [name=resultSendTypeRadio]":"setResultSendType","change [name=includeHtmlReport]":"setResultSendType","change [name=dontSendEmptyReport]":"dont_send_empty_report_Change","change [name=job_status_to]":"job_status_to_Change","change [name=job_status_subject]":"job_status_subject_Change","change [name=job_status_success_message]":"job_status_success_message_Change","change [name=job_status_failed_message]":"job_status_failed_message_Change","change [name=send_success_notification]":"twoCheckboxes_Change","change [name=send_failure_notification]":"twoCheckboxes_Change","change [name=include_report]":"include_report_Change","change [name=include_stack_trace]":"include_stack_trace_Change"},initialize:function(t){var e=this;this.options=t,this.model.on("change:mailNotification",(function(t){var n=t.get("mailNotification");if(n){e.$el.find("[name=to_suc]").val(n.toAddresses.address),e.$el.find("[name=cc_suc]").val(n.ccAddresses.address),e.$el.find("[name=bcc_suc]").val(n.bccAddresses.address),e.$el.find("[name=subject_suc]").val(n.subject),e.$el.find("[name=message_suc]").val(n.messageText),e.message_suc_DisabledEnabled(t);var i=!1,s="";switch(n.resultSendType){case"SEND":s="asRepoLinks";break;case"SEND_EMBED":i=!0,s="asAttachedFiles";break;case"SEND_EMBED_ZIP_ALL_OTHERS":i=!0,s="asAttachedZip";break;case"SEND_ATTACHMENT":s="asAttachedFiles";break;case"SEND_ATTACHMENT_ZIP_ALL":s="asAttachedZip"}e.$el.find("[name=resultSendTypeRadio]").filter("[value="+s+"]").prop("checked",!0),e.asRepoLinks_DisabledEnabled(t),e.$el.find("[name=includeHtmlReport]").prop("checked",i),e.includeHtmlReport_DisabledEnabled(t),e.$el.find("[name=dontSendEmptyReport]").prop("checked",n.skipEmptyReports)}})),this.model.on("change:alert",(function(t){var n=t.get("alert");n&&(e.$el.find("[name=job_status_to]").val(n.toAddresses.address),e.$el.find("[name=send_success_notification]").prop("checked",-1!==n.jobState.indexOf("SUCCESS_ONLY")||-1!==n.jobState.indexOf("ALL")),e.$el.find("[name=send_failure_notification]").prop("checked",-1!==n.jobState.indexOf("FAIL_ONLY")||-1!==n.jobState.indexOf("ALL")),e.$el.find("[name=job_status_subject]").val(n.subject),e.$el.find("[name=job_status_success_message]").val(n.messageText),e.$el.find("[name=job_status_failed_message]").val(n.messageTextWhenJobFails),e.$el.find("[name=include_report]").prop("checked",!!n.includingReportJobInfo),e.$el.find("[name=include_stack_trace]").prop("checked",!!n.includingStackTrace))})),this.model.on("change:outputFormats",(function(t,n){if(!(n.outputFormat.indexOf("HTML")>=0)){var i=e.model.get("mailNotification");if(i&&i.resultSendType&&("SEND_EMBED"===i.resultSendType||"SEND_EMBED_ZIP_ALL_OTHERS"===i.resultSendType)){var s="SEND",a=t.get("repositoryDestination");return a&&(a.saveToRepository||(s="SEND_ATTACHMENT")),void t.update("mailNotification",{resultSendType:s})}}e.includeHtmlReport_DisabledEnabled(t)})),this.model.on("change:repositoryDestination",(function(t,n){if(!n.saveToRepository){var i=e.model.get("mailNotification");if(i&&i.resultSendType&&"SEND"===i.resultSendType)return void t.update("mailNotification",{resultSendType:"SEND_ATTACHMENT"})}e.asRepoLinks_DisabledEnabled(t)}))},render:function(){this.setElement(s()(r().template('<div class="notificationsTab">\n\n    <js-templateNonce></js-templateNonce>\n\t<fieldset class="row inputs twoColumn_equal">\n\t\t<div class="column secondary">\n\t\t\t<div class="content">\n\t\t\t\t<div id="jobSuccess" class="section">\n\t\t\t\t\t<h4 class="title">\n\t\t\t\t\t\t{{- i18n["report.scheduling.job.edit.email.header"] }}\n\t\t\t\t\t</h4>\n\t\t\t\t\t<fieldset class="group first">\n\t\t\t\t\t\t<legend><span>\n\t\t\t\t\t\t\t{{- i18n["report.scheduling.job.edit.sendreportwhenschedulerrunssuccessfully"] }}\n\t\t\t\t\t\t</span></legend>\n\t\t\t\t\t\t<label class="control input text">\n\t\t\t\t\t\t\t<span class="wrap">\n\t\t\t\t\t\t\t\t{{- i18n["report.scheduling.job.edit.email.label.to"] }}:\n\t\t\t\t\t\t\t</span>\n\t\t\t\t\t\t\t<input type="text" name="to_suc" />\n\t\t\t\t\t\t\t<span class="message hint">\n\t\t\t\t\t\t\t\t{{- i18n["report.scheduling.job.edit.usecommastoseparateaddresses"] }}\n\t\t\t\t\t\t\t</span>\n\t\t\t\t\t\t\t<div data-field="to_suc" class="warning message"></div>\n\t\t\t\t\t\t</label>\n\t\t\t\t\t\t<label class="control input text">\n\t\t\t\t\t\t\t<span class="wrap">\n\t\t\t\t\t\t\t\t{{- i18n["report.scheduling.job.edit.email.label.cc"] }}:\n\t\t\t\t\t\t\t</span>\n\t\t\t\t\t\t\t<input type="text" name="cc_suc" />\n\t\t\t\t\t\t\t<div data-field="cc_suc" class="warning message"></div>\n\t\t\t\t\t\t</label>\n\t\t\t\t\t\t<label class="control input text">\n\t\t\t\t\t\t\t<span class="wrap">\n\t\t\t\t\t\t\t\t{{- i18n["report.scheduling.job.edit.email.label.bcc"] }}:\n\t\t\t\t\t\t\t</span>\n\t\t\t\t\t\t\t<input type="text" name="bcc_suc" />\n\t\t\t\t\t\t\t<div data-field="bcc_suc" class="warning message"></div>\n\t\t\t\t\t\t</label>\n\t\t\t\t\t\t<label class="control input text">\n\t\t\t\t\t\t\t<span class="wrap">\n\t\t\t\t\t\t\t\t{{- i18n["report.scheduling.job.edit.email.label.subject"] }}:\n\t\t\t\t\t\t\t</span>\n\t\t\t\t\t\t\t<input type="text" name="subject_suc" />\n\t\t\t\t\t\t\t<div data-field="subject_suc" class="warning message"></div>\n\t\t\t\t\t\t</label>\n\t\t\t\t\t\t<label class="control textArea">\n\t\t\t\t\t\t\t<span class="wrap">\n\t\t\t\t\t\t\t\t{{- i18n["report.scheduling.job.edit.email.label.message"] }}:\n\t\t\t\t\t\t\t</span>\n\t\t\t\t\t\t\t<textarea type="text" name="message_suc"></textarea>\n\t\t\t\t\t\t</label>\n\t\t\t\t\t\t<ul class="list inputSet">\n\t\t\t\t\t\t\t<li class="leaf">\n\t\t\t\t\t\t\t\t<div class="control radio">\n\t\t\t\t\t\t\t\t\t<label for="jrsSchedule_resultTypeRadio1" class="wrap">\n\t\t\t\t\t\t\t\t\t\t{{- i18n["report.scheduling.job.edit.includereportasrepositorylinksinemailbody"] }}\n\t\t\t\t\t\t\t\t\t</label>\n\t\t\t\t\t\t\t\t\t<input value="asRepoLinks" type="radio" name="resultSendTypeRadio" id="jrsSchedule_resultTypeRadio1" />\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t</li>\n\t\t\t\t\t\t\t<li class="leaf">\n\t\t\t\t\t\t\t\t<div class="control radio">\n\t\t\t\t\t\t\t\t\t<label for="jrsSchedule_resultTypeRadio2" class="wrap">\n\t\t\t\t\t\t\t\t\t\t{{- i18n["report.scheduling.job.edit.includereportfilesasattachments"] }}\n\t\t\t\t\t\t\t\t\t</label>\n\t\t\t\t\t\t\t\t\t<input value="asAttachedFiles" type="radio" name="resultSendTypeRadio" id="jrsSchedule_resultTypeRadio2">\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t</li>\n\t\t\t\t\t\t\t<li class="leaf">\n\t\t\t\t\t\t\t\t<div class="control radio">\n\t\t\t\t\t\t\t\t\t<label for="jrsSchedule_resultTypeRadio3" class="wrap">\n\t\t\t\t\t\t\t\t\t\t{{- i18n["report.scheduling.job.edit.includereportfiesaszip"] }}\n\t\t\t\t\t\t\t\t\t</label>\n\t\t\t\t\t\t\t\t\t<input value="asAttachedZip" type="radio" name="resultSendTypeRadio" id="jrsSchedule_resultTypeRadio3">\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t</li>\n\t\t\t\t\t\t\t<li class="leaf">\n\t\t\t\t\t\t\t\t<div class="control radio">\n\t\t\t\t\t\t\t\t\t<label for="jrsSchedule_includeHtmlReport" class="wrap">\n\t\t\t\t\t\t\t\t\t\t{{- i18n["report.scheduling.job.edit.includehtmlreportinemailbody"] }}\n\t\t\t\t\t\t\t\t\t</label>\n\t\t\t\t\t\t\t\t\t<input type="checkbox" name="includeHtmlReport" id="jrsSchedule_includeHtmlReport">\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t</li>\n\t\t\t\t\t\t\t<li class="leaf">\n\t\t\t\t\t\t\t\t<div class="control checkBox">\n\t\t\t\t\t\t\t\t\t<label for="jrsSchedule_dont_send_empty_report" class="wrap">\n\t\t\t\t\t\t\t\t\t\t{{- i18n["report.scheduling.job.edit.donotsendemailsforemptyreports"] }}\n\t\t\t\t\t\t\t\t\t</label>\n\t\t\t\t\t\t\t\t\t<input type="checkbox" name="dontSendEmptyReport" id="jrsSchedule_dont_send_empty_report">\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t</li>\n\t\t\t\t\t\t</ul>\n\t\t\t\t\t</fieldset>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t</div>\n\n\t\t<div class="column primary">\n\t\t\t<div class="content">\n\t\t\t\t<div id="jobNotification" class="section">\n\t\t\t\t\t<fieldset class="group first">\n\t\t\t\t\t\t<legend><span>\n\t\t\t\t\t\t\t{{- i18n["report.scheduling.job.edit.sendjobstatusnotifications"] }}\n\t\t\t\t\t\t</span></legend>\n\t\t\t\t\t\t<label class="control input text">\n\t\t\t\t\t\t\t<span class="wrap">\n\t\t\t\t\t\t\t\t{{- i18n["report.scheduling.job.edit.email.label.to"] }}:\n\t\t\t\t\t\t\t</span>\n\t\t\t\t\t\t\t<input type="text" name="job_status_to">\n\t\t\t\t\t\t\t<span class="message hint">\n\t\t\t\t\t\t\t\t{{- i18n["report.scheduling.job.edit.usecommastoseparateaddresses"] }}\n\t\t\t\t\t\t\t</span>\n\t\t\t\t\t\t\t<div data-field="job_status_to" class="warning message"></div>\n\t\t\t\t\t\t</label>\n\t\t\t\t\t\t<label class="control input text">\n\t\t\t\t\t\t\t<span class="wrap">\n\t\t\t\t\t\t\t\t{{- i18n["report.scheduling.job.edit.email.label.subject"] }}:\n\t\t\t\t\t\t\t</span>\n\t\t\t\t\t\t\t<input type="text" name="job_status_subject">\n\t\t\t\t\t\t\t<div data-field="job_status_subject" class="warning message"></div>\n\t\t\t\t\t\t</label>\n\t\t\t\t\t\t<ul class="list inputSet">\n\t\t\t\t\t\t\t<li class="leaf last">\n\t\t\t\t\t\t\t\t<div class="control checkBox">\n\t\t\t\t\t\t\t\t\t<label for="jrsSchedule_send_success_notification" class="wrap">\n\t\t\t\t\t\t\t\t\t\t{{- i18n["report.scheduling.job.edit.sendsuccessnotification"] }}\n\t\t\t\t\t\t\t\t\t</label>\n\t\t\t\t\t\t\t\t\t<input type="checkBox" name="send_success_notification" id="jrsSchedule_send_success_notification">\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t<label class="control textArea twoLine subItem">\n\t\t\t\t\t\t\t\t\t<span class="wrap">\n\t\t\t\t\t\t\t\t\t\t{{- i18n["report.scheduling.job.edit.email.label.successmessage"] }}:\n\t\t\t\t\t\t\t\t\t</span>\n\t\t\t\t\t\t\t\t\t<textarea type="text" name="job_status_success_message"></textarea>\n\t\t\t\t\t\t\t\t\t<div data-field="job_status_success_message" class="warning message"></div>\n\t\t\t\t\t\t\t\t</label>\n\t\t\t\t\t\t\t</li>\n\t\t\t\t\t\t</ul>\n\t\t\t\t\t\t<ul id="failureIncludes" class="list inputSet">\n\t\t\t\t\t\t\t<li class="leaf">\n\t\t\t\t\t\t\t\t<div class="control checkBox">\n\t\t\t\t\t\t\t\t\t<label for="jrsSchedule_send_failure_notification" class="wrap">\n\t\t\t\t\t\t\t\t\t\t{{- i18n["report.scheduling.job.edit.sendfailurenotification"] }}\n\t\t\t\t\t\t\t\t\t</label>\n\t\t\t\t\t\t\t\t\t<input type="checkBox" name="send_failure_notification" id="jrsSchedule_send_failure_notification">\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t<label class="control textArea twoLine subItem">\n\t\t\t\t\t\t\t\t\t<span class="wrap">\n\t\t\t\t\t\t\t\t\t\t{{- i18n["report.scheduling.job.edit.email.label.failuremessage"] }}:\n\t\t\t\t\t\t\t\t\t</span>\n\t\t\t\t\t\t\t\t\t<textarea type="text" name="job_status_failed_message"></textarea>\n\t\t\t\t\t\t\t\t\t<div data-field="job_status_failed_message" class="warning message"></div>\n\t\t\t\t\t\t\t\t</label>\n\t\t\t\t\t\t\t</li>\n\t\t\t\t\t\t\t<ul class="list inputSet">\n\t\t\t\t\t\t\t\t<li class="leaf">\n\t\t\t\t\t\t\t\t\t<div class="control checkBox">\n\t\t\t\t\t\t\t\t\t\t<label for="jrsSchedule_include_report" class="wrap">\n\t\t\t\t\t\t\t\t\t\t\t{{- i18n["report.scheduling.job.edit.includereport"] }}\n\t\t\t\t\t\t\t\t\t\t</label>\n\t\t\t\t\t\t\t\t\t\t<input type="checkBox" name="include_report" id="jrsSchedule_include_report">\n\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t</li>\n\t\t\t\t\t\t\t\t<li class="leaf">\n\t\t\t\t\t\t\t\t\t<div class="control checkBox">\n\t\t\t\t\t\t\t\t\t\t<label for="jrsSchedule_include_stack_trace" class="wrap">\n\t\t\t\t\t\t\t\t\t\t\t{{- i18n["report.scheduling.job.edit.includestacktrace"] }}\n\t\t\t\t\t\t\t\t\t\t</label>\n\t\t\t\t\t\t\t\t\t\t<input type="checkBox" name="include_stack_trace" id="jrsSchedule_include_stack_trace">\n\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t</li>\n\t\t\t\t\t\t\t</ul>\n\t\t\t\t\t\t</ul>\n\t\t\t\t\t</fieldset>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t</div>\n\t</fieldset>\n</div>',{i18n:o.Z})))},includeHtmlReport_DisabledEnabled:function(t){var e=!0,n=t.get("mailNotification");n&&"SEND"===n.resultSendType&&(e=!1);var i=t.get("outputFormats");i&&-1===i.outputFormat.indexOf("HTML")&&(e=!1),this.$el.find("[name=includeHtmlReport]").prop("disabled",!e&&"disabled")},message_suc_DisabledEnabled:function(t){var e=!0,n=t.get("mailNotification");n&&("SEND_EMBED"!==n.resultSendType&&"SEND_EMBED_ZIP_ALL_OTHERS"!==n.resultSendType||(e=!1)),this.$el.find("[name=message_suc]").prop("disabled",!e&&"disabled")},asRepoLinks_DisabledEnabled:function(t){var e=!0,n=t.get("repositoryDestination");n&&(n.saveToRepository||(e=!1)),this.$el.find("[name=resultSendTypeRadio][value=asRepoLinks]").prop("disabled",!e&&"disabled")},to_suc_Change:function(t){this.model.update("mailNotification",{toAddresses:{address:s()(t.target).val()}})},cc_suc_Change:function(t){this.model.update("mailNotification",{ccAddresses:{address:s()(t.target).val()}})},bcc_suc_Change:function(t){this.model.update("mailNotification",{bccAddresses:{address:s()(t.target).val()}})},subject_suc_Change:function(t){this.model.update("mailNotification",{subject:s()(t.target).val()})},message_suc_Change:function(t){this.model.update("mailNotification",{messageText:s()(t.target).val()})},setResultSendType:function(t){var e=this.$el.find("[name=resultSendTypeRadio]").filter(":checked").val(),n="";this.$el.find("[name=includeHtmlReport]").is(":checked")?"asRepoLinks"===e?n="SEND":"asAttachedFiles"===e?n="SEND_EMBED":"asAttachedZip"===e&&(n="SEND_EMBED_ZIP_ALL_OTHERS"):"asRepoLinks"===e?n="SEND":"asAttachedFiles"===e?n="SEND_ATTACHMENT":"asAttachedZip"===e&&(n="SEND_ATTACHMENT_ZIP_ALL"),this.model.update("mailNotification",{resultSendType:n})},dont_send_empty_report_Change:function(t){this.model.update("mailNotification",{skipEmptyReports:s()(t.target).is(":checked")})},job_status_to_Change:function(t){this.model.update("alert",{toAddresses:{address:s()(t.target).val()}})},job_status_subject_Change:function(t){this.model.update("alert",{subject:s()(t.target).val()})},twoCheckboxes_Change:function(t){var e=this.$el.find("[name=send_success_notification]").is(":checked"),n=this.$el.find("[name=send_failure_notification]").is(":checked"),i=[];e&&i.push("SUCCESS_ONLY"),n&&i.push("FAIL_ONLY"),0===i.length&&(i=["NONE"]),2===i.length&&(i=["ALL"]),i=i.join("|"),this.model.update("alert",{jobState:i})},job_status_success_message_Change:function(t){this.model.update("alert",{messageText:s()(t.target).val()})},job_status_failed_message_Change:function(t){this.model.update("alert",{messageTextWhenJobFails:s()(t.target).val()})},include_report_Change:function(t){this.model.update("alert",{includingReportJobInfo:s()(t.target).is(":checked")})},include_stack_trace_Change:function(t){this.model.update("alert",{includingStackTrace:s()(t.target).is(":checked")})}}),ut=d().View.extend({editMode:!1,runNowMode:!1,events:{"mouseup [name=tabs] li":"tabChangeClickEvent","touchend [name=tabs] li":"tabChangeClickEvent","click [name=openSaveDialog]":"openSaveDialogClick","click [name=cancelJobCreation]":"cancelJobCreationClick"},initialize:function(t){this.options=r().extend({},t),this.tabs={},this.listenTo(this.model,"valid",this.validModelListener),this.listenTo(this.model,"invalid",this.invalidModelListener),this.listenTo(this.model,"clearAllErrors",this.clearAllValidationErrors),this.listenTo(this.model,"change:source",this.sourceKeyInModelChanged),this.listenTo(this.model,"failedToGet_IC",this.InputControlsNotLoaded),this._initializeTabs(t),this.listenTo(this.tabs.parametersTab,"IC_Displayed",this.InputControlsLoaded),this.listenTo(this.tabs.parametersTab,"failedToGet_IC",this.InputControlsNotLoaded)},_initializeTabs:function(t){var e={model:this.model,reportUri:t.reportUri,parentReportURI:t.parentReportURI};this.tabs.scheduleTab=new nt(e),this.tabs.parametersTab=new at(e),this.tabs.outputTab=new dt(e),this.tabs.notificationsTab=new ct(e)},remove:function(){this.tabs.scheduleTab.remove(),this.tabs.parametersTab.remove(),this.tabs.outputTab.remove(),this.tabs.notificationsTab.remove(),d().View.prototype.remove.apply(this,arguments)},tabChangeClickEvent:function(t){var e=this,n=s()(t.currentTarget),i=n.attr("data-tab");n.hasClass("disabled")||this.currentActiveTabName!==i&&this.model.validateAll(this.editMode).always((function(){e.$el.find("[name="+e.currentActiveTabName+"]").find(".error").length||(e.changeActiveTab(i),e.clearAllValidationErrors())}))},openSaveDialogClick:function(){this.startSavingProcess()},cancelJobCreationClick:function(){this.trigger("cancelJobCreation")},renderCreateNewJobInterface:function(){this.editMode=!1,this._render(),this.options.runInBackgroundMode||this.runNowMode?this.changeActiveTab("outputTab"):this.changeActiveTab("scheduleTab"),this.prepareSaveOrSubmitButton()},prepareModelForCreatingNewJob:function(){this.model.clear({silent:!0}),this.model.unset("id"),this.dontReactOnModelChange=!0,this.model.createFromUri(this.options.reportUri),this.dontReactOnModelChange=!1,this.runNowMode&&this.model.set("label","Immediate Execution"),this.model.loadParameters(this.options.parentReportURI||!1)},editExistingJob:function(t){var e=this;this.editMode=!0,this.model.clear({silent:!0}),this._render(),this.changeActiveTab("scheduleTab"),this.model.set({id:t}),this.prepareSaveOrSubmitButton(),this.model._fetched?(this.model.set(this.model.parse(this.model._fetched)),this.setTitle(this.model.get("label")),this.model._fetched=void 0):this.model.fetch({success:function(){e.setTitle(e.model.get("label"))}})},prepareSaveOrSubmitButton:function(){var t=this.$el.find("[name=openSaveDialog]"),e=this.$el.find(".footer #cancel");t.attr("disabled","disabled").addClass("disabled"),e.attr("disabled",null).removeClass("disabled"),this.saveButtonReady=new(s().Deferred),this.saveButtonReady.done((function(){t.attr("disabled",null).removeClass("disabled")}))},InputControlsLoaded:function(){this.saveButtonReady.resolve()},InputControlsNotLoaded:function(){this.saveButtonReady.resolve(),this.toggleEnableTab("parametersTab",!1)},setRunNowMode:function(t){this.runNowMode=!!t},_render:function(){var t={i18n:o.Z,reportUri:this.options.reportUri,runNowMode:this.runNowMode,shedulerAccelator:this.options.schedulerAccelator},e=this.options.schedulerAccelator?'<div class="jr-mDrawer jr-uHeight-100pc jr">\n    <div class="jr-mDrawer-header jr">\n        <div class="jr-mDrawer-header-title jr">{{- i18n["report.scheduling.new.schedule"] }}</div>\n    </div>\n    <div class="jr-mDrawer-body jr">\n        <div class="pageHeader ">\n            <div class="pageHeader-subtitle">\n                <div class="pageHeader-subtitle-path">\n                    <span class="pageHeader-subtitle-path-label">{{- i18n["report.scheduling.job.edit.shedulefor"] }}:</span>\n                    <span class="pageHeader-subtitle-path-text">{{- reportUri }}</span>\n                </div>\n\n                <div class="pageHeader-subtitle-tabs pageHeader-subtitle-tabsRight">\n                    <div class="tabs">\n                        <ul name="tabs" disableCoreEvents="true" class="control tabSet buttons horizontal">\n                            <li data-tab="scheduleTab" class="tab">\n                                <a class="button">\n                                    <span class="wrap">{{- i18n["report.scheduling.schedule"] }}</span>\n                                </a>\n                            </li>\n                            <li data-tab="parametersTab" class="tab">\n                                <a class="button">\n                                    <span class="wrap">{{- i18n["report.scheduling.job.edit.parameters.button"] }}</span>\n                                </a>\n                            </li>\n                            <li data-tab="outputTab" class="tab">\n                                <a class="button">\n                                    <span class="wrap">{{- i18n["report.scheduling.job.edit.output"] }}</span>\n                                </a>\n                            </li>\n                            <li data-tab="notificationsTab" class="tab">\n                                <a class="button">\n                                    <span class="wrap">{{- i18n["report.scheduling.job.edit.notifications"] }}</span>\n                                </a>\n                            </li>\n                        </ul>\n                        <div class="control tabSet anchor"></div>\n                    </div>\n                </div>\n            </div>\n        </div>\n        <div class="wrapper">\n            <div class="schedulerEditor tabbed">\n                <js-templateNonce></js-templateNonce>\n                <div name="tabHolder">\n                    <div class="tab" name="scheduleTab"></div>\n                    <div class="tab" name="parametersTab"></div>\n                    <div class="tab" name="outputTab"></div>\n                    <div class="tab" name="notificationsTab"></div>\n                </div>\n            </div>\n        </div>\n    </div>\n\n    <div class="jr-mDrawer-footer jr">\n        {{ if (!runNowMode) { }}\n        <button name="openSaveDialog" class="jr-mButton jr-mButtonText jr-mButtonPrimary jr">\n            <span class="jr-mButton-label jr">{{- i18n["button.save"] }}</span>\n        </button>\n        {{ } else { }}\n        <button name="openSaveDialog" class="jr-mButton jr-mButtonText jr-mButtonPrimary jr">\n            <span class="jr-mButton-label jr">{{- i18n["button.submit"] }}</span>\n        </button>\n        {{ } }}\n        <button name="cancelJobCreation" class="jr-mButton jr-mButtonText jr-mButtonSecondary jr">\n            <span class="jr-mButton-label jr">{{- i18n["button.cancel"] }}</span>\n        </button>\n    </div>\n</div>\n\n':'<div class="pageHeader ">\n    <div class="pageHeader-title">\n        <div class="pageHeader-title-icon">\n            <span class="icon scheduledJobs"></span>\n        </div>\n        <div class="pageHeader-title-text">{{- i18n["report.scheduling.new.schedule"] }}</div>\n    </div>\n    <div class="pageHeader-subtitle">\n        <div class="pageHeader-subtitle-path">\n            <span class="pageHeader-subtitle-path-label">{{- i18n["report.scheduling.job.edit.shedulefor"] }}:</span>\n            <span class="pageHeader-subtitle-path-text">{{- reportUri }}</span>\n        </div>\n\n        <div class="pageHeader-subtitle-tabs pageHeader-subtitle-tabsRight">\n            <div class="tabs">\n                <ul name="tabs" disableCoreEvents="true" class="control tabSet buttons horizontal">\n                    <li data-tab="scheduleTab" class="tab">\n                        <a class="button">\n                            <span class="wrap">{{- i18n["report.scheduling.schedule"] }}</span>\n                        </a>\n                    </li>\n                    <li data-tab="parametersTab" class="tab">\n                        <a class="button">\n                            <span class="wrap">{{- i18n["report.scheduling.job.edit.parameters.button"] }}</span>\n                        </a>\n                    </li>\n                    <li data-tab="outputTab" class="tab">\n                        <a class="button">\n                            <span class="wrap">{{- i18n["report.scheduling.job.edit.output"] }}</span>\n                        </a>\n                    </li>\n                    <li data-tab="notificationsTab" class="tab">\n                        <a class="button">\n                            <span class="wrap">{{- i18n["report.scheduling.job.edit.notifications"] }}</span>\n                        </a>\n                    </li>\n                </ul>\n                <div class="control tabSet anchor"></div>\n            </div>\n        </div>\n    </div>\n</div>\n\n<div class="schedulerEditor page column decorated primary tabbed">\n\n    <js-templateNonce></js-templateNonce>\n    <div class="content hasFooter ">\n\n        <div class="body">\n\n            <div name="tabHolder">\n                <div class="tab" name="scheduleTab"></div>\n                <div class="tab" name="parametersTab"></div>\n                <div class="tab" name="outputTab"></div>\n                <div class="tab" name="notificationsTab"></div>\n            </div>\n        </div>\n\n        <div class="footer">\n            <fieldset>\n                {{ if (!runNowMode) { }}\n                <button name="openSaveDialog" class="button primary action up">\n                    <span class="wrap">{{- i18n["button.save"] }}</span><span class="icon"></span>\n                </button>\n                {{ } else { }}\n                <button name="openSaveDialog" class="button primary action up">\n                    <span class="wrap">{{- i18n["button.submit"] }}</span><span class="icon"></span>\n                </button>\n                {{ } }}\n                <button name="cancelJobCreation" class="button action up">\n                    <span class="wrap">{{- i18n["button.cancel"] }}</span><span class="icon"></span>\n                </button>\n            </fieldset>\n        </div>\n    </div>\n</div>';this.setElement(s()(r().template(e,r().extend({},t)))),this.runNowMode&&this.$el.find("li[data-tab=scheduleTab]").addClass("disabled"),this.tabs.outputTab.options.editMode=this.editMode,this.tabs.scheduleTab.render(),this.tabs.parametersTab.render(),this.tabs.outputTab.render(),this.tabs.notificationsTab.render(),this.$el.find("[name=scheduleTab]").append(this.tabs.scheduleTab.$el),this.$el.find("[name=parametersTab]").append(this.tabs.parametersTab.$el),this.$el.find("[name=outputTab]").append(this.tabs.outputTab.$el),this.$el.find("[name=notificationsTab]").append(this.tabs.notificationsTab.$el),this.currentActiveTabName=""},setTitle:function(t){this.$el.find(".pageHeader-title-text").text(t)},changeActiveTab:function(t){t&&("error"===t&&(t=this.$el.find("[name=tabHolder] > div").find(".error").first().parents(".tab").attr("name")),this.currentActiveTabName!==t&&(this.$el.find("[name=tabs] li").removeClass("selected").filter("[data-tab="+t+"]").addClass("selected"),this.$el.find("[name=tabHolder] > div").addClass("hidden").filter("[name="+t+"]").removeClass("hidden"),this.currentActiveTabName=t))},toggleEnableTab:function(t,e){var n=this.$el.find("[name=tabs] li").filter("[data-tab="+t+"]");n.attr("disabled",!e).toggleClass("disabled",!e),!e&&n.hasClass("selected")&&this.changeActiveTab(n.nextAll(":not(.disabled):first").data("tab"))},sourceKeyInModelChanged:function(t,e){var n;if(!0!==this.dontReactOnModelChange){e.parameters&&(n=1===r().keys(e.parameters.parameterValues).length,n&=!!e.parameters.parameterValues.REPORT_TIME_ZONE);var i=e.parameters&&!n;i||this.saveButtonReady.resolve(),this.toggleEnableTab("parametersTab",i),this.$el.find(".pageHeader-subtitle-path").find(".pageHeader-subtitle-path-text").text(e.reportUnitURI)}},_prepareSaveDialog:function(){var t=this;this.saveDialog&&this.saveDialog.remove(),this.saveDialog=new W(r().extend({},this.options,{model:this.model,isEditMode:this.editMode,onSaveDone:r().bind(this._onSaveDone,this),onSaveFail:r().bind(this._onSaveFail,this)})),this.listenTo(this.saveDialog,"saveValidationFailed",(function(){t.saveDialog.closeDialog()}))},startSavingProcess:function(){var t=this;this.model.validateAll(this.editMode).done((function(){t._prepareSaveDialog(),t.saveDialog.startSaveDialog()})).fail((function(){t.changeActiveTab("error")}))},_onSaveDone:function(){this.trigger("jobHasBeenCreated")},_onSaveFail:function(t,e,n){var i=this,s=!1,a=!1,l=!1;this.saveDialog.closeDialog();try{s=JSON.parse(e.responseText)}catch(t){}if(s.error&&(s=s.error),r().isArray(s)||(s=[s]),r().each(s,(function(t){var e="",n="";if("mandatory.parameter.error"===t.errorCode&&(e=o.Z["report.scheduling.saveDialog.parameterIsMissing"],t.parameters&&t.parameters[0]&&(n=t.parameters[0].substr(t.parameters[0].indexOf(".")+1))),"error.duplicate.report.job.output.filename"===t.errorCode&&(n="baseOutputFilename",e=o.Z["error.duplicate.report.job.output.filename"].replace("{0}",t.errorArguments[0]).replace("{1}",t.errorArguments[1])),t.message&&-1!==t.message.indexOf("will never fire")&&(n="triggerWillNeverFire",e=o.Z["error.report.job.trigger.no.fire"]),"error.pattern"===t.errorCode&&("trigger.hours"===t.field&&(n="hours",e=o.Z["error.pattern.trigger.hours"]),"trigger.minutes"===t.field&&(n="minutes",e=o.Z["error.pattern.trigger.minutes"]),"trigger.monthDays"===t.field&&(n="datesInMonth",e=o.Z["error.pattern.trigger.monthDays"]),"contentRepositoryDestination.timestampPattern"===t.field&&(n="timestampPattern",e=o.Z["error.pattern.contentRepositoryDestination.timestampPattern"])),"resource.not.found"===t.errorCode){var s=new H.Z({modal:!0,additionalCssClasses:"schedulerJobRemovedAlertDialog"});return s.setMessage(o.Z["report.scheduling.editing.jobHasBeenRemoved"]),i.listenTo(s,"close",(function(){i.trigger("errorEditingJob")})),s.open(),void(a=!0)}""!==e&&(i.showValidationMessage("error",{field:n,message:e}),l=!0)})),!0!==a&&(l&&this.changeActiveTab("error"),!1===l)){var d=o.Z["report.scheduling.editing.failedToSave"]+".";s[0]&&s[0].errorCode?d+="<br/>The reason is: "+s[0].errorCode:s.message&&(d+="<br/>The reason is: "+s.message),d+="<br/><br/>The full response from the server is: "+e.responseText,q.Z.errorPopup.show(d)}},clearAllValidationErrors:function(){this.$el.find(".error").removeClass("error")},validModelListener:function(t){var e=this;r().each(t,(function(t){e.showValidationMessage("success",t)}))},invalidModelListener:function(t,e){var n=this;r().each(t,(function(t){n.showValidationMessage("error",t)})),e&&e.switchToErrors&&this.changeActiveTab("error")},showValidationMessage:function(t,e){if(e.field){"contentRepositoryDestination.folderURI"===e.field&&(e.field="contentRepositoryDestination.outputRepository"),e.field=e.field.replace("trigger.",""),e.field=e.field.replace("mailNotification.",""),e.field=e.field.replace("contentRepositoryDestination.","");var n=this.$el.find(".warning[data-field="+e.field+"]");n.parent().addClass("error"),n.removeClass("success").removeClass("error"),n.addClass(t);var i="";if(e.message)i=e.message;else if(e.errorCode){if(!(i=o.Z[e.errorCode]))return;if(e.errorArguments)for(var s=0,a=e.errorArguments.length;s<a;s++)i=i.replace("{"+s+"}",e.errorArguments[s])}""!==i&&n.text(i)}}});r().extend(it.hp,c.Z.inputControlsConstants);var pt=new(d().View.extend({className:"schedulerApp",jobsView:!1,_createJobModel:function(){return new I},_createJobsView:function(t){return new J(t)},_createJobEditorView:function(t){return new ut(t)},_getChildViewInitParams:function(){return{model:this._createJobModel(),runInBackgroundMode:this.runInBackgroundMode,masterViewMode:this.masterViewMode,reportUri:this.schedulerStartupParams.reportUnitURI,parentReportURI:this.schedulerStartupParams.parentReportURI||null,schedulerAccelator:this.schedulerAccelator}},initialize:function(t){this.options=r().extend({},t),this.runInBackgroundMode=0===document.location.hash.indexOf("#runInBackground@"),u.Z.saveCurrentLocation(),this.schedulerStartupParams=u.Z.getParamsFromUri(),this.masterViewMode=!this.schedulerStartupParams.reportUnitURI,this.schedulerAccelator=this.schedulerStartupParams.schedulerAccelerator,this.childViewInitParams=this._getChildViewInitParams(),s().ajaxSetup({headers:{"X-Suppress-Basic":!0}}),s()(document).on("ajaxError",(function(t,e,n,i){401!==e.status&&"Unauthorized"!==i||location.reload()})),this.runInBackgroundMode?this.runNowRequest():this.isJobEditFromServerMonitoring()?this.openEditJobInterface(this.schedulerStartupParams.jobId):this.openJobsListInterface(),this.schedulerAccelator&&(this._openNewJobInterface(),this.$el.addClass("schedulerAccelerator").css({display:"none",position:"absolute",bottom:0,width:"100%"}))},prepareJobsView:function(){this.jobsView||(this.jobsView=this._createJobsView(this.childViewInitParams),this.listenTo(this.jobsView,"createNewJobRequest",this.createNewJobRequest),this.listenTo(this.jobsView,"runNowRequest",this.runNowRequest),this.listenTo(this.jobsView,"backButtonPressed",this.backButtonPressed),this.listenTo(this.jobsView,"editJobPressed",this.openEditJobInterface))},prepareJobEditorView:function(){this.jobEditorView&&this.jobEditorView.remove(),this.jobEditorView=this._createJobEditorView(this.childViewInitParams),this.listenTo(this.jobEditorView,"errorEditingJob",this.errorEditingJob),this.listenTo(this.jobEditorView,"cancelJobCreation",this.cancelJobCreation),this.listenTo(this.jobEditorView,"jobHasBeenCreated",this.jobHasBeenCreated)},openJobsListInterface:function(){this.prepareJobsView(),this.$el.empty(),this.jobsView.render(),this.$el.append(this.jobsView.$el),this.jobsView.refresh(),document.title=o.Z["company.name"]+": "+o.Z["report.scheduling.list.title"]},createNewJobRequest:function(){this._openNewJobInterface(!1)},runNowRequest:function(){this._openNewJobInterface(!0)},editJob:function(t){this.openEditJobInterface(t)},_openNewJobInterface:function(t){this.prepareJobEditorView(),this.jobEditorView.setRunNowMode(t),this.$el.empty(),this.jobEditorView.renderCreateNewJobInterface(),this.$el.append(this.jobEditorView.$el),this.jobEditorView.prepareModelForCreatingNewJob(),document.title=o.Z["company.name"]+": "+o.Z["report.scheduling.job.edit.title"]},openEditJobInterface:function(t){this.prepareJobEditorView(),this.$el.empty(),this.jobEditorView.editExistingJob(t),this.$el.append(this.jobEditorView.$el),document.title=o.Z["company.name"]+": "+o.Z["report.scheduling.job.edit.title"]},backButtonPressed:function(){u.Z.getBackToPreviousLocation()},errorEditingJob:function(){this.openJobsListInterface()},isJobEditFromServerMonitoring:function(){return this.schedulerStartupParams.jobId&&this.schedulerStartupParams.jobEditFromMonitoring},cancelJobCreation:function(){this.schedulerAccelator?(u.Z._closeScheduleOverlay(),u.Z._detachEvents()):this.runInBackgroundMode||this.isJobEditFromServerMonitoring()?u.Z.getBackToPreviousLocation():this.openJobsListInterface()},jobHasBeenCreated:function(){this.runInBackgroundMode||this.isJobEditFromServerMonitoring()?u.Z.getBackToPreviousLocation():this.openJobsListInterface()}}));if(s()("#display").append(pt.$el),s()("body").addClass("jr"),"schedule"===pt.schedulerAccelator){pt.$el.hasClass("schedulerAccelerator")&&pt.$el.slideDown();var ht=window.parent.document.getElementsByClassName("schedulerOverlayIframe");s()(ht).contents()[0].getElementById("loading").remove()}}}]);
//# sourceMappingURL=chunk.8654.js.map