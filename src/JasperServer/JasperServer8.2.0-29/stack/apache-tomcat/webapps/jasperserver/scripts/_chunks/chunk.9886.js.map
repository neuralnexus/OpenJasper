{"version":3,"sources":["webpack://jrs-ui/./runtime_dependencies/jquery-ui/ui/scroll-parent.js","webpack://jrs-ui/./src/components/components.toolbarButtons.js","webpack://jrs-ui/./src/components/components.toolbarButtons.events.js","webpack://jrs-ui/./src/messages/list/messageList.js","webpack://jrs-ui/./src/messages/list/messageList.common.js","webpack://jrs-ui/./runtime_dependencies/dragdropextra/dragdropextra.js"],"names":["factory","define","$","fn","scrollParent","includeHidden","position","this","css","excludeStaticParent","overflowRegex","parents","filter","parent","test","eq","length","ownerDocument","document","UP","DOWN","OVER","DISABLED","PRESSED","CONTENT_PREFIX","MenuClass","TOOLBAR_MENU_CLASS","ACTION_MODEL_TAG","CAPSULE_PATTERN","showButtonMenu","event","object","jQuery","context","attr","model","actionModel","setActionModel","newActionModel","isToolBarButton","button","hasClass","enable","buttonManager","disable","setButtonState","toolbarButtonModule","actionMap","on","evt","prop","type","substring","toUpperCase","isFirefox","each","index","li","el","execFunction","className","indexOf","id","getAsFunction","executableFunction","stopPropagation","originalEvent","MESSAGE_FILTER_ID_TO_ACTION_MAP","messageListModule","_list","_messageListId","_flowExecutionKey","_systemConfirmMessages","toolbar","_buttons","_id","initialize","body","select","layoutModule","_initEventHandlers","refresh","hasSelectedMessages","bind","e","actionName","matchAny","target","identify","doAction","Object","toQueryString","getSelectedIds","linkID","action","options","flowExecutionKey","systemConfirmMessages","dynamicList","listTemplateDomId","itemTemplateDomId","multiSelect","baseSelectItem","selectItem","item","getValue","isHeader","apply","arguments","_initListEvents","_getMessageItems","messages","processItemTemplate","element","subject","find","html","date","timestamp","component","unshift","collect","message","templateDomId","isRead","messageItem","cssClassName","value","processTemplate","observe","refreshToolbar","bindAsEventListener","getSelectedItems","data","actionURL","setItems","ajaxTargettedUpdate","postData","callback","response","status","_element","addClassName","show","alert","errorHandler","_serverErrorHandler","mode","AjaxRequester","ajaxAgent","getResponseHeader","location","baseErrorHandler","jrsConfig","Draggable","prototype","startDrag","isDragging","dragging","delta","currentDelta","zindex","originalZ","parseInt","Element","getStyle","style","zIndex","ghosting","_clone","cloneNode","_originallyAbsolute","Position","absolutize","parentNode","insertBefore","tagName","appendChild","superghosting","prepare","pointer","Event","pointerX","pointerY","getElementsByTagName","me","Prototype","Browser","IE","clearAttributes","mergeAttributes","hide","removeChild","width","height","getWidth","getHeight","originalScrollTop","draw","scroll","window","where","_getWindowScroll","originalScrollLeft","left","top","scrollLeft","scrollTop","Draggables","notify","starteffect","point","pos","cumulativeOffset","r","realOffset","deltaX","deltaY","d","_isScrollChild","p","map","i","mouseOffset","offset","snap","isFunction","isArray","v","round","constraint","visibility","initDrag","isUndefined","_dragging","touches","isLeftClick","tag_name","activate","countdown","DEFAULT_TOLERANCE","stop","fire","targetEvent","Droppables","isAffected","drop","jo","w","h","p0","p1","positioned_within","_containers","isContained","accept","classNames","detect","include","finishDrag","success","isIE","onmousemove","quiet","relativize","remove","dropped","onDropped","revert","reverteffect","endeffect","deactivate","reset","Sortable","defaultOnHover","onHover","dropon","overlap","hasClassName","defaultOnEmptyHover","onEmptyHover","SortableObserver","Class","create","observer","lastValue","serialize","onStart","onEnd","eventName","draggable","unmark","getSortableObserverConstructor","drops","affected","push","findDeepestChild","last_active","within","set","display"],"mappings":"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","file":"_chunks/chunk.9886.js","sourcesContent":["/*!\n * jQuery UI Scroll Parent 1.13.2\n * http://jqueryui.com\n *\n * Copyright jQuery Foundation and other contributors\n * Released under the MIT license.\n * http://jquery.org/license\n */\n\n//>>label: scrollParent\n//>>group: Core\n//>>description: Get the closest ancestor element that is scrollable.\n//>>docs: http://api.jqueryui.com/scrollParent/\n\n( function( factory ) {\n\t\"use strict\";\n\n\tif ( typeof define === \"function\" && define.amd ) {\n\n\t\t// AMD. Register as an anonymous module.\n\t\tdefine( [ \"jquery\", \"./version\" ], factory );\n\t} else {\n\n\t\t// Browser globals\n\t\tfactory( jQuery );\n\t}\n} )( function( $ ) {\n\"use strict\";\n\nreturn $.fn.scrollParent = function( includeHidden ) {\n\tvar position = this.css( \"position\" ),\n\t\texcludeStaticParent = position === \"absolute\",\n\t\toverflowRegex = includeHidden ? /(auto|scroll|hidden)/ : /(auto|scroll)/,\n\t\tscrollParent = this.parents().filter( function() {\n\t\t\tvar parent = $( this );\n\t\t\tif ( excludeStaticParent && parent.css( \"position\" ) === \"static\" ) {\n\t\t\t\treturn false;\n\t\t\t}\n\t\t\treturn overflowRegex.test( parent.css( \"overflow\" ) + parent.css( \"overflow-y\" ) +\n\t\t\t\tparent.css( \"overflow-x\" ) );\n\t\t} ).eq( 0 );\n\n\treturn position === \"fixed\" || !scrollParent.length ?\n\t\t$( this[ 0 ].ownerDocument || document ) :\n\t\tscrollParent;\n};\n\n} );\n","/*\n * Copyright (C) 2005 - 2022 TIBCO Software Inc. All rights reserved.\n * http://www.jaspersoft.com.\n *\n * Unless you have purchased a commercial license agreement from Jaspersoft,\n * the following license terms apply:\n *\n * This program is free software: you can redistribute it and/or modify\n * it under the terms of the GNU Affero General Public License as\n * published by the Free Software Foundation, either version 3 of the\n * License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the\n * GNU Affero General Public License for more details.\n *\n * You should have received a copy of the GNU Affero General Public License\n * along with this program. If not, see <http://www.gnu.org/licenses/>.\n */\n\n\n/**\n * @version: $Id$\n */\n\nimport jQuery from 'jquery';\nimport actionModel from '../actionModel/actionModel.modelGenerator';\nimport buttonManager from '../core/core.events.bis';\n\n////////////////////////////////////////////////\n// Generic toolbar button utils\n////////////////////////////////////////////////\n\nvar toolbarButtonModule = {\n\n    UP : \"up\",\n    DOWN : \"down\",\n    OVER : \"over\",\n    DISABLED : \"disabled\",\n    PRESSED : \"pressed\",\n    CONTENT_PREFIX : \"toolbar_\", //action model\n    MenuClass : \"menu vertical dropDown\",\n    TOOLBAR_MENU_CLASS : \"menu vertical dropDown fitable\",\n    ACTION_MODEL_TAG : \"adhocActionModel\",\n    CAPSULE_PATTERN : \"capsule\",\n\n    /**\n     * Used by all toolbar components to show menu\n     * @param event\n     * @param object object we want the menu for\n     */\n    showButtonMenu : function(event, object){\n        object = jQuery(object);\n        var context = this.CONTENT_PREFIX + object.attr(\"id\"),\n            model = this.ACTION_MODEL_TAG == 'adhocActionModel' ? this.actionModel : this.ACTION_MODEL_TAG;\n\n        actionModel.showDropDownMenu(event, object, context, this.TOOLBAR_MENU_CLASS, model);\n    },\n\n    setActionModel: function(newActionModel){\n        this.actionModel = newActionModel;\n    },\n\n    /**\n     * Test to see if the button clicked is a toolbar type\n     * @param button\n     */\n    isToolBarButton : function(button){\n        if (button){\n            return (jQuery(button).hasClass(\"capsule\"));\n        } else{\n            return false;\n        }\n\n    },\n\n    /**\n     * Used to enable toolbar button\n     * @param button\n     * @param enable\n     */\n    enable : function(button, enable){\n        buttonManager.enable(button);\n    },\n\n    /**\n     * Used to disable toolbar button\n     * @param button\n     */\n    disable : function(button){\n        buttonManager.disable(button);\n    },\n\n    /**\n     * Used to enable or disable button based on adhoc state variables\n     * @param button\n     * @param enable\n     */\n    setButtonState : function(button, enable){\n        if(enable){\n            this.enable(button);\n        }else{\n            this.disable(button);\n        }\n    }\n};\n\nexport default toolbarButtonModule;\n\n\n\n","/*\n * Copyright (C) 2005 - 2022 TIBCO Software Inc. All rights reserved.\n * http://www.jaspersoft.com.\n *\n * Unless you have purchased a commercial license agreement from Jaspersoft,\n * the following license terms apply:\n *\n * This program is free software: you can redistribute it and/or modify\n * it under the terms of the GNU Affero General Public License as\n * published by the Free Software Foundation, either version 3 of the\n * License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the\n * GNU Affero General Public License for more details.\n *\n * You should have received a copy of the GNU Affero General Public License\n * along with this program. If not, see <http://www.gnu.org/licenses/>.\n */\n\n\n/**\n * @version: $Id$\n */\nimport jQuery from 'jquery';\nimport {isFirefox, getAsFunction} from \"../util/utils.common\";\nimport buttonManager from '../core/core.events.bis';\nimport toolbarButtonModule from './components.toolbarButtons';\n\ntoolbarButtonModule.initialize = function(actionMap){\n    toolbarButtonModule.actionMap = actionMap;\n    jQuery('.toolbar').on('mouseup mouseover mouseout','button',function(evt){\n        if(!jQuery(this).prop('disabled'))toolbarButtonModule['mouse' + evt.type.substring(5,6).toUpperCase() + evt.type.substring(6) + 'Handler'](evt,this);\n    });\n\n    if (isFirefox()) { // workaround for Bug 26223\n        jQuery(\".toolbar li\").each(function(index,li){\n            jQuery(li).css(\"padding\", \"0 2px\");\n        });\n    }\n};\n\ntoolbarButtonModule.mouseUpHandler = function(evt,el){\n    /*\n    if (element.hasClass(toolbarButtonModule.CAPSULE_PATTERN)) {\n        var elementId = element.attr(\"id\");\n        var execFunction = toolbarButtonModule.actionMap[elementId];\n        if (execFunction) {\n            var executableFunction = getAsFunction(execFunction);\n            executableFunction(evt);\n            evt.stopPropagation();\n        }\n    }\n    */\n    var execFunction = el.className.indexOf('capsule') >= 0 ? toolbarButtonModule.actionMap[el.id] : null;\n    if (execFunction) {\n        var executableFunction = getAsFunction(execFunction);\n        executableFunction(evt);\n        evt.stopPropagation();\n    }\n};\n\ntoolbarButtonModule.mouseOverHandler = function(evt,el){\n    /*\n    if (element.hasClass(toolbarButtonModule.CAPSULE_PATTERN)) {\n        if (element.hasClass(\"mutton\") && !buttonManager.isDisabled(element)) {\n            toolbarButtonModule.showButtonMenu(evt, element);\n        }\n    }\n    */\n    if(el.className.indexOf('capsule') >= 0 && el.className.indexOf('mutton') >= 0 && !buttonManager.isDisabled(el)){\n        toolbarButtonModule.showButtonMenu(evt.originalEvent,el);\n    }\n};\n\ntoolbarButtonModule.mouseOutHandler = function(evt,el){};\n\nexport default toolbarButtonModule;\n\n\n\n\n","/*\n * Copyright (C) 2005 - 2022 TIBCO Software Inc. All rights reserved.\n * http://www.jaspersoft.com.\n *\n * Unless you have purchased a commercial license agreement from Jaspersoft,\n * the following license terms apply:\n *\n * This program is free software: you can redistribute it and/or modify\n * it under the terms of the GNU Affero General Public License as\n * published by the Free Software Foundation, either version 3 of the\n * License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the\n * GNU Affero General Public License for more details.\n *\n * You should have received a copy of the GNU Affero General Public License\n * along with this program. If not, see <http://www.gnu.org/licenses/>.\n */\n/**\n * @version: $Id$\n */\n/* global alert*/\n\nimport jQuery from 'jquery';\nimport toolbarButtonModule from '../../components/components.toolbarButtons.events';\nimport layoutModule from '../../core/core.layout';\nimport {matchAny} from \"../../util/utils.common\";\nimport {dynamicList} from '../../components/list.base';\nimport {ajaxTargettedUpdate, AjaxRequester} from \"../../core/core.ajax\";\nimport {baseErrorHandler} from \"../../core/core.ajax.utils\";\n\nconst MESSAGE_FILTER_ID_TO_ACTION_MAP = {\n    'sortMode_item2': 'ALL',\n    'sortMode_item3': 'UNREAD'\n};\n\nvar messageListModule = {\n    _list: null,\n    _messageListId: 'messageList',\n    _flowExecutionKey: null,\n    _systemConfirmMessages: [],\n    toolbar: {\n        _buttons: null,\n        _id: 'toolbar',\n        initialize: function () {\n            toolbarButtonModule.initialize({});\n            this._buttons = document.body.select(layoutModule.TOOLBAR_CAPSULE_PATTERN);\n            this._initEventHandlers();\n        },\n        refresh: function () {\n            this._buttons.each(function (button) {\n                toolbarButtonModule.setButtonState(button, messageListModule.hasSelectedMessages());\n            }.bind(this));\n        },\n        _initEventHandlers: function () {\n            jQuery('#' + this._id).on('click', function (e) {\n                var button = matchAny(e.target, [layoutModule.BUTTON_PATTERN], true);\n                var actionName = button.identify();\n                messageListModule.doAction(actionName, Object.toQueryString({ 'selectedIds': messageListModule.getSelectedIds() }));\n            }.bind(this));\n        }\n    },\n    filter: {\n        _id: 'sortMode',\n        initialize: function () {\n            this._initEventHandlers();\n        },\n        _initEventHandlers: function () {\n            jQuery('#' + this._id).on('click', function (e) {\n                let link = matchAny(e.target, [layoutModule.TABSET_TAB_PATTERN], true);\n                const linkID = link.identify();\n                const action = MESSAGE_FILTER_ID_TO_ACTION_MAP[linkID];\n                if (action) {\n                    messageListModule.doAction('changeEventsType', Object.toQueryString({ 'messageFilter': action }));\n                }\n                e.stopPropagation();\n            }.bind(this));\n        }\n    },\n    initialize: function (options) {\n        this._flowExecutionKey = options.flowExecutionKey;\n        this._systemConfirmMessages = options.systemConfirmMessages;\n        this._list = new dynamicList.List(this._messageListId, {\n            listTemplateDomId: 'list_fourColumn_type_message',\n            itemTemplateDomId: 'list_fourColumn_type_message:unread',\n            multiSelect: true\n        });\n        var baseSelectItem = this._list.selectItem;\n        this._list.selectItem = function (item) {\n            if (!item.getValue().isHeader) {\n                baseSelectItem.apply(this, arguments);\n            }\n        };\n        this._initListEvents();\n        this.toolbar.initialize();\n        this.filter.initialize();\n        this.doAction('getMessages', '');\n    },\n    _getMessageItems: function (messages) {\n        var processItemTemplate = function (element) {\n            var subject = jQuery(element).find('.subject a')[0];\n            jQuery(subject).html(this.getValue().subject);\n            jQuery(subject).attr('href', 'flow.html?_flowExecutionKey=' + messageListModule._flowExecutionKey + '&_eventId=viewMessage&id=' + this.getValue().id);\n            var date = jQuery(element).find('.date')[0];\n            jQuery(date).html(this.getValue().date);\n            jQuery(date).attr('title', this.getValue().timestamp);\n            var type = jQuery(element).find('.type')[0];\n            jQuery(type).html(this.getValue().type);\n            var component = jQuery(element).find('.component')[0];\n            jQuery(component).html(this.getValue().component);\n            return element;\n        };    // Adding faked message element to the beginning for header.\n        // Adding faked message element to the beginning for header.\n        messages.unshift({ isHeader: true });\n        return messages.collect(function (message) {\n            var templateDomId;\n            if (!message.isHeader) {\n                if (message.isRead) {\n                    templateDomId = 'list_fourColumn_type_message:read';\n                } else {\n                    templateDomId = 'list_fourColumn_type_message:unread';\n                }\n                var messageItem = new dynamicList.ListItem({\n                    cssClassName: layoutModule.LEAF_CLASS,\n                    value: message,\n                    templateDomId: templateDomId\n                });\n                messageItem.processTemplate = processItemTemplate;\n                return messageItem;\n            }\n        }.bind(this));\n    },\n    _initListEvents: function () {\n        this._list.observe('item:selected', function (event) {\n            this.refreshToolbar();\n        }.bindAsEventListener(this));\n        this._list.observe('item:unselected', function (event) {\n            this.refreshToolbar();\n        }.bindAsEventListener(this));\n    },\n    refreshToolbar: function () {\n        messageListModule.toolbar.refresh();\n    },\n    hasSelectedMessages: function () {\n        return this._list.getSelectedItems().length > 0;\n    },\n    getSelectedIds: function () {\n        return this._list.getSelectedItems().collect(function (item) {\n            return item.getValue().id;\n        });\n    },\n    doAction: function (actionName, data) {\n        var actionURL = 'flow.html?_flowExecutionKey=' + messageListModule._flowExecutionKey + '&_eventId=' + actionName;\n        this._list.setItems([]);\n        this.refreshToolbar();\n        ajaxTargettedUpdate(actionURL, {\n            postData: data,\n            callback: function (response) {\n                if (response.status == 'OK') {\n                    this._list.setItems(this._getMessageItems(response.data));\n                    this._list._element.addClassName('collapsible')\n                    this._list.show();\n                } else {\n                    alert(response.data.message);\n                }\n            }.bind(this),\n            errorHandler: this._serverErrorHandler,\n            mode: AjaxRequester.prototype.EVAL_JSON\n        });\n    },\n    _serverErrorHandler: function (ajaxAgent) {\n        if (ajaxAgent.getResponseHeader('LoginRequested')) {\n            document.location = 'flow.html?_flowId=logEventFlow';\n        }\n        var resolved = baseErrorHandler(ajaxAgent);\n        if (!resolved && ajaxAgent.status == 500) {\n            document.location = 'flow.html?_flowId=logEventFlow&_eventId=error';\n            document.location = 'flow.html?_flowId=logEventFlow&_eventId=error';\n        }\n    }\n};\n\nexport default messageListModule;","/*\n * Copyright (C) 2005 - 2019 TIBCO Software Inc. All rights reserved.\n * http://www.jaspersoft.com.\n *\n * Unless you have purchased a commercial license agreement from Jaspersoft,\n * the following license terms apply:\n *\n * This program is free software: you can redistribute it and/or modify\n * it under the terms of the GNU Affero General Public License as\n * published by the Free Software Foundation, either version 3 of the\n * License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the\n * GNU Affero General Public License for more details.\n *\n * You should have received a copy of the GNU Affero General Public License\n * along with this program. If not, see <http://www.gnu.org/licenses/>.\n */\n\nimport messageListModule from './messageList';\nimport jrsConfig from 'js-sdk/src/jrs.configs';\n\nmessageListModule.initialize(jrsConfig.messagesListInitOptions);\n","//  DragDropExtra Scriptaculous Enhancement, version 0.5\n//  (c) 2007-2008 Christopher Williams, Iterative Designs\n//\n// v0.5 release\n//      - Fixed bug where 2nd drag on an element in IE would result in funny placement of the\n//        element. [shammond42]\n// v0.4 release\n//\t\t- Fixed issue with dragging and dropping in IE7 due to an exception being thrown and not properly reseting in FinishDrag.\n// v0.3 release\n//    - Fixed bug found by Phillip Sauerbeck psauerbeck@gmail. Tests added based on Phillip's efforts.\n// v0.2 release\n//      - Minor bug fix for the releasing of objects after they have been dropped, prevents memory leak.\n// v0.1 release\n//      - initial release for the super ghosting capability\n//      - Drags from one scrolling list to the other (overflow:auto)\n//      - Retains the original object so that it can remain present despite being dragged\n//\n// dragdropextra.js is freely distributable under the terms of an MIT-style license.\n// For details, see the Iterative Designs web site: http://www.iterativedesigns.com/\n// Parts of this code have been taken from the original dragdrop.js library which is\n// copyrighted by (c) 2005-2007 Thomas Fuchs (http://script.aculo.us,\n// http://mir.aculo.us) and (c) 2005-2007 Sammi Williams\n// (http://www.oriontransfer.co.nz, sammi@oriontransfer.co.nz) and available under\n// a MIT-style license.\n\n//////////////////////////////////////////////////////////////////////////////////////////////\n//Jaspersoft Updates (look for comment: JASPERSOFT #x)\n//////////////////////////////////////////////////////////////////////////////////////////////\n// #1 3/27/10 if options.mouseOffset is true then dragging thing positioned with mousepointer\n// \t\t   see Draggable.prototype.draw\n// #2 9/27/10 restore zIndex of coloned element after dragging\n// #1 11/30/100 updated #1 to allow for parent element offsets\n// #3 11/26/20 JS-60321: Added ability to override SortableObserver\n//////////////////////////////////////////////////////////////////////////////////////////////\n\nDraggable.prototype.startDrag = function(event) {\n\tDraggable.isDragging = true;\n    this.dragging = true;\n    if (!this.delta)\n        this.delta = this.currentDelta();\n\n    if (this.options.zindex) {\n        this.originalZ = parseInt(Element.getStyle(this.element, 'z-index') || 0);\n        this.element.style.zIndex = this.options.zindex;\n    }\n    if (this.options.ghosting) {\n        this._clone = this.element.cloneNode(true);\n        this._originallyAbsolute = (this.element.getStyle('position') == 'absolute');\n        if (!this._originallyAbsolute) {\n            Position.absolutize(this.element);\n        }\n        this.element.parentNode.insertBefore(this._clone, this.element);\n        if (this.element.parentNode.tagName === \"TR\") {\n            document.body.appendChild(this.element);\n        }\n    }\n\n    if (this.options.superghosting) {\n        Position.prepare();\n        var pointer = [Event.pointerX(event), Event.pointerY(event)];\n        var body = document.getElementsByTagName(\"body\")[0];\n        var me = this.element;\n        this._clone = me.cloneNode(true);\n        if (Prototype.Browser.IE) {\n            // Clear event handing from the clone\n            // Solves the second drag issue in IE\n            this._clone.clearAttributes();\n            this._clone.mergeAttributes(me.cloneNode(false));\n        }\n        me.parentNode.insertBefore(this._clone, me);\n        me.id = \"clone_\" + me.id;\n        me.hide();\n\n        Position.absolutize(me);\n        me.parentNode.removeChild(me);\n        body.appendChild(me);\n        //Retain height and width of object only if it has been nulled out.  -v0.3 Fix\n        if (me.style.width == \"0px\" || me.style.height == \"0px\") {\n            me.style.width = Element.getWidth(this._clone) + \"px\";\n            me.style.height = Element.getHeight(this._clone) + \"px\";\n        }\n\n        //overloading in order to reduce repeated code weight.\n        this.originalScrollTop = (Element.getHeight(this._clone) / 2);\n\n        this.draw(pointer);\n\n        me.show();\n    }\n\n    if (this.options.scroll) {\n        if (this.options.scroll == window) {\n            var where = this._getWindowScroll(this.options.scroll);\n            this.originalScrollLeft = where.left;\n            this.originalScrollTop = where.top;\n        } else {\n            this.originalScrollLeft = this.options.scroll.scrollLeft;\n            this.originalScrollTop = this.options.scroll.scrollTop;\n        }\n    }\n\n    Draggables.notify('onStart', this, event);\n\n    if (this.options.starteffect) this.options.starteffect(this.element);\n};\n\n\nDraggable.prototype.draw = function(point) {\n    var pos = Position.cumulativeOffset(this.element);\n\n    if (this.options.ghosting) {\n        var r = Position.realOffset(this.element);\n        pos[0] += r[0] - Position.deltaX;\n        pos[1] += r[1] - Position.deltaY;\n    }\n\n    var d = this.currentDelta();\n    pos[0] -= d[0];\n    pos[1] -= d[1];\n\n    if(this.options.scroll) {\n        pos[0] -= this.options.scroll.scrollLeft;\n        pos[1] -= this.options.scroll.scrollTop;\n    }\n\n    if (this.options.scroll && (this.options.scroll != window && this._isScrollChild)) {\n        pos[0] -= this.options.scroll.scrollLeft - this.originalScrollLeft;\n        pos[1] -= this.options.scroll.scrollTop - this.originalScrollTop;\n    }\n\n    var p = [0,1].map(function(i) {\n        /*\n         * JASPERSOFT #1 - see comment block top of page for more info\n         */\n        return (point[i] - pos[i] - (this.options.mouseOffset ? (-2) : this.offset[i]));\n    }.bind(this));\n\n    if (this.options.snap) {\n        if (Object.isFunction(this.options.snap)) {\n            p = this.options.snap(p[0], p[1], this);\n        } else {\n            if (Object.isArray(this.options.snap)) {\n                p = p.map(function(v, i) {\n                    return (v / this.options.snap[i]).round() * this.options.snap[i]\n                }.bind(this))\n            } else {\n                p = p.map(function(v) {\n                    return (v / this.options.snap).round() * this.options.snap\n                }.bind(this))\n            }\n        }\n    }\n\n    if (this.options.superghosting) {\n        if (this.element.getStyle('position') == 'absolute') {\n            p[1] = point[1] - this.originalScrollTop;\n        } else {\n            p[1] -= this.originalScrollTop || 10;\n        }\n    }\n\n    var style = this.element.style;\n    //JASPERSOFT #1 - see comment block top of page for more info\n    if ((!this.options.constraint) || (this.options.constraint == 'horizontal'))\n        style.left = p[0] + \"px\";\n    if ((!this.options.constraint) || (this.options.constraint == 'vertical'))\n        style.top = p[1] + \"px\";\n    //END JASPERSOFT #2\n\n    if (style.visibility == \"hidden\") style.visibility = \"\"; // fix gecko rendering\n};\n\nDraggable.prototype.initDrag = function(event) {\n    if (!Object.isUndefined(Draggable._dragging[this.element]) &&\n            Draggable._dragging[this.element]) return;\n\n    if ((event.touches && event.touches.length == 1) || Event.isLeftClick(event)) {\n        // abort on form elements, fixes a Firefox issue\n        var src = Event.element(event);\n        var tag_name = src.tagName.toUpperCase();\n        if (tag_name == 'INPUT' ||\n            tag_name == 'SELECT' ||\n            tag_name == 'OPTION' ||\n            tag_name == 'BUTTON' ||\n            tag_name == 'TEXTAREA') return;\n\n        if(jQuery(this.element).parents('#sortDialog').length > 0 && tag_name == 'B') {\n            return;\n        }\n\n        var pointer = [Event.pointerX(event), Event.pointerY(event)];\n        var pos = Position.cumulativeOffset(this.element);\n        this.offset = [0,1].map(function(i) {\n            return (pointer[i] - pos[i])\n        });\n\n        Draggables.activate(this);\n        this.countdown = Draggables.DEFAULT_TOLERANCE;\n        Event.stop(event);\n        this.element.fire('drag:mousedown', {targetEvent: event});\n    }\n};\n\nDroppables.isAffected = function(point, element, drop) {\n    //Position.prepare();\n    //var positioned_within = Position.withinIncludingScrolloffsets(drop.element, point[0], point[1]);\n    var jo = jQuery(drop.element);\n    var w = jo.width();\n    var h = jo.height();\n    var p0 = jo.offset();\n    var p1 = {\n    \tleft: p0.left + w,\n    \ttop: p0.top + h\n    };\n    var positioned_within = point[0] > p0.left && point[0] < p1.left && point[1] > p0.top && point[1] < p1.top;\n\n    return ((drop.element != element) &&\n           ((element.parentNode === $(document.body)) || (!drop._containers) || this.isContained(element, drop)) &&\n           ((!drop.accept) || (Element.classNames(element).detect(function(v) { return drop.accept.include(v) } ))) &&\n           positioned_within );\n};\n\nDraggable.prototype.finishDrag = function(event, success) {\n\tDraggable.isDragging = false;\n    this.dragging = false;\n\n    if (isIE()) document.body.onmousemove = function(){};  // fix for bug 25666\n\n    if (this.options.quiet) {\n        Position.prepare();\n        var pointer = [Event.pointerX(event), Event.pointerY(event)];\n        Droppables.show(pointer, this.element);\n    }\n\n    if (this.options.ghosting) {\n        if (!this._originallyAbsolute) {\n            Position.relativize(this.element);\n            if (this._clone.parentNode.tagName === \"TR\") {\n                this._clone.parentNode.insertBefore(this.element, this._clone);\n            }\n        }\n        delete this._originallyAbsolute;\n        Element.remove(this._clone);\n        this._clone = null;\n    }\n\n    var dropped = false;\n\n    if (success) {\n        dropped = Droppables.fire(event, this.element);\n        if (!dropped) dropped = false;\n    }\n    if (dropped && this.options.onDropped) this.options.onDropped(this.element);\n    Draggables.notify('onEnd', this, event);\n\n    var revert = this.options.revert;\n    if (revert && Object.isFunction(revert)) revert = revert(this.element);\n\n    var d = this.currentDelta();\n    if (revert && this.options.reverteffect) {\n        if (dropped == 0 || revert != 'failure')\n            this.options.reverteffect(this.element,\n                    d[1] - this.delta[1], d[0] - this.delta[0]);\n    } else {\n        this.delta = d;\n    }\n\n    if (this.options.zindex) {\n        this.element.style.zIndex = this.originalZ;\n        /*\n         * JASPERSOFT #2 - see comment block top of page for more info\n         */\n        this._clone && (this._clone.style.zIndex = this.originalZ);\n    }\n\n    this.options.endeffect && this.options.endeffect(this.element);\n\n    if (this.options.superghosting) {\n        // If detached drag element from DOM, we should attach it again!\n        if (this.element.parentNode == null) {\n            Element.hide(this.element);\n            $(document.body).appendChild(this.element);\n        }\n        Element.remove(this.element);\n        new Draggable(this._clone, this.options);\n    }\n\n    Draggables.deactivate(this);\n    Droppables.reset();\n};\n\nSortable.defaultOnHover = Sortable.onHover;\nSortable.onHover = function(element, dropon, overlap) {\n    if (!element.hasClassName(\"dialog\")) {\n        Sortable.defaultOnHover(element, dropon, overlap);\n    }\n};\n\nSortable.defaultOnEmptyHover = Sortable.onEmptyHover;\nSortable.onEmptyHover = function(element, dropon, overlap) {\n    if (!element.hasClassName(\"dialog\")) {\n        Sortable.defaultOnEmptyHover(element, dropon, overlap);\n    }\n};\n\nvar SortableObserver = Class.create({\n    initialize: function(element, observer) {\n        this.element = $(element);\n        this.observer = observer;\n        this.lastValue = Sortable.serialize(this.element);\n    },\n    onStart: function() {\n        this.lastValue = Sortable.serialize(this.element);\n    },\n    onEnd: function(eventName, draggable) {\n        Sortable.unmark();\n        if(this.lastValue != Sortable.serialize(this.element)) {\n            this.observer(this.element, draggable);\n        }\n    }\n});\n\n//JASPERSOFT #3 - see comment block top of page for more info\nSortable.getSortableObserverConstructor = function () {\n    return SortableObserver;\n}\n//END JASPERSOFT #3\n\nDroppables.show = function(point, element) {\n    if (!this.drops.length) return;\n    var drop, affected = [];\n\n    this.drops.each(function(drop) {\n        if(Droppables.isAffected(point, element, drop)) {\n            if(element.hasClassName('sortDialogAvailable') || element.hasClassName('sortDialogSortFields')) {\n                if(drop.element.id == 'sortDialogAvailable' || drop.element.id == 'sortDialogSortFields') {\n                    affected.push(drop);\n                }\n            } else {\n                affected.push(drop);\n            }\n        }\n    });\n\n    if (affected.length > 0)\n        drop = Droppables.findDeepestChild(affected);\n\n    if (this.last_active && this.last_active != drop) {\n    \tthis.deactivate(this.last_active);\n    }\n    if (drop) {\n        Position.within(drop.element, point[0], point[1]);\n        if (drop.onHover) {\n            // Hack to dynamically change level/measure appearing when dragging from tree to some drop container\n            if (element.classNames().include(\"wrap\")) {\n                element.relativize();\n                element.classNames().include(\"measure\") ?\n                        element.classNames().set(\"draggable dragging measure\" + (element.classNames().include(\"supportsFilter\") ? \" supportsFilter\"  : \"\")) :\n                        element.classNames().set(\"draggable dragging dimension\" + (element.classNames().include(\"supportsFilter\") ? \" supportsFilter\"  : \"\"));\n                element.style.position = 'relative';\n                element.style.display = 'inline-block';\n                element.style.width = '';\n                element.style.height = '';\n            }\n\n            drop.onHover(element, drop.element, Position.overlap(drop.overlap, drop.element));\n        }\n\n        if (drop != this.last_active) {\n        \tDroppables.activate(drop);\n        }\n    }\n};\n\n"],"sourceRoot":""}