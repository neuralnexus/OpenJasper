(self.webpackChunkjrs_ui=self.webpackChunkjrs_ui||[]).push([[7080],{9231:(e,t,o)=>{"use strict";o.d(t,{Z:()=>l});var i=o(33806),n=o(43852),r=o(72157),s=o.n(r),a=function(e){this._id=e.id,this._dom=s()("#"+this._id)[0],this._enabled=!0,this._process(),this._assignHandlers()};a.addMethod("_process",(function(){this._input=s()(this._dom).find("input")[0],this._clearButton=s()(this._dom).find(".button.searchClear")[0],this._searchButton=s()(this._dom).find(".button.search")[0]})),a.addMethod("_assignHandlers",(function(){s()(this._dom).on("submit",(function(e){Event.stop(e)})),s()(this._input).on("keypress",this._keyPressHandler.bindAsEventListener(this)),s()(this._clearButton).on("click",this._clearHandler.bindAsEventListener(this)),s()(this._searchButton).on("click",this._searchHandler.bindAsEventListener(this))})),a.addMethod("_keyPressHandler",(function(e){this._enabled&&Event.KEY_RETURN==e.keyCode&&(this._doSearch(),Event.stop(e))})),a.addMethod("_updateClearButtonVisibility",(function(){this.getText().blank()?s()(this._clearButton).removeClass(i.Z.UP_CLASS):s()(this._clearButton).addClass(i.Z.UP_CLASS)})),a.addMethod("_clearHandler",(function(){this._enabled&&(this.setText(""),this._doSearch())})),a.addMethod("_searchHandler",(function(){this._enabled&&this._doSearch()})),a.addMethod("getText",(function(){return this._input.getValue()})),a.addMethod("setText",(function(e){this._input.setValue(e),this._updateClearButtonVisibility()})),a.addMethod("enable",(function(){n.Z.enable(this._clearButton),n.Z.enable(this._searchButton),s()(this._input).attr(i.Z.READONLY_ATTR_NAME,null),s()(this._dom).attr(i.Z.DISABLED_ATTR_NAME,null),this._enabled=!0})),a.addMethod("disable",(function(){n.Z.disable(this._clearButton),n.Z.disable(this._searchButton),s()(this._input).attr(i.Z.READONLY_ATTR_NAME,i.Z.READONLY_ATTR_NAME),s()(this._dom).attr(i.Z.DISABLED_ATTR_NAME,i.Z.DISABLED_ATTR_NAME),this._enabled=!1})),a.addMethod("_doSearch",(function(e){this._updateClearButtonVisibility(),this.onSearch(this.getText())})),a.addMethod("onSearch",(function(e){}));const l=a},9442:(e,t,o)=>{"use strict";o.d(t,{Z:()=>R});var i=o(94277),n=o(33806),r=o(59002),s=o(64155),a=o(52687),l=o(46460),_=o(10517),d=o(30135),c=(o(60107),o(72157)),u=o.n(c),h=o(97836),E=o.n(h),p=o(29338),m=o(24619),f=o(11129),g=function(){var e=!E().isUndefined(E().find(d.Z.parametersWithoutDefaultValues,(function(e){return!E().contains(E().keys(d.Z.getAllRequestParameters()),e)})));return d.Z.hasInputControls&&(d.Z.reportForceControls||e)&&E().isEmpty(d.Z.reportParameterValues)};const R=function(e,t,o,r){return t.extend(o,{_messages:{},layouts:{LAYOUT_POPUP_SCREEN:1,LAYOUT_SEPARATE_PAGE:2,LAYOUT_TOP_OF_PAGE:3,LAYOUT_IN_PAGE:4},controlDialog:null,reportOptionsDialog:null,inputControlsLocation:null,toggleControlsOn:!1,controller:null,hideControls:null,selectionChanged:!0,initialInputControlsFetched:!1,initialize:function(){this.controller=new i.hl.Controls.Controller({reportUri:r.reportUnitURI,reportOptionUri:r.reportOptionsURI}),this.viewModel=o.controller.getViewModel(),this.initializeOptions();var a=t.debounce((function(){o.applyInputValues(!0)}),o.Utils.LOADING_DIALOG_DELAY,!0),_=t.debounce((function(){o.applyInputValues()}),o.Utils.LOADING_DIALOG_DELAY,!0),d=t.debounce((function(){o.cancel()}),o.Utils.LOADING_DIALOG_DELAY,!0),c=t.debounce((function(){o.resetToInitial()}),o.Utils.LOADING_DIALOG_DELAY,!0);this.buttonActions={"button#ok":a,"button#apply":_,"button#cancel":d,"button#reset":c,"button#save":o.save,"button#remove":o.remove};var u={"button#ok":a,"button#cancel":d,"button#reset":c,"button#apply":_,"button#save":o.save,"button#remove":o.remove};if(e("#"+l.hp.INPUT_CONTROLS_DIALOG)[0]&&(this.controlDialog=new l.fO(u)),e("#"+l.hp.INPUT_CONTROLS_FORM)[0]&&e("#"+l.hp.INPUT_CONTROLS_FORM).on("click",function(e){var t=e.target;for(var o in this.buttonActions)if((0,s.BwZ)(t,[o],!0))return this.buttonActions[o](),void e.stopPropagation()}.bindAsEventListener(this)),this.inputControlsLocation=e("#"+l.hp.INPUT_CONTROLS_CONTAINER)[0]?e("#"+l.hp.INPUT_CONTROLS_CONTAINER)[0]:e("#"+l.hp.INPUT_CONTROLS_FORM)[0],e("#"+l.hp.TOOLBAR_CONTROLS_BUTTON)[0]&&(this.toggleControlsOn=e("#"+l.hp.TOOLBAR_CONTROLS_BUTTON).hasClass("down")),i.hl.Controls.listen({"viewmodel:selection:changed":function(){o.selectionChanged=!0},"reportoptions:selection:changed":function(e,t){o.selectionChanged=!0}}),r.hasInputControls){var h=this._fetchAndSetInputControlsStateOnce().then((function(){var t=o.controller.getViewModel().areAllControlsValid();if(!g()&&t)return o.refreshReport().catch((function(){return e.Deferred().resolve()}));o.show(),o.controlDialog&&o.controlDialog.show()})).catch((function(e){var t=o.refreshReport();o.Utils.showLoadingDialogOn(t,null,!0)})).always((function(){var t=o.controller.getViewModel().areAllControlsValid();!g()&&t||r&&r.nothingToDisplay&&(r.nothingToDisplay.removeClass(n.Z.HIDDEN_CLASS),(0,s.wyW)(r.nothingToDisplay,{horz:!0,vert:!0}),e("#"+r.DATA_REFRESH_BUTTON).attr(n.Z.DISABLED_ATTR_NAME,n.Z.DISABLED_ATTR_NAME))}));o.Utils.showLoadingDialogOn(h,null,!0)}else{var E=o.refreshReport();o.Utils.showLoadingDialogOn(E,null,!0)}},initializeOptions:function(){if((0,i.YT)()){var n;n=this.layouts.LAYOUT_POPUP_SCREEN==r.reportControlsLayout?"#"+l.hp.INPUT_CONTROLS_DIALOG+" .sub.header":(this.layouts.LAYOUT_TOP_OF_PAGE,r.reportControlsLayout,"#"+l.hp.INPUT_CONTROLS_FORM+" .sub.header");var s=new(i.hl.Controls.ReportOptions||_.Z);s.fetch(r.reportUnitURI,r.reportOptionsURI).done((function(){e(n).append(s.getElem()),o.lastReportOptionsSelection=s.get("selection")})).fail((function(){e(n).addClass("hidden")})).always((function(){o.lastReportOptionsSelection||(o.lastReportOptionsSelection=s.get("defaultOption"))})),s.updateWarningMessage=function(){o.reportOptionsDialog.showWarning(this.error)},i.hl.Controls.listen({"viewmodel:selection:changed":function(){var e=s.find({uri:r.reportUnitURI});s.set({selection:e},!0)},"viewmodel:order:changed":t.bind((function(e,o){r.newIcOrder=t.pluck(o,"id").join(";")}),this)});var d={"button#saveAsBtnSave":function(){var t=o.reportOptionsDialog.input.getValue(),i=o.viewModel.get("selection"),_=t===o.reportOptionsDialog.optionNameToOverwrite;s.add(r.reportUnitURI,t,i,_).done((function(){var t;o.reportOptionsDialog.hideWarning(),a.Z.systemConfirm.show(l.hp.getMessage("report.options.option.saved")),(t=o.layouts.LAYOUT_POPUP_SCREEN==r.reportControlsLayout?e("#"+l.hp.INPUT_CONTROLS_DIALOG):e("#"+l.hp.INPUT_CONTROLS_FORM))&&t.length>0&&t.addClass("showingSubHeader");var i=s.getElem().parent();i.length>0?i.removeClass("hidden"):(e(n).removeClass("hidden"),e(n).append(s.getElem())),o.layouts.LAYOUT_TOP_OF_PAGE==r.reportControlsLayout&&e("#"+l.hp.INPUT_CONTROLS_FORM+" .header").removeClass("hidden"),o.reportOptionsDialog.hide(),delete o.reportOptionsDialog.optionNameToOverwrite})).fail((function(e){if(e)try{"report.options.dialog.confirm.message"===JSON.parse(e.responseText).errorCode&&!_&&(o.reportOptionsDialog.optionNameToOverwrite=t)}catch(e){}}))},"button#saveAsBtnCancel":function(){o.reportOptionsDialog.hide(),delete o.reportOptionsDialog.optionNameToOverwrite}};e("#"+l.hp.SAVE_REPORT_OPTIONS_DIALOG)[0]&&(this.reportOptionsDialog=new l.uV(d)),this.remove=function(){var t=s.get("selection").label,i=new p.Z({text:l.hp.getMessage("report.options.option.confirm.remove",{option:t})});i.on("button:yes",(function(){s.removeOption(r.reportUnitURI,s.get("selection").id).done((function(){if(!s.get("values")){(i=o.layouts.LAYOUT_POPUP_SCREEN==r.reportControlsLayout?e("#"+l.hp.INPUT_CONTROLS_DIALOG):e("#"+l.hp.INPUT_CONTROLS_FORM))&&i.length>0&&i.removeClass("showingSubHeader");var t=s.getElem().parent();t.length>0?t.addClass("hidden"):(e(n).addClass("hidden"),e(n).html("")),o.layouts.LAYOUT_TOP_OF_PAGE==r.reportControlsLayout&&e("#"+l.hp.INPUT_CONTROLS_FORM+" .header").addClass("hidden")}var i;s.enableRemoveButton(!1),a.Z.systemConfirm.show(l.hp.getMessage("report.options.option.removed"))})),i.remove()})),i.on("button:no",(function(){i.remove()})),i.open()},o.reportOptions=s}},cancel:function(){if(r.reportControlsLayout===o.layouts.LAYOUT_SEPARATE_PAGE&&o.separatePageICLayoutFirstShow)r.goBack();else{var e=this._refreshControlsToSelection(o.lastSelection);e.then((function(){})).catch((function(e){(0,f.le)(e.responseJSON.message)})).always((function(){r.reportControlsLayout===o.layouts.LAYOUT_POPUP_SCREEN?o.controlDialog.hide():r.reportControlsLayout===o.layouts.LAYOUT_SEPARATE_PAGE&&o.showReport(),o.reportOptions&&o.lastReportOptionsSelection&&o.reportOptions.set({selection:o.lastReportOptionsSelection},!0)})),o.Utils.showLoadingDialogOn(e,null,!0)}},_refreshControlsToSelection:function(e){return o.controller.resetControlsToSelection(e)},getLastSelection:function(){return this.lastSelection},save:function(){o.selectionChanged?o.controller.validate().then(o.showOptionDialog):o.showOptionDialog()},refreshReport:function(t,n){if(t){var r=new e.Deferred,s=r.promise(),a=o.viewModel.get("selection");if(!i.hl.Controls.ViewModel.isSelectionChanged(o.lastSelection,a))return r.resolve(),s()}return this._refreshReportOnConfirm(n)},_refreshReportOnConfirm:function(i){var n,s=o.viewModel.get("selection");try{return s&&!t.isEmpty(s)?(n=r.refreshReport({freshData:i},null,s),o.lastSelection=s):(n=r.refreshReport(),o.lastSelection={}),n}catch(t){return e.Deferred().reject(t)}},_refreshReportOnApply:function(){var i=e.Deferred(),n=o.viewModel.get("selection");return n&&!t.isEmpty(n)?r.refreshReport(null,null,n):i.resolve()},applyInputValues:function(i,n){var s=!0;if(window.viewer&&window.viewer.isExportRunning()&&(s=confirm(r.getMessage("jasper.report.view.export.in.progress.confirm.continue")),window.viewer.confirmedExportCancel=s),!s)return o.resetToInitial(),void(i&&o.hide());var l=o.viewModel;o.selectionChanged?o.controller.validate().then((function(s){if(s){var l,_=o.lastSelection;o.reportOptions&&(l=o.lastReportOptionsSelection),window.viewer&&window.viewer.jive&&window.viewer.jive.hide(),i&&o.hide();var d=o.refreshReport(null,n);d&&d.then((function(){o.selectionChanged=!1}),(function(){var s=new m.Z({zIndex:a.Z.errorPopup.getZIndex()-1});e("body").append(s.$el),s.show(),o.lastSelection=_,o.lastReportOptionsSelection=l,a.Z.errorPopup.onClose=function(){r.hasError=!0,o.lastSelection&&!t.isEmpty(o.lastSelection)?r.refreshReport({freshData:n},null,o.lastSelection):r.refreshReport({freshData:n}),s.remove()},i&&(o.cancel(),o.hide(),o.selectionChanged=!1)})),o.reportOptions&&(o.lastReportOptionsSelection=o.reportOptions.get("selection"),d||a.Z.popup.hide(e("#loading")[0]))}})):l.areAllControlsValid()&&i&&o.hide()},resetToInitial:function(){var e=this._refreshControlsToSelection(o.initialSelection).then((function(){o.selectionChanged=!0;var e=o.reportOptions;if(e){var t=e.find({uri:r.reportOptionsURI?r.reportOptionsURI:r.reportUnitURI});if(t)return void e.set({selection:t},!0)}}),(function(e){(0,f.le)(e.responseJSON.message)}));o.Utils.showLoadingDialogOn(e,null,!0)},show:function(){switch(r.reportControlsLayout){case 2:o.showControls();break;case 3:o.toggleControls();break;case 4:break;default:o.showDialog()}},hide:function(){switch(r.reportControlsLayout){case 2:o.showReport();break;case 3:case 4:break;default:o.controlDialog.hide()}},toggleControls:function(){o.toggleControlsOn?(e("#"+l.hp.TOOLBAR_CONTROLS_BUTTON).removeClass("down").addClass("up"),e(".panel.pane.inputControls").addClass(n.Z.HIDDEN_CLASS)[0],(0,s.qE)("resize")):this._fetchAndSetInputControlsStateOnce().then((function(){e("#"+l.hp.TOOLBAR_CONTROLS_BUTTON).removeClass("up").addClass("down"),e(".panel.pane.inputControls").removeClass(n.Z.HIDDEN_CLASS)[0]})).catch((function(e){(0,f.le)(e.responseJSON.message)})),o.toggleControlsOn=!o.toggleControlsOn,(0,s.zcy)()&&r.touchController.reset(),e("#"+l.hp.INPUT_CONTROLS_FORM).show().height()},showDialog:function(){o.controlDialog&&this._fetchAndSetInputControlsStateOnce().then((function(){o.controlDialog.show()})).catch((function(e){(0,f.le)(e.responseJSON.message)}))},showReport:function(){e("#"+n.Z.PAGE_BODY_ID).removeClass(n.Z.CONTROL_PAGE_CLASS).addClass(n.Z.ONE_COLUMN_CLASS)},showControls:function(){this._fetchAndSetInputControlsStateOnce().then((function(){e("#"+n.Z.PAGE_BODY_ID).removeClass(n.Z.ONE_COLUMN_CLASS).addClass(n.Z.CONTROL_PAGE_CLASS),document.getElementById(l.hp.INPUT_CONTROLS_FORM)&&e("#"+l.hp.INPUT_CONTROLS_FORM).show()})).catch((function(e){(0,f.le)(e.responseJSON.message)}))},showOptionDialog:function(){i.hl.Controls.Utils.wait(200).then((function(){o.viewModel.areAllControlsValid()&&(o.reportOptionsDialog.show(),(0,s.h2$)(o.reportOptionsDialog.input))}))},_fetchAndSetInputControlsStateOnce:function(){var i=this,n=e.Deferred();if(this.initialInputControlsFetched)n.resolve();else{var s=e.Deferred();r.reportExecutionId&&r.reportExecutionId.length?this.controller.fetchReportRawParameterValues(r.reportExecutionId).then((function(e){r.reportParameterValues=e,s.resolve()}),(function(){s.reject.apply(s,arguments)})):s.resolve(),s.then((function(){var e=t.extend(r.getAllRequestParameters(),r.reportParameterValues);i.controller.fetchAndSetInputControlsState(e).then((function(){i.initialInputControlsFetched=!0;var e=o.controller.getViewModel().get("selection");return o.lastSelection=e,o.initialSelection=e,n.resolve()}),(function(){n.reject.apply(n,arguments)})),o.Utils.showLoadingDialogOn(n,null,!0)}),(function(){n.reject.apply(n,arguments)}))}return n}})}(u(),E(),r.Z,d.Z)},82681:(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.d(__webpack_exports__,{Z:()=>__WEBPACK_DEFAULT_EXPORT__});var dragdropextra__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(72861),prototype__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__(52499),_components_components_searchBox__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__(9231),_components_components_toolbarButtons_events__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__(40574),_util_utils_common__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__(64155),_core_core_layout__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__(33806),_components_list_base__WEBPACK_IMPORTED_MODULE_6__=__webpack_require__(56461),_util_tools_infiniteScroll__WEBPACK_IMPORTED_MODULE_7__=__webpack_require__(45186),_components_components_tooltip__WEBPACK_IMPORTED_MODULE_8__=__webpack_require__(84581),_core_core_events_bis__WEBPACK_IMPORTED_MODULE_9__=__webpack_require__(43852),_actionModel_actionModel_primaryNavigation__WEBPACK_IMPORTED_MODULE_10__=__webpack_require__(72335),_core_core_ajax__WEBPACK_IMPORTED_MODULE_11__=__webpack_require__(236),_core_core_ajax_utils__WEBPACK_IMPORTED_MODULE_12__=__webpack_require__(11129),_mng_org_module__WEBPACK_IMPORTED_MODULE_13__=__webpack_require__(70692),js_sdk_src_common_util_xssUtil__WEBPACK_IMPORTED_MODULE_14__=__webpack_require__(84612),jquery__WEBPACK_IMPORTED_MODULE_15__=__webpack_require__(72157),jquery__WEBPACK_IMPORTED_MODULE_15___default=__webpack_require__.n(jquery__WEBPACK_IMPORTED_MODULE_15__);function RegExpRepresenter(e){this.charMap={"\\s":" "},this.expressionTokens=this.__parse(e)}Object.assign(_mng_org_module__WEBPACK_IMPORTED_MODULE_13__.Z,{TREE_ID:"orgTree",COOKIE_NAME:"selectedTenant",messages:[],ActionMap:{SEARCH:"search",BROWSE:"browse",NEXT:"next",SELECT_AND_GET_DETAILS:"selectAndGetDetails",SEARCH_AVAILABLE:"searchAvailable",SEARCH_ASSIGNED:"searchAssigned",NEXT_AVAILABLE:"nextAvailable",NEXT_ASSIGNED:"nextAssigned",CREATE:"create",UPDATE:"update",DELETE:"delete",DELETE_ALL:"deleteAll",EXIST:"exist"},Event:{ORG_BROWSE:"org:browse",ENTITY_SEARCH:"entity:search",ENTITY_NEXT:"entity:next",ENTITY_SELECT_AND_GET_DETAILS:"entity:selectAndGetDetails",RESULT_CHANGED:"result:changed",RESULT_NEXT:"result:next",ENTITY_DETAILS_LOADED:"entity:detailsLoaded",SEARCH_AVAILABLE_LOADED:"searchAvailable:loaded",SEARCH_ASSIGNED_LOADED:"searchAssigned:loaded",NEXT_AVAILABLE_LOADED:"nextAvailable:loaded",NEXT_ASSIGNED_LOADED:"nextAssigned:loaded",SERVER_ERROR:"server:error",SERVER_UNAVAILABLE:"server:unavailable",ENTITY_CREATED:"entity:created",ENTITY_UPDATED:"entity:updated",ENTITY_DELETED:"entity:deleted",ENTITIES_DELETED:"entities:deleted"},observe:function(e,t){this._getContainer().observe(e,t)},stopObserving:function(e,t){this._getContainer().stopObserving(e,t)},fire:function(e,t){this._getContainer().fire(e,t)},getMessage:function(e,t){var o=_mng_org_module__WEBPACK_IMPORTED_MODULE_13__.Z.messages[e];return o?new prototype__WEBPACK_IMPORTED_MODULE_1__.Template(o).evaluate(t||{}):""},_comparator:function(e,t){return e>t?1:e<t?-1:0},_getContainer:function(){return this._container||(this._container=document.body),this._container},Configuration:{nameSeparator:"|",userDefaultRole:"ROLE_USER",userNameNotSupportedSymbols:"[|]",roleNameNotSupportedSymbols:"[|]",emailRegExpPattern:"^[\\p{L}\\p{M}\\p{N}._%'-\\@\\,\\;\\s]+$",superuserRole:"ROLE_SUPERUSER",adminRole:"ROLE_ADMINISTRATOR",anonymousRole:"ROLE_ANONYMOUS"}}),_mng_org_module__WEBPACK_IMPORTED_MODULE_13__.Z.systemRoles=[_mng_org_module__WEBPACK_IMPORTED_MODULE_13__.Z.Configuration.userDefaultRole,_mng_org_module__WEBPACK_IMPORTED_MODULE_13__.Z.Configuration.superuserRole,_mng_org_module__WEBPACK_IMPORTED_MODULE_13__.Z.Configuration.adminRole,_mng_org_module__WEBPACK_IMPORTED_MODULE_13__.Z.Configuration.anonymousRole],_mng_org_module__WEBPACK_IMPORTED_MODULE_13__.Z.Organization=function(e){if(!e)throw new Error("Can't create Organization from undefined json or node");e.param?(this.id=e.param.id,this.name=e.name,this.uri=e.param.uri,this.treeNode=e):(this.id=e.tenantId||e.id,this.name=e.tenantName,this.alias=e.tenantAlias||e.alias||"",this.desc=e.tenantDesc,this.uri=e.tenantUri,this.parentId=e.parentId,this.subTenantCount=e.subTenantCount)},_mng_org_module__WEBPACK_IMPORTED_MODULE_13__.Z.Organization.addMethod("isRoot",(function(e){return"organizations"==this.id})),_mng_org_module__WEBPACK_IMPORTED_MODULE_13__.Z.Organization.addMethod("getNameWithTenant",(function(){return this.id})),_mng_org_module__WEBPACK_IMPORTED_MODULE_13__.Z.Organization.addMethod("getDisplayName",(function(){return this.name})),_mng_org_module__WEBPACK_IMPORTED_MODULE_13__.Z.Organization.addMethod("equals",(function(e){return e&&this.id==e.id})),_mng_org_module__WEBPACK_IMPORTED_MODULE_13__.Z.Organization.addMethod("toJSON",(function(e){return{tenantId:this.id,tenantName:this.name,tenantAlias:this.alias,tenantDesc:this.desc,parentId:this.parentId,tenantUri:this.uri}})),_mng_org_module__WEBPACK_IMPORTED_MODULE_13__.Z.Organization.addMethod("navigateToManager",(function(){_actionModel_actionModel_primaryNavigation__WEBPACK_IMPORTED_MODULE_10__.Z.navigationPaths.tempNavigateToManager=(0,_util_utils_common__WEBPACK_IMPORTED_MODULE_4__.I8Q)(_actionModel_actionModel_primaryNavigation__WEBPACK_IMPORTED_MODULE_10__.Z.navigationPaths.organization),_actionModel_actionModel_primaryNavigation__WEBPACK_IMPORTED_MODULE_10__.Z.navigationPaths.tempNavigateToManager.params+="&"+Object.toQueryString({tenantId:this.id}),_actionModel_actionModel_primaryNavigation__WEBPACK_IMPORTED_MODULE_10__.Z.navigationOption("tempNavigateToManager")})),_mng_org_module__WEBPACK_IMPORTED_MODULE_13__.Z.Permission=function(e){this.isInherited=!!e.isInherited,e.permission&&(this.permission=e.permission),e.inheritedPermission&&(this.inheritedPermission=e.inheritedPermission),this.isDisabled=!!e.isDisabled},_mng_org_module__WEBPACK_IMPORTED_MODULE_13__.Z.Permission.addMethod("getResolvedPermission",(function(){return this.isInherited?this.inheritedPermission:this.permission})),_mng_org_module__WEBPACK_IMPORTED_MODULE_13__.Z.Permission.addMethod("toJSON",(function(){return{permission:this.permission,isInherited:this.isInherited,inheritedPermission:this.inheritedPermission,newPermission:this.newPermission}})),_mng_org_module__WEBPACK_IMPORTED_MODULE_13__.Z.Permission.addMethod("toData",(function(){return{permission:this.permission,isInherited:this.isInherited,inheritedPermission:this.inheritedPermission,newPermission:this.newPermission}})),_mng_org_module__WEBPACK_IMPORTED_MODULE_13__.Z.User=function(e){e&&(this.userName=e.userName,this.fullName=e.fullName,this.password=e.password||"",this.confirmPassword=e.confirmPassword||"",this.tenantId=e.tenantId,this.email=e.email,this.enabled=e.enabled,this.external=e.external,this.roles=[],e.roles&&e.roles.each(function(e){this.roles.push(new _mng_org_module__WEBPACK_IMPORTED_MODULE_13__.Z.Role(e))}.bind(this)),e.permissionToDisplay&&(this.permission=new _mng_org_module__WEBPACK_IMPORTED_MODULE_13__.Z.Permission(e.permissionToDisplay)))},_mng_org_module__WEBPACK_IMPORTED_MODULE_13__.Z.User.addVar("FLOW_ID","userListFlow"),_mng_org_module__WEBPACK_IMPORTED_MODULE_13__.Z.User.addMethod("getDisplayName",(function(){return this.userName})),_mng_org_module__WEBPACK_IMPORTED_MODULE_13__.Z.User.addMethod("getNameWithTenant",(function(){return this.tenantId&&!this.tenantId.blank()?this.userName+_mng_org_module__WEBPACK_IMPORTED_MODULE_13__.Z.Configuration.userNameSeparator+this.tenantId:this.userName})),_mng_org_module__WEBPACK_IMPORTED_MODULE_13__.Z.User.addMethod("getManagerURL",(function(){return"flow.html?"+Object.toQueryString({_flowId:this.FLOW_ID,text:void 0!==this.userName?encodeURIComponent(this.userName):this.userName,tenantId:void 0!==this.tenantId?encodeURIComponent(this.tenantId):this.tenantId})})),_mng_org_module__WEBPACK_IMPORTED_MODULE_13__.Z.User.addMethod("navigateToManager",(function(){_actionModel_actionModel_primaryNavigation__WEBPACK_IMPORTED_MODULE_10__.Z.navigationPaths.tempNavigateToManager=(0,_util_utils_common__WEBPACK_IMPORTED_MODULE_4__.I8Q)(_actionModel_actionModel_primaryNavigation__WEBPACK_IMPORTED_MODULE_10__.Z.navigationPaths.user),_actionModel_actionModel_primaryNavigation__WEBPACK_IMPORTED_MODULE_10__.Z.navigationPaths.tempNavigateToManager.params+="&"+Object.toQueryString({text:this.userName,tenantId:this.tenantId}),_actionModel_actionModel_primaryNavigation__WEBPACK_IMPORTED_MODULE_10__.Z.navigationOption("tempNavigateToManager")})),_mng_org_module__WEBPACK_IMPORTED_MODULE_13__.Z.User.addMethod("equals",(function(e){return e&&this.userName==e.userName&&this.tenantId==e.tenantId})),_mng_org_module__WEBPACK_IMPORTED_MODULE_13__.Z.User.addMethod("toPermissionData",(function(e){return{userName:this.userName,tenantId:this.tenantId,permissionToDisplay:this.permission.toData()}})),_mng_org_module__WEBPACK_IMPORTED_MODULE_13__.Z.Role=function(e){e&&(this.roleName=e.roleName,this.external=e.external,this.tenantId=e.tenantId),e.permissionToDisplay&&(this.permission=new _mng_org_module__WEBPACK_IMPORTED_MODULE_13__.Z.Permission(e.permissionToDisplay))},_mng_org_module__WEBPACK_IMPORTED_MODULE_13__.Z.Role.addVar("FLOW_ID","roleListFlow"),_mng_org_module__WEBPACK_IMPORTED_MODULE_13__.Z.Role.addMethod("getDisplayName",(function(){return this.roleName})),_mng_org_module__WEBPACK_IMPORTED_MODULE_13__.Z.Role.addMethod("getNameWithTenant",(function(){return this.tenantId&&!this.tenantId.blank()?this.roleName+_mng_org_module__WEBPACK_IMPORTED_MODULE_13__.Z.Configuration.userNameSeparator+this.tenantId:this.roleName})),_mng_org_module__WEBPACK_IMPORTED_MODULE_13__.Z.Role.addMethod("getManagerURL",(function(){return"flow.html?"+Object.toQueryString({_flowId:this.FLOW_ID,text:void 0!==this.roleName?encodeURIComponent(this.roleName):this.roleName,tenantId:void 0!==this.tenantId?encodeURIComponent(this.tenantId):this.tenantId})})),_mng_org_module__WEBPACK_IMPORTED_MODULE_13__.Z.Role.addMethod("navigateToManager",(function(){_actionModel_actionModel_primaryNavigation__WEBPACK_IMPORTED_MODULE_10__.Z.navigationPaths.tempNavigateToManager=(0,_util_utils_common__WEBPACK_IMPORTED_MODULE_4__.I8Q)(_actionModel_actionModel_primaryNavigation__WEBPACK_IMPORTED_MODULE_10__.Z.navigationPaths.role),_actionModel_actionModel_primaryNavigation__WEBPACK_IMPORTED_MODULE_10__.Z.navigationPaths.tempNavigateToManager.params+="&"+Object.toQueryString({text:this.roleName,tenantId:this.tenantId}),_actionModel_actionModel_primaryNavigation__WEBPACK_IMPORTED_MODULE_10__.Z.navigationOption("tempNavigateToManager")})),_mng_org_module__WEBPACK_IMPORTED_MODULE_13__.Z.Role.addMethod("equals",(function(e){return e&&this.roleName==e.roleName&&this.tenantId==e.tenantId})),_mng_org_module__WEBPACK_IMPORTED_MODULE_13__.Z.Role.addMethod("toPermissionData",(function(e){return{roleName:this.roleName,tenantId:this.tenantId,permissionToDisplay:this.permission.toData()}})),_mng_org_module__WEBPACK_IMPORTED_MODULE_13__.Z.initTenantsTreeEvents=function(){_mng_org_module__WEBPACK_IMPORTED_MODULE_13__.Z.manager.tenantsTree.on("selection:change",(function(e){if(!_mng_org_module__WEBPACK_IMPORTED_MODULE_13__.Z.manager.lastSelectedOrg||_mng_org_module__WEBPACK_IMPORTED_MODULE_13__.Z.manager.lastSelectedOrg.id!==e.id){var t=new _mng_org_module__WEBPACK_IMPORTED_MODULE_13__.Z.Organization(e),o=_mng_org_module__WEBPACK_IMPORTED_MODULE_13__.Z.properties;_mng_org_module__WEBPACK_IMPORTED_MODULE_13__.Z.manager.tenantsTree.setTenant(t),window.localStorage&&localStorage.setItem(_mng_org_module__WEBPACK_IMPORTED_MODULE_13__.Z.COOKIE_NAME,JSON.stringify(e)),_mng_org_module__WEBPACK_IMPORTED_MODULE_13__.Z.fire(_mng_org_module__WEBPACK_IMPORTED_MODULE_13__.Z.Event.ORG_BROWSE,{organization:t,entityEvent:!1}),_mng_org_module__WEBPACK_IMPORTED_MODULE_13__.Z.orgManager&&(o.changeDisable(!1,["#"+o._EDIT_BUTTON_ID]),_mng_org_module__WEBPACK_IMPORTED_MODULE_13__.Z.fire(_mng_org_module__WEBPACK_IMPORTED_MODULE_13__.Z.Event.ENTITY_SELECT_AND_GET_DETAILS,{entityId:t.id,entityEvent:!1})),(_mng_org_module__WEBPACK_IMPORTED_MODULE_13__.Z.userManager||_mng_org_module__WEBPACK_IMPORTED_MODULE_13__.Z.roleManager)&&(o.hide(),o.unlock())}})),_mng_org_module__WEBPACK_IMPORTED_MODULE_13__.Z.manager.tenantsTree.on("import:finished",(function(e){var t=_mng_org_module__WEBPACK_IMPORTED_MODULE_13__.Z.properties;_mng_org_module__WEBPACK_IMPORTED_MODULE_13__.Z.fire(_mng_org_module__WEBPACK_IMPORTED_MODULE_13__.Z.Event.ORG_BROWSE,{force:!0,entityEvent:!1}),_mng_org_module__WEBPACK_IMPORTED_MODULE_13__.Z.orgManager&&(t.changeDisable(!1,["#"+t._EDIT_BUTTON_ID]),_mng_org_module__WEBPACK_IMPORTED_MODULE_13__.Z.fire(_mng_org_module__WEBPACK_IMPORTED_MODULE_13__.Z.Event.ENTITY_SELECT_AND_GET_DETAILS,{refreshAttributes:!0,entityId:e,entityEvent:!1}))}))},_mng_org_module__WEBPACK_IMPORTED_MODULE_13__.Z.entityList={ID_PATTERN:".ID > a",_listId:"entitiesList",_containerId:"listContainer",_searchBoxId:"secondarySearchBox",initialize:function(e){this.list=new _components_list_base__WEBPACK_IMPORTED_MODULE_6__.W.List(this._listId,{listTemplateDomId:e.listTemplateId,itemTemplateDomId:e.itemTemplateId,multiSelect:!0,selectionDefaultsToCursor:!0,comparator:function(e,t){return _mng_org_module__WEBPACK_IMPORTED_MODULE_13__.Z._comparator(e.getLabel(),t.getLabel())}}),this._initEvents(),this._infiniteScroll=new _util_tools_infiniteScroll__WEBPACK_IMPORTED_MODULE_7__.Z({id:this._containerId,contentId:this._listId}),this._searchBox=new _components_components_searchBox__WEBPACK_IMPORTED_MODULE_2__.Z({id:this._searchBoxId}),e.text&&this._searchBox.setText(e.text),this._infiniteScroll.onLoad=function(){_mng_org_module__WEBPACK_IMPORTED_MODULE_13__.Z.fire(_mng_org_module__WEBPACK_IMPORTED_MODULE_13__.Z.Event.ENTITY_NEXT,{})},this._searchBox.onSearch=function(e){_mng_org_module__WEBPACK_IMPORTED_MODULE_13__.Z.fire(_mng_org_module__WEBPACK_IMPORTED_MODULE_13__.Z.Event.ENTITY_SEARCH,{text:e})},_mng_org_module__WEBPACK_IMPORTED_MODULE_13__.Z.toolbar.initialize(e.toolbarModel),this.toolbar=_mng_org_module__WEBPACK_IMPORTED_MODULE_13__.Z.toolbar,this.list.show()},_initEvents:function(){this.list.observe("item:selected",function(e){var t=e.memo.item,o=_mng_org_module__WEBPACK_IMPORTED_MODULE_13__.Z.properties;this.lastSelectedName=t.getValue().getNameWithTenant(),_mng_org_module__WEBPACK_IMPORTED_MODULE_13__.Z.fire(_mng_org_module__WEBPACK_IMPORTED_MODULE_13__.Z.Event.ENTITY_SELECT_AND_GET_DETAILS,{entityId:t.getValue().id,entityEvent:!0}),o.changeDisable(!1,["#"+o._EDIT_BUTTON_ID])}.bindAsEventListener(this)),this.list.observe("item:unselected",function(e){var t=_mng_org_module__WEBPACK_IMPORTED_MODULE_13__.Z.manager.tenantsTree,o=_mng_org_module__WEBPACK_IMPORTED_MODULE_13__.Z.properties;o.changeDisable(!1,["#"+o._EDIT_BUTTON_ID]),!o.locked&&t?_mng_org_module__WEBPACK_IMPORTED_MODULE_13__.Z.fire(_mng_org_module__WEBPACK_IMPORTED_MODULE_13__.Z.Event.ENTITY_SELECT_AND_GET_DETAILS,{entityId:t.getTenant().id,entityEvent:!0,isCtrlHeld:e.memo.isCtrlHeld}):(o.hide(),this.toolbar.refresh())}.bindAsEventListener(this)),this.list.observe("item:beforeSelectOrUnselect",function(e){var t=e.memo.item;e.stopSelectOrUnselect=!_mng_org_module__WEBPACK_IMPORTED_MODULE_13__.Z.invokeClientAction("cancelIfEdit",{entity:t.getValue(),showConfirm:e.memo.showConfirm})}.bindAsEventListener(this))},_createEntityItem:function(e){var t=new _components_list_base__WEBPACK_IMPORTED_MODULE_6__.W.ListItem({label:e.getDisplayName(),value:e}),o=this;return t.processTemplate=function(e){return e.select(o.ID_PATTERN)[0].update(js_sdk_src_common_util_xssUtil__WEBPACK_IMPORTED_MODULE_14__.Z.hardEscape(this.getValue().getDisplayName())),e},t},getSearchText:function(){return this._searchBox.getText()},setSearchText:function(e){return this._searchBox.setText(e)},getSelectedEntities:function(){return this.list?this.list.getSelectedItems().collect((function(e){return e.getValue()})):[]},setEntities:function(e){var t=e.collect(this._createEntityItem.bind(this));this._infiniteScroll.reset(),this.list.setItems(t),this.list.show(),this.toolbar.refresh()},findEntity:function(e){var t=this.list.getItems();return(_mng_org_module__WEBPACK_IMPORTED_MODULE_13__.Z.properties.options||_mng_org_module__WEBPACK_IMPORTED_MODULE_13__.Z.userManager.options)._.find(t,(function(t){return t.getValue().fullName===e}))},addEntities:function(e){var t=e.collect(this._createEntityItem.bind(this));this.list.addItems(t),this.list.refresh(),this.toolbar.refresh()},selectEntity:function(e){var t=this.list.getItems().detect((function(t){return t.getValue().getNameWithTenant()==e}));t&&(t.isSelected()&&t.deselect(),t.select(),this.lastSelectedName=t.getValue().getNameWithTenant())},restoreSelectedEntity:function(e){this.selectEntity(this.lastSelectedName?this.lastSelectedName:e)},deselectAll:function(){this.list.resetSelected()},update:function(e,t){this.list.getItems().findAll((function(t){return t.getValue().getNameWithTenant()==e})).each((function(e){e.setValue(t),e.refresh()}))},remove:function(e){var t,o=this.list.getItems();t=(0,_util_utils_common__WEBPACK_IMPORTED_MODULE_4__.kJL)(e)?o.findAll((function(t){return e.include(t.getValue().getNameWithTenant())})):o.findAll((function(t){return t.getValue().getNameWithTenant()==e})),this.list.resetSelected(),this.list.removeItems(t)}},_mng_org_module__WEBPACK_IMPORTED_MODULE_13__.Z.properties={_EDIT_MODE_CLASS:"editMode",_moveButtonsId:"moveButtons",_id:"properties",_value:null,isEditMode:!1,_NOTHING_TO_DISPLAY_ID:"nothingToDisplay",_ASSIGNED_VIEW_ID:"assignedView",_ASSIGNED_VIEW_LIST_ID:"assignedViewList",_ASSIGNED_ID:"assigned",_AVAILABLE_ID:"available",_ASSIGNED_LIST_ID:"assignedList",_AVAILABLE_LIST_ID:"availableList",_ATTRIBUTES_LIST_ID:"attributesTab",_EDIT_BUTTON_ID:"edit",_SAVE_BUTTON_ID:"save",_CANCEL_BUTTON_ID:"cancel",_DELETE_BUTTON_ID:"delete",_REMOVE_FROM_ASSIGNED_BUTTON_ID:"removeFromAssigned",_ADD_TO_ASSIGNED_BUTTON_ID:"addToAssigned",_BUTTONS_CONTAINER_ID:"propertiesButtons",_MOVE_BUTTONS_CONTAINER_ID:"moveButtons",_DND_CLASS:".draggable",_DROP_CLASS:"wrap",buttonsFunctions:{},initialize:function(e){var t=e.attributesTypesEnum;if(this.options=e,this.locked=!1,this.hide(),this.processTemplate(e),this._toggleButton(),e.attributes){var o=!_mng_org_module__WEBPACK_IMPORTED_MODULE_13__.Z.userManager&&_mng_org_module__WEBPACK_IMPORTED_MODULE_13__.Z.orgManager?t.TENANT:t.USER,i=e.attributesViewOptionsFactory,n=e.scrollEventTrait,r=e.AttributesViewFacade;this.options._.extend(this,n),this.attributesFacade=new r(i({context:e.attributes.context,container:jquery__WEBPACK_IMPORTED_MODULE_15___default()("#attributesTab"),type:o}))}this.options.showAssigned&&this.initDnD(),this.initEvents(),this.initButtonsFunctions(),this.options.ConfirmationDialog&&this._initConfirmationDialog()},_initConfirmationDialog:function(){var e=this,t=this.options.i18n;this.confirmationDialog=new this.options.ConfirmationDialog({title:t["attributes.confirm.dialog.title"],text:t["attributes.confirm.cancel.dialog.text"]}),this.confirmationDialog.on("button:yes",(function(){e.cancelOnEdit()}))},_toggleButton:function(){var e=this.isChanged();this.attributesFacade&&this.attributesFacade.containsUnsavedItems()||e?this.saveButton.removeAttribute("disabled"):this.saveButton.removeClassName("over").setAttribute("disabled","disabled")},show:function(e,t){if(!this.locked){if(this.attributesFacade){var o=this,i=e&&e.isRoot&&e.isRoot(),n=i?this.options._.extend({},e,{id:null}):e;this.attributesFacade.getCurrentView().setContext(n,t).done((function(){o.attributesFacade.render(i)}))}(0,prototype__WEBPACK_IMPORTED_MODULE_1__.$)(this._NOTHING_TO_DISPLAY_ID).addClassName(_core_core_layout__WEBPACK_IMPORTED_MODULE_5__.Z.HIDDEN_CLASS),document.body.removeClassName(_core_core_layout__WEBPACK_IMPORTED_MODULE_5__.Z.NOTHING_TO_DISPLAY_CLASS),this._value=e,this.changeMode(!1)}},hide:function(){if(!this.locked){var e=(0,prototype__WEBPACK_IMPORTED_MODULE_1__.$)(this._NOTHING_TO_DISPLAY_ID);e.removeClassName(_core_core_layout__WEBPACK_IMPORTED_MODULE_5__.Z.HIDDEN_CLASS),(0,_util_utils_common__WEBPACK_IMPORTED_MODULE_4__.wyW)(e,{horz:!0,vert:!0}),document.body.addClassName(_core_core_layout__WEBPACK_IMPORTED_MODULE_5__.Z.NOTHING_TO_DISPLAY_CLASS),this._value=null,this.changeMode(!1)}},lock:function(){this.locked=!0},unlock:function(){this.locked=!1},setDetailsLoadedEntity:function(e){this.detailsLoadedEntity=e},getDetailsLoadedEntity:function(){return this.detailsLoadedEntity},processTemplate:function(e){if(this.editButton=(0,prototype__WEBPACK_IMPORTED_MODULE_1__.$)(this._EDIT_BUTTON_ID),this.saveButton=(0,prototype__WEBPACK_IMPORTED_MODULE_1__.$)(this._SAVE_BUTTON_ID),this.cancelButton=(0,prototype__WEBPACK_IMPORTED_MODULE_1__.$)(this._CANCEL_BUTTON_ID),this.deleteButton=(0,prototype__WEBPACK_IMPORTED_MODULE_1__.$)(this._DELETE_BUTTON_ID),this.options.showAssigned){this.removeFromAssigned=(0,prototype__WEBPACK_IMPORTED_MODULE_1__.$)(this._REMOVE_FROM_ASSIGNED_BUTTON_ID),this.addToAssigned=(0,prototype__WEBPACK_IMPORTED_MODULE_1__.$)(this._ADD_TO_ASSIGNED_BUTTON_ID),this.assignedViewList=new _components_list_base__WEBPACK_IMPORTED_MODULE_6__.W.List(this._ASSIGNED_VIEW_LIST_ID,{listTemplateDomId:e.viewAssignedListTemplateDomId,itemTemplateDomId:e.viewAssignedItemTemplateDomId,comparator:this.assignedComparator,allowSelections:!1,selectionDefaultsToCursor:!1});var t={listTemplateDomId:"list_responsive_collapsible_fields",itemTemplateDomId:"list_responsive_collapsible_fields:fields",comparator:this.assignedComparator,dragPattern:this._DND_CLASS,allowSelections:!0,selectionDefaultsToCursor:!0,multiSelect:!0,selectOnMousedown:!0,setCursorOnMouseDown:!0};this.assignedList=new _components_list_base__WEBPACK_IMPORTED_MODULE_6__.W.List(this._ASSIGNED_LIST_ID,Object.extend({},t,{allowSelections:!1,selectionDefaultsToCursor:!1})),this.availableList=new _components_list_base__WEBPACK_IMPORTED_MODULE_6__.W.List(this._AVAILABLE_LIST_ID,t),e.searchAssigned&&(this.assignedViewSearchBox=new _components_components_searchBox__WEBPACK_IMPORTED_MODULE_2__.Z({id:(0,prototype__WEBPACK_IMPORTED_MODULE_1__.$)(this._ASSIGNED_VIEW_ID).select(_core_core_layout__WEBPACK_IMPORTED_MODULE_5__.Z.SEARCH_LOCKUP_PATTERN)[0].identify()}),this.assignedViewSearchBox.onSearch=function(e){_mng_org_module__WEBPACK_IMPORTED_MODULE_13__.Z.invokeServerAction(_mng_org_module__WEBPACK_IMPORTED_MODULE_13__.Z.ActionMap.SEARCH_ASSIGNED,{text:e})}),this.availableSearchBox=new _components_components_searchBox__WEBPACK_IMPORTED_MODULE_2__.Z({id:(0,prototype__WEBPACK_IMPORTED_MODULE_1__.$)(this._AVAILABLE_ID).select(_core_core_layout__WEBPACK_IMPORTED_MODULE_5__.Z.SEARCH_LOCKUP_PATTERN)[0].identify()}),this.availableSearchBox.onSearch=function(e){_mng_org_module__WEBPACK_IMPORTED_MODULE_13__.Z.invokeServerAction(_mng_org_module__WEBPACK_IMPORTED_MODULE_13__.Z.ActionMap.SEARCH_AVAILABLE,{text:e})},this.assignedSearchBox=new _components_components_searchBox__WEBPACK_IMPORTED_MODULE_2__.Z({id:(0,prototype__WEBPACK_IMPORTED_MODULE_1__.$)(this._ASSIGNED_ID).select(_core_core_layout__WEBPACK_IMPORTED_MODULE_5__.Z.SEARCH_LOCKUP_PATTERN)[0].identify()}),this.assignedSearchBox.onSearch=function(e){_mng_org_module__WEBPACK_IMPORTED_MODULE_13__.Z.invokeServerAction(_mng_org_module__WEBPACK_IMPORTED_MODULE_13__.Z.ActionMap.SEARCH_ASSIGNED,{text:e})},e.searchAssigned&&(this.assignedViewInfiniteScroll=new _util_tools_infiniteScroll__WEBPACK_IMPORTED_MODULE_7__.Z({id:(0,prototype__WEBPACK_IMPORTED_MODULE_1__.$)((0,prototype__WEBPACK_IMPORTED_MODULE_1__.$)(this._ASSIGNED_VIEW_LIST_ID).parentNode).identify(),contentId:this._ASSIGNED_VIEW_LIST_ID}),this.assignedViewInfiniteScroll.onLoad=function(){_mng_org_module__WEBPACK_IMPORTED_MODULE_13__.Z.invokeServerAction(_mng_org_module__WEBPACK_IMPORTED_MODULE_13__.Z.ActionMap.NEXT_ASSIGNED,{})}),this.availableInfiniteScroll=new _util_tools_infiniteScroll__WEBPACK_IMPORTED_MODULE_7__.Z({id:(0,prototype__WEBPACK_IMPORTED_MODULE_1__.$)((0,prototype__WEBPACK_IMPORTED_MODULE_1__.$)(this._AVAILABLE_LIST_ID).parentNode).identify(),contentId:this._AVAILABLE_LIST_ID}),this.availableInfiniteScroll.onLoad=function(){_mng_org_module__WEBPACK_IMPORTED_MODULE_13__.Z.invokeServerAction(_mng_org_module__WEBPACK_IMPORTED_MODULE_13__.Z.ActionMap.NEXT_AVAILABLE,{})},this.assignedInfiniteScroll=new _util_tools_infiniteScroll__WEBPACK_IMPORTED_MODULE_7__.Z({id:(0,prototype__WEBPACK_IMPORTED_MODULE_1__.$)((0,prototype__WEBPACK_IMPORTED_MODULE_1__.$)(this._ASSIGNED_LIST_ID).parentNode).identify(),contentId:this._ASSIGNED_LIST_ID}),this.assignedInfiniteScroll.onLoad=function(){_mng_org_module__WEBPACK_IMPORTED_MODULE_13__.Z.invokeServerAction(_mng_org_module__WEBPACK_IMPORTED_MODULE_13__.Z.ActionMap.NEXT_ASSIGNED,{})}}},initDnD:function(){dragdropextra__WEBPACK_IMPORTED_MODULE_0__.m9.add((0,prototype__WEBPACK_IMPORTED_MODULE_1__.$)(this._ASSIGNED_LIST_ID).up(),{accept:[this._DROP_CLASS],hoverclass:_core_core_layout__WEBPACK_IMPORTED_MODULE_5__.Z.DROP_TARGET_CLASS,onDrop:function(e,t,o){e.items&&this._addToAssigned()}.bind(this)}),dragdropextra__WEBPACK_IMPORTED_MODULE_0__.m9.add((0,prototype__WEBPACK_IMPORTED_MODULE_1__.$)(this._AVAILABLE_LIST_ID).up(),{accept:[this._DROP_CLASS],hoverclass:_core_core_layout__WEBPACK_IMPORTED_MODULE_5__.Z.DROP_TARGET_CLASS,onDrop:function(e,t,o){e.items&&this._removeFromAssigned()}.bind(this)})},initEvents:function(){function e(){(this.assignedList.getSelectedItems().length>0?_core_core_events_bis__WEBPACK_IMPORTED_MODULE_9__.Z.enable:_core_core_events_bis__WEBPACK_IMPORTED_MODULE_9__.Z.disable)(this.removeFromAssigned)}function t(){(this.availableList.getSelectedItems().length>0?_core_core_events_bis__WEBPACK_IMPORTED_MODULE_9__.Z.enable:_core_core_events_bis__WEBPACK_IMPORTED_MODULE_9__.Z.disable)(this.addToAssigned)}(0,prototype__WEBPACK_IMPORTED_MODULE_1__.$)(this._BUTTONS_CONTAINER_ID).observe("click",function(e){var t=e.element(),o=(0,_util_utils_common__WEBPACK_IMPORTED_MODULE_4__.BwZ)(t,[_core_core_layout__WEBPACK_IMPORTED_MODULE_5__.Z.BUTTON_PATTERN],!0);o&&this.buttonsFunctions[o.identify()]&&this.buttonsFunctions[o.identify()].call(this),e.preventDefault(),e.stopPropagation()}.bindAsEventListener(this)),this.options.showAssigned&&((0,prototype__WEBPACK_IMPORTED_MODULE_1__.$)(this._MOVE_BUTTONS_CONTAINER_ID).observe("click",function(e){var t=e.element(),o=(0,_util_utils_common__WEBPACK_IMPORTED_MODULE_4__.BwZ)(t,[_core_core_layout__WEBPACK_IMPORTED_MODULE_5__.Z.BUTTON_PATTERN],!0);o&&(o==this.removeFromAssigned?this._removeFromAssigned():o==this.addToAssigned&&this._addToAssigned()),e.preventDefault(),e.stopPropagation()}.bindAsEventListener(this)),this.assignedList.observe("item:selected",e.bindAsEventListener(this)),this.assignedList.observe("item:unselected",e.bindAsEventListener(this)),this.assignedList.observe("item:dblclick",function(e){this._removeFromAssigned()}.bindAsEventListener(this)),this.availableList.observe("item:selected",t.bindAsEventListener(this)),this.availableList.observe("item:unselected",t.bindAsEventListener(this)),this.availableList.observe("item:dblclick",function(e){this._addToAssigned()}.bindAsEventListener(this))),this.attributesFacade&&this.attributesFacade.on("change",this.options._.bind(this._toggleButton,this))},initButtonsFunctions:function(){this.buttonsFunctions[this._EDIT_BUTTON_ID]=function(){this.changeMode(!0)},this.buttonsFunctions[this._SAVE_BUTTON_ID]=function(){var e=this,t=new(jquery__WEBPACK_IMPORTED_MODULE_15___default().Deferred);this.asyncValidate?this.asyncValidate().done((function(){e.attributesFacade?e.attributesFacade.getCurrentView().saveChildren().done((function(){t.resolve()})).fail((function(){t.reject(),jquery__WEBPACK_IMPORTED_MODULE_15___default()(".tab[tabid='#attributesTab']").trigger("mouseup")})):t.resolve(),t.done((function(){e.save(e._value)}))})):this.validate()&&(this.attributesFacade?this.attributesFacade.getCurrentView().saveChildren().done((function(){t.resolve()})).fail((function(){t.reject(),jquery__WEBPACK_IMPORTED_MODULE_15___default()(".tab[tabid='#attributesTab']").trigger("mouseup")})):t.resolve(),t.done((function(){e.save(e._value)})))},this.buttonsFunctions[this._CANCEL_BUTTON_ID]=function(){this.attributesFacade?this.isChanged()?this.confirmationDialog.open():this.cancelOnEdit():_mng_org_module__WEBPACK_IMPORTED_MODULE_13__.Z.invokeClientAction("cancelIfEdit",{entity:this.getValue()})},this.buttonsFunctions[this._DELETE_BUTTON_ID]=function(){this._deleteEntity()},this.buttonsFunctions[this._REMOVE_FROM_ASSIGNED_BUTTON_ID]=function(){this._removeFromAssigned()},this.buttonsFunctions[this._ADD_TO_ASSIGNED_BUTTON_ID]=function(){this._addFromAssigned()}},cancelOnEdit:function(){var e=this;this.isEditMode&&this.cancel().done((function(){e.unlock(),e.changeMode(!1),e._toggleButton()}))},changeMode:function(e){var t,o,i,n;if(this.isEditMode=e,this.attributesFacade){o=(0,prototype__WEBPACK_IMPORTED_MODULE_1__.$)("attributesTab");var r=!!this._value&&"organizations"===this._value.id;this.detachScrollEvent(this.attributesFacade.getCurrentView().$container.parent()),this.attributesFacade.toggleMode(e,r),e&&this.initScrollEvent(this.attributesFacade.getCurrentView()),t=(0,prototype__WEBPACK_IMPORTED_MODULE_1__.$$)(".tertiary")[0],i=(0,prototype__WEBPACK_IMPORTED_MODULE_1__.$)("propertiesTab"),n=jquery__WEBPACK_IMPORTED_MODULE_15___default()(".control.tabSet.anchor")}e?((0,prototype__WEBPACK_IMPORTED_MODULE_1__.$)(this._id).addClassName(this._EDIT_MODE_CLASS),t&&(t.down(".selected").removeClassName("selected"),t.down("li",0).addClassName("selected"),t.addClassName("tabbed"),o.addClassName("hidden"),i.removeClassName("hidden"),n.removeClass("attributesAnchor")),this._assigned=[],this._unassigned=[],this.options.showAssigned&&((0,_util_utils_common__WEBPACK_IMPORTED_MODULE_4__.wyW)((0,prototype__WEBPACK_IMPORTED_MODULE_1__.$)(this._moveButtonsId),{horz:!0}),(0,prototype__WEBPACK_IMPORTED_MODULE_1__.$)(this._moveButtonsId).style.zIndex=1e3,this.assignedList.setItems([]),this.assignedList.show(),this.availableList.setItems([]),this.availableList.show(),_core_core_events_bis__WEBPACK_IMPORTED_MODULE_9__.Z.disable(this.removeFromAssigned),_core_core_events_bis__WEBPACK_IMPORTED_MODULE_9__.Z.disable(this.addToAssigned),this.assignedSearchBox.setText(""),this.availableSearchBox.setText(""),_mng_org_module__WEBPACK_IMPORTED_MODULE_13__.Z.invokeServerAction(_mng_org_module__WEBPACK_IMPORTED_MODULE_13__.Z.ActionMap.SEARCH_ASSIGNED,{text:this.assignedSearchBox.getText()}),_mng_org_module__WEBPACK_IMPORTED_MODULE_13__.Z.invokeServerAction(_mng_org_module__WEBPACK_IMPORTED_MODULE_13__.Z.ActionMap.SEARCH_AVAILABLE,{text:this.availableSearchBox.getText()})),this._editEntity(),this._toggleButton()):((0,prototype__WEBPACK_IMPORTED_MODULE_1__.$)(this._id).removeClassName(this._EDIT_MODE_CLASS),t&&(o.removeClassName("hidden"),i.removeClassName("hidden"),t.removeClassName("tabbed")),this.options.searchAssigned&&this.assignedViewSearchBox&&this.assignedViewSearchBox.setText(""),this.changeDisable(this.canEdit(),["#"+this._EDIT_BUTTON_ID]),this.changeDisable(this.canDelete(),["#"+this._DELETE_BUTTON_ID]),this._showEntity(),this._assigned=[],this._unassigned=[])},canEdit:function(){return!0},canDelete:function(){var e=this.getValue();return(!e||e.getNameWithTenant()!==this.options.currentUser)&&(!!e&&"/"!==e.uri)},setValuesProperty:function(e,t){this._value[e]=t},getValue:function(){return this._value},setProperties:function(e){},isChanged:function(e){},save:function(e){},validate:function(){return!0},assignedComparator:function(e,t){var o=e.getLabel(),i=t.getLabel();return o>i?1:o<i?-1:0},_moveEntities:function(e){var t,o,i,n;e?(t=this._unassigned,i=this.availableList,o=this._assigned,n=this.assignedList):(t=this._assigned,i=this.assignedList,o=this._unassigned,n=this.availableList);var r=i.getSelectedItems(),s=r.collect((function(e){return e.getValue()}));o=o.concat(s.collect((function(t){return t.available==e?t:null}))).compact(),t=t.reject((function(e){return s.detect((function(t){return e.equals(t)}))})),i.removeItems(r),n.addItems(r,!0),n.refresh(),e?(this._unassigned=t,this._assigned=o):(this._assigned=t,this._unassigned=o)},_addToAssigned:function(){this._moveEntities(!0)},_removeFromAssigned:function(){this._moveEntities(!1)},_entitiesToItems:function(e,t){return(e=e||[]).collect(function(e){var o="",i=[],n="orgTooltip";e instanceof _mng_org_module__WEBPACK_IMPORTED_MODULE_13__.Z.User?(o=e.userName,e.fullName&&e.fullName.length>0&&(i=[e.fullName]),n=e.tenantId?"fullNameAndOrgTooltip":"fullNameTooltip"):e instanceof _mng_org_module__WEBPACK_IMPORTED_MODULE_13__.Z.Role&&(o=e.roleName,n=e.tenantId?"orgTooltip":void 0),e.tenantId&&e.tenantId.length>0&&i.push(e.tenantId),e.available=!!t;var r=new _components_list_base__WEBPACK_IMPORTED_MODULE_6__.W.ListItem({label:o,value:e});return this.isEditMode?r.processTemplate=function(e){return i.length>0&&new _components_components_tooltip__WEBPACK_IMPORTED_MODULE_8__.p(e,{text:js_sdk_src_common_util_xssUtil__WEBPACK_IMPORTED_MODULE_14__.Z.hardEscape(i),templateId:n}),_components_list_base__WEBPACK_IMPORTED_MODULE_6__.W.ListItem.prototype.processTemplate.call(this,e)}:r.processTemplate=function(e){var t=e.select("a")[0];return t.insert(js_sdk_src_common_util_xssUtil__WEBPACK_IMPORTED_MODULE_14__.Z.hardEscape(this.getLabel())),t.writeAttribute("href",this.getValue().getManagerURL()),i.length>0&&new _components_components_tooltip__WEBPACK_IMPORTED_MODULE_8__.p(e,{text:js_sdk_src_common_util_xssUtil__WEBPACK_IMPORTED_MODULE_14__.Z.hardEscape(i),templateId:n}),e},r}.bind(this))},getAssignedEntities:function(){return this._assigned},getUnassignedEntities:function(){return this._unassigned},setAssignedEntities:function(e){this.assignedViewInfiniteScroll&&this.assignedViewInfiniteScroll.reset(),this.assignedInfiniteScroll&&this.assignedInfiniteScroll.reset();var t=this.isEditMode?this.assignedList:this.assignedViewList,o=this._filterEntities(e,this._unassigned,this._assigned,this.assignedSearchBox.getText());t.setItems(this._entitiesToItems(o)),t.refresh()},addAssignedEntities:function(e){var t=this.isEditMode?this.assignedList:this.assignedViewList,o=this._filterEntities(e,this._unassigned,this._assigned,this.assignedSearchBox.getText());t.addItems(this._entitiesToItems(o)),t.refresh()},setAvailableEntities:function(e){this.availableInfiniteScroll.reset();var t=this._filterEntities(e,this._assigned,this._unassigned,this.availableSearchBox.getText());this.availableList.setItems(this._entitiesToItems(t,!0)),this.availableList.refresh()},addAvailableEntities:function(e){var t=this._filterEntities(e,this._assigned,this._unassigned,this.availableSearchBox.getText());this.availableList.addItems(this._entitiesToItems(t,!0)),this.availableList.refresh()},_filterEntities:function(e,t,o,i){var n=e.reject((function(e){return t.detect((function(t){return t.equals(e)}))}));return i=i.toLowerCase(),n=n.concat(o.findAll((function(e){return e.getDisplayName().toLowerCase().include(i)})))},changeReadonly:function(e,t){t.each(function(t){(0,prototype__WEBPACK_IMPORTED_MODULE_1__.$)(this._id).select(t)[0].writeAttribute(_core_core_layout__WEBPACK_IMPORTED_MODULE_5__.Z.READONLY_ATTR_NAME,e?null:_core_core_layout__WEBPACK_IMPORTED_MODULE_5__.Z.READONLY_ATTR_NAME)}.bind(this))},resetValidation:function(e){var t=(0,prototype__WEBPACK_IMPORTED_MODULE_1__.$)(this._id);e.each(function(e){_util_utils_common__WEBPACK_IMPORTED_MODULE_4__.n4K.hideError(t.select(e)[0])}.bind(this))},changeDisable:function(e,t){t.each(function(t){e?_core_core_events_bis__WEBPACK_IMPORTED_MODULE_9__.Z.enable((0,prototype__WEBPACK_IMPORTED_MODULE_1__.$)(this._id).select(t)[0]):_core_core_events_bis__WEBPACK_IMPORTED_MODULE_9__.Z.disable((0,prototype__WEBPACK_IMPORTED_MODULE_1__.$)(this._id).select(t)[0])}.bind(this))},_deleteEntity:function(){},_editEntity:function(){},_showEntity:function(){}},_mng_org_module__WEBPACK_IMPORTED_MODULE_13__.Z.addDialog={show:function(e){},hide:function(e){}},_mng_org_module__WEBPACK_IMPORTED_MODULE_13__.Z.Action=function(e,t){Object.isFunction(e)&&(t=t&&Object.isFunction(t)?t:this.beforeInvoke,this.invokeAction=function(){if(t())return e.apply(this,arguments)})},_mng_org_module__WEBPACK_IMPORTED_MODULE_13__.Z.Action.addMethod("invokeAction",_util_utils_common__WEBPACK_IMPORTED_MODULE_4__.cnY),_mng_org_module__WEBPACK_IMPORTED_MODULE_13__.Z.Action.addMethod("beforeInvoke",(function(){return!0})),_mng_org_module__WEBPACK_IMPORTED_MODULE_13__.Z.ServerAction=function(e,t){this.actionURL="flow.html?_flowExecutionKey="+window.localContext.flowExecutionKey+"&_eventId="+e,this.data=Object.toQueryString(t),this.onSuccess=(0,_util_utils_common__WEBPACK_IMPORTED_MODULE_4__.cnY)(),this.onError=(0,_util_utils_common__WEBPACK_IMPORTED_MODULE_4__.cnY)()},_mng_org_module__WEBPACK_IMPORTED_MODULE_13__.Z.ServerAction.addMethod("invokeAction",(function(){this.beforeInvoke()&&(0,_core_core_ajax__WEBPACK_IMPORTED_MODULE_11__.mc)(this.actionURL,{postData:this.data,callback:function(e){e.error?this.onError(e.error):this.onSuccess(e.data)}.bind(this),errorHandler:function(e){return e.getResponseHeader("LoginRequested")?(_mng_org_module__WEBPACK_IMPORTED_MODULE_13__.Z.fire(_mng_org_module__WEBPACK_IMPORTED_MODULE_13__.Z.Event.SERVER_UNAVAILABLE,{}),!0):(0,_core_core_ajax_utils__WEBPACK_IMPORTED_MODULE_12__.m0)(e)},mode:_core_core_ajax__WEBPACK_IMPORTED_MODULE_11__.w8.prototype.EVAL_JSON})})),_mng_org_module__WEBPACK_IMPORTED_MODULE_13__.Z.ServerAction.addMethod("beforeInvoke",(function(){return!0})),_mng_org_module__WEBPACK_IMPORTED_MODULE_13__.Z.toolbar={_actionModel:{},initialize:function(e){this._actionModel=e,_components_components_toolbarButtons_events__WEBPACK_IMPORTED_MODULE_3__.Z.initialize(this._toActionMap(this._actionModel)),this.refresh()},refresh:function(){for(var e in this._actionModel){var t=this._actionModel[e].buttonId,o=(0,_util_utils_common__WEBPACK_IMPORTED_MODULE_4__.J$4)(this._actionModel[e].test);_components_components_toolbarButtons_events__WEBPACK_IMPORTED_MODULE_3__.Z.setButtonState((0,prototype__WEBPACK_IMPORTED_MODULE_1__.$)(t),o())}},_toActionMap:function(e){var t={};for(var o in e){var i=e[o];t[i.buttonId]=function(e,t){return function(){var o=(0,_util_utils_common__WEBPACK_IMPORTED_MODULE_4__.qO$)(e),i=t,n=window.localContext&&window.localContext[e];i&&(0,_util_utils_common__WEBPACK_IMPORTED_MODULE_4__.kJL)(i)?o.apply(n?window.localContext:null,i):o.call(n?window.localContext:null,i)}}(i.action,i.actionArgs)}return t}},_mng_org_module__WEBPACK_IMPORTED_MODULE_13__.Z.createInputRegExValidator=function(e){return{validator:function(t){var o=!e.regExp.test(t),i=o?"":_mng_org_module__WEBPACK_IMPORTED_MODULE_13__.Z.getMessage("unsupportedSymbols",{symbols:e.unsupportedSymbols});return e.isValid=o,{isValid:o,errorMessage:i}},element:e}},_mng_org_module__WEBPACK_IMPORTED_MODULE_13__.Z.createBlankValidator=function(e,t,o,i){return{validator:function(e){var o=!e.blank();return{isValid:o,errorMessage:o?"":_mng_org_module__WEBPACK_IMPORTED_MODULE_13__.Z.getMessage(t)}},element:e,onValid:o,onInvalid:i}},_mng_org_module__WEBPACK_IMPORTED_MODULE_13__.Z.createMaxLengthValidator=function(e,t,o){return{validator:function(i){var n=e.hasAttribute("maxlength")?e.readAttribute("maxlength"):e.maxlength,r=i.length<parseInt(n),s=r?"":_mng_org_module__WEBPACK_IMPORTED_MODULE_13__.Z.getMessage(t);return o&&(s=s.replace(o,n)),{isValid:r,errorMessage:s}},element:e}},_mng_org_module__WEBPACK_IMPORTED_MODULE_13__.Z.createSameValidator=function(e,t,o){return{validator:function(e){var i=e===t.getValue();return{isValid:i,errorMessage:i?"":_mng_org_module__WEBPACK_IMPORTED_MODULE_13__.Z.getMessage(o)}},element:e}},_mng_org_module__WEBPACK_IMPORTED_MODULE_13__.Z.createRegExpValidator=function(e,t,o){return{validator:function(e){var i=o.exec(e),n=!i&&0===e.length||i&&e==i[0];return{isValid:n,errorMessage:n?"":_mng_org_module__WEBPACK_IMPORTED_MODULE_13__.Z.getMessage(t)}},element:e}},_mng_org_module__WEBPACK_IMPORTED_MODULE_13__.Z.truncateOrgName=function(e){return e&&e.length>0?e.truncate(15):""},RegExpRepresenter.addMethod("__parse",(function(e){for(var t=(0,prototype__WEBPACK_IMPORTED_MODULE_1__.$A)(),o=1;o<e.length-1;o++){var i=e.charAt(o);"\\"==i&&(i+=e.charAt(++o)),"\\u"==i&&(i+=e.substring(++o,o+4),o+=3),t.push(i)}return t})),RegExpRepresenter.addMethod("getCharacters",(function(){var result=(0,prototype__WEBPACK_IMPORTED_MODULE_1__.$A)();return this.expressionTokens.each(function(token){if(token.startsWith("\\u"))result.push(eval('"'+token+'"'));else if(token.startsWith("\\")){var ch=this.charMap[token];result.push(ch||token.substring(1,token.length))}else result.push(token)}.bind(this)),result})),RegExpRepresenter.addMethod("getRepresentedString",(function(){for(var e="",t=this.getCharacters(),o=t.length,i=0;i<o;i++){var n=t[i];e+=" "==n||"."==n||","==n?"["+n+"]":n,i<o-1&&(e+=", ")}return e}));const __WEBPACK_DEFAULT_EXPORT__=_mng_org_module__WEBPACK_IMPORTED_MODULE_13__.Z},70692:(e,t,o)=>{"use strict";o.d(t,{Z:()=>i});const i={}},31590:(e,t,o)=>{"use strict";o.r(t);var i=o(89560),n=o(97836),r=o.n(n);var s=o(18580);i.Z.extend({events:r().extend({},i.Z.prototype.events,{"click button":"cancel"}),el:function(){return this.template({title:this.title,additionalCssClasses:this.additionalCssClasses,i18n:s.Z})},constructor:function(e){this.options=e||{},i.Z.prototype.constructor.call(this,{modal:!0,additionalCssClasses:this.options.additionalCssClasses,template:'<div class="panel dialog loading overlay moveable centered_horz centered_vert {{- additionalCssClasses }}">\n\n    <js-templateNonce></js-templateNonce>\n    <div class="content ">\n        <div class="header mover">\n            <div class="title">{{- title }}</div>\n        </div>\n\n        <div class="body">\n            <p class="message">{{- i18n[\'dialog.overlay.loading\'] }}<b class="percents"></b></p>\n            <button class="button action up">\n                <span class="wrap">{{- i18n[\'button.cancel\'] }}</span>\n                <span class="icon"></span>\n            </button>\n        </div>\n\n    </div>\n</div>',title:this.options.title||s.Z["dialog.overlay.title"]}),this.options.showProgress&&(this.progress=r().bind((function(e){return 0===arguments.length?+this.$(".percents").text():this.$(".percents").text(e+"%")}),this),this.on("open",r().bind(this.progress,this,0)))},initialize:function(){i.Z.prototype.initialize.apply(this,arguments),this.options.cancellable?this.on("button:cancel",this.close):this.$("button").hide()},cancel:function(){this.trigger("button:cancel",this)}});var a=o(52687),l=o(52499),_=o(72157),d=o.n(_),c=o(64155),u=o(33806),h=o(98223),E=o(82681),p=o(43852),m=o(72086),f=o(71914),g=o(84612);const R=i.Z.extend({contentTemplate:r().template("<p class='alertText'>\n\n    <js-templateNonce></js-templateNonce>\n    {{- message }}\n</p>"),constructor:function(e){e||(e={}),i.Z.prototype.constructor.call(this,{modal:!1!==e.modal,message:e.message,additionalCssClasses:"alertDialog "+(e.additionalCssClasses||""),title:e.title||s.Z["dialog.exception.title"],id:e.id,titleContainerId:e.titleContainerId,bodyContainerId:e.bodyContainerId,buttons:[{label:s.Z["button.close"],action:"close",primary:!0}]},e)},initialize:function(e){i.Z.prototype.initialize.apply(this,arguments),this.on("button:close",this.close),this.setMessage(e.message)},setMessage:function(e){e=g.Z.softHtmlEscape(e,{whiteList:["br"]}),this.content=this.contentTemplate({message:e});var t=this.renderContent();this.$contentContainer.html(t)}});var A=o(88317),T=o(29338),v=o(57443),D=o(21448);function I(e,t,o){var i=t||J.model.getContextFolder();J.folderActionFactory[e](i,o).invokeAction()}function O(e,t,o){var i=t||J.model.getSelectedResources()[0];J.resourceActionFactory[e](i,o).invokeAction()}function C(e,t,o){var i=J.model.getSelectedResources();J.bulkActionFactory[e](i,o).invokeAction()}var M=r().debounce((function(e,t){J.RedirectAction["create"+e].call().invokeAction(t)}),500);function P(){return J.CopyMoveController.isCopyFolder()||J.CopyMoveController.isMoveFolder()}function S(){return J.CopyMoveController.isCopyResource()||J.CopyMoveController.isMoveResource()}function L(e){return(e=e||J.model.getContextFolder())&&e.isEditable()}function b(e){return(e=e||J.model.getContextFolder())&&!e.isOrganization()&&!e.isRoot()&&!e.isOrganizationsRoot()&&e.isReadable()}function w(e){var t=e||J.model.getContextFolder();if(!(P()&&!t.isOrganizationsRoot()&&L(t)))return!1;var o=J.CopyMoveController.object;return t.URI!==o.URI}function U(e){return(e=e||J.model.getContextFolder())&&!e.isOrganization()&&!e.isRoot()&&!e.isPublic()&&!e.isTemp()&&!e.isOrganizationsRoot()&&e.isRemovable()&&!e.isActiveThemeFolder()&&!e.isThemeRootFolder()}function y(){var e=J.model.getContextFolder();return e&&e.isEditable()&&!e.isOrganization()&&!e.isOrganizationsRoot()&&!e.isRoot()}function N(e){return(e=e||J.model.getSelectedResources()[0])&&e.isReadable()}function B(e){return(e=e||J.model.getSelectedResources()[0])&&e.isRemovable()}function F(e){return(e=J.model.getSelectedResources()[0])&&e.isRemovable()}function W(){var e=J.model.getSelectedResources()[0];return e&&e.isReadable()&&!e.isEditable()}function x(e){return(e=e||J.model.getSelectedResources()[0])&&e.isEditable()}function Z(){var e=J.model.getSelectedResources(),t=e.detect((function(e){return!window.canBeRun(e)}));return e.length>0&&void 0===t}function V(){var e=J.model.getSelectedResources(),t=e.detect((function(e){return!window.canResourceBeEdited(e)}));return e.length>0&&void 0===t&&!(0,c.zcy)()}function K(){var e=J.model.getSelectedResources(),t=e.detect((function(e){return!window.canBeOpenedInDesigner(e)&&!window.canBeOpened(e)}));return e.length>0&&void 0===t}function k(){var e=J.model.getSelectedResources(),t=e.detect((function(e){return!N(e)}));return e.length>0&&void 0===t}function H(){var e=J.model.getSelectedResources(),t=e.detect((function(e){return!B(e)}));return e.length>0&&void 0===t}function j(e){if(e=e||J.model.getContextFolder(),!(S()&&!e.isOrganizationsRoot()&&L(e)))return!1;var t=J.CopyMoveController.isBulkAction()?J.CopyMoveController.object:[J.CopyMoveController.object],o=!0;(e.isThemeRootFolder()||e.isThemeFolder())&&(o=null==t.detect((function(e){return!e.resourceType.endsWith(".FileResource")})));return o}function z(){return j(J.model.getSelectedFolder())}function G(){var e=J.model.getSelectedResources(),t=e.detect((function(e){return!F(e)}));return e.length>0&&void 0===t}function Y(){var e=J.model.getContextFolder();return e&&e.isThemeFolder()}function $(){return J.dialogsPool.getAllPermissionsDialogs().detect((function(e){return e.isChanged()}))}function q(){return J.dialogsPool.getAllPropertiesDialogs().detect((function(e){return e.isChanged()}))}var J={_container:null,mode:null,isFlowRedirectRunning:!1,flowExecutionKey:"",messages:[],Mode:{SEARCH:"search",BROWSE:"browse",LIBRARY:"library"},ResourceType:{REPORT_UNIT:"com.jaspersoft.jasperserver.api.metadata.jasperreports.domain.ReportUnit",ADHOC_REPORT_UNIT:"com.jaspersoft.ji.adhoc.AdhocReportUnit",OLAP_UNIT:"com.jaspersoft.jasperserver.api.metadata.olap.domain.OlapUnit",DASHBOARD_RESOURCE:"com.jaspersoft.ji.adhoc.DashboardResource",DASHBOARD:"com.jaspersoft.ji.dashboard.DashboardModelResource",REPORT_OPTIONS:"com.jaspersoft.ji.report.options.metadata.ReportOptions",REPORT_DATA_SOURCE:"com.jaspersoft.jasperserver.api.metadata.jasperreports.domain.ReportDataSource",JDBC_REPORT_DATA_SOURCE:"com.jaspersoft.jasperserver.api.metadata.jasperreports.domain.JdbcReportDataSource",JNDI_JDBC_REPORT_DATA_SOURCE:"com.jaspersoft.jasperserver.api.metadata.jasperreports.domain.JndiJdbcReportDataSource",VIRTUAL_REPORT_DATA_SOURCE:"com.jaspersoft.jasperserver.api.metadata.jasperreports.domain.VirtualReportDataSource",CUSTOM_REPORT_DATA_SOURCE:"com.jaspersoft.jasperserver.api.metadata.jasperreports.domain.CustomReportDataSource",BEAN_REPORT_DATA_SOURCE:"com.jaspersoft.jasperserver.api.metadata.jasperreports.domain.BeanReportDataSource",OLAP_DATA_SOURCE:"com.jaspersoft.jasperserver.api.metadata.olap.domain.OlapDataSource",OLAP_CLIENT_CONNECTION:"com.jaspersoft.jasperserver.api.metadata.olap.domain.OlapClientConnection",QUERY:"com.jaspersoft.jasperserver.api.metadata.common.domain.Query",INPUT_CONTROL:"com.jaspersoft.jasperserver.api.metadata.common.domain.InputControl",LIST_OF_VALUES:"com.jaspersoft.jasperserver.api.metadata.common.domain.ListOfValues",LIST_OF_VALUES_ITEM:"com.jaspersoft.jasperserver.api.metadata.common.domain.ListOfValuesItem",DATA_TYPE:"com.jaspersoft.jasperserver.api.metadata.common.domain.DataType",MONDRIAN_CONNECTION:"com.jaspersoft.jasperserver.api.metadata.olap.domain.MondrianConnection",SECURE_MONDRIAN_CONNECTION:"com.jaspersoft.ji.ja.security.domain.SecureMondrianConnection",XMLA_CONNECTION:"com.jaspersoft.jasperserver.api.metadata.olap.domain.XMLAConnection",MONDRIAN_XMLA_DEFINITION:"com.jaspersoft.jasperserver.api.metadata.olap.domain.MondrianXMLADefinition",CONTENT_RESOURCE:"com.jaspersoft.jasperserver.api.metadata.common.domain.ContentResource",FILE_RESOURCE:"com.jaspersoft.jasperserver.api.metadata.common.domain.FileResource",SEMANTIC_LAYER_DATA_SOURCE:"com.jaspersoft.commons.semantic.datasource.SemanticLayerDataSource",DATA_DEFINER_UNIT:"com.jaspersoft.commons.semantic.DataDefinerUnit"},SearchAction:{NEXT:"next",GET_RESOURCE_CHILDREN:"getResourceChildren"},Event:{SEARCH_RUN:"search:run",SEARCH_BROWSE:"search:browse",SEARCH_FILTER:"search:filter",SEARCH_SORT:"search:sort",SEARCH_NEXT:"search:next",SEARCH_ROLLBACK:"search:rollback",SEARCH_SEARCH:"search:search",SEARCH_CHILDREN:"search:children",STATE_CHANGED:"state:changed",FILTER_PATH_CHANGED:"filterPath:changed",RESULT_CHANGED:"result:changed",CHILDREN_LOADED:"resourceChildren:loaded",RESULT_NEXT:"result:next",RESULT_ERROR:"result:error",REDIRECT_ERROR:"redirect:error",FLOW_REDIRECT_RUNNING:"flowRedirect:running"},InfoAction:{GET_DISPLAY_PATH:"getDisplayPath"},PermissionAction:{BROWSE:"permissionBrowse",SEARCH:"permissionSearch",NEXT:"permissionNext",UPDATE:"permissionsUpdate"},PermissionEvent:{BROWSE:"permission:browse",SEARCH:"permission:search",NEXT:"permission:next",UPDATE:"permission:update",LOADED:"permission:loaded",UPDATED:"permission:updated",ERROR:"permission:error"},FolderAction:{CREATE:"createFolder",COPY:"copyFolder",MOVE:"moveFolder",UPDATE:"updateFolder",DELETE:"deleteFolder"},FolderEvent:{DELETED:"folder:deleted",DELETE_ERROR:"folder:deleteError",CREATED:"folder:created",CREATE_ERROR:"folder:createError",COPIED:"folder:copied",COPY_ERROR:"folder:copyError",MOVED:"folder:moved",MOVE_ERROR:"folder:moveError",UPDATED:"folder:updated",UPDATE_ERROR:"folder:updateError"},ResourceAction:{DELETE:"deleteResources",COPY:"copyResources",MOVE:"moveResources",UPDATE:"updateResource",GENERATE:"generate",CONVERT:"convert"},ResourceEvent:{DELETED:"resource:deleted",DELETE_ERROR:"resource:deleteError",COPIED:"resource:copied",COPY_ERROR:"resource:copyError",MOVED:"resource:moved",MOVE_ERROR:"resource:moveError",UPDATED:"resource:updated",UPDATE_ERROR:"resource:updateError",GENERATED:"resource:generated",GENERATE_ERROR:"resource:generateError",CONVERTED:"resource:converted",CONVERT_ERROR:"resource:convertError"},RedirectType:{FLOW_REDIRECT:0,LOCATION_REDIRECT:1,WINDOW_REDIRECT:2},ThemeAction:{SETTHEME:"setActiveTheme",DOWNLOAD_THEME:"downloadTheme",REUPLOAD:"reuploadTheme"},ThemeEvent:{UPDATED:"theme:updated",REUPLOADED:"theme:reuploaded",THEME_ERROR:"theme:error"},ResourcesFavoriteAction:{FILTER_ID:"favoriteFilter",ALL_RESOURCES:"favoriteFilter-all",FAVORITE_RESOURCES:"favoriteFilter-favorites"},initialize:function(e){var t=e.rsInitOptions;function o(e,t){if(e){var o="USER"==t?E.Z.User:E.Z.Role;return e.collect((function(e){return new o(e)}))}return[]}J.mode=t.mode,J.flowExecutionKey=t.flowExecutionKey,u.Z.resizeOnClient("repoSearch"==document.body.id?"searchFilters":"folders","results"),h.Z.setCurrentContext(J.mode===J.Mode.SEARCH?"search":"repo"),t.enableDnD=J.mode==J.Mode.BROWSE&&!(0,c.zcy)(),J.model.setPublicFolderUri(t.publicFolderUri),J.model.setTempFolderUri(t.tempFolderUri),J.model.setRootFolderUri(t.rootFolderUri),J.model.setOrganizationsFolderUri(t.organizationsFolderUri),J.model.setFolderSeparator(t.folderSeparator),J.model.setAdministrator(t.isAdministrator),J.model.setConfiguration(t.configuration),J.model.setServerState(t.state),J.CursorManager.initialize(),J.actionModel.initialize(),this.navigateToResourcePage(),J.mode==J.Mode.BROWSE?(J.toolbar.initialize(J.actionModel.bulkActions),J.foldersPanel.initialize(t)):(J.filtersPanel.initialize(J.model.getFiltersConfiguration(),J.model.getFiltersState()),J.secondarySearchBox.initialize(J.model.getTextState()),J.filterPath.initialize()),J.resultsPanel.initialize(t),J.mode===J.Mode.LIBRARY&&J.favoriteSwitchControl.initialize(t),J.sortersPanel.initialize(J.model.getSortersConfiguration(),J.model.getSortState()),J.initFolderEvents(),J.initResourceEvents(),J.initThemeEvents(),J.observe("search:filter",(function(e){new J.ServerAction.createSearchAction("filter",{filterId:e.memo.filterId,filterOption:e.memo.optionId}).invokeAction()})),J.observe("search:sort",(function(e){new J.ServerAction.createSearchAction("sort",{sortBy:e.memo.sorterId}).invokeAction()})),J.observe("search:browse",(function(e){new J.ServerAction.createSearchAction("browse",{folderUri:e.memo.uri}).invokeAction(),J.actionModel.refreshToolbar()})),J.observe("search:search",(function(e){new J.ServerAction.createSearchAction("search",{text:e.memo.text}).invokeAction()})),J.observe("search:next",function(e){new this.ServerAction.createSearchAction(this.SearchAction.NEXT,{}).invokeAction()}.bindAsEventListener(J)),J.observe("search:rollback",(function(e){new J.ServerAction.createSearchAction("rollback",{position:e.memo.position}).invokeAction()})),J.observe("search:children",function(e){var t=e.memo.resource,o=e.memo.item;new this.ServerAction.createSearchAction(this.SearchAction.GET_RESOURCE_CHILDREN,{resourceUri:t.URIString,resourceType:t.resourceType,item:o}).invokeAction()}.bindAsEventListener(J)),J.observe("permission:browse",function(e){new J.ServerAction.createPermissionAction(this.PermissionAction.BROWSE,e.memo).invokeAction()}.bindAsEventListener(J)),J.observe("permission:search",function(e){new J.ServerAction.createPermissionAction(this.PermissionAction.SEARCH,e.memo).invokeAction()}.bindAsEventListener(J)),J.observe("permission:next",function(e){new J.ServerAction.createPermissionAction(this.PermissionAction.NEXT,e.memo).invokeAction()}.bindAsEventListener(J)),J.observe("permission:update",function(e){var t=e.memo.uri,o=e.memo.entities,i=e.memo.finishEdit;if(o.length>0){var n=o.collect((function(e){return e.toPermissionData()}));new J.ServerAction.createPermissionAction(this.PermissionAction.UPDATE,{uri:t,entitiesWithPermission:Object.toJSON(n),finishEdit:i}).invokeAction()}else{var r=J.dialogsPool.getPermissionsDialog(t);i&&r.hide()}}.bindAsEventListener(J)),J.observe("permission:loaded",function(e){var t=e.memo.responseData,i=J.dialogsPool.getPermissionsDialog(e.memo.inputData.uri);i.stopWaiting(),t&&(e.memo.doSet?i.setEntities(o(t.entities,t.type)):i.addEntities(o(t.entities,t.type)),"USER"===t.type?(p.Z.select(i._byUsersButton.parentNode),p.Z.unSelect(i._byRolesButton.parentNode)):(p.Z.unSelect(i._byUsersButton.parentNode),p.Z.select(i._byRolesButton.parentNode)))}.bindAsEventListener(J)),J.observe("permission:updated",function(e){var t=e.memo.inputData.uri,i=e.memo.inputData.finishEdit,n=J.dialogsPool.getPermissionsDialog(t);if(n.enable(),i)n.hide();else{var r=e.memo.responseData;r&&n.updateEntities(o(r.entities,r.type))}}.bindAsEventListener(J)),J.observe("permission:error",function(e){alert(Object.toJSON(e.memo))}.bindAsEventListener(J)),J.observe("resourceChildren:loaded",function(e){var t=e.memo.inputData.item,o=t.getValue(),i=e.memo.responseData;if(Object.isArray(i)){var n=[];i.each((function(e){var t=new X(e);o.addChild(t),n.push(t)})),J.resultsPanel.setResources(n,t),o.isLoaded()&&t.isLoading&&t.setLoading(!1),d()(t._getElement()).hasClass("cursor")&&(d()(".subfocus").removeClass("subfocus"),d()(t._getElement()).addClass("subfocus").addClass("focus-visible"))}}.bindAsEventListener(J)),J.observe("state:changed",(function(e){J.sortersPanel.enableItems(),J.updateUI(e.memo.state)})),J.observe("filterPath:changed",(function(e){J.filterPath.setPathItems(e.memo.filterPath)})),J.observe("result:changed",(function(e){var t=e.memo.resources.collect((function(e){return new X(e)}));J.resultsPanel.setResources(t);var o=J.resultsPanel.getList(),i=o.getItems();o.setCursor(i[0])})),J.observe("result:next",(function(e){var t=e.memo.resources.collect((function(e){return new X(e)}));J.resultsPanel.addResources(t)})),J.observe("result:error",this.defaultErrorHandler),J.observe("redirect:error",this.defaultErrorHandler),J.observe("flowRedirect:running",(function(){J.isflowRedirectRunning=!0,J.toolbar.refresh()})),J.Mode.BROWSE!=t.mode&&J.fire(J.Event.SEARCH_SEARCH,{text:J.model.getTextState()}),e.rsInitOptions.systemConfirm.blank()||a.Z.systemConfirm.show(e.rsInitOptions.systemConfirm),e.rsInitOptions.errorPopupMessage.blank()||a.Z.errorPopup.show(e.rsInitOptions.errorPopupMessage),this._disableBfCacheIfSafari()},navigateToResourcePage:function(){var e=J.mode;if(e&&history.length>1){var t=window.primaryNavModule.navigationPaths[e],o=window.primaryNavModule.navigationPaths[e].params;o=o?"?"+o:"";var i=f.Z.urlContext+"/"+t.url+o;D.Z.setLocation(i)}},showContextMenu:function(e){var t=e.memo.targetEvent;if(J.mode===J.Mode.BROWSE&&J.foldersPanel.isFolderContextMenu(t)){var o,i=d()(null===(o=e.memo.targetEvent)||void 0===o?void 0:o.target).closest("li").find("p").text().trim();J.actionModel.showFolderMenu(t,void 0,i)}J.resultsPanel.isResourceContextMenu(t)&&(J.model.getSelectedResources().length>1?J.actionModel.showResourceBulkMenu(t):J.actionModel.showResourceMenu(t))},_disableBfCacheIfSafari:function(){(0,c.Cu4)()&&v.Z.disableBackForwordCache()},updateUI:function(e){for(var t in e.sortBy!=J.model.getSortState()&&d()(J.sortersPanel).find(e.sortBy,!0)[0],e.text!=J.model.getTextState()&&J.mode!=J.Mode.BROWSE&&J.secondarySearchBox.setText(e.text),e.customFilters)e.customFilters[t]!=J.model.getFiltersState()[t]&&d()(J.filtersPanel).find(t,e.customFilters[t],!0)[0];J.model.setServerState(e)},initFolderEvents:function(){this.observe("folder:deleted",(function(e){var t=e.memo.inputData.folder.getParentFolder(),o=J.foldersPanel;o.refreshFolder(t),"/"===t.URI&&o.tree._selectOrEditNode(void 0,t.node,!1)})),this.observe("folder:deleteError",this.defaultErrorHandler),this.observe("folder:created",(function(e){var t=e.memo.inputData.toFolder,o=e.memo.responseData;J.foldersPanel.createAndSelectFolder(o,t)})),this.observe("folder:createError",this.defaultErrorHandler),this.observe("folder:copied",(function(e){var t=e.memo.inputData.folder,o=e.memo.inputData.toFolder;J.CopyMoveController.cancel(),J.foldersPanel.moveOrCopyFolder(t,o,!0)})),this.observe("folder:copyError",this.defaultErrorHandler),this.observe("folder:moved",(function(e){var t=e.memo.inputData.folder,o=e.memo.inputData.toFolder;J.CopyMoveController.cancel(),J.foldersPanel.moveOrCopyFolder(t,o)})),this.observe("folder:moveError",this.defaultErrorHandler),this.observe("folder:updated",(function(e){var t=e.memo.inputData.folder,o=e.memo.responseData.label,i=e.memo.responseData.desc;J.foldersPanel.updateFolder(t,o,i)})),this.observe("folder:updateError",this.defaultErrorHandler)},initResourceEvents:function(){this.observe("resource:deleted",(function(e){var t=e.memo.inputData.resources,o=e.memo.responseData;o.dependentResources?a.Z.dependentResources.show(o.dependentResources,null,{okOnly:!0,canSave:!1,topMessage:J.messages["dialog.dependencies.resources.message"],bottomMessage:J.messages["dialog.dependencies.resources.deleteMessage"]}):J.resultsPanel.removeResources(t)})),this.observe("resource:deleteError",this.defaultErrorHandler),this.observe("resource:copied",(function(e){var t=e.memo.inputData.folder;J.foldersPanel.reselectFolder(t)})),this.observe("resource:copyError",this.defaultErrorHandler),this.observe("resource:moved",(function(e){var t=e.memo.inputData.folder,o=J.model.getSelectedFolder();J.foldersPanel.reselectFolder(t),J.foldersPanel.reselectFolder(o)})),this.observe("resource:moveError",this.defaultErrorHandler),this.observe("resource:updated",(function(e){J.resultsPanel.updateResource(new X(e.memo.responseData))})),this.observe("resource:updateError",this.defaultErrorHandler),this.observe("resource:generated",(function(e){var t=e.memo.inputData,o=e.memo.responseData,i=new X(o);t.run?J.RedirectAction.createRunResourceAction(i,!1).invokeAction():J.mode==J.Mode.BROWSE?t.location==J.foldersPanel.getSelectedUri()&&J.foldersPanel.doBrowse():J.fire(J.Event.SEARCH_SEARCH,{text:J.model.getTextState()});a.Z.systemConfirm.show(J.messages.RM_REPORT_CREATED,5e3)})),this.observe("resource:generateError",(function(e){var t=e.memo.responseData,o=t.msg,i=t.data;if(o&&o.indexOf("SYSTEM_CONFIRM_REQUIRED")>-1){if(i){var n=new T.Z({text:te.restOfString(o,"SYSTEM_CONFIRM_REQUIRED:")});n.on("button:yes",(function(){i.overwrite=!0;var e=J.ResourceAction.GENERATE;new J.ServerAction.createGenerateAction(e,i).invokeAction(),n.remove()})),n.on("button:no",(function(){n.remove()})),n.open()}}else J.defaultErrorHandler(e)})),this.observe("resource:converted",(function(e){a.Z.systemConfirm.show(e.memo.responseData||e.memo,5e3),J.mode==J.Mode.BROWSE?J.foldersPanel.doBrowse():J.fire(J.Event.SEARCH_SEARCH,{text:J.model.getTextState()})})),this.observe("resource:convertError",this.defaultErrorHandler)},defaultErrorHandler:function(e){this.errorDialog&&this.errorDialog.remove(),this.errorDialog=new R({title:A.Z["dialog.dependencies.title"],id:"dependenciesDialogId",titleContainerId:"dependenciesDialogTitle",bodyContainerId:"dependenciesDialogBody"}),this.errorDialog.setMessage(e.memo.responseData||e.memo),this.errorDialog.open(),J.sortersPanel.enableItems()},initThemeEvents:function(){this.observe("theme:updated",(function(e){var t=e.memo.responseData;if(t&&t.refresh)document.body.style.cursor="wait",window.location.reload(!0);else{var o=J&&J.model&&J.model.getContextFolder()&&J.model.getContextFolder().getParentFolder();o&&J.foldersPanel&&J.foldersPanel.refreshFolder&&J.foldersPanel.refreshFolder(o)}})),this.observe("theme:reuploaded",(function(e){if(e.memo.responseData.isActiveTheme){var t=e.memo.responseData.themeUri;new J.ServerAction.createFolderAction(J.ThemeAction.SETTHEME,{folderUri:t}).invokeAction()}})),this.observe("theme:error",(function(e){var t=e.memo.responseData;t&&alert(t)}))},getMessage:function(e,t){var o=J.messages[e];return o?new l.Template(o).evaluate(t||{}):""},_createAction:function(e,t){var o;if(t.endsWith("FolderAction")){var i=J.model.getContextFolder();o=e["create"+t].call(null,i)}else if(t.endsWith("ResourceAction")||t.endsWith("RunAction")){var n=J.model.getContextResource();o=e["create"+t].call(null,n)}else o=e["create"+t].call();return o},observe:function(e,t){this._getContainer().observe(e,t)},stopObserving:function(e,t){this._getContainer().stopObserving(e,t)},fire:function(e,t){this._getContainer().fire(e,t)},_getContainer:function(){return this._container||(this._container=document.body),this._container},model:{_organizationsFolderUri:null,_rootFolderUri:null,_tempFolderUri:null,_publicFolderUri:null,_folderSeparator:null,_configuration:{},_serverState:{},_uiState:{selectedFolder:null,contextFolder:null,contextResource:null,selectedResources:[]},_isAdministrator:!1,setOrganizationsFolderUri:function(e){this._organizationsFolderUri=e},getOrganizationsFolderUri:function(){return this._organizationsFolderUri},setRootFolderUri:function(e){this._rootFolderUri=e},getRootFolderUri:function(){return this._rootFolderUri},setTempFolderUri:function(e){this._tempFolderUri=e},getTempFolderUri:function(){return this._tempFolderUri},setPublicFolderUri:function(e){this._publicFolderUri=e},getPublicFolderUri:function(){return this._publicFolderUri},setFolderSeparator:function(e){this._folderSeparator=e},getFolderSeparator:function(){return this._folderSeparator},setConfiguration:function(e){this._configuration=e},getConfiguration:function(){return this._configuration},getFiltersConfiguration:function(){return this.getConfiguration().filters},getSortersConfiguration:function(){return this.getConfiguration().sorters},setServerState:function(e){this._serverState=e},getServerState:function(){return this._serverState},getUIState:function(){return this._uiState},setAdministrator:function(e){this._isAdministrator=e},isAdministrator:function(){return this._isAdministrator},getFiltersState:function(){return this.getServerState().customFilters},getSortState:function(){return this.getServerState().sortBy},getTextState:function(){return this.getServerState().text},getFolderUriState:function(){return this.getServerState().folderUri},setSelectedFolder:function(e){return this.getUIState().selectedFolder=e,e},getSelectedFolder:function(){return this.getUIState().selectedFolder},setContextFolder:function(e){return this.getUIState().contextFolder=e,e},getContextFolder:function(){return this.getUIState().contextFolder},setSelectedResources:function(e){return this.getUIState().selectedResources=e,e},getSelectedResources:function(){return this.getUIState().selectedResources}}};J.actionModel={bulkActions:{RUN:{buttonId:"run",action:C,actionArgs:"Run",test:Z},EDIT:{buttonId:"edit",action:C,actionArgs:"Edit",test:V},OPEN:{buttonId:"open",action:C,actionArgs:"Open",test:K},COPY:{buttonId:"copy",action:C,actionArgs:"Copy",test:k},CUT:{buttonId:"cut",action:C,actionArgs:"Move",test:H},PASTE:{buttonId:"paste",action:I,actionArgs:"PasteResources",test:z},REMOVE:{buttonId:"remove",action:C,actionArgs:"Delete",test:G}},_holderId:"searchActionModel",_folderMenu:"folder_mutton",_resourceMenu:"resource_menu",_resourceBulkMenu:"resource_bulk_menu",initialize:function(){var e=d()("#"+u.Z.PAGE_BODY_ID)[0];e&&e.observe((0,c.MEy)()?"touchstart":"click",(function(e){(0,c.zcy)()?!(0,c.dOg)(e)&&1==e.touches.length&&m.Z.hideMenu():!(0,c.dOg)(e)&&m.Z.hideMenu()}))},showFolderMenu:function(e,t,o){m.Z.showDynamicMenu(this._folderMenu,e,null,t,this._holderId,void 0,o)},showResourceBulkMenu:function(e,t){m.Z.showDynamicMenu(this._resourceBulkMenu,e,null,t,this._holderId)},showResourceMenu:function(e,t){m.Z.showDynamicMenu(this._resourceMenu,e,null,t,this._holderId)},refreshToolbar:function(e){J.toolbar.refresh()}},J.CopyMoveController={object:null,_move:!1,_copy:!1,_dndMode:!1,onMove:function(){J.CursorManager.move(),J.actionModel.refreshToolbar()},onCopy:function(){J.CursorManager.copy(),J.actionModel.refreshToolbar()},onCancel:function(){J.CursorManager.none(),J.actionModel.refreshToolbar()},isObjectInstanceOf:function(e){var t=this.object;return!!t&&(this.isBulkAction()?t.length==t.findAll((function(t){return t instanceof e})).length:t instanceof e)},isMoveResource:function(){return this._move&&this.isObjectInstanceOf(X)},isMoveFolder:function(){return this._move&&this.isObjectInstanceOf(Q)},isCopyResource:function(){return this._copy&&this.isObjectInstanceOf(X)},isCopyFolder:function(){return this._copy&&this.isObjectInstanceOf(Q)},isBulkAction:function(){return Object.isArray(this.object)},move:function(e,t){this.cancel(),this.object=e,this._move=!0,this._copy=!1,this._dndMode=t,this.onMove()},copy:function(e,t){this.cancel(),this.object=e,this._move=!1,this._copy=!0,this._dndMode=t,this.onCopy()},cancel:function(){this.object=null,this._move=!1,this._copy=!1,this.onCancel()},isMove:function(){return this._move},isCopy:function(){return this._copy},isDnd:function(){return this._dndMode}},J.CursorManager={container:null,className:["copy_cursor","move_cursor"],initialize:function(){this.container=d()("#display")[0]},copy:function(){this.none(),d()(this.container).addClass(this.className[0])},move:function(){this.none(),d()(this.container).addClass(this.className[1])},none:function(){this.className.each(function(e,t){d()(this.container).removeClass(this.className[t])}.bind(this))}};var X=function(e){this._json=e,this.name=e.name,this.label=e.label,this.description=e.description,this.date=e.date,this.dateTimestamp=e.dateTimestamp,this.dateTime=e.dateTime,this.updateDate=e.updateDate,this.updateDateTimestamp=e.updateDateTimestamp,this.updateDateTime=e.updateDateTime,this.URI=e.URI,this.URIString=e.URIString,this.parentUri=e.parentUri,this.parentFolder=e.parentFolder,this.resourceType=e.resourceType,this.type=e.type,e.fileType&&(this.fileType=e.fileType),this.isScheduled=e.scheduled,this.isFavorite=e.favorite,this._permissions=e.permissions,this.hasChildren=e.hasChildren,this.isChild=!1,this.parentResource=null,this.isOpen=!1,this._children=[]};X.addMethod("clone",(function(){return new X(this._json)})),X.addMethod("isReadable",(function(){return this._permissions.include("r")})),X.addMethod("isEditable",(function(){return this._permissions.include("e")})),X.addMethod("isRemovable",(function(){return this._permissions.include("d")})),X.addMethod("isAdministrable",(function(){return this._permissions.include("a")})),X.addMethod("typeEquals",(function(e){return this.resourceType===e})),X.addMethod("typeSuffix",(function(){return this.resourceType.split(".").last()})),X.addMethod("isLoaded",(function(){return this._children.size()>0})),X.addMethod("isFolder",(function(){return!1})),X.addMethod("getChildren",(function(e){return this._children})),X.addMethod("addChild",(function(e){e.isChild=!0,e.parentResource=this,this._children.push(e)})),X.addMethod("updateChild",(function(e){e.isChild=!0,e.parentResource=this;var t=-1;this._children.each((function(o,i){o.URIString==e.URIString&&(t=i)})),t>-1?this._children[t]=e:this._children.push(e)})),X.addMethod("permissionsToString",(function(){var e="";return this.isEditable()?e+=J.messages["permission.modify"]:e+=J.messages["permission.readOnly"],this.isRemovable()&&(e+=", "+J.messages["permission.delete"]),this.isAdministrable()&&(e+=", "+J.messages["permission.administer"]),e}));var Q=function(e){this.node=e,this.name=e.param.id,this.label=g.Z.unescape(e.name),this.desc=e.param.extra.desc?g.Z.unescape(e.param.extra.desc):"",this.description=g.Z.unescape(this.desc),this.date=e.param.extra.date?g.Z.unescape(e.param.extra.date):"",this.URI=e.param.uri,this.URIString=e.param.uri};Q.prototype=(0,c.I8Q)(X.prototype),Q.addMethod("clone",(function(){return new Q(this.node)})),Q.addMethod("getParentFolder",(function(){return this.isRoot()?null:new Q(this.node.parent)})),Q.addMethod("getReadableUri",(function(){return this.isRoot()?"":this.getParentFolder().getReadableUri()+J.model.getFolderSeparator()+this.label})),Q.addMethod("isRoot",(function(){return this.URI==J.model.getRootFolderUri()||null==this.node.parent})),Q.addMethod("isPublic",(function(){return this.URI==J.model.getPublicFolderUri()})),Q.addMethod("isTemp",(function(){return this.URI==J.model.getTempFolderUri()})),Q.addMethod("isOrganization",(function(){return this.URI.match(J.model.getOrganizationsFolderUri()+"/[^/]+$")})),Q.addMethod("isOrganizationsRoot",(function(){return this.URI.match(J.model.getOrganizationsFolderUri()+"$")})),Q.addMethod("isReadable",(function(){return!0})),Q.addMethod("isEditable",(function(){return this.node.param.extra.isWritable})),Q.addMethod("isRemovable",(function(){return this.node.param.extra.isRemovable})),Q.addMethod("isAdministrable",(function(){return this.node.param.extra.isAdministrable})),Q.addMethod("isSelected",(function(){return this.node.isSelected()})),Q.addMethod("equals",(function(e){return e&&this.URI==e.URI})),Q.addMethod("isThemeFolder",(function(){return this.node.param.extra&&this.node.param.extra.isThemeFolder})),Q.addMethod("isThemeRootFolder",(function(){return this.node.param.extra&&this.node.param.extra.isThemeRootFolder})),Q.addMethod("isActiveThemeFolder",(function(){return this.node.param.extra&&this.node.param.extra.isActiveThemeFolder})),Q.addMethod("isFolder",(function(){return!0}));var ee={getResourceUris:function(e){var t=[];return e.each((function(e){t.push(e.URIString?e.URIString:e.URI)})),t},getResourceUriAndTypeList:function(e){var t=[];return e.each((function(e){var o=e.URIString?e.URIString:e.URI;t.push({URIString:o,type:e.type})})),t},getSelectedResourceUris:function(e){return e.map((function(e){return{uri:e.URIString?e.URIString:e.URI}}))},checkNameLength:function(e){return!e.blank()&&e.length<=J.model.getConfiguration().resourceNameMaxLength},checkDescriptionLength:function(e){return e.length<=J.model.getConfiguration().resourceDescriptionMaxLength},labelValidator:function(e){var t=!0,o="";return(e.blank()||e.length>J.model.getConfiguration().resourceLabelMaxLength)&&(o=J.messages.RE_INVALID_NAME_SIZE.replace("{0}",J.model.getConfiguration().resourceLabelMaxLength),t=!1),{isValid:t,errorMessage:o}},descriptionValidator:function(e){var t=!0,o="";return e.length>J.model.getConfiguration().resourceDescriptionMaxLength&&(o=J.messages.RE_INVALID_DESC_SIZE.replace("{0}",J.model.getConfiguration().resourceDescriptionMaxLength),t=!1),{isValid:t,errorMessage:o}},_fileTypeValidatorTemplate:function(e,t){var o=!0,i="";return!e||e.blank()?(i=J.messages.RE_ENTER_FILE_NAME,o=!1):e.toLowerCase().endsWith(t)||(i=J.messages.RE_INVALID_FILE_TYPE.replace("{0}",t),o=!1),{isValid:o,errorMessage:i}},zipFileTypeValidator:function(e){return ee._fileTypeValidatorTemplate(e,".zip")},isCustomDataSource:function(e){return r().contains(te.getInitConfiguration().customDataSources,e.resourceType)}},te={restOfString:function(e,t){var o=e.lastIndexOf(t)+t.length;return e.substring(o,e.length).trim()},getInitOptions:function(){return window.localContext.rsInitOptions||f.Z.repositorySearch.localContext.rsInitOptions},getInitConfiguration:function(){return te.getInitOptions().configuration}};document.observe("element:contextmenu",J.showContextMenu.bindAsEventListener(J)),document.observe("key:delete",(function(e){e.target instanceof HTMLInputElement||e.target instanceof HTMLTextAreaElement||G()&&C("Delete")})),window.canResourceBeCreated=function(e){var t=J.model.getContextFolder();return t&&!t.isOrganization()&&!t.isRoot()&&!t.isOrganizationsRoot()&&t.isEditable()},window.invokeResourceAction=O,window.invokeAction=function(e){J.Action["create"+e].call().invokeAction()},window.invokeFolderAction=I,window.invokeCreate=function(e,t){J.RedirectAction.createCreateResourceAction(e,t).invokeAction()},window.invokeBulkAction=C,window.invokeRedirectAction=M,window.isPropertiesChanged=q,window.isPermissionsChanged=$,window.isCopyOrMove=function(){return J.CopyMoveController.isCopy()||J.CopyMoveController.isMove()},window.isFolderCopyOrMove=P,window.isResourceCopyOrMove=S,window.isThemeFolder=Y,window.isNonActiveThemeFolder=function(){var e=J.model.getContextFolder();return Y()&&!e.isActiveThemeFolder()},window.isThemeRootFolder=function(){var e=J.model.getContextFolder();return e&&e.isThemeRootFolder()},window.canThemeBeReuploaded=function(){var e=J.model.getContextFolder();return e&&e.isThemeFolder()&&L(e)},window.canFolderBeCopied=b,window.canFolderBeDeleted=function(){var e=J.model.getContextFolder();return e&&!e.isOrganization()&&!e.isRoot()&&!e.isPublic()&&!e.isTemp()&&!e.isOrganizationsRoot()&&e.isRemovable()&&!e.isActiveThemeFolder()&&!e.isThemeRootFolder()},window.canFolderBeEdited=L,window.canFolderBeMoved=U,window.canFolderBeCopiedOrMovedToFolder=w,window.canAllBeCopiedOrMovedToFolder=j,window.canFolderBeExported=function(e){var t=(e=e||J.model.getContextFolder()).URI.split("/");return!(("/"===e.URI||"organizations"===t[t.length-1]||"organizations"===t[t.length-2])&&"org_template"!==t[t.length-1])},window.canFolderPermissionsBeAssigned=function(){var e=J.model.getContextFolder();return e&&e.isAdministrable()},window.canFolderPropertiesBeShowed=function(){var e=J.model.getContextFolder();return e&&e.isReadable()&&!y()},window.canFolderPropertiesBeEdited=y,window.canBeRun=function(e){return(e=e||J.model.getSelectedResources()[0])&&e.isReadable()&&J.runActionFactory[e.typeSuffix()]&&!J.isflowRedirectRunning},window.canBeGenerated=function(e){return!1},window.canBeConverted=function(e){return!1},window.canBeOpened=function(e){return(e=e||J.model.getSelectedResources()[0])&&e.isReadable()&&J.openActionFactory[e.typeSuffix()]&&"ContentResource"===e.typeSuffix()},window.canBeRunInBackground=function(e){return window.canBeScheduled(e)},window.canResourceBeEdited=function(e){e=e||J.model.getSelectedResources()[0];var t=J.editActionFactory[e.typeSuffix()]||ee.isCustomDataSource(e),o=e&&e.isEditable()&&t;return!["DashboardResource"].include(e.typeSuffix())&&o},window.canBeOpenedInDesigner=function(e){return(e=e||J.model.getSelectedResources()[0])&&e.isEditable()&&J.openActionFactory[e.typeSuffix()]&&"ContentResource"!==e.typeSuffix()},window.canCreateFolder=function(){var e=J.model.getContextFolder();return e&&!e.isOrganizationsRoot()&&e.isEditable()},window.canBeScheduled=function(e){return(e=e||J.model.getSelectedResources()[0])&&e.isReadable()&&[J.ResourceType.REPORT_UNIT,J.ResourceType.ADHOC_REPORT_UNIT,J.ResourceType.REPORT_OPTIONS].include(e.resourceType)},window.canResourceBeCopied=N,window.canResourceBeMoved=B,window.canResourceBeDeleted=F,window.canResourcePropertiesBeShowed=W,window.canResourcePropertiesBeEdited=x,window.canResourcePermissionsBeAssigned=function(){var e=J.model.getSelectedResources()[0];return e&&e.isAdministrable()},window.canAllBeRun=Z,window.canAllBeEdited=V,window.canAllBeOpened=K,window.canAllBeCopied=k,window.canAllBeMoved=H,window.canAllBePasted=z,window.canAllPropertiesBeShowed=function(){var e=J.model.getSelectedResources(),t=e.detect((function(){return!W()}));return e.length>0&&void 0===t},window.canAllPropertiesBeEdited=function(){var e=J.model.getSelectedResources(),t=e.detect((function(e){return!x(e)}));return e.length>0&&void 0===t},window.canAllBeDeleted=G,window.canBeAddedToFavorites=function(){return J.model.getSelectedResources().every((function(e){return!e.isFavorite}))},window.canBeRemovedFromFavorites=function(){return J.model.getSelectedResources().every((function(e){return e.isFavorite}))};var oe=o(94277),ie=o(236),ne=o(11129),re=o(12473);J.Action=function(e){Object.isFunction(e)&&(this.invokeAction=e)},J.Action.DEFAULT="default-action",J.Action.addMethod("invokeAction",c.cnY),J.folderActionFactory={CreateFolder:function(e){return new J.Action((function(){J.showCreateFolderConfirm(e)}))},CopyFolder:function(e){return new J.Action((function(){J.CopyMoveController.copy(e)}))},MoveFolder:function(e){return new J.Action((function(){J.CopyMoveController.move(e)}))},PasteFolder:function(e){return new J.Action((function(){var t,o=e||J.model.getContextFolder();if(o||(o=J.model.getSelectedFolder()),J.CopyMoveController.isCopyFolder())t=J.FolderAction.COPY;else{if(!J.CopyMoveController.isMoveFolder())return;t=J.FolderAction.MOVE}new J.ServerAction.createFolderAction(t,{toFolder:o,folder:J.CopyMoveController.object}).invokeAction()}))},PasteResources:function(e){return new J.Action((function(){var t,o=J.model.getSelectedFolder()?J.model.getSelectedFolder():e;o||(o=J.model.getContextFolder());var i=J.CopyMoveController.object,n=J.CopyMoveController.isBulkAction()?[].concat(i):[i];if(J.CopyMoveController.isCopyResource())t=J.ResourceAction.COPY;else{if(!J.CopyMoveController.isMoveResource())return;t=J.ResourceAction.MOVE}for(var r=0;r<n.length;r++)if(n[r].parentResource){for(var s=n[r].parentResource.URI,a=!1,l=0;l<n.length&&!a;l++)a|=n[l].URI==s;a||n.push(n[r].parentResource)}new J.ServerAction.createResourceAction(t,{resources:n,folder:o}).invokeAction()}))},DeleteFolder:function(e,t){return new J.Action((function(){m.Z.hideMenu(),J.showDeleteFolderConfirm(e,t)}))},ShowFolderProperties:function(e){return new J.Action((function(){J.showFolderProperties(e)}))},EditFolderProperties:function(e){return new J.Action((function(){J.editFolderProperties(e)}))},AssignPermissions:function(e,t){return new J.Action((function(){J.editFolderPermissions(e,t)}))},SetActiveThemeFolder:function(e){return new J.Action((function(){new J.ServerAction.createFolderAction(J.ThemeAction.SETTHEME,{folder:e}).invokeAction()}))},DownloadTheme:function(e){return new J.Action((function(){new J.ServerAction.createFolderAction(J.ThemeAction.DOWNLOAD_THEME,{folder:e}).initDownload()}))},UploadTheme:function(e){return new J.Action((function(){J.showUploadThemeConfirm(e,!1)}))},ReuploadTheme:function(e){return new J.Action((function(){J.showUploadThemeConfirm(e,!0)}))},Export:function(e,t){return new J.Action((function(){J.exportDialog.openRepoDialog(e,t)}))}},J.resourceActionFactory={ResourceFavoriteAction:function(){return new J.Action((function(){var e=J.model._uiState.selectedResources;J.addToFavorite(e)}))},Copy:function(e){return new J.Action((function(){J.CopyMoveController.copy(e)}))},Move:function(e){return new J.Action((function(){J.CopyMoveController.move(e)}))},Delete:function(e,t){return new J.Action((function(){m.Z.hideMenu(),J.showDeleteResourceConfirm(e,t)}))},Export:function(e,t){return new J.Action((function(){J.exportDialog.openRepoDialog(e,t)}))},ShowProperties:function(e,t){return new J.Action((function(){J.showResourceProperties(e,t)}))},EditProperties:function(e,t){return new J.Action((function(){J.editResourceProperties(e,t)}))},AssignPermissionsToResourceAction:function(e,t){return new J.Action((function(){J.editResourcePermissions(e,t)}))},GenerateResourceAction:function(e,t){return new J.Action((function(){oe.hl.CreateReport.selectGenerator(e.URIString,t)}))},ConvertResourceAction:function(e,t){return new J.Action((function(){new J.ServerAction.createConvertAction(J.ResourceAction.CONVERT,{reportUri:e.URIString}).invokeAction()}))}},J.bulkActionFactory={Run:function(e){return new J.Action((function(){e.each((function(e,t){J.RedirectAction.createRunResourceAction(e,0!==t).invokeAction()}))}))},Edit:function(e){return new J.Action((function(){e.each((function(e,t){J.RedirectAction.createEditResourceAction(e,0!==t).invokeAction()}))}))},Open:function(e){return new J.Action((function(){e.each((function(t,o){J.RedirectAction.createOpenResourceAction(t,e.length>1).invokeAction()}))}))},Copy:function(e){return new J.Action((function(){J.CopyMoveController.copy(e)}))},Move:function(e){return new J.Action((function(){J.CopyMoveController.move(e)}))},Delete:function(e,t){return new J.Action((function(){m.Z.hideMenu(),1==e.length?J.showDeleteResourceConfirm(e[0],t):J.showBulkDeleteResourcesConfirm(e,t)}))},ShowProperties:function(e){return new J.Action((function(){e.each((function(t,o){O("ShowProperties",t,{cascade:!0,position:o,number:e.length})}))}))},EditProperties:function(e){return new J.Action((function(){e.each((function(t,o){O("EditProperties",t,{cascade:!0,position:o,number:e.length})}))}))},Export:function(e,t){return new J.Action((function(){J.exportDialog.openRepoDialog(e,t)}))}},J.ServerAction=function(e,t){this.actionURL="flow.html?_flowExecutionKey="+J.flowExecutionKey+"&_eventId="+e,this.data=Object.toQueryString(t.data)},J.ServerAction.addMethod("invokeAction",(function(){(0,ie.mc)(this.actionURL,{postData:this.data,callback:function(e){"OK"==e.status?this.onSuccess(e.data):this.onError(e.data)}.bind(this),errorHandler:this._serverErrorHandler,mode:ie.w8.prototype.EVAL_JSON})})),J.onFavoriteItem=function(e,t){return(0,re.Z)({url:e,type:"POST",headers:{Accept:"application/json","content-type":"application/json"},data:Object.toJSON({favorites:t})})},J.ServerAction.addMethod("initDownload",(function(){var e=this.actionURL+"&"+this.data;(0,c.CL_)(e,{onload:function(){var e=d()(d()("#ajax-download-iframe")[0].contentDocument.body).html();try{var t=e.evalJSON();alert(t.data)}catch(e){}}})})),J.ServerAction.addMethod("_serverErrorHandler",(function(e){return(0,ne.m0)(e)})),J.ServerAction.addMethod("onSuccess",c.cnY),J.ServerAction.addMethod("onError",c.cnY),J.ServerAction.createSearchAction=function(e,t){t.mode=J.mode;var o=new J.ServerAction(e,{data:t});return o.onSuccess=function(o){e==J.SearchAction.NEXT?J.fire(J.Event.RESULT_NEXT,o):e==J.SearchAction.GET_RESOURCE_CHILDREN?J.fire(J.Event.CHILDREN_LOADED,{inputData:t,responseData:o}):(J.fire(J.Event.RESULT_CHANGED,o),J.fire(J.Event.STATE_CHANGED,o),J.mode==J.Mode.SEARCH&&J.fire(J.Event.FILTER_PATH_CHANGED,o))},o.onError=function(e){J.fire(J.Event.RESULT_ERROR,e)},o},J.ServerAction.createFolderAction=function(e,t){var o,i,n;J.FolderAction.DELETE==e?(o={sourceFolderUri:t.folder.URI},i=J.FolderEvent.DELETED,n=J.FolderEvent.DELETE_ERROR):J.FolderAction.CREATE==e?(o={destFolderUri:t.toFolder.URI,folder:Object.toJSON({URI:"",label:t.label,desc:t.desc})},i=J.FolderEvent.CREATED,n=J.FolderEvent.CREATE_ERROR):J.FolderAction.COPY==e?(o={destFolderUri:t.toFolder.URI,sourceFolderUri:t.folder.URI},i=J.FolderEvent.COPIED,n=J.FolderEvent.COPY_ERROR):J.FolderAction.MOVE==e?(o={destFolderUri:t.toFolder.URI,sourceFolderUri:t.folder.URI},i=J.FolderEvent.MOVED,n=J.FolderEvent.MOVE_ERROR):J.FolderAction.UPDATE==e?(o={folder:Object.toJSON({URI:t.folder.URI,label:t.folder.label,desc:t.folder.description})},i=J.FolderEvent.UPDATED,n=J.FolderEvent.UPDATE_ERROR):J.ThemeAction.SETTHEME==e?(t.folder?o={folderUri:t.folder.URI}:t.folderUri&&(o={folderUri:t.folderUri}),i=J.ThemeEvent.UPDATED):J.ThemeAction.DOWNLOAD_THEME==e?(o={folderUri:t.folder.URI},n=J.ThemeEvent.THEME_ERROR):J.ThemeAction.REUPLOAD==e&&(o={themeName:t.themeName,folderUri:t.folderUri},i=J.ThemeEvent.REUPLOADED,n=J.ThemeEvent.THEME_ERROR),o&&i&&n||new Error("Unsupported folder action.");var r=new J.ServerAction(e,{data:o});return r.onSuccess=function(e){J.fire(i,{responseData:e,inputData:t}),a.Z.popup.hide(t.dialog)},r.onError=function(e){J.fire(n,{responseData:e,inputData:t}),a.Z.popup.hide(t.dialog)},r},J.ServerAction.createResourceAction=function(e,t){var o,i,n;if(J.ResourceAction.DELETE==e){var s=ee.getResourceUriAndTypeList(t.resources);o={selectedResources:Object.toJSON(s)},i=J.ResourceEvent.DELETED,n=J.ResourceEvent.DELETE_ERROR}else if(J.ResourceAction.COPY==e){var l=ee.getResourceUris(t.resources);o={selectedResources:Object.toJSON(l),destFolderUri:t.folder.URI},i=J.ResourceEvent.COPIED,n=J.ResourceEvent.COPY_ERROR}else if(J.ResourceAction.MOVE==e){var _=ee.getResourceUris(t.resources);o={selectedResources:Object.toJSON(_),destFolderUri:t.folder.URI},i=J.ResourceEvent.MOVED,n=J.ResourceEvent.MOVE_ERROR}else J.ResourceAction.UPDATE==e&&(o={selectedResource:Object.toJSON(t.resource)},i=J.ResourceEvent.UPDATED,n=J.ResourceEvent.UPDATE_ERROR);o&&i&&n||new Error("Unsupported resource action.");var d=new J.ServerAction(e,{data:o});function c(o){var i;if(J.ResourceAction.COPY!=e&&J.ResourceAction.MOVE!=e)return o;try{i=JSON.parse(o)}catch(e){return o}if(!i||!i.existingLabels)return o;var n=r().filter(t.resources,(function(e){return-1==i.existingLabels.indexOf(e.label)}));return 0===n.length?(1==i.existingLabels.length?J.getMessage("dialog.resources.one.exists"):J.getMessage("dialog.resources.all.exist"))+" "+t.folder.URIString:(function(o,i){a.Z.dependentResources.show(o,{dependenciesBtnOk:function(){new J.ServerAction.createResourceAction(e,{resources:i,folder:t.folder}).invokeAction()}},{buttons:["ok","cancel"],dialogTitle:J.getMessage("dialog.resources.exist.title"),topMessage:J.getMessage("dialog.resources.exist"),bottomMessage:J.getMessage("dialog.resources.exist.confirm.skip")})}(i.existingLabels,n),null)}return d.onSuccess=function(o){J.ResourceAction.MOVE==e&&J.CopyMoveController.cancel(),J.fire(i,{responseData:o,inputData:t})},d.onError=function(e){var o=c(e);o&&J.fire(n,{responseData:o,inputData:t})},d},J.ServerAction.createPermissionAction=function(e,t){var o=new J.ServerAction(e,{data:t}),i=e==J.PermissionAction.UPDATE?J.PermissionEvent.UPDATED:J.PermissionEvent.LOADED;return o.onSuccess=function(o){J.fire(i,{responseData:o,inputData:t,doSet:e!=J.PermissionAction.NEXT})},o.onError=function(e){J.fire(J.PermissionEvent.ERROR,e)},o},J.ServerAction.createGenerateAction=function(e,t){var o=new J.ServerAction(e,{data:{data:Object.toJSON(t)}});return o.actionURL="reportGenerator.html?action="+e,o.onSuccess=function(e){J.fire(J.ResourceEvent.GENERATED,{responseData:e,inputData:t})},o.onError=function(e){J.fire(J.ResourceEvent.GENERATE_ERROR,{responseData:e,inputData:t})},o},J.ServerAction.createConvertAction=function(e,t){var o=new J.ServerAction(e,{data:t});return o.actionURL="dataViewConverter.html?action="+e,o.onSuccess=function(e){J.fire(J.ResourceEvent.CONVERTED,{responseData:e,inputData:t})},o.onError=function(e){J.fire(J.ResourceEvent.CONVERT_ERROR,{responseData:e,inputData:t})},o},J.RedirectAction=function(e,t){this.DIMMER_TIMEOUT=400,this.type=e,this.flowId=t.flowId,this.url=t.url?t.url:this.flowId?this.FLOW_URL:void 0,this.paramsMap=t.paramsMap||{},this.hash=t.hash?"#"+t.hash:"",this.encode=t.encode,this.type!==J.RedirectType.FLOW_REDIRECT&&this.url===this.FLOW_URL&&(this.paramsMap._flowId=this.flowId)},J.RedirectAction.addMethod("FLOW_URL","flow.html"),J.RedirectAction.addMethod("_serializeParams",(function(e,t){if(e){var o="";for(var i in e)Object.isUndefined(i)||(o+="&"+i+"="+(t?encodeURIComponent(e[i]):e[i]));return o&&o.length>0?o.substring(1):""}return""})),J.RedirectAction.addMethod("invokeAction",(function(e){e=e||{};var t=d()("#"+ie.hj.LOADING_ID);if(t.length>0&&(t.addClass(u.Z.CANCELLABLE_CLASS),t.find("#cancel").click((function(){d()(this).addClass("disabled"),t.addClass("cancelCalled"),window.location.reload()}))),this.type===J.RedirectType.FLOW_REDIRECT){var o=d()("#redirectForm")[0];d()("#flowParams")[0].setValue(this.flowId+"?"+this._serializeParams(this.paramsMap,this.encode));var i=new J.ServerAction("isServerAvailable",{data:{}}),n=setTimeout((function(){a.Z.popup.show(ie.hj.LOADING_ID,!0)}),this.DIMMER_TIMEOUT);i.onSuccess=function(e){"Yes"==e.strip()?(++ie.hj.ajaxRequestCount,t.hasClass("cancelCalled")?t.removeClass("cancelCalled"):o.submit(),J.fire(J.Event.FLOW_REDIRECT_RUNNING,e)):(r(),J.fire(J.Event.REDIRECT_ERROR,e))},i.onError=function(e){r(),J.fire(J.Event.REDIRECT_ERROR,e)};var r=function(){clearTimeout(n),a.Z.popup.hide(ie.hj.LOADING_ID)};i.invokeAction()}else if(this.type===J.RedirectType.LOCATION_REDIRECT){var s=this.url+(d().isEmptyObject(this.paramsMap)?"":"?"+this._serializeParams(this.paramsMap,this.encode))+this.hash;e.isContentResource?(0,c.$Aw)(s):(0,c.nLk)(s)}else if(this.type===J.RedirectType.WINDOW_REDIRECT){var l=window.open(),_=this._serializeParams(this.paramsMap,this.encode);l.opener=null,l.document.location=this.url+(_?"?"+_:"")+this.hash}})),J.runActionFactory={ReportUnit:function(e,t){var o=t?J.RedirectType.WINDOW_REDIRECT:J.RedirectType.FLOW_REDIRECT;return new J.RedirectAction(o,{url:"flow.html",flowId:"viewReportFlow",paramsMap:{_flowId:"viewReportFlow",reportUnit:t?encodeURIComponent(e.URIString):e.URIString,standAlone:!0,ParentFolderUri:t?encodeURIComponent(e.parentFolder):e.parentFolder}})},AdhocReportUnit:function(e,t){var o=t?J.RedirectType.WINDOW_REDIRECT:J.RedirectType.FLOW_REDIRECT;return new J.RedirectAction(o,{url:"flow.html",flowId:"viewAdhocReportFlow",paramsMap:{reportUnit:t?encodeURIComponent(e.URIString):e.URIString,standAlone:!0,ParentFolderUri:t?encodeURIComponent(e.parentFolder):e.parentFolder}})},OlapUnit:function(e,t){var o=t?J.RedirectType.WINDOW_REDIRECT:J.RedirectType.LOCATION_REDIRECT;return new J.RedirectAction(o,{url:"olap/viewOlap.html",paramsMap:{name:t?encodeURIComponent(e.URIString):e.URIString,new:!0,parentFlow:"searchFlow",ParentFolderUri:t?encodeURIComponent(e.parentFolder):e.parentFolder}})},DashboardResource:function(e,t){var o=t?J.RedirectType.WINDOW_REDIRECT:J.RedirectType.FLOW_REDIRECT;return new J.RedirectAction(o,{url:"flow.html",flowId:"dashboardRuntimeFlow",paramsMap:{dashboardResource:t?encodeURIComponent(e.URIString):e.URIString}})},DashboardModelResource:function(e,t){var o=t?J.RedirectType.WINDOW_REDIRECT:J.RedirectType.LOCATION_REDIRECT;return new J.RedirectAction(o,{url:"dashboard/viewer.html#"+encodeURIComponent(e.URIString)})},ReportOptions:function(e,t){var o,i={reportOptionsURI:t?encodeURIComponent(e.URIString):e.URIString,standAlone:!0,ParentFolderUri:t?encodeURIComponent(e.parentFolder):e.parentFolder},n=e.parentResource;n&&n.typeEquals(J.ResourceType.ADHOC_REPORT_UNIT)?(o="viewAdhocReportFlow",i.reportUnit=t?encodeURIComponent(n.URIString):n.URIString):o="viewReportFlow";var r=t?J.RedirectType.WINDOW_REDIRECT:J.RedirectType.FLOW_REDIRECT;return new J.RedirectAction(r,{url:"flow.html",flowId:o,paramsMap:i})}},J.RedirectAction.createRunResourceAction=function(e,t){e||(e=e||J.model.getSelectedResources()[0]);var o=J.runActionFactory[e.typeSuffix()];return o?o(e,t):new J.Action((function(){alert("Run action for resource type '"+e.resourceType+"' is not implemented!")}))},J.RedirectAction.createRunResourceInNewTabAction=function(e,t){return J.RedirectAction.createRunResourceAction(e,!0)},J.editActionFactory={"default-action":function(e,t){return ee.isCustomDataSource(e)?J.editActionFactory.JdbcReportDataSource(e,t):new J.Action((function(){alert("Edit action for resource type '"+e.resourceType+"' is not implemented!")}))},ReportUnit:function(e,t){return new J.RedirectAction(t,{flowId:"reportUnitFlow",paramsMap:{selectedResource:e.URIString,ParentFolderUri:e.parentFolder}})},AdhocReportUnit:function(e,t){return J.editActionFactory.ReportUnit(e,t)},DataDefinerUnit:function(e,t){return new J.RedirectAction(t,{flowId:"queryBuilderFlow",paramsMap:{uri:e.URIString,ParentFolderUri:e.parentFolder}})},OlapUnit:function(e,t){return new J.RedirectAction(t,{flowId:"olapUnitFlow",paramsMap:{resource:e.URIString,isEdit:"edit",ParentFolderUri:e.parentFolder}})},DashboardResource:function(e,t){return new J.RedirectAction(t,{flowId:"dashboardRuntimeFlow",paramsMap:{dashboardResource:e.URIString}})},ReportOptions:function(e,t){return new J.RedirectAction(t,{flowId:"reportOptionsEditFlow",paramsMap:{reportOptionsURI:e.URIString,ParentFolderUri:e.parentFolder}})},JdbcReportDataSource:function(e,t){return new J.RedirectAction(t,{flowId:"addDataSourceFlow",paramsMap:{resource:e.URIString,ParentFolderUri:e.parentFolder}})},JndiJdbcReportDataSource:function(e,t){return J.editActionFactory.JdbcReportDataSource(e,t)},CustomReportDataSource:function(e,t){return J.editActionFactory.JdbcReportDataSource(e,t)},BeanReportDataSource:function(e,t){return J.editActionFactory.JdbcReportDataSource(e,t)},VirtualReportDataSource:function(e,t){return J.editActionFactory.JdbcReportDataSource(e,t)},HiveDataSourceService:function(e,t){return J.editActionFactory.JdbcReportDataSource(e,t)},CassandraDataSourceService:function(e,t){return J.editActionFactory.JdbcReportDataSource(e,t)},DiagnosticCustomDataSourceService:function(e,t){return J.editActionFactory.JdbcReportDataSource(e,t)},MongoDbDataSourceService:function(e,t){return J.editActionFactory.JdbcReportDataSource(e,t)},AwsReportDataSource:function(e,t){return J.editActionFactory.JdbcReportDataSource(e,t)},AzureSqlReportDataSource:function(e,t){return J.editActionFactory.JdbcReportDataSource(e,t)},Query:function(e,t){return new J.RedirectAction(t,{flowId:"queryFlow",paramsMap:{currentQuery:e.URIString,isEdit:!0,ParentFolderUri:e.parentFolder}})},InputControl:function(e,t){return new J.RedirectAction(t,{flowId:"addInputControlFlow",paramsMap:{isEdit:!0,resource:e.URIString,ParentFolderUri:e.parentFolder}})},ListOfValues:function(e,t){return new J.RedirectAction(t,{flowId:"addListOfValuesFlow",paramsMap:{resource:e.URIString,isEdit:"edit",ParentFolderUri:e.parentFolder}})},DataType:function(e,t){return new J.RedirectAction(t,{flowId:"dataTypeFlow",paramsMap:{resource:e.URIString,isEdit:"edit",ParentFolderUri:e.parentFolder}})},MondrianConnection:function(e,t){return new J.RedirectAction(t,{flowId:"olapClientConnectionFlow",paramsMap:{selectedResource:e.URIString,isEdit:"edit",ParentFolderUri:e.parentFolder}})},SecureMondrianConnection:function(e,t){return J.editActionFactory.MondrianConnection(e,t)},XMLAConnection:function(e,t){return J.editActionFactory.MondrianConnection(e,t)},MondrianXMLADefinition:function(e,t){return new J.RedirectAction(t,{flowId:"mondrianXmlaSourceFlow",paramsMap:{selectedResource:e.URIString,isEdit:"edit",ParentFolderUri:e.parentFolder}})},FileResource:function(e,t){return new J.RedirectAction(t,{flowId:"addFileResourceFlow",paramsMap:{selectedResource:e.URIString,ParentFolderUri:e.parentFolder}})},SemanticLayerDataSource:function(e,t){return new J.RedirectAction(t,{url:"domaindesigner.html",paramsMap:{uri:e.URIString,ParentFolderUri:e.parentFolder}})}},J.resourceTypeToDefaultRedirectTypeMap={},J.resourceTypeToDefaultRedirectTypeMap[J.ResourceType.SEMANTIC_LAYER_DATA_SOURCE]=J.RedirectType.LOCATION_REDIRECT,J.getDefaultRedirectTypeByResourceType=function(e){var t=J.resourceTypeToDefaultRedirectTypeMap[e];return t||(t=J.RedirectType.FLOW_REDIRECT),t},J.RedirectAction.createEditResourceAction=function(e,t){var o;e||(e=J.model.getSelectedResources()[0]),o=t?J.RedirectType.WINDOW_REDIRECT:J.getDefaultRedirectTypeByResourceType(e.resourceType);var i=J.editActionFactory[e.typeSuffix()];return i?i(e,o):J.editActionFactory[J.Action.DEFAULT](e,o)},J.openActionFactory={ContentResource:function(e,t){return t===J.RedirectType.FLOW_REDIRECT&&(t=J.RedirectType.LOCATION_REDIRECT),new J.RedirectAction(t,{url:"fileview/fileview"+e.URIString,paramsMap:{}})},DashboardResource:function(e,t){return new J.RedirectAction(t,{flowId:"dashboardDesignerFlow",paramsMap:{resource:e.URIString,ParentFolderUri:e.parentFolder}})},DashboardModelResource:function(e,t){var o=t?J.RedirectType.WINDOW_REDIRECT:J.RedirectType.LOCATION_REDIRECT;return new J.RedirectAction(o,{url:"dashboard/designer.html#"+encodeURIComponent(e.URIString)})},DataDefinerUnit:function(e,t){return new J.RedirectAction(t,{flowId:"queryBuilderFlow",paramsMap:{uri:e.URIString,ParentFolderUri:e.parentFolder}})},AdhocReportUnit:function(e,t){return new J.RedirectAction(t,{flowId:"adhocFlow",paramsMap:{resource:e.URIString,ParentFolderUri:e.parentFolder}})},AdhocDataView:function(e,t){return new J.RedirectAction(t,{flowId:"adhocFlow",paramsMap:{resource:e.URIString,ParentFolderUri:e.parentFolder}})}},J.RedirectAction.createOpenResourceAction=function(e,t){e||(e=J.model.getSelectedResources()[0]);var o=t?J.RedirectType.WINDOW_REDIRECT:J.RedirectType.FLOW_REDIRECT,i=J.openActionFactory[e.typeSuffix()];return i?i(e,o):new J.Action((function(){alert("Open action for resource type '"+e.resourceType+"' is not implemented!")}))},J.RedirectAction.createRunInBackgroundResourceAction=function(){var e=J.model.getSelectedResources()[0],t="";if(e.resourceType.endsWith(".ReportUnit")||e.resourceType.endsWith(".AdhocReportUnit")||e.resourceType.endsWith(".DashboardModelResource")||e.resourceType.endsWith(".ReportOptions"))return e.parentResource&&(t="@@parentReportURI="+e.parentResource.URIString+"@@"),new J.RedirectAction(J.RedirectType.LOCATION_REDIRECT,{url:oe.hl.vars.contextPath+"/scheduler/main.html",paramsMap:{reportUnitURI:e.URIString,parentReportUnitURI:e.parentResource?e.parentResource.URIString:"",resourceType:e.resourceType.substring(e.resourceType.lastIndexOf(".")+1)},hash:"runInBackground@"+e.URIString+t,encode:!0})},J.RedirectAction.createScheduleAction=function(){var e=J.model.getSelectedResources()[0],t="";if(e.resourceType.endsWith(".ReportUnit")||e.resourceType.endsWith(".AdhocReportUnit")||e.resourceType.endsWith(".DashboardModelResource")||e.resourceType.endsWith(".ReportOptions"))return e.parentResource&&(t="@@parentReportURI="+e.parentResource.URIString+"@@"),new J.RedirectAction(J.RedirectType.LOCATION_REDIRECT,{url:oe.hl.vars.contextPath+"/scheduler/main.html",paramsMap:{reportUnitURI:e.URIString,resourceType:e.resourceType.substring(1+e.resourceType.lastIndexOf(".")),parentReportUnitURI:e.parentResource?e.parentResource.URIString:""},hash:e.URIString+t,encode:!0})},J.createActionFactory={OlapClientConnection:function(e){return new J.RedirectAction(J.RedirectType.FLOW_REDIRECT,{flowId:"olapClientConnectionFlow",paramsMap:{ParentFolderUri:e.URI}})},OlapUnit:function(e){return new J.RedirectAction(J.RedirectType.FLOW_REDIRECT,{flowId:"olapUnitFlow",paramsMap:{ParentFolderUri:e.URI}})},ReportDataSource:function(e){return new J.RedirectAction(J.RedirectType.FLOW_REDIRECT,{flowId:"addDataSourceFlow",paramsMap:{ParentFolderUri:e.URI}})},SemanticLayerDataSource:function(e){return new J.RedirectAction(J.RedirectType.LOCATION_REDIRECT,{url:"domaindesigner.html",paramsMap:{ParentFolderUri:e.URI}})},FileResource:function(e,t){return new J.RedirectAction(J.RedirectType.FLOW_REDIRECT,{flowId:"addFileResourceFlow",paramsMap:{expectedFileType:t,parentFolder:e.URI}})},ReportUnit:function(e){return new J.RedirectAction(J.RedirectType.FLOW_REDIRECT,{flowId:"reportUnitFlow",paramsMap:{ParentFolderUri:e.URI}})},Query:function(e){return new J.RedirectAction(J.RedirectType.FLOW_REDIRECT,{flowId:"queryFlow",paramsMap:{ParentFolderUri:e.URI}})},InputControl:function(e){return new J.RedirectAction(J.RedirectType.FLOW_REDIRECT,{flowId:"addInputControlFlow",paramsMap:{ParentFolderUri:e.URI}})},DataType:function(e){return new J.RedirectAction(J.RedirectType.FLOW_REDIRECT,{flowId:"dataTypeFlow",paramsMap:{ParentFolderUri:e.URI}})},ListOfValues:function(e){return new J.RedirectAction(J.RedirectType.FLOW_REDIRECT,{flowId:"addListOfValuesFlow",paramsMap:{ParentFolderUri:e.URI}})},XMLAConnection:function(e){return new J.RedirectAction(J.RedirectType.FLOW_REDIRECT,{flowId:"mondrianXmlaSourceFlow",paramsMap:{ParentFolderUri:e.URI}})}},J.RedirectAction.createCreateResourceAction=function(e,t){var o=J.model.getContextFolder(),i=J.createActionFactory[e];return i?i(o,t):new J.Action((function(){alert("Create action for resource type suffix '"+e+"' is not implemented!")}))},J.confirmAndLeave=function(){return new J.Action((function(){return!q()&&!$()||confirm(J.getMessage("RM_CANCEL_EDIT_MESSAGE"))})).invokeAction()};const se=J;var ae=o(72861),le=o(56461),_e=o(9231),de=o(40574),ce=o(46539),ue=o(11364),he=o(45186),Ee=o(84581),pe=o(63739),me=o(76144),fe=o(31371);function ge(e){return r().isArray(e)||(e=[e]),!!r().reduce(e,(function(e,t){return e||!t.resourceType||t.resourceType.indexOf("ReportUnit")+1||t.resourceType.indexOf("ReportOptions")+1}),!1)}const Re=i.Z.extend({constructor:function(e){e||(e={}),this.options=e,i.Z.prototype.constructor.call(this,{model:this.model,resizable:!0,modal:!0,content:"",buttons:[{label:s.Z["button.export"],action:"export",primary:!0},{label:s.Z["button.cancel"],action:"cancel",primary:!1}]}),this.on("button:export",r().bind(this._onExportButtonClick,this)),this.on("button:cancel",r().bind(this._closeExportDialog,this))},initialize:function(e){this.exportView=new pe.Z,this.listenTo(this.exportView.model,"validated",(function(e){e?this.buttons.enable("export"):this.buttons.disable("export")}),this),i.Z.prototype.initialize.apply(this,arguments)},openRepoDialog:function(e,t){var o,i=t&&("mouseup"===t.type&&t.target.ancestors().filter((function(e){return e.hasClassName("selected")}))[0]||"dataavailable"===t.type&&t.target),n=(o=e,r().isArray(o)?r().pluck(o,"URIString"):[o.URIString]),s=f.Z.organizationsFolderUri||"/organizations",a=f.Z.orgTemplateFolderUri||"/org_template",l=new RegExp("^("+s+"/([^/]+))+"),_=new RegExp("^"+s+a+"(/.*)?"),d=!!l.exec(n[0])&&!_.exec(n[0]),c={type:fe.Z.REPOSITORY,isSubOrgLevel:d},u=" "+me.Z["export.dialog.repository.title"];this.addCssClasses("repository-export-dialog"),this._openExportDialog(c,u,i),this.exportView.model.set({uris:n,includeScheduledReportJobs:ge(e)})},openTenantDialog:function(e){var t=" "+e.name,o={type:e.isRoot()?fe.Z.ROOT_TENANT:fe.Z.TENANT,tenantId:e.id};this.addCssClasses("tenant-export-dialog"),this._openExportDialog(o,t)},fieldIsValid:function(){},fieldIsInvalid:function(e){},_onExportButtonClick:function(){this.exportView.doExport(),this._closeExportDialog()},_closeExportDialog:function(){this.$el.css({width:this.width}),this.close(),this.$el.find(".export-view").html("")},_openExportDialog:function(e,t,o){var n=me.Z["export.dialog.title"]+(t||"");this.setContent(this.exportView.render(e).$el),this.setTitle(n),this.setReturnFocus(o),this.exportView.applyEpoxyBindings(),this.exportView.delegateEvents(),i.Z.prototype.open.apply(this,arguments),this.$el.css({minHeight:this.$el.outerHeight()}),this.width=this.$el.outerWidth()}});o(79312);var Ae=function(){var e;return(e=window).canBeRun.apply(e,arguments)},Te=function(){var e;return(e=window).canBeOpened.apply(e,arguments)};J.exportDialog=new Re,J.exportDialog.render({type:fe.Z.REPOSITORY}),J.secondarySearchBox={_searchBox:null,initialize:function(e){this._searchBox=new _e.Z({id:"secondarySearchBox"}),this._searchBox.onSearch=function(e){J.fire(J.Event.SEARCH_SEARCH,{text:e})},this.setText(e)},setText:function(e){this._searchBox.setText(e)}},J.favoriteSwitchControl={_containerId:"favorites-only",initialize:function(e){var t,o;this._container=d()("#"+this._containerId)[0],(null===(t=e.state)||void 0===t||null===(o=t.customFilters)||void 0===o?void 0:o.favoriteFilter)===J.ResourcesFavoriteAction.FAVORITE_RESOURCES&&(this._container.checked=!0),this._container.onclick=function(){J.fire(J.Event.SEARCH_FILTER,{filterId:J.ResourcesFavoriteAction.FILTER_ID,optionId:this.checked?J.ResourcesFavoriteAction.FAVORITE_RESOURCES:J.ResourcesFavoriteAction.ALL_RESOURCES})}}},J.toolbar={_bulkActions:{},initialize:function(e){this._bulkActions=e,de.Z.initialize(this._toActionMap(this._bulkActions)),this.refresh()},refresh:function(){for(var e in this._bulkActions){var t=this._bulkActions[e].buttonId,o=(0,c.J$4)(this._bulkActions[e].test);de.Z.setButtonState(d()("#"+t)[0],o())}},_toActionMap:function(e){var t={};for(var o in e){var i=e[o];t[i.buttonId]=function(e,t){return function(){var o=(0,c.qO$)(e),i=t,n=window.localContext&&window.localContext[e];i&&(0,c.kJL)(i)?o.apply(n?window.localContext:null,i):o.call(n?window.localContext:null,i)}}(i.action,i.actionArgs)}return t}},J.foldersPanel={_treeId:"foldersTree",_uri:"/",_cookieName:"lastFolderUri",_canDoBrowse:!0,_touchController:null,_browseRepoTimer:null,initialize:function(e){if(e.isFolderSet)this._uri=e.state.folderUri;else{var t=window.localStorage?localStorage.getItem(this._cookieName):void 0;this._uri=t&&t.length>0?t:"/"}return this._container=d()("#"+this.getTreeId()).parents().eq(1),this.tree=new ce.Z.createRepositoryTree(this.getTreeId(),{providerId:"repositoryExplorerTreeFoldersProvider",rootUri:J.model.getRootFolderUri(),organizationId:e.organizationId,publicFolderUri:e.publicFolderUri,urlGetNode:"flow.html?_flowId=searchFlow&method=getNode",urlGetChildren:"flow.html?_flowId=searchFlow&method=getChildren",dragPattern:".draggable",selectOnMousedown:!1,escapeHyperlinks:!0}),(0,c.c4K)(d()("#"+this.getTreeId()).parents().eq(1)),this.tree.observe("tree:contextMenu",(function(e){var t=e.memo.node,o=d()(t).closest("li").find("p").text(),i=(0,c.Qyk)(e.memo.focused,!0);J.model.setContextFolder(new Q(e.memo.node)),J.actionModel.showFolderMenu(e,{menuLeft:i[0]+100,menuTop:i[1]+20},o),Event.stop(e),m.Z.focusMenu()})),this.tree.observe("tree:mouseover",function(e){this.tree._overNode=e.memo.node}.bindAsEventListener(this)),this.tree.observe("tree:mouseout",function(e){this.tree.refreshDropTarget(!1),this.tree._overNode==e.memo.node&&(this.tree._overNode=null)}.bindAsEventListener(this)),this.tree.setDragStartState=function(e,t,o){ce.Z.Tree.prototype.setDragStartState.call(this,e,t,o);var i=new Q(e);(0,c.yHG)(o,!0)?(b(i)&&I("CopyFolder",i),d()(document.body).addClass(u.Z.COPY_CLASS)):U(i)&&I("MoveFolder",i)},this.tree.setDragEndState=function(e,t,o){J.CopyMoveController.cancel(),this.refreshDropTarget(!1),d()(document.body).removeClass(u.Z.COPY_CLASS),ce.Z.Tree.prototype.setDragEndState.call(this,e,t,o)},this.tree.refreshDropTarget=function(e){this._overNode&&(this._overNode.isDropTarget=e,this._overNode.refreshStyle())},ae.m9.remove(this.getTreeId()),ae.m9.add(this.getTreeId(),{accept:["dragging","wrap"],onHover:function(e,t,o){if(this.tree._overNode){var i=new Q(this.tree._overNode),n=e.node&&w(i)||e.items&&j(i);this.tree.refreshDropTarget(n)}}.bind(this),onDrop:function(e,t,o){var i;if(ae.Mw.supportsTouch){var n=o.changedTouches[0];i=this.tree.getTreeNodeByElement(d()("#"+document.elementFromPoint(n.pageX,n.pageY))[0])}else i=this.tree.getTreeNodeByEvent(o);if(i&&(this.tree._overNode=i),this.tree._overNode){var r=new Q(this.tree._overNode);e.node&&w(r)&&I("PasteFolder",r),e.items&&j(r)&&I("PasteResources",r)}}.bind(this)}),this.tree.observe("server:error",(function(){window.console&&alert("Tree load error.")})),this.tree.observe("childredPrefetched:loaded",function(e){this.tree.openAndSelectNode(this._uri)}.bindAsEventListener(this)),this.tree.observe("tree:loaded",function(e){this._canDoBrowse=!1,"/"===this._uri?this.tree.rootNode.name?d()(this.tree.rootNode).select():d()(this.tree.rootNode.getFirstChild()).select():this.tree.openAndSelectNode(this._uri),this._canDoBrowse=!0;var t=this.tree.getSelectedNode();t&&t.scroll(d()("#"+this._treeId)[0].parentNode),this.doBrowse()}.bindAsEventListener(this)),this.tree.observe("node:selected",function(e){this._uri=e.memo.node.param.uri,window.localStorage&&localStorage.setItem(this._cookieName,this._uri),J.model.setSelectedFolder(new Q(e.memo.node)),this.doBrowse()}.bindAsEventListener(this)),this.tree.observe("node:mouseup",(function(e){J.model.setContextFolder(new Q(e.memo.node))})),this.tree.showTreePrefetchNodes(this._uri),this},doBrowse:function(){var e=this,t=this;this._canDoBrowse&&(clearTimeout(this._browseRepoTimer),this._browseRepoTimer=setTimeout((function(){e._browseRepoTimer=void 0,J.fire(J.Event.SEARCH_BROWSE,{uri:t._uri})}),0))},getSelectedUri:function(){return this._uri},getTreeId:function(){return this._treeId},selectFolder:function(e){this.tree.openAndSelectNode(e.URI,null,null,{shouldFocus:!0})},reselectFolder:function(e){e.node.isSelected()&&(e.node.deselect(),e.node.select())},refreshFolder:function(e){this.selectFolder(e),this.updateSubFolders(e)},createAndSelectFolder:function(e,t){return this.tree.getTreeNodeChildren(t.node,function(t){t&&this.tree.openAndSelectNode(e.URI,null,null,{shouldFocus:!0})}.bind(this))},updateFolder:function(e,t,o){e.label=t,e.description=o,e.node.changeName(e.label),e.node.param.extra.desc=e.description,this.tree.resortSubtree(e.node.parent),e.node.parent.refreshNode()},updateSubFolders:function(e){e.node.hasChilds()||e.node.setHasChilds(!0),e.node.isOpen()&&e.node.handleNode(),e.node.isloaded=!1,e.node.handleNode()},isFolderContextMenu:function(e){return this.tree.getTreeNodeByEvent(e)&&!this.tree.isIconEvent(e)},moveOrCopyFolder:function(e,t,o){var i=e.getParentFolder().node;return o||i.removeChild(e.node),this.tree.getTreeNodeChildren(t.node,function(t){if(t){var o=t.detect((function(t){return t.param.id==e.name}));o&&this.tree.openAndSelectNode(o.param.uri,null,null,{shouldFocus:!0})}}.bind(this))}},J.resultsPanel={_list:null,_infiniteScroll:null,_resultListHeaderId:"resultsListHeader",_resultListId:"resultsList",_resultsContainerId:"resultsContainer",_touchScroller:null,_folderDisplayPathCache:{},NOTHING_TO_DISPLAY_ID:"nothingToDisplay",RESOURCE_NAME_TOOLTIP_ID:"resourceNameTooltip",NAME_PATTERN:".resourceName",LINK_NAME_PATTERN:".resourceName > a",DISCLOSURE_PATTERN:".disclosure",SCHEDULED_PATTERN:".scheduled",FAVORITE_PATTERN:".favorite",LOADING_CLASS_NAME:"loading",initialize:function(e){var t=this;this._container=d()("#"+this._resultListId).parents(),this._header=d()("#"+this._resultListHeaderId)[0],this._list=new le.W.List(this._resultListId,{listTemplateDomId:"tabular_fourColumn_resources",itemTemplateDomId:"tabular_fourColumn_resources:leaf",dragPattern:e.enableDnD?".draggable":"",multiSelect:!0,selectOnMousedown:!(0,c.zcy)()}),this._intiListEvents(),this._initDnD(),this.getList().show(),(0,c.MEy)()&&(this._touchController=new ue.Z(document.getElementById(this._resultListId),document.getElementById(this._resultsContainerId),{scrollbars:!0}),d()("#"+this._resultListId).on("layout_update orientationchange",(function(){d()("#"+t._resultListId).css("min-width",d()("#"+t._resultsContainerId).width()+"px"),d()("#"+t._resultListId).width(d()("#"+t._resultsContainerId).width())}))),(0,c.zcy)()?this._infiniteScroll=new he.Z({id:this._container[0].identify(),contentId:this._resultListId,scroll:this._touchController}):this._infiniteScroll=new he.Z({id:this._container[0].identify(),contentId:this._resultListId}),this._infiniteScroll.onLoad=function(){J.fire(J.Event.SEARCH_NEXT)},(0,c.c4K)(this._container);var o=this._toggleInfiniteScrollBasedOnViewportHeight.bind(this);return Event.observe(d()(window)[0],"resize",r().debounce(o,250)),this._fixHeaderWidth(),this},_fixHeaderWidth:function(){(0,c.zcy)()||this._header.setStyle({marginRight:this._container[0].getWidth()-d()("#"+this._resultListId)[0].getWidth()+"px"})},_createResourceItem:function(e){var t;e.hasChildren?(t=new le.W.CompositeItem({cssClassName:u.Z.NODE_CLASS,label:e.label,value:e,openHandlerPattern:".disclosure.icon",closeHandlerPattern:".disclosure.icon",favoriteIconPattern:".favorite.icon",scheduleIconPattern:".scheduled.icon",excludeFromSelectionTriggers:[".disclosure.icon",".favorite.icon"],listOptions:{listTemplateDomId:"tabular_fourColumn_resources_sublist",itemTemplateDomId:"tabular_fourColumn_resources_sublist:leaf",multiSelect:!0}})).setLoading=function(e){this.isLoading=e,this.refreshStyle(),J.resultsPanel.refresh()}:t=new le.W.ListItem({cssClassName:u.Z.LEAF_CLASS,label:e.label,value:e,favoriteIconPattern:".favorite.icon",scheduleIconPattern:".scheduled.icon",excludeFromSelectionTriggers:[".favorite.icon"]}),t.processTemplate=function(e){var t=Ae(this.getValue())||Te(this.getValue())?J.resultsPanel.LINK_NAME_PATTERN:J.resultsPanel.NAME_PATTERN,o=d()(e).find(t)[0],i=e.select(J.resultsPanel.NAME_PATTERN)[0],n=d()(e).find(".resourceDescription")[0];o.update(g.Z.hardEscape(this.getValue().label));var r=this;new Ee.p(i,{text:[g.Z.hardEscape(this.getValue().label),g.Z.hardEscape(J.messages.loading)],templateId:J.resultsPanel.RESOURCE_NAME_TOOLTIP_ID,loadTextCallback:function(e){var t,o=r.getValue().parentFolder,i=J.resultsPanel._folderDisplayPathCache[o];function n(o,i,n){i=g.Z.hardEscape(i),t=g.Z.hardEscape(function(e,t){var o=J.model.getFolderSeparator();return e===o?e+t:e+o+t}(o,n)),e.updateText([i,t])}if(i)n(i,r.getValue().label,r.getValue().name);else{var s=new J.ServerAction(J.InfoAction.GET_DISPLAY_PATH,{data:{resourceUri:o,isFolder:!0}});s.onSuccess=function(e){J.resultsPanel._folderDisplayPathCache[o]=e,n(e,r.getValue().label,r.getValue().name)},s.onError=J.defaultErrorHandler,s.invokeAction()}}});var s=this.getValue().description;n.update(g.Z.hardEscape(s)),s?new Ee.p(n,{text:s}):n.jsTooltip&&n.jsTooltip.disable();var a=e.select(".resourceType")[0],l=d()(e).find(".modifiedDate")[0],_=d()(e).find(".createdDate")[0],c=d()(e).find(".scheduled")[0],u=d()(e).find(".favorite")[0];return a.update(this.getValue().type),l.update(this.getValue().updateDate),new Ee.p(l,{text:this.getValue().updateDateTime}),_.update(this.getValue().date),new Ee.p(_,{text:this.getValue().dateTime}),new Ee.p(c,{text:A.Z["schedule.tooltip"]}),new Ee.p(u,{text:A.Z["favorite.tooltip"]}),d()(o).attr("aria-label",g.Z.hardEscape(this.getValue().label)),d()(_).attr("aria-label",g.Z.hardEscape(this.getValue().date+" "+this.getValue().dateTime)),d()(l).attr("aria-label",g.Z.hardEscape(this.getValue().updateDate+" "+this.getValue().updateDateTime)),e};var o=t.refreshStyle;return t.refreshStyle=function(){o.call(this);var e=this._getElement(),t=this.getValue().label+", "+this.getValue().type;this.getValue().isScheduled&&(d()(e).addClass(u.Z.SCHEDULED_CLASS),t=t+", "+A.Z["schedule.tooltip"]),this.getValue().isFavorite&&(d()(e).addClass(u.Z.FAVORITE_CLASS).find('[role="checkbox"]').first().attr("aria-checked",!0),t=t+", "+A.Z["favorite.tooltip"]),this.isLoading&&d()(e).addClass(u.Z.LOADING_CLASS),d()(e).attr("aria-label",g.Z.hardEscape(t))},t},_initDnD:function(){var e=this.getList();e.setDragStartState=function(e,t,o){le.W.List.prototype.setDragStartState.call(this,e,t,o),(0,c.yHG)(o,!0)&&d()(document.body).addClass(u.Z.COPY_CLASS).setStyle({cursor:null}),C((0,c.yHG)(o,!0)?"Copy":"Move")},e.setDragEndState=function(e,t,o){J.CopyMoveController.cancel(),J.foldersPanel.tree.refreshDropTarget(!1),d()(document.body).removeClass(u.Z.COPY_CLASS),le.W.List.prototype.setDragEndState.call(this,e,t,o)}},_intiListEvents:function(){this.getList().observe("item:click",function(e){var t=e.memo.item,o=e.memo.targetEvent,i=t.getValue();if(this._isLinkEvent(o)&&(Ae(i)?M("RunResourceAction"):f.Z.isProVersion?Te(i)&&M("OpenResourceAction",{isContentResource:window.isContentResource(i)}):Te(i)&&M("OpenResourceAction")),this._isScheduleIconEvent(o)&&function(){var e;return(e=window).canBeScheduled.apply(e,arguments)}(i)&&M("ScheduleAction"),this._isFavoriteIconClicked(o)){var n=d()(t._element);J.addToFavorite([i],n)}}.bindAsEventListener(this)),this.getList().observe("item:selected",function(e){this._selectOrUnselectResources(e)}.bindAsEventListener(this)),this.getList().observe("item:unselected",function(e){this._selectOrUnselectResources(e)}.bindAsEventListener(this)),this.getList().observe("item:mouseup",(function(e){})),this.getList().observe("item:open",function(e){var t=e.memo.item,o=t.getValue();o.isLoaded()||(t.setLoading(!0),J.fire(J.Event.SEARCH_CHILDREN,{resource:o,item:t})),this.refresh()}.bindAsEventListener(this)),this.getList().observe("item:closed",function(e){this.refresh()}.bindAsEventListener(this)),this.getList().observe("key:contextMenu",function(e){var t=e.memo.node,o=(0,c.Qyk)(t,!0),i={menuLeft:o[0]+100,menuTop:o[1]+20};this.getList().getSelectedItems().length>1?J.actionModel.showResourceBulkMenu(e,i):J.actionModel.showResourceMenu(e,i),Event.stop(e),m.Z.focusMenu()}.bindAsEventListener(this))},_selectOrUnselectResources:function(e){var t=e.memo.item,o=t.getValue(),i=d()(t._element),n=this.getList().getSelectedItems().collect((function(e){return e.getValue()}));o.isFavorite&&i.addClass(u.Z.FAVORITE_CLASS),J.model.setSelectedResources(n),J.actionModel.refreshToolbar()},_isLinkEvent:function(e){var t=Event.element(e);return null!=(0,c.BwZ)(t,[this.LINK_NAME_PATTERN])},_isScheduleIconEvent:function(e){var t=Event.element(e);return d()(t).is(this.SCHEDULED_PATTERN)},_isFavoriteIconClicked:function(e){var t=Event.element(e);return d()(t).is(this.FAVORITE_PATTERN)},_isDisclosureEvent:function(e){var t=Event.element(e);return null!=(0,c.BwZ)(t,[this.DISCLOSURE_PATTERN])},_refreshEmptyListMessage:function(){var e=d()("#"+this.NOTHING_TO_DISPLAY_ID)[0];0===this._list.getItems().length?(d()(e).removeClass(u.Z.HIDDEN_CLASS),(0,c.wyW)(e,{horz:!0,vert:!0})):d()(e).addClass(u.Z.HIDDEN_CLASS)},_toggleInfiniteScrollBasedOnViewportHeight:function(){this._isListHeightLessThanViewport()?this._infiniteScroll.onLoad():(this.refresh(),this._infiniteScroll.stopWaiting())},_isListHeightLessThanViewport:function(){return this.getList()._element.clientHeight<document.body.clientHeight},getList:function(){return this._list},removeResources:function(e){var t=e.findAll((function(e){return e.isChild})),o=e.findAll((function(e){return!e.isChild})),i=this.getList().getItems(),n=[],r=[];i.each((function(e){e.isComposite&&r.push(e),o.include(e.getValue())&&n.push(e)})),r.each((function(e){e.getItems()&&e.removeItems(e.getItems().findAll((function(e){return t.include(e.getValue())})))})),this.getList().removeItems(n),this._refreshEmptyListMessage(),this.refresh()},_renderHeader:function(){var e=d()(this._header).find("li").clone();d()("#"+this._resultListId).prepend(e)},setResources:function(e,t){var o=e.collect(this._createResourceItem),i=this.getList();t?(t.setItems(o),t.refresh()):(this._infiniteScroll&&this._infiniteScroll.reset(),i.setItems(o),i.show(),this._renderHeader(),this._refreshEmptyListMessage()),this._isListHeightLessThanViewport()&&Ee.k.disableTooltips(),o.length>0&&this._toggleInfiniteScrollBasedOnViewportHeight();var n=new CustomEvent("".concat(i._id,":loaded"));i._element.dispatchEvent(n)},addResources:function(e){var t=e.collect(this._createResourceItem);Ee.k.disableTooltips(),this.getList().addItems(t),this.getList().refresh(),this._renderHeader(),t.length>0&&(this._toggleInfiniteScrollBasedOnViewportHeight(),Ee.k.enableTooltips())},isResourceContextMenu:function(e){return this.getList().getItemByEvent(e)},updateResource:function(e){this.getList().getItems().each(function(t){t.getValue().URIString==e.URIString&&(t.setValue(e),t.refresh(),this.getList().isItemSelected(t)&&this.getList().selectItem(t))}.bind(this))},findResource:function(e){var t=this.getList().getItems().detect((function(t){return t.getValue().URIString===e}));return t?t.getValue():null},refresh:function(){this._fixHeaderWidth(),Ee.k.cleanUp()}},J.filtersPanel={_id:"filtersPanel",_container:void 0,_filtersLists:{},_cookieName:"filtersPopularity",_ignoreFilterEvent:!1,initialize:function(e,t){for(var o in e.each(function(e,t){var o=d()(this._getContainer().childElements()[t]);o.find(".subcontainer.ui-resizable")[0].insert(new Element("ul",{id:e.id,"data-tab-index":5+t,"data-component-type":"list"}));var i=this._createFiltersList(e.id,e);i.show(),this._filtersLists[e.id]=i,o.find(".buttonIconToggle").on("click",this._buttonToggleListener.bindAsEventListener(this._container.children[t]))[0]}.bind(this)),t)this.select(o,t[o]);return(0,c.MEy)()&&(this._touchController=new ue.Z(document.getElementById(this._id),d()("#"+this._id).parents())),this},_buttonToggleListener:function(e){d()(this).hasClass("open")?(d()(this).addClass("closed").removeClass("open"),d()(this).find(".subcontainer.ui-resizable")[0].hide()):(d()(this).addClass("open").removeClass("closed"),d()(this).find(".subcontainer.ui-resizable")[0].show())},_refreshScroll:function(){var e=u.Z.scrolls.get(this._id);e&&e.refresh()},_createItemsList:function(e){var t=e.options,o=0,i=t.collect((function(e){return new le.W.ListItem({value:e,cssClassName:u.Z.LEAF_CLASS,label:J.getMessage(e.labelId)})})).partition((function(){return o++,-1===e.showCount||e.showCount>o}));return i[1].length>0&&i[0].push(new le.W.CompositeItem({value:{isMore:!0},templateDomId:"list_responsive_filters:node",openUp:!0,openHandlerPattern:".more.launcher",closeHandlerPattern:".fewer.launcher",respondOnItemEvents:!1,items:i[1]})),i[0]},_createFiltersList:function(e,t){var o=new le.W.List(e,{listTemplateDomId:"list_responsive_filters",itemTemplateDomId:"list_responsive_filters:leaf",items:this._createItemsList(t)});return o.observe("item:selected",function(e){var t=e.memo.item;t.getValue().isSeparator||t.getValue().isMore||this._ignoreFilterEvent||J.fire(J.Event.SEARCH_FILTER,{filterId:o.getId(),optionId:t.getValue().id})}.bindAsEventListener(this)),o},select:function(e,t,o){var i=this._filtersLists[e],n=function(e){if(e.getValue().id==t)throw e.isSelected()||(this._ignoreFilterEvent=o,e.select(),this._ignoreFilterEvent=!1),l.$break;if(e.isComposite){var i=e._getElement();le.R.isItemOpen(i)||le.R.openItem(i),e.getItems()&&e.getItems().each(n)}}.bind(this);i.getItems().each(n)},_getContainer:function(){return this._container||(this._container=d()("#"+this._id)[0],d()(this._container).hasClass(u.Z.SWIPE_SCROLL_PATTERN)&&(this._container=this._container.children())),this._container}},J.filterPath={_containerId:"filterPath",_contentBodySelector:".primary.column>.content>.body",initialize:function(){return this._filterPathList=new le.W.List(this._containerId,{listTemplateDomId:"list_control_path",itemTemplateDomId:"list_control_path:step"}),this._filterPathList.observe("item:selected",(function(e){var t=e.memo.item;t.getValue().isLast||J.fire(J.Event.SEARCH_ROLLBACK,{position:t.getValue().position})})),this},setPathItems:function(e){if(e.length>1){var t=e.length-1,o=e.collect((function(e,o){return e.isLast=o==t,new le.W.ListItem({label:e.label,value:e})}));this._filterPathList.setItems(o),this._filterPathList.show(),d()("#"+this._containerId).parent().removeClass("hidden"),d()(document.body).find(this._contentBodySelector).addClass("showingSubHeader")}else this._filterPathList.setItems([]),this._filterPathList.show(),d()("#"+this._containerId).parent().addClass("hidden"),d()(document.body).find(this._contentBodySelector).removeClass("showingSubHeader")}},J.sortersPanel={_LABEL_TEMPLATE_DOM_ID:"sortPanelLabelTemplate",_containerId:"sortMode",_ignoreSortEvent:!1,sortersList:null,initialize:function(e,t){this.labelItem=new le.W.ListItem({label:J.getMessage("SEARCH_SORT_BY")+":",value:{isLabel:!0},templateDomId:"tabSet_control_horizontal_responsive:label",respondOnItemEvents:!1});var o=e.collect((function(e,t){return new le.W.ListItem({label:J.getMessage(e.labelId),value:e})}));this.sortersList=new le.W.List(this._containerId,{listTemplateDomId:"tabSet_control_horizontal_responsive",itemTemplateDomId:"tabSet_control_horizontal_responsive:tab",items:[this.labelItem].concat(o),listOrientation:"horizontal"});var i=this;return this.sortersList.observe(this.sortersList.Event.ITEM_SELECTED,(function(e){var t=e.memo.item;t.getValue().isLabel||i._ignoreSortEvent||(J.sortersPanel.disableItems(),J.fire(J.Event.SEARCH_SORT,{sorterId:t.getValue().id}))})),this.sortersList.show(),this.labelItem.disable(),this.select(t),this},select:function(e,t){this.sortersList.getItems().each(function(o){if(o.getValue().id===e&&!o.isSelected())return this._ignoreSortEvent=t,this.sortersList.selectItem(o),void(this._ignoreSortEvent=!1)}.bind(this))},disableItems:function(){var e=this;this.sortersList.getItems().each((function(t){t!==e.labelItem&&(t.disable(),t.refresh())}))},enableItems:function(){var e=this;this.sortersList.getItems().each((function(t){t!==e.labelItem&&(t.enable(),t.refresh())}))},_getContainer:function(){return this._container||(this._container=d()("#"+this._containerId)[0]),this._container},_getLabelTemplate:function(){var e=d()("#"+this._LABEL_TEMPLATE_DOM_ID).clone(!0);return e.removeAttribute("id"),e}};var ve=function(e,t){this._resource=e,this._eventSourceFocusableElement=t&&(t.memo&&t.memo.focused||t.findElement("[tabindex=-1]")),this._isVisible=!1,this._listId=this.ENTITY_LIST_ID,this._listContainerId=this.LIST_CONTAINER_ID,this._searchBoxId=this.SEARCH_BOX_ID,this.viewBy="USER",this._processTemplate()};ve.addVar("TEMPLATE_DOM_ID","permissions"),ve.addVar("TOOLTIP_TEMPLATE_DOM_ID","orgTooltip"),ve.addVar("LIST_TEMPLATE_ID","tabular_twoColumn_setLeft"),ve.addVar("ITEM_TEMPLATE_ID","tabular_twoColumn_setLeft:leaf"),ve.addVar("WAIT_ITEM_TEMPLATE_ID","tabular_twoColumn_setLeft:loading"),ve.addVar("ENTITY_LIST_ID","permissionsList"),ve.addVar("LIST_CONTAINER_ID","permissionsListContainer"),ve.addVar("SEARCH_BOX_ID","searchPermissionsBox"),ve.addVar("SEARCH_BOX_INPUT_PATTERN","#permissionsSearchInput"),ve.addVar("NAME_TOOLTIP_PATTERN",".one"),ve.addVar("NAME_PATTERN",".one>a.launcher"),ve.addVar("PERMISSIONS_PATTERN",".two>select"),ve.addVar("VIEW_BY_TAB_SET_PATTERN","#viewMode"),ve.addVar("TAB_PATTERN",".tab>p"),ve.addVar("PATH_PATTERN",".path"),ve.addVar("SUBMIT_BUTTON","#permissionsOk"),ve.addVar("APPLAY_BUTTON","#permissionsApply"),ve.addVar("CANCEL_BUTTON","#permissionsCancel"),ve.addVar("BODY_PATTERN","div.body"),ve.addMethod("_processTemplate",(function(){this._dom=d()("#"+this.TEMPLATE_DOM_ID).clone(!0)[0],d()(this._dom).attr("id","permissionDialog"),d()(this._dom).find(this.BODY_PATTERN).attr("id","");var e=d()(this._dom).find(this.PATH_PATTERN)[0];e.update(g.Z.hardEscape(this._resource.URIString.truncate(80))),d()(e).attr("title",this._resource.URIString),d()(e).closest(".title").attr("id","permissionDialogTitle"),d()(e).attr("role","heading"),d()(e).attr("aria-level","1"),this._viewByTabSet=d()(this._dom).find(this.VIEW_BY_TAB_SET_PATTERN)[0],this._searchBoxInput=d()(this._dom).find(this.SEARCH_BOX_INPUT_PATTERN)[0],this._byUsersButton=d()(this._dom).find(this.TAB_PATTERN)[0],this._byRolesButton=d()(this._dom).find(this.TAB_PATTERN)[1],this._submitButton=d()(this._dom).find(this.SUBMIT_BUTTON)[0],this._applyButton=d()(this._dom).find(this.APPLAY_BUTTON)[0],this._cancelButton=d()(this._dom).find(this.CANCEL_BUTTON)[0],this._byUsersButton.viewType="USER",this._byRolesButton.viewType="ROLE",d()(this._searchBoxInput).attr("id",null),d()(this._submitButton).attr("id",null),d()(this._applyButton).attr("id",null),d()(this._cancelButton).attr("id",null);var t=d()(this._dom).find("#"+this.ENTITY_LIST_ID)[0],o=d()(this._dom).find("#"+this.LIST_CONTAINER_ID)[0],i=d()(this._dom).find("#"+this.SEARCH_BOX_ID)[0];this._listId=d()(t).attr("id",null)[0].identify(),this._listContainerId=d()(o).attr("id",null)[0].identify(),this._searchBoxId=d()(i).attr("id",null)[0].identify()})),ve.addMethod("_updateValueAndLabel",(function(e,t,o,i){var n=d()(e).find(t)[0];return n.writeAttribute("id",null),n.setValue(o),d()(e).find(i).attr("for",n.identify()),n})),ve.addMethod("_updateContentAndLabel",(function(e,t,o,i){var n=d()(e).find(t)[0];return n.writeAttribute("id",null),n.update(o),d()(e).find(i).attr("for",n.identify()),n})),ve.addMethod("_buttonClickHandler",(function(e){var t=e.target;if(!this._waiting){var o=(0,c.BwZ)(t,[u.Z.BUTTON_PATTERN],!0),i=this._resource.URIString;[this._submitButton,this._applyButton].include(o)&&(this._hideWarning(),J.fire(J.PermissionEvent.UPDATE,{uri:i,entities:this.getChangedEntities(),finishEdit:o==this._submitButton})),[this._byUsersButton,this._byRolesButton].include(o)&&(this.isChanged()?(this._showWarning(),e.stopPropagation()):(this._hideWarning(),this.viewBy=o.viewType,J.fire(J.PermissionEvent.BROWSE,{uri:i,type:this.viewBy}))),[this._cancelButton].include(o)&&this.hide()}})),ve.addMethod("_keyDownHandler",(function(e){var t=e.target;if("Escape"!==e.key&&27!==e.keyCode||this.hide(),!this._waiting){var o,i;if((0,c.BwZ)(t,[u.Z.TABSET_TAB_PATTERN],!0))if(37===e.keyCode?i=d()(t).prev(u.Z.TABSET_TAB_PATTERN):39===e.keyCode&&(i=d()(t).next(u.Z.TABSET_TAB_PATTERN)),i&&i.length){var n=d()(i).find(u.Z.BUTTON_PATTERN);o=n.length?n[0]:null}(0,c.BwZ)(t,["select"],!0)&&(37!==e.keyCode&&39!==e.keyCode||e.preventDefault());var r=this._resource.URIString;[this._byUsersButton,this._byRolesButton].include(o)&&(this.isChanged()?(this._showWarning(),e.stopPropagation()):(this._hideWarning(),this.viewBy=o.viewType,J.fire(J.PermissionEvent.BROWSE,{uri:r,type:this.viewBy})))}})),ve.addMethod("_showWarning",(function(){d()(this._dom).find(this.BODY_PATTERN).addClass(u.Z.ERROR_CLASS),d()(u.Z.MESSAGE_WARNING_PATTERN).focus(),d()(u.Z.MESSAGE_WARNING_PATTERN).on({focus:function(){d()(u.Z.MESSAGE_WARNING_PATTERN).addClass("focus-visible")},blur:function(){d()(u.Z.MESSAGE_WARNING_PATTERN).removeClass("focus-visible")}})})),ve.addMethod("_hideWarning",(function(){d()(this._dom).find(this.BODY_PATTERN).removeClass(u.Z.ERROR_CLASS),d()(u.Z.MESSAGE_WARNING_PATTERN).off("focus blur")})),ve.addMethod("_launcherClickHandler",(function(e){var t=e.element();if(!this._waiting&&(0,c.BwZ)(t,[this.NAME_PATTERN],!0)){var o=d()(t).parent("li");if(o&&o.listItem)o.listItem.getValue().navigateToManager()}e.preventDefault(),e.stopPropagation()})),ve.addMethod("_selectFocusInHandler",(function(e){var t=e.target;this._waiting||("SELECT"===t.tagName?(t.setAttribute("tabindex",0),t.focus()):t.children.length&&"SELECT"===t.children[0].tagName&&(t.children[0].hasAttribute("disabled")?t.setAttribute("aria-label",A.Z["permissionsDialog.permission.selectDisabledAriaLabel"]):(t.children[0].setAttribute("tabindex",0),t.children[0].focus())))})),ve.addMethod("_selectFocusOutHandler",(function(e){var t=e.target;this._waiting||("SELECT"===t.tagName?t.setAttribute("tabindex",-1):t.children.length&&"SELECT"===t.children[0].tagName&&t.children[0].setAttribute("tabindex",-1))})),ve.addMethod("_selectChangeHandler",(function(e){var t=e.target;if(e.stopPropagation(),!this._waiting&&"select"==t.tagName.toLowerCase()){var o=t.options[t.selectedIndex].value,i=d()(t).parents("li")[0];if(i&&i.listItem){var n=i.listItem.getValue();i.listItem.getValue().permission.newPermission=o!=n.permission.getResolvedPermission()?o:void 0,i.listItem.refresh()}}})),ve.addMethod("_selectMouseOverHandler",(function(e){(0,c.BwZ)(e.target,[this.PERMISSIONS_PATTERN],!0)&&e.stopPropagation()})),ve.addMethod("_initControls",(function(){this.list=new le.W.List(this._listId,{listTemplateDomId:this.LIST_TEMPLATE_ID,itemTemplateDomId:this.ITEM_TEMPLATE_ID});var e=d()("#"+this._listId).parents();(0,c.MEy)()&&(this._touchController||(this._touchController=new ue.Z(d()("#"+this._listId)[0],d()("#"+this._listId).parents(),{forceLayout:!0}))),this._infiniteScroll=new he.Z({id:e[0].identify(),contentId:this._listId,scroll:this._touchController||void 0}),this._searchBox=new _e.Z({id:this._searchBoxId});var t=this._resource.URIString;this._infiniteScroll.onLoad=function(){this._waiting||J.fire(J.PermissionEvent.NEXT,{text:this._searchBox.getText(),uri:t,type:this.viewBy})}.bind(this),this._searchBox.onSearch=function(e){this._waiting||(this.isChanged()?this._showWarning():(this._hideWarning(),J.fire(J.PermissionEvent.SEARCH,{text:e,uri:t,type:this.viewBy})))}.bind(this)})),ve.addMethod("show",(function(){this._isVisible||(document.body.insert(this._dom),this._initControls(),this.list.setItems([]),this.list.show(),E.Z.entityList._createEntityItem=this._createEntityItem,this.viewBy="ROLE",J.fire(J.PermissionEvent.BROWSE,{initialize:!0,uri:this._resource.URIString,type:this.viewBy,isFolder:this._resource.isFolder()}),this._isVisible=!0,a.Z.popup.show(this._dom,!0),this._clearPositionStyles(this._dom),this._dom.observe("click",this._buttonClickHandler.bindAsEventListener(this)),this._dom.observe("keydown",this._keyDownHandler.bindAsEventListener(this)),this._dom.observe("focusin",this._selectFocusInHandler.bindAsEventListener(this)),this._dom.observe("focusout",this._selectFocusOutHandler.bindAsEventListener(this)),(0,c.MEy)()&&this._viewByTabSet.observe("touchstart",this._buttonClickHandler.bindAsEventListener(this)),this._dom.observe("click",this._launcherClickHandler.bindAsEventListener(this)),this._dom.observe("mouseover",this._selectMouseOverHandler.bindAsEventListener(this)))})),ve.addMethod("_clearPositionStyles",(function(e){e.style.marginLeft=null,e.style.marginTop=null,e.style.top=null,e.style.left=null})),ve.addMethod("showAndWait",(function(){this._isVisible||(this._waiting=!0,this.show(),this._waitingItem=new le.W.ListItem({templateDomId:this.WAIT_ITEM_TEMPLATE_ID}),this.list.addItems([this._waitingItem]),this.list.refresh(),this.disable())})),ve.addMethod("stopWaiting",(function(){this._waiting&&(this._waiting=!1,this.list.removeItems([this._waitingItem]),this.enable())})),ve.addMethod("hide",(function(){a.Z.popup.hide(this._dom),this._dom.remove(),this._dom.stopObserving("click"),this._dom.stopObserving("change"),this._dom.stopObserving("mouseover"),(0,c.MEy)()&&this._viewByTabSet.stopObserving("touchstart"),J.dialogsPool.removePermissionsDialog(this._resource),this._eventSourceFocusableElement&&this._eventSourceFocusableElement.focus()})),ve.addMethod("enable",(function(){this._searchBox.enable(),p.Z.enable(this._byUsersButton),p.Z.enable(this._byRolesButton)})),ve.addMethod("disable",(function(){this._searchBox.disable(),p.Z.disable(this._byUsersButton),p.Z.disable(this._byRolesButton)})),ve.addMethod("_createItem",(function(e){var t=new le.W.ListItem({label:e.getDisplayName(),value:e}),o=this.NAME_TOOLTIP_PATTERN,i=this.NAME_PATTERN,n=this.PERMISSIONS_PATTERN,s=this.TOOLTIP_TEMPLATE_DOM_ID,a=this;return t.processTemplate=function(e){var t=d()(e).find(o)[0],l=d()(e).find(i)[0],_=d()(e).find(n)[0],c=this.getValue().permission,h=this.getValue().tenantId;if(c.newPermission?d()(l).addClass(u.Z.EMPHASIS_CLASS):d()(l).removeClass(u.Z.EMPHASIS_CLASS),l.update(g.Z.hardEscape(this.getValue().getDisplayName())),h&&h.length>0){new Ee.p(t,{text:g.Z.hardEscape(h),templateId:s}),d()(t).attr("aria-description","".concat(A.Z["tooltip.organization"]," ").concat(g.Z.hardEscape(h)));var E=e.remove;e.remove=function(){Ee.k.hideJSTooltip(t),Ee.k.cleanUp(),E.apply(this)}}_.update("");var p=0,m=J.model.getConfiguration().permissions;m=r().uniq(m,!1,(function(e){return e.labelId}));for(var f=0;f<m.length;f++){"REAL_READ_WRITE_DELETE"===m[f].name&&(m[f].name="READ_WRITE_DELETE");var R=J.getMessage(m[f].labelId),T=new Element("option",{value:m[f].name});_.insert(T.update(c.inheritedPermission==m[f].name?g.Z.hardEscape(R+" *"):g.Z.hardEscape(R))),c.newPermission?c.newPermission==m[f].name&&(p=f):c.getResolvedPermission()==m[f].name&&(p=f)}return _.observe("change",a._selectChangeHandler.bindAsEventListener(a)),_.selectedIndex=p,this.getValue().permission.isDisabled&&d()(_).attr("disabled","disabled"),e},t})),ve.addMethod("addEntities",(function(e){var t=e.collect(this._createItem.bind(this));this.list.addItems(t),this.list.refresh(),this._infiniteScroll.stopWaiting()})),ve.addMethod("resetList",(function(e){var t=d()("#"+e);d()(t).find("[js-nonmodal-tabindex]").removeAttr("js-nonmodal-tabindex")})),ve.addMethod("scrollReset",(function(){var e=this._listId,t=this.resetList;d()("#"+this._listContainerId).find(".content").find(".body").on("scroll",r().debounce((function(){t(e)}),100))})),ve.addMethod("setEntities",(function(e){this.list.setItems([]),this._touchController&&this._touchController.reset(),this.addEntities(e),this.resetList(this._listId),this.scrollReset()})),ve.addMethod("getChangedEntities",(function(){var e=this.list.getItems(),t=[];return e.each((function(e){var o=e.getValue();o.permission&&o.permission.newPermission&&t.push(o)})),t})),ve.addMethod("updateEntities",(function(e){this.list.getItems().each((function(t){var o=t.getValue(),i=e.detect((function(e){return e.equals(o)}));i&&(t.setValue(i),t.refresh())}))})),ve.addMethod("isChanged",(function(){return this.getChangedEntities().length>0})),J.resourcePermissionsObj={ResourcePermissions:ve},J.dialogsPool={POOL_NOT_FOUND_EXCEPTION:"PoolNotFoundException",DIALOD_EXIST_EXCEPTION:"DialodExistException",NULL_RESOURCE_EXCEPTION:"NullResourceException",_permissionsDialogPool:{},_propertiesDialogPool:{},_getPool:function(e){var t;if(e==ve&&(t=this._permissionsDialogPool),e==De&&(t=this._propertiesDialogPool),t)return t;throw{name:this.POOL_NOT_FOUND_EXCEPTION,message:"Can't find pool for "+e.toString()}},_createDialog:function(e,t,o){var i=t.URIString,n=this._getPool(e);if(null==t)throw{name:this.NULL_RESOURCE_EXCEPTION,message:"Resource is null."};if(n[i])throw{name:this.DIALOD_EXIST_EXCEPTION,message:e.toString()+" dilaog for resource '"+i+"' arleady exist."};return n[i]=new e(t,o),n[i]},_createOrGetDialog:function(e,t,o){try{return this._createDialog(e,t,o)}catch(o){if(o.name==this.DIALOD_EXIST_EXCEPTION)return this._getDialog(e,t);throw o}},_getDialog:function(e,t){var o=Object.isString(t)?t:t.URIString;return this._getPool(e)[o]},_getAllDialogs:function(e){var t=this._getPool(e),o=[];for(var i in t)t[i]&&o.push(t[i]);return o},_removeDialog:function(e,t){var o=Object.isString(t)?t:t.URIString;this._getPool(e)[o]=void 0},createPermissionsDialog:function(e){return this._createDialog(ve,e)},createPropertiesDialog:function(e){return this._createDialog(De,e)},createOrGetPermissionsDialog:function(e,t){return this._createOrGetDialog(ve,e,t)},createOrGetPropertiesDialog:function(e,t){return this._createOrGetDialog(De,e,t)},getAllPermissionsDialogs:function(){return this._getAllDialogs(ve)},getAllPropertiesDialogs:function(){return this._getAllDialogs(De)},getPermissionsDialog:function(e){return this._getDialog(ve,e)},getPropertiesDialog:function(e){return this._getDialog(De,e)},removePermissionsDialog:function(e){return this._removeDialog(ve,e)},removePropertiesDialog:function(e){return this._removeDialog(De,e)}};var De=function(e,t){this._resource=e,this._changedCallback=t.changedCallback,this._showMode=t.showMode,this._processTemplate()};De.addVar("TEMPLATE_DOM_ID","propertiesResource"),De.addMethod("_processTemplate",(function(){this._dom=d()("#"+this.TEMPLATE_DOM_ID).clone(!0)[0],d()(this._dom).attr("id",null),d()(this._dom).addClass("_activeResourcePropertiesDialog");var e=d()(this._dom).find(".title")[0];e.update(d()(e).html().strip()+": "+g.Z.hardEscape(this._resource.label).truncate(50)),this._label=this._updateValueAndLabel(this._dom,"input#displayName",this._resource.label,'label[for="displayName"]'),this._description=this._updateContentAndLabel(this._dom,"textarea#description",g.Z.hardEscape(this._resource.description),'label[for="description"]'),this._path=this._updateValueAndLabel(this._dom,"input#path",g.Z.hardEscape(this._resource.URIString),'label[for="path"]'),this._showMode&&(d()(this._dom).addClass("showMode"),d()(this._label).attr("readonly","readonly"),d()(this._description).attr("readonly","readonly")),this._updateValueAndLabel(this._dom,"div#resourceID",g.Z.hardEscape(this._resource.name),'label[for="resourceID"]'),this._updateValueAndLabel(this._dom,"input#type",g.Z.hardEscape(this._resource.type),'label[for="type"]'),this._updateValueAndLabel(this._dom,"input#createdDate",g.Z.hardEscape(this._resource.date),'label[for="createdDate"]'),this._updateValueAndLabel(this._dom,"input#userAccess",g.Z.hardEscape(this._resource.permissionsToString()),'label[for="userAccess"]'),this._submitButton=d()(this._dom).find("button.submit")[0],this._cancelButton=d()(this._dom).find("button.cancel")[0],this._okButton=d()(this._dom).find("button.ok")[0]})),De.addMethod("_updateValueAndLabel",(function(e,t,o,i){var n=d()(e).find(t)[0];return d()(n).attr("id",null),d()(n).attr("value",o),n.setValue?n.setValue(o):n.update(o),d()(e).find(i).attr("for",n.identify()),n})),De.addMethod("_updateContentAndLabel",(function(e,t,o,i){var n=d()(e).find(t)[0];return d()(n).attr("id",null),n.update(o),d()(e).find(i).attr("for",n.identify()),n})),De.addMethod("_buttonClickHandler",(function(e){var t=(0,c.BwZ)(e.target,[u.Z.BUTTON_PATTERN],!0);if(t==this._submitButton){if(this._showMode)this._hide();else if(this._isDataValid()){if(this._changedCallback){var o=this._resource.clone();o.label=this._label.getValue(),o.description=this._description.getValue(),this._changedCallback(o)}this._hide()}}else t!=this._cancelButton&&t!=this._okButton||this._hide()})),De.addMethod("_isDataValid",(function(e){return c.n4K.validate([{validator:ee.labelValidator,element:this._label},{validator:ee.descriptionValidator,element:this._description}])})),De.addMethod("show",(function(e){document.body.insert(this._dom),e&&e.cascade?a.Z.popup.show(this._dom,!1,e):a.Z.popup.show(this._dom),this._dom.observe("click",this._buttonClickHandler.bindAsEventListener(this))})),De.addMethod("_hide",(function(){a.Z.popup.hide(this._dom),this._dom.remove(),this._dom.stopObserving("click"),J.dialogsPool.removePropertiesDialog(this._resource)})),De.addMethod("isChanged",(function(){return this._resource.label!=this._label.getValue()||this._resource.description!=this._description.getValue()})),J.showCreateFolderConfirm=function(e){var t,o=d()("#addFolder")[0],i=d()("#addFolderInputName")[0],n=d()("#addFolderInputDescription")[0],r=d()("#addFolderBtnAdd")[0],s=d()("#addFolderBtnCancel")[0],l=function(e){t=e,a.Z.popup.show(o,!0,{closable:!0}),i.setValue(J.messages["action.create.folder.name"]),setTimeout((function(){i.focus(),i.select()}),500)},_=function(e){i.clear(),n.clear(),c.n4K.hideError(i),c.n4K.hideError(n),a.Z.popup.hide(o),e.stopPropagation()};r.observe("click",(function(e){var s,a;s=c.n4K.validate([{validator:ee.labelValidator,element:i}]),a=c.n4K.validate([{validator:ee.descriptionValidator,element:n}]),s?a||d()("#addFolderInputDescription").focus():d()("#addFolderInputName").focus(),s&&a&&function(e){"disabled"!==d()(r).attr("disabled")&&(new J.ServerAction.createFolderAction(J.FolderAction.CREATE,{toFolder:t,label:i.getValue(),desc:n.getValue(),dialog:o}).invokeAction(),_(e))}(e),e.stopPropagation()})),s.observe("click",(function(e){_(e),a.Z.popup.hide(o)})),J.showCreateFolderConfirm=l,l(e)},J.DeleteConfirmation={ID_DELETE_DIALOG_CONTAINER:"standardConfirm",ID_DELETE_DIALOG_OK_BUTTON:"deleteResourceOK",ID_DELETE_DIALOG_CANCEL_BUTTON:"deleteResourceCancel"},J.showDeleteFolderConfirm=function(e,t){var o=J.getMessage("SEARCH_DELETE_FOLDER_CONFIRM_MSG",{folderUri:e.URI}),i=new J.ServerAction.createFolderAction(J.FolderAction.DELETE,{folder:e});J._showDeleteDialog(o,i,t)},J.showDeleteResourceConfirm=function(e,t){var o=J.getMessage("SEARCH_DELETE_CONFIRM_MSG",{resourceUri:e.URIString}),i=new J.ServerAction.createResourceAction(J.ResourceAction.DELETE,{resources:[e]});J._showDeleteDialog(o,i,t)},J.showBulkDeleteResourcesConfirm=function(e,t){var o=J.getMessage("SEARCH_BULK_DELETE_CONFIRM_MSG",{count:e.length}),i=new J.ServerAction.createResourceAction(J.ResourceAction.DELETE,{resources:e});J._showDeleteDialog(o,i,t)},J._showDeleteDialog=function(e,t,o){var i=g.Z.hardEscape(e),n=o&&("mouseup"===o.type&&o.target.ancestors().filter((function(e){return e.hasClassName("selected")}))[0]||"dataavailable"===o.type&&o.target),r={title:A.Z.DIALOG_CONFIRM_TITLE,text:i,buttons:[{label:A.Z.DIALOG_CONFIRM_BUTTON_LABEL_OK,action:"yes",primary:!0},{label:A.Z.DIALOG_CONFIRM_BUTTON_LABEL_CANCEL,action:"no",primary:!1}],returnFocusTo:n},s=new T.Z(r);s.setReturnFocus(n),s.on("button:yes",(function(){return t.invokeAction()})),s.on("button:no",(function(){return s.close()})),s.open()},J.showResourceProperties=function(e,t){J.dialogsPool.createOrGetPropertiesDialog(e,{showMode:!0}).show(t)},J.editResourceProperties=function(e,t){J.dialogsPool.createOrGetPropertiesDialog(e,{changedCallback:function(e){new J.ServerAction.createResourceAction(J.ResourceAction.UPDATE,{resource:e}).invokeAction()}}).show(t)},J.showFolderProperties=function(e){J.dialogsPool.createOrGetPropertiesDialog(e,{showMode:!0}).show()},J.editFolderProperties=function(e){J.dialogsPool.createOrGetPropertiesDialog(e,{changedCallback:function(e){new J.ServerAction.createFolderAction(J.FolderAction.UPDATE,{folder:e}).invokeAction()}}).show()},J.addToFavorite=function(e,t){var o=d()(this._container).find(".resources.selected"),i=t||o,n=f.Z.contextPath+"/rest_v2/favorites",r=ee.getSelectedResourceUris(e);e.every((function(e){return e.isFavorite}))?(n+="/delete",J.onFavoriteItem(n,r).then((function(){i.removeClass(u.Z.FAVORITE_CLASS).find('[role="checkbox"]').first().attr("aria-checked",!1),J.setFavorite(e)}))):J.onFavoriteItem(n,r).then((function(){i.addClass(u.Z.FAVORITE_CLASS).find('[role="checkbox"]').first().attr("aria-checked",!0),J.setFavorite(e)}))},J.setFavorite=function(e){e.forEach((function(e){e.isFavorite=!e.isFavorite}))},J.editResourcePermissions=function(e,t){J.dialogsPool.createOrGetPermissionsDialog(e,t).showAndWait()},J.editFolderPermissions=function(e,t){J.dialogsPool.createOrGetPermissionsDialog(e,t).showAndWait()},J.showUploadThemeConfirm=function(e,t){var o,i,n=d()("#uploadTheme")[0],r=d()("#themeName")[0],s=d()("#themeZip")[0],l=d()("#uploadThemeBtnUpload")[0],_=d()("#uploadThemeBtnCancel")[0],u=function(e,t){o=e,i=t,a.Z.popup.show(n),r.removeAttribute("disabled"),r.setValue(J.messages.RM_NEW_THEME_NAME),i&&(d()(r).attr("disabled"),r.setValue(o.name)),r.select(),r.focus()},h=function(e){r.clear(),s.clear(),a.Z.popup.hide(n),e.stopPropagation()};l.observe("click",(function(e){c.n4K.validate([{validator:ee.labelValidator,element:r},{validator:ee.zipFileTypeValidator,element:s}])&&function(e){var t={};if(t.themeName=r.getValue(),t._eventId="uploadTheme",t._flowExecutionKey=J.flowExecutionKey,t.folderUri=o.URI,t.folderUri=o.URI,i){var n=o.URI;t.folderUri=n.slice(0,n.lastIndexOf("/")),t.reuploadAction=i,t._eventId="reuploadTheme"}c.MNC.upload(s,"searchFlow",t,(function(e){var n;if(s=d()("#themeZip")[0],e)try{if((n=e.evalJSON())&&"OK"==n.status){if(n.data.themeExist){var r=J.messages.SEARCH_OVERWRITE_THEME_CONFIRM_MSG,a=new T.Z({text:r});a.on("button:yes",(function(){new J.ServerAction.createFolderAction(J.ThemeAction.REUPLOAD,t).invokeAction(),self.close()&&self.remove()})),a.on("button:no",(function(){self.close()&&self.remove()})),a.open()}else if(n.data.isActiveTheme){var l=n.data.themeUri;new J.ServerAction.createFolderAction(J.ThemeAction.SETTHEME,{folderUri:l}).invokeAction()}}else n&&"ERROR"==n.status?alert(n.data):alert(J.messages.RM_UPLOAD_THEME_ERROR)}catch(e){alert(e)}i&&n.data.isActiveTheme||J.foldersPanel.refreshFolder(o)})),h(e)}(e),e.stopPropagation()})),_.observe("click",h),J.showUploadThemeConfirm=u,u(e,t)};const Ie=J;var Oe=Object.assign(J,se,Ie);window.repositorySearch=Oe;const Ce=Oe;o(15892);a.Z.dependentResources={dependenciesPanel:null,show:function(e,t,o){this.dependenciesPanel=d()("#dependencies"),this._$title=this.dependenciesPanel.find(".content .header .title"),o.dialogTitle&&(this._titleBackup=this._$title.html(),this._$title.html(o.dialogTitle)),a.Z.popup.show(this.dependenciesPanel[0]),this._changeMessage(o),this._switchButtons(o);var i=this._initList(e);this.dependenciesPanel.on("click",(function(e){var o=d()(e.target).closest("button").attr("id"),n=t&&t[o];r().include(["dependenciesBtnSave","dependenciesBtnSaveAs","dependenciesBtnOk","dependenciesBtnCancel"],o)&&(a.Z.dependentResources.hide(),i.setItems([]),e.stopPropagation(),n&&n())}))},hide:function(){this.dependenciesPanel&&(this.dependenciesPanel.off("click"),a.Z.popup.hide(this.dependenciesPanel[0]),this.dependenciesPanel=null),this._titleBackup&&this._$title&&(this._$title.html(this._titleBackup),this._titleBackup=null)},_changeMessage:function(e){d()("#topMessage").html(e.topMessage),d()("#bottomMessage").html(e.bottomMessage)},_initList:function(e){var t=new le.W.List("dependenciesList",{listTemplateDomId:"tabular_oneColumn",itemTemplateDomId:"tabular_oneColumn:leaf"}),o=[];return e&&(o=e.collect((function(e){var t=new le.W.ListItem({cssClassName:u.Z.LEAF_CLASS,value:e});return t.processTemplate=function(e){var t,o=d()(e).find(".uri");return t="string"==typeof this.getValue()?this.getValue():this.getValue().uristring?this.getValue().uristring:this.getValue().URIString,o.html(g.Z.hardEscape(t)),e},t}))),t.setItems(o),t.show(),t},_switchButtons:function(e){var t,o={save:d()("#dependenciesBtnSave"),saveAs:d()("#dependenciesBtnSaveAs"),ok:d()("#dependenciesBtnOk"),cancel:d()("#dependenciesBtnCancel")};t=e.buttons?e.buttons:e.okOnly?["ok"]:e.canSave?["save","saveAs","cancel"]:["ok","cancel"],r().each(o,(function(e,o){t.indexOf(o)<0?e.addClass("hidden"):e.removeClass("hidden")}))}};a.Z.dependentResources;r().extend(Ce.messages,f.Z.repositorySearch.i18n),r().extend(le.W.messages,f.Z.dynamicList.i18n),r().extend(window.localContext,f.Z.repositorySearch.localContext),Ce.initialize(window.localContext)},24777:(e,t,o)=>{"use strict";o.d(t,{Z:()=>i});const i={}},45186:(e,t,o)=>{"use strict";o.d(t,{Z:()=>a});var i=o(64155),n=o(72157),r=o.n(n),s=function(e){this._id=e.id,this._contentId=e.contentId?e.contentId:void 0,this._scroll=e.scroll,this._loadFactor=e.loadFactor?e.loadFactor:.95,this._lastContentHeight=0,this._loading=!1,e.control?void 0!==e.control.length&&e.control.length>1?this._control=r()(e.control[0]):this._control=r()(e.control)[0]:this._control=this._scroll?this._scroll.parent:r()("#"+this._id)[0],this._scroll?this._content=this._scroll.element:e.content?void 0!==e.content.length&&e.content.length>1?this._content=r()(e.content[0]):this._content=r()(e.content)[0]:this._content=this._contentId?r()("#"+this._contentId)[0]:this._control.childElements()[0],this._eventType=(0,i.MEy)()?"touchmove":"scroll",this._control.observe(this._eventType,this._onScrollHandler.bind(this))};s.addMethod("destroy",(function(){this._control&&this._control.stopObserving(this._eventType,this._handler)})),s.addMethod("_onScrollHandler",(function(e){var t=this._scroll?-1*this._scroll.y:this._control.scrollTop,o=this._content.getHeight(),n=this._control.getHeight();o!=this._lastContentHeight&&(this._loading=!1);var r=!this._loading&&0!=o;(r=this._scroll?r&&this._scroll.isBottom():r&&(n+t)/o>this._loadFactor)&&(this._loading=!0,this._lastContentHeight=o,(0,i.zcy)()&&this.wait(),this.onLoad())})),s.addMethod("onLoad",i.cnY),s.addMethod("reset",(function(){(0,i.zcy)()?this._scroll.reset():this._control.scrollTop=0,this._loading=!1})),s.addMethod("wait",(function(){if(!this._waitIndicator){this._waitIndicator=new Element("div",{class:"dimmer resultsOverlay"});var e=this._control.getDimensions(),t=this._control.positionedOffset();this._waitIndicator.setStyle({zIndex:"4000",top:t.top+"px",left:t.left+"px",height:e.height+"px",width:e.width+"px"}),this._control.insert({after:this._waitIndicator})}this._waitIndicator.show()})),s.addMethod("stopWaiting",(function(){this._waitIndicator&&this._waitIndicator.hide()})),window.InfiniteScroll=s;const a=s},89560:(e,t,o)=>{"use strict";o.d(t,{Z:()=>p});var i=o(97836),n=o.n(i),r=o(72157),s=o.n(r),a=o(42994),l=o(10709),_=o(59661),d=o(43891),c=o(35499),u=o(37567),h=(o(68851),o(44768)),E=l.Z.extend({defaultTemplate:c.Z,events:{mousedown:"_focus",touchstart:"_focus",keydown:"_onKeyDown",keyup:"_onKeyboardEvent",keypress:"_onKeyboardEvent",resize:"_onDialogResize"},constructor:function(e){e||(e={}),e.traits||(e.traits=[]),this.resizable=e.resizable||!1,this.modal=e.modal||!1,this.id=e.id,this.titleContainerId=e.titleContainerId,this.bodyContainerId=e.bodyContainerId,this.additionalBodyCssClasses=e.additionalBodyCssClasses||"",this.returnFocusTo=e.returnFocusTo||!1,this.resizable&&-1===n().indexOf(e.traits,d.Z)&&e.traits.push(d.Z),l.Z.call(this,e)},initialize:function(e){this.dialogOptions=n().extend({},e),this.collapsed=!this.collapsed,this.resetSizeOnOpen=!!n().isUndefined(e.resetSizeOnOpen)||e.resetSizeOnOpen,n().isEmpty(e.buttons)||(this.buttons=new _.Z({options:e.buttons,el:this.$(".jr-mDialog-footer")[0]||this.$(".footer")[0],contextName:"button",optionTemplate:e.dialogButtonTemplate||u.Z})),l.Z.prototype.initialize.apply(this,arguments),this.buttons&&this.listenTo(this.buttons,n().map(e.buttons,(function(e){return"button:"+e.action})).join(" "),n().bind((function(e,t){this.trigger("button:"+t.get("action"),e,t)}),this)),this.render()},getTemplateArguments:function(){var e=l.Z.prototype.getTemplateArguments.apply(this,arguments);return n().extend(e,{id:this.id,titleContainerId:this.titleContainerId,bodyContainerId:this.bodyContainerId,additionalBodyCssClasses:this.additionalBodyCssClasses})},setElement:function(e){var t=l.Z.prototype.setElement.apply(this,arguments);return this.buttons&&this.buttons.setElement(this.$(".jr-mDialog-footer")[0]||this.$(".footer")[0]),t},setTitle:function(e){this.$(".jr-mDialog-header > .jr-mDialog-header-title").text(e),this.$el.attr("aria-label",e)},setReturnFocus:function(e){this.returnFocusTo=e},render:function(){return this.$el.hide(),this.modal&&(this.dimmer=new a.Z({zIndex:900})),s()("body").append(this.$el),this.$el.draggable({handle:".mover",addClasses:!1,containment:"document"}),this},open:function(e){if(this.isVisible())return this;this.resetSizeOnOpen&&(this.$el.css({height:"",width:""}),this.$el.find("textarea").css({height:"",width:""})),l.Z.prototype.open.apply(this,arguments),this.modal&&this.dimmer.css({zIndex:++E.highestIndex}).show(),this._setMinSize();var t=this._position(e);this.$el.css({top:t.top,left:t.left,position:"absolute"}),this._increaseZIndex(),this.buttons&&this.buttons.$(".over").removeClass("over"),this.$el.show(),this.lastFocusedElement=this.returnFocusTo||document.activeElement;var o=h.Z.getFirstFocusableElement(this.$el[0]);return o&&n().defer((function(){return o.focus()})),this._onDialogResize(),this.trigger("dialog:visible"),h.Z.beginModalFocus(this.$el[0]),this},close:function(){if(this.isVisible())return h.Z.endModalFocus(this.$el[0]),this.$el.css({zIndex:--E.highestIndex}),this.modal&&this.dimmer.css({zIndex:--E.highestIndex}).hide(),this.$el.hide(),this.lastFocusedElement&&this.lastFocusedElement.focus(),l.Z.prototype.close.apply(this,arguments),this},addCssClasses:function(e){this.$el.addClass(e)},toggleCollapsedState:function(){return this},enableButton:function(e){this.buttons.enable(e)},disableButton:function(e){this.buttons.disable(e)},isVisible:function(){return this.$el.is(":visible")},_setMinSize:function(){this.dialogOptions.minWidth&&this.$el.css({minWidth:this.dialogOptions.minWidth}),this.dialogOptions.minHeight&&this.$el.css({minHeight:this.dialogOptions.minHeight}),this.dialogOptions.setMinSizeAsSize&&this.$el.css({width:this.dialogOptions.minWidth,height:this.dialogOptions.minHeight})},_position:function(e){var t,o,i=s()("body"),n=this.$el.height(),r=this.$el.width();if(e&&void 0!==e.top&&void 0!==e.left){t=e.top,o=e.left;var a=i.height(),l=i.width(),_=a-e.top,d=l-e.left;_<n&&(t=(t=e.top-n)<0?a/2-n/2:t),d<r&&(o=(o=e.left-r)<0?l/2-r/2:o)}else t=s()(window).height()/2-n/2,o=s()(window).width()/2-r/2;return{top:Math.max(0,t),left:Math.max(0,o)}},_focus:function(){!this.modal&&this._increaseZIndex()},_increaseZIndex:function(){this.$el.css({zIndex:++E.highestIndex})},_onKeyDown:function(e){("Escape"===e.key||27===e.keyCode)&&this.buttons&&this.dialogOptions.buttons.length>0&&this.close(),this.buttons&&this.buttons._onKeyDown(e),e.stopPropagation()},_onKeyboardEvent:function(e){e.stopPropagation()},_onDialogResize:function(){},remove:function(){this.buttons&&this.buttons.remove(),this.dimmer&&this.dimmer.remove();try{this.$el.draggable("destroy")}catch(e){}l.Z.prototype.remove.call(this)}},{highestIndex:5e3,resetHighestIndex:function(e){E.highestIndex=e||5e3}});const p=E},59772:(e,t,o)=>{"use strict";o.d(t,{Z:()=>_});var i=o(5887),n=o.n(i),r=o(97836),s=o.n(r),a=new(o(92772).Z),l=n().mixin.validate;n().mixin.validate=function(e,t){t||(t={});var o=this;return l.call(this,e,s().extend({valid:function(e,t){o.trigger("validate:"+t,o,t)},invalid:function(e,t,i){o.trigger("validate:"+t,o,t,i)}},t))},s().extend(n().validators,{doesNotContainSymbols:function(e,t,o){if(new RegExp("["+o+"]","g").test(e))return"Attribute '"+t+"' contains forbidden symbols"},integerNumber:function(e){if(!a.isNumberInt(e))return"Value is not a valid integer number"},type:function(e,t,o){if(s().isArray(o)||(o=[o]),!o.some((function(t){return function(e){var t;return"string"==e?t=s().isString:"number"===e?t=s().isNumber:"object"===e?t=s().isObject:"boolean"===e?t=s().isBoolean:"null"===e?t=s().isNull:"undefined"===e&&(t=s().isUndefined),t}(t)(e)})))return"'{attr}' is not {type}".replace("{attr}",t).replace("'{type}'",o.join(" "))},url:function(e){if(!/(http|https):\/\/.*\..*./.test(e))return"Value is not a valid url"},hexColor:function(e){if(!/^#[0-9a-f]{3,6}$/i.test(e))return"Value is not a valid hex color"},xRegExpPattern:function(e,t,o,i){if(!o.test(e))return"Value does not match pattern"},startsWithLetter:function(e,t,o,i){if(!e.substr(0,1).match(/[A-Za-z]/))return"Value should start with letter"},containsOnlyWordCharacters:function(e,t,o,i){if(e.search(/\W/)>=0)return"Value should contain only word characters (letters, digits and underscore)"},arrayMinLength:function(e,t,o,i){if(s().isArray(e)&&e.length<o)return"Array length is less than "+o}});const _=n()},79312:()=>{if("function"!=typeof window.CustomEvent){var e=function(e,t){t=t||{bubbles:!1,cancelable:!1,detail:void 0};var o=document.createEvent("CustomEvent");return o.initCustomEvent(e,t.bubbles,t.cancelable,t.detail),o};e.prototype=window.Event.prototype,window.CustomEvent=e}}}]);
//# sourceMappingURL=chunk.7080.js.map