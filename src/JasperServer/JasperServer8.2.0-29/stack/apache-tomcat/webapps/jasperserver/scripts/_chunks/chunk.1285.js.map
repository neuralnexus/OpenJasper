{"version":3,"sources":["webpack://jrs-ui/../bi-report/src/bi/report/loader/dynamicModuleLoader.js","webpack://jrs-ui/../bi-report/src/bi/report/jive/view/CustomJiveComponentView.js","webpack://jrs-ui/../js-sdk/src/common/util/loader/cssLoader.js"],"names":["baseUrl","jrsConfigs","getModuleUrl","module","url","realBaseUrl","URL","window","location","href","fullUrl","pathname","match","modulesPromises","localLogger","logger","Backbone","loadCss","css","this","model","get","render","renderDeferred","$","data","script","settings","type","dataType","cache","promise","Promise","resolve","reject","request","then","response","func","Function","namespace","define","defineLocal","require","requireLocal","requirejs","requirejsLocal","requireModule","loadDynamicModule","name","renderer","id","remove","err","debug","cssRegistry","link","document","createElement","rel","getElementsByTagName","appendChild"],"mappings":"kOAWMA,EAAU,GAAH,OAAMC,gBAAN,YAEPC,EAAe,SAACC,EAAQC,GAC1B,IAAMC,EAAc,IAAIC,IAAIN,EAASO,OAAOC,SAASC,MAAMA,KACrDC,EAAU,IAAIJ,IAAIF,GAAO,GAAJ,OAAOC,EAAP,YAAsBF,GAAUE,GAC3D,OAAOK,EAAQC,SAASC,MAAM,UAAYF,EAAQD,KAA3C,UAAqDC,EAAQD,KAA7D,QAGLI,EAAkB,GCRlBC,EAAcC,aAAgB,2BAEpC,QAAeC,gBAAqB,CAChCC,QAAS,WACL,IAAMC,EAAMC,KAAKC,MAAMC,IAAI,OAC3BH,IAAOD,OAAQC,EAAIT,OAEvBa,OAAQ,WACJ,IAAMC,EAAiB,IAAIC,cACrBC,EAAON,KAAKC,MAAMC,IAAI,gBACtBK,EAASP,KAAKC,MAAMC,IAAI,UAgB9B,OAdAF,KAAKF,UDFoB,SAACd,EAAQC,GACtC,GAAIS,EAAgBV,GAChB,OAAOU,EAAgBV,GAG3B,IAAIwB,EAAW,CACXC,KAAM,MACNC,SAAU,OACVC,OAAO,EACP1B,IAAKF,EAAaC,EAAQC,IAGxB2B,EAAU,IAAIC,SAAQ,SAACC,EAASC,IAClCC,OAAQR,GAAUS,MAAK,SAACC,GACpB,IAAMC,EAAO,IAAIC,SAAS,gBAAiB,WAAY,UAAW,YAAa,SAAUF,GAEnFG,EAAY,CAACC,OAAQC,SAAaC,QAASC,UAAcC,UAAWC,aAC1ER,EAAKE,EAAWA,EAAWI,UAAcE,YAAgBJ,WAEzDE,aAAa,CAACzC,IAAS,SAAC4C,GACpBd,EAAQc,KACTb,MARP,MASSA,MAKb,OAFArB,EAAgBV,GAAU4B,EAEnBA,ECvBHiB,CAAkBtB,EAAOuB,KAAMvB,EAAOjB,MAAM2B,MAAK,SAACc,GAI9C1B,IAAE,IAAMC,EAAK0B,GAAK,QAAQC,SAC1BF,EAASzB,GACTF,EAAeU,aANnB,OAOS,SAACoB,GACNvC,EAAYwC,MAAMD,GAClB9B,EAAeW,OAAOmB,MAGnB9B,M,8CCdf,IAAMgC,EAAc,GAEPtC,EAAU,SAACb,GAAsB,IAAjB0B,IAAiB,yDAC1C,GAAIA,GAASyB,EAAYnD,GACrB,OAAOmD,EAAYnD,GAGvB,IAAMoD,EAAOC,SAASC,cAAc,QASpC,OARAF,EAAK5B,KAAO,WACZ4B,EAAKG,IAAM,aACXH,EAAK/C,KAAOL,EAEZqD,SAASG,qBAAqB,QAAQ,GAAGC,YAAYL,GAErDD,EAAYnD,GAAOoD,EAEZD,EAAYnD","file":"_chunks/chunk.1285.js","sourcesContent":["/*\n * Copyright (C) 2005 - 2022 TIBCO Software Inc. All rights reserved. Confidentiality & Proprietary.\n * Licensed pursuant to commercial TIBCO End User License Agreement.\n */\n\nimport jrsConfigs from 'js-sdk/src/jrs.configs';\nimport request from 'js-sdk/src/common/transport/request';\n// need to rename require, requirejs and define vars\n// because otherwise webpack 5 trying to process them\nimport {require as requireLocal, requirejs as requirejsLocal, define as defineLocal} from 'requirejs/require';\n\nconst baseUrl = `${jrsConfigs.contextPath}/scripts`;\n\nconst getModuleUrl = (module, url) => {\n    const realBaseUrl = new URL(baseUrl, window.location.href).href;\n    const fullUrl = new URL(url || `${realBaseUrl}/${module}`, realBaseUrl);\n    return fullUrl.pathname.match(/\\.js$/g) ? fullUrl.href : `${fullUrl.href}.js`;\n}\n\nconst modulesPromises = {};\n\nexport const loadDynamicModule = (module, url) => {\n    if (modulesPromises[module]) {\n        return modulesPromises[module];\n    }\n\n    var settings = {\n        type: 'GET',\n        dataType: 'text',\n        cache: true,\n        url: getModuleUrl(module, url)\n    };\n\n    const promise = new Promise((resolve, reject) => {\n        request(settings).then((response) => {\n            const func = new Function(\"__visualize__\", \"__jrio__\", \"require\", \"requirejs\", \"define\", response);\n\n            const namespace = {define: defineLocal, require: requireLocal, requirejs: requirejsLocal};\n            func(namespace, namespace, requireLocal, requirejsLocal, defineLocal);\n\n            requireLocal([module], (requireModule) => {\n                resolve(requireModule);\n            }, reject);\n        }).catch(reject);\n    });\n\n    modulesPromises[module] = promise;\n\n    return promise;\n}\n","/*\n * Copyright (C) 2005 - 2022 TIBCO Software Inc. All rights reserved. Confidentiality & Proprietary.\n * Licensed pursuant to commercial TIBCO End User License Agreement.\n */\n\nimport Backbone from 'backbone';\nimport $ from 'jquery';\nimport logger from \"js-sdk/src/common/logging/logger\";\nimport {loadCss} from 'js-sdk/src/common/util/loader/cssLoader';\nimport {loadDynamicModule} from '../../loader/dynamicModuleLoader'\n\nconst localLogger = logger.register(\"CustomJiveComponentView\");\n\nexport default Backbone.View.extend({\n    loadCss: function () {\n        const css = this.model.get('css');\n        css && loadCss(css.href);\n    },\n    render: function () {\n        const renderDeferred = new $.Deferred();\n        const data = this.model.get('instanceData');\n        const script = this.model.get('script');\n\n        this.loadCss();\n\n        loadDynamicModule(script.name, script.href).then((renderer) => {\n            // Cleanup the DIV...\n            // This is due to a bug in the interactive viewer which\n            // inovkes the component twice.\n            $('#' + data.id + ' svg').remove();\n            renderer(data);\n            renderDeferred.resolve();\n        }).catch((err) => {\n            localLogger.debug(err);\n            renderDeferred.reject(err);\n        });\n\n        return renderDeferred;\n    }\n});","/*\n * Copyright (C) 2005 - 2022 TIBCO Software Inc. All rights reserved.\n * http://www.jaspersoft.com.\n *\n * Unless you have purchased a commercial license agreement from Jaspersoft,\n * the following license terms apply:\n *\n * This program is free software: you can redistribute it and/or modify\n * it under the terms of the GNU Affero General Public License as\n * published by the Free Software Foundation, either version 3 of the\n * License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the\n * GNU Affero General Public License for more details.\n *\n * You should have received a copy of the GNU Affero General Public License\n * along with this program. If not, see <http://www.gnu.org/licenses/>.\n */\n\n/*global document */\n\nconst cssRegistry = {};\n\nexport const loadCss = (url, cache = true) => {\n    if (cache && cssRegistry[url]) {\n        return cssRegistry[url];\n    }\n\n    const link = document.createElement('link');\n    link.type = 'text/css';\n    link.rel = 'stylesheet';\n    link.href = url;\n\n    document.getElementsByTagName('head')[0].appendChild(link);\n\n    cssRegistry[url] = link;\n\n    return cssRegistry[url];\n}"],"sourceRoot":""}