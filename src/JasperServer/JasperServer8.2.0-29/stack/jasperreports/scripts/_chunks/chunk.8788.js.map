{"version":3,"sources":["webpack://jrs-ui/./runtime_dependencies/iscroll/src/iscroll.js","webpack://jrs-ui/./runtime_dependencies/jquery-ui/ui/data.js","webpack://jrs-ui/./runtime_dependencies/jquery-ui/ui/plugin.js","webpack://jrs-ui/./runtime_dependencies/jquery-ui/ui/safe-active-element.js","webpack://jrs-ui/./runtime_dependencies/jquery-ui/ui/safe-blur.js","webpack://jrs-ui/./runtime_dependencies/jquery-ui/ui/widgets/draggable.js","webpack://jrs-ui/./runtime_dependencies/scriptaculous/src/effects.js","webpack://jrs-ui/./runtime_dependencies/scriptaculous/src/builder.js","webpack://jrs-ui/./runtime_dependencies/scriptaculous/src/dragdrop.js"],"names":["m","vendor","has3d","hasTouch","hasTransform","isAndroid","isIDevice","isPlaybook","hasTransitionEnd","nextFrame","cancelFrame","RESIZE_EV","START_EV","MOVE_EV","END_EV","CANCEL_EV","WHEEL_EV","trnOpen","trnClose","iScroll","Math","test","navigator","appVersion","userAgent","window","WebKitCSSMatrix","document","documentElement","style","requestAnimationFrame","webkitRequestAnimationFrame","mozRequestAnimationFrame","oRequestAnimationFrame","msRequestAnimationFrame","callback","setTimeout","cancelRequestAnimationFrame","webkitCancelRequestAnimationFrame","mozCancelRequestAnimationFrame","oCancelRequestAnimationFrame","msCancelRequestAnimationFrame","clearTimeout","el","options","i","that","this","doc","wrapper","getElementById","overflow","scroller","children","hScroll","vScroll","bounce","bounceLock","momentum","lockDirection","useTransform","useTransition","checkDOMChanges","hScrollbar","vScrollbar","fixedScrollbar","hideScrollbar","fadeScrollbar","scrollbarClass","zoom","zoomMin","zoomMax","doubleTapZoom","wheelAction","snap","snapThreshold","onRefresh","onBeforeScrollStart","e","preventDefault","onScrollStart","onBeforeScrollMove","onScrollMove","onBeforeScrollEnd","onScrollEnd","onTouchEnd","onDestroy","onZoomStart","onZoom","onZoomEnd","toLowerCase","cssText","refresh","_bind","checkDOMTime","setInterval","_checkDOMChanges","prototype","enabled","x","y","steps","scale","currPageX","currPageY","pagesX","pagesY","aniTime","wheelZoomCount","handleEvent","type","button","_start","_move","_end","_resize","_wheel","_mouseout","_transitionEnd","moved","zoomed","animating","scrollerW","offsetWidth","scrollerH","offsetHeight","_scrollbar","dir","bar","createElement","className","toUpperCase","appendChild","hScrollbarSize","hScrollbarWrapper","clientWidth","hScrollbarIndicatorSize","max","round","hScrollbarIndicator","width","hScrollbarMaxScroll","hScrollbarProp","maxScrollX","vScrollbarSize","vScrollbarWrapper","clientHeight","vScrollbarIndicatorSize","vScrollbarIndicator","height","vScrollbarMaxScroll","vScrollbarProp","maxScrollY","_scrollbarPos","parentNode","removeChild","_pos","left","top","hidden","size","pos","opacity","matrix","c1","c2","point","touches","scrolling","scrollTimer","Draggables","dragging","length","call","_transitionTime","distX","distY","absDistX","absDistY","dirX","dirY","abs","pageX","pageY","touchesDistStart","sqrt","originX","wrapperOffsetLeft","originY","wrapperOffsetTop","getComputedStyle","replace","split","_unbind","absStartX","absStartY","startX","startY","pointX","pointY","startTime","timeStamp","Date","getTime","deltaX","deltaY","newX","newY","timestamp","touchesDist","scaleMin","pow","scaleMax","lastScale","target","ev","newDuration","changedTouches","momentumX","dist","time","momentumY","duration","newPosX","newPosY","min","doubleTapTimer","nodeType","tagName","createEvent","initMouseEvent","view","screenX","screenY","clientX","clientY","ctrlKey","altKey","shiftKey","metaKey","_fake","dispatchEvent","_resetPos","scrollEvent","_momentum","wrapperW","wrapperH","scrollTo","_snap","resetX","resetY","wheelDeltaX","wheelDeltaY","detail","wheelDelta","t","relatedTarget","_startAni","step","easeOut","shift","animate","now","onAnimationEnd","maxDistUpper","maxDistLower","newTime","deceleration","speed","newDist","_offset","offsetLeft","offsetTop","offsetParent","l","page","sizeX","sizeY","bubble","addEventListener","removeEventListener","destroy","clearInterval","offset","els","querySelectorAll","relative","stop","push","scrollToElement","querySelector","undefined","scrollToPage","disable","enable","relScale","isReady","exports","factory","define","$","extend","expr","pseudos","data","createPseudo","dataName","elem","match","ui","plugin","add","module","option","set","proto","plugins","instance","name","args","allowDisconnected","element","apply","safeActiveElement","activeElement","error","body","nodeName","safeBlur","trigger","widget","mouse","version","widgetEventPrefix","addClasses","appendTo","axis","connectToSortable","containment","cursor","cursorAt","grid","handle","helper","iframeFix","refreshPositions","revert","revertDuration","scope","scroll","scrollSensitivity","scrollSpeed","snapMode","snapTolerance","stack","zIndex","drag","start","_create","_setPositionRelative","_addClass","_setHandleClassName","_mouseInit","_setOption","key","value","_super","_removeHandleClassName","_destroy","is","destroyOnClear","_mouseDestroy","_mouseCapture","event","o","disabled","closest","_getHandle","_blurActiveElement","_blockFrames","selector","iframeBlocks","find","map","iframe","css","parent","outerWidth","outerHeight","_unblockFrames","remove","_mouseStart","_createHelper","_cacheHelperProportions","ddmanager","current","_cacheMargins","cssPosition","scrollParent","hasFixedAncestor","parents","filter","positionAbs","_refreshOffsets","originalPosition","position","_generatePosition","originalPageX","originalPageY","_adjustOffsetFromHelper","_setContainment","_trigger","_clear","dropBehaviour","prepareOffsets","_mouseDrag","dragStart","margins","_getParentOffset","_getRelativeOffset","click","noPropagation","_convertPositionTo","_uiHash","_mouseUp","Event","_mouseStop","dropped","drop","parseInt","dragStop","handleElement","cancel","_removeClass","helperIsFunction","clone","removeAttr","obj","Array","isArray","helperProportions","right","bottom","_isRootNode","po","contains","scrollLeft","scrollTop","p","scrollIsRootNode","isUserScrollable","c","ce","relativeContainer","constructor","scrollWidth","scrollHeight","d","mod","constrainPosition","co","cancelHelperRemoval","Widget","draggable","uiSortable","item","sortables","each","sortable","isOver","_storedCSS","placeholder","_helper","innermostIntersecting","_intersectsWith","containerCache","_parent","currentItem","fromOutside","_revert","_cursor","_opacity","scrollParentNotHidden","overflowOffset","scrolled","snapElements","String","items","$t","$o","inst","ts","bs","ls","rs","r","b","first","x1","x2","y1","y2","ownerDocument","snapping","release","snapItem","group","makeArray","sort","a","_zIndex","parseColor","color","slice","cols","toColorPart","charAt","arguments","Element","collectTextNodes","$A","childNodes","collect","node","nodeValue","hasChildNodes","flatten","join","collectTextNodesIgnoreClass","hasClassName","setContentZoom","percent","setStyle","fontSize","Prototype","Browser","WebKit","scrollBy","getInlineOpacity","forceRerendering","n","createTextNode","Effect","_elementDoesNotExistError","message","Transitions","linear","K","sinoidal","cos","PI","reverse","flicker","random","wobble","pulse","pulses","spring","exp","none","full","DefaultOptions","fps","sync","from","to","delay","queue","tagifyText","tagifyStyle","IE","child","toArray","character","insertBefore","update","fromCharCode","multiple","effect","elements","Object","isFunction","masterDelay","index","PAIRS","toggle","visible","id","limit","transition","ScopedQueue","Class","create","Enumerable","initialize","effects","interval","_each","iterator","isString","findAll","state","startOn","finishOn","pluck","loop","bind","reject","timePos","len","Queues","instances","$H","get","queueName","Queue","Base","currentFrame","fromToDelta","totalTime","totalFrames","render","dispatch","eventName","setup","finish","frame","inspect","property","Parallel","invoke","Tween","object","method","last","emptyFunction","Opacity","currentStyle","hasLayout","getOpacity","setOpacity","Move","mode","makePositioned","originalLeft","parseFloat","getStyle","originalTop","MoveBy","toTop","toLeft","Scale","scaleX","scaleY","scaleContent","scaleFromCenter","scaleMode","scaleFrom","scaleTo","restoreAfterFinish","elementPositioning","originalStyle","k","fontSizeType","indexOf","factor","dims","originalHeight","originalWidth","currentScale","setDimensions","topd","leftd","Highlight","startcolor","oldStyle","keepBackgroundImage","backgroundImage","endcolor","restorecolor","_base","$R","_delta","backgroundColor","inject","v","ScrollTo","scrollOffsets","viewport","getScrollOffsets","elementOffsets","cumulativeOffset","Fade","oldOpacity","afterFinishInternal","hide","Appear","beforeSetup","show","Puff","beforeSetupInternal","Position","absolutize","BlindUp","makeClipping","undoClipping","BlindDown","elementDimensions","getDimensions","afterSetup","SwitchOff","undoPositioned","DropOut","Shake","distance","SlideDown","oldInnerBottom","cleanWhitespace","down","opera","afterUpdateInternal","SlideUp","Squish","Grow","initialMoveX","initialMoveY","moveX","moveY","direction","moveTransition","scaleTransition","opacityTransition","Shrink","beforeStartInternal","Pulsate","reverser","Fold","Morph","include","parseStyle","addClassName","getStyles","removeClassName","transforms","transform","pair","unit","CSS_LENGTH","components","originalValue","camelize","targetValue","isNaN","toFixed","Transform","tracks","addTracks","track","values","ids","keys","play","$$","CSS_PROPERTIES","$w","__parseStyleElement","styleRules","innerHTML","s","escapeXSS","Error","_escapeXSS","defaultView","styles","results","Methods","morph","visualEffect","dasherize","klass","substring","highlight","f","addMethods","global","Builder","NODEMAP","AREA","CAPTION","COL","COLGROUP","LEGEND","OPTGROUP","OPTION","PARAM","TBODY","TD","TFOOT","TH","THEAD","TR","elementName","parentTag","parentElement","firstChild","getElementsByTagName","_isStringOrNumber","_children","attrs","_attributes","attr","_text","text","ATTR_MAP","attributes","attribute","toString","escapeHTML","gsub","param","build","html","strip","dump","tag","concat","isUndefined","Droppables","drops","greedy","hoverclass","tree","_containers","accept","findDeepestChild","deepest","isParent","isContained","containmentNode","treeNode","detect","isAffected","classNames","within","deactivate","last_active","activate","affected","onHover","overlap","fire","pointer","prepare","supportsTouch","_lastPointer","pointerX","pointerY","onDrop","reset","DEFAULT_TOLERANCE","BrowserFeatures","SupportsTouch","drags","observers","register","eventMouseUp","endDrag","bindAsEventListener","eventMouseMove","updateDrag","eventKeypress","keyPress","observe","unregister","stopObserving","_timeout","focus","activeDraggable","pointerInRadius","radius","addObserver","observer","_cacheObserverCallbacks","removeObserver","notify","select","Draggable","defaults","reverteffect","top_offset","left_offset","dur","endeffect","_dragging","zindex","quiet","starteffect","outerHTML","_isScrollChild","childOf","eventMouseDown","initDrag","currentDelta","leftStyle","topStyle","getWidth","getHeight","isLeftClick","src","tag_name","countdown","targetEvent","startDrag","delta","originalZ","ghosting","_clone","cloneNode","_originallyAbsolute","where","_getWindowScroll","originalScrollLeft","originalScrollTop","isIE7","draw","change","stopScrolling","startScrolling","finishDrag","success","relativize","onDropped","keyCode","KEY_ESC","realOffset","constraint","visibility","scrollInterval","_lastScrollPointer","lastScrolled","w","T","L","W","H","innerWidth","innerHeight","SortableObserver","lastValue","Sortable","serialize","onStart","onEnd","unmark","SERIALIZE_RULE","_findRootElement","droppables","draggables","getSortableObserverConstructor","dropOnEmpty","treeTag","only","format","handles","onChange","onUpdate","options_for_draggable","options_for_droppable","options_for_tree","onEmptyHover","findElements","findTreeElements","identify","findChildren","dropon","oldParentNode","mark","previousSibling","nextElement","nextSibling","droponOptions","childOffset","offsetSize","ycomp","sourceSortable","_marker","offsets","_tree","encodeURIComponent","container","sortableOptions","root","_constructIndex","sequence","setSequence","new_sequence","nodeMap","ident","callee","recursive","grandchildren"],"mappings":"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","file":"_chunks/chunk.8788.js","sourcesContent":["/*!\n * iScroll v4.1.7 ~ Copyright (c) 2011 Matteo Spinelli, http://cubiq.org\n * Released under MIT license, http://cubiq.org/license\n */\n\n(function(){\nvar m = Math,\n\tvendor = (/webkit/i).test(navigator.appVersion) ? 'webkit' :\n\t\t(/firefox/i).test(navigator.userAgent) ? 'Moz' :\n\t\t'opera' in window ? 'O' : '',\n\n\t// Browser capabilities\n\thas3d = 'WebKitCSSMatrix' in window && 'm11' in new WebKitCSSMatrix(),\n\thasTouch = 'ontouchstart' in window,\n\thasTransform = vendor + 'Transform' in document.documentElement.style,\n\tisAndroid = (/android/gi).test(navigator.appVersion),\n\tisIDevice = (/iphone|ipad/gi).test(navigator.appVersion),\n\tisPlaybook = (/playbook/gi).test(navigator.appVersion),\n\thasTransitionEnd = isIDevice || isPlaybook,\n\tnextFrame = (function() {\n\t    return window.requestAnimationFrame\n\t\t\t|| window.webkitRequestAnimationFrame\n\t\t\t|| window.mozRequestAnimationFrame\n\t\t\t|| window.oRequestAnimationFrame\n\t\t\t|| window.msRequestAnimationFrame\n\t\t\t|| function(callback) { return setTimeout(callback, 1); }\n\t})(),\n\tcancelFrame = (function () {\n\t    return window.cancelRequestAnimationFrame\n\t\t\t|| window.webkitCancelRequestAnimationFrame\n\t\t\t|| window.mozCancelRequestAnimationFrame\n\t\t\t|| window.oCancelRequestAnimationFrame\n\t\t\t|| window.msCancelRequestAnimationFrame\n\t\t\t|| clearTimeout\n\t})(),\n\n\t// Events\n\tRESIZE_EV = 'onorientationchange' in window ? 'orientationchange' : 'resize',\n\tSTART_EV = hasTouch ? 'touchstart' : 'mousedown',\n\tMOVE_EV = hasTouch ? 'touchmove' : 'mousemove',\n\tEND_EV = hasTouch ? 'touchend' : 'mouseup',\n\tCANCEL_EV = hasTouch ? 'touchcancel' : 'mouseup',\n\tWHEEL_EV = vendor == 'Moz' ? 'DOMMouseScroll' : 'mousewheel',\n\n\t// Helpers\n\ttrnOpen = 'translate' + (has3d ? '3d(' : '('),\n\ttrnClose = has3d ? ',0)' : ')',\n\n\t// Constructor\n\tiScroll = function (el, options) {\n\t\tvar that = this,\n\t\t\tdoc = document,\n\t\t\ti;\n\n\t\tthat.wrapper = typeof el == 'object' ? el : doc.getElementById(el);\n\t\tthat.wrapper.style.overflow = 'hidden';\n\t\tthat.scroller = that.wrapper.children[0];\n\n\t\t// Default options\n\t\tthat.options = {\n\t\t\thScroll: true,\n\t\t\tvScroll: true,\n\t\t\tbounce: true,\n\t\t\tbounceLock: false,\n\t\t\tmomentum: true,\n\t\t\tlockDirection: true,\n\t\t\tuseTransform: true,\n\t\t\tuseTransition: false,\n\t\t\tcheckDOMChanges: false,\t\t// Experimental\n\n\t\t\t// Scrollbar\n\t\t\thScrollbar: true,\n\t\t\tvScrollbar: true,\n\t\t\tfixedScrollbar: isAndroid,\n\t\t\thideScrollbar: isIDevice,\n\t\t\tfadeScrollbar: isIDevice && has3d,\n\t\t\tscrollbarClass: '',\n\n\t\t\t// Zoom\n\t\t\tzoom: false,\n\t\t\tzoomMin: 1,\n\t\t\tzoomMax: 4,\n\t\t\tdoubleTapZoom: 2,\n\t\t\twheelAction: 'scroll',\n\n\t\t\t// Snap\n\t\t\tsnap: false,\n\t\t\tsnapThreshold: 1,\n\n\t\t\t// Events\n\t\t\tonRefresh: null,\n\t\t\tonBeforeScrollStart: function (e) { e.preventDefault(); },\n\t\t\tonScrollStart: null,\n\t\t\tonBeforeScrollMove: null,\n\t\t\tonScrollMove: null,\n\t\t\tonBeforeScrollEnd: null,\n\t\t\tonScrollEnd: null,\n\t\t\tonTouchEnd: null,\n\t\t\tonDestroy: null,\n\t\t\tonZoomStart: null,\n\t\t\tonZoom: null,\n\t\t\tonZoomEnd: null\n\t\t};\n\n\t\t// User defined options\n\t\tfor (i in options) that.options[i] = options[i];\n\n\t\t// Normalize options\n\t\tthat.options.useTransform = hasTransform ? that.options.useTransform : false;\n\t\tthat.options.hScrollbar = that.options.hScroll && that.options.hScrollbar;\n\t\tthat.options.vScrollbar = that.options.vScroll && that.options.vScrollbar;\n\t\tthat.options.zoom = that.options.useTransform && that.options.zoom;\n\t\tthat.options.useTransition = hasTransitionEnd && that.options.useTransition;\n\n\t\t// Set some default styles\n\t\tthat.scroller.style[vendor + 'TransitionProperty'] = that.options.useTransform ? '-' + vendor.toLowerCase() + '-transform' : 'top left';\n\t\tthat.scroller.style[vendor + 'TransitionDuration'] = '0';\n\t\tthat.scroller.style[vendor + 'TransformOrigin'] = '0 0';\n\t\tif (that.options.useTransition) that.scroller.style[vendor + 'TransitionTimingFunction'] = 'cubic-bezier(0.33,0.66,0.66,1)';\n\n\t\tif (that.options.useTransform) that.scroller.style[vendor + 'Transform'] = trnOpen + '0,0' + trnClose;\n\t\telse that.scroller.style.cssText += ';position:absolute;top:0;left:0';\n\n\t\tif (that.options.useTransition) that.options.fixedScrollbar = true;\n\n\t\tthat.refresh();\n\n\t\tthat._bind(RESIZE_EV, window);\n\t\tthat._bind(START_EV);\n\t\tif (!hasTouch) {\n\t\t\tthat._bind('mouseout', that.wrapper);\n\t\t\tthat._bind(WHEEL_EV);\n\t\t}\n\n\t\tif (that.options.checkDOMChanges) that.checkDOMTime = setInterval(function () {\n\t\t\tthat._checkDOMChanges();\n\t\t}, 500);\n\t};\n\n// Prototype\niScroll.prototype = {\n\tenabled: true,\n\tx: 0,\n\ty: 0,\n\tsteps: [],\n\tscale: 1,\n\tcurrPageX: 0, currPageY: 0,\n\tpagesX: [], pagesY: [],\n\taniTime: null,\n\twheelZoomCount: 0,\n\n\thandleEvent: function (e) {\n\t\tvar that = this;\n\t\tswitch(e.type) {\n\t\t\tcase START_EV:\n\t\t\t\tif (!hasTouch && e.button !== 0) return;\n\t\t\t\tthat._start(e);\n\t\t\t\tbreak;\n\t\t\tcase MOVE_EV: that._move(e); break;\n\t\t\tcase END_EV:\n\t\t\tcase CANCEL_EV: that._end(e); break;\n\t\t\tcase RESIZE_EV: that._resize(); break;\n\t\t\tcase WHEEL_EV: that._wheel(e); break;\n\t\t\tcase 'mouseout': that._mouseout(e); break;\n\t\t\tcase 'webkitTransitionEnd': that._transitionEnd(e); break;\n\t\t}\n\t},\n\n\t_checkDOMChanges: function () {\n\t\tif (this.moved || this.zoomed || this.animating ||\n\t\t\t(this.scrollerW == this.scroller.offsetWidth * this.scale && this.scrollerH == this.scroller.offsetHeight * this.scale)) return;\n\n\t\tthis.refresh();\n\t},\n\n\t_scrollbar: function (dir) {\n\t\tvar that = this,\n\t\t\tdoc = document,\n\t\t\tbar;\n\n\t\tif (!that[dir + 'Scrollbar']) {\n\t\t\tif (that[dir + 'ScrollbarWrapper']) {\n\t\t\t\tif (hasTransform) that[dir + 'ScrollbarIndicator'].style[vendor + 'Transform'] = '';\n\t\t\t\tthat[dir + 'ScrollbarWrapper'].parentNode.removeChild(that[dir + 'ScrollbarWrapper']);\n\t\t\t\tthat[dir + 'ScrollbarWrapper'] = null;\n\t\t\t\tthat[dir + 'ScrollbarIndicator'] = null;\n\t\t\t}\n\n\t\t\treturn;\n\t\t}\n\n\t\tif (!that[dir + 'ScrollbarWrapper']) {\n\t\t\t// Create the scrollbar wrapper\n\t\t\tbar = doc.createElement('div');\n\n\t\t\tif (that.options.scrollbarClass) bar.className = that.options.scrollbarClass + dir.toUpperCase();\n\t\t\telse bar.style.cssText = 'position:absolute;z-index:100;' + (dir == 'h' ? 'height:7px;bottom:1px;left:2px;right:' + (that.vScrollbar ? '7' : '2') + 'px' : 'width:7px;bottom:' + (that.hScrollbar ? '7' : '2') + 'px;top:2px;right:1px');\n\n\t\t\tbar.style.cssText += ';pointer-events:none;-' + vendor + '-transition-property:opacity;-' + vendor + '-transition-duration:' + (that.options.fadeScrollbar ? '350ms' : '0') + ';overflow:hidden;opacity:' + (that.options.hideScrollbar ? '0' : '1');\n\n\t\t\tthat.wrapper.appendChild(bar);\n\t\t\tthat[dir + 'ScrollbarWrapper'] = bar;\n\n\t\t\t// Create the scrollbar indicator\n\t\t\tbar = doc.createElement('div');\n\t\t\tif (!that.options.scrollbarClass) {\n\t\t\t\tbar.style.cssText = 'position:absolute;z-index:100;background:rgba(0,0,0,0.5);border:1px solid rgba(255,255,255,0.9);-' + vendor + '-background-clip:padding-box;-' + vendor + '-box-sizing:border-box;' + (dir == 'h' ? 'height:100%' : 'width:100%') + ';-' + vendor + '-border-radius:3px;border-radius:3px';\n\t\t\t}\n\t\t\tbar.style.cssText += ';pointer-events:none;-' + vendor + '-transition-property:-' + vendor + '-transform;-' + vendor + '-transition-timing-function:cubic-bezier(0.33,0.66,0.66,1);-' + vendor + '-transition-duration:0;-' + vendor + '-transform:' + trnOpen + '0,0' + trnClose;\n\t\t\tif (that.options.useTransition) bar.style.cssText += ';-' + vendor + '-transition-timing-function:cubic-bezier(0.33,0.66,0.66,1)';\n\n\t\t\tthat[dir + 'ScrollbarWrapper'].appendChild(bar);\n\t\t\tthat[dir + 'ScrollbarIndicator'] = bar;\n\t\t}\n\n\t\tif (dir == 'h') {\n\t\t\tthat.hScrollbarSize = that.hScrollbarWrapper.clientWidth;\n\t\t\tthat.hScrollbarIndicatorSize = m.max(m.round(that.hScrollbarSize * that.hScrollbarSize / that.scrollerW), 8);\n\t\t\tthat.hScrollbarIndicator.style.width = that.hScrollbarIndicatorSize + 'px';\n\t\t\tthat.hScrollbarMaxScroll = that.hScrollbarSize - that.hScrollbarIndicatorSize;\n\t\t\tthat.hScrollbarProp = that.hScrollbarMaxScroll / that.maxScrollX;\n\t\t} else {\n\t\t\tthat.vScrollbarSize = that.vScrollbarWrapper.clientHeight;\n\t\t\tthat.vScrollbarIndicatorSize = m.max(m.round(that.vScrollbarSize * that.vScrollbarSize / that.scrollerH), 8);\n\t\t\tthat.vScrollbarIndicator.style.height = that.vScrollbarIndicatorSize + 'px';\n\t\t\tthat.vScrollbarMaxScroll = that.vScrollbarSize - that.vScrollbarIndicatorSize;\n\t\t\tthat.vScrollbarProp = that.vScrollbarMaxScroll / that.maxScrollY;\n\t\t}\n\n\t\t// Reset position\n\t\tthat._scrollbarPos(dir, true);\n\t},\n\n\t_resize: function () {\n\t\tvar that = this;\n\t\tsetTimeout(function () { that.refresh(); }, isAndroid ? 200 : 0);\n\t},\n\n\t_pos: function (x, y) {\n\t\tx = this.hScroll ? x : 0;\n\t\ty = this.vScroll ? y : 0;\n\n\t\tif (this.options.useTransform) {\n\t\t\tthis.scroller.style[vendor + 'Transform'] = trnOpen + x + 'px,' + y + 'px' + trnClose + ' scale(' + this.scale + ')';\n\t\t} else {\n\t\t\tx = m.round(x);\n\t\t\ty = m.round(y);\n\t\t\tthis.scroller.style.left = x + 'px';\n\t\t\tthis.scroller.style.top = y + 'px';\n\t\t}\n\n\t\tthis.x = x;\n\t\tthis.y = y;\n\n\t\tthis._scrollbarPos('h');\n\t\tthis._scrollbarPos('v');\n\t},\n\n\t_scrollbarPos: function (dir, hidden) {\n\t\tvar that = this,\n\t\t\tpos = dir == 'h' ? that.x : that.y,\n\t\t\tsize;\n\n\t\tif (!that[dir + 'Scrollbar']) return;\n\n\t\tpos = that[dir + 'ScrollbarProp'] * pos;\n\n\t\tif (pos < 0) {\n\t\t\tif (!that.options.fixedScrollbar) {\n\t\t\t\tsize = that[dir + 'ScrollbarIndicatorSize'] + m.round(pos * 3);\n\t\t\t\tif (size < 8) size = 8;\n\t\t\t\tthat[dir + 'ScrollbarIndicator'].style[dir == 'h' ? 'width' : 'height'] = size + 'px';\n\t\t\t}\n\t\t\tpos = 0;\n\t\t} else if (pos > that[dir + 'ScrollbarMaxScroll']) {\n\t\t\tif (!that.options.fixedScrollbar) {\n\t\t\t\tsize = that[dir + 'ScrollbarIndicatorSize'] - m.round((pos - that[dir + 'ScrollbarMaxScroll']) * 3);\n\t\t\t\tif (size < 8) size = 8;\n\t\t\t\tthat[dir + 'ScrollbarIndicator'].style[dir == 'h' ? 'width' : 'height'] = size + 'px';\n\t\t\t\tpos = that[dir + 'ScrollbarMaxScroll'] + (that[dir + 'ScrollbarIndicatorSize'] - size);\n\t\t\t} else {\n\t\t\t\tpos = that[dir + 'ScrollbarMaxScroll'];\n\t\t\t}\n\t\t}\n\n\t\tthat[dir + 'ScrollbarWrapper'].style[vendor + 'TransitionDelay'] = '0';\n\t\tthat[dir + 'ScrollbarWrapper'].style.opacity = hidden && that.options.hideScrollbar ? '0' : '1';\n\t\tthat[dir + 'ScrollbarIndicator'].style[vendor + 'Transform'] = trnOpen + (dir == 'h' ? pos + 'px,0' : '0,' + pos + 'px') + trnClose;\n\t},\n\n\t_start: function (e) {\n\t\tvar that = this,\n\t\t\tpoint = hasTouch ? e.touches[0] : e,\n\t\t\tmatrix, x, y,\n\t\t\tc1, c2;\n\n            iScroll.scrolling = false;\n            clearTimeout(iScroll.scrollTimer);\n\n\t\tif (!that.enabled || Draggables.dragging || e.touches.length < 2) return;\n\n\t\tif (that.options.onBeforeScrollStart) that.options.onBeforeScrollStart.call(that, e);\n\n\t\tif (that.options.useTransition || that.options.zoom) that._transitionTime(0);\n\n\t\tthat.moved = false;\n\t\tthat.animating = false;\n\t\tthat.zoomed = false;\n\t\tthat.distX = 0;\n\t\tthat.distY = 0;\n\t\tthat.absDistX = 0;\n\t\tthat.absDistY = 0;\n\t\tthat.dirX = 0;\n\t\tthat.dirY = 0;\n\n\t\t// Gesture start\n\t\tif (that.options.zoom && hasTouch && e.touches.length > 1) {\n\t\t\tc1 = m.abs(e.touches[0].pageX-e.touches[1].pageX);\n\t\t\tc2 = m.abs(e.touches[0].pageY-e.touches[1].pageY);\n\t\t\tthat.touchesDistStart = m.sqrt(c1 * c1 + c2 * c2);\n\n\t\t\tthat.originX = m.abs(e.touches[0].pageX + e.touches[1].pageX - that.wrapperOffsetLeft * 2) / 2 - that.x;\n\t\t\tthat.originY = m.abs(e.touches[0].pageY + e.touches[1].pageY - that.wrapperOffsetTop * 2) / 2 - that.y;\n\n\t\t\tif (that.options.onZoomStart) that.options.onZoomStart.call(that, e);\n\t\t}\n\n\t\tif (that.options.momentum) {\n\t\t\tif (that.options.useTransform) {\n\t\t\t\t// Very lame general purpose alternative to CSSMatrix\n\t\t\t\tmatrix = getComputedStyle(that.scroller, null)[vendor + 'Transform'].replace(/[^0-9-.,]/g, '').split(',');\n\t\t\t\tx = matrix[4] * 1;\n\t\t\t\ty = matrix[5] * 1;\n\t\t\t} else {\n\t\t\t\tx = getComputedStyle(that.scroller, null).left.replace(/[^0-9-]/g, '') * 1;\n\t\t\t\ty = getComputedStyle(that.scroller, null).top.replace(/[^0-9-]/g, '') * 1;\n\t\t\t}\n\n\t\t\tif (x != that.x || y != that.y) {\n\t\t\t\tif (that.options.useTransition) that._unbind('webkitTransitionEnd');\n\t\t\t\telse cancelFrame(that.aniTime);\n\t\t\t\tthat.steps = [];\n\t\t\t\tthat._pos(x, y);\n\t\t\t}\n\t\t}\n\n\t\tthat.absStartX = that.x;\t// Needed by snap threshold\n\t\tthat.absStartY = that.y;\n\n\t\tthat.startX = that.x;\n\t\tthat.startY = that.y;\n\t\tthat.pointX = point.pageX;\n\t\tthat.pointY = point.pageY;\n\n\t\tthat.startTime = e.timeStamp || (new Date()).getTime();\n\n\t\tif (that.options.onScrollStart) that.options.onScrollStart.call(that, e);\n\n\t\tthat._bind(MOVE_EV);\n\t\tthat._bind(END_EV);\n\t\tthat._bind(CANCEL_EV);\n\n\t\tiScroll.scrolling = true;\n\t},\n\n\t_move: function (e) {\n\t\tvar that = this,\n\t\t\tpoint = hasTouch ? e.touches[0] : e,\n\t\t\tdeltaX = point.pageX - that.pointX,\n\t\t\tdeltaY = point.pageY - that.pointY,\n\t\t\tnewX = that.x + deltaX,\n\t\t\tnewY = that.y + deltaY,\n\t\t\tc1, c2, scale,\n\t\t\ttimestamp = e.timeStamp || (new Date()).getTime();\n\n\t\tif (that.options.onBeforeScrollMove) that.options.onBeforeScrollMove.call(that, e);\n\n\t\t// Zoom\n\t\tif (that.options.zoom && hasTouch && e.touches.length > 1) {\n\t\t\tc1 = m.abs(e.touches[0].pageX - e.touches[1].pageX);\n\t\t\tc2 = m.abs(e.touches[0].pageY - e.touches[1].pageY);\n\t\t\tthat.touchesDist = m.sqrt(c1*c1+c2*c2);\n\n\t\t\tthat.zoomed = true;\n\n\t\t\tscale = 1 / that.touchesDistStart * that.touchesDist * this.scale;\n\n\t\t\tif (scale < that.options.scaleMin) scale = 0.5 * that.options.scaleMin * Math.pow(2.0, scale / that.options.scaleMin);\n\t\t\telse if (scale > that.options.scaleMax) scale = 2.0 * that.options.scaleMax * Math.pow(0.5, that.options.scaleMax / scale);\n\n\t\t\tthat.lastScale = scale / this.scale;\n\n\t\t\tnewX = this.originX - this.originX * that.lastScale + this.x,\n\t\t\tnewY = this.originY - this.originY * that.lastScale + this.y;\n\n\t\t\tthis.scroller.style[vendor + 'Transform'] = trnOpen + newX + 'px,' + newY + 'px' + trnClose + ' scale(' + scale + ')';\n\n\t\t\tif (that.options.onZoom) that.options.onZoom.call(that, e);\n\t\t\treturn;\n\t\t}\n\n\t\tthat.pointX = point.pageX;\n\t\tthat.pointY = point.pageY;\n\n\t\t// Slow down if outside of the boundaries\n\t\tif (newX > 0 || newX < that.maxScrollX) {\n\t\t\tnewX = that.options.bounce ? that.x + (deltaX / 2) : newX >= 0 || that.maxScrollX >= 0 ? 0 : that.maxScrollX;\n\t\t}\n\t\tif (newY > 0 || newY < that.maxScrollY) {\n\t\t\tnewY = that.options.bounce ? that.y + (deltaY / 2) : newY >= 0 || that.maxScrollY >= 0 ? 0 : that.maxScrollY;\n\t\t}\n\n\t\tif (that.absDistX < 6 && that.absDistY < 6) {\n\t\t\tthat.distX += deltaX;\n\t\t\tthat.distY += deltaY;\n\t\t\tthat.absDistX = m.abs(that.distX);\n\t\t\tthat.absDistY = m.abs(that.distY);\n\n\t\t\treturn;\n\t\t}\n\n\t\t// Lock direction\n\t\tif (that.options.lockDirection) {\n\t\t\tif (that.absDistX > that.absDistY + 5) {\n\t\t\t\tnewY = that.y;\n\t\t\t\tdeltaY = 0;\n\t\t\t} else if (that.absDistY > that.absDistX + 5) {\n\t\t\t\tnewX = that.x;\n\t\t\t\tdeltaX = 0;\n\t\t\t}\n\t\t}\n\n\t\tthat.moved = true;\n\t\tthat._pos(newX, newY);\n\t\tthat.dirX = deltaX > 0 ? -1 : deltaX < 0 ? 1 : 0;\n\t\tthat.dirY = deltaY > 0 ? -1 : deltaY < 0 ? 1 : 0;\n\n\t\tif (timestamp - that.startTime > 300) {\n\t\t\tthat.startTime = timestamp;\n\t\t\tthat.startX = that.x;\n\t\t\tthat.startY = that.y;\n\t\t}\n\n\t\tif (that.options.onScrollMove) that.options.onScrollMove.call(that, e);\n\t},\n\n\t_end: function (e) {\n\t\tif (hasTouch && e.touches.length != 0) return;\n\n\t\tvar that = this,\n\t\t\tpoint = hasTouch ? e.changedTouches[0] : e,\n\t\t\ttarget, ev,\n\t\t\tmomentumX = { dist:0, time:0 },\n\t\t\tmomentumY = { dist:0, time:0 },\n\t\t\tduration = (e.timeStamp || (new Date()).getTime()) - that.startTime,\n\t\t\tnewPosX = that.x,\n\t\t\tnewPosY = that.y,\n\t\t\tdistX, distY,\n\t\t\tnewDuration,\n\t\t\tscale;\n\n\t\tthat._unbind(MOVE_EV);\n\t\tthat._unbind(END_EV);\n\t\tthat._unbind(CANCEL_EV);\n\n\t\tiScroll.scrollTimer = setTimeout(function() {\n\t\t\t\tiScroll.scrolling = false;\n\t\t}, 1000);\n\n\n\t\tif (that.options.onBeforeScrollEnd) that.options.onBeforeScrollEnd.call(that, e);\n\n\t\tif (that.zoomed) {\n\t\t\tscale = that.scale * that.lastScale;\n\t\t\tscale = Math.max(that.options.zoomMin, scale);\n\t\t\tscale = Math.min(that.options.zoomMax, scale);\n\t\t\tthat.lastScale = scale / that.scale;\n\t\t\tthat.scale = scale;\n\n\t\t\tthat.x = that.originX - that.originX * that.lastScale + that.x;\n\t\t\tthat.y = that.originY - that.originY * that.lastScale + that.y;\n\n\t\t\tthat.scroller.style[vendor + 'TransitionDuration'] = '200ms';\n\t\t\tthat.scroller.style[vendor + 'Transform'] = trnOpen + that.x + 'px,' + that.y + 'px' + trnClose + ' scale(' + that.scale + ')';\n\n\t\t\tthat.zoomed = false;\n\t\t\tthat.refresh();\n\n\t\t\tif (that.options.onZoomEnd) that.options.onZoomEnd.call(that, e);\n\t\t\treturn;\n\t\t}\n\n\t\tif (!that.moved) {\n\t\t\tif (hasTouch) {\n\t\t\t\tif (that.doubleTapTimer && that.options.zoom) {\n\t\t\t\t\t// Double tapped\n\t\t\t\t\tclearTimeout(that.doubleTapTimer);\n\t\t\t\t\tthat.doubleTapTimer = null;\n\t\t\t\t\tif (that.options.onZoomStart) that.options.onZoomStart.call(that, e);\n\t\t\t\t\tthat.zoom(that.pointX, that.pointY, that.scale == 1 ? that.options.doubleTapZoom : 1);\n\t\t\t\t} else {\n\t\t\t\t\tthat.doubleTapTimer = setTimeout(function () {\n\t\t\t\t\t\tthat.doubleTapTimer = null;\n\n\t\t\t\t\t\t// Find the last touched element\n\t\t\t\t\t\ttarget = point.target;\n\t\t\t\t\t\twhile (target.nodeType != 1) target = target.parentNode;\n\n\t\t\t\t\t\tif (target.tagName != 'SELECT' && target.tagName != 'INPUT' && target.tagName != 'TEXTAREA') {\n\t\t\t\t\t\t\tev = document.createEvent('MouseEvents');\n\t\t\t\t\t\t\tev.initMouseEvent('click', true, true, e.view, 1,\n\t\t\t\t\t\t\t\tpoint.screenX, point.screenY, point.clientX, point.clientY,\n\t\t\t\t\t\t\t\te.ctrlKey, e.altKey, e.shiftKey, e.metaKey,\n\t\t\t\t\t\t\t\t0, null);\n\t\t\t\t\t\t\tev._fake = true;\n\t\t\t\t\t\t\ttarget.dispatchEvent(ev);\n\t\t\t\t\t\t}\n\t\t\t\t\t}, that.options.zoom ? 250 : 0);\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tthat._resetPos(200);\n\n\t\t\tif (that.options.onTouchEnd) that.options.onTouchEnd.call(that, e);\n                return;\n\t\t\t} else {\n                e.scrollEvent = true;\n            }\n\n\t\tif (duration < 300 && that.options.momentum) {\n\t\t\tmomentumX = newPosX ? that._momentum(newPosX - that.startX, duration, -that.x, that.scrollerW - that.wrapperW + that.x, that.options.bounce ? that.wrapperW : 0) : momentumX;\n\t\t\tmomentumY = newPosY ? that._momentum(newPosY - that.startY, duration, -that.y, (that.maxScrollY < 0 ? that.scrollerH - that.wrapperH + that.y : 0), that.options.bounce ? that.wrapperH : 0) : momentumY;\n\n\t\t\tnewPosX = that.x + momentumX.dist;\n\t\t\tnewPosY = that.y + momentumY.dist;\n\n \t\t\tif ((that.x > 0 && newPosX > 0) || (that.x < that.maxScrollX && newPosX < that.maxScrollX)) momentumX = { dist:0, time:0 };\n \t\t\tif ((that.y > 0 && newPosY > 0) || (that.y < that.maxScrollY && newPosY < that.maxScrollY)) momentumY = { dist:0, time:0 };\n\t\t}\n\n\t\tif (momentumX.dist || momentumY.dist) {\n\t\t\tnewDuration = m.max(m.max(momentumX.time, momentumY.time), 10);\n\n\t\t\t// Do we need to snap?\n\t\t\tif (that.options.snap) {\n\t\t\t\tdistX = newPosX - that.absStartX;\n\t\t\t\tdistY = newPosY - that.absStartY;\n\t\t\t\tif (m.abs(distX) < that.options.snapThreshold && m.abs(distY) < that.options.snapThreshold) { that.scrollTo(that.absStartX, that.absStartY, 200); }\n\t\t\t\telse {\n\t\t\t\t\tsnap = that._snap(newPosX, newPosY);\n\t\t\t\t\tnewPosX = snap.x;\n\t\t\t\t\tnewPosY = snap.y;\n\t\t\t\t\tnewDuration = m.max(snap.time, newDuration);\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tthat.scrollTo(newPosX, newPosY, newDuration);\n\n\t\t\tif (that.options.onTouchEnd) that.options.onTouchEnd.call(that, e);\n\t\t\treturn;\n\t\t}\n\n\t\t// Do we need to snap?\n\t\tif (that.options.snap) {\n\t\t\tdistX = newPosX - that.absStartX;\n\t\t\tdistY = newPosY - that.absStartY;\n\t\t\tif (m.abs(distX) < that.options.snapThreshold && m.abs(distY) < that.options.snapThreshold) that.scrollTo(that.absStartX, that.absStartY, 200);\n\t\t\telse {\n\t\t\t\tsnap = that._snap(that.x, that.y);\n\t\t\t\tif (snap.x != that.x || snap.y != that.y) that.scrollTo(snap.x, snap.y, snap.time);\n\t\t\t}\n\n\t\t\tif (that.options.onTouchEnd) that.options.onTouchEnd.call(that, e);\n\t\t\treturn;\n\t\t}\n\n\t\tthat._resetPos(200);\n\t\tif (that.options.onTouchEnd) that.options.onTouchEnd.call(that, e);\n\t},\n\n\t_resetPos: function (time) {\n\t\tvar that = this,\n\t\t\tresetX = that.x >= 0 ? 0 : that.x < that.maxScrollX ? that.maxScrollX : that.x,\n\t\t\tresetY = that.y >= 0 || that.maxScrollY > 0 ? 0 : that.y < that.maxScrollY ? that.maxScrollY : that.y;\n\n\t\tif (resetX == that.x && resetY == that.y) {\n\t\t\tif (that.moved) {\n\t\t\t\tthat.moved = false;\n\t\t\t\tif (that.options.onScrollEnd) that.options.onScrollEnd.call(that);\t\t// Execute custom code on scroll end\n\t\t\t}\n\n\t\t\tif (that.hScrollbar && that.options.hideScrollbar) {\n\t\t\t\tif (vendor == 'webkit') that.hScrollbarWrapper.style[vendor + 'TransitionDelay'] = '300ms';\n\t\t\t\tthat.hScrollbarWrapper.style.opacity = '0';\n\t\t\t}\n\t\t\tif (that.vScrollbar && that.options.hideScrollbar) {\n\t\t\t\tif (vendor == 'webkit') that.vScrollbarWrapper.style[vendor + 'TransitionDelay'] = '300ms';\n\t\t\t\tthat.vScrollbarWrapper.style.opacity = '0';\n\t\t\t}\n\n\t\t\treturn;\n\t\t}\n\n\t\tthat.scrollTo(resetX, resetY, time || 0);\n\t},\n\n\t_wheel: function (e) {\n\t\tvar that = this,\n\t\t\tduration,\n\t\t\twheelDeltaX, wheelDeltaY,\n\t\t\tdeltaX, deltaY,\n\t\t\tdeltaScale;\n\n\t\tif ('wheelDeltaX' in e) {\n\t\t\twheelDeltaX = e.wheelDeltaX / 12;\n\t\t\twheelDeltaY = e.wheelDeltaY / 12;\n\t\t} else if ('detail' in e) {\n\t\t\twheelDeltaX = wheelDeltaY = -e.detail * 3;\n\t\t} else {\n\t\t\twheelDeltaX = wheelDeltaY = -e.wheelDelta;\n\t\t}\n\n\t\tif (that.options.wheelAction == 'zoom') {\n\t\t\tdeltaScale = that.scale * Math.pow(2, 1/3 * (wheelDeltaY ? wheelDeltaY / Math.abs(wheelDeltaY) : 0));\n\t\t\tif (wheelDeltaY < that.options.zoomMin) wheelDeltaY = that.options.zoomMin;\n\t\t\tif (wheelDeltaY > that.options.zoomMax) wheelDeltaY = that.options.zoomMax;\n\n\t\t\tif (wheelDeltaY != that.scale) {\n\t\t\t\tif (!that.wheelZoomCount && that.options.onZoomStart) that.options.onZoomStart.call(that, e);\n\t\t\t\tthat.wheelZoomCount++;\n\n\t\t\t\tthat.zoom(e.pageX, e.pageY, wheelDeltaY, 400);\n\n\t\t\t\tsetTimeout(function() {\n\t\t\t\t\tthat.wheelZoomCount--;\n\t\t\t\t\tif (!that.wheelZoomCount && that.options.onZoomEnd) that.options.onZoomEnd.call(that, e);\n\t\t\t\t}, 400);\n\t\t\t}\n\n\t\t\treturn;\n\t\t}\n\n\t\tdeltaX = that.x + wheelDeltaX;\n\t\tdeltaY = that.y + wheelDeltaY;\n\n\t\tif (deltaX > 0) deltaX = 0;\n\t\telse if (deltaX < that.maxScrollX) deltaX = that.maxScrollX;\n\n\t\tif (deltaY > 0) deltaY = 0;\n\t\telse if (deltaY < that.maxScrollY) deltaY = that.maxScrollY;\n\n\t\tthat.scrollTo(deltaX, deltaY, 0);\n\t},\n\n\t_mouseout: function (e) {\n\t\tvar t = e.relatedTarget;\n\n\t\tif (!t) {\n\t\t\tthis._end(e);\n\t\t\treturn;\n\t\t}\n\n\t\twhile (t = t.parentNode) if (t == this.wrapper) return;\n\n\t\tthis._end(e);\n\t},\n\n\t_transitionEnd: function (e) {\n\t\tvar that = this;\n\n\t\tif (e.target != that.scroller) return;\n\n\t\tthat._unbind('webkitTransitionEnd');\n\n\t\tthat._startAni();\n\t},\n\n\n\t/**\n\t *\n\t * Utilities\n\t *\n\t */\n\t_startAni: function () {\n\t\tvar that = this,\n\t\t\tstartX = that.x, startY = that.y,\n\t\t\tstartTime = (new Date).getTime(),\n\t\t\tstep, easeOut;\n\n\t\tif (that.animating) return;\n\n\t\tif (!that.steps.length) {\n\t\t\tthat._resetPos(400);\n\t\t\treturn;\n\t\t}\n\n\t\tstep = that.steps.shift();\n\n\t\tif (step.x == startX && step.y == startY) step.time = 0;\n\n\t\tthat.animating = true;\n\t\tthat.moved = true;\n\n\t\tif (that.options.useTransition) {\n\t\t\tthat._transitionTime(step.time);\n\t\t\tthat._pos(step.x, step.y);\n\t\t\tthat.animating = false;\n\t\t\tif (step.time) that._bind('webkitTransitionEnd');\n\t\t\telse that._resetPos(0);\n\t\t\treturn;\n\t\t}\n\n\t\t(function animate () {\n\t\t\tvar now = (new Date).getTime(),\n\t\t\t\tnewX, newY;\n\n\t\t\tif (now >= startTime + step.time) {\n\t\t\t\tthat._pos(step.x, step.y);\n\t\t\t\tthat.animating = false;\n\t\t\t\tif (that.options.onAnimationEnd) that.options.onAnimationEnd.call(that);\t\t\t// Execute custom code on animation end\n\t\t\t\tthat._startAni();\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tnow = (now - startTime) / step.time - 1;\n\t\t\teaseOut = m.sqrt(1 - now * now);\n\t\t\tnewX = (step.x - startX) * easeOut + startX;\n\t\t\tnewY = (step.y - startY) * easeOut + startY;\n\t\t\tthat._pos(newX, newY);\n\t\t\tif (that.animating) that.aniTime = nextFrame(animate);\n\t\t})();\n\t},\n\n\t_transitionTime: function (time) {\n\t\ttime += 'ms';\n\t\tthis.scroller.style[vendor + 'TransitionDuration'] = time;\n\t\tif (this.hScrollbar) this.hScrollbarIndicator.style[vendor + 'TransitionDuration'] = time;\n\t\tif (this.vScrollbar) this.vScrollbarIndicator.style[vendor + 'TransitionDuration'] = time;\n\t},\n\n\t_momentum: function (dist, time, maxDistUpper, maxDistLower, size) {\n\t\tvar deceleration = 0.0006,\n\t\t\tspeed = m.abs(dist) / time,\n\t\t\tnewDist = (speed * speed) / (2 * deceleration),\n\t\t\tnewTime = 0, outsideDist = 0;\n\n\t\t// Proportinally reduce speed if we are outside of the boundaries\n\t\tif (dist > 0 && newDist > maxDistUpper) {\n\t\t\toutsideDist = size / (6 / (newDist / speed * deceleration));\n\t\t\tmaxDistUpper = maxDistUpper + outsideDist;\n\t\t\tspeed = speed * maxDistUpper / newDist;\n\t\t\tnewDist = maxDistUpper;\n\t\t} else if (dist < 0 && newDist > maxDistLower) {\n\t\t\toutsideDist = size / (6 / (newDist / speed * deceleration));\n\t\t\tmaxDistLower = maxDistLower + outsideDist;\n\t\t\tspeed = speed * maxDistLower / newDist;\n\t\t\tnewDist = maxDistLower;\n\t\t}\n\n\t\tnewDist = newDist * (dist < 0 ? -1 : 1);\n\t\tnewTime = speed / deceleration;\n\n\t\treturn { dist: newDist, time: m.round(newTime) };\n\t},\n\n\t_offset: function (el) {\n\t\tvar left = -el.offsetLeft,\n\t\t\ttop = -el.offsetTop;\n\n\t\twhile (el = el.offsetParent) {\n\t\t\tleft -= el.offsetLeft;\n\t\t\ttop -= el.offsetTop;\n\t\t}\n\n\t\tif (el != this.wrapper) {\n\t\t\tleft *= this.scale;\n\t\t\ttop *= this.scale;\n\t\t}\n\n\t\treturn { left: left, top: top };\n\t},\n\n\t_snap: function (x, y) {\n\t\tvar that = this,\n\t\t\ti, l,\n\t\t\tpage, time,\n\t\t\tsizeX, sizeY;\n\n\t\t// Check page X\n\t\tpage = that.pagesX.length - 1;\n\t\tfor (i=0, l=that.pagesX.length; i<l; i++) {\n\t\t\tif (x >= that.pagesX[i]) {\n\t\t\t\tpage = i;\n\t\t\t\tbreak;\n\t\t\t}\n\t\t}\n\t\tif (page == that.currPageX && page > 0 && that.dirX < 0) page--;\n\t\tx = that.pagesX[page];\n\t\tsizeX = m.abs(x - that.pagesX[that.currPageX]);\n\t\tsizeX = sizeX ? m.abs(that.x - x) / sizeX * 500 : 0;\n\t\tthat.currPageX = page;\n\n\t\t// Check page Y\n\t\tpage = that.pagesY.length-1;\n\t\tfor (i=0; i<page; i++) {\n\t\t\tif (y >= that.pagesY[i]) {\n\t\t\t\tpage = i;\n\t\t\t\tbreak;\n\t\t\t}\n\t\t}\n\t\tif (page == that.currPageY && page > 0 && that.dirY < 0) page--;\n\t\ty = that.pagesY[page];\n\t\tsizeY = m.abs(y - that.pagesY[that.currPageY]);\n\t\tsizeY = sizeY ? m.abs(that.y - y) / sizeY * 500 : 0;\n\t\tthat.currPageY = page;\n\n\t\t// Snap with constant speed (proportional duration)\n\t\ttime = m.round(m.max(sizeX, sizeY)) || 200;\n\n\t\treturn { x: x, y: y, time: time };\n\t},\n\n\t_bind: function (type, el, bubble) {\n\t\t(el || this.scroller).addEventListener(type, this, !!bubble);\n\t},\n\n\t_unbind: function (type, el, bubble) {\n\t\t(el || this.scroller).removeEventListener(type, this, !!bubble);\n\t},\n\n\n\t/**\n\t *\n\t * Public methods\n\t *\n\t */\n\tdestroy: function () {\n\t\tvar that = this;\n\n\t\tthat.scroller.style[vendor + 'Transform'] = '';\n\n\t\t// Remove the scrollbars\n\t\tthat.hScrollbar = false;\n\t\tthat.vScrollbar = false;\n\t\tthat._scrollbar('h');\n\t\tthat._scrollbar('v');\n\n\t\t// Remove the event listeners\n\t\tthat._unbind(RESIZE_EV, window);\n\t\tthat._unbind(START_EV);\n\t\tthat._unbind(MOVE_EV);\n\t\tthat._unbind(END_EV);\n\t\tthat._unbind(CANCEL_EV);\n\n\t\tif (that.options.hasTouch) {\n\t\t\tthat._unbind('mouseout', that.wrapper);\n\t\t\tthat._unbind(WHEEL_EV);\n\t\t}\n\n\t\tif (that.options.useTransition) that._unbind('webkitTransitionEnd');\n\n\t\tif (that.options.checkDOMChanges) clearInterval(that.checkDOMTime);\n\n\t\tif (that.options.onDestroy) that.options.onDestroy.call(that);\n\t},\n\n\trefresh: function () {\n\t\tvar that = this,\n\t\t\toffset,\n\t\t\tpos = 0,\n\t\t\tpage = 0;\n\n\t\tiScroll.scrolling = false;\n\n\t\tif (that.scale < that.options.zoomMin) that.scale = that.options.zoomMin;\n\t\tthat.wrapperW = that.wrapper.clientWidth || 1;\n\t\tthat.wrapperH = that.wrapper.clientHeight || 1;\n\n\t\tthat.scrollerW = m.round(that.scroller.offsetWidth * that.scale);\n\t\tthat.scrollerH = m.round(that.scroller.offsetHeight * that.scale);\n\t\tthat.maxScrollX = that.wrapperW - that.scrollerW;\n\t\tthat.maxScrollY = that.wrapperH - that.scrollerH;\n\t\tthat.dirX = 0;\n\t\tthat.dirY = 0;\n\n\t\tthat.hScroll = that.options.hScroll && that.maxScrollX < 0;\n\t\tthat.vScroll = that.options.vScroll && (!that.options.bounceLock && !that.hScroll || that.scrollerH > that.wrapperH);\n\n\t\tthat.hScrollbar = that.hScroll && that.options.hScrollbar;\n\t\tthat.vScrollbar = that.vScroll && that.options.vScrollbar && that.scrollerH > that.wrapperH;\n\n\t\toffset = that._offset(that.wrapper);\n\t\tthat.wrapperOffsetLeft = -offset.left;\n\t\tthat.wrapperOffsetTop = -offset.top;\n\n\t\t// Prepare snap\n\t\tif (typeof that.options.snap == 'string') {\n\t\t\tthat.pagesX = [];\n\t\t\tthat.pagesY = [];\n\t\t\tels = that.scroller.querySelectorAll(that.options.snap);\n\t\t\tfor (i=0, l=els.length; i<l; i++) {\n\t\t\t\tpos = that._offset(els[i]);\n\t\t\t\tpos.left += that.wrapperOffsetLeft;\n\t\t\t\tpos.top += that.wrapperOffsetTop;\n\t\t\t\tthat.pagesX[i] = pos.left < that.maxScrollX ? that.maxScrollX : pos.left * that.scale;\n\t\t\t\tthat.pagesY[i] = pos.top < that.maxScrollY ? that.maxScrollY : pos.top * that.scale;\n\t\t\t}\n\t\t} else if (that.options.snap) {\n\t\t\tthat.pagesX = [];\n\t\t\twhile (pos >= that.maxScrollX) {\n\t\t\t\tthat.pagesX[page] = pos;\n\t\t\t\tpos = pos - that.wrapperW;\n\t\t\t\tpage++;\n\t\t\t}\n\t\t\tif (that.maxScrollX%that.wrapperW) that.pagesX[that.pagesX.length] = that.maxScrollX - that.pagesX[that.pagesX.length-1] + that.pagesX[that.pagesX.length-1];\n\n\t\t\tpos = 0;\n\t\t\tpage = 0;\n\t\t\tthat.pagesY = [];\n\t\t\twhile (pos >= that.maxScrollY) {\n\t\t\t\tthat.pagesY[page] = pos;\n\t\t\t\tpos = pos - that.wrapperH;\n\t\t\t\tpage++;\n\t\t\t}\n\t\t\tif (that.maxScrollY%that.wrapperH) that.pagesY[that.pagesY.length] = that.maxScrollY - that.pagesY[that.pagesY.length-1] + that.pagesY[that.pagesY.length-1];\n\t\t}\n\n\t\t// Prepare the scrollbars\n\t\tthat._scrollbar('h');\n\t\tthat._scrollbar('v');\n\n\t\tif (!that.zoomed) {\n\t\t\tthat.scroller.style[vendor + 'TransitionDuration'] = '0';\n\t\t\tthat._resetPos(200);\n\t\t}\n\t},\n\n\tscrollTo: function (x, y, time, relative) {\n\t\tvar that = this,\n\t\t\tstep = x,\n\t\t\ti, l;\n\n\t\tthat.stop();\n\n\t\tif (!step.length) step = [{ x: x, y: y, time: time, relative: relative }];\n\n\t\tfor (i=0, l=step.length; i<l; i++) {\n\t\t\tif (step[i].relative) { step[i].x = that.x - step[i].x; step[i].y = that.y - step[i].y; }\n\t\t\tthat.steps.push({ x: step[i].x, y: step[i].y, time: step[i].time || 0 });\n\t\t}\n\n\t\tthat._startAni();\n\t},\n\n\tscrollToElement: function (el, time) {\n\t\tvar that = this, pos;\n\t\tel = el.nodeType ? el : that.scroller.querySelector(el);\n\t\tif (!el) return;\n\n\t\tpos = that._offset(el);\n\t\tpos.left += that.wrapperOffsetLeft;\n\t\tpos.top += that.wrapperOffsetTop;\n\n\t\tpos.left = pos.left > 0 ? 0 : pos.left < that.maxScrollX ? that.maxScrollX : pos.left;\n\t\tpos.top = pos.top > 0 ? 0 : pos.top < that.maxScrollY ? that.maxScrollY : pos.top;\n\t\ttime = time === undefined ? m.max(m.abs(pos.left)*2, m.abs(pos.top)*2) : time;\n\n\t\tthat.scrollTo(pos.left, pos.top, time);\n\t},\n\n\tscrollToPage: function (pageX, pageY, time) {\n\t\tvar that = this, x, y;\n\n\t\tif (that.options.snap) {\n\t\t\tpageX = pageX == 'next' ? that.currPageX+1 : pageX == 'prev' ? that.currPageX-1 : pageX;\n\t\t\tpageY = pageY == 'next' ? that.currPageY+1 : pageY == 'prev' ? that.currPageY-1 : pageY;\n\n\t\t\tpageX = pageX < 0 ? 0 : pageX > that.pagesX.length-1 ? that.pagesX.length-1 : pageX;\n\t\t\tpageY = pageY < 0 ? 0 : pageY > that.pagesY.length-1 ? that.pagesY.length-1 : pageY;\n\n\t\t\tthat.currPageX = pageX;\n\t\t\tthat.currPageY = pageY;\n\t\t\tx = that.pagesX[pageX];\n\t\t\ty = that.pagesY[pageY];\n\t\t} else {\n\t\t\tx = -that.wrapperW * pageX;\n\t\t\ty = -that.wrapperH * pageY;\n\t\t\tif (x < that.maxScrollX) x = that.maxScrollX;\n\t\t\tif (y < that.maxScrollY) y = that.maxScrollY;\n\t\t}\n\n\t\tthat.scrollTo(x, y, time || 400);\n\t},\n\n\tdisable: function () {\n\t\tthis.stop();\n\t\tthis._resetPos(0);\n\t\tthis.enabled = false;\n\n\t\t// If disabled after touchstart we make sure that there are no left over events\n\t\tthis._unbind(MOVE_EV);\n\t\tthis._unbind(END_EV);\n\t\tthis._unbind(CANCEL_EV);\n\t},\n\n\tenable: function () {\n\t\tthis.enabled = true;\n\t},\n\n\tstop: function () {\n\t\tif (this.options.useTransition) this._unbind('webkitTransitionEnd');\n\t\telse cancelFrame(this.aniTime);\n\t\tthis.steps = [];\n\t\tthis.moved = false;\n\t\tthis.animating = false;\n\t},\n\n\tzoom: function (x, y, scale, time) {\n\t\tvar that = this,\n\t\t\trelScale = scale / that.scale;\n\n\t\tif (!that.options.useTransform) return;\n\n\t\tthat.zoomed = true;\n\t\ttime = time === undefined ? 200 : time;\n\t\tx = x - that.wrapperOffsetLeft - that.x;\n\t\ty = y - that.wrapperOffsetTop - that.y;\n\t\tthat.x = x - x * relScale + that.x;\n\t\tthat.y = y - y * relScale + that.y;\n\n\t\tthat.scale = scale;\n\t\tthat.refresh();\n\n\t\tthat.x = that.x > 0 ? 0 : that.x < that.maxScrollX ? that.maxScrollX : that.x;\n\t\tthat.y = that.y > 0 ? 0 : that.y < that.maxScrollY ? that.maxScrollY : that.y;\n\n\t\tthat.scroller.style[vendor + 'TransitionDuration'] = time + 'ms';\n\t\tthat.scroller.style[vendor + 'Transform'] = trnOpen + that.x + 'px,' + that.y + 'px' + trnClose + ' scale(' + scale + ')';\n\t\tthat.zoomed = false;\n\t},\n\n\tisReady: function () {\n\t\treturn !this.moved && !this.zoomed && !this.animating;\n\t}\n};\n\nif (typeof exports !== 'undefined') exports.iScroll = iScroll;\nelse window.iScroll = iScroll;\n\n})();\n","/*!\n * jQuery UI :data 1.13.2\n * http://jqueryui.com\n *\n * Copyright jQuery Foundation and other contributors\n * Released under the MIT license.\n * http://jquery.org/license\n */\n\n//>>label: :data Selector\n//>>group: Core\n//>>description: Selects elements which have data stored under the specified key.\n//>>docs: http://api.jqueryui.com/data-selector/\n\n( function( factory ) {\n\t\"use strict\";\n\n\tif ( typeof define === \"function\" && define.amd ) {\n\n\t\t// AMD. Register as an anonymous module.\n\t\tdefine( [ \"jquery\", \"./version\" ], factory );\n\t} else {\n\n\t\t// Browser globals\n\t\tfactory( jQuery );\n\t}\n} )( function( $ ) {\n\"use strict\";\n\nreturn $.extend( $.expr.pseudos, {\n\tdata: $.expr.createPseudo ?\n\t\t$.expr.createPseudo( function( dataName ) {\n\t\t\treturn function( elem ) {\n\t\t\t\treturn !!$.data( elem, dataName );\n\t\t\t};\n\t\t} ) :\n\n\t\t// Support: jQuery <1.8\n\t\tfunction( elem, i, match ) {\n\t\t\treturn !!$.data( elem, match[ 3 ] );\n\t\t}\n} );\n} );\n","( function( factory ) {\n\t\"use strict\";\n\n\tif ( typeof define === \"function\" && define.amd ) {\n\n\t\t// AMD. Register as an anonymous module.\n\t\tdefine( [ \"jquery\", \"./version\" ], factory );\n\t} else {\n\n\t\t// Browser globals\n\t\tfactory( jQuery );\n\t}\n} )( function( $ ) {\n\"use strict\";\n\n// $.ui.plugin is deprecated. Use $.widget() extensions instead.\nreturn $.ui.plugin = {\n\tadd: function( module, option, set ) {\n\t\tvar i,\n\t\t\tproto = $.ui[ module ].prototype;\n\t\tfor ( i in set ) {\n\t\t\tproto.plugins[ i ] = proto.plugins[ i ] || [];\n\t\t\tproto.plugins[ i ].push( [ option, set[ i ] ] );\n\t\t}\n\t},\n\tcall: function( instance, name, args, allowDisconnected ) {\n\t\tvar i,\n\t\t\tset = instance.plugins[ name ];\n\n\t\tif ( !set ) {\n\t\t\treturn;\n\t\t}\n\n\t\tif ( !allowDisconnected && ( !instance.element[ 0 ].parentNode ||\n\t\t\t\tinstance.element[ 0 ].parentNode.nodeType === 11 ) ) {\n\t\t\treturn;\n\t\t}\n\n\t\tfor ( i = 0; i < set.length; i++ ) {\n\t\t\tif ( instance.options[ set[ i ][ 0 ] ] ) {\n\t\t\t\tset[ i ][ 1 ].apply( instance.element, args );\n\t\t\t}\n\t\t}\n\t}\n};\n\n} );\n","( function( factory ) {\n\t\"use strict\";\n\n\tif ( typeof define === \"function\" && define.amd ) {\n\n\t\t// AMD. Register as an anonymous module.\n\t\tdefine( [ \"jquery\", \"./version\" ], factory );\n\t} else {\n\n\t\t// Browser globals\n\t\tfactory( jQuery );\n\t}\n} )( function( $ ) {\n\"use strict\";\n\nreturn $.ui.safeActiveElement = function( document ) {\n\tvar activeElement;\n\n\t// Support: IE 9 only\n\t// IE9 throws an \"Unspecified error\" accessing document.activeElement from an <iframe>\n\ttry {\n\t\tactiveElement = document.activeElement;\n\t} catch ( error ) {\n\t\tactiveElement = document.body;\n\t}\n\n\t// Support: IE 9 - 11 only\n\t// IE may return null instead of an element\n\t// Interestingly, this only seems to occur when NOT in an iframe\n\tif ( !activeElement ) {\n\t\tactiveElement = document.body;\n\t}\n\n\t// Support: IE 11 only\n\t// IE11 returns a seemingly empty object in some cases when accessing\n\t// document.activeElement from an <iframe>\n\tif ( !activeElement.nodeName ) {\n\t\tactiveElement = document.body;\n\t}\n\n\treturn activeElement;\n};\n\n} );\n","( function( factory ) {\n\t\"use strict\";\n\n\tif ( typeof define === \"function\" && define.amd ) {\n\n\t\t// AMD. Register as an anonymous module.\n\t\tdefine( [ \"jquery\", \"./version\" ], factory );\n\t} else {\n\n\t\t// Browser globals\n\t\tfactory( jQuery );\n\t}\n} )( function( $ ) {\n\"use strict\";\n\nreturn $.ui.safeBlur = function( element ) {\n\n\t// Support: IE9 - 10 only\n\t// If the <body> is blurred, IE will switch windows, see #9420\n\tif ( element && element.nodeName.toLowerCase() !== \"body\" ) {\n\t\t$( element ).trigger( \"blur\" );\n\t}\n};\n\n} );\n","/*!\n * jQuery UI Draggable 1.13.2\n * http://jqueryui.com\n *\n * Copyright jQuery Foundation and other contributors\n * Released under the MIT license.\n * http://jquery.org/license\n */\n\n//>>label: Draggable\n//>>group: Interactions\n//>>description: Enables dragging functionality for any element.\n//>>docs: http://api.jqueryui.com/draggable/\n//>>demos: http://jqueryui.com/draggable/\n//>>css.structure: ../../themes/base/draggable.css\n\n( function( factory ) {\n\t\"use strict\";\n\n\tif ( typeof define === \"function\" && define.amd ) {\n\n\t\t// AMD. Register as an anonymous module.\n\t\tdefine( [\n\t\t\t\"jquery\",\n\t\t\t\"./mouse\",\n\t\t\t\"../data\",\n\t\t\t\"../plugin\",\n\t\t\t\"../safe-active-element\",\n\t\t\t\"../safe-blur\",\n\t\t\t\"../scroll-parent\",\n\t\t\t\"../version\",\n\t\t\t\"../widget\"\n\t\t], factory );\n\t} else {\n\n\t\t// Browser globals\n\t\tfactory( jQuery );\n\t}\n} )( function( $ ) {\n\"use strict\";\n\n$.widget( \"ui.draggable\", $.ui.mouse, {\n\tversion: \"1.13.2\",\n\twidgetEventPrefix: \"drag\",\n\toptions: {\n\t\taddClasses: true,\n\t\tappendTo: \"parent\",\n\t\taxis: false,\n\t\tconnectToSortable: false,\n\t\tcontainment: false,\n\t\tcursor: \"auto\",\n\t\tcursorAt: false,\n\t\tgrid: false,\n\t\thandle: false,\n\t\thelper: \"original\",\n\t\tiframeFix: false,\n\t\topacity: false,\n\t\trefreshPositions: false,\n\t\trevert: false,\n\t\trevertDuration: 500,\n\t\tscope: \"default\",\n\t\tscroll: true,\n\t\tscrollSensitivity: 20,\n\t\tscrollSpeed: 20,\n\t\tsnap: false,\n\t\tsnapMode: \"both\",\n\t\tsnapTolerance: 20,\n\t\tstack: false,\n\t\tzIndex: false,\n\n\t\t// Callbacks\n\t\tdrag: null,\n\t\tstart: null,\n\t\tstop: null\n\t},\n\t_create: function() {\n\n\t\tif ( this.options.helper === \"original\" ) {\n\t\t\tthis._setPositionRelative();\n\t\t}\n\t\tif ( this.options.addClasses ) {\n\t\t\tthis._addClass( \"ui-draggable\" );\n\t\t}\n\t\tthis._setHandleClassName();\n\n\t\tthis._mouseInit();\n\t},\n\n\t_setOption: function( key, value ) {\n\t\tthis._super( key, value );\n\t\tif ( key === \"handle\" ) {\n\t\t\tthis._removeHandleClassName();\n\t\t\tthis._setHandleClassName();\n\t\t}\n\t},\n\n\t_destroy: function() {\n\t\tif ( ( this.helper || this.element ).is( \".ui-draggable-dragging\" ) ) {\n\t\t\tthis.destroyOnClear = true;\n\t\t\treturn;\n\t\t}\n\t\tthis._removeHandleClassName();\n\t\tthis._mouseDestroy();\n\t},\n\n\t_mouseCapture: function( event ) {\n\t\tvar o = this.options;\n\n\t\t// Among others, prevent a drag on a resizable-handle\n\t\tif ( this.helper || o.disabled ||\n\t\t\t\t$( event.target ).closest( \".ui-resizable-handle\" ).length > 0 ) {\n\t\t\treturn false;\n\t\t}\n\n\t\t//Quit if we're not on a valid handle\n\t\tthis.handle = this._getHandle( event );\n\t\tif ( !this.handle ) {\n\t\t\treturn false;\n\t\t}\n\n\t\tthis._blurActiveElement( event );\n\n\t\tthis._blockFrames( o.iframeFix === true ? \"iframe\" : o.iframeFix );\n\n\t\treturn true;\n\n\t},\n\n\t_blockFrames: function( selector ) {\n\t\tthis.iframeBlocks = this.document.find( selector ).map( function() {\n\t\t\tvar iframe = $( this );\n\n\t\t\treturn $( \"<div>\" )\n\t\t\t\t.css( \"position\", \"absolute\" )\n\t\t\t\t.appendTo( iframe.parent() )\n\t\t\t\t.outerWidth( iframe.outerWidth() )\n\t\t\t\t.outerHeight( iframe.outerHeight() )\n\t\t\t\t.offset( iframe.offset() )[ 0 ];\n\t\t} );\n\t},\n\n\t_unblockFrames: function() {\n\t\tif ( this.iframeBlocks ) {\n\t\t\tthis.iframeBlocks.remove();\n\t\t\tdelete this.iframeBlocks;\n\t\t}\n\t},\n\n\t_blurActiveElement: function( event ) {\n\t\tvar activeElement = $.ui.safeActiveElement( this.document[ 0 ] ),\n\t\t\ttarget = $( event.target );\n\n\t\t// Don't blur if the event occurred on an element that is within\n\t\t// the currently focused element\n\t\t// See #10527, #12472\n\t\tif ( target.closest( activeElement ).length ) {\n\t\t\treturn;\n\t\t}\n\n\t\t// Blur any element that currently has focus, see #4261\n\t\t$.ui.safeBlur( activeElement );\n\t},\n\n\t_mouseStart: function( event ) {\n\n\t\tvar o = this.options;\n\n\t\t//Create and append the visible helper\n\t\tthis.helper = this._createHelper( event );\n\n\t\tthis._addClass( this.helper, \"ui-draggable-dragging\" );\n\n\t\t//Cache the helper size\n\t\tthis._cacheHelperProportions();\n\n\t\t//If ddmanager is used for droppables, set the global draggable\n\t\tif ( $.ui.ddmanager ) {\n\t\t\t$.ui.ddmanager.current = this;\n\t\t}\n\n\t\t/*\n\t\t * - Position generation -\n\t\t * This block generates everything position related - it's the core of draggables.\n\t\t */\n\n\t\t//Cache the margins of the original element\n\t\tthis._cacheMargins();\n\n\t\t//Store the helper's css position\n\t\tthis.cssPosition = this.helper.css( \"position\" );\n\t\tthis.scrollParent = this.helper.scrollParent( true );\n\t\tthis.offsetParent = this.helper.offsetParent();\n\t\tthis.hasFixedAncestor = this.helper.parents().filter( function() {\n\t\t\t\treturn $( this ).css( \"position\" ) === \"fixed\";\n\t\t\t} ).length > 0;\n\n\t\t//The element's absolute position on the page minus margins\n\t\tthis.positionAbs = this.element.offset();\n\t\tthis._refreshOffsets( event );\n\n\t\t//Generate the original position\n\t\tthis.originalPosition = this.position = this._generatePosition( event, false );\n\t\tthis.originalPageX = event.pageX;\n\t\tthis.originalPageY = event.pageY;\n\n\t\t//Adjust the mouse offset relative to the helper if \"cursorAt\" is supplied\n\t\tif ( o.cursorAt ) {\n\t\t\tthis._adjustOffsetFromHelper( o.cursorAt );\n\t\t}\n\n\t\t//Set a containment if given in the options\n\t\tthis._setContainment();\n\n\t\t//Trigger event + callbacks\n\t\tif ( this._trigger( \"start\", event ) === false ) {\n\t\t\tthis._clear();\n\t\t\treturn false;\n\t\t}\n\n\t\t//Recache the helper size\n\t\tthis._cacheHelperProportions();\n\n\t\t//Prepare the droppable offsets\n\t\tif ( $.ui.ddmanager && !o.dropBehaviour ) {\n\t\t\t$.ui.ddmanager.prepareOffsets( this, event );\n\t\t}\n\n\t\t// Execute the drag once - this causes the helper not to be visible before getting its\n\t\t// correct position\n\t\tthis._mouseDrag( event, true );\n\n\t\t// If the ddmanager is used for droppables, inform the manager that dragging has started\n\t\t// (see #5003)\n\t\tif ( $.ui.ddmanager ) {\n\t\t\t$.ui.ddmanager.dragStart( this, event );\n\t\t}\n\n\t\treturn true;\n\t},\n\n\t_refreshOffsets: function( event ) {\n\t\tthis.offset = {\n\t\t\ttop: this.positionAbs.top - this.margins.top,\n\t\t\tleft: this.positionAbs.left - this.margins.left,\n\t\t\tscroll: false,\n\t\t\tparent: this._getParentOffset(),\n\t\t\trelative: this._getRelativeOffset()\n\t\t};\n\n\t\tthis.offset.click = {\n\t\t\tleft: event.pageX - this.offset.left,\n\t\t\ttop: event.pageY - this.offset.top\n\t\t};\n\t},\n\n\t_mouseDrag: function( event, noPropagation ) {\n\n\t\t// reset any necessary cached properties (see #5009)\n\t\tif ( this.hasFixedAncestor ) {\n\t\t\tthis.offset.parent = this._getParentOffset();\n\t\t}\n\n\t\t//Compute the helpers position\n\t\tthis.position = this._generatePosition( event, true );\n\t\tthis.positionAbs = this._convertPositionTo( \"absolute\" );\n\n\t\t//Call plugins and callbacks and use the resulting position if something is returned\n\t\tif ( !noPropagation ) {\n\t\t\tvar ui = this._uiHash();\n\t\t\tif ( this._trigger( \"drag\", event, ui ) === false ) {\n\t\t\t\tthis._mouseUp( new $.Event( \"mouseup\", event ) );\n\t\t\t\treturn false;\n\t\t\t}\n\t\t\tthis.position = ui.position;\n\t\t}\n\n\t\tthis.helper[ 0 ].style.left = this.position.left + \"px\";\n\t\tthis.helper[ 0 ].style.top = this.position.top + \"px\";\n\n\t\tif ( $.ui.ddmanager ) {\n\t\t\t$.ui.ddmanager.drag( this, event );\n\t\t}\n\n\t\treturn false;\n\t},\n\n\t_mouseStop: function( event ) {\n\n\t\t//If we are using droppables, inform the manager about the drop\n\t\tvar that = this,\n\t\t\tdropped = false;\n\t\tif ( $.ui.ddmanager && !this.options.dropBehaviour ) {\n\t\t\tdropped = $.ui.ddmanager.drop( this, event );\n\t\t}\n\n\t\t//if a drop comes from outside (a sortable)\n\t\tif ( this.dropped ) {\n\t\t\tdropped = this.dropped;\n\t\t\tthis.dropped = false;\n\t\t}\n\n\t\tif ( ( this.options.revert === \"invalid\" && !dropped ) ||\n\t\t\t\t( this.options.revert === \"valid\" && dropped ) ||\n\t\t\t\tthis.options.revert === true || ( typeof this.options.revert === \"function\" &&\n\t\t\t\tthis.options.revert.call( this.element, dropped ) )\n\t\t) {\n\t\t\t$( this.helper ).animate(\n\t\t\t\tthis.originalPosition,\n\t\t\t\tparseInt( this.options.revertDuration, 10 ),\n\t\t\t\tfunction() {\n\t\t\t\t\tif ( that._trigger( \"stop\", event ) !== false ) {\n\t\t\t\t\t\tthat._clear();\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t);\n\t\t} else {\n\t\t\tif ( this._trigger( \"stop\", event ) !== false ) {\n\t\t\t\tthis._clear();\n\t\t\t}\n\t\t}\n\n\t\treturn false;\n\t},\n\n\t_mouseUp: function( event ) {\n\t\tthis._unblockFrames();\n\n\t\t// If the ddmanager is used for droppables, inform the manager that dragging has stopped\n\t\t// (see #5003)\n\t\tif ( $.ui.ddmanager ) {\n\t\t\t$.ui.ddmanager.dragStop( this, event );\n\t\t}\n\n\t\t// Only need to focus if the event occurred on the draggable itself, see #10527\n\t\tif ( this.handleElement.is( event.target ) ) {\n\n\t\t\t// The interaction is over; whether or not the click resulted in a drag,\n\t\t\t// focus the element\n\t\t\tthis.element.trigger( \"focus\" );\n\t\t}\n\n\t\treturn $.ui.mouse.prototype._mouseUp.call( this, event );\n\t},\n\n\tcancel: function() {\n\n\t\tif ( this.helper.is( \".ui-draggable-dragging\" ) ) {\n\t\t\tthis._mouseUp( new $.Event( \"mouseup\", { target: this.element[ 0 ] } ) );\n\t\t} else {\n\t\t\tthis._clear();\n\t\t}\n\n\t\treturn this;\n\n\t},\n\n\t_getHandle: function( event ) {\n\t\treturn this.options.handle ?\n\t\t\t!!$( event.target ).closest( this.element.find( this.options.handle ) ).length :\n\t\t\ttrue;\n\t},\n\n\t_setHandleClassName: function() {\n\t\tthis.handleElement = this.options.handle ?\n\t\t\tthis.element.find( this.options.handle ) : this.element;\n\t\tthis._addClass( this.handleElement, \"ui-draggable-handle\" );\n\t},\n\n\t_removeHandleClassName: function() {\n\t\tthis._removeClass( this.handleElement, \"ui-draggable-handle\" );\n\t},\n\n\t_createHelper: function( event ) {\n\n\t\tvar o = this.options,\n\t\t\thelperIsFunction = typeof o.helper === \"function\",\n\t\t\thelper = helperIsFunction ?\n\t\t\t\t$( o.helper.apply( this.element[ 0 ], [ event ] ) ) :\n\t\t\t\t( o.helper === \"clone\" ?\n\t\t\t\t\tthis.element.clone().removeAttr( \"id\" ) :\n\t\t\t\t\tthis.element );\n\n\t\tif ( !helper.parents( \"body\" ).length ) {\n\t\t\thelper.appendTo( ( o.appendTo === \"parent\" ?\n\t\t\t\tthis.element[ 0 ].parentNode :\n\t\t\t\to.appendTo ) );\n\t\t}\n\n\t\t// Http://bugs.jqueryui.com/ticket/9446\n\t\t// a helper function can return the original element\n\t\t// which wouldn't have been set to relative in _create\n\t\tif ( helperIsFunction && helper[ 0 ] === this.element[ 0 ] ) {\n\t\t\tthis._setPositionRelative();\n\t\t}\n\n\t\tif ( helper[ 0 ] !== this.element[ 0 ] &&\n\t\t\t\t!( /(fixed|absolute)/ ).test( helper.css( \"position\" ) ) ) {\n\t\t\thelper.css( \"position\", \"absolute\" );\n\t\t}\n\n\t\treturn helper;\n\n\t},\n\n\t_setPositionRelative: function() {\n\t\tif ( !( /^(?:r|a|f)/ ).test( this.element.css( \"position\" ) ) ) {\n\t\t\tthis.element[ 0 ].style.position = \"relative\";\n\t\t}\n\t},\n\n\t_adjustOffsetFromHelper: function( obj ) {\n\t\tif ( typeof obj === \"string\" ) {\n\t\t\tobj = obj.split( \" \" );\n\t\t}\n\t\tif ( Array.isArray( obj ) ) {\n\t\t\tobj = { left: +obj[ 0 ], top: +obj[ 1 ] || 0 };\n\t\t}\n\t\tif ( \"left\" in obj ) {\n\t\t\tthis.offset.click.left = obj.left + this.margins.left;\n\t\t}\n\t\tif ( \"right\" in obj ) {\n\t\t\tthis.offset.click.left = this.helperProportions.width - obj.right + this.margins.left;\n\t\t}\n\t\tif ( \"top\" in obj ) {\n\t\t\tthis.offset.click.top = obj.top + this.margins.top;\n\t\t}\n\t\tif ( \"bottom\" in obj ) {\n\t\t\tthis.offset.click.top = this.helperProportions.height - obj.bottom + this.margins.top;\n\t\t}\n\t},\n\n\t_isRootNode: function( element ) {\n\t\treturn ( /(html|body)/i ).test( element.tagName ) || element === this.document[ 0 ];\n\t},\n\n\t_getParentOffset: function() {\n\n\t\t//Get the offsetParent and cache its position\n\t\tvar po = this.offsetParent.offset(),\n\t\t\tdocument = this.document[ 0 ];\n\n\t\t// This is a special case where we need to modify a offset calculated on start, since the\n\t\t// following happened:\n\t\t// 1. The position of the helper is absolute, so it's position is calculated based on the\n\t\t// next positioned parent\n\t\t// 2. The actual offset parent is a child of the scroll parent, and the scroll parent isn't\n\t\t// the document, which means that the scroll is included in the initial calculation of the\n\t\t// offset of the parent, and never recalculated upon drag\n\t\tif ( this.cssPosition === \"absolute\" && this.scrollParent[ 0 ] !== document &&\n\t\t\t\t$.contains( this.scrollParent[ 0 ], this.offsetParent[ 0 ] ) ) {\n\t\t\tpo.left += this.scrollParent.scrollLeft();\n\t\t\tpo.top += this.scrollParent.scrollTop();\n\t\t}\n\n\t\tif ( this._isRootNode( this.offsetParent[ 0 ] ) ) {\n\t\t\tpo = { top: 0, left: 0 };\n\t\t}\n\n\t\treturn {\n\t\t\ttop: po.top + ( parseInt( this.offsetParent.css( \"borderTopWidth\" ), 10 ) || 0 ),\n\t\t\tleft: po.left + ( parseInt( this.offsetParent.css( \"borderLeftWidth\" ), 10 ) || 0 )\n\t\t};\n\n\t},\n\n\t_getRelativeOffset: function() {\n\t\tif ( this.cssPosition !== \"relative\" ) {\n\t\t\treturn { top: 0, left: 0 };\n\t\t}\n\n\t\tvar p = this.element.position(),\n\t\t\tscrollIsRootNode = this._isRootNode( this.scrollParent[ 0 ] );\n\n\t\treturn {\n\t\t\ttop: p.top - ( parseInt( this.helper.css( \"top\" ), 10 ) || 0 ) +\n\t\t\t\t( !scrollIsRootNode ? this.scrollParent.scrollTop() : 0 ),\n\t\t\tleft: p.left - ( parseInt( this.helper.css( \"left\" ), 10 ) || 0 ) +\n\t\t\t\t( !scrollIsRootNode ? this.scrollParent.scrollLeft() : 0 )\n\t\t};\n\n\t},\n\n\t_cacheMargins: function() {\n\t\tthis.margins = {\n\t\t\tleft: ( parseInt( this.element.css( \"marginLeft\" ), 10 ) || 0 ),\n\t\t\ttop: ( parseInt( this.element.css( \"marginTop\" ), 10 ) || 0 ),\n\t\t\tright: ( parseInt( this.element.css( \"marginRight\" ), 10 ) || 0 ),\n\t\t\tbottom: ( parseInt( this.element.css( \"marginBottom\" ), 10 ) || 0 )\n\t\t};\n\t},\n\n\t_cacheHelperProportions: function() {\n\t\tthis.helperProportions = {\n\t\t\twidth: this.helper.outerWidth(),\n\t\t\theight: this.helper.outerHeight()\n\t\t};\n\t},\n\n\t_setContainment: function() {\n\n\t\tvar isUserScrollable, c, ce,\n\t\t\to = this.options,\n\t\t\tdocument = this.document[ 0 ];\n\n\t\tthis.relativeContainer = null;\n\n\t\tif ( !o.containment ) {\n\t\t\tthis.containment = null;\n\t\t\treturn;\n\t\t}\n\n\t\tif ( o.containment === \"window\" ) {\n\t\t\tthis.containment = [\n\t\t\t\t$( window ).scrollLeft() - this.offset.relative.left - this.offset.parent.left,\n\t\t\t\t$( window ).scrollTop() - this.offset.relative.top - this.offset.parent.top,\n\t\t\t\t$( window ).scrollLeft() + $( window ).width() -\n\t\t\t\t\tthis.helperProportions.width - this.margins.left,\n\t\t\t\t$( window ).scrollTop() +\n\t\t\t\t\t( $( window ).height() || document.body.parentNode.scrollHeight ) -\n\t\t\t\t\tthis.helperProportions.height - this.margins.top\n\t\t\t];\n\t\t\treturn;\n\t\t}\n\n\t\tif ( o.containment === \"document\" ) {\n\t\t\tthis.containment = [\n\t\t\t\t0,\n\t\t\t\t0,\n\t\t\t\t$( document ).width() - this.helperProportions.width - this.margins.left,\n\t\t\t\t( $( document ).height() || document.body.parentNode.scrollHeight ) -\n\t\t\t\t\tthis.helperProportions.height - this.margins.top\n\t\t\t];\n\t\t\treturn;\n\t\t}\n\n\t\tif ( o.containment.constructor === Array ) {\n\t\t\tthis.containment = o.containment;\n\t\t\treturn;\n\t\t}\n\n\t\tif ( o.containment === \"parent\" ) {\n\t\t\to.containment = this.helper[ 0 ].parentNode;\n\t\t}\n\n\t\tc = $( o.containment );\n\t\tce = c[ 0 ];\n\n\t\tif ( !ce ) {\n\t\t\treturn;\n\t\t}\n\n\t\tisUserScrollable = /(scroll|auto)/.test( c.css( \"overflow\" ) );\n\n\t\tthis.containment = [\n\t\t\t( parseInt( c.css( \"borderLeftWidth\" ), 10 ) || 0 ) +\n\t\t\t\t( parseInt( c.css( \"paddingLeft\" ), 10 ) || 0 ),\n\t\t\t( parseInt( c.css( \"borderTopWidth\" ), 10 ) || 0 ) +\n\t\t\t\t( parseInt( c.css( \"paddingTop\" ), 10 ) || 0 ),\n\t\t\t( isUserScrollable ? Math.max( ce.scrollWidth, ce.offsetWidth ) : ce.offsetWidth ) -\n\t\t\t\t( parseInt( c.css( \"borderRightWidth\" ), 10 ) || 0 ) -\n\t\t\t\t( parseInt( c.css( \"paddingRight\" ), 10 ) || 0 ) -\n\t\t\t\tthis.helperProportions.width -\n\t\t\t\tthis.margins.left -\n\t\t\t\tthis.margins.right,\n\t\t\t( isUserScrollable ? Math.max( ce.scrollHeight, ce.offsetHeight ) : ce.offsetHeight ) -\n\t\t\t\t( parseInt( c.css( \"borderBottomWidth\" ), 10 ) || 0 ) -\n\t\t\t\t( parseInt( c.css( \"paddingBottom\" ), 10 ) || 0 ) -\n\t\t\t\tthis.helperProportions.height -\n\t\t\t\tthis.margins.top -\n\t\t\t\tthis.margins.bottom\n\t\t];\n\t\tthis.relativeContainer = c;\n\t},\n\n\t_convertPositionTo: function( d, pos ) {\n\n\t\tif ( !pos ) {\n\t\t\tpos = this.position;\n\t\t}\n\n\t\tvar mod = d === \"absolute\" ? 1 : -1,\n\t\t\tscrollIsRootNode = this._isRootNode( this.scrollParent[ 0 ] );\n\n\t\treturn {\n\t\t\ttop: (\n\n\t\t\t\t// The absolute mouse position\n\t\t\t\tpos.top\t+\n\n\t\t\t\t// Only for relative positioned nodes: Relative offset from element to offset parent\n\t\t\t\tthis.offset.relative.top * mod +\n\n\t\t\t\t// The offsetParent's offset without borders (offset + border)\n\t\t\t\tthis.offset.parent.top * mod -\n\t\t\t\t( ( this.cssPosition === \"fixed\" ?\n\t\t\t\t\t-this.offset.scroll.top :\n\t\t\t\t\t( scrollIsRootNode ? 0 : this.offset.scroll.top ) ) * mod )\n\t\t\t),\n\t\t\tleft: (\n\n\t\t\t\t// The absolute mouse position\n\t\t\t\tpos.left +\n\n\t\t\t\t// Only for relative positioned nodes: Relative offset from element to offset parent\n\t\t\t\tthis.offset.relative.left * mod +\n\n\t\t\t\t// The offsetParent's offset without borders (offset + border)\n\t\t\t\tthis.offset.parent.left * mod\t-\n\t\t\t\t( ( this.cssPosition === \"fixed\" ?\n\t\t\t\t\t-this.offset.scroll.left :\n\t\t\t\t\t( scrollIsRootNode ? 0 : this.offset.scroll.left ) ) * mod )\n\t\t\t)\n\t\t};\n\n\t},\n\n\t_generatePosition: function( event, constrainPosition ) {\n\n\t\tvar containment, co, top, left,\n\t\t\to = this.options,\n\t\t\tscrollIsRootNode = this._isRootNode( this.scrollParent[ 0 ] ),\n\t\t\tpageX = event.pageX,\n\t\t\tpageY = event.pageY;\n\n\t\t// Cache the scroll\n\t\tif ( !scrollIsRootNode || !this.offset.scroll ) {\n\t\t\tthis.offset.scroll = {\n\t\t\t\ttop: this.scrollParent.scrollTop(),\n\t\t\t\tleft: this.scrollParent.scrollLeft()\n\t\t\t};\n\t\t}\n\n\t\t/*\n\t\t * - Position constraining -\n\t\t * Constrain the position to a mix of grid, containment.\n\t\t */\n\n\t\t// If we are not dragging yet, we won't check for options\n\t\tif ( constrainPosition ) {\n\t\t\tif ( this.containment ) {\n\t\t\t\tif ( this.relativeContainer ) {\n\t\t\t\t\tco = this.relativeContainer.offset();\n\t\t\t\t\tcontainment = [\n\t\t\t\t\t\tthis.containment[ 0 ] + co.left,\n\t\t\t\t\t\tthis.containment[ 1 ] + co.top,\n\t\t\t\t\t\tthis.containment[ 2 ] + co.left,\n\t\t\t\t\t\tthis.containment[ 3 ] + co.top\n\t\t\t\t\t];\n\t\t\t\t} else {\n\t\t\t\t\tcontainment = this.containment;\n\t\t\t\t}\n\n\t\t\t\tif ( event.pageX - this.offset.click.left < containment[ 0 ] ) {\n\t\t\t\t\tpageX = containment[ 0 ] + this.offset.click.left;\n\t\t\t\t}\n\t\t\t\tif ( event.pageY - this.offset.click.top < containment[ 1 ] ) {\n\t\t\t\t\tpageY = containment[ 1 ] + this.offset.click.top;\n\t\t\t\t}\n\t\t\t\tif ( event.pageX - this.offset.click.left > containment[ 2 ] ) {\n\t\t\t\t\tpageX = containment[ 2 ] + this.offset.click.left;\n\t\t\t\t}\n\t\t\t\tif ( event.pageY - this.offset.click.top > containment[ 3 ] ) {\n\t\t\t\t\tpageY = containment[ 3 ] + this.offset.click.top;\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tif ( o.grid ) {\n\n\t\t\t\t//Check for grid elements set to 0 to prevent divide by 0 error causing invalid\n\t\t\t\t// argument errors in IE (see ticket #6950)\n\t\t\t\ttop = o.grid[ 1 ] ? this.originalPageY + Math.round( ( pageY -\n\t\t\t\t\tthis.originalPageY ) / o.grid[ 1 ] ) * o.grid[ 1 ] : this.originalPageY;\n\t\t\t\tpageY = containment ? ( ( top - this.offset.click.top >= containment[ 1 ] ||\n\t\t\t\t\ttop - this.offset.click.top > containment[ 3 ] ) ?\n\t\t\t\t\t\ttop :\n\t\t\t\t\t\t( ( top - this.offset.click.top >= containment[ 1 ] ) ?\n\t\t\t\t\t\t\ttop - o.grid[ 1 ] : top + o.grid[ 1 ] ) ) : top;\n\n\t\t\t\tleft = o.grid[ 0 ] ? this.originalPageX +\n\t\t\t\t\tMath.round( ( pageX - this.originalPageX ) / o.grid[ 0 ] ) * o.grid[ 0 ] :\n\t\t\t\t\tthis.originalPageX;\n\t\t\t\tpageX = containment ? ( ( left - this.offset.click.left >= containment[ 0 ] ||\n\t\t\t\t\tleft - this.offset.click.left > containment[ 2 ] ) ?\n\t\t\t\t\t\tleft :\n\t\t\t\t\t\t( ( left - this.offset.click.left >= containment[ 0 ] ) ?\n\t\t\t\t\t\t\tleft - o.grid[ 0 ] : left + o.grid[ 0 ] ) ) : left;\n\t\t\t}\n\n\t\t\tif ( o.axis === \"y\" ) {\n\t\t\t\tpageX = this.originalPageX;\n\t\t\t}\n\n\t\t\tif ( o.axis === \"x\" ) {\n\t\t\t\tpageY = this.originalPageY;\n\t\t\t}\n\t\t}\n\n\t\treturn {\n\t\t\ttop: (\n\n\t\t\t\t// The absolute mouse position\n\t\t\t\tpageY -\n\n\t\t\t\t// Click offset (relative to the element)\n\t\t\t\tthis.offset.click.top -\n\n\t\t\t\t// Only for relative positioned nodes: Relative offset from element to offset parent\n\t\t\t\tthis.offset.relative.top -\n\n\t\t\t\t// The offsetParent's offset without borders (offset + border)\n\t\t\t\tthis.offset.parent.top +\n\t\t\t\t( this.cssPosition === \"fixed\" ?\n\t\t\t\t\t-this.offset.scroll.top :\n\t\t\t\t\t( scrollIsRootNode ? 0 : this.offset.scroll.top ) )\n\t\t\t),\n\t\t\tleft: (\n\n\t\t\t\t// The absolute mouse position\n\t\t\t\tpageX -\n\n\t\t\t\t// Click offset (relative to the element)\n\t\t\t\tthis.offset.click.left -\n\n\t\t\t\t// Only for relative positioned nodes: Relative offset from element to offset parent\n\t\t\t\tthis.offset.relative.left -\n\n\t\t\t\t// The offsetParent's offset without borders (offset + border)\n\t\t\t\tthis.offset.parent.left +\n\t\t\t\t( this.cssPosition === \"fixed\" ?\n\t\t\t\t\t-this.offset.scroll.left :\n\t\t\t\t\t( scrollIsRootNode ? 0 : this.offset.scroll.left ) )\n\t\t\t)\n\t\t};\n\n\t},\n\n\t_clear: function() {\n\t\tthis._removeClass( this.helper, \"ui-draggable-dragging\" );\n\t\tif ( this.helper[ 0 ] !== this.element[ 0 ] && !this.cancelHelperRemoval ) {\n\t\t\tthis.helper.remove();\n\t\t}\n\t\tthis.helper = null;\n\t\tthis.cancelHelperRemoval = false;\n\t\tif ( this.destroyOnClear ) {\n\t\t\tthis.destroy();\n\t\t}\n\t},\n\n\t// From now on bulk stuff - mainly helpers\n\n\t_trigger: function( type, event, ui ) {\n\t\tui = ui || this._uiHash();\n\t\t$.ui.plugin.call( this, type, [ event, ui, this ], true );\n\n\t\t// Absolute position and offset (see #6884 ) have to be recalculated after plugins\n\t\tif ( /^(drag|start|stop)/.test( type ) ) {\n\t\t\tthis.positionAbs = this._convertPositionTo( \"absolute\" );\n\t\t\tui.offset = this.positionAbs;\n\t\t}\n\t\treturn $.Widget.prototype._trigger.call( this, type, event, ui );\n\t},\n\n\tplugins: {},\n\n\t_uiHash: function() {\n\t\treturn {\n\t\t\thelper: this.helper,\n\t\t\tposition: this.position,\n\t\t\toriginalPosition: this.originalPosition,\n\t\t\toffset: this.positionAbs\n\t\t};\n\t}\n\n} );\n\n$.ui.plugin.add( \"draggable\", \"connectToSortable\", {\n\tstart: function( event, ui, draggable ) {\n\t\tvar uiSortable = $.extend( {}, ui, {\n\t\t\titem: draggable.element\n\t\t} );\n\n\t\tdraggable.sortables = [];\n\t\t$( draggable.options.connectToSortable ).each( function() {\n\t\t\tvar sortable = $( this ).sortable( \"instance\" );\n\n\t\t\tif ( sortable && !sortable.options.disabled ) {\n\t\t\t\tdraggable.sortables.push( sortable );\n\n\t\t\t\t// RefreshPositions is called at drag start to refresh the containerCache\n\t\t\t\t// which is used in drag. This ensures it's initialized and synchronized\n\t\t\t\t// with any changes that might have happened on the page since initialization.\n\t\t\t\tsortable.refreshPositions();\n\t\t\t\tsortable._trigger( \"activate\", event, uiSortable );\n\t\t\t}\n\t\t} );\n\t},\n\tstop: function( event, ui, draggable ) {\n\t\tvar uiSortable = $.extend( {}, ui, {\n\t\t\titem: draggable.element\n\t\t} );\n\n\t\tdraggable.cancelHelperRemoval = false;\n\n\t\t$.each( draggable.sortables, function() {\n\t\t\tvar sortable = this;\n\n\t\t\tif ( sortable.isOver ) {\n\t\t\t\tsortable.isOver = 0;\n\n\t\t\t\t// Allow this sortable to handle removing the helper\n\t\t\t\tdraggable.cancelHelperRemoval = true;\n\t\t\t\tsortable.cancelHelperRemoval = false;\n\n\t\t\t\t// Use _storedCSS To restore properties in the sortable,\n\t\t\t\t// as this also handles revert (#9675) since the draggable\n\t\t\t\t// may have modified them in unexpected ways (#8809)\n\t\t\t\tsortable._storedCSS = {\n\t\t\t\t\tposition: sortable.placeholder.css( \"position\" ),\n\t\t\t\t\ttop: sortable.placeholder.css( \"top\" ),\n\t\t\t\t\tleft: sortable.placeholder.css( \"left\" )\n\t\t\t\t};\n\n\t\t\t\tsortable._mouseStop( event );\n\n\t\t\t\t// Once drag has ended, the sortable should return to using\n\t\t\t\t// its original helper, not the shared helper from draggable\n\t\t\t\tsortable.options.helper = sortable.options._helper;\n\t\t\t} else {\n\n\t\t\t\t// Prevent this Sortable from removing the helper.\n\t\t\t\t// However, don't set the draggable to remove the helper\n\t\t\t\t// either as another connected Sortable may yet handle the removal.\n\t\t\t\tsortable.cancelHelperRemoval = true;\n\n\t\t\t\tsortable._trigger( \"deactivate\", event, uiSortable );\n\t\t\t}\n\t\t} );\n\t},\n\tdrag: function( event, ui, draggable ) {\n\t\t$.each( draggable.sortables, function() {\n\t\t\tvar innermostIntersecting = false,\n\t\t\t\tsortable = this;\n\n\t\t\t// Copy over variables that sortable's _intersectsWith uses\n\t\t\tsortable.positionAbs = draggable.positionAbs;\n\t\t\tsortable.helperProportions = draggable.helperProportions;\n\t\t\tsortable.offset.click = draggable.offset.click;\n\n\t\t\tif ( sortable._intersectsWith( sortable.containerCache ) ) {\n\t\t\t\tinnermostIntersecting = true;\n\n\t\t\t\t$.each( draggable.sortables, function() {\n\n\t\t\t\t\t// Copy over variables that sortable's _intersectsWith uses\n\t\t\t\t\tthis.positionAbs = draggable.positionAbs;\n\t\t\t\t\tthis.helperProportions = draggable.helperProportions;\n\t\t\t\t\tthis.offset.click = draggable.offset.click;\n\n\t\t\t\t\tif ( this !== sortable &&\n\t\t\t\t\t\t\tthis._intersectsWith( this.containerCache ) &&\n\t\t\t\t\t\t\t$.contains( sortable.element[ 0 ], this.element[ 0 ] ) ) {\n\t\t\t\t\t\tinnermostIntersecting = false;\n\t\t\t\t\t}\n\n\t\t\t\t\treturn innermostIntersecting;\n\t\t\t\t} );\n\t\t\t}\n\n\t\t\tif ( innermostIntersecting ) {\n\n\t\t\t\t// If it intersects, we use a little isOver variable and set it once,\n\t\t\t\t// so that the move-in stuff gets fired only once.\n\t\t\t\tif ( !sortable.isOver ) {\n\t\t\t\t\tsortable.isOver = 1;\n\n\t\t\t\t\t// Store draggable's parent in case we need to reappend to it later.\n\t\t\t\t\tdraggable._parent = ui.helper.parent();\n\n\t\t\t\t\tsortable.currentItem = ui.helper\n\t\t\t\t\t\t.appendTo( sortable.element )\n\t\t\t\t\t\t.data( \"ui-sortable-item\", true );\n\n\t\t\t\t\t// Store helper option to later restore it\n\t\t\t\t\tsortable.options._helper = sortable.options.helper;\n\n\t\t\t\t\tsortable.options.helper = function() {\n\t\t\t\t\t\treturn ui.helper[ 0 ];\n\t\t\t\t\t};\n\n\t\t\t\t\t// Fire the start events of the sortable with our passed browser event,\n\t\t\t\t\t// and our own helper (so it doesn't create a new one)\n\t\t\t\t\tevent.target = sortable.currentItem[ 0 ];\n\t\t\t\t\tsortable._mouseCapture( event, true );\n\t\t\t\t\tsortable._mouseStart( event, true, true );\n\n\t\t\t\t\t// Because the browser event is way off the new appended portlet,\n\t\t\t\t\t// modify necessary variables to reflect the changes\n\t\t\t\t\tsortable.offset.click.top = draggable.offset.click.top;\n\t\t\t\t\tsortable.offset.click.left = draggable.offset.click.left;\n\t\t\t\t\tsortable.offset.parent.left -= draggable.offset.parent.left -\n\t\t\t\t\t\tsortable.offset.parent.left;\n\t\t\t\t\tsortable.offset.parent.top -= draggable.offset.parent.top -\n\t\t\t\t\t\tsortable.offset.parent.top;\n\n\t\t\t\t\tdraggable._trigger( \"toSortable\", event );\n\n\t\t\t\t\t// Inform draggable that the helper is in a valid drop zone,\n\t\t\t\t\t// used solely in the revert option to handle \"valid/invalid\".\n\t\t\t\t\tdraggable.dropped = sortable.element;\n\n\t\t\t\t\t// Need to refreshPositions of all sortables in the case that\n\t\t\t\t\t// adding to one sortable changes the location of the other sortables (#9675)\n\t\t\t\t\t$.each( draggable.sortables, function() {\n\t\t\t\t\t\tthis.refreshPositions();\n\t\t\t\t\t} );\n\n\t\t\t\t\t// Hack so receive/update callbacks work (mostly)\n\t\t\t\t\tdraggable.currentItem = draggable.element;\n\t\t\t\t\tsortable.fromOutside = draggable;\n\t\t\t\t}\n\n\t\t\t\tif ( sortable.currentItem ) {\n\t\t\t\t\tsortable._mouseDrag( event );\n\n\t\t\t\t\t// Copy the sortable's position because the draggable's can potentially reflect\n\t\t\t\t\t// a relative position, while sortable is always absolute, which the dragged\n\t\t\t\t\t// element has now become. (#8809)\n\t\t\t\t\tui.position = sortable.position;\n\t\t\t\t}\n\t\t\t} else {\n\n\t\t\t\t// If it doesn't intersect with the sortable, and it intersected before,\n\t\t\t\t// we fake the drag stop of the sortable, but make sure it doesn't remove\n\t\t\t\t// the helper by using cancelHelperRemoval.\n\t\t\t\tif ( sortable.isOver ) {\n\n\t\t\t\t\tsortable.isOver = 0;\n\t\t\t\t\tsortable.cancelHelperRemoval = true;\n\n\t\t\t\t\t// Calling sortable's mouseStop would trigger a revert,\n\t\t\t\t\t// so revert must be temporarily false until after mouseStop is called.\n\t\t\t\t\tsortable.options._revert = sortable.options.revert;\n\t\t\t\t\tsortable.options.revert = false;\n\n\t\t\t\t\tsortable._trigger( \"out\", event, sortable._uiHash( sortable ) );\n\t\t\t\t\tsortable._mouseStop( event, true );\n\n\t\t\t\t\t// Restore sortable behaviors that were modfied\n\t\t\t\t\t// when the draggable entered the sortable area (#9481)\n\t\t\t\t\tsortable.options.revert = sortable.options._revert;\n\t\t\t\t\tsortable.options.helper = sortable.options._helper;\n\n\t\t\t\t\tif ( sortable.placeholder ) {\n\t\t\t\t\t\tsortable.placeholder.remove();\n\t\t\t\t\t}\n\n\t\t\t\t\t// Restore and recalculate the draggable's offset considering the sortable\n\t\t\t\t\t// may have modified them in unexpected ways. (#8809, #10669)\n\t\t\t\t\tui.helper.appendTo( draggable._parent );\n\t\t\t\t\tdraggable._refreshOffsets( event );\n\t\t\t\t\tui.position = draggable._generatePosition( event, true );\n\n\t\t\t\t\tdraggable._trigger( \"fromSortable\", event );\n\n\t\t\t\t\t// Inform draggable that the helper is no longer in a valid drop zone\n\t\t\t\t\tdraggable.dropped = false;\n\n\t\t\t\t\t// Need to refreshPositions of all sortables just in case removing\n\t\t\t\t\t// from one sortable changes the location of other sortables (#9675)\n\t\t\t\t\t$.each( draggable.sortables, function() {\n\t\t\t\t\t\tthis.refreshPositions();\n\t\t\t\t\t} );\n\t\t\t\t}\n\t\t\t}\n\t\t} );\n\t}\n} );\n\n$.ui.plugin.add( \"draggable\", \"cursor\", {\n\tstart: function( event, ui, instance ) {\n\t\tvar t = $( \"body\" ),\n\t\t\to = instance.options;\n\n\t\tif ( t.css( \"cursor\" ) ) {\n\t\t\to._cursor = t.css( \"cursor\" );\n\t\t}\n\t\tt.css( \"cursor\", o.cursor );\n\t},\n\tstop: function( event, ui, instance ) {\n\t\tvar o = instance.options;\n\t\tif ( o._cursor ) {\n\t\t\t$( \"body\" ).css( \"cursor\", o._cursor );\n\t\t}\n\t}\n} );\n\n$.ui.plugin.add( \"draggable\", \"opacity\", {\n\tstart: function( event, ui, instance ) {\n\t\tvar t = $( ui.helper ),\n\t\t\to = instance.options;\n\t\tif ( t.css( \"opacity\" ) ) {\n\t\t\to._opacity = t.css( \"opacity\" );\n\t\t}\n\t\tt.css( \"opacity\", o.opacity );\n\t},\n\tstop: function( event, ui, instance ) {\n\t\tvar o = instance.options;\n\t\tif ( o._opacity ) {\n\t\t\t$( ui.helper ).css( \"opacity\", o._opacity );\n\t\t}\n\t}\n} );\n\n$.ui.plugin.add( \"draggable\", \"scroll\", {\n\tstart: function( event, ui, i ) {\n\t\tif ( !i.scrollParentNotHidden ) {\n\t\t\ti.scrollParentNotHidden = i.helper.scrollParent( false );\n\t\t}\n\n\t\tif ( i.scrollParentNotHidden[ 0 ] !== i.document[ 0 ] &&\n\t\t\t\ti.scrollParentNotHidden[ 0 ].tagName !== \"HTML\" ) {\n\t\t\ti.overflowOffset = i.scrollParentNotHidden.offset();\n\t\t}\n\t},\n\tdrag: function( event, ui, i  ) {\n\n\t\tvar o = i.options,\n\t\t\tscrolled = false,\n\t\t\tscrollParent = i.scrollParentNotHidden[ 0 ],\n\t\t\tdocument = i.document[ 0 ];\n\n\t\tif ( scrollParent !== document && scrollParent.tagName !== \"HTML\" ) {\n\t\t\tif ( !o.axis || o.axis !== \"x\" ) {\n\t\t\t\tif ( ( i.overflowOffset.top + scrollParent.offsetHeight ) - event.pageY <\n\t\t\t\t\t\to.scrollSensitivity ) {\n\t\t\t\t\tscrollParent.scrollTop = scrolled = scrollParent.scrollTop + o.scrollSpeed;\n\t\t\t\t} else if ( event.pageY - i.overflowOffset.top < o.scrollSensitivity ) {\n\t\t\t\t\tscrollParent.scrollTop = scrolled = scrollParent.scrollTop - o.scrollSpeed;\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tif ( !o.axis || o.axis !== \"y\" ) {\n\t\t\t\tif ( ( i.overflowOffset.left + scrollParent.offsetWidth ) - event.pageX <\n\t\t\t\t\t\to.scrollSensitivity ) {\n\t\t\t\t\tscrollParent.scrollLeft = scrolled = scrollParent.scrollLeft + o.scrollSpeed;\n\t\t\t\t} else if ( event.pageX - i.overflowOffset.left < o.scrollSensitivity ) {\n\t\t\t\t\tscrollParent.scrollLeft = scrolled = scrollParent.scrollLeft - o.scrollSpeed;\n\t\t\t\t}\n\t\t\t}\n\n\t\t} else {\n\n\t\t\tif ( !o.axis || o.axis !== \"x\" ) {\n\t\t\t\tif ( event.pageY - $( document ).scrollTop() < o.scrollSensitivity ) {\n\t\t\t\t\tscrolled = $( document ).scrollTop( $( document ).scrollTop() - o.scrollSpeed );\n\t\t\t\t} else if ( $( window ).height() - ( event.pageY - $( document ).scrollTop() ) <\n\t\t\t\t\t\to.scrollSensitivity ) {\n\t\t\t\t\tscrolled = $( document ).scrollTop( $( document ).scrollTop() + o.scrollSpeed );\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tif ( !o.axis || o.axis !== \"y\" ) {\n\t\t\t\tif ( event.pageX - $( document ).scrollLeft() < o.scrollSensitivity ) {\n\t\t\t\t\tscrolled = $( document ).scrollLeft(\n\t\t\t\t\t\t$( document ).scrollLeft() - o.scrollSpeed\n\t\t\t\t\t);\n\t\t\t\t} else if ( $( window ).width() - ( event.pageX - $( document ).scrollLeft() ) <\n\t\t\t\t\t\to.scrollSensitivity ) {\n\t\t\t\t\tscrolled = $( document ).scrollLeft(\n\t\t\t\t\t\t$( document ).scrollLeft() + o.scrollSpeed\n\t\t\t\t\t);\n\t\t\t\t}\n\t\t\t}\n\n\t\t}\n\n\t\tif ( scrolled !== false && $.ui.ddmanager && !o.dropBehaviour ) {\n\t\t\t$.ui.ddmanager.prepareOffsets( i, event );\n\t\t}\n\n\t}\n} );\n\n$.ui.plugin.add( \"draggable\", \"snap\", {\n\tstart: function( event, ui, i ) {\n\n\t\tvar o = i.options;\n\n\t\ti.snapElements = [];\n\n\t\t$( o.snap.constructor !== String ? ( o.snap.items || \":data(ui-draggable)\" ) : o.snap )\n\t\t\t.each( function() {\n\t\t\t\tvar $t = $( this ),\n\t\t\t\t\t$o = $t.offset();\n\t\t\t\tif ( this !== i.element[ 0 ] ) {\n\t\t\t\t\ti.snapElements.push( {\n\t\t\t\t\t\titem: this,\n\t\t\t\t\t\twidth: $t.outerWidth(), height: $t.outerHeight(),\n\t\t\t\t\t\ttop: $o.top, left: $o.left\n\t\t\t\t\t} );\n\t\t\t\t}\n\t\t\t} );\n\n\t},\n\tdrag: function( event, ui, inst ) {\n\n\t\tvar ts, bs, ls, rs, l, r, t, b, i, first,\n\t\t\to = inst.options,\n\t\t\td = o.snapTolerance,\n\t\t\tx1 = ui.offset.left, x2 = x1 + inst.helperProportions.width,\n\t\t\ty1 = ui.offset.top, y2 = y1 + inst.helperProportions.height;\n\n\t\tfor ( i = inst.snapElements.length - 1; i >= 0; i-- ) {\n\n\t\t\tl = inst.snapElements[ i ].left - inst.margins.left;\n\t\t\tr = l + inst.snapElements[ i ].width;\n\t\t\tt = inst.snapElements[ i ].top - inst.margins.top;\n\t\t\tb = t + inst.snapElements[ i ].height;\n\n\t\t\tif ( x2 < l - d || x1 > r + d || y2 < t - d || y1 > b + d ||\n\t\t\t\t\t!$.contains( inst.snapElements[ i ].item.ownerDocument,\n\t\t\t\t\tinst.snapElements[ i ].item ) ) {\n\t\t\t\tif ( inst.snapElements[ i ].snapping ) {\n\t\t\t\t\tif ( inst.options.snap.release ) {\n\t\t\t\t\t\tinst.options.snap.release.call(\n\t\t\t\t\t\t\tinst.element,\n\t\t\t\t\t\t\tevent,\n\t\t\t\t\t\t\t$.extend( inst._uiHash(), { snapItem: inst.snapElements[ i ].item } )\n\t\t\t\t\t\t);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\tinst.snapElements[ i ].snapping = false;\n\t\t\t\tcontinue;\n\t\t\t}\n\n\t\t\tif ( o.snapMode !== \"inner\" ) {\n\t\t\t\tts = Math.abs( t - y2 ) <= d;\n\t\t\t\tbs = Math.abs( b - y1 ) <= d;\n\t\t\t\tls = Math.abs( l - x2 ) <= d;\n\t\t\t\trs = Math.abs( r - x1 ) <= d;\n\t\t\t\tif ( ts ) {\n\t\t\t\t\tui.position.top = inst._convertPositionTo( \"relative\", {\n\t\t\t\t\t\ttop: t - inst.helperProportions.height,\n\t\t\t\t\t\tleft: 0\n\t\t\t\t\t} ).top;\n\t\t\t\t}\n\t\t\t\tif ( bs ) {\n\t\t\t\t\tui.position.top = inst._convertPositionTo( \"relative\", {\n\t\t\t\t\t\ttop: b,\n\t\t\t\t\t\tleft: 0\n\t\t\t\t\t} ).top;\n\t\t\t\t}\n\t\t\t\tif ( ls ) {\n\t\t\t\t\tui.position.left = inst._convertPositionTo( \"relative\", {\n\t\t\t\t\t\ttop: 0,\n\t\t\t\t\t\tleft: l - inst.helperProportions.width\n\t\t\t\t\t} ).left;\n\t\t\t\t}\n\t\t\t\tif ( rs ) {\n\t\t\t\t\tui.position.left = inst._convertPositionTo( \"relative\", {\n\t\t\t\t\t\ttop: 0,\n\t\t\t\t\t\tleft: r\n\t\t\t\t\t} ).left;\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tfirst = ( ts || bs || ls || rs );\n\n\t\t\tif ( o.snapMode !== \"outer\" ) {\n\t\t\t\tts = Math.abs( t - y1 ) <= d;\n\t\t\t\tbs = Math.abs( b - y2 ) <= d;\n\t\t\t\tls = Math.abs( l - x1 ) <= d;\n\t\t\t\trs = Math.abs( r - x2 ) <= d;\n\t\t\t\tif ( ts ) {\n\t\t\t\t\tui.position.top = inst._convertPositionTo( \"relative\", {\n\t\t\t\t\t\ttop: t,\n\t\t\t\t\t\tleft: 0\n\t\t\t\t\t} ).top;\n\t\t\t\t}\n\t\t\t\tif ( bs ) {\n\t\t\t\t\tui.position.top = inst._convertPositionTo( \"relative\", {\n\t\t\t\t\t\ttop: b - inst.helperProportions.height,\n\t\t\t\t\t\tleft: 0\n\t\t\t\t\t} ).top;\n\t\t\t\t}\n\t\t\t\tif ( ls ) {\n\t\t\t\t\tui.position.left = inst._convertPositionTo( \"relative\", {\n\t\t\t\t\t\ttop: 0,\n\t\t\t\t\t\tleft: l\n\t\t\t\t\t} ).left;\n\t\t\t\t}\n\t\t\t\tif ( rs ) {\n\t\t\t\t\tui.position.left = inst._convertPositionTo( \"relative\", {\n\t\t\t\t\t\ttop: 0,\n\t\t\t\t\t\tleft: r - inst.helperProportions.width\n\t\t\t\t\t} ).left;\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tif ( !inst.snapElements[ i ].snapping && ( ts || bs || ls || rs || first ) ) {\n\t\t\t\tif ( inst.options.snap.snap ) {\n\t\t\t\t\tinst.options.snap.snap.call(\n\t\t\t\t\t\tinst.element,\n\t\t\t\t\t\tevent,\n\t\t\t\t\t\t$.extend( inst._uiHash(), {\n\t\t\t\t\t\t\tsnapItem: inst.snapElements[ i ].item\n\t\t\t\t\t\t} ) );\n\t\t\t\t}\n\t\t\t}\n\t\t\tinst.snapElements[ i ].snapping = ( ts || bs || ls || rs || first );\n\n\t\t}\n\n\t}\n} );\n\n$.ui.plugin.add( \"draggable\", \"stack\", {\n\tstart: function( event, ui, instance ) {\n\t\tvar min,\n\t\t\to = instance.options,\n\t\t\tgroup = $.makeArray( $( o.stack ) ).sort( function( a, b ) {\n\t\t\t\treturn ( parseInt( $( a ).css( \"zIndex\" ), 10 ) || 0 ) -\n\t\t\t\t\t( parseInt( $( b ).css( \"zIndex\" ), 10 ) || 0 );\n\t\t\t} );\n\n\t\tif ( !group.length ) {\n\t\t\treturn;\n\t\t}\n\n\t\tmin = parseInt( $( group[ 0 ] ).css( \"zIndex\" ), 10 ) || 0;\n\t\t$( group ).each( function( i ) {\n\t\t\t$( this ).css( \"zIndex\", min + i );\n\t\t} );\n\t\tthis.css( \"zIndex\", ( min + group.length ) );\n\t}\n} );\n\n$.ui.plugin.add( \"draggable\", \"zIndex\", {\n\tstart: function( event, ui, instance ) {\n\t\tvar t = $( ui.helper ),\n\t\t\to = instance.options;\n\n\t\tif ( t.css( \"zIndex\" ) ) {\n\t\t\to._zIndex = t.css( \"zIndex\" );\n\t\t}\n\t\tt.css( \"zIndex\", o.zIndex );\n\t},\n\tstop: function( event, ui, instance ) {\n\t\tvar o = instance.options;\n\n\t\tif ( o._zIndex ) {\n\t\t\t$( ui.helper ).css( \"zIndex\", o._zIndex );\n\t\t}\n\t}\n} );\n\nreturn $.ui.draggable;\n\n} );\n","// Copyright (c) 2005-2010 Thomas Fuchs (http://script.aculo.us, http://mir.aculo.us)\n// Contributors:\n//  Justin Palmer (http://encytemedia.com/)\n//  Mark Pilgrim (http://diveintomark.org/)\n//  Martin Bialasinki\n//\n// script.aculo.us is freely distributable under the terms of an MIT-style license.\n// For details, see the script.aculo.us web site: http://script.aculo.us/\n\n\n///////////////////////////////////////////////////////////////////////\n//Jaspersoft/Tibco Updates (look for comment: JASPERSOFT #x)\n///////////////////////////////////////////////////////////////////////\n// #7 Jasper: escape XSS before outputting on the page\n///////////////////////////////////////////////////////////////////////\n\n// converts rgb() and #xxx to #xxxxxx format,\n// returns self (or first argument) if not convertable\nString.prototype.parseColor = function() {\n  var color = '#';\n  if (this.slice(0,4) == 'rgb(') {\n    var cols = this.slice(4,this.length-1).split(',');\n    var i=0; do { color += parseInt(cols[i]).toColorPart() } while (++i<3);\n  } else {\n    if (this.slice(0,1) == '#') {\n      if (this.length==4) for(var i=1;i<4;i++) color += (this.charAt(i) + this.charAt(i)).toLowerCase();\n      if (this.length==7) color = this.toLowerCase();\n    }\n  }\n  return (color.length==7 ? color : (arguments[0] || this));\n};\n\n/*--------------------------------------------------------------------------*/\n\nElement.collectTextNodes = function(element) {\n  return $A($(element).childNodes).collect( function(node) {\n    return (node.nodeType==3 ? node.nodeValue :\n      (node.hasChildNodes() ? Element.collectTextNodes(node) : ''));\n  }).flatten().join('');\n};\n\nElement.collectTextNodesIgnoreClass = function(element, className) {\n  return $A($(element).childNodes).collect( function(node) {\n    return (node.nodeType==3 ? node.nodeValue :\n      ((node.hasChildNodes() && !Element.hasClassName(node,className)) ?\n        Element.collectTextNodesIgnoreClass(node, className) : ''));\n  }).flatten().join('');\n};\n\nElement.setContentZoom = function(element, percent) {\n  element = $(element);\n  element.setStyle({fontSize: (percent/100) + 'em'});\n  if (Prototype.Browser.WebKit) window.scrollBy(0,0);\n  return element;\n};\n\nElement.getInlineOpacity = function(element){\n  return $(element).style.opacity || '';\n};\n\nElement.forceRerendering = function(element) {\n  try {\n    element = $(element);\n    var n = document.createTextNode(' ');\n    element.appendChild(n);\n    element.removeChild(n);\n  } catch(e) { }\n};\n\n/*--------------------------------------------------------------------------*/\n\nvar Effect = {\n  _elementDoesNotExistError: {\n    name: 'ElementDoesNotExistError',\n    message: 'The specified DOM element does not exist, but is required for this effect to operate'\n  },\n  Transitions: {\n    linear: Prototype.K,\n    sinoidal: function(pos) {\n      return (-Math.cos(pos*Math.PI)/2) + .5;\n    },\n    reverse: function(pos) {\n      return 1-pos;\n    },\n    flicker: function(pos) {\n      var pos = ((-Math.cos(pos*Math.PI)/4) + .75) + Math.random()/4;\n      return pos > 1 ? 1 : pos;\n    },\n    wobble: function(pos) {\n      return (-Math.cos(pos*Math.PI*(9*pos))/2) + .5;\n    },\n    pulse: function(pos, pulses) {\n      return (-Math.cos((pos*((pulses||5)-.5)*2)*Math.PI)/2) + .5;\n    },\n    spring: function(pos) {\n      return 1 - (Math.cos(pos * 4.5 * Math.PI) * Math.exp(-pos * 6));\n    },\n    none: function(pos) {\n      return 0;\n    },\n    full: function(pos) {\n      return 1;\n    }\n  },\n  DefaultOptions: {\n    duration:   1.0,   // seconds\n    fps:        100,   // 100= assume 66fps max.\n    sync:       false, // true for combining\n    from:       0.0,\n    to:         1.0,\n    delay:      0.0,\n    queue:      'parallel'\n  },\n  tagifyText: function(element) {\n    var tagifyStyle = 'position:relative';\n    if (Prototype.Browser.IE) tagifyStyle += ';zoom:1';\n\n    element = $(element);\n    $A(element.childNodes).each( function(child) {\n      if (child.nodeType==3) {\n        child.nodeValue.toArray().each( function(character) {\n          element.insertBefore(\n            new Element('span', {style: tagifyStyle}).update(\n              character == ' ' ? String.fromCharCode(160) : character),\n              child);\n        });\n        Element.remove(child);\n      }\n    });\n  },\n  multiple: function(element, effect) {\n    var elements;\n    if (((typeof element == 'object') ||\n        Object.isFunction(element)) &&\n       (element.length))\n      elements = element;\n    else\n      elements = $(element).childNodes;\n\n    var options = Object.extend({\n      speed: 0.1,\n      delay: 0.0\n    }, arguments[2] || { });\n    var masterDelay = options.delay;\n\n    $A(elements).each( function(element, index) {\n      new effect(element, Object.extend(options, { delay: index * options.speed + masterDelay }));\n    });\n  },\n  PAIRS: {\n    'slide':  ['SlideDown','SlideUp'],\n    'blind':  ['BlindDown','BlindUp'],\n    'appear': ['Appear','Fade']\n  },\n  toggle: function(element, effect, options) {\n    element = $(element);\n    effect  = (effect || 'appear').toLowerCase();\n    \n    return Effect[ Effect.PAIRS[ effect ][ element.visible() ? 1 : 0 ] ](element, Object.extend({\n      queue: { position:'end', scope:(element.id || 'global'), limit: 1 }\n    }, options || {}));\n  }\n};\n\nEffect.DefaultOptions.transition = Effect.Transitions.sinoidal;\n\n/* ------------- core effects ------------- */\n\nEffect.ScopedQueue = Class.create(Enumerable, {\n  initialize: function() {\n    this.effects  = [];\n    this.interval = null;\n  },\n  _each: function(iterator) {\n    this.effects._each(iterator);\n  },\n  add: function(effect) {\n    var timestamp = new Date().getTime();\n\n    var position = Object.isString(effect.options.queue) ?\n      effect.options.queue : effect.options.queue.position;\n\n    switch(position) {\n      case 'front':\n        // move unstarted effects after this effect\n        this.effects.findAll(function(e){ return e.state=='idle' }).each( function(e) {\n            e.startOn  += effect.finishOn;\n            e.finishOn += effect.finishOn;\n          });\n        break;\n      case 'with-last':\n        timestamp = this.effects.pluck('startOn').max() || timestamp;\n        break;\n      case 'end':\n        // start effect after last queued effect has finished\n        timestamp = this.effects.pluck('finishOn').max() || timestamp;\n        break;\n    }\n\n    effect.startOn  += timestamp;\n    effect.finishOn += timestamp;\n\n    if (!effect.options.queue.limit || (this.effects.length < effect.options.queue.limit))\n      this.effects.push(effect);\n\n    if (!this.interval)\n      this.interval = setInterval(this.loop.bind(this), 15);\n  },\n  remove: function(effect) {\n    this.effects = this.effects.reject(function(e) { return e==effect });\n    if (this.effects.length == 0) {\n      clearInterval(this.interval);\n      this.interval = null;\n    }\n  },\n  loop: function() {\n    var timePos = new Date().getTime();\n    for(var i=0, len=this.effects.length;i<len;i++)\n      this.effects[i] && this.effects[i].loop(timePos);\n  }\n});\n\nEffect.Queues = {\n  instances: $H(),\n  get: function(queueName) {\n    if (!Object.isString(queueName)) return queueName;\n\n    return this.instances.get(queueName) ||\n      this.instances.set(queueName, new Effect.ScopedQueue());\n  }\n};\nEffect.Queue = Effect.Queues.get('global');\n\nEffect.Base = Class.create({\n  position: null,\n  start: function(options) {\n    if (options && options.transition === false) options.transition = Effect.Transitions.linear;\n    this.options      = Object.extend(Object.extend({ },Effect.DefaultOptions), options || { });\n    this.currentFrame = 0;\n    this.state        = 'idle';\n    this.startOn      = this.options.delay*1000;\n    this.finishOn     = this.startOn+(this.options.duration*1000);\n    this.fromToDelta  = this.options.to-this.options.from;\n    this.totalTime    = this.finishOn-this.startOn;\n    this.totalFrames  = this.options.fps*this.options.duration;\n\n    this.render = (function() {\n      function dispatch(effect, eventName) {\n        if (effect.options[eventName + 'Internal'])\n          effect.options[eventName + 'Internal'](effect);\n        if (effect.options[eventName])\n          effect.options[eventName](effect);\n      }\n\n      return function(pos) {\n        if (this.state === \"idle\") {\n          this.state = \"running\";\n          dispatch(this, 'beforeSetup');\n          if (this.setup) this.setup();\n          dispatch(this, 'afterSetup');\n        }\n        if (this.state === \"running\") {\n          pos = (this.options.transition(pos) * this.fromToDelta) + this.options.from;\n          this.position = pos;\n          dispatch(this, 'beforeUpdate');\n          if (this.update) this.update(pos);\n          dispatch(this, 'afterUpdate');\n        }\n      };\n    })();\n\n    this.event('beforeStart');\n    if (!this.options.sync)\n      Effect.Queues.get(Object.isString(this.options.queue) ?\n        'global' : this.options.queue.scope).add(this);\n  },\n  loop: function(timePos) {\n    if (timePos >= this.startOn) {\n      if (timePos >= this.finishOn) {\n        this.render(1.0);\n        this.cancel();\n        this.event('beforeFinish');\n        if (this.finish) this.finish();\n        this.event('afterFinish');\n        return;\n      }\n      var pos   = (timePos - this.startOn) / this.totalTime,\n          frame = (pos * this.totalFrames).round();\n      if (frame > this.currentFrame) {\n        this.render(pos);\n        this.currentFrame = frame;\n      }\n    }\n  },\n  cancel: function() {\n    if (!this.options.sync)\n      Effect.Queues.get(Object.isString(this.options.queue) ?\n        'global' : this.options.queue.scope).remove(this);\n    this.state = 'finished';\n  },\n  event: function(eventName) {\n    if (this.options[eventName + 'Internal']) this.options[eventName + 'Internal'](this);\n    if (this.options[eventName]) this.options[eventName](this);\n  },\n  inspect: function() {\n    var data = $H();\n    for(property in this)\n      if (!Object.isFunction(this[property])) data.set(property, this[property]);\n    return '#<Effect:' + data.inspect() + ',options:' + $H(this.options).inspect() + '>';\n  }\n});\n\nEffect.Parallel = Class.create(Effect.Base, {\n  initialize: function(effects) {\n    this.effects = effects || [];\n    this.start(arguments[1]);\n  },\n  update: function(position) {\n    this.effects.invoke('render', position);\n  },\n  finish: function(position) {\n    this.effects.each( function(effect) {\n      effect.render(1.0);\n      effect.cancel();\n      effect.event('beforeFinish');\n      if (effect.finish) effect.finish(position);\n      effect.event('afterFinish');\n    });\n  }\n});\n\nEffect.Tween = Class.create(Effect.Base, {\n  initialize: function(object, from, to) {\n    object = Object.isString(object) ? $(object) : object;\n    var args = $A(arguments), method = args.last(),\n      options = args.length == 5 ? args[3] : null;\n    this.method = Object.isFunction(method) ? method.bind(object) :\n      Object.isFunction(object[method]) ? object[method].bind(object) :\n      function(value) { object[method] = value };\n    this.start(Object.extend({ from: from, to: to }, options || { }));\n  },\n  update: function(position) {\n    this.method(position);\n  }\n});\n\nEffect.Event = Class.create(Effect.Base, {\n  initialize: function() {\n    this.start(Object.extend({ duration: 0 }, arguments[0] || { }));\n  },\n  update: Prototype.emptyFunction\n});\n\nEffect.Opacity = Class.create(Effect.Base, {\n  initialize: function(element) {\n    this.element = $(element);\n    if (!this.element) throw(Effect._elementDoesNotExistError);\n    // make this work on IE on elements without 'layout'\n    if (Prototype.Browser.IE && (!this.element.currentStyle.hasLayout))\n      this.element.setStyle({zoom: 1});\n    var options = Object.extend({\n      from: this.element.getOpacity() || 0.0,\n      to:   1.0\n    }, arguments[1] || { });\n    this.start(options);\n  },\n  update: function(position) {\n    this.element.setOpacity(position);\n  }\n});\n\nEffect.Move = Class.create(Effect.Base, {\n  initialize: function(element) {\n    this.element = $(element);\n    if (!this.element) throw(Effect._elementDoesNotExistError);\n    var options = Object.extend({\n      x:    0,\n      y:    0,\n      mode: 'relative'\n    }, arguments[1] || { });\n    this.start(options);\n  },\n  setup: function() {\n    this.element.makePositioned();\n    this.originalLeft = parseFloat(this.element.getStyle('left') || '0');\n    this.originalTop  = parseFloat(this.element.getStyle('top')  || '0');\n    if (this.options.mode == 'absolute') {\n      this.options.x = this.options.x - this.originalLeft;\n      this.options.y = this.options.y - this.originalTop;\n    }\n  },\n  update: function(position) {\n    this.element.setStyle({\n      left: (this.options.x  * position + this.originalLeft).round() + 'px',\n      top:  (this.options.y  * position + this.originalTop).round()  + 'px'\n    });\n  }\n});\n\n// for backwards compatibility\nEffect.MoveBy = function(element, toTop, toLeft) {\n  return new Effect.Move(element,\n    Object.extend({ x: toLeft, y: toTop }, arguments[3] || { }));\n};\n\nEffect.Scale = Class.create(Effect.Base, {\n  initialize: function(element, percent) {\n    this.element = $(element);\n    if (!this.element) throw(Effect._elementDoesNotExistError);\n    var options = Object.extend({\n      scaleX: true,\n      scaleY: true,\n      scaleContent: true,\n      scaleFromCenter: false,\n      scaleMode: 'box',        // 'box' or 'contents' or { } with provided values\n      scaleFrom: 100.0,\n      scaleTo:   percent\n    }, arguments[2] || { });\n    this.start(options);\n  },\n  setup: function() {\n    this.restoreAfterFinish = this.options.restoreAfterFinish || false;\n    this.elementPositioning = this.element.getStyle('position');\n\n    this.originalStyle = { };\n    ['top','left','width','height','fontSize'].each( function(k) {\n      this.originalStyle[k] = this.element.style[k];\n    }.bind(this));\n\n    this.originalTop  = this.element.offsetTop;\n    this.originalLeft = this.element.offsetLeft;\n\n    var fontSize = this.element.getStyle('font-size') || '100%';\n    ['em','px','%','pt'].each( function(fontSizeType) {\n      if (fontSize.indexOf(fontSizeType)>0) {\n        this.fontSize     = parseFloat(fontSize);\n        this.fontSizeType = fontSizeType;\n      }\n    }.bind(this));\n\n    this.factor = (this.options.scaleTo - this.options.scaleFrom)/100;\n\n    this.dims = null;\n    if (this.options.scaleMode=='box')\n      this.dims = [this.element.offsetHeight, this.element.offsetWidth];\n    if (/^content/.test(this.options.scaleMode))\n      this.dims = [this.element.scrollHeight, this.element.scrollWidth];\n    if (!this.dims)\n      this.dims = [this.options.scaleMode.originalHeight,\n                   this.options.scaleMode.originalWidth];\n  },\n  update: function(position) {\n    var currentScale = (this.options.scaleFrom/100.0) + (this.factor * position);\n    if (this.options.scaleContent && this.fontSize)\n      this.element.setStyle({fontSize: this.fontSize * currentScale + this.fontSizeType });\n    this.setDimensions(this.dims[0] * currentScale, this.dims[1] * currentScale);\n  },\n  finish: function(position) {\n    if (this.restoreAfterFinish) this.element.setStyle(this.originalStyle);\n  },\n  setDimensions: function(height, width) {\n    var d = { };\n    if (this.options.scaleX) d.width = width.round() + 'px';\n    if (this.options.scaleY) d.height = height.round() + 'px';\n    if (this.options.scaleFromCenter) {\n      var topd  = (height - this.dims[0])/2;\n      var leftd = (width  - this.dims[1])/2;\n      if (this.elementPositioning == 'absolute') {\n        if (this.options.scaleY) d.top = this.originalTop-topd + 'px';\n        if (this.options.scaleX) d.left = this.originalLeft-leftd + 'px';\n      } else {\n        if (this.options.scaleY) d.top = -topd + 'px';\n        if (this.options.scaleX) d.left = -leftd + 'px';\n      }\n    }\n    this.element.setStyle(d);\n  }\n});\n\nEffect.Highlight = Class.create(Effect.Base, {\n  initialize: function(element) {\n    this.element = $(element);\n    if (!this.element) throw(Effect._elementDoesNotExistError);\n    var options = Object.extend({ startcolor: '#ffff99' }, arguments[1] || { });\n    this.start(options);\n  },\n  setup: function() {\n    // Prevent executing on elements not in the layout flow\n    if (this.element.getStyle('display')=='none') { this.cancel(); return; }\n    // Disable background image during the effect\n    this.oldStyle = { };\n    if (!this.options.keepBackgroundImage) {\n      this.oldStyle.backgroundImage = this.element.getStyle('background-image');\n      this.element.setStyle({backgroundImage: 'none'});\n    }\n    if (!this.options.endcolor)\n      this.options.endcolor = this.element.getStyle('background-color').parseColor('#ffffff');\n    if (!this.options.restorecolor)\n      this.options.restorecolor = this.element.getStyle('background-color');\n    // init color calculations\n    this._base  = $R(0,2).map(function(i){ return parseInt(this.options.startcolor.slice(i*2+1,i*2+3),16) }.bind(this));\n    this._delta = $R(0,2).map(function(i){ return parseInt(this.options.endcolor.slice(i*2+1,i*2+3),16)-this._base[i] }.bind(this));\n  },\n  update: function(position) {\n    this.element.setStyle({backgroundColor: $R(0,2).inject('#',function(m,v,i){\n      return m+((this._base[i]+(this._delta[i]*position)).round().toColorPart()); }.bind(this)) });\n  },\n  finish: function() {\n    this.element.setStyle(Object.extend(this.oldStyle, {\n      backgroundColor: this.options.restorecolor\n    }));\n  }\n});\n\nEffect.ScrollTo = function(element) {\n  var options = arguments[1] || { },\n  scrollOffsets = document.viewport.getScrollOffsets(),\n  elementOffsets = $(element).cumulativeOffset();\n\n  if (options.offset) elementOffsets[1] += options.offset;\n\n  return new Effect.Tween(null,\n    scrollOffsets.top,\n    elementOffsets[1],\n    options,\n    function(p){ scrollTo(scrollOffsets.left, p.round()); }\n  );\n};\n\n/* ------------- combination effects ------------- */\n\nEffect.Fade = function(element) {\n  element = $(element);\n  var oldOpacity = element.getInlineOpacity();\n  var options = Object.extend({\n    from: element.getOpacity() || 1.0,\n    to:   0.0,\n    afterFinishInternal: function(effect) {\n      if (effect.options.to!=0) return;\n      effect.element.hide().setStyle({opacity: oldOpacity});\n    }\n  }, arguments[1] || { });\n  return new Effect.Opacity(element,options);\n};\n\nEffect.Appear = function(element) {\n  element = $(element);\n  var options = Object.extend({\n  from: (element.getStyle('display') == 'none' ? 0.0 : element.getOpacity() || 0.0),\n  to:   1.0,\n  // force Safari to render floated elements properly\n  afterFinishInternal: function(effect) {\n    effect.element.forceRerendering();\n  },\n  beforeSetup: function(effect) {\n    effect.element.setOpacity(effect.options.from).show();\n  }}, arguments[1] || { });\n  return new Effect.Opacity(element,options);\n};\n\nEffect.Puff = function(element) {\n  element = $(element);\n  var oldStyle = {\n    opacity: element.getInlineOpacity(),\n    position: element.getStyle('position'),\n    top:  element.style.top,\n    left: element.style.left,\n    width: element.style.width,\n    height: element.style.height\n  };\n  return new Effect.Parallel(\n   [ new Effect.Scale(element, 200,\n      { sync: true, scaleFromCenter: true, scaleContent: true, restoreAfterFinish: true }),\n     new Effect.Opacity(element, { sync: true, to: 0.0 } ) ],\n     Object.extend({ duration: 1.0,\n      beforeSetupInternal: function(effect) {\n        Position.absolutize(effect.effects[0].element);\n      },\n      afterFinishInternal: function(effect) {\n         effect.effects[0].element.hide().setStyle(oldStyle); }\n     }, arguments[1] || { })\n   );\n};\n\nEffect.BlindUp = function(element) {\n  element = $(element);\n  element.makeClipping();\n  return new Effect.Scale(element, 0,\n    Object.extend({ scaleContent: false,\n      scaleX: false,\n      restoreAfterFinish: true,\n      afterFinishInternal: function(effect) {\n        effect.element.hide().undoClipping();\n      }\n    }, arguments[1] || { })\n  );\n};\n\nEffect.BlindDown = function(element) {\n  element = $(element);\n  var elementDimensions = element.getDimensions();\n  return new Effect.Scale(element, 100, Object.extend({\n    scaleContent: false,\n    scaleX: false,\n    scaleFrom: 0,\n    scaleMode: {originalHeight: elementDimensions.height, originalWidth: elementDimensions.width},\n    restoreAfterFinish: true,\n    afterSetup: function(effect) {\n      effect.element.makeClipping().setStyle({height: '0px'}).show();\n    },\n    afterFinishInternal: function(effect) {\n      effect.element.undoClipping();\n    }\n  }, arguments[1] || { }));\n};\n\nEffect.SwitchOff = function(element) {\n  element = $(element);\n  var oldOpacity = element.getInlineOpacity();\n  return new Effect.Appear(element, Object.extend({\n    duration: 0.4,\n    from: 0,\n    transition: Effect.Transitions.flicker,\n    afterFinishInternal: function(effect) {\n      new Effect.Scale(effect.element, 1, {\n        duration: 0.3, scaleFromCenter: true,\n        scaleX: false, scaleContent: false, restoreAfterFinish: true,\n        beforeSetup: function(effect) {\n          effect.element.makePositioned().makeClipping();\n        },\n        afterFinishInternal: function(effect) {\n          effect.element.hide().undoClipping().undoPositioned().setStyle({opacity: oldOpacity});\n        }\n      });\n    }\n  }, arguments[1] || { }));\n};\n\nEffect.DropOut = function(element) {\n  element = $(element);\n  var oldStyle = {\n    top: element.getStyle('top'),\n    left: element.getStyle('left'),\n    opacity: element.getInlineOpacity() };\n  return new Effect.Parallel(\n    [ new Effect.Move(element, {x: 0, y: 100, sync: true }),\n      new Effect.Opacity(element, { sync: true, to: 0.0 }) ],\n    Object.extend(\n      { duration: 0.5,\n        beforeSetup: function(effect) {\n          effect.effects[0].element.makePositioned();\n        },\n        afterFinishInternal: function(effect) {\n          effect.effects[0].element.hide().undoPositioned().setStyle(oldStyle);\n        }\n      }, arguments[1] || { }));\n};\n\nEffect.Shake = function(element) {\n  element = $(element);\n  var options = Object.extend({\n    distance: 20,\n    duration: 0.5\n  }, arguments[1] || {});\n  var distance = parseFloat(options.distance);\n  var split = parseFloat(options.duration) / 10.0;\n  var oldStyle = {\n    top: element.getStyle('top'),\n    left: element.getStyle('left') };\n    return new Effect.Move(element,\n      { x:  distance, y: 0, duration: split, afterFinishInternal: function(effect) {\n    new Effect.Move(effect.element,\n      { x: -distance*2, y: 0, duration: split*2,  afterFinishInternal: function(effect) {\n    new Effect.Move(effect.element,\n      { x:  distance*2, y: 0, duration: split*2,  afterFinishInternal: function(effect) {\n    new Effect.Move(effect.element,\n      { x: -distance*2, y: 0, duration: split*2,  afterFinishInternal: function(effect) {\n    new Effect.Move(effect.element,\n      { x:  distance*2, y: 0, duration: split*2,  afterFinishInternal: function(effect) {\n    new Effect.Move(effect.element,\n      { x: -distance, y: 0, duration: split, afterFinishInternal: function(effect) {\n        effect.element.undoPositioned().setStyle(oldStyle);\n  }}); }}); }}); }}); }}); }});\n};\n\nEffect.SlideDown = function(element) {\n  element = $(element).cleanWhitespace();\n  // SlideDown need to have the content of the element wrapped in a container element with fixed height!\n  var oldInnerBottom = element.down().getStyle('bottom');\n  var elementDimensions = element.getDimensions();\n  return new Effect.Scale(element, 100, Object.extend({\n    scaleContent: false,\n    scaleX: false,\n    scaleFrom: window.opera ? 0 : 1,\n    scaleMode: {originalHeight: elementDimensions.height, originalWidth: elementDimensions.width},\n    restoreAfterFinish: true,\n    afterSetup: function(effect) {\n      effect.element.makePositioned();\n      effect.element.down().makePositioned();\n      if (window.opera) effect.element.setStyle({top: ''});\n      effect.element.makeClipping().setStyle({height: '0px'}).show();\n    },\n    afterUpdateInternal: function(effect) {\n      effect.element.down().setStyle({bottom:\n        (effect.dims[0] - effect.element.clientHeight) + 'px' });\n    },\n    afterFinishInternal: function(effect) {\n      effect.element.undoClipping().undoPositioned();\n      effect.element.down().undoPositioned().setStyle({bottom: oldInnerBottom}); }\n    }, arguments[1] || { })\n  );\n};\n\nEffect.SlideUp = function(element) {\n  element = $(element).cleanWhitespace();\n  var oldInnerBottom = element.down().getStyle('bottom');\n  var elementDimensions = element.getDimensions();\n  return new Effect.Scale(element, window.opera ? 0 : 1,\n   Object.extend({ scaleContent: false,\n    scaleX: false,\n    scaleMode: 'box',\n    scaleFrom: 100,\n    scaleMode: {originalHeight: elementDimensions.height, originalWidth: elementDimensions.width},\n    restoreAfterFinish: true,\n    afterSetup: function(effect) {\n      effect.element.makePositioned();\n      effect.element.down().makePositioned();\n      if (window.opera) effect.element.setStyle({top: ''});\n      effect.element.makeClipping().show();\n    },\n    afterUpdateInternal: function(effect) {\n      effect.element.down().setStyle({bottom:\n        (effect.dims[0] - effect.element.clientHeight) + 'px' });\n    },\n    afterFinishInternal: function(effect) {\n      effect.element.hide().undoClipping().undoPositioned();\n      effect.element.down().undoPositioned().setStyle({bottom: oldInnerBottom});\n    }\n   }, arguments[1] || { })\n  );\n};\n\n// Bug in opera makes the TD containing this element expand for a instance after finish\nEffect.Squish = function(element) {\n  return new Effect.Scale(element, window.opera ? 1 : 0, {\n    restoreAfterFinish: true,\n    beforeSetup: function(effect) {\n      effect.element.makeClipping();\n    },\n    afterFinishInternal: function(effect) {\n      effect.element.hide().undoClipping();\n    }\n  });\n};\n\nEffect.Grow = function(element) {\n  element = $(element);\n  var options = Object.extend({\n    direction: 'center',\n    moveTransition: Effect.Transitions.sinoidal,\n    scaleTransition: Effect.Transitions.sinoidal,\n    opacityTransition: Effect.Transitions.full\n  }, arguments[1] || { });\n  var oldStyle = {\n    top: element.style.top,\n    left: element.style.left,\n    height: element.style.height,\n    width: element.style.width,\n    opacity: element.getInlineOpacity() };\n\n  var dims = element.getDimensions();\n  var initialMoveX, initialMoveY;\n  var moveX, moveY;\n\n  switch (options.direction) {\n    case 'top-left':\n      initialMoveX = initialMoveY = moveX = moveY = 0;\n      break;\n    case 'top-right':\n      initialMoveX = dims.width;\n      initialMoveY = moveY = 0;\n      moveX = -dims.width;\n      break;\n    case 'bottom-left':\n      initialMoveX = moveX = 0;\n      initialMoveY = dims.height;\n      moveY = -dims.height;\n      break;\n    case 'bottom-right':\n      initialMoveX = dims.width;\n      initialMoveY = dims.height;\n      moveX = -dims.width;\n      moveY = -dims.height;\n      break;\n    case 'center':\n      initialMoveX = dims.width / 2;\n      initialMoveY = dims.height / 2;\n      moveX = -dims.width / 2;\n      moveY = -dims.height / 2;\n      break;\n  }\n\n  return new Effect.Move(element, {\n    x: initialMoveX,\n    y: initialMoveY,\n    duration: 0.01,\n    beforeSetup: function(effect) {\n      effect.element.hide().makeClipping().makePositioned();\n    },\n    afterFinishInternal: function(effect) {\n      new Effect.Parallel(\n        [ new Effect.Opacity(effect.element, { sync: true, to: 1.0, from: 0.0, transition: options.opacityTransition }),\n          new Effect.Move(effect.element, { x: moveX, y: moveY, sync: true, transition: options.moveTransition }),\n          new Effect.Scale(effect.element, 100, {\n            scaleMode: { originalHeight: dims.height, originalWidth: dims.width },\n            sync: true, scaleFrom: window.opera ? 1 : 0, transition: options.scaleTransition, restoreAfterFinish: true})\n        ], Object.extend({\n             beforeSetup: function(effect) {\n               effect.effects[0].element.setStyle({height: '0px'}).show();\n             },\n             afterFinishInternal: function(effect) {\n               effect.effects[0].element.undoClipping().undoPositioned().setStyle(oldStyle);\n             }\n           }, options)\n      );\n    }\n  });\n};\n\nEffect.Shrink = function(element) {\n  element = $(element);\n  var options = Object.extend({\n    direction: 'center',\n    moveTransition: Effect.Transitions.sinoidal,\n    scaleTransition: Effect.Transitions.sinoidal,\n    opacityTransition: Effect.Transitions.none\n  }, arguments[1] || { });\n  var oldStyle = {\n    top: element.style.top,\n    left: element.style.left,\n    height: element.style.height,\n    width: element.style.width,\n    opacity: element.getInlineOpacity() };\n\n  var dims = element.getDimensions();\n  var moveX, moveY;\n\n  switch (options.direction) {\n    case 'top-left':\n      moveX = moveY = 0;\n      break;\n    case 'top-right':\n      moveX = dims.width;\n      moveY = 0;\n      break;\n    case 'bottom-left':\n      moveX = 0;\n      moveY = dims.height;\n      break;\n    case 'bottom-right':\n      moveX = dims.width;\n      moveY = dims.height;\n      break;\n    case 'center':\n      moveX = dims.width / 2;\n      moveY = dims.height / 2;\n      break;\n  }\n\n  return new Effect.Parallel(\n    [ new Effect.Opacity(element, { sync: true, to: 0.0, from: 1.0, transition: options.opacityTransition }),\n      new Effect.Scale(element, window.opera ? 1 : 0, { sync: true, transition: options.scaleTransition, restoreAfterFinish: true}),\n      new Effect.Move(element, { x: moveX, y: moveY, sync: true, transition: options.moveTransition })\n    ], Object.extend({\n         beforeStartInternal: function(effect) {\n           effect.effects[0].element.makePositioned().makeClipping();\n         },\n         afterFinishInternal: function(effect) {\n           effect.effects[0].element.hide().undoClipping().undoPositioned().setStyle(oldStyle); }\n       }, options)\n  );\n};\n\nEffect.Pulsate = function(element) {\n  element = $(element);\n  var options    = arguments[1] || { },\n    oldOpacity = element.getInlineOpacity(),\n    transition = options.transition || Effect.Transitions.linear,\n    reverser   = function(pos){\n      return 1 - transition((-Math.cos((pos*(options.pulses||5)*2)*Math.PI)/2) + .5);\n    };\n\n  return new Effect.Opacity(element,\n    Object.extend(Object.extend({  duration: 2.0, from: 0,\n      afterFinishInternal: function(effect) { effect.element.setStyle({opacity: oldOpacity}); }\n    }, options), {transition: reverser}));\n};\n\nEffect.Fold = function(element) {\n  element = $(element);\n  var oldStyle = {\n    top: element.style.top,\n    left: element.style.left,\n    width: element.style.width,\n    height: element.style.height };\n  element.makeClipping();\n  return new Effect.Scale(element, 5, Object.extend({\n    scaleContent: false,\n    scaleX: false,\n    afterFinishInternal: function(effect) {\n    new Effect.Scale(element, 1, {\n      scaleContent: false,\n      scaleY: false,\n      afterFinishInternal: function(effect) {\n        effect.element.hide().undoClipping().setStyle(oldStyle);\n      } });\n  }}, arguments[1] || { }));\n};\n\nEffect.Morph = Class.create(Effect.Base, {\n  initialize: function(element) {\n    this.element = $(element);\n    if (!this.element) throw(Effect._elementDoesNotExistError);\n    var options = Object.extend({\n      style: { }\n    }, arguments[1] || { });\n\n    if (!Object.isString(options.style)) this.style = $H(options.style);\n    else {\n      if (options.style.include(':'))\n        this.style = options.style.parseStyle();\n      else {\n        this.element.addClassName(options.style);\n        this.style = $H(this.element.getStyles());\n        this.element.removeClassName(options.style);\n        var css = this.element.getStyles();\n        this.style = this.style.reject(function(style) {\n          return style.value == css[style.key];\n        });\n        options.afterFinishInternal = function(effect) {\n          effect.element.addClassName(effect.options.style);\n          effect.transforms.each(function(transform) {\n            effect.element.style[transform.style] = '';\n          });\n        };\n      }\n    }\n    this.start(options);\n  },\n\n  setup: function(){\n    function parseColor(color){\n      if (!color || ['rgba(0, 0, 0, 0)','transparent'].include(color)) color = '#ffffff';\n      color = color.parseColor();\n      return $R(0,2).map(function(i){\n        return parseInt( color.slice(i*2+1,i*2+3), 16 );\n      });\n    }\n    this.transforms = this.style.map(function(pair){\n      var property = pair[0], value = pair[1], unit = null;\n\n      if (value.parseColor('#zzzzzz') != '#zzzzzz') {\n        value = value.parseColor();\n        unit  = 'color';\n      } else if (property == 'opacity') {\n        value = parseFloat(value);\n        if (Prototype.Browser.IE && (!this.element.currentStyle.hasLayout))\n          this.element.setStyle({zoom: 1});\n      } else if (Element.CSS_LENGTH.test(value)) {\n          var components = value.match(/^([\\+\\-]?[0-9\\.]+)(.*)$/);\n          value = parseFloat(components[1]);\n          unit = (components.length == 3) ? components[2] : null;\n      }\n\n      var originalValue = this.element.getStyle(property);\n      return {\n        style: property.camelize(),\n        originalValue: unit=='color' ? parseColor(originalValue) : parseFloat(originalValue || 0),\n        targetValue: unit=='color' ? parseColor(value) : value,\n        unit: unit\n      };\n    }.bind(this)).reject(function(transform){\n      return (\n        (transform.originalValue == transform.targetValue) ||\n        (\n          transform.unit != 'color' &&\n          (isNaN(transform.originalValue) || isNaN(transform.targetValue))\n        )\n      );\n    });\n  },\n  update: function(position) {\n    var style = { }, transform, i = this.transforms.length;\n    while(i--)\n      style[(transform = this.transforms[i]).style] =\n        transform.unit=='color' ? '#'+\n          (Math.round(transform.originalValue[0]+\n            (transform.targetValue[0]-transform.originalValue[0])*position)).toColorPart() +\n          (Math.round(transform.originalValue[1]+\n            (transform.targetValue[1]-transform.originalValue[1])*position)).toColorPart() +\n          (Math.round(transform.originalValue[2]+\n            (transform.targetValue[2]-transform.originalValue[2])*position)).toColorPart() :\n        (transform.originalValue +\n          (transform.targetValue - transform.originalValue) * position).toFixed(3) +\n            (transform.unit === null ? '' : transform.unit);\n    this.element.setStyle(style, true);\n  }\n});\n\nEffect.Transform = Class.create({\n  initialize: function(tracks){\n    this.tracks  = [];\n    this.options = arguments[1] || { };\n    this.addTracks(tracks);\n  },\n  addTracks: function(tracks){\n    tracks.each(function(track){\n      track = $H(track);\n      var data = track.values().first();\n      this.tracks.push($H({\n        ids:     track.keys().first(),\n        effect:  Effect.Morph,\n        options: { style: data }\n      }));\n    }.bind(this));\n    return this;\n  },\n  play: function(){\n    return new Effect.Parallel(\n      this.tracks.map(function(track){\n        var ids = track.get('ids'), effect = track.get('effect'), options = track.get('options');\n        var elements = [$(ids) || $$(ids)].flatten();\n        return elements.map(function(e){ return new effect(e, Object.extend({ sync:true }, options)) });\n      }).flatten(),\n      this.options\n    );\n  }\n});\n\nElement.CSS_PROPERTIES = $w(\n  'backgroundColor backgroundPosition borderBottomColor borderBottomStyle ' +\n  'borderBottomWidth borderLeftColor borderLeftStyle borderLeftWidth ' +\n  'borderRightColor borderRightStyle borderRightWidth borderSpacing ' +\n  'borderTopColor borderTopStyle borderTopWidth bottom clip color ' +\n  'fontSize fontWeight height left letterSpacing lineHeight ' +\n  'marginBottom marginLeft marginRight marginTop markerOffset maxHeight '+\n  'maxWidth minHeight minWidth opacity outlineColor outlineOffset ' +\n  'outlineWidth paddingBottom paddingLeft paddingRight paddingTop ' +\n  'right textIndent top width wordSpacing zIndex');\n\nElement.CSS_LENGTH = /^(([\\+\\-]?[0-9\\.]+)(em|ex|px|in|cm|mm|pt|pc|\\%))|0$/;\n\nString.__parseStyleElement = document.createElement('div');\nString.prototype.parseStyle = function(){\n  // #7 Jasper: escape XSS\n  var _escapeXSS = function (s) {\n      if (typeof $.escapeXSS === 'undefined')\n          throw new Error('$.escapeXSS must be defined in order to use this version of Scriptaculous.Builder.');\n      return $.escapeXSS(s);\n  };\n  // End #7 Jasper: escape XSS\n\n  var style, styleRules = $H();\n  if (Prototype.Browser.WebKit)\n    style = new Element('div',{style:this}).style;\n  else {\n      // #7 Jasper: escape XSS\n    String.__parseStyleElement.innerHTML = _escapeXSS('<div style=\"' + this + '\"></div>');\n      // End #7 Jasper: escape XSS\n    style = String.__parseStyleElement.childNodes[0].style;\n  }\n\n  Element.CSS_PROPERTIES.each(function(property){\n    if (style[property]) styleRules.set(property, style[property]);\n  });\n\n  if (Prototype.Browser.IE && this.include('opacity'))\n    styleRules.set('opacity', this.match(/opacity:\\s*((?:0|1)?(?:\\.\\d*)?)/)[1]);\n\n  return styleRules;\n};\n\nif (document.defaultView && document.defaultView.getComputedStyle) {\n  Element.getStyles = function(element) {\n    var css = document.defaultView.getComputedStyle($(element), null);\n    return Element.CSS_PROPERTIES.inject({ }, function(styles, property) {\n      styles[property] = css[property];\n      return styles;\n    });\n  };\n} else {\n  Element.getStyles = function(element) {\n    element = $(element);\n    var css = element.currentStyle, styles;\n    styles = Element.CSS_PROPERTIES.inject({ }, function(results, property) {\n      results[property] = css[property];\n      return results;\n    });\n    if (!styles.opacity) styles.opacity = element.getOpacity();\n    return styles;\n  };\n}\n\nEffect.Methods = {\n  morph: function(element, style) {\n    element = $(element);\n    new Effect.Morph(element, Object.extend({ style: style }, arguments[2] || { }));\n    return element;\n  },\n  visualEffect: function(element, effect, options) {\n    element = $(element);\n    var s = effect.dasherize().camelize(), klass = s.charAt(0).toUpperCase() + s.substring(1);\n    new Effect[klass](element, options);\n    return element;\n  },\n  highlight: function(element, options) {\n    element = $(element);\n    new Effect.Highlight(element, options);\n    return element;\n  }\n};\n\n$w('fade appear grow shrink fold blindUp blindDown slideUp slideDown '+\n  'pulsate shake puff squish switchOff dropOut').each(\n  function(effect) {\n    Effect.Methods[effect] = function(element, options){\n      element = $(element);\n      Effect[effect.charAt(0).toUpperCase() + effect.substring(1)](element, options);\n      return element;\n    };\n  }\n);\n\n$w('getInlineOpacity forceRerendering setContentZoom collectTextNodes collectTextNodesIgnoreClass getStyles').each(\n  function(f) { Effect.Methods[f] = Element[f]; }\n);\n\nElement.addMethods(Effect.Methods);","// Copyright (c) 2005-2010 Thomas Fuchs (http://script.aculo.us, http://mir.aculo.us)\n//\n// script.aculo.us is freely distributable under the terms of an MIT-style license.\n// For details, see the script.aculo.us web site: http://script.aculo.us/\n\n\n///////////////////////////////////////////////////////////////////////\n//Jaspersoft/Tibco Updates (look for comment: JASPERSOFT #x)\n///////////////////////////////////////////////////////////////////////\n// #7 Jasper: escape XSS before outputting on the page\n///////////////////////////////////////////////////////////////////////\n\n(function (global, $) {\n    // #7 Jasper: escape XSS\n    function _escapeXSS(s) {\n        if (typeof $.escapeXSS === 'undefined')\n            throw new Error('$.escapeXSS must be defined in order to use this version of Scriptaculous.Builder.');\n        return $.escapeXSS(s);\n    }\n    // END #7 Jasper: escape XSS\n\n    var Builder = {\n        NODEMAP: {\n            AREA: 'map',\n            CAPTION: 'table',\n            COL: 'table',\n            COLGROUP: 'table',\n            LEGEND: 'fieldset',\n            OPTGROUP: 'select',\n            OPTION: 'select',\n            PARAM: 'object',\n            TBODY: 'table',\n            TD: 'table',\n            TFOOT: 'table',\n            TH: 'table',\n            THEAD: 'table',\n            TR: 'table'\n        },\n\n        // note: For Firefox < 1.5, OPTION and OPTGROUP tags are currently broken,\n        //       due to a Firefox bug\n        node: function(elementName) {\n            elementName = elementName.toUpperCase();\n\n            // try innerHTML approach\n            var parentTag = this.NODEMAP[elementName] || 'div';\n            var parentElement = document.createElement(parentTag);\n            try { // prevent IE \"feature\": http://dev.rubyonrails.org/ticket/2707\n                // #7 Jasper: escape XSS\n                parentElement.innerHTML = _escapeXSS(\"<\" + elementName + \"></\" + elementName + \">\");\n                // END #7 Jasper: escape XSS\n            } catch(e) {}\n            var element = parentElement.firstChild || null;\n\n            // see if browser added wrapping tags\n            if(element && (element.tagName.toUpperCase() != elementName))\n                element = element.getElementsByTagName(elementName)[0];\n\n            // fallback to createElement approach\n            if(!element) element = document.createElement(elementName);\n\n            // abort if nothing could be created\n            if(!element) return;\n\n            // attributes (or text)\n            if(arguments[1])\n                if(this._isStringOrNumber(arguments[1]) ||\n                    (arguments[1] instanceof Array) ||\n                    arguments[1].tagName) {\n                    this._children(element, arguments[1]);\n                } else {\n                    var attrs = this._attributes(arguments[1]);\n                    if(attrs.length) {\n                        try { // prevent IE \"feature\": http://dev.rubyonrails.org/ticket/2707\n                            // #7 Jasper: escape XSS\n                            parentElement.innerHTML = _escapeXSS(\"<\" +elementName + \" \" +\n                                attrs + \"></\" + elementName + \">\");\n                            // END #7 Jasper: escape XSS\n                        } catch(e) {}\n                        element = parentElement.firstChild || null;\n                        // workaround firefox 1.0.X bug\n                        if(!element) {\n                            element = document.createElement(elementName);\n                            for(attr in arguments[1])\n                                element[attr == 'class' ? 'className' : attr] = arguments[1][attr];\n                        }\n                        if(element.tagName.toUpperCase() != elementName)\n                            element = parentElement.getElementsByTagName(elementName)[0];\n                    }\n                }\n\n            // text, or array of children\n            if(arguments[2])\n                this._children(element, arguments[2]);\n\n            return $(element);\n        },\n        _text: function(text) {\n            return document.createTextNode(text);\n        },\n\n        ATTR_MAP: {\n            'className': 'class',\n            'htmlFor': 'for'\n        },\n\n        _attributes: function(attributes) {\n            var attrs = [];\n            for(attribute in attributes)\n                attrs.push((attribute in this.ATTR_MAP ? this.ATTR_MAP[attribute] : attribute) +\n                    '=\"' + attributes[attribute].toString().escapeHTML().gsub(/\"/,'&quot;') + '\"');\n            return attrs.join(\" \");\n        },\n        _children: function(element, children) {\n            if(children.tagName) {\n                element.appendChild(children);\n                return;\n            }\n            if(typeof children=='object') { // array can hold nodes and text\n                children.flatten().each( function(e) {\n                    if(typeof e=='object')\n                        element.appendChild(e);\n                    else\n                    if(Builder._isStringOrNumber(e))\n                        element.appendChild(Builder._text(e));\n                });\n            } else\n            if(Builder._isStringOrNumber(children))\n                element.appendChild(Builder._text(children));\n        },\n        _isStringOrNumber: function(param) {\n            return(typeof param=='string' || typeof param=='number');\n        },\n        build: function(html) {\n            var element = this.node('div');\n            $(element).update(html.strip());\n            return element.down();\n        },\n        dump: function(scope) {\n            if(typeof scope != 'object' && typeof scope != 'function') scope = window; //global scope\n\n            var tags = (\"A ABBR ACRONYM ADDRESS APPLET AREA B BASE BASEFONT BDO BIG BLOCKQUOTE BODY \" +\n                \"BR BUTTON CAPTION CENTER CITE CODE COL COLGROUP DD DEL DFN DIR DIV DL DT EM FIELDSET \" +\n                \"FONT FORM FRAME FRAMESET H1 H2 H3 H4 H5 H6 HEAD HR HTML I IFRAME IMG INPUT INS ISINDEX \"+\n                \"KBD LABEL LEGEND LI LINK MAP MENU META NOFRAMES NOSCRIPT OBJECT OL OPTGROUP OPTION P \"+\n                \"PARAM PRE Q S SAMP SCRIPT SELECT SMALL SPAN STRIKE STRONG STYLE SUB SUP TABLE TBODY TD \"+\n                \"TEXTAREA TFOOT TH THEAD TITLE TR TT U UL VAR\").split(/\\s+/);\n\n            tags.each( function(tag){\n                scope[tag] = function() {\n                    return Builder.node.apply(Builder, [tag].concat($A(arguments)));\n                };\n            });\n        }\n    };\n\n    global.Builder = Builder;\n})(this, $);","// script.aculo.us dragdrop.js v1.9.0, Thu Dec 23 16:54:48 -0500 2010\n\n// Copyright (c) 2005-2010 Thomas Fuchs (http://script.aculo.us, http://mir.aculo.us)\n//\n// script.aculo.us is freely distributable under the terms of an MIT-style license.\n// For details, see the script.aculo.us web site: http://script.aculo.us/\n\n\n///////////////////////////////////////////////////////////////////////\n//Jaspersoft Updates (look for comment: JASPERSOFT #x)\n///////////////////////////////////////////////////////////////////////\n// #1 3/27/10 Fire \"drag:mousedown\" after Event.stop() in initDrag\n// #2 9/22/10 Fixed bug with drag for % positioned elements\n// #3 9/23/10 By default do not fade on drag\n// #4 10/31/10 Allow drag tolerance\n// #5 05/05/11 Allow custom hovering and onDrop event handling for Sortables\n// #6 04/03/12 Allow drag observer remove by ID when DOM element was obsolete\n// #7 11/26/20 JS-60321: Added ability to override SortableObserver\n///////////////////////////////////////////////////////////////////////\n\nif(Object.isUndefined(Effect))\n    throw(\"dragdrop.js requires including script.aculo.us' effects.js library\");\n\nvar Droppables = {\n    drops: [],\n\n    remove: function(element) {\n        this.drops = this.drops.reject(function(d) { return d.element==$(element) });\n    },\n\n    add: function(element) {\n        element = $(element);\n        var options = Object.extend({\n            greedy:     true,\n            hoverclass: null,\n            tree:       false\n        }, arguments[1] || { });\n\n        // cache containers\n        if(options.containment) {\n            options._containers = [];\n            var containment = options.containment;\n            if(Object.isArray(containment)) {\n                containment.each( function(c) { options._containers.push($(c)) });\n            } else {\n                options._containers.push($(containment));\n            }\n        }\n\n        if(options.accept) options.accept = [options.accept].flatten();\n\n        Element.makePositioned(element); // fix IE\n        options.element = element;\n\n        this.drops.push(options);\n    },\n\n    findDeepestChild: function(drops) {\n        deepest = drops[0];\n\n        for (i = 1; i < drops.length; ++i)\n            if (Element.isParent(drops[i].element, deepest.element))\n                deepest = drops[i];\n\n        return deepest;\n    },\n\n    isContained: function(element, drop) {\n        var containmentNode;\n        if(drop.tree) {\n            containmentNode = element.treeNode;\n        } else {\n            containmentNode = element.parentNode;\n        }\n        return drop._containers.detect(function(c) { return containmentNode == c });\n    },\n\n    isAffected: function(point, element, drop) {\n        return (\n            (drop.element!=element) &&\n                ((!drop._containers) ||\n                    this.isContained(element, drop)) &&\n                ((!drop.accept) ||\n                    (Element.classNames(element).detect(\n                        function(v) { return drop.accept.include(v) } ) )) &&\n                Position.within(drop.element, point[0], point[1]) );\n    },\n\n    deactivate: function(drop) {\n        if(drop.hoverclass)\n            Element.removeClassName(drop.element, drop.hoverclass);\n        this.last_active = null;\n    },\n\n    activate: function(drop) {\n        if(drop.hoverclass)\n            Element.addClassName(drop.element, drop.hoverclass);\n        this.last_active = drop;\n    },\n\n    show: function(point, element) {\n        if(!this.drops.length) return;\n        var drop, affected = [];\n\n        this.drops.each( function(drop) {\n            if(Droppables.isAffected(point, element, drop))\n                affected.push(drop);\n        });\n\n        if(affected.length>0)\n            drop = Droppables.findDeepestChild(affected);\n\n        if(this.last_active && this.last_active != drop) this.deactivate(this.last_active);\n        if (drop) {\n            Position.within(drop.element, point[0], point[1]);\n            if(drop.onHover)\n                drop.onHover(element, drop.element, Position.overlap(drop.overlap, drop.element));\n\n            if (drop != this.last_active) Droppables.activate(drop);\n        }\n    },\n\n    fire: function(event, element) {\n        if(!this.last_active) return;\n        var pointer;\n        Position.prepare();\n\n        if(Draggables.supportsTouch) {\n            pointer = Draggables._lastPointer;\n        } else {\n            pointer = [Event.pointerX(event), Event.pointerY(event)];\n        }\n        if (this.isAffected(pointer, element, this.last_active))\n            if (this.last_active.onDrop) {\n                this.last_active.onDrop(element, this.last_active.element, event);\n                return true;\n            }\n    },\n\n    reset: function() {\n        this.last_active && this.deactivate(this.last_active);\n    }\n};\n\nvar Draggables = {\n    //JASPERSOFT #4 - see comment block top of page for more info\n    DEFAULT_TOLERANCE: Prototype.BrowserFeatures.SupportsTouch ? 2 : 1,\n    //END JASPERSOFT #4\n    drags: [],\n    observers: [],\n    supportsTouch: Prototype.BrowserFeatures.SupportsTouch,\n\n    register: function(draggable) {\n        if(this.drags.length == 0) {\n\n            this.eventMouseUp   = this.endDrag.bindAsEventListener(this);\n            this.eventMouseMove = this.updateDrag.bindAsEventListener(this);\n            this.eventKeypress  = this.keyPress.bindAsEventListener(this);\n\n            if (Draggables.supportsTouch) {\n                Event.observe(document, \"touchend\", this.eventMouseUp);\n                Event.observe(document, \"touchmove\", this.eventMouseMove);\n            } else {\n                Event.observe(document, \"mouseup\", this.eventMouseUp);\n                //Event.observe(document, \"mousemove\", this.eventMouseMove);\n            }\n            Event.observe(document, \"keypress\", this.eventKeypress);\n        }\n        this.drags.push(draggable);\n    },\n\n    unregister: function(draggable) {\n        this.drags = this.drags.reject(function(d) { return d==draggable });\n        if(this.drags.length == 0) {\n            if(Draggables.supportsTouch) {\n                Event.stopObserving(document, \"touchend\", this.eventMouseUp);\n                Event.stopObserving(document, \"touchmove\", this.eventMouseMove);\n            } else {\n                Event.stopObserving(document, \"mouseup\", this.eventMouseUp);\n                //Event.stopObserving(document, \"mousemove\", this.eventMouseMove);\n            }\n            Event.stopObserving(document, \"keypress\", this.eventKeypress);\n        }\n    },\n\n    activate: function(draggable) {\n        if(!Draggables.supportsTouch) {\n            Event.observe(document, \"mousemove\", this.eventMouseMove);\n        }\n        if(draggable.options.delay) {\n            this._timeout = setTimeout(function() {\n                Draggables._timeout = null;\n                window.focus();\n                Draggables.activeDraggable = draggable;\n            }.bind(this), draggable.options.delay);\n        } else {\n            window.focus(); // allows keypress events if window isn't currently focused, fails for Safari\n            this.activeDraggable = draggable;\n        }\n    },\n\n    deactivate: function() {\n        if(!Draggables.supportsTouch) {\n            Event.stopObserving(document, \"mousemove\", this.eventMouseMove);\n        }\n        this.activeDraggable = null;\n    },\n\n    updateDrag: function(event) {\n        if(!this.activeDraggable) return;\n        var pointer = [Event.pointerX(event), Event.pointerY(event)];\n        // Mozilla-based browsers fire successive mousemove events with\n        // the same coordinates, prevent needless redrawing (moz bug?)\n        if (this.pointerInRadius(pointer)) return;\n        this._lastPointer = pointer;\n        this.activeDraggable.updateDrag(event, pointer);\n    },\n\n    pointerInRadius: function(pointer, radius) {\n        radius = radius || 2;\n        return this._lastPointer && Math.abs(this._lastPointer[0] - pointer[0]) <= radius && Math.abs(this._lastPointer[1] - pointer[1]) <= radius;\n    },\n\n    endDrag: function(event) {\n        if(this._timeout) {\n            clearTimeout(this._timeout);\n            this._timeout = null;\n        }\n        if(!this.activeDraggable) return;\n        if(!Draggables.supportsTouch) {\n            this._lastPointer = null;\n        }\n        this.activeDraggable.endDrag(event);\n        this.activeDraggable = null;\n    },\n\n    keyPress: function(event) {\n        if(this.activeDraggable)\n            this.activeDraggable.keyPress(event);\n    },\n\n    addObserver: function(observer) {\n        this.observers.push(observer);\n        this._cacheObserverCallbacks();\n    },\n\n    removeObserver: function(element) {  // element instead of observer fixes mem leaks\n        this.observers = this.observers.reject( function(o) {\n            return o.element==element ||\n                //JASPERSOFT #6 - see comment block top of page for more info\n                (o.element && element && o.element.id == element.id);\n            //END JASPERSOFT #6\n        });\n        this._cacheObserverCallbacks();\n    },\n\n    notify: function(eventName, draggable, event) {  // 'onStart', 'onEnd', 'onDrag'\n        if(this[eventName+'Count'] > 0)\n            this.observers.each( function(o) {\n                if(o[eventName]) o[eventName](eventName, draggable, event);\n            });\n        if(draggable.options[eventName]) draggable.options[eventName](draggable, event);\n    },\n\n    _cacheObserverCallbacks: function() {\n        ['onStart','onEnd','onDrag'].each( function(eventName) {\n            Draggables[eventName+'Count'] = Draggables.observers.select(\n                function(o) { return o[eventName]; }\n            ).length;\n        });\n    }\n};\n\n/*--------------------------------------------------------------------------*/\n\nvar Draggable = Class.create({\n    initialize: function(element) {\n        var defaults = {\n            handle: false,\n            reverteffect: function(element, top_offset, left_offset) {\n                var dur = Math.sqrt(Math.abs(top_offset^2)+Math.abs(left_offset^2))*0.02;\n                new Effect.Move(element, { x: -left_offset, y: -top_offset, duration: dur,\n                    queue: {scope:'_draggable', position:'end'}\n                });\n            },\n            endeffect: function(element) {\n                //JASPERSOFT #3 - see comment block top of page for more info\n//        var toOpacity = Object.isNumber(element._opacity) ? element._opacity : 1.0;\n//        new Effect.Opacity(element, {duration:0.2, from:0.7, to:toOpacity,\n//          queue: {scope:'_draggable', position:'end'},\n//          afterFinish: function(){\n//            Draggable._dragging[element] = false\n//          }\n//        });\n                //END JASPERSOFT #3\n                Draggable._dragging[element] = false;\n            },\n            zindex: 1000,\n            revert: false,\n            quiet: false,\n            scroll: false,\n            scrollSensitivity: 20,\n            scrollSpeed: 15,\n            snap: false,  // false, or xy or [x,y] or function(x,y){ return [x,y] }\n            delay: 0\n        };\n\n        if(!arguments[1] || Object.isUndefined(arguments[1].endeffect))\n            Object.extend(defaults, {\n                starteffect: function(element) {\n                    element._opacity = Element.getOpacity(element);\n                    Draggable._dragging[element] = true;\n                    //JASPERSOFT #3 - see comment block top of page for more info\n                    //new Effect.Opacity(element, {duration:0.2, from:element._opacity, to:0.7});\n                    //END JASPERSOFT #3\n                }\n            });\n\n        var options = Object.extend(defaults, arguments[1] || { });\n\n        this.element = $(element);\n\n        if(options.handle && Object.isString(options.handle))\n            this.handle = this.element.down('.'+options.handle, 0);\n\n        if(!this.handle) this.handle = $(options.handle);\n        if(!this.handle) this.handle = this.element;\n\n        if(options.scroll && !options.scroll.scrollTo && !options.scroll.outerHTML) {\n            options.scroll = $(options.scroll);\n            this._isScrollChild = Element.childOf(this.element, options.scroll);\n        }\n\n        Element.makePositioned(this.element); // fix IE\n\n        this.options  = options;\n        this.dragging = false;\n\n        this.eventMouseDown = this.initDrag.bindAsEventListener(this);\n        if(Draggables.supportsTouch) {\n            Event.observe(this.handle, \"touchstart\", this.eventMouseDown);\n        } else {\n            Event.observe(this.handle, \"mousedown\", this.eventMouseDown);\n        }\n\n        Draggables.register(this);\n    },\n\n    destroy: function() {\n        if(Draggables.supportsTouch) {\n            Event.stopObserving(this.handle, \"touchstart\", this.eventMouseDown);\n        } else {\n            Event.stopObserving(this.handle, \"mousedown\", this.eventMouseDown);\n        }\n        Draggables.unregister(this);\n    },\n\n    currentDelta: function() {\n\n        //JASPERSOFT #2 - see comment block top of page for more info\n        var leftStyle = Element.getStyle(this.element,'left') || \"\";\n        var topStyle = Element.getStyle(this.element,'top') || \"\";\n        if (leftStyle.include('%')) {\n            leftStyle = (this.element.parentNode.getWidth() * parseInt(leftStyle))/100;\n        }\n        if (topStyle.include('%')) {\n            topStyle = (this.element.parentNode.getHeight() * parseInt(topStyle))/100;\n        }\n        return([\n            parseInt(leftStyle) || '0',\n            parseInt(topStyle) || '0']);\n        //END JASPERSOFT #2\n\n//    return([\n//      parseInt(Element.getStyle(this.element,'left') || '0'),\n//      parseInt(Element.getStyle(this.element,'top') || '0')]);\n    },\n\n    initDrag: function(event) {\n        if(!Object.isUndefined(Draggable._dragging[this.element]) &&\n            Draggable._dragging[this.element]) return;\n        if(Event.isLeftClick(event) || (Draggables.supportsTouch && event.touches && event.touches.length == 1)) {\n            // abort on form elements, fixes a Firefox issue\n            var src = Event.element(event);\n            if((tag_name = src.tagName.toUpperCase()) && (\n                tag_name=='INPUT' ||\n                    tag_name=='SELECT' ||\n                    tag_name=='OPTION' ||\n                    tag_name=='BUTTON' ||\n                    tag_name=='TEXTAREA')) return;\n\n            var pointer = [Event.pointerX(event), Event.pointerY(event)];\n            var pos     = this.element.cumulativeOffset();\n            this.offset = [0,1].map( function(i) { return (pointer[i] - pos[i]) });\n\n            Draggables.activate(this);\n            //JASPERSOFT #4 - see comment block top of page for more info\n            this.countdown = Draggables.DEFAULT_TOLERANCE; //in future can also read custom value from draggable\n            //END JASPERSOFT #4\n            Event.stop(event);\n            //JASPERSOFT #1 - see comment block top of page for more info\n            !Draggables.supportsTouch\n                ? this.handle.fire('drag:mousedown', {targetEvent: event})\n                : this.handle.fire('drag:' + event.type, {targetEvent: event});\n            //END JASPERSOFT #1\n        }\n    },\n\n    startDrag: function(event) {\n        this.dragging = true;\n        if(!this.delta)\n            this.delta = this.currentDelta();\n\n        if(this.options.zindex) {\n            this.originalZ = parseInt(Element.getStyle(this.element,'z-index') || 0);\n            this.element.style.zIndex = this.options.zindex;\n        }\n        if(this.options.ghosting) {\n            this._clone = this.element.cloneNode(true);\n            this._originallyAbsolute = (this.element.getStyle('position') == 'absolute');\n            if (!this._originallyAbsolute) {\n                Position.absolutize(this.element);\n            }\n            this.element.parentNode.insertBefore(this._clone, this.element);\n            if (this.element.parentNode.tagName===\"TR\") {\n                document.body.appendChild(this.element);\n            }\n        }\n\n        if(this.options.scroll) {\n            if (this.options.scroll == window) {\n                var where = this._getWindowScroll(this.options.scroll);\n                this.originalScrollLeft = where.left;\n                this.originalScrollTop = where.top;\n            } else {\n                this.originalScrollLeft = this.options.scroll.scrollLeft;\n                this.originalScrollTop = this.options.scroll.scrollTop;\n            }\n        }\n\n        Draggables.notify('onStart', this, event);\n\n        if(this.options.starteffect) this.options.starteffect(this.element);\n    },\n\n    updateDrag: function(event, pointer) {\n        if (!this.dragging) {\n            //JASPERSOFT #4 - see comment block top of page for more info\n            if (Draggables.supportsTouch) {\n                if (!isIE7() && this.countdown && this.countdown--) {\n                    return;\n                } else {\n                    this.startDrag(event);\n                }\n            } else {\n                if (this.countdown && this.countdown--) {\n                    return;\n                } else {\n                    this.startDrag(event);\n                }\n            }\n            //if(!this.dragging) this.startDrag(event);\n            //END JASPERSOFT #4\n        }\n\n        if(Draggables.supportsTouch && event.touches.length > 1) {\n            this.endDrag(event);\n        }\n\n        if(!this.options.quiet){\n            Position.prepare();\n            Droppables.show(pointer, this.element);\n        }\n\n        Draggables.notify('onDrag', this, event);\n\n        this.draw(pointer);\n        if(this.options.change) this.options.change(this);\n\n        if(this.options.scroll) {\n            this.stopScrolling();\n\n            var p;\n            if (this.options.scroll == window) {\n                with(this._getWindowScroll(this.options.scroll)) { p = [ left, top, left+width, top+height ]; }\n            } else {\n                p = Position.page(this.options.scroll).toArray();\n                p[0] += this.options.scroll.scrollLeft + Position.deltaX;\n                p[1] += this.options.scroll.scrollTop + Position.deltaY;\n                p.push(p[0]+this.options.scroll.offsetWidth);\n                p.push(p[1]+this.options.scroll.offsetHeight);\n            }\n            var speed = [0,0];\n            if(pointer[0] < (p[0]+this.options.scrollSensitivity)) speed[0] = pointer[0]-(p[0]+this.options.scrollSensitivity);\n            if(pointer[1] < (p[1]+this.options.scrollSensitivity)) speed[1] = pointer[1]-(p[1]+this.options.scrollSensitivity);\n            if(pointer[0] > (p[2]-this.options.scrollSensitivity)) speed[0] = pointer[0]-(p[2]-this.options.scrollSensitivity);\n            if(pointer[1] > (p[3]-this.options.scrollSensitivity)) speed[1] = pointer[1]-(p[3]-this.options.scrollSensitivity);\n            this.startScrolling(speed);\n        }\n\n        // fix AppleWebKit rendering\n        if(Prototype.Browser.WebKit) window.scrollBy(0,0);\n\n        Event.stop(event);\n    },\n\n    finishDrag: function(event, success) {\n        this.dragging = false;\n\n        if(this.options.quiet){\n            Position.prepare();\n            var pointer = [Event.pointerX(event), Event.pointerY(event)];\n            Droppables.show(pointer, this.element);\n        }\n\n        if(this.options.ghosting) {\n            if (!this._originallyAbsolute) {\n                Position.relativize(this.element);\n                if (this._clone.parentNode.tagName === \"TR\") {\n                    this._clone.parentNode.insertBefore(this.element, this._clone);\n                }\n            }\n            delete this._originallyAbsolute;\n            Element.remove(this._clone);\n            this._clone = null;\n        }\n\n        var dropped = false;\n        if(success) {\n            dropped = Droppables.fire(event, this.element);\n            if (!dropped) {\n                dropped = false;\n            } else if (Draggables.supportsTouch) {\n                Draggables._lastPointer = null;\n            }\n        }\n        if(dropped && this.options.onDropped) this.options.onDropped(this.element);\n        Draggables.notify('onEnd', this, event);\n\n        var revert = this.options.revert;\n        if(revert && Object.isFunction(revert)) revert = revert(this.element);\n\n        var d = this.currentDelta();\n        if(revert && this.options.reverteffect) {\n            if (dropped == 0 || revert != 'failure')\n                this.options.reverteffect(this.element,\n                    d[1]-this.delta[1], d[0]-this.delta[0]);\n        } else {\n            this.delta = d;\n        }\n\n        if(this.options.zindex)\n            this.element.style.zIndex = this.originalZ;\n\n        if(this.options.endeffect)\n            this.options.endeffect(this.element);\n\n        Draggables.deactivate(this);\n        Droppables.reset();\n    },\n\n    keyPress: function(event) {\n        if(event.keyCode!=Event.KEY_ESC) return;\n        this.finishDrag(event, false);\n        Event.stop(event);\n    },\n\n    endDrag: function(event) {\n        if(!this.dragging) return;\n        this.stopScrolling();\n        this.finishDrag(event, true);\n        Event.stop(event);\n    },\n\n    draw: function(point) {\n        var pos = this.element.cumulativeOffset();\n        if(this.options.ghosting) {\n            var r   = Position.realOffset(this.element);\n            pos[0] += r[0] - Position.deltaX; pos[1] += r[1] - Position.deltaY;\n        }\n\n        var d = this.currentDelta();\n        pos[0] -= d[0]; pos[1] -= d[1];\n\n        if(this.options.scroll && (this.options.scroll != window && this._isScrollChild)) {\n            pos[0] -= this.options.scroll.scrollLeft-this.originalScrollLeft;\n            pos[1] -= this.options.scroll.scrollTop-this.originalScrollTop;\n        }\n\n        var p = [0,1].map(function(i){\n            return (point[i]-pos[i]-this.offset[i])\n        }.bind(this));\n\n        if(this.options.snap) {\n            if(Object.isFunction(this.options.snap)) {\n                p = this.options.snap(p[0],p[1],this);\n            } else {\n                if(Object.isArray(this.options.snap)) {\n                    p = p.map( function(v, i) {\n                        return (v/this.options.snap[i]).round()*this.options.snap[i] }.bind(this));\n                } else {\n                    p = p.map( function(v) {\n                        return (v/this.options.snap).round()*this.options.snap }.bind(this));\n                }\n            }}\n\n        var style = this.element.style;\n        if((!this.options.constraint) || (this.options.constraint=='horizontal'))\n            style.left = p[0] + \"px\";\n        if((!this.options.constraint) || (this.options.constraint=='vertical'))\n            style.top  = p[1] + \"px\";\n\n        if(style.visibility==\"hidden\") style.visibility = \"\"; // fix gecko rendering\n    },\n\n    stopScrolling: function() {\n        if(this.scrollInterval) {\n            clearInterval(this.scrollInterval);\n            this.scrollInterval = null;\n            Draggables._lastScrollPointer = null;\n        }\n    },\n\n    startScrolling: function(speed) {\n        if(!(speed[0] || speed[1])) return;\n        this.scrollSpeed = [speed[0]*this.options.scrollSpeed,speed[1]*this.options.scrollSpeed];\n        this.lastScrolled = new Date();\n        this.scrollInterval = setInterval(this.scroll.bind(this), 10);\n    },\n\n    scroll: function() {\n        var current = new Date();\n        var delta = current - this.lastScrolled;\n        this.lastScrolled = current;\n        if(this.options.scroll == window) {\n            with (this._getWindowScroll(this.options.scroll)) {\n                if (this.scrollSpeed[0] || this.scrollSpeed[1]) {\n                    var d = delta / 1000;\n                    this.options.scroll.scrollTo( left + d*this.scrollSpeed[0], top + d*this.scrollSpeed[1] );\n                }\n            }\n        } else {\n            this.options.scroll.scrollLeft += this.scrollSpeed[0] * delta / 1000;\n            this.options.scroll.scrollTop  += this.scrollSpeed[1] * delta / 1000;\n        }\n\n        Position.prepare();\n        Droppables.show(Draggables._lastPointer, this.element);\n        Draggables.notify('onDrag', this);\n        if (this._isScrollChild) {\n            Draggables._lastScrollPointer = Draggables._lastScrollPointer || $A(Draggables._lastPointer);\n            Draggables._lastScrollPointer[0] += this.scrollSpeed[0] * delta / 1000;\n            Draggables._lastScrollPointer[1] += this.scrollSpeed[1] * delta / 1000;\n            if (Draggables._lastScrollPointer[0] < 0)\n                Draggables._lastScrollPointer[0] = 0;\n            if (Draggables._lastScrollPointer[1] < 0)\n                Draggables._lastScrollPointer[1] = 0;\n            this.draw(Draggables._lastScrollPointer);\n        }\n\n        if(this.options.change) this.options.change(this);\n    },\n\n    _getWindowScroll: function(w) {\n        var T, L, W, H;\n        with (w.document) {\n            if (w.document.documentElement && documentElement.scrollTop) {\n                T = documentElement.scrollTop;\n                L = documentElement.scrollLeft;\n            } else if (w.document.body) {\n                T = body.scrollTop;\n                L = body.scrollLeft;\n            }\n            if (w.innerWidth) {\n                W = w.innerWidth;\n                H = w.innerHeight;\n            } else if (w.document.documentElement && documentElement.clientWidth) {\n                W = documentElement.clientWidth;\n                H = documentElement.clientHeight;\n            } else {\n                W = body.offsetWidth;\n                H = body.offsetHeight;\n            }\n        }\n        return { top: T, left: L, width: W, height: H };\n    }\n});\n\nDraggable._dragging = { };\n\n/*--------------------------------------------------------------------------*/\n\nvar SortableObserver = Class.create({\n    initialize: function(element, observer) {\n        this.element   = $(element);\n        this.observer  = observer;\n        this.lastValue = Sortable.serialize(this.element);\n    },\n\n    onStart: function() {\n        this.lastValue = Sortable.serialize(this.element);\n    },\n\n    onEnd: function() {\n        Sortable.unmark();\n        if(this.lastValue != Sortable.serialize(this.element))\n            this.observer(this.element)\n    }\n});\n\nvar Sortable = {\n    SERIALIZE_RULE: /^[^_\\-](?:[A-Za-z0-9\\-\\_]*)[_](.*)$/,\n\n    sortables: { },\n\n    _findRootElement: function(element) {\n        while (element.tagName.toUpperCase() != \"BODY\") {\n            if(element.id && Sortable.sortables[element.id]) return element;\n            element = element.parentNode;\n        }\n    },\n\n    options: function(element) {\n        element = Sortable._findRootElement($(element));\n        if(!element) return;\n        return Sortable.sortables[element.id];\n    },\n\n    destroy: function(element){\n        element = $(element);\n        var s = Sortable.sortables[element.id];\n\n        if(s) {\n            Draggables.removeObserver(s.element);\n            s.droppables.each(function(d){ Droppables.remove(d) });\n            s.draggables.invoke('destroy');\n\n            delete Sortable.sortables[s.element.id];\n        }\n    },\n\n    //JASPERSOFT #7 - see comment block top of page for more info\n    getSortableObserverConstructor: function () {\n        return SortableObserver;\n    },\n    //END JASPERSOFT #7\n\n    create: function(element) {\n        element = $(element);\n        var options = Object.extend({\n            element:     element,\n            tag:         'li',       // assumes li children, override with tag: 'tagname'\n            dropOnEmpty: false,\n            accept:      [],\n            tree:        false,\n            treeTag:     'ul',\n            overlap:     'vertical', // one of 'vertical', 'horizontal'\n            constraint:  'vertical', // one of 'vertical', 'horizontal', false\n            containment: element,    // also takes array of elements (or id's); or false\n            handle:      false,      // or a CSS class\n            only:        false,\n            delay:       0,\n            hoverclass:  null,\n            ghosting:    false,\n            quiet:       false,\n            scroll:      false,\n            scrollSensitivity: 20,\n            scrollSpeed: 15,\n            format:      this.SERIALIZE_RULE,\n\n            // these take arrays of elements or ids and can be\n            // used for better initialization performance\n            elements:    false,\n            handles:     false,\n\n            //JASPERSOFT #5 - see comment block top of page for more info\n            onDrop:      Prototype.emptyFunction,\n            onHover:     Sortable.onHover,\n            //END JASPERSOFT #5\n            onChange:    Prototype.emptyFunction,\n            onUpdate:    Prototype.emptyFunction\n        }, arguments[1] || { });\n\n        // clear any old sortable with same element\n        this.destroy(element);\n\n        // build options for the draggables\n        var options_for_draggable = {\n            revert:      true,\n            quiet:       options.quiet,\n            scroll:      options.scroll,\n            scrollSpeed: options.scrollSpeed,\n            scrollSensitivity: options.scrollSensitivity,\n            delay:       options.delay,\n            ghosting:    options.ghosting,\n            constraint:  options.constraint,\n            onStart:     options.onStart,\n            handle:      options.handle };\n\n        if(options.starteffect)\n            options_for_draggable.starteffect = options.starteffect;\n\n        if(options.reverteffect)\n            options_for_draggable.reverteffect = options.reverteffect;\n        else\n        if(options.ghosting) options_for_draggable.reverteffect = function(element) {\n            element.style.top  = 0;\n            element.style.left = 0;\n        };\n\n        if(options.endeffect)\n            options_for_draggable.endeffect = options.endeffect;\n\n        if(options.zindex)\n            options_for_draggable.zindex = options.zindex;\n\n        // build options for the droppables\n        var options_for_droppable = {\n            overlap:     options.overlap,\n            containment: options.containment,\n            tree:        options.tree,\n            hoverclass:  options.hoverclass,\n            //JASPERSOFT #5 - see comment block top of page for more info\n            onHover:     options.onHover,\n            onDrop:      options.onDrop\n            //END JASPERSOFT #5\n        };\n\n        var options_for_tree = {\n            onHover:      options.onEmptyHover || Sortable.onEmptyHover,\n            overlap:      options.overlap,\n            containment:  options.containment,\n            hoverclass:   options.hoverclass,\n            accept:       options.accept,\n            //JASPERSOFT #5 - see comment block top of page for more info\n            onDrop: options.onDrop\n            //END JASPERSOFT #5\n        };\n\n        // fix for gecko engine\n        Element.cleanWhitespace(element);\n\n        options.draggables = [];\n        options.droppables = [];\n\n        // drop on empty handling\n        if(options.dropOnEmpty || options.tree) {\n            Droppables.add(element, options_for_tree);\n            options.droppables.push(element);\n        }\n\n        (options.elements || this.findElements(element, options) || []).each( function(e,i) {\n            var handle = options.handles ? $(options.handles[i]) :\n                (options.handle ? $(e).select('.' + options.handle)[0] : e);\n            options.draggables.push(\n                new Draggable(e, Object.extend(options_for_draggable, { handle: handle })));\n            Droppables.add(e, options_for_droppable);\n            if(options.tree) e.treeNode = element;\n            options.droppables.push(e);\n        });\n\n        if(options.tree) {\n            (Sortable.findTreeElements(element, options) || []).each( function(e) {\n                Droppables.add(e, options_for_tree);\n                e.treeNode = element;\n                options.droppables.push(e);\n            });\n        }\n\n        // keep reference\n        this.sortables[element.identify()] = options;\n\n        // for onupdate\n        //JASPERSOFT #7 - see comment block top of page for more info\n        var SortableObserver = Sortable.getSortableObserverConstructor();\n        //END JASPERSOFT #7\n        Draggables.addObserver(new SortableObserver(element, options.onUpdate));\n\n    },\n\n    // return all suitable-for-sortable elements in a guaranteed order\n    findElements: function(element, options) {\n        return Element.findChildren(\n            element, options.only, options.tree ? true : false, options.tag);\n    },\n\n    findTreeElements: function(element, options) {\n        return Element.findChildren(\n            element, options.only, options.tree ? true : false, options.treeTag);\n    },\n\n    onHover: function(element, dropon, overlap) {\n        var oldParentNode = null, sortable = null;\n        if(Element.isParent(dropon, element)) return;\n\n        if(overlap > .33 && overlap < .66 && Sortable.options(dropon).tree) {\n            return;\n        } else if(overlap>0.5) {\n            Sortable.mark(dropon, 'before');\n            if(dropon.previousSibling != element) {\n                oldParentNode = element.parentNode;\n                element.style.visibility = \"hidden\"; // fix gecko rendering\n                dropon.parentNode.insertBefore(element, dropon);\n                if(dropon.parentNode!=oldParentNode) {\n                    sortable = Sortable.options(oldParentNode);\n                    sortable && sortable.onChange(element);\n                }\n                Sortable.options(dropon.parentNode).onChange(element);\n            }\n        } else {\n            Sortable.mark(dropon, 'after');\n            var nextElement = dropon.nextSibling || null;\n            if(nextElement != element) {\n                oldParentNode = element.parentNode;\n                element.style.visibility = \"hidden\"; // fix gecko rendering\n                dropon.parentNode.insertBefore(element, nextElement);\n                if(dropon.parentNode!=oldParentNode) {\n                    sortable = Sortable.options(oldParentNode);\n                    sortable && sortable.onChange(element);\n                }\n                Sortable.options(dropon.parentNode).onChange(element);\n            }\n        }\n    },\n\n    onEmptyHover: function(element, dropon, overlap) {\n        var oldParentNode = element.parentNode;\n        var droponOptions = Sortable.options(dropon);\n\n        if (!Element.isParent(dropon, element)) {\n            var index;\n\n            var children = Sortable.findElements(dropon, {tag:droponOptions.tag, only:droponOptions.only});\n            var child = null;\n\n            if (children) {\n                var offsetSize = null, childOffset;\n                var offset = Element.offsetSize(dropon, droponOptions.overlap) * (1.0 - overlap);\n\n                for (index = 0; index < children.length; index += 1) {\n                    offsetSize = Element.offsetSize(children[index], droponOptions.overlap);\n                    childOffset = children[index].cumulativeOffset().top; // TODO: optimize not to use cumulativeOffset() method\n                    // Skipping all items that not in our row\n                    if (!(Position.ycomp >= childOffset &&\n                        Position.ycomp < childOffset + children[index].offsetHeight)) {\n                        continue;\n                    }\n                    if (offset - offsetSize >= 0) {\n                        offset -= offsetSize;\n                    } else if (offset - (offsetSize / 2) >= 0) {\n                        child = index + 1 < children.length ? children[index + 1] : null;\n                        break;\n                    } else {\n                        child = children[index];\n                        break;\n                    }\n                }\n            }\n\n            dropon.insertBefore(element, child);\n\n            //JASPERSOFT #5 - see comment block top of page for more info\n            var sourceSortable = Sortable.options(oldParentNode);\n            sourceSortable && sourceSortable.onChange(element);\n            //END JASPERSOFT #5\n\n            droponOptions.onChange(element);\n        }\n    },\n\n    unmark: function() {\n        if(Sortable._marker) Sortable._marker.hide();\n    },\n\n    mark: function(dropon, position) {\n        // mark on ghosting only\n        var sortable = Sortable.options(dropon.parentNode);\n        if(sortable && !sortable.ghosting) return;\n\n        if(!Sortable._marker) {\n            Sortable._marker =\n                ($('dropmarker') || Element.extend(document.createElement('DIV'))).\n                    hide().addClassName('dropmarker').setStyle({position:'absolute'});\n            document.getElementsByTagName(\"body\").item(0).appendChild(Sortable._marker);\n        }\n        var offsets = dropon.cumulativeOffset();\n        Sortable._marker.setStyle({left: offsets[0]+'px', top: offsets[1] + 'px'});\n\n        if(position=='after')\n            if(sortable.overlap == 'horizontal')\n                Sortable._marker.setStyle({left: (offsets[0]+dropon.clientWidth) + 'px'});\n            else\n                Sortable._marker.setStyle({top: (offsets[1]+dropon.clientHeight) + 'px'});\n\n        Sortable._marker.show();\n    },\n\n    _tree: function(element, options, parent) {\n        var children = Sortable.findElements(element, options) || [];\n\n        for (var i = 0; i < children.length; ++i) {\n            var match = children[i].id.match(options.format);\n\n            if (!match) continue;\n\n            var child = {\n                id: encodeURIComponent(match ? match[1] : null),\n                element: element,\n                parent: parent,\n                children: [],\n                position: parent.children.length,\n                container: $(children[i]).down(options.treeTag)\n            };\n\n            /* Get the element containing the children and recurse over it */\n            if (child.container)\n                this._tree(child.container, options, child);\n\n            parent.children.push (child);\n        }\n\n        return parent;\n    },\n\n    tree: function(element) {\n        element = $(element);\n        var sortableOptions = this.options(element);\n        var options = Object.extend({\n            tag: sortableOptions.tag,\n            treeTag: sortableOptions.treeTag,\n            only: sortableOptions.only,\n            name: element.id,\n            format: sortableOptions.format\n        }, arguments[1] || { });\n\n        var root = {\n            id: null,\n            parent: null,\n            children: [],\n            container: element,\n            position: 0\n        };\n\n        return Sortable._tree(element, options, root);\n    },\n\n    /* Construct a [i] index for a particular node */\n    _constructIndex: function(node) {\n        var index = '';\n        do {\n            if (node.id) index = '[' + node.position + ']' + index;\n        } while ((node = node.parent) != null);\n        return index;\n    },\n\n    sequence: function(element) {\n        element = $(element);\n        var options = Object.extend(this.options(element), arguments[1] || { });\n\n        return $(this.findElements(element, options) || []).map( function(item) {\n            return item.id.match(options.format) ? item.id.match(options.format)[1] : '';\n        });\n    },\n\n    setSequence: function(element, new_sequence) {\n        element = $(element);\n        var options = Object.extend(this.options(element), arguments[2] || { });\n\n        var nodeMap = { };\n        this.findElements(element, options).each( function(n) {\n            if (n.id.match(options.format))\n                nodeMap[n.id.match(options.format)[1]] = [n, n.parentNode];\n            n.parentNode.removeChild(n);\n        });\n\n        new_sequence.each(function(ident) {\n            var n = nodeMap[ident];\n            if (n) {\n                n[1].appendChild(n[0]);\n                delete nodeMap[ident];\n            }\n        });\n    },\n\n    serialize: function(element) {\n        element = $(element);\n        var options = Object.extend(Sortable.options(element), arguments[1] || { });\n        var name = encodeURIComponent(\n            (arguments[1] && arguments[1].name) ? arguments[1].name : element.id);\n\n        if (options.tree) {\n            return Sortable.tree(element, arguments[1]).children.map( function (item) {\n                return [name + Sortable._constructIndex(item) + \"[id]=\" +\n                    encodeURIComponent(item.id)].concat(item.children.map(arguments.callee));\n            }).flatten().join('&');\n        } else {\n            return Sortable.sequence(element, arguments[1]).map( function(item) {\n                return name + \"[]=\" + encodeURIComponent(item);\n            }).join('&');\n        }\n    }\n};\n\n// Returns true if child is contained within element\nElement.isParent = function(child, element) {\n    if (!child.parentNode || child == element) return false;\n    if (child.parentNode == element) return true;\n    return Element.isParent(child.parentNode, element);\n};\n\nElement.findChildren = function(element, only, recursive, tagName) {\n    if(!element.hasChildNodes()) return null;\n    tagName = tagName.toUpperCase();\n    if(only) only = [only].flatten();\n    var elements = [];\n    $A(element.childNodes).each( function(e) {\n        if(e.tagName && e.tagName.toUpperCase()==tagName &&\n            (!only || (Element.classNames(e).detect(function(v) { return only.include(v) }))))\n            elements.push(e);\n        if(recursive) {\n            var grandchildren = Element.findChildren(e, only, recursive, tagName);\n            if(grandchildren) elements.push(grandchildren);\n        }\n    });\n\n    return (elements.length>0 ? elements.flatten() : []);\n};\n\nElement.offsetSize = function (element, type) {\n    return element['offset' + ((type=='vertical' || type=='height') ? 'Height' : 'Width')];\n};\n"],"sourceRoot":""}