{"version":3,"sources":["webpack://jrs-ui/./src/org/org.user.mng.main.js","webpack://jrs-ui/./src/org/org.user.mng.actions.js","webpack://jrs-ui/../js-sdk/src/common/extension/jQueryjCryptionExtensions.js","webpack://jrs-ui/../js-sdk/src/common/util/encrypter.js","webpack://jrs-ui/./src/org/org.user.mng.components.js","webpack://jrs-ui/./src/org/org.root.user.js","webpack://jrs-ui/./src/attributes/AttributesViewFacade.js","webpack://jrs-ui/./src/manage/manageUsers.common.js"],"names":["invokeUserManagerAction","actionName","options","orgModule","invokeAction","isLoggedInUserSelected","selected","currentUser","length","detect","item","getNameWithTenant","canAddUser","canEnableAll","canDeleteAll","Event","USERS_ENABLED","USERS_DISABLED","Action","ENABLE_ALL","DISABLE_ALL","initialize","opt","webHelpModule","layoutModule","_","window","localContext","userMngInitOptions","removeContextMenuTreePlugin","enabledOrDisabledHandler","event","users","memo","inputData","json","this","userList","toolbarModel","actionModel","text","org","addDialog","show","bind","hide","properties","bindAsEventListener","tree","id","getOrganization","userName","tenantId","navigateToManager","isProVersion","ADD","buttonId","action","actionArgs","test","ENABLE","DISABLE","DELETE","validators","data","Object","toJSON","collect","user","onSuccess","successData","responseData","onError","errorData","beforeInvoke","entity","jQuery","setValue","submit","$","string","keyPair","callback","i","charCodeAt","encryptObject","j","block","charCounter","encrypted","encrypt","l","chunkSize","setTimeout","encryptChar","BigInt","k","digits","crypt","barrett","powMod","e","radix","biToHex","biToString","encryptedString","substring","JSEncrypter","encryptData","dataObj","callbackFunc","receivedKey","pubKey","keyArr","push","_encryptDataRecursive","index","encDataObj","reversedDataToEncrypt","encodeURIComponent","split","reverse","join","receivedEncrypted","CE_LIST_TEMPLATE_ID","CE_ITEM_TEMPLATE_ID","PRO_LIST_TEMPLATE_ID","PRO_ITEM_TEMPLATE_ID","USER_ID_PATTERN","USER_NAME_PATTERN","USER_ORGANIZATION_PATTERN","listTemplateId","itemTemplateId","onLoad","onSearch","value","dynamicList","label","processTemplate","element","find","name","html","xssUtil","getValue","fullName","EMAIL_PATTERN","ENABLE_USER_PATTERN","EXTERNAL_USER_PATTERN","PASSWORD_PATTERN","PASSWORD_CONFIRM_PATTERN","_LOGIN_AS_USER_BUTTON","extend","viewAssignedListTemplateDomId","viewAssignedItemTemplateDomId","searchAssigned","showAssigned","attributes","context","urlGETTemplate","urlPUTTemplate","panel","email","enabled","external","pass","confirmPass","blurValidator","XRegExp","inputValidator","_validators","_initCustomEvents","signedUser","umProperties","checked","parents","removeClass","addClass","setAssignedEntities","roles","buttonManager","_DELETE_BUTTON_ID","_value","parent","val","resetValidation","changeReadonly","disabled","changeDisable","ValidationModule","dialogs","oldUser","_toUser","attributesFacade","isAttributesChanged","containsUnsavedItems","isEditMode","password","confirmPassword","getAssignedEntities","getUnassignedEntities","orgModuleProps","encryptedUser","unencryptedUIUser","entityName","unencryptedEntity","assigned","unassigned","dfd","setProperties","cancel","resolve","$activeElements","$availableAndAssignedEl","regExp","RegExp","unsupportedSymbols","RegExpRepresenter","getRepresentedString","on","input","target","stopPropagation","focus","button","matchAny","loginAs","isEncryptionOn","orgModuleUserManagerPropsObj","paramToEncrypt","encData","Error","_ADD_USER_ID","_ADD_BUTTON_ID","_CANCEL_BUTTON_ID","_FULL_NAME_ID","_USER_NAME_ID","_USER_EMAIL_ID","_ENABLE_USER_ID","_PASSWORD_ID","_CONFIRM_PASSWORD_ID","_ADD_BUTTON_TITLE_PATTERN","addUser","addBtn","cancelBtn","userEmail","enableUser","regExpForReplacement","validator","observe","changedByUser","prevValue","replace","invoke","_doAdd","_hideValidationErrors","each","organization","title","msg","isRoot","organizationName","update","_validate","_autoFill","thisObj","pswd","pwd","defaultRole","roleName","onExist","onNotExist","assign","orgUserMngMain","orgUserMngActions","orgUserMngComponents","Marionette","designerViewOptions","designer","viewerViewOptions","viewer","attributesDesignerFactory","type","AttributesViewer","listenTo","_triggerChangeEvent","setCurrentView","render","hideFilters","getCurrentView","currentView","revertChanges","toggleMode","mode","trigger","jrsConfigs","i18n","i18n2","attributesViewOptionsFactory","AttributesViewFacade","scrollEventTrait","attributesTypesEnum","ConfirmationDialog","TenantsTreeView"],"mappings":"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","file":"_chunks/chunk.7742.js","sourcesContent":["/*\n * Copyright (C) 2005 - 2022 TIBCO Software Inc. All rights reserved.\n * http://www.jaspersoft.com.\n *\n * Unless you have purchased a commercial license agreement from Jaspersoft,\n * the following license terms apply:\n *\n * This program is free software: you can redistribute it and/or modify\n * it under the terms of the GNU Affero General Public License as\n * published by the Free Software Foundation, either version 3 of the\n * License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the\n * GNU Affero General Public License for more details.\n *\n * You should have received a copy of the GNU Affero General Public License\n * along with this program. If not, see <http://www.gnu.org/licenses/>.\n */\n/**\n * @version: $Id$\n */\nimport orgModule from '../manage/mng.root';\nimport _ from 'underscore';\nimport webHelpModule from '../components/components.webHelp';\nimport layoutModule from '../core/core.layout';\nimport {isProVersion} from \"../namespace/namespace\";\n\nfunction invokeUserAction(actionName, options) {\n    var action = orgModule.userActionFactory[actionName](options);\n    action.invokeAction();\n}\nfunction invokeUserManagerAction(actionName, options) {\n    var action = orgModule.userManager.actionFactory[actionName](options);\n    action.invokeAction();\n}\nfunction isLoggedInUserSelected() {\n    var selected = orgModule.entityList.getSelectedEntities();\n    var currentUser = orgModule.userManager.options.currentUser;\n    return selected.length > 0 && !!selected.detect(function (item) {\n        return item.getNameWithTenant() == currentUser;\n    });\n}\nfunction canAddUser() {\n    if (orgModule.manager.tenantsTree) {\n        return orgModule.manager.tenantsTree.getTenant() != null;\n    } else {\n        return true;\n    }\n}\nfunction canEnableAll() {\n    return orgModule.entityList.getSelectedEntities().length > 0;\n}\nfunction canDisableAll() {\n    return orgModule.entityList.getSelectedEntities().length > 0 && !isLoggedInUserSelected();\n}\nfunction canDeleteAll() {\n    return orgModule.entityList.getSelectedEntities().length > 0 && !isLoggedInUserSelected();\n}\nfunction canDeleteUser() {\n    return orgModule.entityList.getSelectedEntities().length > 0;\n}\norgModule.userManager = {\n    //    EMAIL_REG_EXP: XRegExp(\"^[\\\\p{L}\\\\p{M}\\\\p{N}._%'-\\\\@\\\\,\\\\;\\\\s]+$\"),\n    Event: {\n        USERS_ENABLED: 'users:enabled',\n        USERS_DISABLED: 'users:disabled'\n    },\n    Action: {\n        ENABLE_ALL: 'enableAll',\n        DISABLE_ALL: 'disableAll'\n    },\n    initialize: function (opt) {\n        webHelpModule.setCurrentContext('admin');\n        layoutModule.resizeOnClient('folders', 'users', 'properties');\n        var options = _.extend({}, opt, window.localContext.userMngInitOptions, { removeContextMenuTreePlugin: true });\n        orgModule.userManager.options = options;    // Manager customization.\n        // Manager customization.\n        orgModule.manager.initialize(options);\n        orgModule.manager.entityJsonToObject = function (json) {\n            return new orgModule.User(json);\n        };\n        orgModule.manager.relatedEntityJsonToObject = function (json) {\n            return new orgModule.Role(json);\n        };\n        this.userList.initialize({\n            toolbarModel: this.actionModel,\n            text: orgModule.manager.state.text\n        });    // Dialogs customization.\n        // Dialogs customization.\n        orgModule.addDialog.show = function (org) {\n            this.addDialog.show(org);\n        }.bind(this);    // Dialogs customization.\n        // Dialogs customization.\n        orgModule.addDialog.hide = function (org) {\n            this.addDialog.hide(org);\n        }.bind(this);\n        this.properties.initialize(options);\n        this.addDialog.initialize();\n        function enabledOrDisabledHandler(event) {\n            var users = event.memo.inputData.users;\n            if (orgModule.properties.isEditMode) {\n                orgModule.properties.changeMode(false);\n            }\n            users.length == 1 && orgModule.entityList.selectEntity(users[0].getNameWithTenant());\n        }\n        orgModule.observe('users:enabled', enabledOrDisabledHandler.bindAsEventListener(this));\n        orgModule.observe('users:disabled', enabledOrDisabledHandler.bindAsEventListener(this));\n        orgModule.observe('entity:deleted', function () {\n            orgModule.properties.hide();\n        });\n        orgModule.observe('entities:deleted', function () {\n            orgModule.properties.hide();\n        });\n        orgModule.observe('server:unavailable', function (event) {\n            var tree = orgModule.manager.tenantsTree;\n            var id = tree ? tree.getOrganization().id : null;\n            new orgModule.User({\n                userName: '',\n                tenantId: id\n            }).navigateToManager();\n        }.bindAsEventListener(this));\n        if (!isProVersion()) {\n            orgModule.manager.reloadEntities();\n        }\n    },\n    actionModel: {\n        ADD: {\n            buttonId: 'addNewUserBtn',\n            action: orgModule.invokeClientAction,\n            actionArgs: 'create',\n            test: canAddUser\n        },\n        ENABLE: {\n            buttonId: 'enableAllUsersBtn',\n            action: invokeUserManagerAction,\n            actionArgs: 'enableAllUsers',\n            test: canEnableAll\n        },\n        DISABLE: {\n            buttonId: 'disableAllUsersBtn',\n            action: invokeUserManagerAction,\n            actionArgs: 'disableAllUsers',\n            test: canDisableAll\n        },\n        DELETE: {\n            buttonId: 'deleteAllUsersBtn',\n            action: orgModule.invokeClientAction,\n            actionArgs: 'deleteAll',\n            test: canDeleteAll\n        }\n    },\n    validators: {}\n};\n\norgModule.canDeleteAllUsers = canDeleteAll;\norgModule.canAddUser = canAddUser;\norgModule.canEnableAllUsers = canEnableAll;\norgModule.isLoggedInUserSelected = isLoggedInUserSelected;\norgModule.invokeUserAction = invokeUserAction;\norgModule.invokeUserManagerAction = invokeUserManagerAction;\n\nexport default orgModule;","/*\n * Copyright (C) 2005 - 2022 TIBCO Software Inc. All rights reserved.\n * http://www.jaspersoft.com.\n *\n * Unless you have purchased a commercial license agreement from Jaspersoft,\n * the following license terms apply:\n *\n * This program is free software: you can redistribute it and/or modify\n * it under the terms of the GNU Affero General Public License as\n * published by the Free Software Foundation, either version 3 of the\n * License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the\n * GNU Affero General Public License for more details.\n *\n * You should have received a copy of the GNU Affero General Public License\n * along with this program. If not, see <http://www.gnu.org/licenses/>.\n */\n\n\n/**\n * @version: $Id$\n */\n\nimport orgModule from './org.user.mng.main';\nimport jQuery from 'jquery';\n\norgModule.userActionFactory = {\n    'enableAll': function (options) {\n\n        var users = options.users;\n        var data = {'userNames' : Object.toJSON(users.collect(function(user) {\n            return user.getNameWithTenant();\n        }))};\n\n        var action = new orgModule.ServerAction(\"enableAll\", data);\n\n        action.onSuccess = function(successData) {\n            orgModule.fire(orgModule.userManager.Event.USERS_ENABLED, {\n                inputData: options,\n                responseData: successData\n            });\n        };\n\n        action.onError = function(errorData) {\n            orgModule.fire(orgModule.Event.SERVER_ERROR, {\n                inputData: options,\n                responseData: errorData\n            });\n        };\n\n        action.beforeInvoke = function() {\n            return orgModule.invokeClientAction(\"cancelIfEdit\", { entity: users[0] });\n        };\n\n        return action;\n    },\n\n    'disableAll': function (options) {\n\n        var users = options.users;\n        var data = {'userNames' : Object.toJSON(users.collect(function(user) {\n            return user.getNameWithTenant();\n        }))};\n\n        var action = new orgModule.ServerAction(\"disableAll\", data);\n\n        action.onSuccess = function(successData) {\n            orgModule.fire(orgModule.userManager.Event.USERS_DISABLED, {\n                inputData: options,\n                responseData: successData\n            });\n        };\n\n        action.onError = function(errorData) {\n            orgModule.fire(orgModule.Event.SERVER_ERROR, {\n                inputData: options,\n                responseData: errorData\n            });\n        };\n\n        action.beforeInvoke = function() {\n            return orgModule.invokeClientAction(\"cancelIfEdit\", { entity: users[0] });\n        };\n\n        return action;\n    }\n};\n\norgModule.userManager.actionFactory = {\n    'enableAllUsers': function () {\n        var users = orgModule.entityList.getSelectedEntities();\n\n        return new orgModule.Action(function() {\n            orgModule.invokeUserAction(orgModule.userManager.Action.ENABLE_ALL, {\n                users: users\n            });\n        });\n    },\n\n    'disableAllUsers': function () {\n        var users = orgModule.entityList.getSelectedEntities();\n\n        return new orgModule.Action(function() {\n            orgModule.invokeUserAction(orgModule.userManager.Action.DISABLE_ALL, {\n                users: users\n            });\n        });\n    },\n\n    'login': function(options) {\n        var user = options.user;\n\n        return new orgModule.Action(function() {\n            jQuery('#j_username')[0].setValue(user.getNameWithTenant());\n            jQuery('#loginAsForm')[0].submit();\n        });\n    }\n};\n\nexport default orgModule;","/*\n * Copyright (C) 2005 - 2022 TIBCO Software Inc. All rights reserved.\n * http://www.jaspersoft.com.\n *\n * Unless you have purchased a commercial license agreement from Jaspersoft,\n * the following license terms apply:\n *\n * This program is free software: you can redistribute it and/or modify\n * it under the terms of the GNU Affero General Public License as\n * published by the Free Software Foundation, either version 3 of the\n * License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the\n * GNU Affero General Public License for more details.\n *\n * You should have received a copy of the GNU Affero General Public License\n * along with this program. If not, see <http://www.gnu.org/licenses/>.\n */\n\n/*global BigInt, biToHex, biToString */\n\nimport $ from 'jquery';\nimport {BigInt, biToHex, biToString} from 'jCryption';\n\n$.jCryption.encryptKeyWithoutRedundancy = function (string, keyPair, callback) {\n    if (string === '') {\n        if ($.isFunction(callback)) {\n            callback(string);\n            return;\n        } else {\n            return string;\n        }\n    }\n    var charSum = 0;\n    for (var i = 0; i < string.length; i++) {\n        charSum += string.charCodeAt(i);\n    }\n    var encrypt = [];\n    var l = 0;\n    while (l < string.length) {\n        encrypt[l] = string.charCodeAt(l);\n        l++;\n    }\n    while (encrypt.length % keyPair.chunkSize !== 0) {\n        encrypt[l++] = 0;\n    }\n\n    function encryption(encryptObject) {\n        var charCounter = 0;\n        var j, block;\n        var encrypted = '';\n\n        function encryptChar() {\n            block = new BigInt();\n            j = 0;\n            for (var k = charCounter; k < charCounter + keyPair.chunkSize; ++j) {\n                block.digits[j] = encryptObject[k++];\n                block.digits[j] += encryptObject[k++] << 8;\n            }\n            var crypt = keyPair.barrett.powMod(block, keyPair.e);\n            var text = keyPair.radix == 16 ? biToHex(crypt) : biToString(crypt, keyPair.radix);\n            encrypted += text + ' ';\n            charCounter += keyPair.chunkSize;\n            if (charCounter < encryptObject.length) {\n                setTimeout(encryptChar, 1);\n            } else {\n                var encryptedString = encrypted.substring(0, encrypted.length - 1);\n                if ($.isFunction(callback)) {\n                    callback(encryptedString);\n                } else {\n                    return encryptedString;\n                }\n            }\n        }\n\n        setTimeout(encryptChar, 1);\n    }\n\n    encryption(encrypt);\n};\nexport default $;","/*\n * Copyright (C) 2005 - 2022 TIBCO Software Inc. All rights reserved.\n * http://www.jaspersoft.com.\n *\n * Unless you have purchased a commercial license agreement from Jaspersoft,\n * the following license terms apply:\n *\n * This program is free software: you can redistribute it and/or modify\n * it under the terms of the GNU Affero General Public License as\n * published by the Free Software Foundation, either version 3 of the\n * License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the\n * GNU Affero General Public License for more details.\n *\n * You should have received a copy of the GNU Affero General Public License\n * along with this program. If not, see <http://www.gnu.org/licenses/>.\n */\n\nimport $ from '../extension/jQueryjCryptionExtensions';\nvar Base64Coder = {};\nBase64Coder.code = 'ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=';\nBase64Coder.encode16BitString = function (str) {\n    var hd1, hd2, bits, h1, h2, h3, h4, h5, d6, e = [], pad = '', c, plain, coded;\n    var b64 = Base64Coder.code;\n    plain = str;\n    c = plain.length % 2;\n    if (c > 0) {\n        while (c++ < 2) {\n            pad += '===';\n            plain += '\\0';\n        }\n    }\n    for (c = 0; c < plain.length; c += 2) {\n        hd1 = plain.charCodeAt(c);\n        hd2 = plain.charCodeAt(c + 1);\n        bits = hd1 << 16 | hd2;\n        h1 = bits >> 26 & 63;\n        h2 = bits >> 20 & 63;\n        h3 = bits >> 14 & 63;\n        h4 = bits >> 8 & 63;\n        h5 = bits >> 2 & 63;\n        d6 = bits & 3;\n        e[c / 2] = b64.charAt(h1) + b64.charAt(h2) + b64.charAt(h3) + b64.charAt(h4) + b64.charAt(h5) + b64.charAt(d6);\n    }\n    coded = e.join('');\n    coded = coded.slice(0, coded.length - pad.length) + pad;\n    return coded;\n};\nBase64Coder.decode16BitString = function (str) {\n    var o1, o2, o3, o4, h1, h2, h3, h4, h5, d6, bits, d = [], plain, coded;\n    var b64 = Base64Coder.code;\n    coded = str;\n    for (var c = 0; c < coded.length; c += 6) {\n        h1 = b64.indexOf(coded.charAt(c));\n        h2 = b64.indexOf(coded.charAt(c + 1));\n        h3 = b64.indexOf(coded.charAt(c + 2));\n        h4 = b64.indexOf(coded.charAt(c + 3));\n        h5 = b64.indexOf(coded.charAt(c + 4));\n        d6 = b64.indexOf(coded.charAt(c + 5));\n        bits = h1 << 26 | h2 << 20 | h3 << 14 | h4 << 8 | h5 << 2 | d6 & 3;\n        o1 = bits >>> 24 & 255;\n        o2 = bits >>> 16 & 255;\n        o3 = bits >>> 8 & 255;\n        o4 = bits & 255;\n        d[c / 6] = String.fromCharCode(o1 << 8 | o2, o3 << 8 | o4);\n        if (h4 == 64)\n            d[c / 6] = d[c / 6] = String.fromCharCode(o1 << 8 | o2);\n    }\n    plain = d.join('');\n    return plain;\n};\nvar JSEncrypter = {\n    encryptData: function (dataObj, callbackFunc) {\n        if (!dataObj) {\n            callbackFunc();\n            return;\n        }\n        $.jCryption.getKeys('GetEncryptionKey', function (receivedKey) {\n            var pubKey = receivedKey;\n            var keyArr = [];\n            for (var i in dataObj)\n                keyArr.push(i);\n            var encData = {};\n            JSEncrypter._encryptDataRecursive(dataObj, keyArr, 0, pubKey, encData, callbackFunc);\n        });\n    },\n    _encryptDataRecursive: function (dataObj, keyArr, index, pubKey, encDataObj, callbackFunc) {\n        if (!keyArr || keyArr.length == index)\n            return;\n        var dataToEncrypt = encodeURIComponent(dataObj[keyArr[index]]);\n        var reversedDataToEncrypt = dataToEncrypt.split('').reverse().join('');\n        $.jCryption.encryptKeyWithoutRedundancy(reversedDataToEncrypt, pubKey, function (receivedEncrypted) {\n            encDataObj[keyArr[index]] = receivedEncrypted;\n            if (keyArr.length == index + 1)\n                callbackFunc(encDataObj);\n            else\n                JSEncrypter._encryptDataRecursive(dataObj, keyArr, index + 1, pubKey, encDataObj, callbackFunc);\n        });\n    }\n};\nexport default JSEncrypter;","/*\n * Copyright (C) 2005 - 2022 TIBCO Software Inc. All rights reserved.\n * http://www.jaspersoft.com.\n *\n * Unless you have purchased a commercial license agreement from Jaspersoft,\n * the following license terms apply:\n *\n * This program is free software: you can redistribute it and/or modify\n * it under the terms of the GNU Affero General Public License as\n * published by the Free Software Foundation, either version 3 of the\n * License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the\n * GNU Affero General Public License for more details.\n *\n * You should have received a copy of the GNU Affero General Public License\n * along with this program. If not, see <http://www.gnu.org/licenses/>.\n */\n\n\nimport jQuery from 'jquery';\nimport JSEncrypter from 'js-sdk/src/common/util/encrypter';\nimport XRegExp from 'xregexp';\nimport orgModule from './org.user.mng.main';\nimport {ValidationModule, matchAny} from \"../util/utils.common\";\nimport RegExpRepresenter from '../tenantImportExport/utils/RegExpRepresenter';\n\nimport {isProVersion} from \"../namespace/namespace\";\nimport xssUtil from 'js-sdk/src/common/util/xssUtil';\nimport layoutModule from '../core/core.layout';\nimport buttonManager from '../core/core.events.bis';\nimport dialogs from '../components/components.dialogs';\nimport {dynamicList} from '../components/list.base';\n\norgModule.userManager.userList = {\n    CE_LIST_TEMPLATE_ID: 'tabular_twoColumn',\n    CE_ITEM_TEMPLATE_ID: 'tabular_twoColumn:leaf',\n    PRO_LIST_TEMPLATE_ID: 'tabular_threeColumn',\n    PRO_ITEM_TEMPLATE_ID: 'tabular_threeColumn:leaf',\n    USER_ID_PATTERN: '.ID > a',\n    USER_NAME_PATTERN: '.name',\n    USER_ORGANIZATION_PATTERN: '.organization',\n    initialize: function (options) {\n        orgModule.entityList.initialize({\n            listTemplateId: isProVersion() ? this.PRO_LIST_TEMPLATE_ID : this.CE_LIST_TEMPLATE_ID,\n            itemTemplateId: isProVersion() ? this.PRO_ITEM_TEMPLATE_ID : this.CE_ITEM_TEMPLATE_ID,\n            onLoad: function () {\n                orgModule.fire(orgModule.userManager.Event.SEARCH_NEXT, {});\n            },\n            onSearch: function (text) {\n                orgModule.fire(orgModule.userManager.Event.SEARCH, { text: text });\n            },\n            toolbarModel: options.toolbarModel,\n            text: options.text\n        });\n        orgModule.entityList._createEntityItem = function (value) {\n            var item = new dynamicList.ListItem({\n                label: value.userName,\n                value: value\n            });\n            item.processTemplate = function (element) {\n                var id = jQuery(element).find(orgModule.userManager.userList.USER_ID_PATTERN);\n                var name = jQuery(element).find(orgModule.userManager.userList.USER_NAME_PATTERN);\n                id.html(xssUtil.hardEscape(this.getValue().userName));\n                name.html(xssUtil.hardEscape(this.getValue().fullName));\n                var tenantId = this.getValue().tenantId;\n                if (isProVersion() && tenantId) {\n                    var org = jQuery(element).find(orgModule.userManager.userList.USER_ORGANIZATION_PATTERN);\n                    org.html(xssUtil.hardEscape(tenantId));\n                }\n                return element;\n            };\n            return item;\n        };\n    }\n};    ////////////////////////////////////////\n// Panel which shows user's properties\n////////////////////////////////////////\n////////////////////////////////////////\n// Panel which shows user's properties\n////////////////////////////////////////\norgModule.userManager.properties = {\n    USER_NAME_PATTERN: '#userName',\n    USER_ID_PATTERN: '#propUserID',\n    EMAIL_PATTERN: '#email',\n    ENABLE_USER_PATTERN: '#enableUser',\n    EXTERNAL_USER_PATTERN: '#externalUser',\n    PASSWORD_PATTERN: '#password',\n    PASSWORD_CONFIRM_PATTERN: '#confirmPassword',\n    _LOGIN_AS_USER_BUTTON: '#loginAsUser',\n    user: null,\n    initialize: function (options) {\n        orgModule.properties.initialize(options._.extend({}, options, {\n            viewAssignedListTemplateDomId: 'list_type_attributes',\n            viewAssignedItemTemplateDomId: 'list_type_attributes:role',\n            searchAssigned: false,\n            showAssigned: true,\n            attributes: {\n                context: {\n                    urlGETTemplate: \"rest_v2/attributes?includeInherited=true&holder=user:{{if (tenantId) { }}/{{-tenantId}}{{ } }}/{{-userName}}&group=custom&excludeGroup=serverSettings\",\n                    urlPUTTemplate: \"rest_v2{{ if (tenantId) { }}/organizations/{{-tenantId}}{{ } }}/users/{{-userName}}/attributes?_embedded=permission\"\n                }\n            }\n        }));\n        var panel = jQuery('#' + orgModule.properties._id);\n        this.name = panel.find(this.USER_NAME_PATTERN)[0];\n        this.id = panel.find(this.USER_ID_PATTERN)[0];\n        this.email = panel.find(this.EMAIL_PATTERN)[0];\n        this.enabled = panel.find(this.ENABLE_USER_PATTERN)[0];\n        this.external = panel.find(this.EXTERNAL_USER_PATTERN)[0];\n        this.pass = panel.find(this.PASSWORD_PATTERN)[0];\n        this.confirmPass = panel.find(this.PASSWORD_CONFIRM_PATTERN)[0];\n        this.email.blurValidator = orgModule.createRegExpValidator(this.email, 'invalidEmail', XRegExp(orgModule.Configuration.emailRegExpPattern));\n        this.pass.inputValidator = orgModule.createRegExpValidator(this.pass, 'passwordIsWeak', XRegExp(orgModule.Configuration.passwordPattern));\n        this._validators = [\n            this.email.blurValidator,\n            this.pass.inputValidator,\n            orgModule.createSameValidator(this.confirmPass, this.pass, 'invalidConfirmPassword')\n        ];\n        this._initCustomEvents();\n        var signedUser = options.currentUser;\n        orgModule.properties.setProperties = function (properties) {\n            var umProperties = orgModule.userManager.properties;\n            umProperties.name.setValue(properties.fullName);\n            umProperties.id.setValue(properties.userName);\n            umProperties.email.setValue(properties.email);\n            umProperties.enabled.checked = properties.enabled;\n            umProperties.external.checked = properties.external;\n            umProperties.pass.setValue('');\n            umProperties.confirmPass.setValue('');\n            if (properties.external) {\n                jQuery(umProperties.external).parents('fieldset').removeClass(layoutModule.HIDDEN_CLASS);\n            } else {\n                jQuery(umProperties.external).parents('fieldset').addClass(layoutModule.HIDDEN_CLASS);\n            }\n            this.setAssignedEntities(properties.roles);\n            if (properties.enabled && properties.getNameWithTenant() != signedUser) {\n                buttonManager.enable(umProperties._LOGIN_AS_USER_BUTTON);\n            } else {\n                buttonManager.disable(umProperties._LOGIN_AS_USER_BUTTON);\n            }\n            if (properties.getNameWithTenant() !== signedUser) {\n                buttonManager.enable('#' + this._DELETE_BUTTON_ID);\n            } else {\n                buttonManager.disable('#' + this._DELETE_BUTTON_ID);\n            }\n        };\n        orgModule.properties._deleteEntity = function () {\n            orgModule.invokeClientAction('delete', { entity: this._value });\n        };\n        orgModule.properties._loginAsUser = function () {\n            orgModule.invokeUserManagerAction('login', { user: this._value });\n        };\n        orgModule.properties._editEntity = function () {\n            var umProperties = orgModule.userManager.properties;    //hide/show the password in case of an external user.\n            //hide/show the password in case of an external user.\n            if (this._value.external) {\n                jQuery(umProperties.PASSWORD_PATTERN).parent().addClass(layoutModule.HIDDEN_CLASS);\n                jQuery(umProperties.PASSWORD_CONFIRM_PATTERN).parent().addClass(layoutModule.HIDDEN_CLASS);\n            } else {\n                jQuery(umProperties.PASSWORD_PATTERN).parent().removeClass(layoutModule.HIDDEN_CLASS);\n                jQuery(umProperties.PASSWORD_CONFIRM_PATTERN).parent().removeClass(layoutModule.HIDDEN_CLASS);\n            }    //reset password fields\n            //reset password fields\n            jQuery(umProperties.PASSWORD_PATTERN).val('');\n            jQuery(umProperties.PASSWORD_CONFIRM_PATTERN).val('');\n            this.resetValidation([\n                umProperties.USER_NAME_PATTERN,\n                umProperties.EMAIL_PATTERN,\n                umProperties.PASSWORD_CONFIRM_PATTERN\n            ]);\n            this.changeReadonly(true, [\n                umProperties.USER_NAME_PATTERN,\n                umProperties.EMAIL_PATTERN\n            ]);\n            var disabled = this._value.getNameWithTenant() !== signedUser;\n            this.changeDisable(disabled, [umProperties.ENABLE_USER_PATTERN]);\n        };\n        orgModule.properties._showEntity = function () {\n            var umProperties = orgModule.userManager.properties;\n            this.resetValidation([\n                umProperties.USER_NAME_PATTERN,\n                umProperties.EMAIL_PATTERN,\n                umProperties.PASSWORD_CONFIRM_PATTERN\n            ]);\n            this.changeReadonly(false, [\n                umProperties.USER_NAME_PATTERN,\n                umProperties.EMAIL_PATTERN\n            ]);\n            this.changeDisable(false, [umProperties.ENABLE_USER_PATTERN]);\n        };\n        orgModule.properties.validate = function () {\n            var umProperties = orgModule.userManager.properties;\n            if (ValidationModule.validateLegacy(umProperties._validators)) {\n                return true;\n            } else {\n                dialogs.systemConfirm.show(orgModule.messages['validationErrors'], 2000);\n                return false;\n            }\n        };\n        orgModule.properties.isChanged = function () {\n            var umProperties = orgModule.userManager.properties;\n            var oldUser = this._value;\n            var user = umProperties._toUser();\n            var attributesFacade = orgModule.properties.attributesFacade, isAttributesChanged = attributesFacade && attributesFacade.containsUnsavedItems();\n            return this.isEditMode && (isAttributesChanged || oldUser.fullName != user.fullName || oldUser.email != user.email || oldUser.enabled != user.enabled || oldUser.password != user.password || oldUser.confirmPassword != user.confirmPassword || this.getAssignedEntities().length > 0 || this.getUnassignedEntities().length > 0);\n        };\n        orgModule.properties.save = function () {\n            var umProperties = orgModule.userManager.properties;\n            var orgModuleProps = this;\n            umProperties._toUser(function (encryptedUser, unencryptedUIUser) {\n                if (orgModuleProps._value.tenantId) {\n                    encryptedUser.tenantId = orgModuleProps._value.tenantId;\n                    unencryptedUIUser.tenantId = orgModuleProps._value.tenantId;\n                }\n                encryptedUser.roles = orgModuleProps.getAssignedEntities();\n                unencryptedUIUser.roles = orgModuleProps.getAssignedEntities();\n                orgModule.invokeServerAction('update', {\n                    entityName: orgModuleProps._value.getNameWithTenant(),\n                    entity: encryptedUser,\n                    unencryptedEntity: unencryptedUIUser,\n                    assigned: orgModuleProps.getAssignedEntities(),\n                    unassigned: orgModuleProps.getUnassignedEntities()\n                });\n                orgModule.properties.changeMode(false);\n            });\n        };\n        orgModule.properties.cancel = function () {\n            var dfd = new jQuery.Deferred();\n            this.setProperties(this._value);\n            return this.attributesFacade ? this.attributesFacade.cancel() : dfd.resolve();\n        };\n    },\n    _initCustomEvents: function (roles) {\n        var panel = jQuery('#' + orgModule.properties._id), $activeElements = jQuery('#moveButtons, #userEnable'), $availableAndAssignedEl = jQuery('#editRoles').find('#assigned, #available');\n        this.id.regExp = new RegExp(orgModule.Configuration.userNameNotSupportedSymbols);\n        this.id.unsupportedSymbols = new RegExpRepresenter(orgModule.Configuration.userNameNotSupportedSymbols).getRepresentedString();\n        panel.on('keyup', function (event) {\n            var input = event.target;\n            input.inputValidator && ValidationModule.validateLegacy(input.inputValidator);\n            if (input == this.id) {\n                ValidationModule.validateLegacy([orgModule.createInputRegExValidator(input)]);\n                event.stopPropagation();\n            }\n            orgModule.properties._toggleButton();\n        }.bind(this));\n        $activeElements.on('click', function (e) {\n            orgModule.properties._toggleButton();\n        });\n        $availableAndAssignedEl.on('dblclick', function () {\n            orgModule.properties._toggleButton();\n        });\n        jQuery(this.email).on('blur', function (event) {\n            var input = event.target;\n            if (input.blurValidator) {\n                if (ValidationModule.validateLegacy(input.blurValidator)) {\n                    input.inputValidator && (input.inputValidator = null);\n                } else {\n                    input.inputValidator = input.blurValidator;\n                    input.focus();\n                    return false;\n                }\n            }\n        });\n        jQuery('#' + orgModule.properties._BUTTONS_CONTAINER_ID).on('click', function (event) {\n            var button = matchAny(event.target, [layoutModule.BUTTON_PATTERN], true);\n            var loginAs = jQuery(this._LOGIN_AS_USER_BUTTON)[0];\n            if (button == loginAs && !buttonManager.isDisabled(loginAs)) {\n                orgModule.properties._loginAsUser();\n            }\n        }.bind(this));\n    },\n    _toUser: function (callbackFunc) {\n        if (!callbackFunc) {\n            //version without encryption\n            return new orgModule.User({\n                fullName: jQuery(this.name).val(),\n                userName: jQuery(this.id).val(),\n                email: jQuery(this.email).val(),\n                enabled: this.enabled.checked,\n                external: this.external.checked,\n                password: jQuery(this.pass).val(),\n                confirmPassword: jQuery(this.confirmPass).val()\n            });\n        }    //version of function with encryption from here on.\n        //user used to keep most ui unencrypted on refresh\n        //version of function with encryption from here on.\n        //user used to keep most ui unencrypted on refresh\n        var unencryptedUIUser = new orgModule.User({\n            fullName: jQuery(this.name).val(),\n            userName: jQuery(this.id).val(),\n            email: jQuery(this.email).val(),\n            enabled: this.enabled.checked,\n            external: this.external.checked,\n            password: '',\n            confirmPassword: ''\n        });\n        if (window.isEncryptionOn) {\n            //global property from jsp page, set up in security-config.properties\n            var orgModuleUserManagerPropsObj = this;\n            var paramToEncrypt = {};\n            paramToEncrypt[this.pass.id] = this.pass.getValue();\n            paramToEncrypt[this.confirmPass.id] = this.confirmPass.getValue();\n            JSEncrypter.encryptData(paramToEncrypt, function (encData) {\n                if (!encData)\n                    throw new Error('No encrypted data found.');\n                jQuery('#' + orgModuleUserManagerPropsObj.pass.id).val(encData[orgModuleUserManagerPropsObj.pass.id]);\n                jQuery('#' + orgModuleUserManagerPropsObj.confirmPass.id).val(encData[orgModuleUserManagerPropsObj.confirmPass.id]);    //used to send encrypted data\n                //used to send encrypted data\n                var encryptedUser = new orgModule.User({\n                    fullName: orgModuleUserManagerPropsObj.name.getValue(),\n                    userName: orgModuleUserManagerPropsObj.id.getValue(),\n                    email: orgModuleUserManagerPropsObj.email.getValue(),\n                    enabled: orgModuleUserManagerPropsObj.enabled.checked,\n                    external: orgModuleUserManagerPropsObj.external.checked,\n                    password: encData[orgModuleUserManagerPropsObj.pass.id]\n                });\n                callbackFunc(encryptedUser, unencryptedUIUser);\n            });\n        } else {\n            unencryptedUIUser.password = this.pass.getValue();\n            callbackFunc(unencryptedUIUser, unencryptedUIUser);\n        }\n    }\n};    ////////////////////////////////////////\n// Create user dialog\n////////////////////////////////////////\n////////////////////////////////////////\n// Create user dialog\n////////////////////////////////////////\norgModule.userManager.addDialog = {\n    _ADD_USER_ID: 'addUser',\n    _ADD_BUTTON_ID: 'addUserBtn',\n    _CANCEL_BUTTON_ID: 'cancelUserBtn',\n    _FULL_NAME_ID: 'addUserFullName',\n    _USER_NAME_ID: 'addUserID',\n    _USER_EMAIL_ID: 'addUserEmail',\n    _ENABLE_USER_ID: 'addUserEnableUser',\n    _PASSWORD_ID: 'addUserPassword',\n    _CONFIRM_PASSWORD_ID: 'addUserConfirmPassword',\n    _ADD_BUTTON_TITLE_PATTERN: '.wrap',\n    initialize: function () {\n        this.addUser = jQuery('#' + this._ADD_USER_ID)[0];\n        this.addBtn = jQuery('#' + this._ADD_BUTTON_ID)[0];\n        this.cancelBtn = jQuery('#' + this._CANCEL_BUTTON_ID)[0];\n        this.fullName = jQuery('#' + this._FULL_NAME_ID)[0];\n        this.userName = jQuery('#' + this._USER_NAME_ID)[0];\n        this.userEmail = jQuery('#' + this._USER_EMAIL_ID)[0];\n        this.enableUser = jQuery('#' + this._ENABLE_USER_ID)[0];\n        this.password = jQuery('#' + this._PASSWORD_ID)[0];\n        this.confirmPassword = jQuery('#' + this._CONFIRM_PASSWORD_ID)[0];\n        this.userName.regExp = new RegExp(orgModule.Configuration.userNameNotSupportedSymbols);\n        this.userName.regExpForReplacement = new RegExp(orgModule.Configuration.userNameNotSupportedSymbols, 'g');\n        this.userName.unsupportedSymbols = new RegExpRepresenter(orgModule.Configuration.userNameNotSupportedSymbols).getRepresentedString();\n        this.userName.inputValidator = orgModule.createInputRegExValidator(this.userName);\n        this.userEmail.blurValidator = orgModule.createRegExpValidator(this.userEmail, 'invalidEmail', XRegExp(orgModule.Configuration.emailRegExpPattern));\n        this.password.inputValidator = orgModule.createRegExpValidator(this.password, 'passwordIsWeak', XRegExp(orgModule.Configuration.passwordPattern));\n        this.confirmPassword.blurValidator = orgModule.createSameValidator(this.confirmPassword, this.password, 'invalidConfirmPassword');\n        this._validators = [\n            orgModule.createBlankValidator(this.userName, 'userNameIsEmpty'),\n            orgModule.createBlankValidator(this.password, 'passwordIsEmpty', function (validator) {\n                validator.element.inputValidator = null;\n            }, function (validator) {\n                validator.element.inputValidator = validator;\n            }),\n            this.confirmPassword.blurValidator,\n            this.userEmail.blurValidator,\n            this.password.inputValidator,\n            this.userName.inputValidator\n        ];\n        this.addUser.observe('keyup', function (event) {\n            var input = event.target;\n            input.inputValidator && ValidationModule.validateLegacy(input.inputValidator);\n            if (input == this.userName) {\n                if (!input.changedByUser) {\n                    input.changedByUser = input.getValue() != input.prevValue;\n                }\n            } else if (input == this.fullName) {\n                if (!this.userName.changedByUser) {\n                    if (!this.userName.regExp.test(this.fullName.getValue())) {\n                        this.userName.setValue(input.getValue());\n                    } else {\n                        this.userName.setValue(input.getValue().replace(this.userName.regExpForReplacement, '_'));\n                    }\n                }\n                event.stopPropagation();\n            }\n        }.bindAsEventListener(this));\n        [\n            this.userEmail,\n            this.confirmPassword\n        ].invoke('observe', 'blur', function (event) {\n            var input = event.target;\n            if (input.blurValidator) {\n                if (ValidationModule.validateLegacy(input.blurValidator)) {\n                    input.inputValidator && (input.inputValidator = null);\n                } else {\n                    input.inputValidator = input.blurValidator;    //                    input.focus();\n                    //                    input.focus();\n                    return false;\n                }\n            }\n        });\n        this.addUser.observe('keydown', function (event) {\n            var input = event.target;\n            if (this.userName == input) {\n                this.userName.prevValue = this.userName.getValue();\n            }\n        }.bindAsEventListener(this));\n        this.addUser.observe('click', function (event) {\n            var button = matchAny(event.target, [layoutModule.BUTTON_PATTERN], true);\n            if (button == this.addBtn) {\n                this._doAdd();\n            } else if (button == this.cancelBtn) {\n                this.hide();\n            }\n        }.bindAsEventListener(this));\n    },\n\n    _hideValidationErrors: function() {\n        [\n            this.fullName,\n            this.userName,\n            this.password,\n            this.confirmPassword,\n            this.userEmail\n        ].each(function (e) {\n            ValidationModule.hideError(e, true);\n            e.changedByUser = false;\n        });\n    },\n\n    show: function (organization) {\n        this.organization = organization;\n        this._hideValidationErrors();\n        var title = jQuery(this.addBtn).find(this._ADD_BUTTON_TITLE_PATTERN)[0];\n        if (title) {\n            var msg = (this.organization && !this.organization.isRoot()) ?\n                orgModule.getMessage('addUserTo', {\n                    organizationName: orgModule.truncateOrgName(this.organization.id)\n                }) :\n                orgModule.getMessage('addUser');\n\n            title.update(msg);\n        }\n\n        this.addBtn.title = (this.organization && !this.organization.isRoot()) ?\n            orgModule.getMessage('addUserTo', { organizationName: this.organization.id }) :\n            orgModule.getMessage('addUser');\n\n        dialogs.popup.show(this.addUser, true);\n        try {\n            this.fullName.focus();\n        } catch (e) {\n        }\n    },\n    hide: function () {\n        dialogs.popup.hide(this.addUser);\n        this.userName.setValue('');\n        this.fullName.setValue('');\n        this.userEmail.setValue('');\n        this.enableUser.checked = true;\n        this.password.setValue('');\n        this.confirmPassword.setValue('');\n    },\n    _validate: function () {\n        return ValidationModule.validateLegacy(this._validators);\n    },\n    _autoFill: function () {\n    },\n    _doAdd: function () {\n        if (this._validate()) {\n            var thisObj = this;\n            var paramToEncrypt;\n            if (window.isEncryptionOn)\n            //global property from jsp page, set up in security-config.properties\n                paramToEncrypt = { pswd: this.password.getValue() };\n            JSEncrypter.encryptData(paramToEncrypt, function (encData) {\n                var pwd = thisObj.password.getValue();\n                if (encData && encData.pswd)\n                    pwd = encData.pswd;\n                var defaultRole = orgModule.Configuration.userDefaultRole;\n                var user = new orgModule.User({\n                    userName: thisObj.userName.getValue(),\n                    fullName: thisObj.fullName.getValue(),\n                    email: thisObj.userEmail.getValue(),\n                    enabled: thisObj.enableUser.checked,\n                    password: pwd,\n                    roles: defaultRole ? [{ roleName: defaultRole }] : []\n                });\n                if (thisObj.organization && !thisObj.organization.isRoot()) {\n                    user.tenantId = thisObj.organization.id;\n                }\n                orgModule.invokeServerAction(orgModule.ActionMap.EXIST, {\n                    entity: user,\n                    onExist: function () {\n                        ValidationModule.showError(this.userName, orgModule.messages['userNameIsAlreadyInUse']);\n                    }.bind(thisObj),\n                    onNotExist: function () {\n                        ValidationModule.hideError(thisObj.userName);\n                        orgModule.invokeServerAction(orgModule.ActionMap.CREATE, { entity: user });\n                    }.bind(thisObj)\n                });\n            });\n        }\n    }\n};\n\nexport default orgModule;","/*\n * Copyright (C) 2005 - 2022 TIBCO Software Inc. All rights reserved.\n * http://www.jaspersoft.com.\n *\n * Unless you have purchased a commercial license agreement from Jaspersoft,\n * the following license terms apply:\n *\n * This program is free software: you can redistribute it and/or modify\n * it under the terms of the GNU Affero General Public License as\n * published by the Free Software Foundation, either version 3 of the\n * License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the\n * GNU Affero General Public License for more details.\n *\n * You should have received a copy of the GNU Affero General Public License\n * along with this program. If not, see <http://www.gnu.org/licenses/>.\n */\n\nimport orgUserMngActions from './org.user.mng.actions';\nimport orgUserMngMain from './org.user.mng.main';\nimport orgUserMngComponents from './org.user.mng.components';\n\nexport default Object.assign(orgUserMngMain, orgUserMngActions, orgUserMngComponents);","/*\n * Copyright (C) 2005 - 2022 TIBCO Software Inc. All rights reserved.\n * http://www.jaspersoft.com.\n *\n * Unless you have purchased a commercial license agreement from Jaspersoft,\n * the following license terms apply:\n *\n * This program is free software: you can redistribute it and/or modify\n * it under the terms of the GNU Affero General Public License as\n * published by the Free Software Foundation, either version 3 of the\n * License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the\n * GNU Affero General Public License for more details.\n *\n * You should have received a copy of the GNU Affero General Public License\n * along with this program. If not, see <http://www.gnu.org/licenses/>.\n */\n\nimport Marionette from 'backbone.marionette';\nimport _ from 'underscore';\nimport attributesDesignerFactory from '../attributes/factory/attributesDesignerFactory';\nimport AttributesViewer from '../attributes/view/AttributesViewer';\n\nvar AttributesViewFacade = Marionette.Controller.extend({\n    initialize: function (options) {\n        options = options || {};\n        var designerViewOptions = _.extend({}, options, options.designer),\n            viewerViewOptions = _.extend({}, options, options.viewer);\n        this.designer = attributesDesignerFactory(designerViewOptions.type, designerViewOptions);\n        this.viewer = new AttributesViewer(viewerViewOptions);\n        this.listenTo(this.designer, 'change', this._triggerChangeEvent);\n        this.setCurrentView();\n    },\n    render: function (hideFilters) {\n        this.getCurrentView().render(hideFilters);\n        return this;\n    },\n    getCurrentView: function () {\n        return this.currentView;\n    },\n    cancel: function () {\n        return this.currentView.revertChanges();\n    },\n    containsUnsavedItems: function () {\n        return this.currentView.containsUnsavedItems && this.currentView.containsUnsavedItems();\n    },\n    setCurrentView: function (currentView) {\n        this.currentView = currentView || this.viewer;\n    },\n    toggleMode: function (mode, hideFilters) {\n        this.getCurrentView().hide();\n        this.setCurrentView(mode ? this.designer : this.viewer);\n        this.render(hideFilters).getCurrentView().show();\n    },\n    _triggerChangeEvent: function () {\n        this.trigger('change', this.containsUnsavedItems());\n    }\n});\nexport default AttributesViewFacade;","/*\n * Copyright (C) 2005 - 2019 TIBCO Software Inc. All rights reserved.\n * http://www.jaspersoft.com.\n *\n * Unless you have purchased a commercial license agreement from Jaspersoft,\n * the following license terms apply:\n *\n * This program is free software: you can redistribute it and/or modify\n * it under the terms of the GNU Affero General Public License as\n * published by the Free Software Foundation, either version 3 of the\n * License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the\n * GNU Affero General Public License for more details.\n *\n * You should have received a copy of the GNU Affero General Public License\n * along with this program. If not, see <http://www.gnu.org/licenses/>.\n */\n\nimport 'xregexp';\nimport 'backbone';\nimport _ from 'underscore';\nimport orgModule from '../org/org.root.user';\nimport jrsConfigs from 'js-sdk/src/jrs.configs';\nimport i18n from '../i18n/AttributesBundle.properties';\nimport i18n2 from 'js-sdk/src/i18n/CommonBundle.properties';\nimport attributesTypesEnum from '../attributes/enum/attributesTypesEnum';\nimport ConfirmationDialog from 'js-sdk/src/common/component/dialog/ConfirmationDialog';\nimport attributesViewOptionsFactory from '../attributes/factory/attributesViewOptionsFactory';\nimport scrollEventTrait from '../attributes/trait/attributesViewScrollEventTrait';\nimport AttributesViewFacade from '../attributes/AttributesViewFacade';\nimport TenantsTreeView from '../tenantImportExport/view/TenantsTreeView';\nimport '../manage/mng.common.actions';\nimport '../org/org.user.mng.components';\nimport 'js-sdk/src/common/util/encrypter';\nimport '../util/utils.common';\n\nif (typeof orgModule.messages === 'undefined') {\n    orgModule.messages = {};\n}\nif (typeof orgModule.Configuration === 'undefined') {\n    orgModule.Configuration = {};\n}\n_.extend(window.localContext, jrsConfigs.userManagement.localContext);\n_.extend(orgModule.messages, jrsConfigs.userManagement.orgModule.messages);\n_.extend(orgModule.Configuration, jrsConfigs.userManagement.orgModule.Configuration);\norgModule.userManager.initialize({\n    _: _,\n    i18n: i18n,\n    i18n2: i18n2,\n    attributesViewOptionsFactory: attributesViewOptionsFactory,\n    AttributesViewFacade: AttributesViewFacade,\n    scrollEventTrait: scrollEventTrait,\n    attributesTypesEnum: attributesTypesEnum,\n    ConfirmationDialog: ConfirmationDialog,\n    TenantsTreeView: TenantsTreeView\n});\n"],"sourceRoot":""}