{"version":3,"sources":["webpack://jrs-ui/../bi-report/src/bi/report/enum/reportStatuses.js","webpack://jrs-ui/../bi-report/src/bi/report/model/ReportExecutionModel.js","webpack://jrs-ui/./src/components/components.toolbarButtons.events.js","webpack://jrs-ui/./src/components/components.toolbarButtons.js","webpack://jrs-ui/./src/controls/controls.base.js","webpack://jrs-ui/./src/controls/controls.core.js","webpack://jrs-ui/./src/controls/controls.options.js","webpack://jrs-ui/../js-sdk/src/common/component/dialog/template/exitDialogTemplate.htm","webpack://jrs-ui/../js-sdk/src/common/component/dialog/ExitDialog.js","webpack://jrs-ui/./src/navigateBack/utils/navigateBackUtils.js","webpack://jrs-ui/./src/reportViewer/report.view.base.js","webpack://jrs-ui/../js-sdk/src/common/templates/standardConfirm.htm","webpack://jrs-ui/./src/scheduler/util/schedulerSaveDialog.js","webpack://jrs-ui/./src/reportViewer/report.view.runtime.js","webpack://jrs-ui/../js-sdk/src/components/overlay/Overlay.js","webpack://jrs-ui/../js-sdk/src/components/overlay/template/overlayTemplate.htm"],"names":["EXECUTION","READY","EMPTY","CANCELLED","FAILED","QUEUED","Backbone","defaults","undefined","urlRun","url","this","get","length","urlRemove","report","urlUpdate","has","Error","urlExisting","urlParameters","refresh","urlStatus","urlPageStatus","pageIndex","initialize","attrs","options","on","set","replace","run","type","dataType","contentType","headers","processData","data","JSON","stringify","toJSON","status","pageStatus","update","cancel","bAsync","value","reportStatuses","asyncCancel","applyParameters","reportParameter","remove","removeExecution","request","toolbarButtonModule","actionMap","jQuery","evt","prop","substring","toUpperCase","isFirefox","each","index","li","css","el","execFunction","className","indexOf","id","getAsFunction","executableFunction","stopPropagation","buttonManager","originalEvent","UP","DOWN","OVER","DISABLED","PRESSED","CONTENT_PREFIX","MenuClass","TOOLBAR_MENU_CLASS","ACTION_MODEL_TAG","CAPSULE_PATTERN","showButtonMenu","event","object","context","attr","model","actionModel","setActionModel","newActionModel","isToolBarButton","button","hasClass","enable","disable","setButtonState","ControlsBase","INPUT_CONTROLS_FORM","INPUT_CONTROLS_CONTAINER","INPUT_CONTROLS_DIALOG","SAVE_REPORT_OPTIONS_DIALOG","REPORT_OPTIONS_SELECTOR","TOOLBAR_CONTROLS_BUTTON","DEFAULT_OPTION_TEXT","KEY_DOWN_TIMEOUT","NULL_SUBSTITUTION_VALUE","NULL_SUBSTITUTION_LABEL","NOTHING_SUBSTITUTION_VALUE","_BUTTON_OK","_BUTTON_SAVE","_BUTTON_REMOVE","_BUTTON_APPLY","_BUTTON_CANCEL","TEMP_REPORT_CONTAINER","WRAPPER_ERROR_FLAG_PREFIX_SELECTOR","WRAPPERS_ERRORS_DIV","EVAL_SCRIPT_ELEMENT_NAME","CONTROL_OPTIONS_TEXT","CALENDAR_ICON_SPAN","_messages","getMessage","messageId","message","Template","evaluate","setControlError","errorDiv","error","parent","addClass","layoutModule","nextSiblings","removeClass","setControlsErrors","errors","errorDivs","offset","div","pair","i","element","clientHeight","scrollTop","$break","buildParams","params","paramsString","_","and","uri","paramValue","paramName","encodeURIComponent","buildSelectedDataUri","selectedData","extraParams","ControlDialog","buttonActions","it","_dom","empty","disabled","action","addMethod","e","pattern","matchAny","preventDefault","dialogs","OptionsDialog","input","find","overwrite","_dialogClickHandler","bindAsEventListener","observe","stopObserving","setValue","hideWarning","text","warning","show","hide","JRS","isIE","navigator","userAgent","toLowerCase","createTemplateFunction","template","uuid","description","Base","extend","protoProps","staticProps","child","constructor","apply","arguments","Surrogate","prototype","__super__","TemplateEngine","render","templateText","STD_PLACEHOLDERS","result","String","val","regExp","RegExp","renderUrl","encoded","encodeURI","getTemplateText","templateId","html","createTemplate","createTemplateSection","section","concreteSectionRegexpPattern","regexp","match","Utils","LOADING_DIALOG_DELAY","INPUT_CONTROLS_COMPONENT_ID","isElementInDom","elem","nextSibling","parentNode","nodeType","setInnerHtml","display","style","removeChild","tagName","fragment","document","createDocumentFragment","option","createElement","isUndefined","label","selected","setAttribute","appendChild","insertBefore","styleContent","getAttribute","removeAttribute","wait","delay","Deferred","dfr","setTimeout","resolve","showLoadingDialogOn","deferred","modal","then","bind","state","popup","showShared","ajax","focus","owner","when","always","ownerId","window","viewer","loading","loaded","hideShared","createTimer","timer","done","startTime","diff","Date","getTime","console","log","start","stop","listen","listeners","eventHandler","eventName","ignore","handler","off","Controls","ReportOptions","Dialog","exitDialogTemplate","resizable","content","bodyText","buttons","closeLabel","i18n","primary","dataName","addCssClasses","title","setTitle","$el","minHeight","outerHeight","width","outerWidth","NAVIGATE_BACK","exitDialogBox","isBack","navBackFn","isReportProcessing","previousState","hasReport","isExportRunning","isReportRunning","exitDialog","ExitDialog","onCloseWithoutSaveButtonClick","closeExitDialog","open","destroyInstanceOnNavigation","hideExitDialog","exitBtn","$","backBtn","btn","blur","navigateBack","navigateToLocation","navigationItem","getLocation","history","location","href","isProVersion","setLocation","destination","sessionStorage","setItem","getItem","navBackCb","Report","_reportInstance","destroy","exports","dashboardViewFrame","_scroll","pageActions","viewReportForm","pageTimestamp","checkPageUpdatedTimeoutId","emptyReport","reportForceControls","hasInputControls","reportControlsLayout","refreshReportCanceled","reportParameterValues","inputControlValuesFromRequest","allRequestParameters","requestedInputParameters","parametersWithoutDefaultValues","isLoaded","hasError","hasInvisibleICValidationErrors","reportViewerTabsMaxCount","reportViewerTabsLabelsMaxLength","EXPORT_ACTION_FORM","TOOLBAR_SUBMENU","PAGINATION_PAGE_FIRST","PAGINATION_PAGE_PREV","PAGINATION_PAGE_CURRENT","PAGINATION_PAGE_NEXT","PAGINATION_PAGE_LAST","PAGINATION_PAGE_TOTAL","DATA_TIMESTAMP_SPAN","DATA_REFRESH_BUTTON","ASYNC_CANCEL_BUTTON","REPORT_COMPONENT_ID","commonInit","ajaxLoading","self","click","_reportIsCanceled","cancelReportExecution","navigateToReportPage","page","silentUpdate","isAutomaticRefresh","goToPage","parseInt","reportStatus","pages","total","doNothing","reportExecutionKey","flowExecutionKeyOutput","flowExecutionKey","refreshReport","urlParams","rawReportParameters","exec","output","showAjaxDialog","_flowExecutionKey","_eventId","decorate","confirm","decorator","Object","toQueryString","finalReportParameters","showInvisibleICValidationMessages","refreshPage","freshData","loadReport","executionId","reportExecutionId","onReportCompleted","exportReport","body","cursor","cancelReport","goBack","getParametersFromRequest","getAllRequestParameters","canSaveReport","isReportReadOnly","confirmExit","confirmAndLeave","closeViewerOnExit","exitCallback","exit","hideAjaxDialog","saveDialogBox","SAVE_CONFIRMATION","DIALOG_ID","OK_BUTTON_ID","CANCEL_BUTTON_ID","IGNORE_BUTTON_ID","saveScheduleDialog","paramsMap","resourceType","confirmDialog","appendTo","saveDialogConfirmationBox","saveDialog","okButtonSelector","cancelButtonSelector","ignoreButtonSelector","scheduleDialogBox","save","cancelSave","ignoreSave","saveContent","scheduleBtn","stopImmediatePropagation","schedulerUtils","nothingToDisplay","cancelRefresh","confirmedExportCancel","cancelReportAsyncExecution","getValue","target","is","deleteReportExecution","getGoBackExecutionId","isDrillDownExecution","destroyReportInstance","reportRefreshed","fr","r","contents","isIPad","isSupportsTouch","TouchController","use2Fingers","showBorders","noInit3d","children","siblings","reportFrameHeight","height","reportFrameWidth","ic","touchController","reset","scrollWrapper","contentWidth","scrollbars","bm","m","parents","slice","removeAttr","getReportStatus","lastPageIndex","prev","centerElement","horz","vert","dataTimestampMessage","refreshNavigation","iicValidationState","iicValidationMessages","refreshExporters","refreshSave","refreshPagination","currentPageIndex","current","lastPage","lastPartialPage","$elem","stdnav","closest","refreshAsyncCancel","canceled","formAction","exportLoadingIndicator","elemenIDs","elementsState","elemsIDsArr","elemID","push","disabledState","getDisabledState","disableElements","link","prevStateArr","prevState","restoreState","exitDialogTextParams","firstText","secondText","canSave","getReportStackState","close","unbind","exitParams","confirmationExitDialogUtil","noConfirm","back","executionIdParam","alert","saveAs","undo","redo","undoAll","cancelAsync","search","includes","schedule","config","reporturi","scheduleDialog","reportExecutionModelUrlRemove","reportExecutionModelUrlRemoveMixin","ReportExecutionModel","zIndex","position","_timer","clearTimeout"],"mappings":"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","file":"_chunks/chunk.4054.js","sourcesContent":["/*\n * Copyright (C) 2005 - 2022 TIBCO Software Inc. All rights reserved. Confidentiality & Proprietary.\n * Licensed pursuant to commercial TIBCO End User License Agreement.\n */\n\nexport default {\n    EXECUTION: 'execution',\n    READY: 'ready',\n    EMPTY: 'empty',\n    CANCELLED: 'cancelled',\n    FAILED: 'failed',\n    QUEUED: 'queued'\n};","/*\n * Copyright (C) 2005 - 2022 TIBCO Software Inc. All rights reserved. Confidentiality & Proprietary.\n * Licensed pursuant to commercial TIBCO End User License Agreement.\n */\n\nimport Backbone from 'backbone';\nimport reportStatuses from '../enum/reportStatuses';\nimport request from 'js-sdk/src/common/transport/request';\nvar ATTACHMENT_PREFIX_PATTERN = '{contextPath}/rest_v2/reportExecutions/{reportExecutionId}/exports/{exportExecutionId}/attachments/';\nexport default Backbone.Model.extend({\n    defaults: function () {\n        return {\n            'reportUnitUri': undefined,\n            'async': true,\n            //TODO: remove 'allowInlineScripts' after merging with report executor extention\n            'allowInlineScripts': false,\n            'markupType': 'embeddable',\n            'outputFormat': undefined,\n            'interactive': true,\n            'freshData': false,\n            'saveDataSnapshot': false,\n            'transformerKey': null,\n            'ignorePagination': false,\n            'reportContainerWidth': null,\n            'pages': 1,\n            'anchor': undefined,\n            'attachmentsPrefix': undefined,\n            'baseUrl': undefined,\n            'parameters': undefined\n        };\n    },\n    urlRun: function () {\n        var url = this.get('baseUrl');\n        if ((url || url === '') && url[url.length - 1] !== '/') {\n            url += '/';\n        }\n        url += 'rest_v2/reportExecutions';\n        return url;\n    },\n    urlRemove: function () {\n        return this.urlRun() + '/' + this.report.get('requestId');\n    },\n    urlUpdate: function () {\n        if (!this.report.has('requestId')) {\n            throw new Error('You must execute report before requesting it\\'s execution details or status.');\n        }\n        return this.urlRun() + '/' + this.report.get('requestId');\n    },\n    urlExisting: function() {\n        if (!this.report.has(\"executionId\")) {\n            throw new Error(\"No execution ID to work with!\");\n        }\n        return this.urlRun() + \"/\" + this.report.get(\"executionId\");\n    },\n    urlParameters: function (refresh) {\n        return this.urlUpdate() + '/parameters?freshData=' + !!refresh;\n    },\n    urlStatus: function () {\n        return this.urlUpdate() + '/status';\n    },\n    urlPageStatus: function(pageIndex) {\n        return this.urlUpdate() + \"/pages/\" + pageIndex + \"/status\";\n    },\n    initialize: function (attrs, options) {\n        options || (options = {});\n        this.report = options.report;\n        this.on('change:baseUrl', function () {\n            this.set('attachmentsPrefix', ATTACHMENT_PREFIX_PATTERN.replace('{contextPath}', this.get('baseUrl')));\n        }, this);\n    },\n    run: function () {\n        if (!this.report.has(\"executionId\")) {\n            return Backbone.ajax({\n                url: this.urlRun(),\n                type: 'POST',\n                processData: false,\n                dataType: 'json',\n                contentType: 'application/json',\n                headers: {\n                    'Accept': 'application/json'\n                },\n                data: JSON.stringify(this.toJSON())\n            });\n        } else {\n            return Backbone.ajax({\n                url: this.urlExisting(),\n                type: \"GET\",\n                dataType: \"json\",\n                contentType: \"application/json\",\n                headers: {\n                    \"Accept\": \"application/json\"\n                }\n            });\n        }\n    },\n    status: function () {\n        return Backbone.ajax({\n            type: 'GET',\n            url: this.urlStatus(),\n            dataType: 'json',\n            contentType: 'application/json',\n            headers: {\n                'Accept': 'application/status+json'\n            }\n        });\n    },\n    pageStatus: function(pageIndex) {\n        return Backbone.ajax({\n            type: \"GET\",\n            url: this.urlPageStatus(pageIndex),\n            dataType: \"json\",\n            contentType: \"application/json\",\n            headers: {\n                \"Accept\": \"application/json\"\n            }\n        });\n    },\n    update: function () {\n        return Backbone.ajax({\n            url: this.urlUpdate(),\n            type: 'GET',\n            dataType: 'json',\n            contentType: 'application/json',\n            headers: {\n                'Accept': 'application/json'\n            }\n        });\n    },\n    cancel: function (bAsync) {\n        return Backbone.ajax({\n            url: this.urlStatus(),\n            type: 'PUT',\n            dataType: 'json',\n            contentType: 'application/json',\n            headers: {\n                'Accept': 'application/json'\n            },\n            data: JSON.stringify({\n                value: reportStatuses.CANCELLED,\n                asyncCancel: !!bAsync\n            })\n        });\n    },\n    applyParameters: function (refresh) {\n        return Backbone.ajax({\n            url: this.urlParameters(refresh),\n            type: 'POST',\n            dataType: 'json',\n            contentType: 'application/json',\n            headers: {\n                'Accept': 'application/json'\n            },\n            data: JSON.stringify(this.has('parameters') ? this.get('parameters').reportParameter : [])\n        });\n    },\n    remove: function() {\n        return this.removeExecution();\n    },\n\n    removeExecution: function() {\n        return request({\n            url: this.urlRemove(),\n            type: 'DELETE'\n        });\n    }\n});","/*\n * Copyright (C) 2005 - 2022 TIBCO Software Inc. All rights reserved.\n * http://www.jaspersoft.com.\n *\n * Unless you have purchased a commercial license agreement from Jaspersoft,\n * the following license terms apply:\n *\n * This program is free software: you can redistribute it and/or modify\n * it under the terms of the GNU Affero General Public License as\n * published by the Free Software Foundation, either version 3 of the\n * License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the\n * GNU Affero General Public License for more details.\n *\n * You should have received a copy of the GNU Affero General Public License\n * along with this program. If not, see <http://www.gnu.org/licenses/>.\n */\n\n\n/**\n * @version: $Id$\n */\nimport jQuery from 'jquery';\nimport {isFirefox, getAsFunction} from \"../util/utils.common\";\nimport buttonManager from '../core/core.events.bis';\nimport toolbarButtonModule from './components.toolbarButtons';\n\ntoolbarButtonModule.initialize = function(actionMap){\n    toolbarButtonModule.actionMap = actionMap;\n    jQuery('.toolbar').on('mouseup mouseover mouseout','button',function(evt){\n        if(!jQuery(this).prop('disabled'))toolbarButtonModule['mouse' + evt.type.substring(5,6).toUpperCase() + evt.type.substring(6) + 'Handler'](evt,this);\n    });\n\n    if (isFirefox()) { // workaround for Bug 26223\n        jQuery(\".toolbar li\").each(function(index,li){\n            jQuery(li).css(\"padding\", \"0 2px\");\n        });\n    }\n};\n\ntoolbarButtonModule.mouseUpHandler = function(evt,el){\n    /*\n    if (element.hasClass(toolbarButtonModule.CAPSULE_PATTERN)) {\n        var elementId = element.attr(\"id\");\n        var execFunction = toolbarButtonModule.actionMap[elementId];\n        if (execFunction) {\n            var executableFunction = getAsFunction(execFunction);\n            executableFunction(evt);\n            evt.stopPropagation();\n        }\n    }\n    */\n    var execFunction = el.className.indexOf('capsule') >= 0 ? toolbarButtonModule.actionMap[el.id] : null;\n    if (execFunction) {\n        var executableFunction = getAsFunction(execFunction);\n        executableFunction(evt);\n        evt.stopPropagation();\n    }\n};\n\ntoolbarButtonModule.mouseOverHandler = function(evt,el){\n    /*\n    if (element.hasClass(toolbarButtonModule.CAPSULE_PATTERN)) {\n        if (element.hasClass(\"mutton\") && !buttonManager.isDisabled(element)) {\n            toolbarButtonModule.showButtonMenu(evt, element);\n        }\n    }\n    */\n    if(el.className.indexOf('capsule') >= 0 && el.className.indexOf('mutton') >= 0 && !buttonManager.isDisabled(el)){\n        toolbarButtonModule.showButtonMenu(evt.originalEvent,el);\n    }\n};\n\ntoolbarButtonModule.mouseOutHandler = function(evt,el){};\n\nexport default toolbarButtonModule;\n\n\n\n\n","/*\n * Copyright (C) 2005 - 2022 TIBCO Software Inc. All rights reserved.\n * http://www.jaspersoft.com.\n *\n * Unless you have purchased a commercial license agreement from Jaspersoft,\n * the following license terms apply:\n *\n * This program is free software: you can redistribute it and/or modify\n * it under the terms of the GNU Affero General Public License as\n * published by the Free Software Foundation, either version 3 of the\n * License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the\n * GNU Affero General Public License for more details.\n *\n * You should have received a copy of the GNU Affero General Public License\n * along with this program. If not, see <http://www.gnu.org/licenses/>.\n */\n\n\n/**\n * @version: $Id$\n */\n\nimport jQuery from 'jquery';\nimport actionModel from '../actionModel/actionModel.modelGenerator';\nimport buttonManager from '../core/core.events.bis';\n\n////////////////////////////////////////////////\n// Generic toolbar button utils\n////////////////////////////////////////////////\n\nvar toolbarButtonModule = {\n\n    UP : \"up\",\n    DOWN : \"down\",\n    OVER : \"over\",\n    DISABLED : \"disabled\",\n    PRESSED : \"pressed\",\n    CONTENT_PREFIX : \"toolbar_\", //action model\n    MenuClass : \"menu vertical dropDown\",\n    TOOLBAR_MENU_CLASS : \"menu vertical dropDown fitable\",\n    ACTION_MODEL_TAG : \"adhocActionModel\",\n    CAPSULE_PATTERN : \"capsule\",\n\n    /**\n     * Used by all toolbar components to show menu\n     * @param event\n     * @param object object we want the menu for\n     */\n    showButtonMenu : function(event, object){\n        object = jQuery(object);\n        var context = this.CONTENT_PREFIX + object.attr(\"id\"),\n            model = this.ACTION_MODEL_TAG == 'adhocActionModel' ? this.actionModel : this.ACTION_MODEL_TAG;\n\n        actionModel.showDropDownMenu(event, object, context, this.TOOLBAR_MENU_CLASS, model);\n    },\n\n    setActionModel: function(newActionModel){\n        this.actionModel = newActionModel;\n    },\n\n    /**\n     * Test to see if the button clicked is a toolbar type\n     * @param button\n     */\n    isToolBarButton : function(button){\n        if (button){\n            return (jQuery(button).hasClass(\"capsule\"));\n        } else{\n            return false;\n        }\n\n    },\n\n    /**\n     * Used to enable toolbar button\n     * @param button\n     * @param enable\n     */\n    enable : function(button, enable){\n        buttonManager.enable(button);\n    },\n\n    /**\n     * Used to disable toolbar button\n     * @param button\n     */\n    disable : function(button){\n        buttonManager.disable(button);\n    },\n\n    /**\n     * Used to enable or disable button based on adhoc state variables\n     * @param button\n     * @param enable\n     */\n    setButtonState : function(button, enable){\n        if(enable){\n            this.enable(button);\n        }else{\n            this.disable(button);\n        }\n    }\n};\n\nexport default toolbarButtonModule;\n\n\n\n","/*\n * Copyright (C) 2005 - 2022 TIBCO Software Inc. All rights reserved.\n * http://www.jaspersoft.com.\n *\n * Unless you have purchased a commercial license agreement from Jaspersoft,\n * the following license terms apply:\n *\n * This program is free software: you can redistribute it and/or modify\n * it under the terms of the GNU Affero General Public License as\n * published by the Free Software Foundation, either version 3 of the\n * License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the\n * GNU Affero General Public License for more details.\n *\n * You should have received a copy of the GNU Affero General Public License\n * along with this program. If not, see <http://www.gnu.org/licenses/>.\n */\n/**\n * @version: $Id$\n */\nimport {Template, $break} from 'prototype';\nimport layoutModule from '../core/core.layout';\nimport {matchAny} from \"../util/utils.common\";\nimport dialogs from '../components/components.dialogs';\nimport jQuery from 'jquery';\nimport _ from 'underscore';\n\nvar ControlsBase = {\n    INPUT_CONTROLS_FORM: 'inputControlsForm',\n    INPUT_CONTROLS_CONTAINER: 'inputControlsContainer',\n    INPUT_CONTROLS_DIALOG: 'inputControls',\n    SAVE_REPORT_OPTIONS_DIALOG: 'saveValues',\n    REPORT_OPTIONS_SELECTOR: 'savedValues',\n    TOOLBAR_CONTROLS_BUTTON: 'ICDialog',\n    DEFAULT_OPTION_TEXT: 'Options',\n    KEY_DOWN_TIMEOUT: 800,\n    // These constants are set from server\n    NULL_SUBSTITUTION_VALUE: null,\n    NULL_SUBSTITUTION_LABEL: null,\n    NOTHING_SUBSTITUTION_VALUE: null,\n    _BUTTON_OK: 'ok',\n    _BUTTON_SAVE: 'save',\n    _BUTTON_REMOVE: 'remove',\n    _BUTTON_APPLY: 'apply',\n    _BUTTON_CANCEL: 'cancel',\n    TEMP_REPORT_CONTAINER: 'tempReportContainer',\n    WRAPPER_ERROR_FLAG_PREFIX_SELECTOR: 'div[id^=error_]',\n    WRAPPERS_ERRORS_DIV: 'wrappersErrors',\n    EVAL_SCRIPT_ELEMENT_NAME: '_evalScript',\n    CONTROL_OPTIONS_TEXT:\"Saved Values:\",\n    // Used to properly position icon cross-browser\n    CALENDAR_ICON_SPAN: '<span class=\"button picker calTriggerWrapper\" ></span>',\n    _messages: {},\n    getMessage: function (messageId, object) {\n        var message = this._messages[messageId];\n        return message ? new Template(message).evaluate(object ? object : {}) : '';\n    },\n    setControlError: function (errorDiv, error) {\n        if (!errorDiv)\n            return;\n        errorDiv = jQuery('#' + errorDiv);\n        if (error[0]) {\n            errorDiv.parent().addClass(layoutModule.ERROR_CLASS);\n            errorDiv.nextSiblings()[0].update(error);\n        } else {\n            errorDiv.parent().removeClass(layoutModule.ERROR_CLASS);\n            errorDiv.nextSiblings()[0].update('');\n        }\n    },\n    setControlsErrors: function (errors) {\n        var errorDivs = jQuery(ControlsBase.WRAPPER_ERROR_FLAG_PREFIX_SELECTOR);\n        var index = 0;\n        var offset = -1;\n        errorDivs.each(function (div) {\n            var error = false;\n            errors && errors.each(function (pair) {\n                if (div.id.indexOf(pair[0]) > -1) {\n                    ControlsBase.setControlError(div, pair[1]);\n                    if (offset < 0) {\n                        jQuery('#inputControlsForm .leaf').each(function (i, element) {\n                            if (i < index)\n                                offset += element.clientHeight;\n                        });\n                        jQuery('.groupBox .content .body')[0].scrollTop = offset;\n                    }\n                    error = true;\n                    throw $break;\n                } else\n                    index++;\n            });\n            if (!error) {\n                ControlsBase.setControlError(div, '');\n            }\n        });\n    },\n    /*\n        TODO: remove after Emerald2 release.\n     */\n    /*\n    evalScripts: function() {\n        var elements = document.getElementsByName(ControlsBase.EVAL_SCRIPT_ELEMENT_NAME);\n        for (var i = 0; i < elements.length; i++) {\n            window.eval(elements[i].value);\n        }\n\n        ControlsBase.removeEvalScripts(elements);\n    },\n\n    removeEvalScripts: function(scriptElements) {\n        var elements = scriptElements ? scriptElements : document.getElementsByName(ControlsBase.EVAL_SCRIPT_ELEMENT_NAME);\n\n        // Remove evaluated elements so they newer will be evaluated twice.\n        $A(elements).clone().each(function(elem) {\n            $(elem).remove();\n        })\n    },\n    */\n    // params <string, string || array<string>>\n    buildParams: function (params) {\n        var paramsString = '';\n        if (_.isObject(params) && !_.isEmpty(params)) {\n            var and = function (uri) {\n                if (uri.length > 0 && uri[uri.length - 1] != '&') {\n                    uri += '&';\n                }\n                return uri;\n            };\n            _.each(params, function (paramValue, paramName) {\n                paramsString = and(paramsString);\n                if (_.isArray(paramValue)) {\n                    _.each(paramValue, function (value) {\n                        paramsString = and(paramsString);\n                        paramsString += paramName + '=' + encodeURIComponent(value);\n                    });\n                } else {\n                    paramsString += paramName + '=' + encodeURIComponent(paramValue);\n                }\n            });\n        }\n        return paramsString;\n    },\n    /**\n     * Used for creating post data to replace old form functionality\n     * @param selectedData Selected values of input controls,\n     * if null or undefined, empty string will be returned.\n     * @param extraParams Extra params in the same format as selectedData,\n     * this parameter is optional.\n     */\n    buildSelectedDataUri: function (selectedData, extraParams) {\n        var params = ControlsBase.buildParams(selectedData);\n        if (_.isObject(extraParams) && !_.isEmpty(extraParams)) {\n            var extraParamsString = ControlsBase.buildParams(extraParams);\n            return params + '&' + extraParamsString;\n        } else {\n            return params;\n        }\n    }\n};    //////////////////////////\n//  Input Controls dialog\n//////////////////////////\n//////////////////////////\n//  Input Controls dialog\n//////////////////////////\nvar ControlDialog = function (buttonActions) {\n    var it = this;\n    this._dom = jQuery('#' + ControlsBase.INPUT_CONTROLS_DIALOG)[0];\n    this.buttonActions = buttonActions;    //    if (isIPad()) {\n    //         var el = document.getElementById(ControlsBase.INPUT_CONTROLS_CONTAINER).parentNode;\n    //         new TouchController(el, el.parentNode);\n    //    }\n    //    if (isIPad()) {\n    //         var el = document.getElementById(ControlsBase.INPUT_CONTROLS_CONTAINER).parentNode;\n    //         new TouchController(el, el.parentNode);\n    //    }\n    jQuery('#' + ControlsBase.INPUT_CONTROLS_DIALOG).on('mouseup touchend', 'button', function (evt) {\n        if (this.id && !this.id.empty() && !this.disabled) {\n            var action = it.buttonActions['button#' + this.id];\n            action && action();\n        }\n    });\n};    // observe buttons\n// observe buttons\nControlDialog.addMethod('_dialogClickHandler', function (e) {\n    var element = e.element();    // observe buttons\n    // observe buttons\n    for (var pattern in this.buttonActions) {\n        if (matchAny(element, [pattern], true)) {\n            this.buttonActions[pattern]();\n            e.preventDefault();\n            e.stopPropagation();\n            return;\n        }\n    }\n});\nControlDialog.addMethod('show', function () {\n    dialogs.popup.show(this._dom);\n});\nControlDialog.addMethod('hide', function () {\n    dialogs.popup.hide(this._dom);\n});    ///////////////////////////////\n//  Save Report Options dialog\n///////////////////////////////\n///////////////////////////////\n//  Save Report Options dialog\n///////////////////////////////\nvar OptionsDialog = function (buttonActions) {\n    this._dom = jQuery('#' + ControlsBase.SAVE_REPORT_OPTIONS_DIALOG)[0];\n    this.input = jQuery(this._dom).find('input#savedValuesName')[0];\n    this.overwrite = false;\n    this.buttonActions = buttonActions;\n    this._dialogClickHandler = this._dialogClickHandler.bindAsEventListener(this);\n    this._dom.observe('click', this._dialogClickHandler);\n};\nOptionsDialog.addMethod('remove', function () {\n    this._dom.stopObserving('click', this._dialogClickHandler);\n});    // observe buttons\n// observe buttons\nOptionsDialog.addMethod('_dialogClickHandler', function (e) {\n    var element = e.element();    // observe buttons\n    // observe buttons\n    for (var pattern in this.buttonActions) {\n        if (matchAny(element, [pattern], true)) {\n            this.buttonActions[pattern]();\n            e.preventDefault();\n            e.stopPropagation();\n            return;\n        }\n    }\n});\nOptionsDialog.addMethod('show', function () {\n    this.input.setValue(ControlsBase.DEFAULT_OPTION_TEXT);\n    dialogs.popup.show(this._dom);\n});\nOptionsDialog.addMethod('hide', function () {\n    dialogs.popup.hide(this._dom);\n    this.hideWarning();\n});\nOptionsDialog.addMethod('showWarning', function (text) {\n    var warning = jQuery('#' + ControlsBase.SAVE_REPORT_OPTIONS_DIALOG).find('.warning');\n    if (text) {\n        warning.text(text);\n    }\n    warning.show();\n});\nOptionsDialog.addMethod('hideWarning', function () {\n    var warning = jQuery('#' + ControlsBase.SAVE_REPORT_OPTIONS_DIALOG).find('.warning');\n    warning.text('');\n    warning.hide();\n});\n\nexport {ControlsBase, OptionsDialog, ControlDialog};\n","/*\n * Copyright (C) 2005 - 2022 TIBCO Software Inc. All rights reserved.\n * http://www.jaspersoft.com.\n *\n * Unless you have purchased a commercial license agreement from Jaspersoft,\n * the following license terms apply:\n *\n * This program is free software: you can redistribute it and/or modify\n * it under the terms of the GNU Affero General Public License as\n * published by the Free Software Foundation, either version 3 of the\n * License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the\n * GNU Affero General Public License for more details.\n *\n * You should have received a copy of the GNU Affero General Public License\n * along with this program. If not, see <http://www.gnu.org/licenses/>.\n */\n/**\n * @author: afomin, inesterenko\n * @version: $Id$\n */\n\nimport {JRS} from \"../namespace/namespace\";\nimport {ajax} from \"../core/core.ajax\";\nimport _ from 'underscore';\nimport dialogs from '../components/components.dialogs';\nimport jQuery from 'jquery';\n\nimport './controls.logging';\n\nJRS.Controls = (function(jQuery, _, dialogs){\n\n    //module:\n    //\n    //  controls.core\n    //\n    //summary:\n    //\n    //  Define base objects types to work with input controls\n    //\n    //main types:\n    //\n    // Base             - provide inheritance,\n    // TemplateEngine   - load templates, can get template's sections\n    // Utils            - provide common functions\n    //\n    //dependencies:\n    //\n    //  jQuery          - v1.7.1\n    //  _,              - underscore.js 1.3.1\n    //  Mustache       - template engine\n    //  dialogs        - components.dialogs module\n    var isIE = navigator.userAgent.toLowerCase().indexOf(\"msie\") > -1;\n\n\n    function createTemplateFunction(template){\n        return function (data) {\n            return _.template(template)(_.defaults({\n                data: undefined,\n                uuid: undefined,\n                message: undefined,\n                description: undefined\n            }, data))\n        }\n    }\n\n    return {\n        Base: _.extend(function () {\n        }, {\n            // Helper function to correctly set up the prototype chain, for subclasses.\n            // Similar to `goog.inherits`, but uses a hash of prototype properties and\n            // class properties to be extended.\n            extend: function (protoProps, staticProps) {\n                var parent = this;\n                var child;\n\n                // The constructor function for the new subclass is either defined by you\n                // (the \"constructor\" property in your `extend` definition), or defaulted\n                // by us to simply call the parent's constructor.\n                if (protoProps && _.has(protoProps, 'constructor')) {\n                    child = protoProps.constructor;\n                } else {\n                    child = function () {\n                        return parent.apply(this, arguments);\n                    };\n                }    // Add static properties to the constructor function, if supplied.\n                // Add static properties to the constructor function, if supplied.\n                _.extend(child, parent, staticProps);    // Set the prototype chain to inherit from `parent`, without calling\n                // `parent`'s constructor function.\n                // Set the prototype chain to inherit from `parent`, without calling\n                // `parent`'s constructor function.\n                var Surrogate = function () {\n                    this.constructor = child;\n                };\n                Surrogate.prototype = parent.prototype;\n                child.prototype = new Surrogate();    // Add prototype properties (instance properties) to the subclass,\n                // if supplied.\n                // Add prototype properties (instance properties) to the subclass,\n                // if supplied.\n                if (protoProps)\n                    _.extend(child.prototype, protoProps);    // Set a convenience property in case the parent's prototype is needed\n                // later.\n                // Set a convenience property in case the parent's prototype is needed\n                // later.\n                child.__super__ = parent.prototype;\n                return child;\n            }\n        }),\n        // Provide functionality to get templates\n        TemplateEngine: {\n            // Populate template with data\n            render: function (templateText, model, type) {\n                if (!type) {\n                    //Mustache by default\n                    return createTemplateFunction(templateText)(model);\n                }else if(type == this.STD_PLACEHOLDERS){\n                    var result = String(templateText);\n                    _.each(model, function (val, index) {\n                        var regExp = new RegExp('\\\\{' + index + '\\\\}');\n                        result = result.replace(regExp, val);\n                    });\n                    return result;\n                }\n            },\n            renderUrl:function(templateText, model, encoded){\n                var url = _.template(templateText)(model);\n                if(isIE && !encoded){\n                    url = encodeURI(url);\n                }\n                return url;\n            },\n            // Return template's text\n            getTemplateText: function (templateId) {\n                var scriptTag = jQuery('#' + templateId);\n                return scriptTag.html();\n            },\n            // Return template's function for given id\n            createTemplate: function (templateId) {\n                var scriptTag = jQuery('#' + templateId);\n                var templateText = scriptTag.html();\n                if (templateText && templateText.length > 0) {\n                    return createTemplateFunction(templateText)\n                }\n            },\n            // Cut template's text chunk and wrap with a function\n            createTemplateSection:function (section, templateId) {\n                var regexpTemplate = '<!--#val-->(\\\\s|\\\\S)*<!--/val-->';\n                var concreteSectionRegexpPattern = regexpTemplate.replace(/val/g, section);\n                var regexp = new RegExp(concreteSectionRegexpPattern, \"g\");\n                var templateText = this.getTemplateText(templateId);\n                var templateSectionText = templateText.match(regexp)[0];\n                return createTemplateFunction(templateSectionText);\n            },\n            STD_PLACEHOLDERS: 'std_placeholder'\n        },\n        Utils: {\n            LOADING_DIALOG_DELAY: 800,\n            INPUT_CONTROLS_COMPONENT_ID: 'input-controls',\n            //check presents of element in DOM\n            isElementInDom: function (elem) {\n                var nextSibling = elem.nextSibling;\n                var parent = elem.parentNode && elem.parentNode.nodeType !== 11;\n                return nextSibling || parent;\n            },\n            // Optimized inserting of big content to DOM\n            setInnerHtml: function (el, template, data) {\n                var nextSibling, parent, display;\n                if (this.isElementInDom(el)) {\n                    nextSibling = el.nextSibling;\n                    parent = el.parentNode;\n                    display = el.style.display;    //turn off css reflows on it element during update\n                    //turn off css reflows on it element during update\n                    el.style.display = 'none';    //remove from the dom, it also reduce reflows on this element\n                    //remove from the dom, it also reduce reflows on this element\n                    parent.removeChild(el);\n                }\n                jQuery(el).html('');\n                if (isIE && el.tagName == 'SELECT') {\n                    //workaround for bug in IE, select element and innerHTML functionality\n                    //TODO: rewrite it, because it hardcoded for one special case it doesn't use template\n                    var fragment = document.createDocumentFragment();\n                    _.each(data.data, function (data) {\n                        var option = document.createElement('OPTION');    //hardcoded workaround for report options\n                        //hardcoded workaround for report options\n                        option.value = !_.isUndefined(data.value) ? data.value : data.id;\n                        jQuery(option).html(data.label);\n                        if (data.selected) {\n                            option.setAttribute('selected', 'selected');\n                        }\n                        fragment.appendChild(option);\n                    });\n                    el.appendChild(fragment);\n                } else {\n                    jQuery(el).html(template(data));\n                }\n                if (nextSibling) {\n                    parent.insertBefore(el, nextSibling);\n                } else {\n                    parent && parent.appendChild(el);\n                }\n                el.style.display = display;\n                if (isIE && el.tagName == 'SELECT') {\n                    //workaround for IE8,9, where width of 'select' not updates, before user click on.\n                    //reset style to force browser's reflows for 'select' element\n                    var styleContent = el.getAttribute('style');\n                    el.removeAttribute('style');\n                    el.setAttribute('style', styleContent);\n                }\n            },\n            wait: function (delay) {\n                return jQuery.Deferred(function (dfr) {\n                    setTimeout(dfr.resolve, delay);\n                });\n            },\n            showLoadingDialogOn: function (deferred, delay, modal) {\n                this.wait(delay ? delay : this.LOADING_DIALOG_DELAY).then(_.bind(function () {\n                    if (deferred.state() == 'pending') {\n                        //Do not focus on loading dialog\n                        dialogs.popup.showShared(jQuery('#' + ajax.LOADING_ID)[0], modal, {\n                            focus: false,\n                            owner: this.INPUT_CONTROLS_COMPONENT_ID\n                        });\n                        jQuery.when(deferred).always(_.bind(function () {\n                            var ownerId = this.INPUT_CONTROLS_COMPONENT_ID;    //don't close loading dialog very fast it irritates user\n                            //don't close loading dialog very fast it irritates user\n                            this.wait(500).then(function () {\n                                if (window.viewer && window.viewer.loading) {\n                                    // wait until componentsRegistered event in viewer.js\n                                    window.viewer.loaded && dialogs.popup.hideShared(jQuery('#' + ajax.LOADING_ID)[0], ownerId);\n                                } else {\n                                    dialogs.popup.hideShared(jQuery('#' + ajax.LOADING_ID)[0], ownerId);\n                                }\n                            });\n                        }, this));\n                    }\n                }, this));\n            },\n            createTimer: function (message) {\n                var timer = new jQuery.Deferred();\n                timer.done(function (startTime) {\n                    var endTime = new Date().getTime();\n                    var diff = endTime - startTime;\n                    /*eslint-disable-next-line no-console*/\n                    console.log(message + ' took time: ' + diff + ' msec.');\n                });\n                return {\n                    start: function () {\n                        this.startTime = new Date().getTime();\n                        return this;\n                    },\n                    stop: function () {\n                        timer.resolve(this.startTime);\n                        return this;\n                    }\n                };\n            }\n        },\n        listen: function (listeners, context) {\n            _.each(listeners, function (eventHandler, eventName) {\n                jQuery(document).on(eventName, _.bind(eventHandler, this));\n            }, !context ? this : context);\n        },\n\n        ignore:function(eventName, handler){\n            jQuery(document).off(eventName, handler);\n        }\n    };\n\n})(\n    jQuery,\n    _,\n    dialogs\n);\n\nwindow.Controls = JRS.Controls;\n\nexport default JRS.Controls;\n","/*\n * Copyright (C) 2005 - 2022 TIBCO Software Inc. All rights reserved.\n * http://www.jaspersoft.com.\n *\n * Unless you have purchased a commercial license agreement from Jaspersoft,\n * the following license terms apply:\n *\n * This program is free software: you can redistribute it and/or modify\n * it under the terms of the GNU Affero General Public License as\n * published by the Free Software Foundation, either version 3 of the\n * License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the\n * GNU Affero General Public License for more details.\n *\n * You should have received a copy of the GNU Affero General Public License\n * along with this program. If not, see <http://www.gnu.org/licenses/>.\n */\n\nexport default function ReportOptions() {}","export default \"\\n<js-templateNonce></js-templateNonce>\\n<p class=\\\"jr-mText jr-uBottom-singlehalf jr \\\">{{- content?.firstText}}</p>\\n<p class=\\\"jr-mText jr\\\"> {{- content?.secondText}}</p>\\n\";","import Dialog from \"./Dialog\";\nimport _ from \"underscore\";\nimport i18n from '../../../i18n/CommonBundle.properties';\nimport exitDialogTemplate from './template/exitDialogTemplate.htm';\n\nexport default Dialog.extend({\n    constructor: function (options) {\n        this.exitDialogTemplate =_.template(exitDialogTemplate);\n        Dialog.prototype.constructor.call(this, {\n            resizable: false,\n            modal: true,\n            content: this.exitDialogTemplate({ content: options?.bodyText }),\n            buttons: [\n                {\n                    label: options?.closeLabel || i18n[\"dialog.exit.close.button\"],\n                    action: 'close',\n                    primary: true,\n                    dataName: 'buttonClose'\n                },\n                {\n                    label: i18n[\"dialog.exit.cancel.button\"],\n                    action: 'cancel',\n                    primary: false,\n                    dataName: 'buttonCancel'\n                }\n            ]\n        });\n        this.addCssClasses('exit-confirmation-dialog');\n        const title = options?.title || i18n[\"dialog.exit.title\"];\n        this.setTitle(title);\n        this.$el.css({ minHeight: this.$el.outerHeight() });\n        this.width = this.$el.outerWidth();\n    }\n});","/*\n * Copyright (C) 2005 - 2020 TIBCO Software Inc. All rights reserved.\n * http://www.jaspersoft.com.\n *\n * Unless you have purchased a commercial license agreement from Jaspersoft,\n * the following license terms apply:\n *\n * This program is free software: you can redistribute it and/or modify\n * it under the terms of the GNU Affero General Public License as\n * published by the Free Software Foundation, either version 3 of the\n * License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the\n * GNU Affero General Public License for more details.\n *\n * You should have received a copy of the GNU Affero General Public License\n * along with this program. If not, see <http://www.gnu.org/licenses/>.\n */\n\nimport $ from \"jquery\";\nimport ExitDialog from 'js-sdk/src/common/component/dialog/ExitDialog';\nimport _ from 'underscore';\nimport {isProVersion} from \"../../namespace/namespace\";\nimport Report from '../../reportViewer/report.view.runtime';\n\n\nconst NAVIGATE_BACK= {\n    LAST_ACCESSED_RESOURCE_PAGE: 'last_accessed_resource_page'\n};\nexport default {\n    exitDialogBox: function (options, isBack , navBackFn) {\n        const {previousState} = options;\n        let isReportProcessing;\n        if(window.viewer?.hasReport()){\n            isReportProcessing = window.viewer.isExportRunning() || window.viewer.isReportRunning();\n        }\n\n        this.exitDialog = new ExitDialog(options);\n\n        if (previousState ||  isReportProcessing) {\n            this.exitDialog.on('button:close', _.bind(this.onCloseWithoutSaveButtonClick, this, isBack , navBackFn));\n            this.exitDialog.on('button:cancel', _.bind(this.closeExitDialog, this, isBack));\n            this.exitDialog.open();\n        } else {\n            this.destroyInstanceOnNavigation(isBack, navBackFn)\n        }\n    },\n    hideExitDialog:function(isBack){\n        let exitBtn = $('#close'),\n            backBtn=$('#back');\n        let btn = isBack? backBtn : exitBtn;\n        btn.hasClass('over') && btn.removeClass('over');\n        btn.blur();\n        this.exitDialog.$el.css({ width: this.exitDialog.width });\n        this.exitDialog.remove();\n        $('#dialogDimmer').css('display','none')\n    },\n    navigateBack :function(isBack , navBackFn){\n        return isBack ? navBackFn(true) : this.navigateToLocation();\n    },\n    navigateToLocation: function () {\n        const navigationItem = this.getLocation();\n        if(history.length>1 && !!navigationItem){\n            location.href = navigationItem\n        }else{\n            document.location = `flow.html?_flowId=${isProVersion() ? 'homeFlow' : 'searchFlow'}`;\n        }\n    },\n    onCloseWithoutSaveButtonClick:function(isBack , navBackFn){\n        this.hideExitDialog(isBack);\n        this.destroyInstanceOnNavigation(isBack, navBackFn);\n    },\n    closeExitDialog:function(isBack){\n        this.hideExitDialog(isBack);\n    },\n    setLocation:function(destination){\n        sessionStorage.setItem(NAVIGATE_BACK.LAST_ACCESSED_RESOURCE_PAGE,destination);\n    },\n    getLocation:function(){\n        return sessionStorage.getItem(NAVIGATE_BACK.LAST_ACCESSED_RESOURCE_PAGE);\n    },\n    destroyInstanceOnNavigation:function(isBack , navBackFn){\n        if(window.viewer?.hasReport()){\n            const navBackCb = this.navigateBack.bind(this,isBack, navBackFn);\n            if(!isBack && !Report.isDrillDownExecution && history.length>1){\n                Report.deleteReportExecution(navBackCb);\n            }else{\n                window.viewer._reportInstance.destroy(()=>{},()=>{},this.navigateBack(isBack, navBackFn))\n            }\n        }else{\n            this.navigateBack(isBack, navBackFn)\n        }\n    }\n}","/*\n * Copyright (C) 2005 - 2022 TIBCO Software Inc. All rights reserved.\n * http://www.jaspersoft.com.\n *\n * Unless you have purchased a commercial license agreement from Jaspersoft,\n * the following license terms apply:\n *\n * This program is free software: you can redistribute it and/or modify\n * it under the terms of the GNU Affero General Public License as\n * published by the Free Software Foundation, either version 3 of the\n * License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the\n * GNU Affero General Public License for more details.\n *\n * You should have received a copy of the GNU Affero General Public License\n * along with this program. If not, see <http://www.gnu.org/licenses/>.\n */\n\n\n/**\n * @version: $Id$\n */\nimport {ajax} from '../core/core.ajax';\nimport layoutModule from '../core/core.layout';\nimport {doNothing} from '../util/utils.common';\nimport dialogs from '../components/components.dialogs';\nimport _ from 'underscore';\nimport {ControlsBase} from '../controls/controls.base';\nimport jQuery from 'jquery';\nimport {Template} from 'prototype';\n\n(function (exports) {\n\n    let dashboardViewFrame = window.dashboardViewFrame;\n\n    let Report = {\n        _messages: {},\n        _scroll: null,\n        pageActions: {},\n        viewReportForm: null,\n        pageIndex: 0,\n        pageTimestamp: null,\n        checkPageUpdatedTimeoutId: null,\n        emptyReport: true,\n        reportForceControls: false,\n        hasInputControls: false,\n        reportControlsLayout: null,\n        refreshReportCanceled: false,\n        reportParameterValues: null,\n        inputControlValuesFromRequest: null,\n        allRequestParameters: null,\n        requestedInputParameters: {},\n        parametersWithoutDefaultValues: null,\n        isLoaded: false,\n        hasError: false,\n        hasInvisibleICValidationErrors: false,\n        reportViewerTabsMaxCount: null,\n        reportViewerTabsLabelsMaxLength: null,\n\n        // ViewReport id's\n        EXPORT_ACTION_FORM: \"exportActionForm\",\n        TOOLBAR_SUBMENU: \"toolbarText\",\n        PAGINATION_PAGE_FIRST: \"page_first\",\n        PAGINATION_PAGE_PREV: \"page_prev\",\n        PAGINATION_PAGE_CURRENT: \"page_current\",\n        PAGINATION_PAGE_NEXT: \"page_next\",\n        PAGINATION_PAGE_LAST: \"page_last\",\n        PAGINATION_PAGE_TOTAL: \"page_total\",\n        DATA_TIMESTAMP_SPAN: \"dataTimestampMessage\",\n        DATA_REFRESH_BUTTON: \"dataRefreshButton\",\n        ASYNC_CANCEL_BUTTON: \"asyncCancel\",\n\n        REPORT_COMPONENT_ID: \"report\",\n\n        getMessage: function (messageId, object) {\n            var message = this._messages[messageId];\n            return message ? new Template(message).evaluate(object ? object : {}) : \"\";\n        },\n\n        /**\n         *  The common init function. Invoke it from page-specific initialize()\n         */\n        commonInit: function (options) {\n            var ajaxLoading = jQuery('#' + ajax.LOADING_ID),\n                self = this;\n            if (ajaxLoading.length > 0) {\n                ajaxLoading.addClass(layoutModule.CANCELLABLE_CLASS);\n                ajaxLoading.find(\"#cancel\").click(function () {\n                    if (!self._reportIsCanceled) {\n                        self._reportIsCanceled = true;\n                        Report.cancelReportExecution();\n                    }\n                });\n            }\n            /*\n                Used for embedding report viewer with no decoration in CE\n             */\n            if (document.location.href.indexOf(\"frame=0\") > 0) {\n                jQuery('#reportViewFrame > .content > .header').hide();\n                jQuery('#reportViewFrame').css('margin', 0);\n                jQuery('#innerPagination').css('margin', 'none');\n                jQuery('#reportViewFrame > .content > .body').css({'top': 0, 'margin-top': 0});\n            }\n        },\n\n        navigateToReportPage: function (page, silentUpdate, isAutomaticRefresh) {\n            window.viewer.goToPage(page);\n        },\n\n        goToPage: function (page) {\n            if (parseInt(page, 10) && parseInt(page, 10) > 0\n                && (window.viewer.reportStatus.pages.total == null || parseInt(page, 10) <= window.viewer.reportStatus.pages.total)) {\n                Report.navigateToReportPage(parseInt(page, 10));\n            } else {\n                doNothing();\n            }\n        },\n\n        /**\n         * Returns the updated flowExecutionKey after every report refresh\n         */\n        reportExecutionKey: function () {\n            if (Report.flowExecutionKeyOutput) {\n                return Report.flowExecutionKeyOutput;\n            } else if (window.dashboardViewFrame) {\n                return dashboardViewFrame.flowExecutionKey;\n            } else {\n                return Report.flowExecutionKey;\n            }\n        },\n\n        //////////////////////////////\n        // Communication with server\n        //////////////////////////////\n        /**\n         * The main API function to view or update the report on the page\n         * @param {Object} urlParams - an object literal optionally defining:\n         * @option {String} _flowExecutionKey (default value will be resolved by Report.reportExecutionKey())\n         * @option {String} _eventId (default is \"refreshReport\")\n         * @param {Object} options - an object literal optionally defining:\n         * @option {String} fillLocation - id indicating where in the DOM to dump the updated report (default is \"reportContainer\")\n         * @option {Array} callback - JS functions to evaluate after report update (default is Report.reportRefreshed())\n         * @option {String} fromLocation - id indicating which part of the ajax response to use (default is \"reportOutput\" implemented in DefaultJasperViewer)\n         */\n        refreshReport: function (urlParams, options, rawReportParameters) {\n            var result = /(\\?|&)output=([^&]*)/.exec(location.href);\n            var output = result && result.length === 3 ? result[2] : '';\n\n            this.showAjaxDialog();\n\n            urlParams = urlParams || {};\n\n            urlParams._flowExecutionKey = urlParams._flowExecutionKey ? urlParams._flowExecutionKey : Report.reportExecutionKey();\n            urlParams._eventId = urlParams._eventId ? urlParams._eventId : \"refreshReport\";\n            urlParams.decorate = \"no\";\n            urlParams.confirm = \"true\";\n            urlParams.decorator = \"empty\";\n            if (!urlParams.ajax) {\n                urlParams.ajax = \"true\";\n            }\n\n            let url = 'flow.html?' + Object.toQueryString(urlParams);\n\n            if (output === '' || output === 'html') {\n                let finalReportParameters = Report.hasInputControls ?\n                    rawReportParameters :\n                    Report.inputControlValuesFromRequest;\n\n                if (Report.hasInvisibleICValidationErrors) {\n                    Report.showInvisibleICValidationMessages();\n                    return jQuery.Deferred().resolve();\n                } else if (Report.isLoaded) {\n                    return window.viewer.refreshPage(1, finalReportParameters, urlParams.freshData);\n                } else {\n                    return window.viewer.loadReport({\n                        executionId: Report.reportExecutionId.length > 0 ? Report.reportExecutionId : null,\n                        params: finalReportParameters,\n                        onReportCompleted: _.once(function() {\n                            Report.isLoaded = true;\n                        })\n                    });\n                }\n            } else {\n                return Report.exportReport(output, url);\n            }\n        },\n\n        /**\n         *  Cancels the report execution on the server\n         */\n        cancelReportExecution: function () {\n            var self = this;\n\n            document.body.style.cursor = \"default\";\n            dialogs.popup.hideShared(jQuery('#' + ajax.LOADING_ID)[0], this.REPORT_COMPONENT_ID);\n\n            if (window.viewer.hasReport()) {\n                window.viewer.cancelReport()\n                    .always(function() {\n                        // If report was never loaded before - back to repository\n                        if (!Report.isLoaded) {\n                            self._reportIsCanceled = false;\n                            Report.goBack(true);\n                        }\n                    });\n            } else {\n                //there is no report instance to cancel\n                //the only thing we could do is to return back to repo\n                this._reportIsCanceled = false;\n                Report.goBack();\n            }\n\n            /*\n                TODO: remove after Emerald 2 release.\n             */\n            //var url = \"viewReportCancel.html?_flowExecutionKey=\" + Report.reportExecutionKey();\n            //ajaxNonReturningUpdate(url, {});\n        },\n\n        /**\n         * Get report parameters from request in case if JRS.Controls is not available.\n         */\n        getParametersFromRequest: function () {\n            return ControlsBase.buildParams(Report.getAllRequestParameters());\n        },\n\n        /**\n         * All request parameters get formed into JSONObject on server side,\n         * where key is a string and value is always array of strings even if there is single value.\n         */\n        getAllRequestParameters: function () {\n            return _.isObject(Report.allRequestParameters) ? Report.allRequestParameters : {};\n        },\n\n        /*\n            Used as test in actionModel\n         */\n        canSaveReport: function () {\n            return !Report.isReportReadOnly;\n        },\n\n        confirmExit: function () {\n            // empty in CE because there's no save; overridden in Pro\n            return true;\n        },\n\n        confirmAndLeave: function () {\n            return Report.confirmExit() ? Report.closeViewerOnExit : false;\n        },\n\n        closeViewerOnExit: function (exitCallback) {\n            window.viewer.exit().then(function() {\n                exitCallback();\n            });\n        },\n        /*\n            Convenience method to show dialog, called from viewer\n         */\n        showAjaxDialog: function() {\n            var ajaxLoading = jQuery('#' + ajax.LOADING_ID);\n\n            if (!ajaxLoading.hasClass(layoutModule.CANCELLABLE_CLASS)) {\n                ajaxLoading.addClass(layoutModule.CANCELLABLE_CLASS);\n            }\n\n            dialogs.popup.showShared(ajaxLoading[0], true, {owner: this.REPORT_COMPONENT_ID});\n        },\n        hideAjaxDialog: function() {\n            dialogs.popup.hideShared(jQuery('#' + ajax.LOADING_ID)[0], this.REPORT_COMPONENT_ID);\n        }\n    };\n\n    exports[\"Report\"] = Report;\n})(\n    window\n);\n\nexport default window.Report;\n","export default \"<div class=\\\"panel dialog overlay standardConfirm moveable centered_horz centered_vert\\\">\\n\\n    <js-templateNonce></js-templateNonce>\\n    <div class=\\\"content hasFooter \\\">\\n        <div class=\\\"header mover\\\">\\n            <h2 class=\\\"title\\\">\\n                Confirm\\n            </h2>\\n        </div>\\n\\n        <div class=\\\"body  \\\">\\n        </div>\\n\\n        <div class=\\\"footer \\\">\\n\\n            <button class=\\\"button action primary up ok\\\" name=\\\"buttonOK\\\">\\n                <span class=\\\"wrap\\\">OK</span>\\n                <span class=\\\"icon\\\"></span>\\n            </button>\\n            <button class=\\\"button action up ignore hidden\\\" name=\\\"buttonIgnore\\\">\\n                <span class=\\\"wrap\\\">Ignore</span>\\n                <span class=\\\"icon\\\"></span>\\n            </button>\\n            <button class=\\\"button action up cancel\\\" name=\\\"buttonCancel\\\">\\n                <span class=\\\"wrap\\\">Cancel</span>\\n                <span class=\\\"icon\\\"></span>\\n            </button>\\n        </div>\\n\\n    </div>\\n</div>\";","/*\n * Copyright (C) 2005 - 2022 TIBCO Software Inc. All rights reserved.\n * http://www.jaspersoft.com.\n *\n * Unless you have purchased a commercial license agreement from Jaspersoft,\n * the following license terms apply:\n *\n * This program is free software: you can redistribute it and/or modify\n * it under the terms of the GNU Affero General Public License as\n * published by the Free Software Foundation, either version 3 of the\n * License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the\n * GNU Affero General Public License for more details.\n *\n * You should have received a copy of the GNU Affero General Public License\n * along with this program. If not, see <http://www.gnu.org/licenses/>.\n */\n\nimport $ from \"jquery\";\nimport i18n from \"../../i18n/all.properties\";\nimport dialogs from \"../../components/components.dialogs\";\nimport schedulerUtils from '../util/schedulerUtils';\nimport standardConfirmTemplate from 'js-sdk/src/common/templates/standardConfirm.htm';\n\nexport default {\n    saveDialogBox: {\n        SAVE_CONFIRMATION: {\n            DIALOG_ID: 'saveConfirmation',\n            OK_BUTTON_ID: 'saveConfirmationOK',\n            CANCEL_BUTTON_ID: 'saveConfirmationCancel',\n            IGNORE_BUTTON_ID: 'saveConfirmationIgnore'\n        }\n    },\n    saveScheduleDialog: function (paramsMap) {\n        let text = paramsMap.resourceType === \"DashboardModelResource\" ? i18n[\"dashboard.schedule.overlay.save.content\"] : i18n[\"dashboard.schedule.overlay.save.content.report\"],\n            confirmDialog = $(standardConfirmTemplate);\n\n        confirmDialog.attr('id', this.saveDialogBox.SAVE_CONFIRMATION.DIALOG_ID);\n        confirmDialog.find('.title').text(i18n[\"dashboard.schedule.overlay.dialog\"]);\n        confirmDialog.find('.body').text(text);\n        confirmDialog.find('.button.action.up.cancel').attr('id', this.saveDialogBox.SAVE_CONFIRMATION.CANCEL_BUTTON_ID);\n        confirmDialog.find('.button.action.primary.up').attr('id', this.saveDialogBox.SAVE_CONFIRMATION.OK_BUTTON_ID);\n        confirmDialog.find('.button.action.up.ignore').attr('id', this.saveDialogBox.SAVE_CONFIRMATION.IGNORE_BUTTON_ID);\n        confirmDialog.find('.button.action.primary.up .wrap').text(i18n[\"dashboard.schedule.overlay.save\"]);\n        confirmDialog.find('.button.action.up.cancel .wrap').text(i18n[\"dashboard.schedule.overlay.cancel\"]);\n        confirmDialog.find('.button.action.up.ignore .wrap').text(i18n[\"dashboard.schedule.overlay.ignore\"]);\n        confirmDialog.appendTo($('#frame .content:eq(0)'));\n    },\n    saveDialogConfirmationBox: function () {\n        let saveDialog = $('#' + this.saveDialogBox.SAVE_CONFIRMATION.DIALOG_ID);\n        dialogs.popupConfirm.show(saveDialog[0], false, {\n            okButtonSelector: '#' + this.saveDialogBox.SAVE_CONFIRMATION.OK_BUTTON_ID,\n            cancelButtonSelector: '#' + this.saveDialogBox.SAVE_CONFIRMATION.CANCEL_BUTTON_ID,\n            ignoreButtonSelector: '#' + this.saveDialogBox.SAVE_CONFIRMATION.IGNORE_BUTTON_ID\n        }).done();\n    },\n    scheduleDialogBox: function(previousState,paramsMap,save){\n        if (previousState) {\n            !$('#saveConfirmation').length && this.saveScheduleDialog(paramsMap);\n            this.saveDialogConfirmationBox();\n            let saveDialogBox = $('#saveConfirmation'),\n                cancelSave = $('#saveConfirmationCancel'),\n                ignoreSave = $('#saveConfirmationIgnore'),\n                saveContent = $('#saveConfirmationOK'),\n                scheduleBtn = $('#schedule');\n\n            ignoreSave.removeClass('hidden');\n            saveDialogBox.show();\n            cancelSave.on('click', (e) => {\n                e.stopImmediatePropagation();\n                scheduleBtn.hasClass('over') && scheduleBtn.removeClass('over');\n                saveDialogBox.remove();\n            });\n            saveContent.on('click', (e) => {\n                e.stopImmediatePropagation();\n                save();\n                paramsMap && schedulerUtils._ParamMapping(paramsMap);\n                saveDialogBox.hide();\n                ignoreSave.addClass('hidden');\n            });\n            ignoreSave.on('click', (e)=> {\n                e.stopImmediatePropagation();\n                paramsMap && schedulerUtils._ParamMapping(paramsMap);\n                saveDialogBox.remove();\n            });\n        } else {\n            paramsMap && schedulerUtils._ParamMapping(paramsMap);\n        }\n    }\n}","/*\n * Copyright (C) 2005 - 2022 TIBCO Software Inc. All rights reserved.\n * http://www.jaspersoft.com.\n *\n * Unless you have purchased a commercial license agreement from Jaspersoft,\n * the following license terms apply:\n *\n * This program is free software: you can redistribute it and/or modify\n * it under the terms of the GNU Affero General Public License as\n * published by the Free Software Foundation, either version 3 of the\n * License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the\n * GNU Affero General Public License for more details.\n *\n * You should have received a copy of the GNU Affero General Public License\n * along with this program. If not, see <http://www.gnu.org/licenses/>.\n */\n/**\n * @version: $Id$\n */\n/* global alert*/\n\n\nimport Report from './report.view.base';\nimport Controls from '../controls/controls.report';\nimport {ControlsBase} from \"../controls/controls.base\";\nimport toolbarButtonModule from '../components/components.toolbarButtons.events';\nimport {\n    matchAny,\n    isIPad,\n    doNothing,\n    isSupportsTouch,\n    centerElement\n} from \"../util/utils.common\";\nimport {JRS} from \"../namespace/namespace\";\nimport TouchController from '../util/touch.controller';\nimport layoutModule from '../core/core.layout';\nimport dialogs from '../components/components.dialogs';\nimport {ajax} from \"../core/core.ajax\";\nimport buttonManager from '../core/core.events.bis';\nimport _ from 'underscore';\nimport jQuery from 'jquery';\nimport stdnav from 'js-sdk/src/common/stdnav/stdnav';\nimport scheduleDialog from '../scheduler/util/schedulerSaveDialog';\nimport confirmationExitDialogUtil from '../navigateBack/utils/navigateBackUtils';\nimport i18n from '../i18n/jasperserver_messages.properties';\nimport ReportExecutionModel from 'bi-report/src/bi/report/model/ReportExecutionModel';\n\nReport.toolbarActionMap = {\n    'close': 'Report.close',\n    'back': 'Report.navigateBack',\n    'ICDialog': 'Controls.show',\n    'export': doNothing,\n    'undo': 'Report.undo',\n    'redo': 'Report.redo',\n    'undoAll': 'Report.undoAll',\n    'schedule': 'Report.schedule',\n    'embed':'Report.embedViz'\n};    /*\n    Init & reportRefreshed methods.\n */\n/*\n    Init & reportRefreshed methods.\n */\njQuery.extend(Report, {\n    initialize: function () {\n        this.commonInit();\n        Report.exportForm = jQuery('#' + Report.EXPORT_ACTION_FORM)[0];\n        this.nothingToDisplay = jQuery('#nothingToDisplay');\n        if (jQuery('#' + Report.DATA_REFRESH_BUTTON)[0]) {\n            jQuery('#' + Report.DATA_REFRESH_BUTTON).on('mouseup', function () {\n                let cancelRefresh = false;\n                if (window.viewer && window.viewer.isExportRunning()) {\n                    window.viewer.confirmedExportCancel = confirm(i18n[\"jasper.report.view.export.in.progress.confirm.continue\"]);\n                    if (!window.viewer.confirmedExportCancel) {\n                        cancelRefresh = true;\n                    }\n                }\n\n                if (!cancelRefresh) {\n                    const freshData = true;\n                    if (typeof Controls !== 'undefined') {\n                        var selectedData = Controls.viewModel.get('selection');\n                        if (Report.hasInputControls && Controls.selectionChanged){\n                            Controls.applyInputValues(null, freshData);\n                        } else {\n                            this.refreshReport({freshData: freshData}, null, selectedData);\n                        }\n                    } else {\n                        this.refreshReport({ freshData: freshData }, null, null);\n                    }\n                }\n            }.bindAsEventListener(this));\n        }\n        if (jQuery('#' + Report.ASYNC_CANCEL_BUTTON)[0]) {\n            jQuery('#' + Report.ASYNC_CANCEL_BUTTON).on('mouseup', function () {\n                this.cancelReportAsyncExecution(true);\n            }.bindAsEventListener(this));\n        }    /**\n         *  Init toolbar\n         */\n        /**\n         *  Init toolbar\n         */\n        toolbarButtonModule.ACTION_MODEL_TAG = Report.TOOLBAR_SUBMENU;\n        toolbarButtonModule.initialize(Report.toolbarActionMap);\n\n        if (jQuery('#' + Report.PAGINATION_PAGE_CURRENT)[0]) {\n            // observe page navigation input\n            jQuery('#' + Report.PAGINATION_PAGE_CURRENT).on('change', function (e) {\n                this.goToPage(jQuery('#' + Report.PAGINATION_PAGE_CURRENT)[0].getValue());\n                e.stopPropagation();\n            }.bindAsEventListener(this));    // observe page navigation buttons\n            // observe page navigation buttons\n            jQuery('.toolsRight').on('click', '.button', function(e) {\n                var elem = e.target;\n                e.stopPropagation();\n                for (var pattern in this.pageActions) {\n                    if (matchAny(elem, [pattern], true)) {\n                        this.navigateToReportPage(this.pageActions[pattern]);\n                        return;\n                    }\n                }\n            }.bindAsEventListener(this));\n        }\n        if (document.location.href.indexOf('noReturn=true') > 0) {\n            buttonManager.disable(jQuery('#back'));\n        }\n        if (typeof Controls !== 'undefined') {\n            Controls.initialize.bind(Controls)(Report.refreshReport);\n        } else {\n            Report.refreshReport();\n        }\n\n        jQuery('.list.buttonSet.j-toolbar , .control.toolsRight.j-toolbar').on('mousedown',function(e){\n            let isBtnDisabled = jQuery(e.target).parent().parent().is(\":disabled\");\n            if(isBtnDisabled){\n                e.preventDefault();\n            }\n        });\n    },\n    deleteReportExecution: function (navBackCb=()=>{}) {\n        const executionId =  this.getGoBackExecutionId();\n        if (!this.isDrillDownExecution) {\n            if (executionId && !Report.mainExecutionId && history.length>1) {\n                Report.mainExecutionId = executionId;\n                window.viewer._reportInstance.destroy(()=>{\n                    this.deleteReportExecution(navBackCb);\n                });\n                delete Report.mainExecutionId;\n                this.destroyReportInstance(navBackCb)\n            }else{\n                this.destroyReportInstance(navBackCb)\n            }\n\n        }\n    },\n    destroyReportInstance:function(navBackCb){\n        window.viewer._reportInstance.destroy(()=>{},()=>{},()=>{\n            navBackCb();\n        });\n    },\n    reportRefreshed: function (silentUpdate) {\n        //        Report.snapshotSaveStatus = null;\n        var fr, r;    /*\n         * Adding following line to force Google chrome to display ajax content\n         * injected into #reportContainer. Bug fix 23988.\n         */\n        /*\n         * Adding following line to force Google chrome to display ajax content\n         * injected into #reportContainer. Bug fix 23988.\n         */\n        if (typeof JRS !== 'undefined' && JRS.fid) {\n            fr = jQuery('#' + JRS.fid, window.parent.document);\n            r = fr.contents().find('#reportContainer');\n            fr.removeClass(layoutModule.HIDDEN_CLASS).show();\n\n            if (!isIPad())\n                fr.parent().parent().css('background-image', 'none');\n            if (isSupportsTouch()) {\n                new TouchController(r.get(0), fr.get(0).parentNode.parentNode, {\n                    use2Fingers: true,\n                    showBorders: true,\n                    noInit3d: true\n                });\n                r.children('div').bind({\n                    'touchstart': function () {\n                        fr.parent().parent().siblings().removeClass(layoutModule.HOVERED_CLASS);\n                        fr.parent().parent().addClass(layoutModule.HOVERED_CLASS);\n                    }\n                });\n            }\n            r.show();    // bloody hack to remember initial size of report frame\n            // bloody hack to remember initial size of report frame\n            window.reportFrameHeight = window.reportFrameHeight || fr.parent().height();\n            window.reportFrameWidth = window.reportFrameWidth || fr.parent().width();\n        } else {\n            var ic = jQuery('#' + ControlsBase.INPUT_CONTROLS_FORM)[0];\n            if (isSupportsTouch()) {\n                if (this.touchController) {\n                    this.touchController.reset();\n                } else {\n                    var scrollWrapper = jQuery('#reportContainer').parent().parent();\n                    var contentWidth = jQuery('#reportContainer > div').width();\n                    scrollWrapper.width() < contentWidth && scrollWrapper.css('width', contentWidth + 'px');\n                    this.touchController = new TouchController(scrollWrapper[0], scrollWrapper.parent()[0], {\n                        noInit3d: true,\n                        scrollbars: true\n                    });\n                }\n                var bm = jQuery('#' + ControlsBase.INPUT_CONTROLS_FORM + ' > button.minimize');\n                if (ic && bm && bm.is(':visible')) {\n                    var m = jQuery(ic).hasClass('minimized');\n                    layoutModule.maximize(ic);\n                    m && layoutModule.minimize(ic);\n                }\n            }\n            jQuery('#reportContainer').show().height();\n        }\n        jQuery('#reportContainer').parents('.body').slice(0, 1).scrollTop(0);    /*\n         Hide nothing to display html\n         */\n        /*\n         Hide nothing to display html\n         */\n        if (Report.nothingToDisplay) {\n            jQuery(Report.nothingToDisplay).addClass(layoutModule.HIDDEN_CLASS);\n            jQuery(\"#\" + Report.DATA_REFRESH_BUTTON).removeAttr(layoutModule.DISABLED_ATTR_NAME);\n        }\n        var reportStatus = window.viewer.getReportStatus();\n\n        if (window.viewer.reportStatus.pages.total !== null) {\n            var lastPageIndex = window.viewer.reportStatus.pages.total;\n            jQuery(\"#emptyReportID\").addClass(layoutModule.HIDDEN_CLASS);\n\n            if (lastPageIndex === 1) {\n                jQuery(\".control.paging\").addClass(layoutModule.HIDDEN_CLASS).prev(\".divider\").addClass(layoutModule.HIDDEN_CLASS);\n            } else {\n                jQuery(\".control.paging\").removeClass(layoutModule.HIDDEN_CLASS).prev(\".divider\").removeClass(layoutModule.HIDDEN_CLASS)[0];\n            }\n        }\n        if (\"empty\" === reportStatus) {\n            jQuery(jQuery(\"#emptyReportID p.message\")[1]).html(i18n[\"jasper.report.view.empty\"]);\n            jQuery(\"#emptyReportID\").removeClass(layoutModule.HIDDEN_CLASS);\n            centerElement(jQuery(\"#emptyReportID\"), {horz: true, vert: true});\n        }\n        if (_.contains([\"empty\", \"failed\"], reportStatus)) {\n            jQuery(\".control.paging\").addClass(layoutModule.HIDDEN_CLASS).prev(\".divider\").addClass(layoutModule.HIDDEN_CLASS);\n            // disable zoom\n            jQuery(\"#zoom_out\").prop(\"disabled\", true);\n            jQuery(\"#zoom_in\").prop(\"disabled\", true);\n            jQuery(\"#zoom_value\").prop(\"disabled\", true);\n            jQuery(\"#zoom_value_button\").prop(\"disabled\", true);\n            // disable search\n            jQuery(\"#search_report\").prop( \"disabled\", true);\n            jQuery(\"#search_report_button\").prop( \"disabled\", true);\n            jQuery(\"#search_options\").prop( \"disabled\", true);\n        } else {\n            // enable zoom\n            jQuery(\"#zoom_out\").prop( \"disabled\", false);\n            jQuery(\"#zoom_in\").prop( \"disabled\", false);\n            jQuery(\"#zoom_value\").prop( \"disabled\", false);\n            jQuery(\"#zoom_value_button\").prop( \"disabled\", false);\n            // enable search\n            jQuery(\"#search_report\").prop( \"disabled\", false);\n            jQuery(\"#search_report_button\").prop( \"disabled\", false);\n            jQuery(\"#search_options\").prop( \"disabled\", false);\n        }\n        Report.refreshPagination(silentUpdate);\n        Report.refreshExporters(reportStatus);\n        Report.refreshSave();\n        Report.refreshAsyncCancel();\n        if (window.viewer.reportStatus.pages.dataTimestampMessage && jQuery('#' + Report.DATA_TIMESTAMP_SPAN)[0]) {\n            jQuery('#' + Report.DATA_TIMESTAMP_SPAN).html(window.viewer.reportStatus.pages.dataTimestampMessage);\n        }\n        if (!Report.allRequestParameters.viewAsDashboardFrame){\n            jQuery('#innerPagination').css('margin', 0)[0];\n        } else {\n            jQuery('#innerPagination').css('margin', 'none')[0];\n        }\n        dialogs.popup.hideShared(jQuery('#' + ajax.LOADING_ID)[0], Report.REPORT_COMPONENT_ID);\n        jQuery('#schedule') && jQuery('#schedule').removeAttr('disabled');\n        jQuery('#embed') && jQuery('#embed').removeAttr('disabled');\n\n        this.refreshNavigation();\n\n\n    },\n    showInvisibleICValidationMessages: function() {\n        var iicValidationState = jQuery('#iicValidationErrorMessagesHolder');\n\n        if (iicValidationState && iicValidationState.length > 0) {\n            var iicValidationMessages = iicValidationState.html();\n            jQuery(\".control.paging\").addClass(layoutModule.HIDDEN_CLASS).prev(\".divider\").addClass(layoutModule.HIDDEN_CLASS);\n\n            // disable zoom\n            jQuery(\"#zoom_out\").prop(\"disabled\", true);\n            jQuery(\"#zoom_in\").prop(\"disabled\", true);\n            jQuery(\"#zoom_value\").prop(\"disabled\", true);\n            jQuery(\"#zoom_value_button\").prop(\"disabled\", true);\n            // disable search\n            jQuery(\"#search_report\").prop( \"disabled\", true);\n            jQuery(\"#search_report_button\").prop( \"disabled\", true);\n            jQuery(\"#search_options\").prop( \"disabled\", true);\n\n            dialogs.errorPopup.show(iicValidationMessages);\n        }\n\n        dialogs.popup.hideShared(jQuery('#' + ajax.LOADING_ID)[0], Report.REPORT_COMPONENT_ID);\n    }\n});    /*\n    UI updates after report is updated or canceled\n*/\n/*\n    UI updates after report is updated or canceled\n*/\njQuery.extend(Report, {\n    refreshExporters: function (reportStatus) {\n        if (window.viewer.reportStatus.pages.total != null &&\n            !window.viewer.isExportRunning() &&\n            !_.contains([\"empty\", \"failed\"], reportStatus)) {\n            buttonManager.enable(jQuery(\"#export\")[0]);\n        } else {\n            buttonManager.disable(jQuery(\"#export\")[0]);\n        }\n    },\n    refreshSave: function () {\n    }    /* overridden in Pro */,\n    refreshPagination: function (silentUpdate) {\n        var pageStatus = window.viewer.reportStatus.pages,\n            currentPageIndex = pageStatus.current,\n            lastPage = pageStatus.total;\n        if (lastPage != null && lastPage <= 0) {\n            buttonManager.disable(jQuery('#' + Report.PAGINATION_PAGE_FIRST)[0]);\n            buttonManager.disable(jQuery('#' + Report.PAGINATION_PAGE_PREV)[0]);\n            buttonManager.disable(jQuery('#' + Report.PAGINATION_PAGE_CURRENT)[0]);\n            buttonManager.disable(jQuery('#' + Report.PAGINATION_PAGE_NEXT)[0]);\n            buttonManager.disable(jQuery('#' + Report.PAGINATION_PAGE_LAST)[0]);\n            if (jQuery('#' + Report.PAGINATION_PAGE_CURRENT)[0]) {\n                jQuery('#' + Report.PAGINATION_PAGE_CURRENT)[0].setValue('');\n                jQuery('#' + Report.PAGINATION_PAGE_TOTAL).html('');\n            }\n            return;\n        }\n        if (currentPageIndex > 1) {\n            buttonManager.enable(jQuery('#' + Report.PAGINATION_PAGE_FIRST)[0]);\n            buttonManager.enable(jQuery('#' + Report.PAGINATION_PAGE_PREV)[0]);\n        } else {\n            buttonManager.disable(jQuery('#' + Report.PAGINATION_PAGE_FIRST)[0]);\n            buttonManager.disable(jQuery('#' + Report.PAGINATION_PAGE_PREV)[0]);\n        }\n        if (lastPage == null) {\n            if (pageStatus.lastPartialPage == null || currentPageIndex < pageStatus.lastPartialPage) {\n                buttonManager.enable(jQuery('#' + Report.PAGINATION_PAGE_NEXT)[0]);\n            } else {\n                buttonManager.disable(jQuery('#' + Report.PAGINATION_PAGE_NEXT)[0]);\n            }\n            buttonManager.disable(jQuery('#' + Report.PAGINATION_PAGE_LAST)[0]);\n        } else if (currentPageIndex < lastPage) {\n            buttonManager.enable(jQuery('#' + Report.PAGINATION_PAGE_NEXT)[0]);\n            buttonManager.enable(jQuery('#' + Report.PAGINATION_PAGE_LAST)[0]);\n        } else {\n            buttonManager.disable(jQuery('#' + Report.PAGINATION_PAGE_NEXT)[0]);\n            buttonManager.disable(jQuery('#' + Report.PAGINATION_PAGE_LAST)[0]);\n        }\n        buttonManager.enable(jQuery('#' + Report.PAGINATION_PAGE_CURRENT)[0]);\n        if (jQuery('#' + Report.PAGINATION_PAGE_CURRENT)[0]) {\n            if (!silentUpdate) {\n                jQuery('#' + Report.PAGINATION_PAGE_CURRENT)[0].setValue(currentPageIndex);\n            }\n            if (lastPage == null) {\n                jQuery('#' + Report.PAGINATION_PAGE_TOTAL).html('');\n            } else {\n                jQuery('#' + Report.PAGINATION_PAGE_TOTAL).html(this.getMessage('jasper.report.view.page.of') + lastPage);\n            }\n        }\n        this.pageActions = {\n            'button#page_first': 1,\n            'button#page_prev': currentPageIndex - 1,\n            'button#page_next': currentPageIndex + 1\n        };\n        if (lastPage != null) {\n            this.pageActions['button#page_last'] = lastPage;\n        }\n\n        var $elem = jQuery(\".toolsRight .paging.subfocus\").find(\"button\");\n        if ($elem.length && $elem.is(\":disabled\")) {\n            if ($elem.is(\"#\" + Report.PAGINATION_PAGE_LAST)) {\n                stdnav.forceFocus(\".toolsRight li.page_first\");\n            } else if ($elem.is(\"#\" + Report.PAGINATION_PAGE_FIRST)) {\n                stdnav.forceFocus(\".toolsRight li.page_last\");\n            } else if ($elem.is(\"#\" + Report.PAGINATION_PAGE_NEXT)) {\n                stdnav.forceFocus(\".toolsRight li.page_prev\");\n            } else if ($elem.is(\"#\" + Report.PAGINATION_PAGE_PREV)) {\n                stdnav.forceFocus(\".toolsRight li.page_next\");\n            } else {\n                $elem.closest(\"ul\").focus();\n            }\n        } else {\n            $elem.addClass(layoutModule.HOVERED_CLASS);\n        }\n\n    },\n    refreshAsyncCancel: function (canceled) {\n        if (jQuery('#' + Report.ASYNC_CANCEL_BUTTON)[0]) {\n            if (canceled) {\n                jQuery('#' + 'asyncIndicator').addClass(layoutModule.HIDDEN_CLASS)[0];\n                buttonManager.disable(jQuery('#' + Report.ASYNC_CANCEL_BUTTON)[0]);\n                jQuery('#' + Report.DATA_REFRESH_BUTTON).removeClass(layoutModule.HIDDEN_CLASS)[0];\n            } else {\n                if (window.viewer.isReportRunning()) {\n                    buttonManager.enable(jQuery('#' + Report.ASYNC_CANCEL_BUTTON)[0]);\n                    jQuery('#' + 'asyncIndicator').removeClass(layoutModule.HIDDEN_CLASS)[0];\n                    jQuery('#' + Report.DATA_REFRESH_BUTTON).addClass(layoutModule.HIDDEN_CLASS)[0];\n                } else {\n                    jQuery('#' + 'asyncIndicator').addClass(layoutModule.HIDDEN_CLASS)[0];\n                    buttonManager.disable(jQuery('#' + Report.ASYNC_CANCEL_BUTTON)[0]);\n                    jQuery('#' + Report.DATA_REFRESH_BUTTON).removeClass(layoutModule.HIDDEN_CLASS)[0];\n                }\n            }\n        }\n    }\n});\n\nfunction getDisabledState(elemsIDsArr) {\n    const result = [];\n    for (const elemID of elemsIDsArr) {\n        result.push({\n            id: elemID,\n            disabledState: jQuery(`#${elemID}`).prop(\"disabled\")\n        });\n    }\n    return result;\n}\n\nfunction disableElements(elemsIDsArr) {\n    for (const elemID of elemsIDsArr) {\n        jQuery(`#${elemID}`).prop(\"disabled\", true);\n    }\n}\n\nfunction restoreState(prevStateArr) {\n    for (const prevState of prevStateArr) {\n        jQuery(`#${prevState.id}`).prop(\"disabled\", prevState.disabledState)\n    }\n}\n\n/*\n    Methods bound to toolbar buttons\n*/\njQuery.extend(Report, {\n    exportReport: function (type, formAction) {\n        let exportLoadingIndicator = jQuery(\"#exportLoadingIndicator\");\n        exportLoadingIndicator.removeClass(layoutModule.HIDDEN_CLASS);\n\n        // preserve export interfering elements' state\n        const elemenIDs = [\"fileOptions\", \"export\"];\n        const elementsState = getDisabledState(elemenIDs);\n\n        // disable export interfering buttons disregarding their disabled state\n        disableElements(elemenIDs);\n\n        window.viewer.exportReport(type)\n            .done(function(link) {\n                window.open(link.href);\n            })\n            .always(function() {\n                exportLoadingIndicator.addClass(layoutModule.HIDDEN_CLASS);\n\n                // restore interfering elements' state\n                restoreState(elementsState);\n            });\n    },\n    exitDialogTextParams:function(){\n        if (window.viewer.hasReport()) {\n            if (window.viewer.isExportRunning()) {\n                return {\n                    options:{\n                        bodyText: {\n                            firstText: i18n['report.view.export.in.progress.confirm.leave.first.content'],\n                            secondText: i18n['report.view.in.progress.confirm.leave.second.content']\n                        },\n                        title: i18n['report.dialog.export.title'],\n                        closeLabel: i18n['report.dialog.close.button']\n                    }\n                }\n\n            }\n            if (window.viewer.isReportRunning()) {\n                return {\n                    options:{\n                        bodyText: {\n                            firstText: i18n['report.view.rendering.in.progress.confirm.leave.first.content'],\n                            secondText: i18n['report.view.in.progress.confirm.leave.second.content']\n                        },\n                        title: i18n['report.dialog.rendering.title'],\n                        closeLabel: i18n['report.dialog.close.button']\n                    }\n                }\n            }else{\n                return{\n                    options:{\n                        bodyText : {\n                            firstText: i18n['report.back.button.dialog.first.content'],\n                            secondText: i18n['report.back.button.dialog.second.content']\n                        },\n                        previousState : window.viewer.canSave && Report.savedState && Report.savedState != window.viewer.getReportStackState()\n                    }\n                }\n            }\n        }\n\n    },\n    close:function(){\n        jQuery(window).unbind(\"beforeunload\");\n        let exitParams = Report.exitDialogTextParams(),\n            options = exitParams?.options || {};\n        confirmationExitDialogUtil.exitDialogBox && confirmationExitDialogUtil.exitDialogBox(options, false)\n    },\n    navigateBack:function(){\n        jQuery(window).unbind(\"beforeunload\");\n        let exitParams = Report.exitDialogTextParams(),\n            options = exitParams?.options || {};\n        confirmationExitDialogUtil.exitDialogBox && confirmationExitDialogUtil.exitDialogBox(options, true , Report.goBack)\n    },\n    goBack: function (noConfirm) {\n        var confirm = noConfirm === true ? false : true;\n        if (confirm && !Report.confirmExit()) {\n            return;\n        }\n        var params = Report.getAllRequestParameters();    // disable back button after first click\n        // disable back button after first click\n        buttonManager.disable(jQuery('#back')[0]);\n        if (params['_ddHyperlink']) {\n            window.history.back();\n        } else {\n            // exportForm is used here to leave the page\n            const executionId = Report.getGoBackExecutionId();\n            if (executionId !== null) {\n                Report.exportForm._executionId.value = executionId;\n            }\n            Report.exportForm._eventId.value = 'close';\n            Report.exportForm._flowExecutionKey.value = Report.reportExecutionKey();\n            Report.exportForm.submit();\n        }\n    },\n    getGoBackExecutionId :function(){\n        const executionIdParam = /(\\?|&)_goBackExecutionId=([^&]*)/.exec(location.href);\n        return executionIdParam && executionIdParam.length === 3 ? executionIdParam[2] : null;\n    },\n    open: function () {\n        alert('Not implemented yet: open report');\n    },\n    save: function () {\n        alert('Report saving is not available in community edition');\n    },\n    saveAs: function () {\n        alert('Report saving is not available in community edition');\n    },\n    undo: function () {\n        window.viewer.undo();\n    },\n    redo: function () {\n        window.viewer.redo();\n    },\n    undoAll: function () {\n        window.viewer.undoAll();\n    },\n    cancelReportAsyncExecution: function (bAsync) {\n        buttonManager.disable(jQuery('#' + Report.ASYNC_CANCEL_BUTTON)[0]);\n        window.viewer.cancelAsync().then(function () {\n            var status = window.viewer.getReportStatus();\n\n            if (status === \"failed\" || status === \"ready\" || window.viewer.reportStatus.pages.total !== null) {\n                Report.refreshAsyncCancel(true);\n                return;\n            } else if (status === \"cancelled\") {\n                Report.refreshAsyncCancel(true);\n                dialogs.systemConfirm.show(Report.getMessage('jasper.report.view.report.canceled'), 5000);\n                return;\n            } else {\n                Report.refreshPagination(true);\n                Report.refreshExporters(status);\n                Report.refreshSave();\n                Report.refreshAsyncCancel();\n            }\n        });\n    },\n    refreshNavigation:function() {\n        if(history.length > 1){\n            if(location.search.includes('_eventId_drillReport') || location.search.includes('_ddHyperlink')) {\n                jQuery('#back').show();\n            }else{\n                jQuery('#back').parent().remove();\n            }\n        }else{\n            jQuery('#back').parent().remove();\n        }\n    },\n\n    schedule: function(){\n        let previousState = window.viewer.canSave && Report.savedState && Report.savedState != window.viewer.getReportStackState(),\n            save = Report.save.bind(Report),\n            paramsMap = {\n                'reportUnitURI': self.viewer.config.reporturi,\n                'resourceType': \"ReportUnit\",\n                'parentReportUnitURI': self.viewer.config.reporturi,\n                'decorate': 'no',\n                'schedulerAccelerator': 'schedule'\n            };\n        scheduleDialog.scheduleDialogBox(previousState,paramsMap,save);\n    }\n});\n\n\nconst reportExecutionModelMixin=(reportExecutionModelUrlRemove)=>{\n    return {\n        urlRemove() {\n            const executionId = Report.mainExecutionId;\n            return executionId ? this.urlRun() + '/' + executionId : reportExecutionModelUrlRemove.apply(this, arguments);\n        }\n    }\n};\n\nconst reportExecutionModelUrlRemoveMixin = reportExecutionModelMixin(ReportExecutionModel.prototype.urlRemove);\n_.extend(ReportExecutionModel.prototype, reportExecutionModelUrlRemoveMixin);\n\nexport default Report;","/*\n * Copyright (C) 2005 - 2022 TIBCO Software Inc. All rights reserved.\n * http://www.jaspersoft.com.\n *\n * Unless you have purchased a commercial license agreement from Jaspersoft,\n * the following license terms apply:\n *\n * This program is free software: you can redistribute it and/or modify\n * it under the terms of the GNU Affero General Public License as\n * published by the Free Software Foundation, either version 3 of the\n * License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the\n * GNU Affero General Public License for more details.\n *\n * You should have received a copy of the GNU Affero General Public License\n * along with this program. If not, see <http://www.gnu.org/licenses/>.\n */\n\nimport _ from 'underscore';\nimport $ from 'jquery';\nimport Backbone from 'backbone';\nimport overlayTemplate from './template/overlayTemplate.htm';\nvar DEFAULT_ZINDEX = 4000;\nexport default Backbone.View.extend({\n    el: function () {\n        return this.template();\n    },\n    template: _.template(overlayTemplate),\n    initialize: function (options) {\n        options = _.defaults(options || {}, { zIndex: DEFAULT_ZINDEX });\n        this.delay = options.delay;\n        this.$el.css({ zIndex: options.zIndex });\n        this.$el.parent().css({ position: 'relative' });\n    },\n    show: function (delay) {\n        var self = this, show = function () {\n            self.$el.show();\n            self.$el.removeClass('jr-isHidden');\n        };\n        if (this.delay || delay) {\n            if (!this._timer) {\n                this._timer = setTimeout(show, this.delay || delay);\n            }\n        } else {\n            show();\n        }\n    },\n    hide: function () {\n        if (this._timer) {\n            clearTimeout(this._timer);\n            this._timer = null;\n        }\n        this.$el.hide();\n        this.$el.addClass('jr-isHidden');\n    }\n});","export default \"<div class=\\\"jr-mOverlay jr-isHidden jr\\\">\\n\\n    <js-templateNonce></js-templateNonce>\\n</div>\\n\";"],"sourceRoot":""}