{"version":3,"sources":["webpack://jrs-ui/./src/resource/resource.analysisConnection.js","webpack://jrs-ui/./src/addResource/analysisClientConnection/addAnalysisClientConnection.common.js","webpack://jrs-ui/./src/components/components.tooltip.js","webpack://jrs-ui/./runtime_dependencies/dragdropextra/dragdropextra.js"],"names":["TYPE_ID","LABEL_ID","RESOURCE_ID_ID","DESCRIPTION_ID","RESOURCE_INPUT_ID","BROWSE_BUTTON_ID","TREE_ID","FOLDERS_TREE_DATA_PROVIDER_ID","XMLA_CATALOG_ID","XMLA_DATA_SOURCE_ID","XMLA_CONNECTION_URI_ID","TEST_BUTTON_ID","NEXT_BUTTON_ID","DONE_BUTTON_ID","CHANGE_TYPE_BUTTON_ID","_canGenerateId","initialize","options","this","_form","jQuery","layoutModule","find","_type","_label","_resourceId","_description","type","getValue","_xmlaCatalog","_xmlaDataSource","_xmlaConnectionUri","_nextButton","_doneButton","_testButton","_changeTypeButton","_isEditMode","isEditMode","validator","resource","_xmlaCatalogValidator","bind","_xmlaDataSourceValidator","_xmlaConnectionUriValidator","_initResourcePicker","_initEvents","picker","treeId","providerId","uriTextboxId","browseButtonId","title","on","click","submitHandler","e","_isDataValid","preventDefault","bindAsEventListener","testConnectionHandler","testXMLAConnection","element","target","include","ValidationModule","setValue","testButton","form","formValues","serializeArray","push","name","value","ajaxTargettedUpdate","attr","postData","fillLocation","callback","msg","response","text","responseObj","JSON","parse","status","message","details","dialogs","errorHandler","baseErrorHandler","hideLoader","elementsToValidate","isValid","errorMessage","blank","jrsConfigs","_","window","localContext","resourceAnalysisConnection","isIPad","JSTooltip","srcElement","label","offsets","showBelow","templateId","loadTextCallback","loadTextExecuted","disabled","removed","_toAttribute","TOOLTIP_TEMPLATE","id","_fromAttribute","length","TOOLTIP_TEMPLATE_ID","TOOLTIP_LABEL","TOOLTIP_TEXT","_escapeText","jsTooltip","tooltipModule","tooltips","addVar","addMethod","attrName","xssUtil","writeAttribute","isArray","join","SEPARATOR","hasAttribute","readAttribute","split","elements","values","each","index","update","getElementZIndex","elem","parseInt","css","initialZIndex","parents","toArray","memo","parent","zIndex","Math","max","txt","tooltipOffsets","_element","getBoxOffsets","clientHeight","getScrollLeft","getScrollTop","setStyle","position","left","top","_calculateZIndex","labelElements","select","LABEL_PATTERN","textElements","TEXT_PATTERN","_setValues","removeClass","clientWidth","width","leftOffset","height","topOffset","addClass","hideJSTooltip","showJSTooltip","indexOf","splice","TOOLTIP_PATTERN","ELEMENT_WITH_TOOLTIP_PATTERN","actualX","actualY","cleanUp","appearDelay","timer","clearTimeout","setTimeout","show","evt","clientX","clientY","enableTooltips","forEach","tooltip","enable","disableTooltips","disable","hide","off","testId","document","getElementById","setAttribute","removeAttribute","reject","t","Draggable","prototype","startDrag","event","isDragging","dragging","delta","currentDelta","zindex","originalZ","Element","getStyle","style","ghosting","_clone","cloneNode","_originallyAbsolute","Position","absolutize","parentNode","insertBefore","tagName","body","appendChild","superghosting","prepare","pointer","Event","pointerX","pointerY","getElementsByTagName","me","Prototype","Browser","IE","clearAttributes","mergeAttributes","removeChild","getWidth","getHeight","originalScrollTop","draw","scroll","where","_getWindowScroll","originalScrollLeft","scrollLeft","scrollTop","Draggables","notify","starteffect","point","pos","cumulativeOffset","r","realOffset","deltaX","deltaY","d","_isScrollChild","p","map","i","mouseOffset","offset","snap","Object","isFunction","v","round","constraint","visibility","initDrag","isUndefined","_dragging","touches","isLeftClick","tag_name","toUpperCase","activate","countdown","DEFAULT_TOLERANCE","stop","fire","targetEvent","Droppables","isAffected","drop","jo","w","h","p0","p1","positioned_within","$","_containers","isContained","accept","classNames","detect","finishDrag","success","isIE","onmousemove","quiet","relativize","remove","dropped","onDropped","revert","reverteffect","endeffect","deactivate","reset","Sortable","defaultOnHover","onHover","dropon","overlap","hasClassName","defaultOnEmptyHover","onEmptyHover","SortableObserver","Class","create","observer","lastValue","serialize","onStart","onEnd","eventName","draggable","unmark","getSortableObserverConstructor","drops","affected","findDeepestChild","last_active","within","set","display"],"mappings":"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","file":"_chunks/chunk.3467.js","sourcesContent":["/*\n * Copyright (C) 2005 - 2022 TIBCO Software Inc. All rights reserved.\n * http://www.jaspersoft.com.\n *\n * Unless you have purchased a commercial license agreement from Jaspersoft,\n * the following license terms apply:\n *\n * This program is free software: you can redistribute it and/or modify\n * it under the terms of the GNU Affero General Public License as\n * published by the Free Software Foundation, either version 3 of the\n * License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the\n * GNU Affero General Public License for more details.\n *\n * You should have received a copy of the GNU Affero General Public License\n * along with this program. If not, see <http://www.gnu.org/licenses/>.\n */\n/**\n * @version: $Id$\n */\n\nimport resource from './resource.base';\nimport {ValidationModule} from \"../util/utils.common\";\nimport picker from '../components/components.pickers';\nimport {ajaxTargettedUpdate} from \"../core/core.ajax\";\nimport {baseErrorHandler} from \"../core/core.ajax.utils\";\nimport dialogs from '../components/components.dialogs';\nimport jQuery from 'jquery';\nimport layoutModule from \"../core/core.layout\";\n\nvar resourceAnalysisConnection = {\n    TYPE_ID: 'analysisConnection\\\\.type',\n    LABEL_ID: 'connectionLabel',\n    RESOURCE_ID_ID: 'connectionName',\n    DESCRIPTION_ID: 'connectionDescription',\n    RESOURCE_INPUT_ID: 'resourceUri',\n    BROWSE_BUTTON_ID: 'browser_button',\n    TREE_ID: 'folderTreeRepoLocation',\n    FOLDERS_TREE_DATA_PROVIDER_ID: 'repositoryExplorerTreeFoldersProvider',\n    XMLA_CATALOG_ID: 'xmlaCatalog',\n    XMLA_DATA_SOURCE_ID: 'xmlaDatasource',\n    XMLA_CONNECTION_URI_ID: 'xmlaConnectionUri',\n    TEST_BUTTON_ID: 'testXMLAConnection',\n    NEXT_BUTTON_ID: 'next',\n    DONE_BUTTON_ID: 'done',\n    CHANGE_TYPE_BUTTON_ID: 'changeCombo',\n    _canGenerateId: true,\n    initialize: function (options) {\n        this._form = jQuery('#' + layoutModule.PAGE_BODY_ID).find('form')[0];\n        this._type = jQuery('#' + this.TYPE_ID)[0];\n        this._label = jQuery('#' + this.LABEL_ID)[0];\n        this._resourceId = jQuery('#' + this.RESOURCE_ID_ID)[0];\n        this._description = jQuery('#' + this.DESCRIPTION_ID)[0];\n        var type = this._type.getValue();\n        if (type == 'olapXmlaCon') {\n            this._xmlaCatalog = jQuery('#' + this.XMLA_CATALOG_ID)[0];\n            this._xmlaDataSource = jQuery('#' + this.XMLA_DATA_SOURCE_ID)[0];\n            this._xmlaConnectionUri = jQuery('#' + this.XMLA_CONNECTION_URI_ID)[0];\n        }\n        this._nextButton = jQuery('#' + this.NEXT_BUTTON_ID);\n        this._doneButton = jQuery('#' + this.DONE_BUTTON_ID);\n        this._testButton = jQuery('#' + this.TEST_BUTTON_ID)[0];\n        this._changeTypeButton = jQuery('#' + this.CHANGE_TYPE_BUTTON_ID)[0];\n        this._isEditMode = options.isEditMode;\n        this._label.validator = resource.labelValidator.bind(this);\n        this._resourceId.validator = resource.resourceIdValidator.bind(this);\n        this._description.validator = resource.descriptionValidator.bind(this);\n        if (type == 'olapXmlaCon') {\n            this._xmlaCatalog.validator = this._xmlaCatalogValidator.bind(this);\n            this._xmlaDataSource.validator = this._xmlaDataSourceValidator.bind(this);\n            this._xmlaConnectionUri.validator = this._xmlaConnectionUriValidator.bind(this);\n        }\n        this._initResourcePicker();\n        this._initEvents();\n    },\n    _initResourcePicker: function () {\n        new picker.FileSelector({\n            treeId: this.TREE_ID,\n            providerId: this.FOLDERS_TREE_DATA_PROVIDER_ID,\n            uriTextboxId: this.RESOURCE_INPUT_ID,\n            browseButtonId: this.BROWSE_BUTTON_ID,\n            title: resource.messages['resource.SaveToFolder.Title']\n        });\n    },\n    _initEvents: function () {\n        jQuery(this._type).on('change', function () {\n            this._changeTypeButton.click();\n        }.bind(this));\n        var submitHandler = function (e) {\n            if (!this._isDataValid()) {\n                e.preventDefault();\n            }\n        }.bindAsEventListener(this);\n        var testConnectionHandler = function (e) {\n            if (!this._isDataValid()) {\n                e.preventDefault();\n            } else {\n                this.testXMLAConnection();\n            }\n        }.bind(this);\n        this._nextButton.on('click', submitHandler);\n        this._doneButton.on('click', submitHandler);\n        this._testButton && jQuery(this._testButton).on('click', testConnectionHandler);\n        jQuery(this._form).on('keyup', function (e) {\n            var element = e.target;\n            var targetElements = [\n                this._label,\n                this._resourceId,\n                this._description,\n                this._xmlaCatalog,\n                this._xmlaDataSource,\n                this._xmlaConnectionUri\n            ];\n            if (targetElements.include(element)) {\n                ValidationModule.validate(resource.getValidationEntries([element]));\n                if (element == this._resourceId && this._resourceId.getValue() != resource.generateResourceId(this._label.getValue())) {\n                    this._canGenerateId = false;\n                }\n                if (element == this._label && !this._isEditMode && this._canGenerateId) {\n                    this._resourceId.setValue(resource.generateResourceId(this._label.getValue()));\n                    ValidationModule.validate(resource.getValidationEntries([this._resourceId]));\n                }\n            }\n        }.bind(this));\n    },\n    testXMLAConnection: function () {\n        var testButton = this._testButton;\n        var form = jQuery(this._form);\n        var formValues = form.serializeArray();\n        formValues.push({\n            name: '_eventId_testXMLAConnection',\n            value: ''\n        });\n        ajaxTargettedUpdate(form.attr('action'), {\n            postData: jQuery.param(formValues),\n            fillLocation: 'ajaxbuffer',\n            callback: function (msg) {\n                var response = jQuery(msg).text();\n                try {\n                    var responseObj = JSON.parse(response);\n                    responseObj.status == 'OK' ? ValidationModule.showSuccess(testButton, resource.messages['connectionStatePassed']) : ValidationModule.showError(testButton, responseObj.message, responseObj.details);\n                } catch (e) {\n                    dialogs.systemConfirm.show(response);\n                }\n            },\n            errorHandler: baseErrorHandler,\n            hideLoader: false\n        });\n    },\n    _isDataValid: function () {\n        var elementsToValidate = [\n            this._label,\n            this._resourceId,\n            this._description\n        ];\n        var type = this._type.getValue();\n        if (type == 'olapXmlaCon') {\n            elementsToValidate.push(this._xmlaCatalog);\n            elementsToValidate.push(this._xmlaDataSource);\n            elementsToValidate.push(this._xmlaConnectionUri);\n        }\n        return ValidationModule.validate(resource.getValidationEntries(elementsToValidate));\n    },\n    _xmlaCatalogValidator: function (value) {\n        var isValid = true;\n        var errorMessage = '';\n        if (value.blank()) {\n            errorMessage = resource.messages['catalogIsEmpty'];\n            isValid = false;\n        }\n        return {\n            isValid: isValid,\n            errorMessage: errorMessage\n        };\n    },\n    _xmlaDataSourceValidator: function (value) {\n        var isValid = true;\n        var errorMessage = '';\n        if (value.blank()) {\n            errorMessage = resource.messages['dataSourceIsEmpty'];\n            isValid = false;\n        }\n        return {\n            isValid: isValid,\n            errorMessage: errorMessage\n        };\n    },\n    _xmlaConnectionUriValidator: function (value) {\n        var isValid = true;\n        var errorMessage = '';\n        if (value.blank()) {\n            errorMessage = resource.messages['uriIsEmpty'];\n            isValid = false;\n        }\n        return {\n            isValid: isValid,\n            errorMessage: errorMessage\n        };\n    }\n};\n\nexport default resourceAnalysisConnection;","/*\n * Copyright (C) 2005 - 2019 TIBCO Software Inc. All rights reserved.\n * http://www.jaspersoft.com.\n *\n * Unless you have purchased a commercial license agreement from Jaspersoft,\n * the following license terms apply:\n *\n * This program is free software: you can redistribute it and/or modify\n * it under the terms of the GNU Affero General Public License as\n * published by the Free Software Foundation, either version 3 of the\n * License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the\n * GNU Affero General Public License for more details.\n *\n * You should have received a copy of the GNU Affero General Public License\n * along with this program. If not, see <http://www.gnu.org/licenses/>.\n */\n\nimport resourceAnalysisConnection from '../../resource/resource.analysisConnection';\nimport _ from 'underscore';\nimport jrsConfigs from 'js-sdk/src/jrs.configs';\nimport resource from '../../resource/resource.base';\nimport {isIPad} from \"../../util/utils.common\";\n\nvar options = jrsConfigs.connectionType.localContext.initOptions;\n_.extend(window.localContext, jrsConfigs.connectionType.localContext);\n_.extend(resource.messages, jrsConfigs.connectionType.resource.messages);\nresourceAnalysisConnection.initialize(options);\nisIPad() && resource.initSwipeScroll();\n","/*\n * Copyright (C) 2005 - 2022 TIBCO Software Inc. All rights reserved.\n * http://www.jaspersoft.com.\n *\n * Unless you have purchased a commercial license agreement from Jaspersoft,\n * the following license terms apply:\n *\n * This program is free software: you can redistribute it and/or modify\n * it under the terms of the GNU Affero General Public License as\n * published by the Free Software Foundation, either version 3 of the\n * License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the\n * GNU Affero General Public License for more details.\n *\n * You should have received a copy of the GNU Affero General Public License\n * along with this program. If not, see <http://www.gnu.org/licenses/>.\n */\n\n\n/**\n * @version: $Id$\n */\n\nimport _ from 'underscore';\nimport {\n    isArray,\n    getBoxOffsets,\n    getScrollLeft,\n    getScrollTop\n} from '../util/utils.common';\nimport jQuery from 'jquery';\n\nimport xssUtil from 'js-sdk/src/common/util/xssUtil';\n\nimport layoutModule from '../core/core.layout';\n\n/**\n * Usage:\n *      Within HTML markup. (Not working with button element)\n *\n *      <code>\n *      &lt;li tooltiptext=\"Hello\"&gt;Item 1&lt;/li&gt;\n *      &lt;li tooltiptext=\"Hello\" tooltiplabel=\"URA!\"&gt;Item 1&lt;/li&gt;\n *      &lt;li tooltiptext=\"Hello\" tooltiplabel=\"URA!\" tooltiptemplate=\"tID\"&gt;Item 1&lt;/li&gt;\n *      </code>\n *\n *      Within JavaScript\n *      <code>\n *      new JSTooltip(element, { text: \"tooltipText\" }).show();\n *      new JSTooltip(element, { text: \"tooltipText\", offsets: [100, 50] }).show();\n *      new JSTooltip(element, { text: \"tooltipText\" }).show([100, 50]);\n *     new JSTooltip(element, { label: \"tooltipLabel\", text: \"tooltipText\", templateId: \"templateId\" });\n *      new JSTooltip(element, { label: [\"tooltipLabel1\", \"tooltipLabel2\"], text: [\"tooltipText1\", \"tooltipText2\", \"tooltipText3\"], templateId: \"templateId\" });\n *\n *      tooltipModule.showJSTooltip(element, [100, 50]);\n *      tooltipModule.hideJSTooltip(element);\n *      </code>\n * @param element\n * @param options {Object}\n * <ul>\n *      <li>label {String} - Label for the tooltip</li>\n *      <li>label {Array} - List of labels for complex tooltip</li>\n *      <li>text {String} - Text for the tooltip</li>\n *      <li>text {Array} - List of messages for complex tooltip</li>\n *      <li>templateId {String} - DOM ID of template for the tooltip </li>\n *      <li>offsets {Array} - Used to show the tooltip in position. First item in array is the X point adn second is the Y point </li>\n *      <li>showBelow {Boolean} - Show bellow element</li>\n * </ul>\n *\n */\nfunction JSTooltip(element, options) {\n    if (element) {\n        this.srcElement = element;\n\n        if (options) {\n            this.label = options.label;\n            this.text = options.text;\n            this.offsets = options.offsets;\n            this.showBelow = !! options.showBelow;\n            this.templateId = options.templateId;\n            this.loadTextCallback = options.loadTextCallback;\n            this.loadTextExecuted = false;\n        }\n\n        this.disabled = false;\n        this.removed = false;\n\n        if (this.templateId) {\n            this._toAttribute(this.TOOLTIP_TEMPLATE, this.templateId);\n        } else {\n            var id = this._fromAttribute(this.TOOLTIP_TEMPLATE);\n            this.templateId = (id && id.length > 0) ? id : this.TOOLTIP_TEMPLATE_ID;\n        }\n        if (this.label) {\n            this._toAttribute(this.TOOLTIP_LABEL, this.label);\n        } else {\n            this.label = this._fromAttribute(this.TOOLTIP_LABEL);\n        }\n        if (this.text) {\n            this._toAttribute(this.TOOLTIP_TEXT, this.text);\n        } else {\n            this.text = this._fromAttribute(this.TOOLTIP_TEXT);\n        }\n\n        // escape against XSS\n        if (this.label)\n            this.label = this._escapeText(this.label);\n        if (this.text)\n            this.text = this._escapeText(this.text);\n\n        this.srcElement.jsTooltip = this;\n\n        tooltipModule.tooltips.push(this);\n    }\n}\n\nJSTooltip.addVar(\"SEPARATOR\", \"@@\");\nJSTooltip.addVar(\"TOOLTIP_LABEL\", \"tooltiplabel\");\nJSTooltip.addVar(\"TOOLTIP_TEXT\", \"tooltiptext\");\nJSTooltip.addVar(\"TOOLTIP_TEMPLATE\", \"tooltiptemplate\");\nJSTooltip.addVar(\"TOOLTIP_TEMPLATE_ID\", \"jsTooltip\");\nJSTooltip.addVar(\"LABEL_PATTERN\", \".message.label\");\nJSTooltip.addVar(\"TEXT_PATTERN\", \".message:not(.label)\");\n\nJSTooltip.addMethod(\"_toAttribute\", function(attrName, value) {\n    if(this.srcElement) {\n        value = xssUtil.hardEscape(value);\n        this.srcElement.writeAttribute(attrName, isArray(value) ? value.join(this.SEPARATOR) : value);\n    }\n});\n\nJSTooltip.addMethod(\"_fromAttribute\", function(attrName) {\n    if(this.srcElement && this.srcElement.hasAttribute(attrName)) {\n        var value = this.srcElement.readAttribute(attrName);\n        return value.include(this.SEPARATOR) ? value.split(this.SEPARATOR) : value;\n    }\n\n    return null;\n});\n\nJSTooltip.addMethod(\"_setValues\", function(elements, values) {\n    elements.each(function (element, index) {\n        if (_.isString(values[index]) || _.isNumber(values[index])) {\n            element.update(xssUtil.hardEscape(values[index]));\n        }\n    });\n});\n\nJSTooltip.addMethod(\"_calculateZIndex\", function(element) {\n    function getElementZIndex(elem) {\n        return parseInt(jQuery(elem).css(\"z-index\"));\n    }\n\n    // Get tooltip element zIndex.\n    var initialZIndex = getElementZIndex(element);\n    if (!_.isNumber(initialZIndex) || _.isNaN(initialZIndex)) {\n        initialZIndex = 1000;\n    }\n\n    var parents = _.flatten([this.srcElement, jQuery(this.srcElement).parents().toArray()]);\n\n    // Calculates max z-index between tooltip element and parent elements.\n    var maxZIndex = _.reduce(parents, function(memo, parent) {\n        var zIndex = getElementZIndex(parent);\n\n        if (_.isNumber(zIndex) && !_.isNaN(zIndex)) {\n            memo = Math.max(memo, zIndex);\n        }\n\n        return memo;\n    }, initialZIndex);\n\n    return maxZIndex + 1;\n});\n\nJSTooltip.addMethod(\"_escapeText\", function(text) {\n    return _.isArray(text)\n        ? _.map(text, function (txt) { return xssUtil.hardEscape(txt)})\n        : xssUtil.hardEscape(text);\n});\n\nJSTooltip.addMethod(\"show\", function(tooltipOffsets) {\n    if(tooltipOffsets) {\n        this.offsets = tooltipOffsets;\n    }\n\n    this._element = jQuery('#' + this.templateId)[0];\n\n    var offsets;\n    if (this.showBelow) {\n        offsets = getBoxOffsets(this.srcElement);\n        offsets[1] += this.srcElement.clientHeight + 5;\n    } else {\n        offsets = [getScrollLeft() + 5, getScrollTop() + 5];\n    }\n\n    if (this.offsets) {\n        offsets[0] += this.offsets[0];\n        offsets[1] += this.offsets[1];\n    }\n\n    this._element.setStyle({\n        position: \"absolute\",\n        left: offsets[0] + 'px',\n        top: offsets[1] + 'px',\n        zIndex: this._calculateZIndex(this._element)\n    });\n\n    var labelElements = this._element.select(this.LABEL_PATTERN);\n    var textElements = this._element.select(this.TEXT_PATTERN);\n\n    if(this.label) {\n        this._setValues(labelElements, isArray(this.label) ? this.label : [this.label]);\n    }\n    if(this.text) {\n        this._setValues(textElements, isArray(this.text) ? this.text : [this.text]);\n    }\n\n    jQuery(this._element).removeClass(layoutModule.HIDDEN_CLASS);\n\n    if (offsets[0] + this._element.clientWidth > jQuery(window).width()) {\n        var leftOffset = offsets[0] - this._element.clientWidth > 0 ? offsets[0] - this._element.clientWidth : 15;\n\n        this._element.setStyle({ left: leftOffset + \"px\"});\n    }\n    if (offsets[1] + this._element.clientHeight > jQuery(window).height()) {\n        var topOffset = offsets[1] - this._element.clientHeight - 10;\n        this._element.setStyle({ top: topOffset + \"px\"});\n    }\n\n    if (this.loadTextCallback && !this.loadTextExecuted) {\n        this.loadTextExecuted = true;\n\n        this.loadTextCallback(this);\n    }\n\n    return this;\n});\n\nJSTooltip.addMethod(\"updateText\", function(text) {\n    this.text = this._escapeText(text);\n\n    if (this._element) {\n        var textElements = this._element.select(this.TEXT_PATTERN);\n\n        this._setValues(textElements, isArray(this.text) ? this.text : [this.text]);\n    }\n});\n\nJSTooltip.addMethod(\"hide\", function() {\n    if (this._element) {\n        jQuery(this._element).addClass(layoutModule.HIDDEN_CLASS);\n    }\n});\n\nJSTooltip.addMethod(\"disable\", function() {\n    tooltipModule.hideJSTooltip(this.srcElement);\n    this.disabled = true;\n});\n\nJSTooltip.addMethod(\"enable\", function() {\n    this.disabled = false;\n    tooltipModule.showJSTooltip(this.srcElement, this.offsets);\n});\n\nJSTooltip.addMethod(\"remove\", function() {\n    var index = tooltipModule.tooltips.indexOf(this.srcElement.jsTooltip);\n    if (index !== -1) {\n        tooltipModule.hideJSTooltip(this.srcElement);\n        tooltipModule.tooltips.splice(index, 1);\n    }\n    this.removed = true;\n});\n\nJSTooltip.addMethod(\"isRemoved\", function() {\n    return this.removed;\n});\n\nvar tooltipModule = {\n    TOOLTIP_PATTERN: \"*[tooltiptext] > *\",\n    ELEMENT_WITH_TOOLTIP_PATTERN: \"*[tooltiptext]\",\n\n    tooltips: [],\n\n    showJSTooltip: function(element, offsets) {\n        if (!element.jsTooltip) {\n            element.jsTooltip = new JSTooltip(element, {});\n        } else if (!element.jsTooltip.disabled && offsets) {\n            var actualX = offsets[0];\n            var actualY = offsets[1];\n\n            this.cleanUp();\n\n            var appearDelay = jQuery(element).attr(\"tooltipappeardelay\");\n            appearDelay = appearDelay ? parseInt(appearDelay) : 1000;\n\n            element.jsTooltip.timer && clearTimeout(element.jsTooltip.timer);\n            element.jsTooltip.timer = setTimeout(function() {\n                element.jsTooltip.show([actualX, actualY]);\n            }, appearDelay);\n\n            jQuery(element).on(\"mousemove\", function(evt){\n                actualX = evt.clientX;\n                actualY = evt.clientY;\n            });\n        }\n    },\n\n    enableTooltips: function() {\n        var tooltips = this.tooltips || [];\n\n        tooltips.forEach(function(tooltip) {\n            tooltip.enable();\n        });\n    },\n\n    disableTooltips: function() {\n        var tooltips = this.tooltips || [];\n\n        tooltips.forEach(function(tooltip) {\n            tooltip.disable();\n        });\n    },\n\n    hideJSTooltip: function(element) {\n        if (element && element.jsTooltip) {\n            element.jsTooltip.timer && clearTimeout(element.jsTooltip.timer);\n\n            element.jsTooltip.hide();\n\n            jQuery(element).off(\"mousemove\");\n        }\n    },\n\n    cleanUp: function() {\n        if (this.tooltips && this.tooltips.length > 0) {\n            var removed = [];\n            var testId = \"fuigasuifdughaiadbvguaidbapvuwbev\";\n            this.tooltips.each(function(tooltip) {\n                if (!(tooltip.srcElement.id && document.getElementById(tooltip.srcElement.id))){\n                    tooltip.srcElement.setAttribute(\"id\",testId);\n                    if (!document.getElementById(testId)){\n                        tooltip.hide();\n                        removed.push(tooltip);\n                    }\n                    tooltip.srcElement.removeAttribute(\"id\");\n                }\n            });\n\n            if (removed.length > 0) {\n                this.tooltips = this.tooltips.reject(function(t) {\n                    return removed.include(t);\n                });\n            }\n        }\n    }\n};\n\nexport {JSTooltip, tooltipModule};\n","//  DragDropExtra Scriptaculous Enhancement, version 0.5\n//  (c) 2007-2008 Christopher Williams, Iterative Designs\n//\n// v0.5 release\n//      - Fixed bug where 2nd drag on an element in IE would result in funny placement of the\n//        element. [shammond42]\n// v0.4 release\n//\t\t- Fixed issue with dragging and dropping in IE7 due to an exception being thrown and not properly reseting in FinishDrag.\n// v0.3 release\n//    - Fixed bug found by Phillip Sauerbeck psauerbeck@gmail. Tests added based on Phillip's efforts.\n// v0.2 release\n//      - Minor bug fix for the releasing of objects after they have been dropped, prevents memory leak.\n// v0.1 release\n//      - initial release for the super ghosting capability\n//      - Drags from one scrolling list to the other (overflow:auto)\n//      - Retains the original object so that it can remain present despite being dragged\n//\n// dragdropextra.js is freely distributable under the terms of an MIT-style license.\n// For details, see the Iterative Designs web site: http://www.iterativedesigns.com/\n// Parts of this code have been taken from the original dragdrop.js library which is\n// copyrighted by (c) 2005-2007 Thomas Fuchs (http://script.aculo.us,\n// http://mir.aculo.us) and (c) 2005-2007 Sammi Williams\n// (http://www.oriontransfer.co.nz, sammi@oriontransfer.co.nz) and available under\n// a MIT-style license.\n\n//////////////////////////////////////////////////////////////////////////////////////////////\n//Jaspersoft Updates (look for comment: JASPERSOFT #x)\n//////////////////////////////////////////////////////////////////////////////////////////////\n// #1 3/27/10 if options.mouseOffset is true then dragging thing positioned with mousepointer\n// \t\t   see Draggable.prototype.draw\n// #2 9/27/10 restore zIndex of coloned element after dragging\n// #1 11/30/100 updated #1 to allow for parent element offsets\n// #3 11/26/20 JS-60321: Added ability to override SortableObserver\n//////////////////////////////////////////////////////////////////////////////////////////////\n\nDraggable.prototype.startDrag = function(event) {\n\tDraggable.isDragging = true;\n    this.dragging = true;\n    if (!this.delta)\n        this.delta = this.currentDelta();\n\n    if (this.options.zindex) {\n        this.originalZ = parseInt(Element.getStyle(this.element, 'z-index') || 0);\n        this.element.style.zIndex = this.options.zindex;\n    }\n    if (this.options.ghosting) {\n        this._clone = this.element.cloneNode(true);\n        this._originallyAbsolute = (this.element.getStyle('position') == 'absolute');\n        if (!this._originallyAbsolute) {\n            Position.absolutize(this.element);\n        }\n        this.element.parentNode.insertBefore(this._clone, this.element);\n        if (this.element.parentNode.tagName === \"TR\") {\n            document.body.appendChild(this.element);\n        }\n    }\n\n    if (this.options.superghosting) {\n        Position.prepare();\n        var pointer = [Event.pointerX(event), Event.pointerY(event)];\n        var body = document.getElementsByTagName(\"body\")[0];\n        var me = this.element;\n        this._clone = me.cloneNode(true);\n        if (Prototype.Browser.IE) {\n            // Clear event handing from the clone\n            // Solves the second drag issue in IE\n            this._clone.clearAttributes();\n            this._clone.mergeAttributes(me.cloneNode(false));\n        }\n        me.parentNode.insertBefore(this._clone, me);\n        me.id = \"clone_\" + me.id;\n        me.hide();\n\n        Position.absolutize(me);\n        me.parentNode.removeChild(me);\n        body.appendChild(me);\n        //Retain height and width of object only if it has been nulled out.  -v0.3 Fix\n        if (me.style.width == \"0px\" || me.style.height == \"0px\") {\n            me.style.width = Element.getWidth(this._clone) + \"px\";\n            me.style.height = Element.getHeight(this._clone) + \"px\";\n        }\n\n        //overloading in order to reduce repeated code weight.\n        this.originalScrollTop = (Element.getHeight(this._clone) / 2);\n\n        this.draw(pointer);\n\n        me.show();\n    }\n\n    if (this.options.scroll) {\n        if (this.options.scroll == window) {\n            var where = this._getWindowScroll(this.options.scroll);\n            this.originalScrollLeft = where.left;\n            this.originalScrollTop = where.top;\n        } else {\n            this.originalScrollLeft = this.options.scroll.scrollLeft;\n            this.originalScrollTop = this.options.scroll.scrollTop;\n        }\n    }\n\n    Draggables.notify('onStart', this, event);\n\n    if (this.options.starteffect) this.options.starteffect(this.element);\n};\n\n\nDraggable.prototype.draw = function(point) {\n    var pos = Position.cumulativeOffset(this.element);\n\n    if (this.options.ghosting) {\n        var r = Position.realOffset(this.element);\n        pos[0] += r[0] - Position.deltaX;\n        pos[1] += r[1] - Position.deltaY;\n    }\n\n    var d = this.currentDelta();\n    pos[0] -= d[0];\n    pos[1] -= d[1];\n\n    if(this.options.scroll) {\n        pos[0] -= this.options.scroll.scrollLeft;\n        pos[1] -= this.options.scroll.scrollTop;\n    }\n\n    if (this.options.scroll && (this.options.scroll != window && this._isScrollChild)) {\n        pos[0] -= this.options.scroll.scrollLeft - this.originalScrollLeft;\n        pos[1] -= this.options.scroll.scrollTop - this.originalScrollTop;\n    }\n\n    var p = [0,1].map(function(i) {\n        /*\n         * JASPERSOFT #1 - see comment block top of page for more info\n         */\n        return (point[i] - pos[i] - (this.options.mouseOffset ? (-2) : this.offset[i]));\n    }.bind(this));\n\n    if (this.options.snap) {\n        if (Object.isFunction(this.options.snap)) {\n            p = this.options.snap(p[0], p[1], this);\n        } else {\n            if (Object.isArray(this.options.snap)) {\n                p = p.map(function(v, i) {\n                    return (v / this.options.snap[i]).round() * this.options.snap[i]\n                }.bind(this))\n            } else {\n                p = p.map(function(v) {\n                    return (v / this.options.snap).round() * this.options.snap\n                }.bind(this))\n            }\n        }\n    }\n\n    if (this.options.superghosting) {\n        if (this.element.getStyle('position') == 'absolute') {\n            p[1] = point[1] - this.originalScrollTop;\n        } else {\n            p[1] -= this.originalScrollTop || 10;\n        }\n    }\n\n    var style = this.element.style;\n    //JASPERSOFT #1 - see comment block top of page for more info\n    if ((!this.options.constraint) || (this.options.constraint == 'horizontal'))\n        style.left = p[0] + \"px\";\n    if ((!this.options.constraint) || (this.options.constraint == 'vertical'))\n        style.top = p[1] + \"px\";\n    //END JASPERSOFT #2\n\n    if (style.visibility == \"hidden\") style.visibility = \"\"; // fix gecko rendering\n};\n\nDraggable.prototype.initDrag = function(event) {\n    if (!Object.isUndefined(Draggable._dragging[this.element]) &&\n            Draggable._dragging[this.element]) return;\n\n    if ((event.touches && event.touches.length == 1) || Event.isLeftClick(event)) {\n        // abort on form elements, fixes a Firefox issue\n        var src = Event.element(event);\n        var tag_name = src.tagName.toUpperCase();\n        if (tag_name == 'INPUT' ||\n            tag_name == 'SELECT' ||\n            tag_name == 'OPTION' ||\n            tag_name == 'BUTTON' ||\n            tag_name == 'TEXTAREA') return;\n\n        if(jQuery(this.element).parents('#sortDialog').length > 0 && tag_name == 'B') {\n            return;\n        }\n\n        var pointer = [Event.pointerX(event), Event.pointerY(event)];\n        var pos = Position.cumulativeOffset(this.element);\n        this.offset = [0,1].map(function(i) {\n            return (pointer[i] - pos[i])\n        });\n\n        Draggables.activate(this);\n        this.countdown = Draggables.DEFAULT_TOLERANCE;\n        Event.stop(event);\n        this.element.fire('drag:mousedown', {targetEvent: event});\n    }\n};\n\nDroppables.isAffected = function(point, element, drop) {\n    //Position.prepare();\n    //var positioned_within = Position.withinIncludingScrolloffsets(drop.element, point[0], point[1]);\n    var jo = jQuery(drop.element);\n    var w = jo.width();\n    var h = jo.height();\n    var p0 = jo.offset();\n    var p1 = {\n    \tleft: p0.left + w,\n    \ttop: p0.top + h\n    };\n    var positioned_within = point[0] > p0.left && point[0] < p1.left && point[1] > p0.top && point[1] < p1.top;\n\n    return ((drop.element != element) &&\n           ((element.parentNode === $(document.body)) || (!drop._containers) || this.isContained(element, drop)) &&\n           ((!drop.accept) || (Element.classNames(element).detect(function(v) { return drop.accept.include(v) } ))) &&\n           positioned_within );\n};\n\nDraggable.prototype.finishDrag = function(event, success) {\n\tDraggable.isDragging = false;\n    this.dragging = false;\n\n    if (isIE()) document.body.onmousemove = function(){};  // fix for bug 25666\n\n    if (this.options.quiet) {\n        Position.prepare();\n        var pointer = [Event.pointerX(event), Event.pointerY(event)];\n        Droppables.show(pointer, this.element);\n    }\n\n    if (this.options.ghosting) {\n        if (!this._originallyAbsolute) {\n            Position.relativize(this.element);\n            if (this._clone.parentNode.tagName === \"TR\") {\n                this._clone.parentNode.insertBefore(this.element, this._clone);\n            }\n        }\n        delete this._originallyAbsolute;\n        Element.remove(this._clone);\n        this._clone = null;\n    }\n\n    var dropped = false;\n\n    if (success) {\n        dropped = Droppables.fire(event, this.element);\n        if (!dropped) dropped = false;\n    }\n    if (dropped && this.options.onDropped) this.options.onDropped(this.element);\n    Draggables.notify('onEnd', this, event);\n\n    var revert = this.options.revert;\n    if (revert && Object.isFunction(revert)) revert = revert(this.element);\n\n    var d = this.currentDelta();\n    if (revert && this.options.reverteffect) {\n        if (dropped == 0 || revert != 'failure')\n            this.options.reverteffect(this.element,\n                    d[1] - this.delta[1], d[0] - this.delta[0]);\n    } else {\n        this.delta = d;\n    }\n\n    if (this.options.zindex) {\n        this.element.style.zIndex = this.originalZ;\n        /*\n         * JASPERSOFT #2 - see comment block top of page for more info\n         */\n        this._clone && (this._clone.style.zIndex = this.originalZ);\n    }\n\n    this.options.endeffect && this.options.endeffect(this.element);\n\n    if (this.options.superghosting) {\n        // If detached drag element from DOM, we should attach it again!\n        if (this.element.parentNode == null) {\n            Element.hide(this.element);\n            $(document.body).appendChild(this.element);\n        }\n        Element.remove(this.element);\n        new Draggable(this._clone, this.options);\n    }\n\n    Draggables.deactivate(this);\n    Droppables.reset();\n};\n\nSortable.defaultOnHover = Sortable.onHover;\nSortable.onHover = function(element, dropon, overlap) {\n    if (!element.hasClassName(\"dialog\")) {\n        Sortable.defaultOnHover(element, dropon, overlap);\n    }\n};\n\nSortable.defaultOnEmptyHover = Sortable.onEmptyHover;\nSortable.onEmptyHover = function(element, dropon, overlap) {\n    if (!element.hasClassName(\"dialog\")) {\n        Sortable.defaultOnEmptyHover(element, dropon, overlap);\n    }\n};\n\nvar SortableObserver = Class.create({\n    initialize: function(element, observer) {\n        this.element = $(element);\n        this.observer = observer;\n        this.lastValue = Sortable.serialize(this.element);\n    },\n    onStart: function() {\n        this.lastValue = Sortable.serialize(this.element);\n    },\n    onEnd: function(eventName, draggable) {\n        Sortable.unmark();\n        if(this.lastValue != Sortable.serialize(this.element)) {\n            this.observer(this.element, draggable);\n        }\n    }\n});\n\n//JASPERSOFT #3 - see comment block top of page for more info\nSortable.getSortableObserverConstructor = function () {\n    return SortableObserver;\n}\n//END JASPERSOFT #3\n\nDroppables.show = function(point, element) {\n    if (!this.drops.length) return;\n    var drop, affected = [];\n\n    this.drops.each(function(drop) {\n        if(Droppables.isAffected(point, element, drop)) {\n            if(element.hasClassName('sortDialogAvailable') || element.hasClassName('sortDialogSortFields')) {\n                if(drop.element.id == 'sortDialogAvailable' || drop.element.id == 'sortDialogSortFields') {\n                    affected.push(drop);\n                }\n            } else {\n                affected.push(drop);\n            }\n        }\n    });\n\n    if (affected.length > 0)\n        drop = Droppables.findDeepestChild(affected);\n\n    if (this.last_active && this.last_active != drop) {\n    \tthis.deactivate(this.last_active);\n    }\n    if (drop) {\n        Position.within(drop.element, point[0], point[1]);\n        if (drop.onHover) {\n            // Hack to dynamically change level/measure appearing when dragging from tree to some drop container\n            if (element.classNames().include(\"wrap\")) {\n                element.relativize();\n                element.classNames().include(\"measure\") ?\n                        element.classNames().set(\"draggable dragging measure\" + (element.classNames().include(\"supportsFilter\") ? \" supportsFilter\"  : \"\")) :\n                        element.classNames().set(\"draggable dragging dimension\" + (element.classNames().include(\"supportsFilter\") ? \" supportsFilter\"  : \"\"));\n                element.style.position = 'relative';\n                element.style.display = 'inline-block';\n                element.style.width = '';\n                element.style.height = '';\n            }\n\n            drop.onHover(element, drop.element, Position.overlap(drop.overlap, drop.element));\n        }\n\n        if (drop != this.last_active) {\n        \tDroppables.activate(drop);\n        }\n    }\n};\n\n"],"sourceRoot":""}