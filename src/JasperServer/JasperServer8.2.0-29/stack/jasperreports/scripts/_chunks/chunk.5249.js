(self.webpackChunkjrs_ui=self.webpackChunkjrs_ui||[]).push([[5249],{37697:(e,t,i)=>{"use strict";i.d(t,{Z:()=>n});const n={USER:"user",TENANT:"tenant",SERVER:"server"}},69623:(e,t,i)=>{"use strict";i.d(t,{Z:()=>A});var n=i(97836),s=i.n(n),o=i(72157),r=i.n(o),a=i(15892),l=i.n(a),d=i(62024),c=i(24916),h=i(37697),u=i(29338),m={},p={title:d.Z["attributes.confirm.dialog.title"]};m[c.Z.DELETE_CONFIRM]=p,m[c.Z.NAME_CONFIRM]={title:d.Z["attributes.confirm.dialog.title"],text:d.Z["attributes.confirm.name.dialog.text"]},m[c.Z.CANCEL_CONFIRM]={title:d.Z["attributes.confirm.dialog.title"],text:d.Z["attributes.confirm.cancel.dialog.text.custom"]},m[c.Z.PERMISSION_CONFIRM]=p,m[c.Z.EDIT_CONFIRM]=s().extend({},{text:d.Z["attributes.confirm.edit.dialog.text"]},p);var v=i(17296),f={},g=[d.Z["attributes.error.message.unknown.error"]];function b(e){return d.Z["attributes.attribute.permissionMask."+e]}function C(e){var t=e.responseJSON||{},i=t.errorCode,n=t.parameters,o=e.status,r=f[i||o]||g;return s().template(r[0])(r[1]?function(e,t){var i={};return s().each(e,(function(e,n){s().isObject(e)?i[e.field]=e.fn(t[n]):i[e]=t[n]})),i}(r[1],n):{})}f["access.denied"]=[d.Z["attributes.error.message.access.denied"],["name"]],f[401]=[d.Z["attributes.error.message.not.authenticated"]],f["illegal.parameter.value.error"]=[d.Z["attributes.illegal.parameter.value.error"]],f["attribute.invalid.permission.order"]=[d.Z["attributes.error.message.invalid.permission.order"],["name",{field:"strongerPermission",fn:b},{field:"inheritedPermission",fn:b}]],f["attribute.duplicate.server.level"]=[d.Z["attributes.error.message.duplicate.server.level"],["name"]];var _=i(36342),w=i(63100),y=i(76802);const M=_.Z.extend({className:"attributesDesigner",ui:{addNewBtn:".addNewItem"},events:{"click @ui.addNewBtn":"_addNewChildView","mousedown .filterItems, .actions.table-column button, .permission.table-column select, .secure.table-column input":"_checkCurrentAttribute","focus .filterItems, .actions.table-column button, .permission.table-column select, .secure.table-column input":"_checkCurrentAttribute"},childEvents:{active:"_activeChildView",changed:"_saveChildViewToChangedList","open:confirm":"_openConfirm",validate:"_validateChildView"},initialize:function(e){var t={type:(e=e||{}).type};this.notification=new w.Z,this.alertDialog=new y.Z,this.model=new(l().Model),this.changedModels=[],this.overriddenInheritedModels=[],_.Z.prototype.initialize.apply(this,arguments),this.childViewOptions=s().extend({},e.childViewOptions,t),this.emptyViewOptions=s().extend({},e.emptyViewOptions,t),this._initConfirmationDialogs(),this._initFilters&&this._initFilters(e),!s().isEmpty(e.buttons)&&e.buttonsContainer&&this._initButtons&&this._initButtons(e),this._initEvents()},render:function(e){return _.Z.prototype.render.apply(this,arguments),this._renderFilters&&this._renderFilters(e),this},hide:function(){this._resetFilters&&this._resetFilters(),_.Z.prototype.hide.apply(this,arguments)},saveChildren:function(){var e=this,t=this._filterChangeList("isDeleted"),i=s().difference(this.changedModels,t);return this.saveDfD=new(r().Deferred),this._validateNotAcceptedChildView().done((function(){e.containsUnsavedItems()?e.collection.save(e.changedModels,i).done(s().bind(e._successAjaxCallback,e)).fail(s().bind(e._errorAjaxCallback,e)):e.saveDfD.resolve()})).fail((function(){e.saveDfD.reject()})),this.saveDfD},_validateNotAcceptedChildView:function(){var e=new(r().Deferred);return this.currentChildView?this.currentChildView.runValidation(null,{dfd:e}):e.resolve(),e},revertChanges:function(){this.revertDfd=new(r().Deferred);var e,t=this,i=new(r().Deferred);return this.currentChildView?this.currentChildView.toggleActive().done(i.resolve):i.resolve(),i.done((function(){for(var i=t.changedModels.length-1;i>=0;i--)(e=t.changedModels[i]).isDeleted?t.revertViewRemoval(e):e.isNew()?t._removeModel(e):e.reset().setState("confirmedState",e.getState());t._resetChangedList(),t.revertDfd.resolve()})),this.revertDfd},getTemplate:function(){return s().template((0,v.Z)())},containsUnsavedItems:function(){return!!this.changedModels.length},removeView:function(e){var t=this._findChildrenByModel(e);e.isDeleted={index:this.collection.indexOf(e)},e.get("inherited")?this._saveRemovedOverriddenInheritedModelToList(e):this._saveChildViewToChangedList(t,!e.isNew()),this._removeModel(e)},revertViewRemoval:function(e){var t=e.isDeleted&&e.isDeleted.index,i=s().isNumber(t)?t:this.collection.models.length;this._deleteViewFromChangedList(e),e.reset(),this.collection.add(e,{at:i}),delete e.isDeleted},remove:function(){r()(window).off("beforeunload",this._onPageLeave),this._removeConfirmationDialogs(),this.notification&&this.notification.remove(),this.alertDialog&&this.alertDialog.remove(),_.Z.prototype.remove.apply(this,arguments)},_initEvents:function(){r()(window).on("beforeunload",s().bind(this._onPageLeave,this))},_initConfirmationDialogs:function(){this.confirmationDialogs={},s().each(c.Z,(function(e){this.confirmationDialogs[e]=function(e){return m[e]&&new u.Z(m[e])}(e)}),this),this.listenTo(this.confirmationDialogs[c.Z.DELETE_CONFIRM],"button:yes",this._onDeleteConfirm),this.listenTo(this.confirmationDialogs[c.Z.NAME_CONFIRM],"button:yes",this._onNameConfirm),this.listenTo(this.confirmationDialogs[c.Z.NAME_CONFIRM],"button:no",s().bind(this._revertChangedModelProperty,this,"name")),this.listenTo(this.confirmationDialogs[c.Z.CANCEL_CONFIRM],"button:yes",this.revertChanges),this.listenTo(this.confirmationDialogs[c.Z.EDIT_CONFIRM],"button:yes",this._onEditConfirm),this._initPermissionConfirmEvents&&this._initPermissionConfirmEvents()},_removeConfirmationDialogs:function(){s().each(this.confirmationDialogs,(function(e){e.remove()}),this)},_successAjaxCallback:function(e){this.notification.show({message:d.Z["attributes.notification.message.saved"],type:"success"}),this._sendSearchRequest()?this._searchForInherited(s().union(this.deletedModels,this.renamedModels)).then(this.saveDfD.resolve,this.saveDfD.reject):this.saveDfD.resolve(),e&&this._postProcessItems(e),this._resetChangedList()},_sendSearchRequest:function(){return!this._isServerLevel()&&this._searchForInherited&&this._deletedRenamedModels()},_deletedRenamedModels:function(){return this.deletedModels=this._filterChangeList("isDeleted"),this.renamedModels=this._filterChangeList("isRenamed"),this.deletedModels.length||this.renamedModels.length},_filterChangeList:function(e){var t;return s().compact(s().filter(this.changedModels,(function(i){if(t=i[e],!i.get("inherited"))return s().isFunction(t)?i[e]():t})))},_postProcessItems:function(e){var t,i=e.attribute;s().each(i,(function(e){(t=this._findChildrenByModel(e.name))&&t._onSaveSuccess()}),this)},_errorAjaxCallback:function(e){this.alertDialog.setMessage(C(e)),this.alertDialog.open(),this.saveDfD.reject()},_toggleAddNewItemButton:function(e){var t=r()(this.ui.addNewBtn);e?t.show():t.hide()},_checkCurrentAttribute:function(e){this.currentChildView&&(e.preventDefault(),this.confirmationDialogs[c.Z.EDIT_CONFIRM].open())},_onPageLeave:function(e){if(this.containsUnsavedItems())return(e||window.event).returnValue=d.Z["attributes.dialog.unsaved.changes"],d.Z["attributes.dialog.unsaved.changes"]},_onEditConfirm:function(){this.currentChildView.cancel()},_onNameConfirm:function(){this.validateDfD&&this.validateDfD.resolve()},_onDeleteConfirm:function(){var e=this.model.get("changedChildView"),t=e.model,i=t.get("name");e.isInherited()&&!t.isRenamed()?t.reset():(this.removeView(t),this._revertInheritedRemoval&&this._revertInheritedRemoval(i))},_isServerLevel:function(){return this.type===h.Z.SERVER||null===this.collection.getContext().id},_revertChangedModelProperty:function(e){(this.model.get("changedChildView")||this.currentChildView).model.reset(e,"confirmedState")},_addNewChildView:function(){var e=this.collection.addNew(),t=this._findChildrenByModel(e);this._saveChildViewToChangedList(t,!0),t.toggleActive()},_scrollToChildView:function(e){var t=this.$el.closest(".body"),i=t.height(),n=e.$el,s=n.height(),o=n.position(),r=i<o.top+s&&{scrollTop:t.scrollTop()+(o.top+s-i)};r&&t.animate(r,900)},_successValidationCallback:function(e,t,i){var n=this,s=e.model;this._filterInheritedViews&&this._filterInheritedViews(i),e.validateIfSecure(),e.toggleIfModelIsValid().done((function(){n._removeInheritedView&&n._removeInheritedView(s),n._addInheritedView&&n._addInheritedView(s),n._showPermissionConfirm&&n._showPermissionConfirm(e),n._resetFilters&&n._resetFilters(),t.resolve()}))},_deleteViewFromChangedList:function(e){var t=s().indexOf(this.changedModels,e);-1!==t&&this.changedModels.splice(t,1)},_removeModel:function(e){this.collection.remove(e)},_findModelsWhere:function(e){return this.collection.findWhere(e)},_findChildrenByModel:function(e){return(e=s().isString(e)?this._findModelsWhere({name:e}):e)&&this.children.findByModel(e)},_resetChangedList:function(){this.changedModels.length=0,this.overriddenInheritedModels.length=0,this._triggerChangeEvent()},_triggerChangeEvent:function(){this.toggleButtons&&this.toggleButtons(),this.trigger("change")},_activeChildView:function(e,t,i){this._setCurrentChildView(t?e:null),this._scrollToChildView(e),i&&i.resolve()},_saveChildViewToChangedList:function(e,t){var i=e.model;s().contains(this.changedModels,i)?!t&&this._deleteViewFromChangedList(i):t&&this.changedModels.push(i),e.invokeFiltration()&&this._resetFilters&&this._resetFilters(),this._triggerChangeEvent()},_saveRemovedOverriddenInheritedModelToList:function(e){!s().contains(this.overriddenInheritedModels,e)&&this.overriddenInheritedModels.push(e)},_openConfirm:function(e,t,i){this.validateDfD=i.dfd,this.model.set("changedChildView",e);var n=this.confirmationDialogs[t],o=t!==c.Z.CANCEL_CONFIRM||this.containsUnsavedItems();switch(t){case c.Z.DELETE_CONFIRM:n.setContent(s().template(d.Z["attributes.confirm.delete.dialog.text"],{name:e.model.get("name")}));break;case c.Z.PERMISSION_CONFIRM:n.setContent(d.Z["attributes.confirm.permission.dialog.text"])}o&&n.open()},_validateChildView:function(e,t){t=t||{};var i=e.model,n=t.dfd?t.dfd:new(r().Deferred),o=!i.isOriginallyInherited(),a=s().bind(this._successValidationCallback,this,e,n),l=this._isServerLevel();return e.getChangedProperties("name")&&!this._sendValidateSearchRequest(i)?this.collection.validateSearch(i,this.changedModels,o,l).then(a):a(),n},_sendValidateSearchRequest:function(e){var t=this._filterChangeList("isDeleted"),i=s().filter(t,(function(t){return e.get("name")===t.get("name")})).length,n=s().filter(this.changedModels,(function(t){return e.get("name")===t.get("name")})).length;return i&&!e.isDeleted&&n<=2},_setCurrentChildView:function(e){this._toggleAddNewItemButton(!e);var t=this.currentChildView;if(t){var i=t.model;i.isNew()&&!t.isStateConfirmed()&&this.removeView(i)}this.currentChildView=e}});var I=i(59661);const S={_initButtons:function(e){this.buttons=new I.Z({options:e.buttons,el:e.buttonsContainer,contextName:"button",optionTemplate:'<button class="button action up {{= primary ? \'primary\' : \'\'}}">\n\n    <span class="wrap">{{- label }}<span class="icon"></span></span>\n</button>\n'}),this.buttons.disable(),this.listenTo(this.buttons,"button:save",this.saveChildren),this.listenTo(this.buttons,"button:cancel",s().bind(this._openConfirm,this,null,c.Z.CANCEL_CONFIRM))},toggleButtons:function(){var e=this.buttons;this.containsUnsavedItems()?e.enable():(s().each(e.options,(function(e){e.$el.removeClass("over")})),e.disable())}};var N=i(45663),V=i.n(N),E=i(8045),T="defaultFilter",x=["true","false"],D=V().CompositeView.extend({className:"filtersContainer",events:{"change select":"_onCurrentFilterChange"},templateHelpers:function(){return{i18n:d.Z}},constructor:function(e){this._initCurrentCriteria(),V().CompositeView.apply(this,arguments)},initialize:function(e){this.targetCollection=e&&e.targetCollection||[],this.epoxifyView(),this.initEvents()},initEvents:function(){this.listenTo(this.targetCollection,"add",this.addItemToFilterCollection),this.listenTo(this.targetCollection,"remove",this.removeItemFromFilterCollection),this.listenTo(this.targetCollection,"sync",this._initFilterCollection)},filter:function(e){var t=e||this.currentCriteria,i=t.defaultFilter?this.filterCollection.models:this.filterCollection.where(t);this.targetCollection.reset(i)},reset:function(){this.currentCriteria.defaultFilter||(this.$el.find("option[value='defaultFilter::true']").prop("selected",!0),this._initCurrentCriteria(),this.filter())},addItemToFilterCollection:function(e){this.filterCollection.add(e)},removeItemFromFilterCollection:function(e){this.filterCollection.remove(e)},render:function(){return V().CompositeView.prototype.render.apply(this,arguments),this.applyEpoxyBindings(),this.delegateEvents(this.events),this},remove:function(){this.removeEpoxyBindings(),V().CompositeView.prototype.remove.apply(this,arguments)},_initCurrentCriteria:function(e,t){e=e||T,t=!!s().isUndefined(t)||t,this.currentCriteria={},this.currentCriteria[e]=t},_initFilterCollection:function(){this.filterCollection=new(l().Collection)(this.targetCollection.models)},_onCurrentFilterChange:function(e){var t=r()(e.target).val().split("::"),i=t[0],n=t[1];-1!==s().indexOf(x,n)&&(this._initCurrentCriteria(i,JSON.parse(n)),this.filter())}});s().extend(D.prototype,E.Z);const O=D;const R=V().ItemView.extend({template:function(e){return s().template('<option value="{{- model.field + \'::\' + model.value}}" {{ if(model.selected) { }}selected="selected"{{ } }} >{{- model.title }}</option>\n\n    <js-templateNonce></js-templateNonce>')({model:e})},onRender:function(){this.$el=this.$el.children(),this.$el.unwrap(),this.setElement(this.$el)}}),Z={_initFilters:function(e){this.filters=new O({collection:new(l().Collection)(e.filters||[]),childView:R,childViewContainer:"select",template:s().template('<span>\n\n    <js-templateNonce></js-templateNonce>\n    {{- i18n["attributes.table.filters.filter.by"]}}</span>\n<select class="filterItems"></select>\n\n'),model:new(l().Model)({currentFilter:null}),targetCollection:this.collection})},_renderFilters:function(e){var t=this.filters.render().el;return!e&&this.$el.prepend(t)},_resetFilters:function(){this.filters.reset()}},k={_findOriginallyInheritedModelByName:function(e,t){return s().find(e,(function(e){return e.isOriginallyInherited()&&e.get("name")===t}))},_filterInheritedViews:function(e){this.filteredInheriteds=this.collection.filterInheritedAttributes(e)},_findInheriteds:function(e){return this._findModelsWhere({name:e,inherited:!0})},_revertInheritedRemoval:function(e){if(!this._findInheriteds(e)){var t=this._findOriginallyInheritedModelByName(s().union(this.changedModels,this.overriddenInheritedModels),e);t&&this.revertViewRemoval(t)}},_searchForInherited:function(e){var t=this;return this.collection.search(e).done((function(e){e&&(t._filterInheritedViews(e),t.collection.addItemsToCollection(t.filteredInheriteds))}))},_removeInheritedView:function(e){var t=this._findInheriteds(e.get("name"));t&&this.removeView(t)},_addInheritedView:function(e){this.filteredInheriteds&&this.filteredInheriteds.length&&(e.resetField("id"),this.collection.addItemsToCollection(this.filteredInheriteds))}},F={_initPermissionConfirmEvents:function(){this.listenTo(this.confirmationDialogs[c.Z.PERMISSION_CONFIRM],"button:yes",this._onPermissionConfirm),this.listenTo(this.confirmationDialogs[c.Z.PERMISSION_CONFIRM],"button:no",this._onPermissionCancel)},_onPermissionConfirm:function(){var e;this.currentChildView?this.currentChildView.triggerModelValidation({dfd:this.validateDfD}):((e=this.model.get("changedChildView").model).setState("confirmedState"),e.hasChanged("inherited")&&this._resetFilters&&this._resetFilters())},_onPermissionCancel:function(){this._revertChangedModelProperty("_embedded")},_showPermissionConfirm:function(e){e._showPermissionConfirm(!1)}};var P={};function A(e,t){var i,n;return new(M.extend((i=P[e],n={},s().each(i,(function(e){s().extend(n,e)})),n)))(t)}P[h.Z.SERVER]=[S,F],P[h.Z.TENANT]=[Z,k,F],P[h.Z.USER]=[Z,k]},44474:(e,t,i)=>{"use strict";i.d(t,{Z:()=>ie});var n=i(97836),s=i.n(n),o=i(62024),r=i(72157),a=i.n(r),l=i(15892),d=i.n(l),c=i(12473),h=i(67e3);const u={CUSTOM:"custom",LOG4J:"log4j",MONDRIAN:"mondrian",AWS:"aws",JDBC:"jdbc",ADHOC:"adhoc",JI:"ji",CUSTOM_SERVER_SETTINGS:"customServerSettings"},m=["tenantId","id","userName"];var p="tenant:/",v="user:/";const f=d().Collection.extend({initialize:function(e,t){var i="rest_v2/attributes?_embedded=permission",n=i+"&group="+u.CUSTOM,s=(t=t||{}).context||{};this.urlGETTemplate=s.urlGETTemplate||n,this.urlPUTTemplate=s.urlPUTTemplate||i},parse:function(e){return e&&e.attribute?e.attribute:[]},setContext:function(e,t){e=e||{urlGETTemplate:this.urlGETTemplate,urlPUTTemplate:this.urlPUTTemplate};var i=new(a().Deferred);return s().isEqual(this.context,e)&&!t?i.resolve():(this.context=e,this.fetch({cache:!1,reset:!0,headers:{Accept:"application/attributes.collection.hal+json"}}).done(i.resolve)),i},getContext:function(){return this.context},url:function(e){var t=s().extend({},this.context),i="PUT"===e?this.urlPUTTemplate:this.urlGETTemplate;return s().each(m,(function(e){t[e]&&(t[e]=this.escapeLevelId(t[e]))}),this),h.Z.renderUrl(i,t,!1)},escapeLevelId:function(e){return encodeURIComponent(e).replace(/'/g,"%27")},save:function(e,t){var i=this._modelsToJSON(t,!0),n="application/hal+json";return(0,c.Z)({url:this.url("PUT")+this._concatNames(e),type:"PUT",cache:!1,contentType:n,headers:{Accept:n},data:JSON.stringify({attribute:i})})},validateSearch:function(e,t,i,n){var o=n&&this._concatGroups();return this.search(e,t,"&recursive=true",i,o).done(s().bind(this._successSearchCallback,this,e,t))},filterInheritedAttributes:function(e){var t=e&&e.attribute;return e?s().filter(t,(function(e){return e.inherited&&!this.findWhere({name:e.name,inherited:!0})}),this):null},search:function(e,t,i,n,s){i=i||"",s=s||"";var o="application/attributes.collection.hal+json";return(0,c.Z)({url:this.url()+this._concatNames(e,n)+i+s,type:"GET",dataType:"json",cache:!1,contentType:o,headers:{Accept:o}})},getHolder:function(){return this.context.id?p+this.context.id:this.context.tenantId?v+this.context.tenantId+"/"+this.context.userName:p},addItemsToCollection:function(e){!s().isArray(e)&&(e=[e]),s().each(e,(function(e){this.addNew(e)}),this)},addNew:function(e){e=e||{};var t=new this.model(e);return this.add(t),t},_modelsToJSON:function(e,t){return s().map(e,(function(e){return e.toJSON({omitValue:t})}))},_successSearchCallback:function(e,t,i){e=s().isArray(e)?e:[e],t=this._modelsToJSON(t);var n,o,r=this.getHolder();s().each(e,(function(e){o=r||e.holder,e.holder=o,i&&i.attribute.length&&(e.attr=i.attribute),t&&s().where(t,{name:e.get("name"),inherited:!1}).length>1&&(n={holder:o},e.attr?e.attr.push(n):e.attr=[n])}),this)},_concatGroups:function(){var e="";return s().each(s().omit(u,"CUSTOM"),(function(t){e+="&group="+t})),e},_concatNames:function(e,t){e=s().isArray(e)?e:[e];var i,n="",o=this,r=function(e){return"&name="+o.escapeLevelId(e)};return s().each(e,(function(e){i=e.get("id"),!t&&e.isRenamed()&&i&&(n+=r(i)),n+=r(e.get("name"))}),this),n}});var g=i(29562);let b;"CommonBundle"!==g.t?(g.h.CommonBundle=g.h.CommonBundle||{},b=g.h.CommonBundle):b=Object.keys(g.h).reduce(((e,t)=>({...e,...g.h[t]})),{});const C=b;var _=i(45663),w=i.n(_),y=i(8045);const M=w().Behavior.extend({events:{mouseover:"_onMouseOver",mouseout:"_onMouseOut"},_onMouseOver:function(e){this.view.trigger("mouseover",this.view.model,e)},_onMouseOut:function(e){this.view.trigger("mouseout",this.view.model,e)}});var I=w().ItemView.extend({behaviors:{Tooltip:{behaviorClass:M}},initialize:function(){this.epoxifyView()},render:function(){return w().ItemView.prototype.render.apply(this,arguments),this.applyEpoxyBindings(),this},remove:function(){this.removeEpoxyBindings(),w().ItemView.prototype.remove.apply(this,arguments)}});s().extend(I.prototype,y.Z);const S=I;var N=i(37697);function V(e){return(e=e||{}).readOnly?'<div class="name table-column viewer" data-tooltip="true">\n\n    <js-templateNonce></js-templateNonce>\n    <div class="item">\n        <p data-bind="text:name"></p></div>\n</div>\n<div class="value table-column viewer"\n     data-tooltip="true">\n    <div class="item">\n        <input readonly type="password" data-bind="toggle:secure, value:encrypt"/>\n\n        <p data-bind="toggle:not(secure), text:value"></p>\n    </div>\n</div>\n<div class="secure table-column viewer">\n    <div class="item">\n        <span name="secure" data-bind="text:secure"></span>\n    </div>\n</div>\n{{ if (type !== types.SERVER) { }}\n<div class="inherited table-column viewer">\n    <div class="item">\n        <span data-bind="text:inherited"></span>\n    </div>\n</div>\n{{ } if (type !== types.USER) { }}\n<div class="permission table-column viewer">\n    <div class="item">\n        <select data-bind="value:integer(permissionEmbedded)" disabled="disabled">\n            <option value="1">{{- i18n["attributes.attribute.permissionMask.1"]}}</option>\n            <option value="2">{{- i18n["attributes.attribute.permissionMask.2"]}}</option>\n            <option value="32">{{- i18n["attributes.attribute.permissionMask.32"]}}</option>\n            <option value="0">{{- i18n["attributes.attribute.permissionMask.0"]}}</option>\n        </select>\n    </div>\n</div>\n{{ } }}\n\n\n\n':e.empty?'<div class="table-column name">\n\n    <js-templateNonce></js-templateNonce>\n</div>\n<div class="table-column value"></div>\n<div class="table-column secure"></div>\n{{ if (type !== types.SERVER) { }}<div class="table-column inherited"></div>\n{{ } if (type !== types.USER) { }} <div class="table-column permission"></div> {{ } }}\n<div class="table-column actions"></div>\n':e.editMode?'<div class="editMode">\n\n    <js-templateNonce></js-templateNonce>\n    <span class="control firstInputGroup">\n        <span class="name editMode control" data-bind="validationErrorClass:name">\n            <div class="wrap">{{- i18n["attributes.name"]}}:</div>\n            <input type="text" data-bind="value:name, events:[\'keyup\'], disabled:inherited" />\n            <span class="message warning" data-bind="validationErrorText:name" ></span>\n        </span>\n        <span class="value editMode control" data-bind="validationErrorClass:value">\n            <div class="wrap">{{- i18n["attributes.value"]}}:</div>\n            <input type="password" data-bind="toggle:secure, value:encrypt, events:[\'keyup\']" />\n            <input type="text" data-bind="toggle:not(secure), value:value, events:[\'keyup\']" />\n            <span class="message warning" data-bind="validationErrorText:value"></span>\n        </span>\n    </span>\n    <label class="descriptionArea editMode control" data-bind="validationErrorClass:description">\n        <div class="wrap">{{- i18n["attributes.description"]}}:</div>\n        <input type="text" data-bind="value:description, events:[\'keyup\']" />\n        <span class="message warning" data-bind="validationErrorText:description"></span>\n    </label>\n    {{ if (type !== types.USER) { }}\n    <span class="permission editMode control">\n        <div class="wrap">{{- i18n["attributes.permission"]}}:</div>\n        <select data-bind="value:integer(permissionEmbedded)">\n            <option value="1">{{- i18n["attributes.attribute.permissionMask.1"]}}</option>\n            <option value="2">{{- i18n["attributes.attribute.permissionMask.2"]}}</option>\n            <option value="32">{{- i18n["attributes.attribute.permissionMask.32"]}}</option>\n            <option value="0">{{- i18n["attributes.attribute.permissionMask.0"]}}</option>\n        </select>\n    </span>\n    {{ } }}\n    <div class="secure editMode control">\n        <input name="secure" data-bind="checked:secure" type="checkbox"/>\n        <span class="wrap">{{- i18n["attributes.encrypt"]}}</span>\n    </div>\n    <div class="actions control">\n        <button class="button action up primary ok editMode">\n            <span class="wrap">{{- i18n2["button.ok"] }}</span>\n        </button>\n        <button class="button action up cancel editMode">\n            <span class="wrap">{{- i18n2["button.cancel"] }}</span>\n        </button>\n    </div>\n</div>\n':'<div class="name table-column" data-tooltip="true">\n\n    <js-templateNonce></js-templateNonce>\n    <div class="item"><p data-bind="text:name"></p></div>\n</div>\n<div class="value table-column"\n     data-tooltip="true">\n    <div class="item">\n        <input readonly type="password" data-bind="toggle:secure, value:encrypt"/>\n        <p data-bind="toggle:not(secure), text:value"></p>\n    </div>\n</div>\n<div class="secure table-column">\n    <div class="item">\n        <input data-bind="toggle:not(readOnly), checked:secure" type="checkbox"/>\n        <span data-bind="toggle:readOnly, text:secure"></span>\n    </div>\n</div>\n{{ if (type !== types.SERVER) { }}\n<div class="inherited table-column">\n    <div class="item">\n        <span data-bind="text:inherited"></span>\n    </div>\n</div>\n{{ } if (type !== types.USER) { }}\n<div class="permission table-column">\n    <div class="item">\n        <select data-bind="value:integer(permissionEmbedded), disabled:readOnly">\n            <option value="1">{{- i18n["attributes.attribute.permissionMask.1"]}}</option>\n            <option value="2">{{- i18n["attributes.attribute.permissionMask.2"]}}</option>\n            <option value="32">{{- i18n["attributes.attribute.permissionMask.32"]}}</option>\n            <option value="0">{{- i18n["attributes.attribute.permissionMask.0"]}}</option>\n        </select>\n    </div>\n</div>\n{{ } }}\n<div class="actions table-column">\n    <div class="item">\n        <div class="actionButtons">\n            <span data-bind="toggle:not(readOnly)">\n                <button name="editButton" class="button action simple edit up"></button>\n            </span>\n            <span data-bind="toggle:not(disableRemove)">\n                <button name="deleteButton" class="button action simple delete up"></button>\n            </span>\n        </div>\n    </div>\n</div>\n\n'}var E="~secure~";const T=S.extend({className:"table-row",template:s().template(V({readOnly:!0})),templateHelpers:function(){return{i18n:o.Z,i18n2:C,type:this.type,types:N.Z,encrypted:E}},computeds:{encrypt:{get:function(){return E},set:function(e){this.setBinding("value",e)}}},initialize:function(e){this.type=e.type,S.prototype.initialize.apply(this,arguments)}});var x=i(24916);const D=w().Behavior.extend({events:{"click .delete":"_onDeleteClick"},_onDeleteClick:function(e){this.view.trigger("open:confirm",x.Z.DELETE_CONFIRM,this.view,this.view.model)}}),O=1,R=2;var Z="~secure~";const k=T.extend({tagName:"div",className:"table-row",ui:{passwordInput:"input[type='password']"},events:s().extend({},T.prototype.events,{"click .edit":"toggleActive","click .cancel":"cancel","click .ok":"runValidation","click @ui.passwordInput":"toggleValue","blur @ui.passwordInput":"toggleValue"}),modelEvents:{change:"_onModelChange"},behaviors:s().extend(T.prototype.behaviors,{DeleteConfirm:{behaviorClass:D}}),computeds:s().extend(T.prototype.computeds,{readOnly:{deps:["inherited","permissionMask"],get:function(e,t){var i=t===R;return i||e&&i}},disableRemove:{deps:["inherited","permissionMask"],get:function(e,t){return e||t===R}}}),initialize:function(e){this.editMode=!1,this._onViewInitialize&&this._onViewInitialize(),T.prototype.initialize.apply(this,arguments)},render:function(){return T.prototype.render.apply(this,arguments),this._onViewRender&&this._onViewRender(),this},getTemplate:function(){var e=!this.editMode&&this.model.get("name");return s().template(V({editMode:!e}))},toggleActive:function(){var e=new(a().Deferred),t=this;return this.toggleMode().done((function(){t.trigger("active",t.editMode,e)})),e},toggleMode:function(){var e=new(a().Deferred);return this.editMode=!this.editMode,this.editMode?this.slideDown(e):this.slideUp(e),e},toggleIfModelIsValid:function(){return this.validateModel()?(this.model.setState("confirmedState"),this.model.isNew()&&this.confirmState(),this.modelChanged=null,this.toggleActive()):new(a().Deferred)},slideDown:function(e){return this.render().hide().slideDown({done:function(){e.resolve()}}),this},slideUp:function(e,t){t=t||"28px";var i=this;return this.$el.animate({height:t},{done:function(){i.render().$el.css({height:"100%"}).show(),e.resolve()}}),this},hide:function(){return this.$el.hide()},show:function(){return this.$el.show()},cancel:function(){this.model.set(this.model.getState("confirmedState")),this.toggleActive()},runValidation:function(e,t){this.validateModel(t)&&this.triggerConfirmOpening(t)},triggerConfirmOpening:function(e){e=e||{};var t=new(a().Deferred),i=this,n=function(){i.permissionConfirmShouldBeShown?i._openPermissionConfirm&&s().bind(i._openPermissionConfirm,i,e)():i.triggerModelValidation(e)};this.model.isNew()?n():this.modelChanged?(this.modelChanged.name?this.trigger("open:confirm",x.Z.NAME_CONFIRM,{dfd:t}):t.resolve(),t.done((function(){i.modelChanged._embedded?n():i.triggerModelValidation(e)}))):this.toggleActive()},triggerModelValidation:function(e){this.model.trimAttrs(["name","value","description"]),this.trigger("validate",e)},validateModel:function(e){e=e||{};var t=this.model.isValid(!0);return!t&&e.dfd&&e.dfd.reject(),t},confirmState:function(e){this.model.confirmState(e)},isStateConfirmed:function(){return this.model.isStateConfirmed()},isInherited:function(){return this.model.getState("originalState").inherited},getChangedProperties:function(e){if(this.modelChanged)return e?this.modelChanged[e]:this.modelChanged},toggleValue:function(e){if(this.editMode){var t=a()(e.target),i=t.val(),n=i===Z,s=a()(e.relatedTarget).hasClass("ok"),o="click"===e.type;i&&(o&&n&&(t.val(""),this.model.resetField("value")),o||s||t.val(Z))}},invokeFiltration:function(){var e=this.model;if(e.hasChanged("secure")||e.hasChanged("_embedded")&&!this._isPermissionLimited())return!this.editMode&&e.hasChanged("inherited")},validateIfSecure:function(){var e=this.getChangedProperties("name");this.model.validateIfSecure=this.model.validateSecureValue()&&e||!1},_onSaveSuccess:function(){this.modelChanged=null,this.model.setId(),this.model.get("secure")&&this.model.resetField("value"),this.model.setState(),this.model.setState("confirmedState")},_onModelChange:function(e){this.modelChanged=this.modelChanged||{};var t,i=e.changedAttributes(),n=this.model.getState(),o=this.isInherited(),r=e.isNew();s().each(i,(function(e,t){if("inherited"!==t){var i=n[t];(s().isObject(e)?s().isEqual(i,e):i===e)?delete this.modelChanged[t]:this.modelChanged[t]=e}}),this),t=!s().isEmpty(this.modelChanged),o&&e.set("inherited",!t),!this.editMode&&i.secure&&e.setState("confirmedState"),this.trigger("changed",t||r),this.model.validate(this.modelChanged)}});const F=w().ItemView.extend({className:"table-row",templateHelpers:function(){return{type:this.type,types:N.Z}},initialize:function(e){e=e||{},this.type=e.type,this.template=s().template(V({empty:!0}))}});var P={1:1,2:2,32:3,0:4};const A={_onViewInitialize:function(){this.listenTo(this.model,"change:_embedded",s().bind(this._onPermissionChange,this))},_onViewRender:function(){var e=this.model.get("inherited"),t=this.model.getPermission(),i=t&&t.mask,n=s().isNumber(i)?i:this.model.get("permissionMask");e&&n!==O&&this.$el.find("option:selected").prevAll().attr("disabled","disabled")},_onPermissionChange:function(e,t){var i=this._isPermissionLimited(t);this._showPermissionConfirm(!1),this.modelChanged._embedded&&i?this.editMode?this._showPermissionConfirm(!0):this._openPermissionConfirm():!this.editMode&&e.setState("confirmedState")},_showPermissionConfirm:function(e){this.permissionConfirmShouldBeShown=e},_isPermissionLimited:function(e){var t=this.model,i=t.getState("confirmedState");return P[t.getPermission(e).mask]>P[t.getPermission(i._embedded).mask]},_openPermissionConfirm:function(e){this.trigger("open:confirm",x.Z.PERMISSION_CONFIRM,e||{})}};var L=i(59772);let B;"AttributeBundle"!==g.t?(g.h.AttributeBundle=g.h.AttributeBundle||{},B=g.h.AttributeBundle):B=Object.keys(g.h).reduce(((e,t)=>({...e,...g.h[t]})),{});const j=B;var U=i(34052),$=i(80451),z=i.n($);const J=255,G=2e3;var W=U.Z.extend({bundle:j});const q=[{required:!0,msg:new W("attributes.error.attribute.name.empty")},{maxLength:J,msg:new W("attributes.error.attribute.name.too.long",J)},{doesNotContainSymbols:"\\\\/",msg:new W("attributes.error.attribute.name.invalid")}];var H=U.Z.extend({bundle:j}),K=J,Q=G,X=z().Model.extend({defaults:{id:void 0,name:void 0,value:"",description:"",inherited:!1,permissionMask:1,secure:!1},constructor:function(){this._initModelWithPermissionDefaults&&this._initModelWithPermissionDefaults(),z().Model.apply(this,arguments)},initialize:function(){this.get("id")||this.setId(),this.validateSameNames=!1,this.setState("originalState"),this.setState("confirmedState")},url:function(){var e=encodeURIComponent(this.id).replace(/'/g,"%27");return this.collection.url(this.isNew()?"":e)},validation:{name:q.concat([{fn:function(){if(this.attr){for(var e,t,i=this.attr.length,n=0;n<i;n++){if(t=this.attr[n],s().defaults(t,this.defaults),this.holder===t.holder&&this.get("inherited")===t.inherited){e="attributes.error.attribute.name.already.exist";break}if(t.inherited&&t.permissionMask===R){e="attributes.error.attribute.name.already.exist.at.higher.level";break}}return this.attr=null,this.holder=null,e&&new H(e)}}},{fn:function(){if(this.validateIfSecure)return new H("attributes.error.attribute.secure.renaming.not.allowed")}}]),value:[{maxLength:Q,msg:new H("attributes.error.attribute.value.too.long",Q)},{fn:function(){if(this.validateIfSecure)return this.validateIfSecure=!1," "}}],description:[{maxLength:K,msg:new H("attributes.error.attribute.description.too.long",K)}]},setId:function(){var e=this.get("name");e!==this.get("id")&&this.set("id",e)},toggleSameNamesValidation:function(){this.validateSameNames=!this.validateSameNames},resetField:function(e){this.set(e,this.defaults[e])},reset:function(e,t){var i={};return t=this.getState(t),i[e]=t[e],this.set(e?i:t),this},isRenamed:function(){return this.get("name")!==this.get("id")},isOriginallyInherited:function(){return this.originalState.inherited},isOverridden:function(){return!this.compareAttribute("inherited")},compareAttribute:function(e){return this.originalState[e]===this.confirmedState[e]},setState:function(e,t){t=t||this.attributes,this[e||"originalState"]=s().clone(t)},getState:function(e){return this[e||"originalState"]},trimAttrs:function(e,t){s().each(e,(function(e){var i=this.get(e);this.set(e,a().trim(i),t)}),this)},toJSON:function(e){e=e||{};var t=z().Model.prototype.toJSON.apply(this,arguments);return e.omitValue&&this.validateSecureValue()&&s().omit(t,"value")||t},confirmState:function(e){this.stateConfirmed=e||!0},isStateConfirmed:function(){return this.stateConfirmed},validateSecureValue:function(){var e=s().isEmpty(this.get("value")),t=this.get("secure");return!(this.isNew()||this.isOverridden())&&t&&e}});s().extend(X.prototype,L.Z.mixin);const Y=X,ee="role:/ROLE_ADMINISTRATOR",te={computeds:{permissionEmbedded:{deps:["_embedded","permissionMask"],get:function(e,t){var i=this.getPermission(e);return i?i.mask:t},set:function(e){var t=s().cloneDeep(this.get("_embedded")),i=this.getPermission(t);return i?i.mask=e:t.permission.push({mask:e,recipient:ee}),{_embedded:t}}}},_initModelWithPermissionDefaults:function(){this.defaults=s().extend({},this.defaults,{_embedded:{permission:[{recipient:ee,mask:"1"}]}})},getPermission:function(e){if(e=e||this.get("_embedded"))return s().find(e.permission,(function(e){return e.recipient===ee}))}};function ie(e){var t=new f([],{context:e.context,model:e.type===N.Z.USER?Y:Y.extend(te)}),i={type:e.type,collection:t,childViewContainer:".tbody",tooltip:{template:"{{ if( !_.isUndefined(model.value) ) { }}\n    <p class='message label'>{{- i18n['attributes.value'] + ':'}}</p>\n    <p class='message'>{{- model.value }}</p>\n{{ }else{ }}\n    <p class='message label'>{{- i18n['attributes.name'] + ':'}}</p>\n    <p class='message'>{{- model.name }}</p>\n    <p class='message label'>{{- i18n['attributes.description'] + ':'}}</p>\n    <p class='message'>{{- model.description }}</p>\n{{ } }}\n\n    <js-templateNonce></js-templateNonce>",i18n:o.Z}};return s().extend(i,e.type!==N.Z.SERVER?{$container:e.container,designer:{childView:e.type===N.Z.USER?k:k.extend(A),emptyView:F,filters:[{title:o.Z["attributes.table.filters.all"],value:"true",field:"defaultFilter",selected:!0},{title:o.Z["attributes.table.filters.true"],value:"true",field:"inherited"},{title:o.Z["attributes.table.filters.false"],value:"false",field:"inherited"}]},viewer:{childView:T}}:{el:e.el,childView:k.extend(A),emptyView:F,buttons:[{label:C["button.save"],action:"save",primary:!0},{label:C["button.cancel"],action:"cancel",primary:!1}],buttonsContainer:".buttonsContainer"})}},17296:(e,t,i)=>{"use strict";i.d(t,{Z:()=>n});function n(e){return(e=e||{}).readOnly?e.empty?'<div class="tbody">\n\n    <js-templateNonce></js-templateNonce>\n    <p class="emptyTemplateMessage">{{- i18n["attributes.no.attributes"]}}</p>\n</div>\n':'<div class="baseTableContainer {{-type}}">\n\n    <js-templateNonce></js-templateNonce>\n    <div class="baseTable">\n        <div class="table-row thead">\n            <div class="name table-column viewer">\n                <div class="item">\n                    <p>\n                        {{- i18n["attributes.name"]}}\n                    </p>\n                </div>\n            </div>\n            <div class="value table-column viewer">\n                <div class="item">\n                    <p>\n                        {{- i18n["attributes.value"]}}\n                    </p>\n                </div>\n            </div>\n            <div class="secure table-column viewer">\n                <div class="item">\n                    <p>\n                        {{- i18n["attributes.encrypted"]}}\n                    </p>\n                </div>\n            </div>\n            {{ if (type !== types.SERVER) { }}\n            <div class="inherited table-column viewer">\n                <div class="item">\n                    <p>\n                        {{- i18n["attributes.inherited"]}}\n                    </p>\n                </div>\n            </div>\n            {{ } if (type !== types.USER) { }}\n            <div class="permission table-column viewer">\n                <div class="item">\n                    <p>\n                        {{- i18n["attributes.permission"]}}\n                    </p>\n                </div>\n            </div>\n            {{ } }}\n        </div>\n        <div class="tbody"></div>\n    </div>\n</div>\n':'<div class="baseTableContainer {{-type}}">\n\n    <js-templateNonce></js-templateNonce>\n    <div class="baseTable">\n        <div class="table-row thead">\n            <div class="name table-column">\n                <div class="item">\n                    <p>\n                        {{- i18n["attributes.name"]}}\n                    </p>\n                </div>\n            </div>\n            <div class="value table-column">\n                <div class="item">\n                    <p>\n                        {{- i18n["attributes.value"]}}\n                    </p>\n                </div>\n            </div>\n            <div class="secure table-column">\n                <div class="item">\n                    <p>\n                        {{- i18n["attributes.encrypted"]}}\n                    </p>\n                </div>\n            </div>\n            {{ if (type !== types.SERVER) { }}\n            <div class="inherited table-column">\n                <div class="item">\n                    <p>\n                        {{- i18n["attributes.inherited"]}}\n                    </p>\n                </div>\n            </div>\n            {{ } if (type !== types.USER) { }}\n            <div class="permission table-column">\n                <div class="item">\n                    <p>\n                        {{- i18n["attributes.permission"]}}\n                    </p>\n                </div>\n            </div>\n            {{ } }}\n            <div class="actions table-column"></div>\n        </div>\n        <div class="tbody"></div>\n    </div>\n    <a href="#" class="addNewItem">{{- i18n["attributes.button.add.new"]}}</a>\n</div>'}},14623:(e,t,i)=>{"use strict";i.d(t,{Z:()=>s});var n=i(37697);const s={initScrollEvent:function(e){var t=e.type===n.Z.SERVER?e.$el.parent():e.$container.parent(),i=e.$el.find(".addNewItem");t.scroll((function(e){i.css("margin-right",20-t.scrollLeft()+"px")}))},detachScrollEvent:function(e){e.off()}}},36342:(e,t,i)=>{"use strict";i.d(t,{Z:()=>p});var n=i(72157),s=i.n(n),o=i(97836),r=i.n(o),a=i(62024),l=i(37697),d=i(45663),c=i.n(d),h=i(26065);const u=c().CompositeView.extend({initialize:function(e){var t=(e=e||{}).tooltip;t&&t.template&&t.i18n&&(this.tooltip=new h.Z({i18n:t.i18n,attachTo:this.$el,contentTemplate:t.template}))},remove:function(){this.tooltip&&this.tooltip.remove(),c().CompositeView.prototype.remove.apply(this,arguments)}});var m=i(17296);const p=u.extend({className:"attributesViewer",templateHelpers:function(){return{i18n:a.Z,type:this.type,types:l.Z}},initialize:function(e){e=e||{},this.type=e.type,this.childViewOptions=r().extend({},e.childViewOptions,{type:this.type}),this.$container=s()(e.$container),u.prototype.initialize.apply(this,arguments),this.tooltip&&this._initTooltipEvents()},render:function(){return u.prototype.render.apply(this,arguments),this.$container.append(this.$el),this},setContext:function(e,t){return this.collection.setContext(e,t)},show:function(){this.$el.show()},hide:function(){this.$el.hide()},getTemplate:function(){var e=(0,m.Z)({readOnly:!0,empty:!this.collection.models.length});return r().template(e)},_initTooltipEvents:function(){this.listenTo(this,"childview:mouseover",this._onChildViewMouseOver),this.listenTo(this,"childview:mouseout",this._onChildViewMouseOut)},_onChildViewMouseOver:function(e,t,i){var n=s()(i.target).closest(".table-column");n.hasClass("name")&&(t=r().pick(t.toJSON(),["name","description"])),n.hasClass("value")&&(t=r().pick(t.toJSON(),"value")),this.tooltip.show(t)},_onChildViewMouseOut:function(e,t,i){this.tooltip.hide()}})},24916:(e,t,i)=>{"use strict";i.d(t,{Z:()=>n});const n={CANCEL_CONFIRM:"cancelConfirm",DELETE_CONFIRM:"deleteConfirm",PERMISSION_CONFIRM:"permissionConfirm",NAME_CONFIRM:"nameConfirm",EDIT_CONFIRM:"editConfirm"}},62024:(e,t,i)=>{"use strict";i.d(t,{Z:()=>o});var n=i(29562);let s;"AttributesBundle"!==n.t?(n.h.AttributesBundle=n.h.AttributesBundle||{},s=n.h.AttributesBundle):s=Object.keys(n.h).reduce(((e,t)=>({...e,...n.h[t]})),{});const o=s}}]);
//# sourceMappingURL=chunk.5249.js.map