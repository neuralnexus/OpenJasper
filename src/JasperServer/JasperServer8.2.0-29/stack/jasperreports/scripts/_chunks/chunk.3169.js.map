{"version":3,"sources":["webpack://jrs-ui/./src/commons/commons.minimal.main.js","webpack://jrs-ui/./src/core/core.key.events.js","webpack://jrs-ui/./src/repository/repository.search.globalSearchBoxInit.js","webpack://jrs-ui/./src/commons/commons.main.js","webpack://jrs-ui/./src/components/components.searchBox.js"],"names":["heartbeat","jrsConfigs","aboutDialog","helpLink","$","on","e","preventDefault","webHelp","stdnav","stdnavPluginModalTrap","stdnavPluginAnchor","stdnavPluginButton","stdnavPluginForms","stdnavPluginGrid","stdnavPluginList","stdnavPluginActionMenu","stdnavPluginActionMenuTrap","stdnavPluginMainMenu","stdnavPluginDynamicList","stdnavPluginToolbar","stdnavTabList","stdnavPluginToolbarV2","stdnavPluginWorkflowCard","forEach","plugin","activate","keyManager","ignoreKeyDown","Keys","noBubbleOnKeyUp","document","observe","event","include","keyCode","Event","stop","focused","target","KEY_RETURN","shiftKey","fire","targetEvent","node","KEY_LEFT","KEY_RIGHT","KEY_UP","KEY_DOWN","KEY_PAGEUP","KEY_PAGEDOWN","KEY_HOME","KEY_END","isMetaHeld","KEY_ESC","KEY_TAB","KEY_DELETE","isShiftHeld","hasTooltipEl","closest","tooltipModule","fireMenuItemAction","matched","elem","menuElement","jQuery","layoutModule","selected","thisItem","is","parent","onmouseup","setTimeout","curry","memo","matchMeOrUp","identify","primaryNavModule","_searchBox","_containerId","_searchInputId","initialize","this","SearchBox","id","onSearch","text","val","encodeUriParameter","bind","setText","addClass","primaryNavigation","globalSearch","options","_id","_dom","_enabled","_process","_assignHandlers","addMethod","_input","find","_clearButton","_searchButton","_keyPressHandler","bindAsEventListener","_clearHandler","_searchHandler","_doSearch","getText","blank","removeClass","getValue","setValue","_updateClearButtonVisibility","buttonManager","attr"],"mappings":"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","file":"_chunks/chunk.3169.js","sourcesContent":["/*\n * Copyright (C) 2005 - 2022 TIBCO Software Inc. All rights reserved.\n * http://www.jaspersoft.com.\n *\n * Unless you have purchased a commercial license agreement from Jaspersoft,\n * the following license terms apply:\n *\n * This program is free software: you can redistribute it and/or modify\n * it under the terms of the GNU Affero General Public License as\n * published by the Free Software Foundation, either version 3 of the\n * License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the\n * GNU Affero General Public License for more details.\n *\n * You should have received a copy of the GNU Affero General Public License\n * along with this program. If not, see <http://www.gnu.org/licenses/>.\n */\n\nimport './commons.bare.main';\nimport heartbeat from '../components/components.heartbeat';\nimport jrsConfigs from 'js-sdk/src/jrs.configs';\nimport aboutDialog from '../components/components.about';\nimport webHelp from '../components/components.webHelp';\nimport $ from 'jquery';\nimport 'focus-visible';\n\n// Basic stdnav plugins from js-sdk\nimport stdnav from 'js-sdk/src/common/stdnav/stdnav';\nimport stdnavPluginModalTrap from 'js-sdk/src/common/stdnav/plugins/stdnavPluginModalTrap';\nimport stdnavPluginAnchor from 'js-sdk/src/common/stdnav/plugins/stdnavPluginAnchor';\nimport stdnavPluginButton from 'js-sdk/src/common/stdnav/plugins/stdnavPluginButton';\nimport stdnavPluginGrid from 'js-sdk/src/common/stdnav/plugins/stdnavPluginGrid';\nimport stdnavPluginList from 'js-sdk/src/common/stdnav/plugins/stdnavPluginList';\nimport stdnavPluginTable from 'js-sdk/src/common/stdnav/plugins/stdnavPluginTable';\nimport stdnavPluginActionMenu from '../stdnav/plugins/stdnavPluginActionMenu';\nimport stdnavPluginActionMenuTrap from '../stdnav/plugins/stdnavPluginActionMenuTrap';\nimport stdnavPluginMainMenu from '../stdnav/plugins/stdnavPluginMainMenu';\nimport stdnavPluginDynamicList from '../stdnav/plugins/stdnavPluginDynamicList';\nimport stdnavPluginForms from '../stdnav/plugins/stdnavPluginForms';\nimport stdnavTabList from '../stdnav/plugins/stdnavTabList';\nimport stdnavPluginToolbar from '../stdnav/plugins/stdnavPluginToolbar';\nimport stdnavPluginToolbarV2 from '../stdnav/plugins/stdnavPluginToolbarV2';\nimport stdnavPluginWorkflowCard from 'js-sdk/src/common/stdnav/plugins/stdnavPluginWorkflowCard';\nimport '../config/dateAndTimeSettings';\n\n//Heartbeat\nheartbeat.initialize(jrsConfigs.heartbeatInitOptions);\nheartbeat.start();\njrsConfigs.initAdditionalUIComponents && aboutDialog.initialize();    //Web help\n//Web help\nvar helpLink = $('#helpLink');\nif (helpLink) {\n    helpLink.on('click', function (e) {\n        e.preventDefault();\n        webHelp.displayWebHelp();\n    });\n}\nif (jrsConfigs.enableAccessibility === 'true') {\n    // Basic stdnav plugins from js-sdk\n    stdnav.activate();\n\n    [\n        stdnavPluginModalTrap,\n        stdnavPluginAnchor,\n        stdnavPluginButton,\n        stdnavPluginForms,\n        stdnavPluginGrid,\n        stdnavPluginList,\n        // stdnavPluginTable,\n        stdnavPluginActionMenu,\n        stdnavPluginActionMenuTrap,\n        stdnavPluginMainMenu,\n        stdnavPluginDynamicList,\n        stdnavPluginToolbar,\n        stdnavTabList,\n        stdnavPluginToolbarV2,\n        stdnavPluginWorkflowCard\n    ].forEach(plugin => plugin.activate(stdnav))\n\n    stdnav.start();\n}\n","/*\n * Copyright (C) 2005 - 2022 TIBCO Software Inc. All rights reserved.\n * http://www.jaspersoft.com.\n *\n * Unless you have purchased a commercial license agreement from Jaspersoft,\n * the following license terms apply:\n *\n * This program is free software: you can redistribute it and/or modify\n * it under the terms of the GNU Affero General Public License as\n * published by the Free Software Foundation, either version 3 of the\n * License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the\n * GNU Affero General Public License for more details.\n *\n * You should have received a copy of the GNU Affero General Public License\n * along with this program. If not, see <http://www.gnu.org/licenses/>.\n */\n\n\n/**\n * @version: $Id$\n */\n\n/*\n * event handler for generic key events\n */\n\nimport jQuery from 'jquery';\nimport {\n    Keys,\n    isMetaHeld,\n    isShiftHeld,\n    matchMeOrUp\n} from \"../util/utils.common\";\n\nimport actionModel from '../actionModel/actionModel.modelGenerator';\nimport layoutModule from '../core/core.layout';\nimport primaryNavModule from '../actionModel/actionModel.primaryNavigation';\nimport {tooltipModule} from '../components/components.tooltip';\n\nvar keyManager = {\n    ignoreKeyDown : [\n        Keys.DOM_VK_SHIFT,\n        Keys.DOM_VK_CONTROL,\n        Keys.DOM_VK_ALT\n    ],\n\n    noBubbleOnKeyUp : [\n        Keys.DOM_VK_F10\n    ]\n};\n\ndocument.observe('keyup', function(event){\n    if (keyManager.noBubbleOnKeyUp.include(event.keyCode)) {\n        Event.stop(event);\n    }\n});\n\ndocument.observe('keydown', function(event){\n\n\n    if (keyManager.ignoreKeyDown.include(event.keyCode)) {\n        return;\n    }\n\n    //debug only\n    //window.console && console.log('document.activeElement',document.activeElement);\n    //window.console && console.log('keydown',event.target,event.keyCode);\n\n    var focused = event.target;\n\n    if(event.keyCode == Event.KEY_RETURN) {\n        focused.fire('key:enter', {targetEvent: event, node: focused});\n        return;\n    }\n\n    if(event.keyCode == 32) {\n        focused.fire('key:space', {targetEvent: event, node: focused});\n        return;\n    }\n\n    if(event.shiftKey && (event.keyCode == Keys.DOM_VK_F10)) {\n        //prevent from showing native menu, specially in IE9\n    \tEvent.stop(event);\n        focused.fire('key:contextMenu', {targetEvent: event, node: focused});\n        return;\n    }\n    if(event.keyCode == Event.KEY_LEFT) {\n        focused.fire('key:left', {targetEvent: event, node: focused});\n        return;\n    }\n    if(event.keyCode == Event.KEY_RIGHT) {\n        focused.fire('key:right', {targetEvent: event, node: focused});\n        return;\n    }\n    if(event.keyCode == Event.KEY_UP) {\n        focused.fire('key:up', {targetEvent: event, node: focused});\n        return;\n    }\n    if(event.keyCode == Event.KEY_DOWN) {\n        focused.fire('key:down', {targetEvent: event, node: focused});\n        return;\n    }\n    if(event.keyCode == Event.KEY_PAGEUP) {\n        focused.fire('key:pageup', {targetEvent: event, node: focused});\n        return;\n    }\n    if(event.keyCode == Event.KEY_PAGEDOWN) {\n        focused.fire('key:pagedown', {targetEvent: event, node: focused});\n        return;\n    }\n    if(event.keyCode == Event.KEY_HOME) {\n        focused.fire('key:home', {targetEvent: event, node: focused});\n        return;\n    }\n    if(event.keyCode == Event.KEY_END) {\n        focused.fire('key:end', {targetEvent: event, node: focused});\n        return;\n    }\n    //ctrl + y\n    if(isMetaHeld(event) && (event.keyCode == 89)) {\n        focused.fire('key:redo', {targetEvent: event, node: focused});\n        return;\n    }\n    //ctrl + z\n    if(isMetaHeld(event) && (event.keyCode == 90)) {\n        focused.fire('key:undo', {targetEvent: event, node: focused});\n        return;\n    }\n    //escape\n    if(event.keyCode == Event.KEY_ESC) {\n        focused.fire('key:escape', {targetEvent: event, node: focused});\n        return;\n    }\n\n    // NOTE: Reacting to the TAB key is not recommended for accessibility\n    // reasons.\n    if(event.keyCode == Event.KEY_TAB) {\n        focused.fire('key:tab', {targetEvent: event, node: focused});\n        return;\n    }\n\n    //delete\n    if(event.keyCode == Event.KEY_DELETE) {\n        focused.fire('key:delete', {targetEvent: event, node: focused});\n        return;\n    }\n\n\n    /**\n     * Adhoc and Dashboard specific keys events\n     */\n\n    //command / ctrl + a\n    if((event.keyCode == 65) && isMetaHeld(event)) {\n        focused.fire('key:selectAll', {targetEvent: event, node: focused});\n        return;\n    }\n\n    //fire for save\n    //command / ctrl + s (save)\n    if((event.keyCode == 83) && isMetaHeld(event) && !isShiftHeld(event)) {\n        focused.fire('key:save', {targetEvent: event, node: focused});\n        return;\n    }\n\n\n    //fire for zoom in\n    //command / ctrl + shift + l (zoom in)\n    if((event.keyCode == 76) && isMetaHeld(event) && isShiftHeld(event)) {\n        focused.fire('key:chartZoomIn', {targetEvent: event, node: focused});\n        return;\n    }\n\n\n    //fire for zoom  out\n    //command / ctrl + shift + o (zoom out)\n    if((event.keyCode == 79) && isMetaHeld(event) && isShiftHeld(event)) {\n        focused.fire('key:chartZoomOut', {targetEvent: event, node: focused});\n        return;\n    }\n\n});\n\n////////////////////////////////////////////////\n// global custom event handlers\n// NOTE: See also Standard Navigation plugins (\"stdnav/plugins\")\n////////////////////////////////////////////////\n\n\ndocument.observe('key:escape', function(event){\n    let hasTooltipEl = event.target.closest('[tooltiptext]');\n    if(hasTooltipEl){\n        tooltipModule.hideJSTooltip(hasTooltipEl);\n    }\n});\n\nconst fireMenuItemAction = function(event){\n    var elem = event.target, matched;\n\n    //if menu showing - simulate mouseup\n    var menuElement = jQuery('#' + layoutModule.MENU_ID)[0];\n    if (layoutModule.isVisible(menuElement)) {\n        Event.stop(event);\n        //var selected = jQuery(menuElement).find(\":focus,.\" + layoutModule.HOVERED_CLASS)[0];\n        var selected = elem;\n        if (selected) {\n            var thisItem = selected;\n            if (!jQuery(selected).is(layoutModule.MENU_LIST_PATTERN)){\n                thisItem = jQuery(selected).parent(layoutModule.MENU_LIST_PATTERN)[0];\n            }\n            thisItem && thisItem.onmouseup && setTimeout(thisItem.onmouseup.curry(event.memo.targetEvent),0);\n        }\n    }\n\n    matched = matchMeOrUp(elem, layoutModule.NAVIGATION_PATTERN);\n    if (matched) {\n        if (matched.identify() == layoutModule.MAIN_NAVIGATION_HOME_ITEM_ID) {\n            Event.stop(event);\n            primaryNavModule.navigationOption(\"home\");\n        } else if (matched.identify() == layoutModule.MAIN_NAVIGATION_LIBRARY_ITEM_ID) {\n            Event.stop(event);\n            primaryNavModule.navigationOption(\"library\");\n        }\n    }\n};\ndocument.observe('key:enter', fireMenuItemAction);\ndocument.observe('key:space', fireMenuItemAction);\n\nexport default keyManager;\n\n","/*\n * Copyright (C) 2005 - 2022 TIBCO Software Inc. All rights reserved.\n * http://www.jaspersoft.com.\n *\n * Unless you have purchased a commercial license agreement from Jaspersoft,\n * the following license terms apply:\n *\n * This program is free software: you can redistribute it and/or modify\n * it under the terms of the GNU Affero General Public License as\n * published by the Free Software Foundation, either version 3 of the\n * License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the\n * GNU Affero General Public License for more details.\n *\n * You should have received a copy of the GNU Affero General Public License\n * along with this program. If not, see <http://www.gnu.org/licenses/>.\n */\n\n\n/**\n * @version: $Id$\n */\nimport SearchBox from '../components/components.searchBox';\nimport primaryNavModule from '../actionModel/actionModel.primaryNavigation';\nimport {encodeUriParameter} from \"../util/utils.common\";\nimport jQuery from 'jquery'\n\nvar globalSearchBox = {\n    _searchBox: null,\n    _containerId: \"globalSearch\",\n    _searchInputId: \"searchInput\",\n\n    initialize: function() {\n        this._searchBox = new SearchBox({\n            id: this._containerId\n        });\n\n        this._searchBox.onSearch = function(text) {\n            jQuery('#' + this._searchInputId).val(text);\n            primaryNavModule.navigationPaths.search.params += '&' + \"searchText=\" + encodeUriParameter(text);\n            primaryNavModule.navigationOption(\"search\");\n            //            $(this._containerId).submit();\n        }.bind(this);\n    },\n\n    setText: function(text) {\n        this._searchBox.setText(text);\n    }\n};\n\nexport default globalSearchBox;","/*\n * Copyright (C) 2005 - 2022 TIBCO Software Inc. All rights reserved.\n * http://www.jaspersoft.com.\n *\n * Unless you have purchased a commercial license agreement from Jaspersoft,\n * the following license terms apply:\n *\n * This program is free software: you can redistribute it and/or modify\n * it under the terms of the GNU Affero General Public License as\n * published by the Free Software Foundation, either version 3 of the\n * License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the\n * GNU Affero General Public License for more details.\n *\n * You should have received a copy of the GNU Affero General Public License\n * along with this program. If not, see <http://www.gnu.org/licenses/>.\n */\n\nimport './commons.minimal.main';\nimport '../namespace/namespace';\nimport '../core/core.accessibility';\nimport '../core/core.events.bis';\nimport '../core/core.key.events';\nimport actionModel from '../actionModel/actionModel.modelGenerator';\nimport primaryNavigation from '../actionModel/actionModel.primaryNavigation';\nimport globalSearch from '../repository/repository.search.globalSearchBoxInit';\nimport layoutModule from '../core/core.layout';\nimport jrsConfigs from 'js-sdk/src/jrs.configs';\nimport $ from 'jquery';\n\n// add information about locale into body's class\n$('body').addClass('locale-' + jrsConfigs.userLocale);\nlayoutModule.initialize();\nprimaryNavigation.initializeNavigation();    //navigation setup\n//navigation setup\njrsConfigs.initAdditionalUIComponents && globalSearch.initialize();\ndocument.fire('dom:loaded');\n","/*\n * Copyright (C) 2005 - 2022 TIBCO Software Inc. All rights reserved.\n * http://www.jaspersoft.com.\n *\n * Unless you have purchased a commercial license agreement from Jaspersoft,\n * the following license terms apply:\n *\n * This program is free software: you can redistribute it and/or modify\n * it under the terms of the GNU Affero General Public License as\n * published by the Free Software Foundation, either version 3 of the\n * License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the\n * GNU Affero General Public License for more details.\n *\n * You should have received a copy of the GNU Affero General Public License\n * along with this program. If not, see <http://www.gnu.org/licenses/>.\n */\n\n\n/**\n * @author: Yuriy Plakosh\n * @version: $Id$\n */\n\n/*\n * Search box class.\n *\n * @param options {JSON Object} - Set of options for search box:\n * <ul>\n *      <li>id - the identifier of search box form element in the DOM</li>\n * </ul>\n */\n\nimport layoutModule from '../core/core.layout';\nimport buttonManager from '../core/core.events.bis';\nimport jQuery from 'jquery';\n\nvar SearchBox = function(options) {\n    this._id = options.id;\n    this._dom = jQuery('#' + this._id)[0];\n    this._enabled = true;\n\n    this._process();\n    this._assignHandlers();\n};\n\n/**\n * Processes DOM.\n */\nSearchBox.addMethod('_process', function() {\n    this._input = jQuery(this._dom).find('input')[0];\n    this._clearButton = jQuery(this._dom).find('.button.searchClear')[0];\n    this._searchButton = jQuery(this._dom).find('.button.search')[0];\n});\n\n/**\n * Assigns handlers.\n */\nSearchBox.addMethod('_assignHandlers', function() {\n    jQuery(this._dom).on('submit', function(e) {\n        Event.stop(e);\n    });\n\n    jQuery(this._input).on(\"keypress\", this._keyPressHandler.bindAsEventListener(this));\n\n    jQuery(this._clearButton).on('click', this._clearHandler.bindAsEventListener(this));\n    jQuery(this._searchButton).on('click', this._searchHandler.bindAsEventListener(this));\n});\n\n/**\n * Key pressed handler for input field.\n */\nSearchBox.addMethod('_keyPressHandler', function(e) {\n    if (this._enabled && Event.KEY_RETURN == e.keyCode) {\n        this._doSearch();\n\n        // Fix to prevent click event handling on clear button when enter key is pressed in the input field.\n        Event.stop(e);\n    }\n});\n\n/**\n * Updates visibility of clear button.\n */\nSearchBox.addMethod('_updateClearButtonVisibility', function() {\n    if (!this.getText().blank()) {\n        jQuery(this._clearButton).addClass(layoutModule.UP_CLASS);\n    } else {\n        jQuery(this._clearButton).removeClass(layoutModule.UP_CLASS);\n    }\n});\n\n/**\n * Click handler for clear button.\n */\nSearchBox.addMethod('_clearHandler', function() {\n    if (this._enabled) {\n        this.setText(\"\");\n        this._doSearch();\n    }\n});\n\n/**\n * Click handler for search button.\n */\nSearchBox.addMethod('_searchHandler', function() {\n    if (this._enabled) {\n        this._doSearch();\n    }\n});\n\n/**\n * Gets search box text.\n */\nSearchBox.addMethod('getText', function() {\n    return this._input.getValue();\n});\n\n/**\n * Sets search box text.\n */\nSearchBox.addMethod('setText', function(text) {\n    this._input.setValue(text);\n    this._updateClearButtonVisibility();\n});\n\n/**\n * Enables search box.\n */\nSearchBox.addMethod('enable', function() {\n    buttonManager.enable(this._clearButton);\n    buttonManager.enable(this._searchButton);\n    jQuery(this._input).attr(layoutModule.READONLY_ATTR_NAME, null);\n    jQuery(this._dom).attr(layoutModule.DISABLED_ATTR_NAME, null);\n\n    this._enabled = true;\n});\n\n/**\n * Disables search box.\n */\nSearchBox.addMethod('disable', function() {\n    buttonManager.disable(this._clearButton);\n    buttonManager.disable(this._searchButton);\n    jQuery(this._input).attr(layoutModule.READONLY_ATTR_NAME, layoutModule.READONLY_ATTR_NAME);\n    jQuery(this._dom).attr(layoutModule.DISABLED_ATTR_NAME, layoutModule.DISABLED_ATTR_NAME);\n\n    this._enabled = false;\n});\n\n/**\n * Does search action.\n */\nSearchBox.addMethod('_doSearch', function(text) {\n    this._updateClearButtonVisibility();\n    this.onSearch(this.getText());\n});\n\n/**\n * Is invoked when search action was performed (search button pressed, clear button pressed, enter key pressed in the\n * text input field). This method should be replaced in the instance of SearchBox class to handle search action.\n *\n * @param text the text in the search box.\n */\nSearchBox.addMethod('onSearch', function(text) {\n    // No-op.\n});\n\nexport default SearchBox;"],"sourceRoot":""}