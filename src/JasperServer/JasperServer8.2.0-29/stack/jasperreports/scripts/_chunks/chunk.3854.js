(self.webpackChunkjrs_ui=self.webpackChunkjrs_ui||[]).push([[3854],{32758:(e,t,i)=>{"use strict";i.d(t,{Z:()=>u});var s=i(43852),o=i(97836),r=i.n(o),n=i(33806),d=i(46539),a=i(52687),l=i(64155),h=i(72157),c=i.n(h),_={FileSelector:function(e){this._disabled=void 0!==e.disabled&&e.disabled,this._uriTextbox="string"==typeof e.uriTextboxId?c()("#"+e.uriTextboxId)[0]:e.uriTextboxId,this._browseButtonId="string"==typeof e.uriTextboxId?c()("#"+e.browseButtonId)[0]:e.browseButtonId,this._onChange=e.onChange||!1,this._options=e,this._disabled?(s.Z.disable(this._uriTextbox),s.Z.disable(this._browseButtonId)):(this._id=e.id,this._suffix=e.suffix?e.suffix:(new Date).getTime(),this._treeDomId=e.treeId,this._selectLeavesOnly=void 0!==e.selectLeavesOnly&&e.selectLeavesOnly,this._selectedUri=c()(this._uriTextbox).val(),this._process(e),this._assignHandlers(),this._refreshButtonsState())}};_.FileSelector.addVar("DEFAULT_TEMPLATE_DOM_ID","selectFromRepository"),_.FileSelector.addVar("DEFAULT_TREE_ID","selectFromRepoTree"),_.FileSelector.addVar("OK_BUTTON_ID","selectFromRepoBtnSelect"),_.FileSelector.addVar("CANCEL_BUTTON_ID","selectFromRepoBtnCancel"),_.FileSelector.addVar("TITLE_PATTERN","div.title"),_.FileSelector.addMethod("_process",(function(e){var t;!this._id&&(this._id=this.DEFAULT_TEMPLATE_DOM_ID),!c()("#"+this._id)[0]&&this._options.template&&this._options.i18n?(this._dom=c()(r().template(this._options.template,{i18n:this._options.i18n})),this._dom=this._dom[0]):this._dom=c()("#"+this._id).clone(!0),c()(this._dom).attr("id",this._id+this._suffix),this._okButton=c()(this._dom).find("#"+this.OK_BUTTON_ID)[0],c()(this._okButton).attr("id",this.OK_BUTTON_ID+this._suffix),this._cancelButton=c()(this._dom).find("#"+this.CANCEL_BUTTON_ID)[0],c()(this._cancelButton).attr("id",this.CANCEL_BUTTON_ID+this._suffix),!this._treeDomId&&(this._treeDomId=this.DEFAULT_TREE_ID),this._treeDom=c()(this._dom).find("#"+this._treeDomId)[0],c()(this._treeDom).attr("id",this._treeDomId+this._suffix),this._visible=!1,e.title&&c()(this._dom).find(this.TITLE_PATTERN)[0].update(e.title),this._onOk=e.onOk,this._onCancel=e.onCancel,c()(document.body).append(this._dom);var i=c()(this._dom)[0].next(n.Z.SWIPE_SCROLL_PATTERN);i&&(t=n.Z.createScroller(i));var s=Object.extend({providerId:e.providerId,scroll:t},e.treeOptions);this._tree=d.Z.createRepositoryTree(this._treeDomId+this._suffix,s),this._selectedUri&&this._selectedUri.length>0?this._tree.showTreePrefetchNodes(this._selectedUri):this._tree.showTree(1)})),_.FileSelector.addMethod("_assignHandlers",(function(){c()(this._dom).on("click",this._dialogClickHandler.bindAsEventListener(this)),["node:dblclick","leaf:dblclick"].each((function(e){this._tree.observe(e,this._treeClickHandler.bindAsEventListener(this))}),this),["node:click","leaf:click","node:selected","leaf:selected"].each((function(e){this._tree.observe(e,this._refreshButtonsState.bindAsEventListener(this))}),this),["childredPrefetched:loaded","tree:loaded"].each((function(e){this._tree.observe(e,this._treeLoadHandler.bindAsEventListener(this))}),this),c()(this._browseButtonId).on("click",this._browseClickHandler.bindAsEventListener(this))})),_.FileSelector.addMethod("_canClickOk",(function(e){return this._tree.getSelectedNode()&&(!this._selectLeavesOnly||this._tree.getSelectedNode().param.type!==this._tree.getSelectedNode().FOLDER_TYPE_NAME)})),_.FileSelector.addMethod("_dialogClickHandler",(function(e){var t=e.target;if((0,l.BwZ)(t,["#"+this.OK_BUTTON_ID+this._suffix],!0)){e.stopPropagation();var i=this._tree.getSelectedNode().param.uri;this._uriTextbox.setValue(i),this._onChange&&this._onChange(i),this._hide(),this._onOk&&this._onOk()}else(0,l.BwZ)(t,["#"+this.CANCEL_BUTTON_ID+this._suffix],!0)&&(e.stopPropagation(),this._hide(),this._onCancel&&this._onCancel())})),_.FileSelector.addMethod("_treeClickHandler",(function(e){if(this._canClickOk()){var t=this._tree.getSelectedNode().param.uri;this._uriTextbox.setValue(t),this._onChange&&this._onChange(t),this._hide(),this._onOk&&this._onOk()}})),_.FileSelector.addMethod("_treeLoadHandler",(function(e){this._visible&&this._selectedUri&&this._tree.openAndSelectNode(this._selectedUri)})),_.FileSelector.addMethod("_browseClickHandler",(function(e){e.stopPropagation(),this._show()})),_.FileSelector.addMethod("_refreshButtonsState",(function(){this._canClickOk()?s.Z.enable(this._okButton):s.Z.disable(this._okButton)})),_.FileSelector.addMethod("_hide",(function(){a.Z.popup.hide(this._dom),this._visible=!1})),_.FileSelector.addMethod("_show",(function(){this._selectedUri=c()(this._uriTextbox).val(),this._selectedUri&&this._selectedUri.length>0?this._tree.showTreePrefetchNodes(this._selectedUri):this._tree.showTree(1),a.Z.popup.show(this._dom,!0),this._visible=!0,this._selectedUri&&this._tree.openAndSelectNode(this._selectedUri),this._refreshButtonsState()})),_.FileSelector.addMethod("remove",(function(){c()(this._dom).remove()}));const u=_},17620:(e,t,i)=>{"use strict";i.d(t,{Z:()=>c});var s=i(52499),o=i(11364),r=i(64155),n=i(43852),d=i(46539),a=i(72157),l=i.n(a),h={messages:{},resourceLabelMaxLength:100,resourceIdMaxLength:100,resourceDescriptionMaxLength:250,PROPAGATE_EVENT:"propagateEvent",STEP_DISPLAY_ID:"stepDisplay",FLOW_CONTROLS_ID:"flowControls",initSwipeScroll:function(){var e=l()("#"+h.STEP_DISPLAY_ID)[0];e&&new o.Z(e.parent(),e.parents().eq(2),{})},submitForm:function(e,t,i){if(t){var s=(0,r.nB6)(t);i&&i(),l()("#"+e).attr("method","post").attr("action",s),l()("#"+e)[0].submit()}},registerClickHandlers:function(e,t,i){if(h._bodyClickEventHandlers)(i?Array.prototype.unshift:Array.prototype.push).apply(h._bodyClickEventHandlers,e);else{h._bodyClickEventHandlers=e;var o=t||"body";l()(o).on("click",(function(e){h._bodyClickEventHandlers&&h._bodyClickEventHandlers.each((function(t){var i=t(e);if(i)throw i!==h.PROPAGATE_EVENT&&Event.stop(e),s.$break}))}))}},TreeWrapper:function(e){var t=this;if(this._treeId=e.treeId,this._resourceUriInput=l()("#"+e.resourceUriInput||0)[0],this._uri=this._resourceUriInput&&this._resourceUriInput.getValue()||e.uri||"/",!e.providerId)throw"There is no tree provider set for tree #{id}".interpolate({id:this._treeId});var i=["providerId","rootUri","organizationId","publicFolderUri","urlGetNode","urlGetChildren"].inject({},(function(t,i){return null!==e[i]&&(t[i]=e[i]),t}));return this._tree=new d.Z.createRepositoryTree(this._treeId,i),this._tree.observe("tree:loaded",(function(){t._tree.openAndSelectNode(l()("#"+t._resourceUriInput)[0].getValue())})),this._tree.observe("leaf:selected",(function(e){t._uri=e.memo.node.param.uri,t._resourceUriInput.setValue(t._uri)})),this._tree.observe("node:selected",(function(){t._resourceUriInput.setValue(t._uri="")})),{getTreeId:function(){return t._treeId},getTree:function(){return t._tree},selectFolder:function(e){t._tree.openAndSelectNode(e)},getSelectedFolderUri:function(){return t._uri}}},switchButtonState:function(e,t){n.Z[t?"enable":"disable"].call(n.Z,e)},switchDisableState:function(e,t){(e=l()(e)[0])&&e[t?"disable":"enable"].call(e)},generateResourceId:function(e){if(window.localContext&&window.localContext.initOptions&&window.localContext.initOptions.resourceIdNotSupportedSymbols)return e.replace(new RegExp(window.localContext.initOptions.resourceIdNotSupportedSymbols,"g"),"_");throw"There is no resourceIdNotSupportedSymbols property in init options."},testResourceId:function(e){if(window.localContext&&window.localContext.initOptions&&window.localContext.initOptions.resourceIdNotSupportedSymbols)return new RegExp(window.localContext.initOptions.resourceIdNotSupportedSymbols,"g").test(e);throw"There is no resourceIdNotSupportedSymbols property in init options."},labelValidator:function(e){var t=!0,i="";return e.blank()?(i=h.messages.labelIsEmpty,t=!1):e.length>h.resourceLabelMaxLength&&(i=h.messages.labelToLong,t=!1),{isValid:t,errorMessage:i}},getLabelValidationEntry:function(e){return{element:e,validators:[{method:"mandatory",messages:{mandatory:h.messages.labelIsEmpty}},{method:"minMaxLength",messages:{tooLong:h.messages.labelToLong},options:{maxLength:h.resourceLabelMaxLength}}]}},getIdValidationEntry:function(e){return{element:e,validators:[{method:"resourceIdChars",messages:h.messages},{method:"mandatory",messages:{mandatory:h.messages.resourceIdIsEmpty}},{method:"minMaxLength",messages:{tooLong:h.messages.resourceIdToLong},options:{maxLength:h.resourceIdMaxLength}}]}},resourceIdValidator:function(e){var t=!0,i="";return this._isEditMode||(e.blank()?(i=h.messages.resourceIdIsEmpty,t=!1):e.length>h.resourceIdMaxLength?(i=h.messages.resourceIdToLong,t=!1):h.testResourceId(e)&&(i=h.messages.resourceIdInvalidChars,t=!1)),{isValid:t,errorMessage:i}},getDescriptionValidationEntry:function(e){return{element:e,validators:[{method:"minMaxLength",messages:{tooLong:h.messages.descriptionToLong},options:{maxLength:h.resourceDescriptionMaxLength}}]}},descriptionValidator:function(e){var t=!0,i="";return e.length>h.resourceDescriptionMaxLength&&(i=h.messages.descriptionToLong,t=!1),{isValid:t,errorMessage:i}},dataSourceValidator:function(e){var t=!0,i="";return""===e.trim()&&(i=h.messages.dataSourceInvalid,t=!1),{isValid:t,errorMessage:i}},queryValidator:function(e){var t=!0,i="";return""===e.trim()&&(i=h.messages.queryInvalid,t=!1),{isValid:t,errorMessage:i}},getValidationEntries:function(e){return e.collect((function(e){return e.validationEntry?e.validationEntry:{validator:e.validator,element:e}}))}};const c=h}}]);
//# sourceMappingURL=chunk.3854.js.map