{"version":3,"sources":["webpack://jrs-ui/./src/core/core.ajax.js","webpack://jrs-ui/./src/core/core.ajax.utils.js"],"names":["ajax","AjaxRequester","url","params","postData","synchronous","this","document","location","toString","xmlhttp","getXMLHTTP","rsChangeFunction","processResponse","onreadystatechange","async","requestTime","Date","handleResponse","requester","checkForErrors","responseHandler","ajaxRequestEnded","JRS","getElementById","className","targettedResponseHandler","fillId","fromId","callback","toLocation","jQuery","html","updateUsingResponseSubset","res","responseText","trim","indexOf","opentTag","substring","body","lastIndexOf","closeTag","ajaxBuffer","replace","text","xssUtil","invokeCallbacks","cumulativeResponseHandler","insert","position","rowCopyResponseHandler","tableId","theTable","tagName","tempDiv","Builder","copyTable","getElementsByTagName","alert","cancelRequestsBefore","LOADING_ID","addVar","addMethod","open","setRequestHeader","send","prototype","DUMMY_POST_PARAM","readyState","setErrorHandler","errorHandler","getResponseHeader","confirmContinue","responseTimer","window","setTimeout","dialogs","MAX_WAIT_TIME","clearTimeout","confirm","serverIsNotResponding","clobberingResponseHandler","fire","evalJSONResponseHandler","jSONResponse","evalJSON","e","console","log","fromLocation","toLoc","response","whatWeWant","filter","copyTableJquery","append","scriptTags","sz","size","idx","iterate","scriptObj","get","attr","scriptName","scriptUrl","gotCallback","callbackFn","scriptElement","createElement","jr_scripts","setAttribute","onload","src","appendChild","scriptString","lines","match","eval","join","executeScript","customArg","ajaxClobberredUpdate","options","ajaxUpdate","ajaxTargettedUpdate","mode","CUMULATIVE_UPDATE","ROW_COPY_UPDATE","EVAL_JSON","preFillAction","ajaxNonReturningUpdate","ajaxClobberedFormSubmit","form","getPostData","extraPostData","appendPostData","ajaxTargettedFormSubmit","ajaxErrorHandler","showMessageDialog","ajaxError","ajaxErrorHeader","doNothing","fillLocation","isAutomaticRefresh","isIPad","busyCursor","silent","showLoading","hideLoader","ajaxRequestStarted","doPost","doGet","requesterErrorHandler","forms","data","i","elements","length","element","name","appendFormInput","appendFormValue","value","type","checked","option","selected","push","shift","encodeURIComponent","ERROR_POPUP_DIV","ERROR_POPUP_CONTENTS","ERROR_POPUP_BACK_BUTTON","ERROR_POPUP_CLOSE_BUTTON","hideErrorPopup","popOverlayObject","style","display","ajaxRequestCount","cursor","startResponseTimer","cancelResponseTimer","isValidJsonResponse","ajaxAgent","responseType","status","XMLHttpRequest","showErrorPopup","errorMessage","baseErrorHandler","parent","removeClass","show"],"mappings":"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","file":"_chunks/chunk.8522.js","sourcesContent":["/*\n * Copyright (C) 2005 - 2022 TIBCO Software Inc. All rights reserved.\n * http://www.jaspersoft.com.\n *\n * Unless you have purchased a commercial license agreement from Jaspersoft,\n * the following license terms apply:\n *\n * This program is free software: you can redistribute it and/or modify\n * it under the terms of the GNU Affero General Public License as\n * published by the Free Software Foundation, either version 3 of the\n * License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the\n * GNU Affero General Public License for more details.\n *\n * You should have received a copy of the GNU Affero General Public License\n * along with this program. If not, see <http://www.gnu.org/licenses/>.\n */\n/**\n *  @author: Angus Croll\n * @version: $Id$\n */\n/* global confirm, serverIsNotResponding, alert, extraPostData, ajaxError, ajaxErrorHeader*/\n/**\n *  Generic Ajax Utils\n */\n/**\n * Global Ajax Object\n */\nimport jQuery from 'jquery';\nimport dialogs from '../components/components.dialogs';\nimport {copyTable, copyTableJquery, isIPad, popOverlayObject} from \"../util/utils.common\";\nimport {errorHandler, showMessageDialog} from \"./core.ajax.utils\";\nimport {JRS} from \"../namespace/namespace\";\nimport xssUtil from 'js-sdk/src/common/util/xssUtil';\nimport Builder from 'scriptaculous/src/builder';\n\nvar ajax = {};    //cancel all requests sent before this date (in ms)\n//cancel all requests sent before this date (in ms)\najax.cancelRequestsBefore;\najax.LOADING_ID = 'loading';    /**\n *  @class Manages incoming Ajax requests and processes corresponding Ajax responses\n *  based on specified attributes.\n *  Responses are bound to to the instance of AjaxRequester created by the corresponing request\n *\n *  @constructor\n *  @param {String} url address for server request\n *  @param {Array} params [1]fillLocation [2]fromLocation [3]Array of callbacks\n *  @param {String} postData user data for posting - where applicable\n *  @return a new AjaxRequester instance\n *  @type AjaxRequester\n */\n/**\n *  @class Manages incoming Ajax requests and processes corresponding Ajax responses\n *  based on specified attributes.\n *  Responses are bound to to the instance of AjaxRequester created by the corresponing request\n *\n *  @constructor\n *  @param {String} url address for server request\n *  @param {Array} params [1]fillLocation [2]fromLocation [3]Array of callbacks\n *  @param {String} postData user data for posting - where applicable\n *  @return a new AjaxRequester instance\n *  @type AjaxRequester\n */\nfunction AjaxRequester(url, params, postData, synchronous) {\n    this.url = url || document.location.toString();\n    this.params = params;\n    this.xmlhttp = getXMLHTTP();\n    var rsChangeFunction = this.processResponse(this);\n    this.xmlhttp.onreadystatechange = rsChangeFunction;\n    this.postData = postData;\n    this.async = !synchronous;\n    this.requestTime = +new Date();    //(new Date).getTime()\n}    /////////////////////////////////////////////////////////////////////////\n// Prototype Augmentation\n/////////////////////////////////////////////////////////////////////////\n//(new Date).getTime()\n/////////////////////////////////////////////////////////////////////////\n// Prototype Augmentation\n/////////////////////////////////////////////////////////////////////////\nAjaxRequester    //constants for targetted update modes\n    .addVar('CUMULATIVE_UPDATE', 'c').addVar('ROW_COPY_UPDATE', 'r').addVar('TARGETTED_REPLACE_UPDATE', 't').addVar('EVAL_JSON', 'j').addVar('DUMMY_POST_PARAM', 'dummyPostData').addVar('MAX_WAIT_TIME', 2000)    //default function assignment\n    .addVar('errorHandler', function () {\n        return false;\n    })    //the function to validate and report errors\n/**\n     * Submit an ajax get request\n     * @private\n     * @return true if successful\n     * @type boolean\n     */.addMethod('doGet', function () {\n        if (this.xmlhttp) {\n            this.xmlhttp.open('GET', this.url, this.async);\n            this.xmlhttp.setRequestHeader('Content-Type', 'application/x-www-form-urlencoded');\n            this.xmlhttp.setRequestHeader('If-Modified-Since', 'Sat, 1 Jan 2000 00:00:00 GMT');\n            this.xmlhttp.setRequestHeader('x-requested-with', 'AJAXRequest');\n            this.xmlhttp.send(null);\n            return true;\n        }\n        return false;\n    })    /**\n     * Submit an ajax post request\n     * @private\n     * @return true if successful\n     * @type boolean\n     */.addMethod('doPost', function () {\n        if (this.xmlhttp) {\n            if (this.postData === AjaxRequester.prototype.DUMMY_POST_PARAM) {\n                this.postData = null;\n            }\n            this.xmlhttp.open('POST', this.url, this.async);\n            this.xmlhttp.setRequestHeader('Content-Type', 'application/x-www-form-urlencoded');\n            this.xmlhttp.setRequestHeader('x-requested-with', 'AJAXRequest');\n            this.xmlhttp.send(this.postData);\n            return true;\n        }\n        return false;\n    })    /**\n     * Function to process the detected Ajax response\n     * @param {AjaxRequester} the instance who's request we are processing\n     * @private\n     * @return the handler function\n     * @type function\n     */.addMethod('processResponse', function (requester) {\n        return function () {\n            if (requester.xmlhttp.readyState == 4) {\n                if (ajax.cancelRequestsBefore && ajax.cancelRequestsBefore > requester.requestTime) {\n                //ignore this request\n                    ajaxRequestEnded(requester);\n                    return;\n                }    //if (requester.verifyAjaxResponse()) {\n                //if (requester.verifyAjaxResponse()) {\n                handleResponse(requester);    //}\n            }\n        };\n    })    /**\n     * Set error handler for this requester\n     * @param {function} the error handler function\n     * @private\n     */.addMethod('setErrorHandler', function (setErrorHandler) {\n        this.errorHandler = errorHandler;\n    }).addMethod('verifyAjaxResponse', function () {\n    //prompt if no server\n        return this.xmlhttp.getResponseHeader('Server') || this.confirmContinue();\n    })    /**\n     * Start countdown to \"no response\" message\n     */.addMethod('startResponseTimer', function () {\n        this.responseTimer = window.setTimeout(function () {\n            dialogs.popup.show(jQuery('#' + ajax.LOADING_ID)[0], true);\n        }, this.MAX_WAIT_TIME);\n    })    /**\n     * Cancel countdown to \"no response\" message\n     */.addMethod('cancelResponseTimer', function () {\n        window.clearTimeout(this.responseTimer);\n    })    /**\n     * Cancel countdown to \"no response\" message\n     */.addMethod('confirmContinue', function () {\n        return confirm(window.serverIsNotResponding);\n    });    /////////////////////////////////////////////////////////////////////////\n// Prototype Augmentation; End\n/////////////////////////////////////////////////////////////////////////\n///////////////////////////////////////////////////////////////////////////////////////////////////\n// AjaxRequester: End\n///////////////////////////////////////////////////////////////////////////////////////////////////\n///////////////////////////////////////////////////////////////////////////////////////////////////\n// Global Space: Start\n///////////////////////////////////////////////////////////////////////////////////////////////////\n///////////////////////////////////////////////////////////////////////////////////////////////////\n// Response Handling\n///////////////////////////////////////////////////////////////////////////////////////////////////\n/**\n * Delegate to handler for ajax response\n * @param {AjaxRequester} the active requester instance\n * @param {Array} parameters bundled with the request\n * @private\n */\n/////////////////////////////////////////////////////////////////////////\n// Prototype Augmentation; End\n/////////////////////////////////////////////////////////////////////////\n///////////////////////////////////////////////////////////////////////////////////////////////////\n// AjaxRequester: End\n///////////////////////////////////////////////////////////////////////////////////////////////////\n///////////////////////////////////////////////////////////////////////////////////////////////////\n// Global Space: Start\n///////////////////////////////////////////////////////////////////////////////////////////////////\n///////////////////////////////////////////////////////////////////////////////////////////////////\n// Response Handling\n///////////////////////////////////////////////////////////////////////////////////////////////////\n/**\n * Delegate to handler for ajax response\n * @param {AjaxRequester} the active requester instance\n * @param {Array} parameters bundled with the request\n * @private\n */\nfunction handleResponse(requester) {\n    checkForErrors(requester) || requester.responseHandler(requester);\n    ajaxRequestEnded(requester);\n    if (JRS && JRS.vars) {\n        JRS.vars.ajax_in_progress = false;\n    }\n    if (document.getElementById('mainTableContainerOverlay'))\n        document.getElementById('mainTableContainerOverlay').className = 'hidden';\n}    ///////////////////////////////////////////////////////////////////////////////////////////////////\n// Response Handlers\n///////////////////////////////////////////////////////////////////////////////////////////////////\n/**\n * Default handler for responses triggered by targeted ajax requests\n * @private\n * @param {AjaxRequester} requester the active requester instance\n * @param {Array} params parameters bundled with the request\n */\n///////////////////////////////////////////////////////////////////////////////////////////////////\n// Response Handlers\n///////////////////////////////////////////////////////////////////////////////////////////////////\n/**\n * Default handler for responses triggered by targeted ajax requests\n * @private\n * @param {AjaxRequester} requester the active requester instance\n * @param {Array} params parameters bundled with the request\n */\nfunction targettedResponseHandler(requester) {\n    var xmlhttp = requester.xmlhttp;\n    var fillId = requester.params[0];\n    var fromId = requester.params[1];\n    var callback = requester.params[2];\n    var toLocation = jQuery('#' + fillId)[0];\n    if (fromId) {\n        jQuery(toLocation).html('');\n        updateUsingResponseSubset(xmlhttp, fromId, toLocation);\n    } else {\n        var res = xmlhttp.responseText.trim();    //dirty solution for old dashboards because we haven't common format pattern for ajax response\n        //dirty solution for old dashboards because we haven't common format pattern for ajax response\n        if (res.indexOf('<div') === 0) {\n            var opentTag = res.substring(0, res.indexOf('>') + 1);\n            var body = res.substring(res.indexOf('>') + 1, res.lastIndexOf('</'));\n            var closeTag = res.substring(res.lastIndexOf('</'));    //we want all the retrieved content - throw it all in\n            //we want all the retrieved content - throw it all in\n            var ajaxBuffer = jQuery(opentTag + closeTag);\n\n            // Escape extra level per JSON being inserted into & read from the page\n            body = body.replace(/&quot;/g, \"&amp;quot;\");\n            ajaxBuffer.text(xssUtil.hardEscape(body));\n            jQuery(toLocation).html(ajaxBuffer);\n        } else {\n            jQuery(toLocation).html(res);\n        }\n    }\n    invokeCallbacks(callback, toLocation);\n}    /**\n * Handler adds new content to existing content in specified container\n * @private\n * @param {AjaxRequester} requester the active requester instance\n * @param {Array} params parameters bundled with the request\n */\n/**\n * Handler adds new content to existing content in specified container\n * @private\n * @param {AjaxRequester} requester the active requester instance\n * @param {Array} params parameters bundled with the request\n */\nfunction cumulativeResponseHandler(requester) {\n    var xmlhttp = requester.xmlhttp;\n    var fillId = requester.params[0];\n    var fromId = requester.params[1];\n    var callback = requester.params[2];\n    var toLocation = jQuery('#' + fillId)[0];\n    if (fromId) {\n        updateUsingResponseSubset(xmlhttp, fromId, toLocation);\n    } else {\n        //we want all the retrieved content - throw it all in\n        toLocation.insert(xmlhttp.responseText, { position: 'after' });    //note this will eval scripts too\n    }\n    invokeCallbacks(callback);\n}    /**\n * Use this handler if the response text represents table rows to add to an existing rows in the specified container\n * (more efficient than appending innerHtml)\n * @private\n * @param {AjaxRequester} requester the active requester instance\n * @param {Array} params parameters bundled with the request\n */\n/**\n * Use this handler if the response text represents table rows to add to an existing rows in the specified container\n * (more efficient than appending innerHtml)\n * @private\n * @param {AjaxRequester} requester the active requester instance\n * @param {Array} params parameters bundled with the request\n */\nfunction rowCopyResponseHandler(requester) {\n    var xmlhttp = requester.xmlhttp;\n    var tableId = requester.params[0];    //var newRowId = params[1]; //not used yet\n    //var newRowId = params[1]; //not used yet\n    var callback = requester.params[2];\n    var theTable = jQuery('#' + tableId)[0];\n    if (theTable.tagName !== 'TABLE') {\n        alert('Ajax Exception: rowCopyResponseHandler will not work for container ' + theTable.tagName);\n        return;\n    }    //put response html into a temp div to form the table\n    //var tempDiv = document.createElement('DIV');\n    //put response html into a temp div to form the table\n    //var tempDiv = document.createElement('DIV');\n    var tempDiv = Builder.node('DIV');\n    jQuery(tempDiv).html(xmlhttp.responseText);    //now copy to existing table body\n    //now copy to existing table body\n    copyTable(tempDiv.getElementsByTagName('table')[0], theTable, false, false);\n    invokeCallbacks(callback);\n}    /**\n * Special handler for when we want to overwrite entire page with response\n * @param {AjaxRequester} the active requester instance\n * @param {Array} parameters bundled with the request\n * @private\n */\n// TODO Consider for removal\n/**\n * Special handler for when we want to overwrite entire page with response\n * @param {AjaxRequester} the active requester instance\n * @param {Array} parameters bundled with the request\n * @private\n */\n// TODO Consider for removal\nvar clobberingResponseHandler = function (requester) {\n    var callback = requester.params[2];\n    jQuery(document.body).html(requester.xmlhttp.responseText);\n    document.fire('dom:loaded');\n    invokeCallbacks(callback);\n};    /**\n * Handler evals JSOn expression. Does not update markup in anyway\n * For any updates to occur, responseText expression must include an assignment\n * e.g. \"var myProfile = {city: London, age: 39, hobbies: ['waterskiing','chess']}\"\n * @param {AjaxRequester} the active requester instance\n * @param {Array} parameters bundled with the request\n * @private\n */\n/**\n * Handler evals JSOn expression. Does not update markup in anyway\n * For any updates to occur, responseText expression must include an assignment\n * e.g. \"var myProfile = {city: London, age: 39, hobbies: ['waterskiing','chess']}\"\n * @param {AjaxRequester} the active requester instance\n * @param {Array} parameters bundled with the request\n * @private\n */\nvar evalJSONResponseHandler = function (requester) {\n    var jSONResponse = null;\n    try {\n        jSONResponse = requester.xmlhttp.responseText.evalJSON();\n    } catch (e) {\n        /*eslint-disable-next-line no-console*/\n        window.console && console.log(e);\n    }\n    var callback = requester.params[2];\n    invokeCallbacks(callback, jSONResponse);\n};\nfunction updateUsingResponseSubset(xmlhttp, fromLocation, toLoc) {\n    /**\n\t * This prevents the script tags inside responseText to be executed;\n\t * If we wanted them to be executed, we would have wrapped the responseText with a div like this:\n\t * \t\tvar response = jQuery('<div/>').html(xmlhttp.responseText);\n\t */\n    var response = jQuery(xmlhttp.responseText);\n    var whatWeWant = response.filter('#' + fromLocation);\n    if (toLoc.tagName == 'TABLE' && jQuery('#' + fromLocation)[0].tagName == 'TABLE') {\n        copyTableJquery(whatWeWant, toLoc, true);\n    } else {\n        jQuery(toLoc).append(whatWeWant.html());\n    }\n    function iterate() {\n        if (idx >= sz) {\n            return;\n        }\n        var scriptObj = jQuery(scriptTags.get(idx));\n        if (scriptObj.attr('src')) {\n            idx++;\n            loadScript(scriptObj.attr('data-custname'), scriptObj.attr('src'), iterate);\n        } else {\n            idx++;\n            executeScript(scriptObj.html(), iterate);\n        }\n    }\n    function loadScript(scriptName, scriptUrl, callbackFn) {\n        var gotCallback = callbackFn || false, scriptElement = document.createElement('script');    // prevent the script tag from being created more than once\n        // prevent the script tag from being created more than once\n        if (!window.jr_scripts) {\n            window.jr_scripts = {};\n        }\n        if (!window.jr_scripts[scriptName] && scriptName !== 'jr_jq_min') {\n            // skips jQuery core script\n            scriptElement.setAttribute('type', 'text/javascript');\n            if (scriptElement.readyState) {\n                // for IE\n                scriptElement.onreadystatechange = function () {\n                    if (scriptElement.readyState === 'loaded' || scriptElement.readyState === 'complete') {\n                        scriptElement.onreadystatechange = null;\n                        if (gotCallback) {\n                            callbackFn();\n                        }\n                    }\n                };\n            } else {\n                // for Others - this is not supposed to work on Safari 2\n                scriptElement.onload = function () {\n                    if (gotCallback) {\n                        callbackFn();\n                    }\n                };\n            }\n            scriptElement.src = scriptUrl;\n            document.getElementsByTagName('head')[0].appendChild(scriptElement);\n            window.jr_scripts[scriptName] = scriptUrl;\n        } else if (gotCallback) {\n            callbackFn();\n        }\n    }\n    function executeScript(scriptString, callbackFn) {\n        var gotCallback = callbackFn || false;\n        if (scriptString) {\n            var lines = scriptString.match(/^.*((\\r\\n|\\n|\\r)|$)/gm);\n            /*eslint-disable-next-line no-eval*/\n            window.eval(lines.join('\\n'));\n            if (gotCallback) {\n                callbackFn();\n            }\n        }\n    }    /*\n     * fusioncharts & jasperreports interactive: load JavaScript scripts synchronously\n     */\n    /*\n     * fusioncharts & jasperreports interactive: load JavaScript scripts synchronously\n     */\n    if (typeof jQuery !== 'undefined' && true) {\n        var scriptTags = response.filter('script.jasperreports'), sz = scriptTags.size(), idx = 0;\n        iterate();\n    }\n}\nfunction invokeCallbacks(callback, customArg) {\n    if (callback) {\n        /*eslint-disable-next-line no-eval*/\n        typeof callback === 'string' ? eval(callback) : callback(customArg);\n    }\n}    /////////////////////////////////////////////////////////////////////////////////////////\n// Public API starts Here....\n// Please do not amend exisiting signatures but feel free to extend the API as required\n/////////////////////////////////////////////////////////////////////////////////////////\n/**\n * Send an ajax request with this URL and update the entire page with the response\n * @param {String} url of the request\n */\n// TODO Consider for removal\n/////////////////////////////////////////////////////////////////////////////////////////\n// Public API starts Here....\n// Please do not amend exisiting signatures but feel free to extend the API as required\n/////////////////////////////////////////////////////////////////////////////////////////\n/**\n * Send an ajax request with this URL and update the entire page with the response\n * @param {String} url of the request\n */\n// TODO Consider for removal\nfunction ajaxClobberredUpdate(url, options) {\n    options.responseHandler = clobberingResponseHandler;\n    ajaxUpdate(url, options);\n}    /**\n * Send an ajax request with this URL and update the targetContainer  with the sourceContainer container of the response DOM\n * Optionally execute the post fill action as a callback following response processing\n * @param {String} url the url of the request\n * @param {String} targetContainer id indicating where to dump html response\n * @param {String} sourceContainer id indicating which part of the html response to use\n * @param {Array} callback JS functions to evaluate after ajax update\n * @param {function} errorHandler a function to evaluate to trap errors\n * @param {String} postData user data for posting - where applicable\n * @param {String} update mode (default is targetted replace)\n */\n/**\n * Send an ajax request with this URL and update the targetContainer  with the sourceContainer container of the response DOM\n * Optionally execute the post fill action as a callback following response processing\n * @param {String} url the url of the request\n * @param {String} targetContainer id indicating where to dump html response\n * @param {String} sourceContainer id indicating which part of the html response to use\n * @param {Array} callback JS functions to evaluate after ajax update\n * @param {function} errorHandler a function to evaluate to trap errors\n * @param {String} postData user data for posting - where applicable\n * @param {String} update mode (default is targetted replace)\n */\nfunction ajaxTargettedUpdate(url, options) {\n    var responseHandler;\n    if (options.mode == AjaxRequester.prototype.CUMULATIVE_UPDATE) {\n        responseHandler = cumulativeResponseHandler;\n    } else if (options.mode == AjaxRequester.prototype.ROW_COPY_UPDATE) {\n        responseHandler = rowCopyResponseHandler;\n    } else if (options.mode == AjaxRequester.prototype.EVAL_JSON) {\n        responseHandler = evalJSONResponseHandler;\n    } else {\n        responseHandler = targettedResponseHandler;\n    }\n    options.responseHandler = function (requester, params) {\n        if (options.preFillAction) {\n            if (typeof options.preFillAction == 'string') {\n                /*eslint-disable-next-line no-eval*/\n                eval(options.preFillAction);\n            } else {\n                options.preFillAction(responseHandler(requester, params));\n            }\n        } else {\n            responseHandler(requester, options.params);\n        }\n    };\n    ajaxUpdate(url, options);\n}    /**\n * Send an ajax request with this URL but don't return any content to the sender\n * Optionally execute the post fill action as a callback following response processing\n * @param {String} url the url of the request\n * @param {String} targetContainer id indicating where to dump html response\n * @param {String} sourceContainer id indicating which part of the html response to use\n * @param {Array} callback JS functions to evaluate after ajax update\n * @param {function} errorHandler a function to evaluate to trap errors\n * @param {String} postData user data for posting - where applicable\n */\n/**\n * Send an ajax request with this URL but don't return any content to the sender\n * Optionally execute the post fill action as a callback following response processing\n * @param {String} url the url of the request\n * @param {String} targetContainer id indicating where to dump html response\n * @param {String} sourceContainer id indicating which part of the html response to use\n * @param {Array} callback JS functions to evaluate after ajax update\n * @param {function} errorHandler a function to evaluate to trap errors\n * @param {String} postData user data for posting - where applicable\n */\nfunction ajaxNonReturningUpdate(url, options) {\n    options.responseHandler = null;\n    ajaxUpdate(url, options);\n}    /**\n * Submit the form and replace entire page\n * @param {String} form name of the form\n * @param {String} url the url of the request\n * @param {String} extraPostData form data for posting\n * @param {String} targetContainer id indicating where to dump html response\n * @param {String} sourceContainer id indicating which part of the html response to use\n * @param {Array} callback JS functions to evaluate after ajax update\n * @param {function} errorHandler a function to evaluate to trap errors\n */\n/**\n * Submit the form and replace entire page\n * @param {String} form name of the form\n * @param {String} url the url of the request\n * @param {String} extraPostData form data for posting\n * @param {String} targetContainer id indicating where to dump html response\n * @param {String} sourceContainer id indicating which part of the html response to use\n * @param {Array} callback JS functions to evaluate after ajax update\n * @param {function} errorHandler a function to evaluate to trap errors\n */\nfunction ajaxClobberedFormSubmit(form, url, options) {\n    var postData = getPostData(form, window.extraPostData);\n    options.postData = appendPostData(postData, window.extraPostData);\n    options.responseHandler = clobberingResponseHandler;\n    ajaxUpdate(url, options);\n}    /**\n * Submit the form and update the targetContainer  with the sourceContainer container of the response DOM\n * @param {String} form name of the form\n * @param {String} url the url of the request\n * @param {String} extraPostData form data for posting\n * @param {String} targetContainer id indicating where to dump html response\n * @param {String} sourceContainer id indicating which part of the html response to use\n * @param {Array} callback JS functions to evaluate after ajax update\n * @param {function} errorHandler a function to evaluate to trap errors\n */\n/**\n * Submit the form and update the targetContainer  with the sourceContainer container of the response DOM\n * @param {String} form name of the form\n * @param {String} url the url of the request\n * @param {String} extraPostData form data for posting\n * @param {String} targetContainer id indicating where to dump html response\n * @param {String} sourceContainer id indicating which part of the html response to use\n * @param {Array} callback JS functions to evaluate after ajax update\n * @param {function} errorHandler a function to evaluate to trap errors\n */\nfunction ajaxTargettedFormSubmit(form, url, options) {\n    var postData = getPostData(form, options.extraPostData);\n    options.postData = appendPostData(postData, options.extraPostData);\n    options.responseHandler = targettedResponseHandler;\n    ajaxUpdate(url, options);\n}\nfunction ajaxErrorHandler() {\n    showMessageDialog(window.ajaxError, window.ajaxErrorHeader);\n}    ////////////////////////////////////////////////////////////////////////////////\n// ...Public API ends Here....\n////////////////////////////////////////////////////////////////////////////////\n/**\n * @private\n */\n//dummy response handler for non returning case\n////////////////////////////////////////////////////////////////////////////////\n// ...Public API ends Here....\n////////////////////////////////////////////////////////////////////////////////\n/**\n * @private\n */\n//dummy response handler for non returning case\nfunction doNothing() {\n}    /**\n * Wrapper for AjaxRequester\n * @private\n * @param {String} url - the url of the request\n * @param {Object} options - an object literal optioanlly defining:\n * @option {function} responseHandler - the designated response handler\n * @option {String} fillLocation - id indicating where in the DOM to dump ajax response\n * @option {String} fromLocation - id indicating which part of the ajax response to use\n * @option {Array} callback - JS functions to evaluate after ajax update\n * @option {function} errorHandler - the designated error handler\n * @option {String} postData - user data for posting - where applicable\n */\n/**\n * Wrapper for AjaxRequester\n * @private\n * @param {String} url - the url of the request\n * @param {Object} options - an object literal optioanlly defining:\n * @option {function} responseHandler - the designated response handler\n * @option {String} fillLocation - id indicating where in the DOM to dump ajax response\n * @option {String} fromLocation - id indicating which part of the ajax response to use\n * @option {Array} callback - JS functions to evaluate after ajax update\n * @option {function} errorHandler - the designated error handler\n * @option {String} postData - user data for posting - where applicable\n */\nfunction ajaxUpdate(url, options) {\n    var ok = true;\n    var requester = new AjaxRequester(url, [\n        options.fillLocation,\n        options.fromLocation,\n        options.callback,\n        options.isAutomaticRefresh\n    ], options.postData, options.synchronous);\n    if (isIPad() && JRS.vars.current_flow == 'adhoc') {\n        if (!JRS.vars.ajax_in_progress) {\n            JRS.vars.ajax_in_progress = true;\n        }\n    }\n    if (ok) {\n        requester.busyCursor = !options.silent;\n        requester.showLoading = !options.silent && !options.hideLoader;\n        requester.responseHandler = options.responseHandler || doNothing;\n        if (requester.responseHandler != doNothing) {\n            ajaxRequestStarted(requester);\n        }\n        if (options.errorHandler) {\n            requester.errorHandler = options.errorHandler;\n        }\n        if (requester.xmlhttp) {\n            if (options.postData) {\n                requester.doPost();\n            } else {\n                requester.doGet();\n            }\n        }\n    }\n}    /**\n * @private\n */\n/**\n * @private\n */\nfunction checkForErrors(requester) {\n    var requesterErrorHandler = requester.errorHandler;\n    return requesterErrorHandler(requester.xmlhttp);\n}    /**\n * @private\n */\n/**\n * @private\n */\nfunction getPostData(form, extraPostData) {\n    if (typeof form == 'string') {\n        form = document.forms[form];\n    }\n    var data = '';\n    for (var i = 0; i < form.elements.length; ++i) {\n        var element = form.elements[i];\n        if (element.name && !(extraPostData && extraPostData[element.name])) {\n            data = appendFormInput(data, element);\n        }\n    }\n    return data;\n}    /**\n * @private\n */\n/**\n * @private\n */\nfunction appendPostData(postData, extraPostData) {\n    for (var name in extraPostData) {\n        postData = appendFormValue(postData, name, extraPostData[name]);\n    }\n    return postData;\n}    /**\n * @private\n */\n/**\n * @private\n */\nfunction appendFormInput(data, element) {\n    if (element.name) {\n        var value;\n        var append = false;\n        switch (element.type) {\n        case 'checkbox':\n        case 'radio':\n            append = element.checked;\n            value = element.value;\n            break;\n        case 'hidden':\n        case 'password':\n        case 'text':\n        case 'Textarea':\n            append = true;\n            value = element.value;\n            break;\n        case 'select-one':\n        case 'select-multiple':\n            value = [];\n            for (var i = 0; i < element.options.length; ++i) {\n                var option = element.options[i];\n                if (option.selected) {\n                    append = true;\n                    value.push(option.value);\n                }\n            }\n            break;\n        }\n        if (append) {\n            if (value.shift) {\n                while (value.length > 0) {\n                    data = appendFormValue(data, element.name, value.shift());\n                }\n            } else {\n                data = appendFormValue(data, element.name, value);\n            }\n        }\n    }\n    return data;\n}    /**\n * @private\n */\n/**\n * @private\n */\nfunction appendFormValue(data, name, value) {\n    if (data.length > 0) {\n        data += '&';\n    }\n    data += name + '=' + encodeURIComponent(value);\n    return data;\n}    /**\n * @private\n */\n/**\n * @private\n */\nvar ERROR_POPUP_DIV = 'jsErrorPopup';\nvar ERROR_POPUP_CONTENTS = 'errorPopupContents';\nvar ERROR_POPUP_BACK_BUTTON = 'errorBack';\nvar ERROR_POPUP_CLOSE_BUTTON = 'errorPopupCloseButton';    /**\n * @private\n */\n/**\n * @private\n */ /**\n * @private\n */\n/**\n * @private\n */\nfunction hideErrorPopup() {\n    popOverlayObject();\n    var errorPopup = document.getElementById(ERROR_POPUP_DIV);\n    errorPopup.style.display = 'none';\n}    ////////////////////////////////////////////////////////////////////////////////\n// Request counter\n////////////////////////////////////////////////////////////////////////////////\n////////////////////////////////////////////////////////////////////////////////\n// Request counter\n////////////////////////////////////////////////////////////////////////////////\najax.ajaxRequestCount = 0;    /**\n * @private\n */\n/**\n * @private\n */\nfunction ajaxRequestStarted(requester) {\n    ++ajax.ajaxRequestCount;\n    requester.busyCursor && (document.body.style.cursor = 'wait');\n    !isIPad() && requester.showLoading && requester.startResponseTimer();\n}    /**\n * @private\n */\n/**\n * @private\n */\nfunction ajaxRequestEnded(requester) {\n    requester.cancelResponseTimer();\n    if (ajax.ajaxRequestCount <= 1) {\n        document.body.style.cursor = 'auto';\n        ajax.ajaxRequestCount = 0;\n        dialogs.popup.hide(jQuery('#' + ajax.LOADING_ID)[0]);\n    } else {\n        ajax.ajaxRequestCount--;\n    }\n}\nfunction isValidJsonResponse(ajaxAgent) {\n    var responseType = ajaxAgent.getResponseHeader('Content-Type');\n    return ajaxAgent.status == 200 && responseType != null && responseType.indexOf('application/json') >= 0;\n}    ////////////////////////////////////////////////////////////////////////////////\n// XMLHTTP\n////////////////////////////////////////////////////////////////////////////////\n//\n// standard function to obtain an xmlhttp instance regardless of platform\n//\n////////////////////////////////////////////////////////////////////////////////\n// XMLHTTP\n////////////////////////////////////////////////////////////////////////////////\n//\n// standard function to obtain an xmlhttp instance regardless of platform\n//\nfunction getXMLHTTP() {\n    var alerted;\n    var xmlhttp;    /*@cc_on @*/\n    /*@if (@_jscript_version >= 5)\n     // JScript gives us Conditional compilation, we can cope with old IE versions.\n     try {\n     xmlhttp=new ActiveXObject(\"Msxml2.XMLHTTP\")\n     } catch (e) {\n     try {\n     xmlhttp=new ActiveXObject(\"Microsoft.XMLHTTP\")\n     } catch (E) {\n     alert(\"You must have Microsofts XML parsers available\")\n     }\n     }\n     @else\n     alert(\"You must have JScript version 5 or above.\")\n     xmlhttp=false\n     alerted=true\n     @end @*/\n    /*@cc_on @*/\n    /*@if (@_jscript_version >= 5)\n     // JScript gives us Conditional compilation, we can cope with old IE versions.\n     try {\n     xmlhttp=new ActiveXObject(\"Msxml2.XMLHTTP\")\n     } catch (e) {\n     try {\n     xmlhttp=new ActiveXObject(\"Microsoft.XMLHTTP\")\n     } catch (E) {\n     alert(\"You must have Microsofts XML parsers available\")\n     }\n     }\n     @else\n     alert(\"You must have JScript version 5 or above.\")\n     xmlhttp=false\n     alerted=true\n     @end @*/\n    if (!xmlhttp && !alerted) {\n        // Non ECMAScript Ed. 3 will error here (IE<5 ok), nothing I can\n        // realistically do about it, blame the w3c or ECMA for not\n        // having a working versioning capability in  <SCRIPT> or\n        // ECMAScript.\n        try {\n            xmlhttp = new XMLHttpRequest();\n        } catch (e) {\n            alert('You need a browser which supports an XMLHttpRequest Object.\\nMozilla build 0.9.5 has this Object and IE5 and above, others may do, I don\\'t know, any info jim@jibbering.com');\n        }\n    }\n    return xmlhttp;\n}\n\n//expose to global scope\nwindow.ajaxNonReturningUpdate = ajaxNonReturningUpdate;\n\nexport {\n    ajaxErrorHandler,\n    ajaxClobberredUpdate,\n    isValidJsonResponse,\n    getPostData,\n    checkForErrors,\n    ajaxRequestStarted,\n    ajaxTargettedFormSubmit,\n    ajaxUpdate,\n    evalJSONResponseHandler,\n    rowCopyResponseHandler,\n    cumulativeResponseHandler,\n    updateUsingResponseSubset,\n    targettedResponseHandler,\n    ajaxRequestEnded,\n    handleResponse,\n    invokeCallbacks,\n    getXMLHTTP,\n    ajax,\n    ajaxTargettedUpdate,\n    ajaxNonReturningUpdate,\n    appendPostData,\n    AjaxRequester\n};","/*\n * Copyright (C) 2005 - 2022 TIBCO Software Inc. All rights reserved.\n * http://www.jaspersoft.com.\n *\n * Unless you have purchased a commercial license agreement from Jaspersoft,\n * the following license terms apply:\n *\n * This program is free software: you can redistribute it and/or modify\n * it under the terms of the GNU Affero General Public License as\n * published by the Free Software Foundation, either version 3 of the\n * License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the\n * GNU Affero General Public License for more details.\n *\n * You should have received a copy of the GNU Affero General Public License\n * along with this program. If not, see <http://www.gnu.org/licenses/>.\n */\n\nimport dialogs from \"../components/components.dialogs\";\nimport {JRS} from \"../namespace/namespace\";\nimport jQuery from 'jquery';\n\nfunction showErrorPopup(errorMessage, options) {\n    if ((errorMessage && errorMessage.indexOf('sessionAttributeMissingException')) > -1) {\n        dialogs.clusterErrorPopup.show(errorMessage);\n    } else {\n        dialogs.errorPopup.show(errorMessage, false, options);\n    }\n}\nfunction baseErrorHandler(ajaxAgent) {\n    //Handling HTTP 500 - Internal server error\n    if (ajaxAgent.status == 500) {\n        showErrorPopup(ajaxAgent.responseText);\n        return true;\n    }\n    var sessionTimeout = ajaxAgent.getResponseHeader('LoginRequested');\n    if (sessionTimeout) {\n        var newloc = '.';\n        document.location = newloc;\n        return true;\n    }\n    var isErrorPage = ajaxAgent.getResponseHeader('JasperServerError');\n    if (isErrorPage) {\n        var suppressError = ajaxAgent.getResponseHeader('SuppressError');\n        if (!suppressError) {\n            // For dashboard frame we should render error message as frame content.\n            var dashboardViewFrame = jQuery('.dashboardViewFrame');\n            if (dashboardViewFrame.length == 1) {\n                jQuery(document.body).html(ajaxAgent.responseText);\n                var iFrame = jQuery('#' + JRS.fid, window.parent.document);\n                iFrame.removeClass('hidden').show();\n            } else {\n                // In other cases we render error message as popup.\n                showErrorPopup(ajaxAgent.responseText);\n            }\n        }\n        return true;\n    }\n    return false;\n}\n\nfunction errorHandler() {}\nfunction showMessageDialog() {}\n\nexport {\n    showErrorPopup,\n    baseErrorHandler,\n    errorHandler,\n    showMessageDialog\n}"],"sourceRoot":""}