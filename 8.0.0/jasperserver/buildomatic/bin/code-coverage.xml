<!--
  ~ Copyright (C) 2005 - 2020 TIBCO Software Inc. All rights reserved.
  ~ http://www.jaspersoft.com.
  ~
  ~ Unless you have purchased a commercial license agreement from Jaspersoft,
  ~ the following license terms apply:
  ~
  ~ This program is free software: you can redistribute it and/or modify
  ~ it under the terms of the GNU Affero General Public License as
  ~ published by the Free Software Foundation, either version 3 of the
  ~ License, or (at your option) any later version.
  ~
  ~ This program is distributed in the hope that it will be useful,
  ~ but WITHOUT ANY WARRANTY; without even the implied warranty of
  ~ MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the
  ~ GNU Affero General Public License for more details.
  ~
  ~ You should have received a copy of the GNU Affero General Public License
  ~ along with this program. If not, see <http://www.gnu.org/licenses/>.
  -->

<project xmlns:jacoco="antlib:org.jacoco.ant" name="code-coverage">

    <taskdef uri="antlib:org.jacoco.ant" resource="org/jacoco/ant/antlib.xml">
	    <classpath path="${js-path}/buildomatic/install_resources/extra-jars/jacocoant.jar"/>
    </taskdef>

    <property name="cc.result.dir" location="${js-pro-path}/code-coverage/cc-report"/>
    <property name="cc.result.file" location="${cc.result.dir}/jacoco-merged.exec"/>

    <target name="__cc-info">
        <loglistener level="error"></loglistener>
        <echo level="info">Collecting jacoco*.exec files and building a coverage report</echo>
        <echo level="info">Destination : ${cc.result.file}</echo>
        <echo level="info">js-path : ${js-path}</echo>
        <echo level="info">js-pro-path : ${js-pro-path}</echo>
    </target>

    <target name="__cc-clean">
        <loglistener level="error"></loglistener>
        <delete dir="${cc.result.dir}"/>
    </target>

    <target name="__cc-collect-and-build-report" depends="__cc-info,__cc-clean, __cc-merge, __cc-report-by-module ">
        <loglistener level="error"></loglistener>
    </target>
	
	<target name="__cc-code-coverage-validate" depends="__cc-info , __cc-validate">
        <loglistener level="error"></loglistener>
    </target>

	<copy file="jacoco.coverage.conf.json" tofile="jacoco.coverage.temp.json" failonerror="false" quiet="true"/>
    <target name="__cc-validate">
        <loglistener level="error"></loglistener>
        <taskdef name="validate" classname="com.jaspersoft.buildomatic.codecoverage.ant.CCValidationTask">
            <classpath>
                <fileset dir="${basedir}/lib">
                    <include name="jacocoant*.jar"/>
                    <include name="jackson-annotations-*.jar"/>
                    <include name="jackson-core-*.jar"/>
                    <include name="jackson-databind-*.jar"/>
                    <include name="buildomatic.jar"/>
                </fileset>
            </classpath>
        </taskdef>
        <validate jsPath="${js-path}" jsProPath="${js-pro-path}" baseFile="/jacoco.coverage.temp.json"/>
    </target>
	
    <target name="__cc-merge">
        <loglistener level="error"></loglistener>
        <!-- Merge collects all jacoco*.exec files, including ones generated by integration and production tests -->
        <!-- Keep in mind, the default build-all does NOT trigger CE production-tests, i.e. coverage report will not include it  __cc-clean, __cc-merge, __cc-report-by-module-->
        <jacoco:merge destfile="${cc.result.file}">
            <fileset dir="${js-path}" includes="**/jacoco*.exec"/>
            <fileset dir="${js-pro-path}" includes="**/jacoco*.exec"/>
        </jacoco:merge>
    </target>

    <target name="__cc-report">
        <loglistener level="error"></loglistener>
        <!-- This report will be structured by java packages across all the source code -->
        <jacoco:report>
            <executiondata>
                <file file="${cc.result.file}"/>
            </executiondata>
            <!--  the class files and optional source files ...  -->
            <structure name="JasperReports Server Pro">
                <classfiles>
                    <fileset dir="${js-path}">
                        <include name="**/target/classes/com/jaspersoft/**/*.class"/>
                    </fileset>
                    <fileset dir="${js-pro-path}">
                        <include name="**/target/classes/com/jaspersoft/**/*.class"/>
                    </fileset>
                </classfiles>
                <sourcefiles encoding="UTF-8">
                    <fileset dir="${js-path}">
                        <include name="**/src/main/java/com/jaspersoft/**/*.java"/>
                    </fileset>
                    <fileset dir="${js-pro-path}">
                        <include name="**/src/main/java/com/jaspersoft/**/*.java"/>
                    </fileset>
                </sourcefiles>
            </structure>
            <!--  to produce reports in different formats.  -->
            <html destdir="${cc.result.dir}"/>
            <csv destfile="${cc.result.dir}/report.csv"/>
            <xml destfile="${cc.result.dir}/report.xml"/>
        </jacoco:report>
        <echo level="info">Coverage Report is at folder : ${cc.result.dir}</echo>
    </target>

    <target name="__cc-report-by-module">
        <loglistener level="error"></loglistener>
        <!-- This report will be structured by maven packages for CE and Pro. The grouping is manually specified -->
        <!-- WARNING : If module structure changes, the grouping has to be updated!! -->
        <!-- Module which don't have code are commented out below -->
        <jacoco:report>
            <executiondata>
                <file file="${cc.result.file}"/>
            </executiondata>
            <!--  the class files and optional source files ...  -->
            <structure name="JasperReports Server Pro">

                <!-- CE -->

                <group name="ce:jasperserver-api/common">
                    <classfiles>
                        <fileset dir="${js-path}/jasperserver-api/common">
                            <include name="target/classes/com/jaspersoft/**/*.class"/>
                        </fileset>
                    </classfiles>
                    <sourcefiles encoding="UTF-8">
                        <fileset dir="${js-path}/jasperserver-api/common">
                            <include name="src/main/java/com/jaspersoft/**/*.java"/>
                        </fileset>
                    </sourcefiles>
                </group>

                <group name="ce:jasperserver-api/engine">
                    <classfiles>
                        <fileset dir="${js-path}/jasperserver-api/engine">
                            <include name="target/classes/com/jaspersoft/**/*.class"/>
                        </fileset>
                    </classfiles>
                    <sourcefiles encoding="UTF-8">
                        <fileset dir="${js-path}/jasperserver-api/engine">
                            <include name="src/main/java/com/jaspersoft/**/*.java"/>
                        </fileset>
                    </sourcefiles>
                </group>

                <group name="ce:jasperserver-api/externalAuth">
                    <classfiles>
                        <fileset dir="${js-path}/jasperserver-api/externalAuth">
                            <include name="target/classes/com/jaspersoft/**/*.class"/>
                        </fileset>
                    </classfiles>
                    <sourcefiles encoding="UTF-8">
                        <fileset dir="${js-path}/jasperserver-api/externalAuth">
                            <include name="src/main/java/com/jaspersoft/**/*.java"/>
                        </fileset>
                    </sourcefiles>
                </group>

                <group name="ce:jasperserver-api/metadata">
                    <classfiles>
                        <fileset dir="${js-path}/jasperserver-api/metadata">
                            <include name="target/classes/com/jaspersoft/**/*.class"/>
                        </fileset>
                    </classfiles>
                    <sourcefiles encoding="UTF-8">
                        <fileset dir="${js-path}/jasperserver-api/metadata">
                            <include name="src/main/java/com/jaspersoft/**/*.java"/>
                        </fileset>
                    </sourcefiles>
                </group>

                <group name="ce:jasperserver-api-impl/common">
                    <classfiles>
                        <fileset dir="${js-path}/jasperserver-api-impl/common">
                            <include name="target/classes/com/jaspersoft/**/*.class"/>
                        </fileset>
                    </classfiles>
                    <sourcefiles encoding="UTF-8">
                        <fileset dir="${js-path}/jasperserver-api-impl/common">
                            <include name="src/main/java/com/jaspersoft/**/*.java"/>
                        </fileset>
                    </sourcefiles>
                </group>

                <group name="ce:jasperserver-api-impl/engine">
                    <classfiles>
                        <fileset dir="${js-path}/jasperserver-api-impl/engine">
                            <include name="target/classes/com/jaspersoft/**/*.class"/>
                        </fileset>
                    </classfiles>
                    <sourcefiles encoding="UTF-8">
                        <fileset dir="${js-path}/jasperserver-api-impl/engine">
                            <include name="src/main/java/com/jaspersoft/**/*.java"/>
                        </fileset>
                    </sourcefiles>
                </group>

                <group name="ce:jasperserver-api-impl/externalAuth">
                    <classfiles>
                        <fileset dir="${js-path}/jasperserver-api-impl/externalAuth">
                            <include name="target/classes/com/jaspersoft/**/*.class"/>
                        </fileset>
                    </classfiles>
                    <sourcefiles encoding="UTF-8">
                        <fileset dir="${js-path}/jasperserver-api-impl/externalAuth">
                            <include name="src/main/java/com/jaspersoft/**/*.java"/>
                        </fileset>
                    </sourcefiles>
                </group>

                <group name="ce:jasperserver-api-impl/metadata">
                    <classfiles>
                        <fileset dir="${js-path}/jasperserver-api-impl/metadata">
                            <include name="target/classes/com/jaspersoft/**/*.class"/>
                        </fileset>
                    </classfiles>
                    <sourcefiles encoding="UTF-8">
                        <fileset dir="${js-path}/jasperserver-api-impl/metadata">
                            <include name="src/main/java/com/jaspersoft/**/*.java"/>
                        </fileset>
                    </sourcefiles>
                </group>

                <group name="ce:jasperserver-input-controls">
                    <classfiles>
                        <fileset dir="${js-path}/jasperserver-input-controls">
                            <include name="target/classes/com/jaspersoft/**/*.class"/>
                        </fileset>
                    </classfiles>
                    <sourcefiles encoding="UTF-8">
                        <fileset dir="${js-path}/jasperserver-input-controls">
                            <include name="src/main/java/com/jaspersoft/**/*.java"/>
                        </fileset>
                    </sourcefiles>
                </group>

                <group name="ce:jasperserver-web-common-api">
                    <classfiles>
                        <fileset dir="${js-path}/jasperserver-web-common-api">
                            <include name="target/classes/com/jaspersoft/**/*.class"/>
                        </fileset>
                    </classfiles>
                    <sourcefiles encoding="UTF-8">
                        <fileset dir="${js-path}/jasperserver-web-common-api">
                            <include name="src/main/java/com/jaspersoft/**/*.java"/>
                        </fileset>
                    </sourcefiles>
                </group>

                <group name="ce:jasperserver-core-util">
                    <classfiles>
                        <fileset dir="${js-path}/jasperserver-core-util">
                            <include name="target/classes/com/jaspersoft/**/*.class"/>
                        </fileset>
                    </classfiles>
                    <sourcefiles encoding="UTF-8">
                        <fileset dir="${js-path}/jasperserver-core-util">
                            <include name="src/main/java/com/jaspersoft/**/*.java"/>
                        </fileset>
                    </sourcefiles>
                </group>

                <!--group name="ce:jasperserver-repository-hibernate">
                    <classfiles>
                        <fileset dir="${js-path}/jasperserver-repository-hibernate">
                            <include name="target/classes/com/jaspersoft/**/*.class"/>
                        </fileset>
                    </classfiles>
                    <sourcefiles encoding="UTF-8">
                        <fileset dir="${js-path}/jasperserver-repository-hibernate">
                            <include name="src/main/java/com/jaspersoft/**/*.java"/>
                        </fileset>
                    </sourcefiles>
                </group-->

                <group name="ce:jasperserver-export-tool">
                    <classfiles>
                        <fileset dir="${js-path}/jasperserver-export-tool">
                            <include name="target/classes/com/jaspersoft/**/*.class"/>
                        </fileset>
                    </classfiles>
                    <sourcefiles encoding="UTF-8">
                        <fileset dir="${js-path}/jasperserver-export-tool">
                            <include name="src/main/java/com/jaspersoft/**/*.java"/>
                        </fileset>
                    </sourcefiles>
                </group>

                <group name="ce:jasperserver-common-ws">
                    <classfiles>
                        <fileset dir="${js-path}/jasperserver-common-ws">
                            <include name="target/classes/com/jaspersoft/**/*.class"/>
                        </fileset>
                    </classfiles>
                    <sourcefiles encoding="UTF-8">
                        <fileset dir="${js-path}/jasperserver-common-ws">
                            <include name="src/main/java/com/jaspersoft/**/*.java"/>
                        </fileset>
                    </sourcefiles>
                </group>

                <group name="ce:jasperserver-custom-datasources">
                    <classfiles>
                        <fileset dir="${js-path}/jasperserver-custom-datasources">
                            <include name="target/classes/**/*.class"/>
                        </fileset>
                    </classfiles>
                    <sourcefiles encoding="UTF-8">
                        <fileset dir="${js-path}/jasperserver-custom-datasources">
                            <include name="src/main/java/**/*.java"/>
                        </fileset>
                    </sourcefiles>
                </group>

                <group name="ce:jasperserver-war-jar">
                    <classfiles>
                        <fileset dir="${js-path}/jasperserver-war-jar">
                            <include name="target/classes/com/jaspersoft/**/*.class"/>
                        </fileset>
                    </classfiles>
                    <sourcefiles encoding="UTF-8">
                        <fileset dir="${js-path}/jasperserver-war-jar">
                            <include name="src/main/java/com/jaspersoft/**/*.java"/>
                        </fileset>
                    </sourcefiles>
                </group>

                <!--group name="ce:jasperserver-war">
                    <classfiles>
                        <fileset dir="${js-path}/jasperserver-war">
                            <include name="target/classes/com/jaspersoft/**/*.class"/>
                        </fileset>
                    </classfiles>
                    <sourcefiles encoding="UTF-8">
                        <fileset dir="${js-path}/jasperserver-war">
                            <include name="src/main/java/com/jaspersoft/**/*.java"/>
                        </fileset>
                    </sourcefiles>
                </group-->

                <!--group name="ce:jasperserver-export-package">
                    <classfiles>
                        <fileset dir="${js-path}/jasperserver-export-package">
                            <include name="target/classes/com/jaspersoft/**/*.class"/>
                        </fileset>
                    </classfiles>
                    <sourcefiles encoding="UTF-8">
                        <fileset dir="${js-path}/jasperserver-export-package">
                            <include name="src/main/java/com/jaspersoft/**/*.java"/>
                        </fileset>
                    </sourcefiles>
                </group-->

                <group name="ce:jasperserver-search">
                    <classfiles>
                        <fileset dir="${js-path}/jasperserver-search">
                            <include name="target/classes/com/jaspersoft/**/*.class"/>
                        </fileset>
                    </classfiles>
                    <sourcefiles encoding="UTF-8">
                        <fileset dir="${js-path}/jasperserver-search">
                            <include name="src/main/java/com/jaspersoft/**/*.java"/>
                        </fileset>
                    </sourcefiles>
                </group>

                <group name="ce:jasperserver-remote">
                    <classfiles>
                        <fileset dir="${js-path}/jasperserver-remote">
                            <include name="target/classes/com/jaspersoft/**/*.class"/>
                        </fileset>
                    </classfiles>
                    <sourcefiles encoding="UTF-8">
                        <fileset dir="${js-path}/jasperserver-remote">
                            <include name="src/main/java/com/jaspersoft/**/*.java"/>
                        </fileset>
                    </sourcefiles>
                </group>

                <!-- Coverage for production tests will be included to respective modules results -->
                <!--group name="ce:production-tests">
                    <classfiles>
                        <fileset dir="${js-path}/production-tests">
                            <include name="target/classes/com/jaspersoft/**/*.class"/>
                        </fileset>
                    </classfiles>
                    <sourcefiles encoding="UTF-8">
                        <fileset dir="${js-path}/production-tests">
                            <include name="src/main/java/com/jaspersoft/**/*.java"/>
                        </fileset>
                    </sourcefiles>
                </group-->

                <group name="ce:jasperserver-jax-rs-rest">
                    <classfiles>
                        <fileset dir="${js-path}/jasperserver-jax-rs-rest">
                            <include name="target/classes/com/jaspersoft/**/*.class"/>
                        </fileset>
                    </classfiles>
                    <sourcefiles encoding="UTF-8">
                        <fileset dir="${js-path}/jasperserver-jax-rs-rest">
                            <include name="src/main/java/com/jaspersoft/**/*.java"/>
                        </fileset>
                    </sourcefiles>
                </group>

                <group name="ce:jasperserver-dto">
                    <classfiles>
                        <fileset dir="${js-path}/jasperserver-dto">
                            <include name="target/classes/com/jaspersoft/**/*.class"/>
                        </fileset>
                    </classfiles>
                    <sourcefiles encoding="UTF-8">
                        <fileset dir="${js-path}/jasperserver-dto">
                            <include name="src/main/java/com/jaspersoft/**/*.java"/>
                        </fileset>
                    </sourcefiles>
                </group>

                <group name="ce:jasperserver-util">
                    <classfiles>
                        <fileset dir="${js-path}/jasperserver-util">
                            <include name="target/classes/com/jaspersoft/**/*.class"/>
                        </fileset>
                    </classfiles>
                    <sourcefiles encoding="UTF-8">
                        <fileset dir="${js-path}/jasperserver-util">
                            <include name="src/main/java/com/jaspersoft/**/*.java"/>
                        </fileset>
                    </sourcefiles>
                </group>

                <group name="ce:jasperserver-connectors/mongodb-connector">
                    <classfiles>
                        <fileset dir="${js-path}/jasperserver-connectors/mongodb-connector">
                            <include name="target/classes/com/jaspersoft/**/*.class"/>
                        </fileset>
                    </classfiles>
                    <sourcefiles encoding="UTF-8">
                        <fileset dir="${js-path}/jasperserver-connectors/mongodb-connector">
                            <include name="src/main/java/com/jaspersoft/**/*.java"/>
                        </fileset>
                    </sourcefiles>
                </group>

                <group name="ce:jasperserver-action-model">
                    <classfiles>
                        <fileset dir="${js-path}/jasperserver-action-model">
                            <include name="target/classes/com/jaspersoft/**/*.class"/>
                        </fileset>
                    </classfiles>
                    <sourcefiles encoding="UTF-8">
                        <fileset dir="${js-path}/jasperserver-action-model">
                            <include name="src/main/java/com/jaspersoft/**/*.java"/>
                        </fileset>
                    </sourcefiles>
                </group>

                <group name="ce:jasperserver-ftp">
                    <classfiles>
                        <fileset dir="${js-path}/jasperserver-ftp">
                            <include name="target/classes/com/jaspersoft/**/*.class"/>
                        </fileset>
                    </classfiles>
                    <sourcefiles encoding="UTF-8">
                        <fileset dir="${js-path}/jasperserver-ftp">
                            <include name="src/main/java/com/jaspersoft/**/*.java"/>
                        </fileset>
                    </sourcefiles>
                </group>

                <!-- Pro -->

                <group name="pro:easy-xml">
                    <classfiles>
                        <fileset dir="${js-pro-path}/easy-xml">
                            <include name="target/classes/com/jaspersoft/**/*.class"/>
                        </fileset>
                    </classfiles>
                    <sourcefiles encoding="UTF-8">
                        <fileset dir="${js-pro-path}/easy-xml">
                            <include name="src/main/java/com/jaspersoft/**/*.java"/>
                        </fileset>
                    </sourcefiles>
                </group>

                <group name="pro:common">
                    <classfiles>
                        <fileset dir="${js-pro-path}/common">
                            <include name="target/classes/com/jaspersoft/**/*.class"/>
                        </fileset>
                    </classfiles>
                    <sourcefiles encoding="UTF-8">
                        <fileset dir="${js-pro-path}/common">
                            <include name="src/main/java/com/jaspersoft/**/*.java"/>
                        </fileset>
                    </sourcefiles>
                </group>

                <group name="pro:common-export">
                    <classfiles>
                        <fileset dir="${js-pro-path}/common-export">
                            <include name="target/classes/com/jaspersoft/**/*.class"/>
                        </fileset>
                    </classfiles>
                    <sourcefiles encoding="UTF-8">
                        <fileset dir="${js-pro-path}/common-export">
                            <include name="src/main/java/com/jaspersoft/**/*.java"/>
                        </fileset>
                    </sourcefiles>
                </group>

                <group name="pro:mondrian-aop-woven">
                    <classfiles>
                        <fileset dir="${js-pro-path}/mondrian-aop-woven">
                            <include name="target/classes/com/jaspersoft/**/*.class"/>
                        </fileset>
                    </classfiles>
                    <sourcefiles encoding="UTF-8">
                        <fileset dir="${js-pro-path}/mondrian-aop-woven">
                            <include name="src/main/java/com/jaspersoft/**/*.java"/>
                        </fileset>
                    </sourcefiles>
                </group>

                <group name="pro:jpivot-aop-woven">
                    <classfiles>
                        <fileset dir="${js-pro-path}/jpivot-aop-woven">
                            <include name="target/classes/com/jaspersoft/**/*.class"/>
                        </fileset>
                    </classfiles>
                    <sourcefiles encoding="UTF-8">
                        <fileset dir="${js-pro-path}/jpivot-aop-woven">
                            <include name="src/main/java/com/jaspersoft/**/*.java"/>
                        </fileset>
                    </sourcefiles>
                </group>

                <group name="pro:license">
                    <classfiles>
                        <fileset dir="${js-pro-path}/license">
                            <include name="target/classes/com/jaspersoft/**/*.class"/>
                        </fileset>
                    </classfiles>
                    <sourcefiles encoding="UTF-8">
                        <fileset dir="${js-pro-path}/license">
                            <include name="src/main/java/com/jaspersoft/**/*.java"/>
                        </fileset>
                    </sourcefiles>
                </group>

                <group name="pro:datarator">
                    <classfiles>
                        <fileset dir="${js-pro-path}/datarator">
                            <include name="target/classes/com/jaspersoft/**/*.class"/>
                        </fileset>
                    </classfiles>
                    <sourcefiles encoding="UTF-8">
                        <fileset dir="${js-pro-path}/datarator">
                            <include name="src/main/java/com/jaspersoft/**/*.java"/>
                        </fileset>
                    </sourcefiles>
                </group>

                <group name="pro:datarator-el">
                    <classfiles>
                        <fileset dir="${js-pro-path}/datarator-el">
                            <include name="target/classes/com/jaspersoft/**/*.class"/>
                        </fileset>
                    </classfiles>
                    <sourcefiles encoding="UTF-8">
                        <fileset dir="${js-pro-path}/datarator-el">
                            <include name="src/main/java/com/jaspersoft/**/*.java"/>
                        </fileset>
                    </sourcefiles>
                </group>

                <group name="pro:semantic-layer">
                    <classfiles>
                        <fileset dir="${js-pro-path}/semantic-layer">
                            <include name="target/classes/com/jaspersoft/**/*.class"/>
                        </fileset>
                    </classfiles>
                    <sourcefiles encoding="UTF-8">
                        <fileset dir="${js-pro-path}/semantic-layer">
                            <include name="src/main/java/com/jaspersoft/**/*.java"/>
                        </fileset>
                    </sourcefiles>
                </group>

                <group name="pro:multi-tenancy">
                    <classfiles>
                        <fileset dir="${js-pro-path}/multi-tenancy">
                            <include name="target/classes/com/jaspersoft/**/*.class"/>
                        </fileset>
                    </classfiles>
                    <sourcefiles encoding="UTF-8">
                        <fileset dir="${js-pro-path}/multi-tenancy">
                            <include name="src/main/java/com/jaspersoft/**/*.java"/>
                        </fileset>
                    </sourcefiles>
                </group>

                <group name="pro:analysis">
                    <classfiles>
                        <fileset dir="${js-pro-path}/analysis">
                            <include name="target/classes/com/jaspersoft/**/*.class"/>
                        </fileset>
                    </classfiles>
                    <sourcefiles encoding="UTF-8">
                        <fileset dir="${js-pro-path}/analysis">
                            <include name="src/main/java/com/jaspersoft/**/*.java"/>
                        </fileset>
                    </sourcefiles>
                </group>

                <group name="pro:analysis-export">
                    <classfiles>
                        <fileset dir="${js-pro-path}/analysis-export">
                            <include name="target/classes/com/jaspersoft/**/*.class"/>
                        </fileset>
                    </classfiles>
                    <sourcefiles encoding="UTF-8">
                        <fileset dir="${js-pro-path}/analysis-export">
                            <include name="src/main/java/com/jaspersoft/**/*.java"/>
                        </fileset>
                    </sourcefiles>
                </group>

                <group name="pro:adhoc-engine/adhoc-mocks">
                    <classfiles>
                        <fileset dir="${js-pro-path}/adhoc-engine/adhoc-mocks">
                            <include name="target/classes/com/jaspersoft/**/*.class"/>
                        </fileset>
                    </classfiles>
                    <sourcefiles encoding="UTF-8">
                        <fileset dir="${js-pro-path}/adhoc-engine/adhoc-mocks">
                            <include name="src/main/java/com/jaspersoft/**/*.java"/>
                        </fileset>
                    </sourcefiles>
                </group>

                <group name="pro:adhoc-engine/adhoc-model">
                    <classfiles>
                        <fileset dir="${js-pro-path}/adhoc-engine/adhoc-model">
                            <include name="target/classes/com/jaspersoft/**/*.class"/>
                        </fileset>
                    </classfiles>
                    <sourcefiles encoding="UTF-8">
                        <fileset dir="${js-pro-path}/adhoc-engine/adhoc-model">
                            <include name="src/main/java/com/jaspersoft/**/*.java"/>
                        </fileset>
                    </sourcefiles>
                </group>

                <group name="pro:adhoc-engine/adhoc-persistence">
                    <classfiles>
                        <fileset dir="${js-pro-path}/adhoc-engine/adhoc-persistence">
                            <include name="target/classes/com/jaspersoft/**/*.class"/>
                        </fileset>
                    </classfiles>
                    <sourcefiles encoding="UTF-8">
                        <fileset dir="${js-pro-path}/adhoc-engine/adhoc-persistence">
                            <include name="src/main/java/com/jaspersoft/**/*.java"/>
                        </fileset>
                    </sourcefiles>
                </group>

                <group name="pro:gyroscope">
                    <classfiles>
                        <fileset dir="${js-pro-path}/gyroscope">
                            <include name="target/classes/com/jaspersoft/**/*.class"/>
                        </fileset>
                    </classfiles>
                    <sourcefiles encoding="UTF-8">
                        <fileset dir="${js-pro-path}/gyroscope">
                            <include name="src/main/java/com/jaspersoft/**/*.java"/>
                        </fileset>
                    </sourcefiles>
                </group>

                <group name="pro:gyroscope-web">
                    <classfiles>
                        <fileset dir="${js-pro-path}/gyroscope-web">
                            <include name="target/classes/com/jaspersoft/**/*.class"/>
                        </fileset>
                    </classfiles>
                    <sourcefiles encoding="UTF-8">
                        <fileset dir="${js-pro-path}/gyroscope-web">
                            <include name="src/main/java/com/jaspersoft/**/*.java"/>
                        </fileset>
                    </sourcefiles>
                </group>

                <group name="pro:gyroscope-export">
                    <classfiles>
                        <fileset dir="${js-pro-path}/gyroscope-export">
                            <include name="target/classes/com/jaspersoft/**/*.class"/>
                        </fileset>
                    </classfiles>
                    <sourcefiles encoding="UTF-8">
                        <fileset dir="${js-pro-path}/gyroscope-export">
                            <include name="src/main/java/com/jaspersoft/**/*.java"/>
                        </fileset>
                    </sourcefiles>
                </group>

                <group name="pro:report-options/api">
                    <classfiles>
                        <fileset dir="${js-pro-path}/report-options/api">
                            <include name="target/classes/com/jaspersoft/**/*.class"/>
                        </fileset>
                    </classfiles>
                    <sourcefiles encoding="UTF-8">
                        <fileset dir="${js-pro-path}/report-options/api">
                            <include name="src/main/java/com/jaspersoft/**/*.java"/>
                        </fileset>
                    </sourcefiles>
                </group>

                <group name="pro:report-options/export">
                    <classfiles>
                        <fileset dir="${js-pro-path}/report-options/export">
                            <include name="target/classes/com/jaspersoft/**/*.class"/>
                        </fileset>
                    </classfiles>
                    <sourcefiles encoding="UTF-8">
                        <fileset dir="${js-pro-path}/report-options/export">
                            <include name="src/main/java/com/jaspersoft/**/*.java"/>
                        </fileset>
                    </sourcefiles>
                </group>

                <group name="pro:report-options/web">
                    <classfiles>
                        <fileset dir="${js-pro-path}/report-options/web">
                            <include name="target/classes/com/jaspersoft/**/*.class"/>
                        </fileset>
                    </classfiles>
                    <sourcefiles encoding="UTF-8">
                        <fileset dir="${js-pro-path}/report-options/web">
                            <include name="src/main/java/com/jaspersoft/**/*.java"/>
                        </fileset>
                    </sourcefiles>
                </group>

                <group name="pro:jasperserver-war-jar">
                    <classfiles>
                        <fileset dir="${js-pro-path}/jasperserver-war-jar">
                            <include name="target/classes/com/jaspersoft/**/*.class"/>
                        </fileset>
                    </classfiles>
                    <sourcefiles encoding="UTF-8">
                        <fileset dir="${js-pro-path}/jasperserver-war-jar">
                            <include name="src/main/java/com/jaspersoft/**/*.java"/>
                        </fileset>
                    </sourcefiles>
                </group>

                <group name="pro:gyroscope-ireport-plugin">
                    <classfiles>
                        <fileset dir="${js-pro-path}/gyroscope-ireport-plugin">
                            <include name="target/classes/com/jaspersoft/**/*.class"/>
                        </fileset>
                    </classfiles>
                    <sourcefiles encoding="UTF-8">
                        <fileset dir="${js-pro-path}/gyroscope-ireport-plugin">
                            <include name="src/main/java/com/jaspersoft/**/*.java"/>
                        </fileset>
                    </sourcefiles>
                </group>

                <group name="pro:teiid-integration">
                    <classfiles>
                        <fileset dir="${js-pro-path}/teiid-integration">
                            <include name="target/classes/com/jaspersoft/**/*.class"/>
                        </fileset>
                    </classfiles>
                    <sourcefiles encoding="UTF-8">
                        <fileset dir="${js-pro-path}/teiid-integration">
                            <include name="src/main/java/com/jaspersoft/**/*.java"/>
                        </fileset>
                    </sourcefiles>
                </group>

                <group name="pro:repository-hibernate">
                    <classfiles>
                        <fileset dir="${js-pro-path}/repository-hibernate">
                            <include name="target/classes/com/jaspersoft/**/*.class"/>
                        </fileset>
                    </classfiles>
                    <sourcefiles encoding="UTF-8">
                        <fileset dir="${js-pro-path}/repository-hibernate">
                            <include name="src/main/java/com/jaspersoft/**/*.java"/>
                        </fileset>
                    </sourcefiles>
                </group>

                <!--group name="pro:jasperserver-common-ws">
                    <classfiles>
                        <fileset dir="${js-pro-path}/jasperserver-common-ws">
                            <include name="target/classes/com/jaspersoft/**/*.class"/>
                        </fileset>
                    </classfiles>
                    <sourcefiles encoding="UTF-8">
                        <fileset dir="${js-pro-path}/jasperserver-common-ws">
                            <include name="src/main/java/com/jaspersoft/**/*.java"/>
                        </fileset>
                    </sourcefiles>
                </group-->

                <group name="pro:search">
                    <classfiles>
                        <fileset dir="${js-pro-path}/search">
                            <include name="target/classes/com/jaspersoft/**/*.class"/>
                        </fileset>
                    </classfiles>
                    <sourcefiles encoding="UTF-8">
                        <fileset dir="${js-pro-path}/search">
                            <include name="src/main/java/com/jaspersoft/**/*.java"/>
                        </fileset>
                    </sourcefiles>
                </group>

                <!--group name="pro:jasperserver-war">
                    <classfiles>
                        <fileset dir="${js-pro-path}/jasperserver-war">
                            <include name="target/classes/com/jaspersoft/**/*.class"/>
                        </fileset>
                    </classfiles>
                    <sourcefiles encoding="UTF-8">
                        <fileset dir="${js-pro-path}/jasperserver-war">
                            <include name="src/main/java/com/jaspersoft/**/*.java"/>
                        </fileset>
                    </sourcefiles>
                </group-->

                <!--group name="pro:export-tool">
                    <classfiles>
                        <fileset dir="${js-pro-path}/export-tool">
                            <include name="target/classes/com/jaspersoft/**/*.class"/>
                        </fileset>
                    </classfiles>
                    <sourcefiles encoding="UTF-8">
                        <fileset dir="${js-pro-path}/export-tool">
                            <include name="src/main/java/com/jaspersoft/**/*.java"/>
                        </fileset>
                    </sourcefiles>
                </group-->

                <!-- Coverage for integration tests will be included to respective modules results -->
                <!--group name="pro:integration-tests">
                    <classfiles>
                        <fileset dir="${js-pro-path}/integration-tests">
                            <include name="target/classes/com/jaspersoft/**/*.class"/>
                        </fileset>
                    </classfiles>
                    <sourcefiles encoding="UTF-8">
                        <fileset dir="${js-pro-path}/integration-tests">
                            <include name="src/main/java/com/jaspersoft/**/*.java"/>
                        </fileset>
                    </sourcefiles>
                </group-->

                <group name="pro:jasperserver-remote">
                    <classfiles>
                        <fileset dir="${js-pro-path}/jasperserver-remote">
                            <include name="target/classes/com/jaspersoft/**/*.class"/>
                        </fileset>
                    </classfiles>
                    <sourcefiles encoding="UTF-8">
                        <fileset dir="${js-pro-path}/jasperserver-remote">
                            <include name="src/main/java/com/jaspersoft/**/*.java"/>
                        </fileset>
                    </sourcefiles>
                </group>

                <!-- Coverage for production tests will be included to respective modules results -->
                <!--group name="pro:production-tests">
                    <classfiles>
                        <fileset dir="${js-pro-path}/production-tests">
                            <include name="target/classes/com/jaspersoft/**/*.class"/>
                        </fileset>
                    </classfiles>
                    <sourcefiles encoding="UTF-8">
                        <fileset dir="${js-pro-path}/production-tests">
                            <include name="src/main/java/com/jaspersoft/**/*.java"/>
                        </fileset>
                    </sourcefiles>
                </group-->

                <group name="pro:jasperserver-jax-rs-rest">
                    <classfiles>
                        <fileset dir="${js-pro-path}/jasperserver-jax-rs-rest">
                            <include name="target/classes/com/jaspersoft/**/*.class"/>
                        </fileset>
                    </classfiles>
                    <sourcefiles encoding="UTF-8">
                        <fileset dir="${js-pro-path}/jasperserver-jax-rs-rest">
                            <include name="src/main/java/com/jaspersoft/**/*.java"/>
                        </fileset>
                    </sourcefiles>
                </group>

            </structure>
            <!--  to produce reports in different formats.  -->
            <html destdir="${cc.result.dir}"/>
            <csv destfile="${cc.result.dir}/report.csv"/>
            <xml destfile="${cc.result.dir}/report.xml"/>
        </jacoco:report>
        <echo level="info">Coverage Report is at folder : ${cc.result.dir}</echo>
    </target>

</project>
